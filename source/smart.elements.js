
/* Smart HTML Elements v2.4.0 (2019-April) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

(function(){"use strict";function t(t,a){const i=a.properties;a._properties=[];const n=function(o,l){const r=Object.keys(o);for(let s=0;s<r.length;s++){const i=r[s],d=o[i];if(a._properties[l+i]=d,Array.isArray(d)){a._properties[l+i]=new ObservableArray(d,function(a){const n=i+"."+a.path,o=a.newValue,l=document.querySelector(t);if(l){const t=n.split(".");let a=l;for(let n=0;n<t.length;n++){const i=t[n];a=a[i]}a=o}});continue}(Object.defineProperty(o,i,{configurable:!1,enumerable:!0,get(){return a._properties[l+i]},set(t){a._properties[l+i]=t}}),"DataAdapter"!==d.constructor.name)&&"object"==typeof d&&d&&0<Object.keys(d).length&&n(d,l+i+".")}};n(i,""),Object.defineProperty(a,"properties",{configurable:!1,enumerable:!0,get(){return i}});const o=document.querySelector(t);if(o&&o.isReady)for(let t in i)o[t]=i[t]}var i=Math.floor,n=Math.asin,o=Math.abs,a=Math.sqrt,l=Math.pow,r=Math.sin,s=Math.cos,m=Math.PI,d=Math.max;const c="3.0.0",u=[];let p="Smart";if(window[p]&&window[p].Version){if(window[p].Version===c)return;if(window[p].Version!==c)p+=c;else for(let t=2;window[p];)p+=t.toString(),t++}class LocalizationModule{static get moduleName(){return"LocalizationModule"}static get properties(){return{messages:{value:{en:{}},type:"object",inherit:!0,reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1}}}addMessages(t,i){const a=this;Object.assign(a.messages[t],i)}localize(t,i){const a=this;if(!a.messages||!a.messages[a.locale])return;let n=a.messages[a.locale][t];if(""===n)return"";if(n){const t=n;for(let t in i){let a=i[t];n=n.replace(new RegExp("{{"+t+"}}","g"),a)}return a.localizeFormatFunction&&a.localizeFormatFunction(t,n,i),n}}}class ErrorModule{static get moduleName(){return"ErrorModule"}static get properties(){return{rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1}}}log(t){const i=this;i._logger("log",t)}warn(t){const i=this;i._logger("warn",t)}error(t){const i=this;i._logger("error",t)}_logger(t,i){const a=this;if(a.debugMode){const a=i instanceof Error?i.message:i.toString();console[t](a)}if(a.rethrowError&&"error"===t)throw i}}class BindingModule{static get moduleName(){return"BindingModule"}getBindings(t){const i=this;let a=0,n={},o=(t=>{if(t instanceof HTMLElement)return i.parseAttributes(t);else{let a=i.parseProperty(t.data?t.data.trim():null,"textContent",t);if(a)return i.ownerElement&&t.parentNode===i.ownerElement.$.content&&(a.value=""===i.ownerElement.$.html?void 0:i.ownerElement.$.html,i.ownerElement.innerHTML=""),{textContent:a}}})(t);o&&(n.data=o),t.getAttribute&&(n.nodeId=t.getAttribute("smart-id")),n.node=t,t.firstChild&&(n.children={});for(let o=t.firstChild;o;o=o.nextSibling)n.children[a++]=i.getBindings(o);return n}_addRemovePropertyBinding(t,i,a,n){if(!t||!i||!a)return;const o=this,l=o.ownerElement.bindings,r=a.getAttribute("smart-id"),s=0<=t.indexOf("{{");t=t.replace("{{","").replace("}}","").replace("[[","").replace("]]","");let d=!1;0<=t.indexOf("!")&&(t=t.replace("!",""),d=!0);const m=o.ownerElement._properties[t],c={name:t,reflectToAttribute:m.reflectToAttribute,twoWay:s,type:m.type,not:d},u=function(t){for(let l in t){const s=t[l];if(s.nodeId===r){s.data||(s.data={}),n?(s.data[i]=null,delete s.data[i]):s.data[i]=c;break}if(s.children)u(s.children);else if(s.node&&s.node.children&&s.node===a.parentElement){const t=s.node;if(t.firstChild)s.children={};else continue;let i=0;for(let a=t.firstChild;a;a=a.nextSibling)s.children[i++]=o.getBindings(a);u(s.children)}}};u(l.children),n?delete o.ownerElement.boundProperties[t]:o.ownerElement.boundProperties[t]=!0,o.updateBoundNodes(t)}addPropertyBinding(t,i,a){const n=this;n._addRemovePropertyBinding(t,i,a)}removePropertyBinding(t,i,a){const n=this;n._addRemovePropertyBinding(t,i,a,!0)}parseAttributes(t){const a=this;let n;for(let o=0;o<t.attributes.length;o++){const i=t.attributes[o],l=i.name,r=i.value;BindingModule.cache["toCamelCase"+l]||(BindingModule.cache["toCamelCase"+l]=Utilities.Core.toCamelCase(l));const s=BindingModule.cache["toCamelCase"+l];if(0<=l.indexOf("(")){let i=l.substring(1,l.length-1);if(a.ownerElement&&!a.ownerElement.dataContext){a.ownerElement.templateListeners[t.getAttribute("smart-id")+"."+i]=r,t.removeAttribute(l);continue}else{n||(n={});const t=r.substring(0,r.indexOf("("));n[s]={isEvent:!0,name:i,value:t};continue}}let d=a.parseProperty(r,l,t);d&&(n||(n={}),n[s]=d)}return n}parseProperty(t,i){if(!t||!t.length)return;const a=this;let n=t.length,o=0,l=0,r=0,s=!0,d;for(;l<n;){o=t.indexOf("{{",l);let i=t.indexOf("[[",l),a="}}";if(0<=i&&(0>o||i<o)&&(o=i,s=!1,a="]]"),r=0>o?-1:t.indexOf(a,o+2),0>r)return;d=d||{};let n=t.slice(o+2,r).trim();d.name=n,l=r+2}const m=d.name,c=a.ownerElement?a.ownerElement._properties[m]:null;if(d.twoWay=s,d.ready=!1,a.ownerElement&&(0<=m.indexOf("::")?a.ownerElement.boundProperties[m.substring(0,m.indexOf("::"))]=!0:a.ownerElement.boundProperties[m]=!0),c)d.type=c.type,d.reflectToAttribute=c.reflectToAttribute;else{d.type=0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(i)?"boolean":"string",d.reflectToAttribute=!0}return d}updateTextNodes(){const t=this;t.updateTextNode(t.ownerElement.shadowRoot||t.ownerElement,t.ownerElement.bindings,t.ownerElement)}updateTextNode(t,i,a){const n=this;if(!i)return;let o=0;for(let l=t.firstChild;l&&!!i.children;l=l.nextSibling)n.updateTextNode(l,i.children[o++],a);if(i&&i.data)for(let t in i.data){const n=i.data[t],o=n.name;"textContent"==t&&n.twoWay&&!n.updating&&void 0!==n.value&&(a[o]=n.value)}}updateBoundProperty(t,i){if(i.updating)return;const a=this,n=a.ownerElement;i.updating=!0,n[t]=i.value,i.updating=!1}updateBoundNodes(t){const a=this;if(a.updateBoundNode(a.ownerElement.shadowRoot||a.ownerElement,a.ownerElement.bindings,a.ownerElement,t),0<a.ownerElement.detachedChildren.length)for(let n=0;n<a.ownerElement.detachedChildren.length;n++){const i=a.ownerElement.detachedChildren[n],o=i.getAttribute("smart-id"),l=function(t){if(t.nodeId===o)return t;for(let i in t.children){const a=t.children[i],n=a.getAttribute?a.getAttribute("smart-id"):"";if(n===o)return t;if(a.children){const t=l(a);if(t)return t}}return null},r=l(a.ownerElement.bindings);r&&a.updateBoundNode(i,r,a.ownerElement,t,!0)}}updateBoundNode(t,i,a,n,o){const l=this;if(!i)return;let r=0;if(!o){for(let o=t.firstChild;o&&!!i.children;o=o.nextSibling)if(o.getAttribute){const t=o.getAttribute("smart-id"),s=function(){for(let a in i.children)if(i.children[a].nodeId===t)return i.children[a]}();l.updateBoundNode(o,s,a,n),r++}else l.updateBoundNode(o,i.children[r++],a,n);}else if(o&&!i.data)for(let s=t.firstChild;s&&!!i.children;s=s.nextSibling)if(s.getAttribute){const t=s.getAttribute("smart-id"),o=function(){for(let a in i.children)if(i.children[a].nodeId===t)return i.children[a]}();l.updateBoundNode(s,o,a,n),r++}else l.updateBoundNode(s,i.children[r++],a,n,o);if(i&&i.data)for(let o in i.data){const r=i.data[o];let s=r.name;if(!r.updating&&(0<=s.indexOf("::")&&(s=s.substring(0,s.indexOf("::"))),void 0===n||n===s)){if(0<=s.indexOf("(")){let t=s.substring(s.indexOf("("));const i=s.substring(0,s.indexOf("("));if(t=t.substring(1,t.length-1),t=t.replace(/ /ig,""),t=t.split(","),0<t.length&&""!==t[0]){let n=[];for(let o=0;o<t.length;o++)n.push(a[t[o]]);r.value=a[i].apply(a,n)}else r.value=a[i]();r.type=typeof r.value}else r.value=a[s];if("innerHTML"===s?t[o].toString().trim()!==a[s].toString().trim()&&(r.ready?t[o]=r.value.toString().trim():a._properties[s].defaultValue!==r.value&&(t[o]=r.value.toString().trim())):r.not?t[o]=!r.value:t[o]=r.value,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const i=BindingModule.cache["toDash"+o],a=t.$.getAttributeValue(i,r.type);r.reflectToAttribute&&(a!==r.value||!r.ready)&&t.$.setAttributeValue(i,r.value,r.type),r.reflectToAttribute||t.$.setAttributeValue(i,null,r.type)}if(!r.ready){if(t.$&&t.$.isCustomElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const i=BindingModule.cache["toDash"+o];t._properties||(t._beforeCreatedProperties=t._properties=t.propertyByAttributeName=[]),t._properties[o]||(t._properties[o]={attributeName:i},t._beforeCreatedProperties[o]=t._properties[o],t.propertyByAttributeName[i]=t._properties[o]);const a=t._properties[o];a.isUpdating=!0,r.reflectToAttribute&&(r.not?t.$.setAttributeValue(a.attributeName,!r.value,r.type):t.$.setAttributeValue(a.attributeName,r.value,r.type)),r.reflectToAttribute||t.$.setAttributeValue(a.attributeName,null,r.type),a.isUpdating=!1}if(r.twoWay){const i=function(i){if(r.value=i,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const i=BindingModule.cache["toDash"+o],a=t.$.getAttributeValue(i,r.type);r.reflectToAttribute&&a!==r.value&&t.$.setAttributeValue(i,r.value,r.type),r.reflectToAttribute||t.$.setAttributeValue(i,null,r.type)}};if(0<=r.name.indexOf("::")){const a=r.name.indexOf("::"),n=r.name.substring(a+2);l.ownerElement["$"+t.getAttribute("smart-id")].listen(n,function(){i(t[o]);const a=r.name.substring(0,r.name.indexOf("::"));l.updateBoundProperty(a,r)})}if(t.$&&t.$.isCustomElement){t._properties[o]&&(t._properties[o].notify=!0),BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const a=BindingModule.cache["toDash"+o];l.ownerElement["$"+t.getAttribute("smart-id")].listen(a+"-changed",function(t){let a=t.detail;i(a.value);const n=l.ownerElement.context;t.context!==document&&(l.ownerElement.context=l.ownerElement),l.updateBoundProperty(r.name,r),l.ownerElement.context=n})}}}r.ready=!0}}}static clearCache(){const t=this;t.cache={}}}class Types{static isBoolean(t){return"boolean"==typeof t}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static isArray(t){return Array.isArray(t)}static isObject(t){const i=this;return t&&("object"==typeof t||i.isFunction(t))||!1}static isDate(t){return t instanceof Date}static isString(t){return"string"==typeof t}static isNumber(t){return"number"==typeof t}static getType(t){const i=this,a=["Boolean","Number","String","Function","Array","Date","Object"].find(a=>{if(i["is"+a](t))return a});return a?a.toLowerCase():void 0}}class Ripple{static animate(t,i,a,n){const o=t;if(!o||!1==o instanceof HTMLElement)return;if(0===o.getElementsByClassName("smart-ripple").length){const t=document.createElement("span");t.classList.add("smart-ripple");let i=!0,a=null;if(window[p].EnableShadowDOM&&o.enableShadowDOM){for(let t=0;t<o.shadowRoot.host.shadowRoot.children.length;t++)"link"!==o.shadowRoot.host.shadowRoot.children[t].tagName.toLowerCase()&&(a=o.shadowRoot.host.shadowRoot.children[t]);o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(i=!1)}else a=o.firstElementChild;i&&(a&&!a.noRipple&&0<a.offsetHeight?a.appendChild(t):o.appendChild(t))}let l=null;if(l=window[p].EnableShadowDOM&&o.enableShadowDOM?o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):o.getElementsByClassName("smart-ripple")[0],!!l){l.innerHTML="",l.classList.remove("smart-animate"),l.style.height=l.style.width=d(o.offsetHeight,o.offsetWidth)+"px";const t=window.getComputedStyle(l.parentElement),r=parseInt(t.borderLeftWidth)||0,s=parseInt(t.borderTopWidth)||0,m=o.getBoundingClientRect(),c=i-(m.left+window.pageXOffset)-l.offsetWidth/2-r,u=a-(m.top+window.pageYOffset)-l.offsetHeight/2-s;l.style.left=c+"px",l.style.top=u+"px",l.classList.add("smart-animate"),l.addEventListener("animationend",function t(){l.parentElement&&l.parentElement.removeChild(l),n&&n(),l.removeEventListener("animationend",t),l.removeEventListener("animationcancel",t)}),l.addEventListener("animationcancel",function t(){l.parentElement&&l.parentElement.removeChild(l),n&&n(),l.removeEventListener("animationcancel",t),l.removeEventListener("animationend",t)})}}}class Easings{static easeInQuad(i,a,n,o){return n*(i/=o)*i+a}static easeOutQuad(i,a,n,o){return-n*(i/=o)*(i-2)+a}static easeInOutQuad(i,a,n,o){return 1>(i/=o/2)?n/2*i*i+a:-n/2*(--i*(i-2)-1)+a}static easeInCubic(i,a,n,o){return n*(i/=o)*i*i+a}static easeOutCubic(i,a,n,o){return n*((i=i/o-1)*i*i+1)+a}static easeInOutCubic(i,a,n,o){return 1>(i/=o/2)?n/2*i*i*i+a:n/2*((i-=2)*i*i+2)+a}static easeInQuart(i,a,n,o){return n*(i/=o)*i*i*i+a}static easeOutQuart(i,a,n,o){return-n*((i=i/o-1)*i*i*i-1)+a}static easeInOutQuart(i,a,n,o){return 1>(i/=o/2)?n/2*i*i*i*i+a:-n/2*((i-=2)*i*i*i-2)+a}static easeInQuint(i,a,n,o){return n*(i/=o)*i*i*i*i+a}static easeOutQuint(i,a,n,o){return n*((i=i/o-1)*i*i*i*i+1)+a}static easeInOutQuint(i,a,n,o){return 1>(i/=o/2)?n/2*i*i*i*i*i+a:n/2*((i-=2)*i*i*i*i+2)+a}static easeInSine(i,t,a,n){return-a*s(i/n*(m/2))+a+t}static easeOutSine(i,t,a,n){return a*r(i/n*(m/2))+t}static easeInOutSine(i,t,a,n){return-a/2*(s(m*i/n)-1)+t}static easeInExpo(i,t,a,n){return 0===i?t:a*l(2,10*(i/n-1))+t}static easeOutExpo(i,t,a,n){return i===n?t+a:a*(-l(2,-10*i/n)+1)+t}static easeInOutExpo(i,a,n,o){return 0===i?a:i===o?a+n:1>(i/=o/2)?n/2*l(2,10*(i-1))+a:n/2*(-l(2,-10*--i)+2)+a}static easeInCirc(i,n,o,l){return-o*(a(1-(i/=l)*i)-1)+n}static easeOutCirc(i,n,o,l){return o*a(1-(i=i/l-1)*i)+n}static easeInOutCirc(i,n,o,l){return 1>(i/=l/2)?-o/2*(a(1-i*i)-1)+n:o/2*(a(1-(i-=2)*i)+1)+n}static easeInElastic(i,u,g,c){let d=1.70158,h=0,_=g;return 0===i?u:1===(i/=c)?u+g:(h||(h=.3*c),_<o(g)?(_=g,d=h/4):d=h/(2*m)*n(g/_),-(_*l(2,10*(i-=1))*r((i*c-d)*(2*m)/h))+u)}static easeOutElastic(i,u,g,c){let d=1.70158,h=0,_=g;return 0===i?u:1===(i/=c)?u+g:(h||(h=.3*c),_<o(g)?(_=g,d=h/4):d=h/(2*m)*n(g/_),_*l(2,-10*i)*r((i*c-d)*(2*m)/h)+g+u)}static easeInOutElastic(i,u,g,c){let d=1.70158,h=0,_=g;return 0===i?u:2==(i/=c/2)?u+g:(h||(h=c*(1.5*.3)),_<o(g)?(_=g,d=h/4):d=h/(2*m)*n(g/_),1>i?-.5*(_*l(2,10*(i-=1))*r((i*c-d)*(2*m)/h))+u:.5*(_*l(2,-10*(i-=1))*r((i*c-d)*(2*m)/h))+g+u)}static easeInBack(i,a,n,o,l){return void 0===l&&(l=1.70158),n*(i/=o)*i*((l+1)*i-l)+a}static easeOutBack(i,a,n,o,l){return void 0===l&&(l=1.70158),n*((i=i/o-1)*i*((l+1)*i+l)+1)+a}static easeInOutBack(i,a,n,o,l){return void 0===l&&(l=1.70158),1>(i/=o/2)?n/2*(i*i*(((l*=1.525)+1)*i-l))+a:n/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+a}static easeInBounce(i,t,a,n){return a-this.easeOutBounce(n-i,0,a,n)+t}static easeOutBounce(i,a,n,o){return(i/=o)<1/2.75?n*(7.5625*i*i)+a:i<2/2.75?n*(7.5625*(i-=1.5/2.75)*i+.75)+a:i<2.5/2.75?n*(7.5625*(i-=2.25/2.75)*i+.9375)+a:n*(7.5625*(i-=2.625/2.75)*i+.984375)+a}static easeInOutBounce(i,t,a,n){return i<n/2?.5*this.easeInBounce(2*i,0,a,n)+t:.5*this.easeOutBounce(2*i-n,0,a,n)+.5*a+t}}class Core{static get isMobile(){const t=/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase());return t}static get Browser(){let t;const i=function(i){let a=i.indexOf(t);if(-1!==a){const n=i.indexOf("rv:");return"Trident"===t&&-1!==n?parseFloat(i.substring(n+3)):parseFloat(i.substring(a+t.length+1))}};let a={};return a[function(){const a=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let n=0,i;n<a.length;n++)if(i=a[n].string,t=a[n].subString,-1!==i.indexOf(a[n].subString))return a[n].identity;return"Other"}()]=!0,a.version=i(navigator.userAgent)||i(navigator.appVersion)||"Unknown",a}static toCamelCase(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}static toDash(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(t){let i=new DOMParser().parseFromString(t,"text/html");return i.documentElement.textContent}static escapeHTML(t){const i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return(t+"").replace(/[&<>"'`=\/]/g,t=>i[t])}static createGUID(){function t(){return i(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static getScriptLocation(){const t=function(){if(document.currentScript){let t=document.currentScript.src,i=t.lastIndexOf("/");return t=t.substring(0,i),t}const t=new Error;let i="(",a=")";if(Smart.Utilities.Core.Browser.Safari&&(i="@",a="\n"),t.fileName)return t.fileName.replace("/smart.element.js","");let n=t.stack.split(i);return n=n[1],n=n.split(a)[0],n=n.split(":"),n.splice(-2,2),n=n.join(":"),n.replace("/smart.element.js","")}();return t}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(t,i){const a=t=>t&&"object"==typeof t&&!Array.isArray(t)&&null!==t;let n=Object.assign({},t);return a(t)&&a(i)&&Object.keys(i).forEach(o=>{a(i[o])?o in t?n[o]=this.assign(t[o],i[o]):Object.assign(n,{[o]:i[o]}):Object.assign(n,{[o]:i[o]})}),n}static html(t,i){const a=this;let n="",o=t.childNodes;if(i){const a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;return void(t.innerHTML=i.replace(a,"<$1></$2>"))}for(let r=0,s=o.length,l;r<s&&(l=o[r]);r++){if(l instanceof HTMLElement||l.tagName&&0<=["strong"].indexOf(l.tagName.toLowerCase())){const t=l.tagName.toLowerCase(),i=l.attributes;let o="<"+t;for(let t=0,a;a=i[t];t++)o+=" "+a.name+"=\""+a.value.replace(/[&\u00A0"]/g,Utilities.Core.escapeHTML)+"\"";o+=">";["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][t]&&(n+=o),n=n+o+a.html(l)+"</"+t+">"}else n+=l.textContent.replace(/[&\u00A0<>]/g,Utilities.Core.escapeHTML)}return n}}let g=[];class StyleObserver{static watch(t){g.push(t),StyleObserver.interval&&clearInterval(StyleObserver.interval),StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100)}static observeElement(t){const a=t;let n=t._computedStyle||"resize"!==a.hasStyleObserver?document.defaultView.getComputedStyle(a,null):{},i=!0,o="resize"===a.hasStyleObserver?[]:["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"];if(t.styleProperties&&(o=o.concat(t.styleProperties)),t.observableStyleProperties&&(o=t.observableStyleProperties),!a._styleInfo){a._styleInfo=[];for(let t=0;t<o.length;t++){const i=o[t];a._styleInfo[i]=n[i]}return}if(t.isHidden||"none"===n.display||requestAnimationFrame(()=>{(0===t.offsetWidth||0===t.offsetHeight)&&(t.isHidden=!0)}),t.isHidden)if(t.visibilityChangedHandler(),!t.isHidden)i=!1;else return;let l=[];for(let r=0;r<o.length;r++){const t=o[r];a._styleInfo[t]!==n[t]&&(l[t]={oldValue:a._styleInfo[t],value:n[t]},l.length++),a._styleInfo[t]=n[t]}0<l.length&&(a.$.fireEvent("styleChanged",{styleProperties:l},{bubbles:!1,cancelable:!0}),l.display&&i&&a.$.fireEvent("resize",a,{bubbles:!1,cancelable:!0}))}static observe(){for(let t=0;t<g.length;t++){const i=g[t];requestAnimationFrame(()=>{this.observeElement(i)})}}static unwatch(t){StyleObserver.interval&&clearInterval(StyleObserver.interval),g.splice(g.indexOf(t),1),0<g.length&&(StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100))}}let h=[];const _=[],f=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class InputEvents{constructor(t){const i=this;i.target=t,i.$target=new Extend(t),i.$document=new Extend(document),i.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let a={handlers:{},boundEventTypes:[],listen:i.listen.bind(i),unlisten:i.unlisten.bind(i)};return i.tapHoldDelay=750,i.swipeMin=10,i.swipeMax=5e3,i.swipeDelay=1e3,i.tapHoldDelay=750,i.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],f.forEach(t=>{a[t]=i=>{a.handlers[t]=i},i[t]=t=>{if(!a.handlers[t.type]){if(("mousemove"===t.type||"pointermove"===t.type||"touchmove"===t.type)&&a.handlers.move){const n=i.createEvent(t,"move");a.handlers.move(n)}return!0}return a.handlers[t.type](t)}}),i.listen(),i.handlers=a.handlers,a}listen(t){const i=this;if("resize"===t&&!i.target.resizeTrigger&&i.target!==document&&i.target!==window&&!1!==i.target.hasResizeObserver){const t=document.createElement("div");t.className="smart-resize-trigger-container",t.innerHTML="<div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger\"></div></div><div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger-shrink\"></div></div>",window[p].EnableShadowDOM&&i.target.enableShadowDOM?i.target.shadowRoot.appendChild(t):i.target.appendChild(t),i.target.resizeTrigger=t,requestAnimationFrame(()=>{const a=t.childNodes[0],n=a.childNodes[0],o=t.childNodes[1],l=function(){n.style.width="100000px",n.style.height="100000px",a.scrollLeft=1e5,a.scrollTop=1e5,o.scrollLeft=1e5,o.scrollTop=1e5};let r=i.target.offsetWidth,s=i.target.offsetHeight,d,m,c,u;if(0===r||0===s){const t=function(){l(),i.target.removeEventListener("resize",t)};i.target.addEventListener("resize",t),l()}else l();i.target.resizeHandler=function(){m||(m=requestAnimationFrame(function(){if(m=0,c=i.target.offsetWidth,u=i.target.offsetHeight,d=c!==r||u!==s,i.target.requiresLayout&&(d=!0),!!d){r=c,s=u;const t=new CustomEvent("resize",{bubbles:!1,cancelable:!0});i.resize(t),i.target.requiresLayout=!1}})),l()},a.addEventListener("scroll",i.target.resizeHandler),o.addEventListener("scroll",i.target.resizeHandler)})}if(!i.isListening){if(i.isListening=!0,i.isPressed=!1,i.isReleased=!1,i.isInBounds=!1,window.PointerEvent)i.$target.listen("pointerdown.inputEvents"+i.id,i.pointerDown.bind(i)),i.$target.listen("pointerup.inputEvents"+i.id,i.pointerUp.bind(i)),i.$target.listen("pointermove.inputEvents"+i.id,i.pointerMove.bind(i)),i.$target.listen("pointercancel.inputEvents"+i.id,i.pointerCancel.bind(i));else{const t="ontouchstart"in window;t&&(i.$target.listen("touchmove.inputEvents"+i.id,i.touchMove.bind(i)),i.$target.listen("touchstart.inputEvents"+i.id,i.touchStart.bind(i)),i.$target.listen("touchend.inputEvents"+i.id,i.touchEnd.bind(i)),i.$target.listen("touchcancel.inputEvents"+i.id,i.touchCancel.bind(i))),i.$target.listen("mousedown.inputEvents"+i.id,i.mouseDown.bind(i)),i.$target.listen("mouseup.inputEvents"+i.id,i.mouseUp.bind(i)),i.$target.listen("mousemove.inputEvents"+i.id,i.mouseMove.bind(i)),i.$target.listen("mouseleave.inputEvents"+i.id,i.mouseLeave.bind(i))}i.$document.listen("mouseup.inputEvents"+i.id,i.handleDocumentUp.bind(i))}}unlisten(t){const i=this;if(i.isListening=!1,window.PointerEvent)i.$target.unlisten("pointerdown.inputEvents"+i.id),i.$target.unlisten("pointerup.inputEvents"+i.id),i.$target.unlisten("pointermove.inputEvents"+i.id),i.$target.unlisten("pointercancel.inputEvents"+i.id);else{const t="ontouchstart"in window;t&&(i.$target.unlisten("touchstart.inputEvents"+i.id),i.$target.unlisten("touchmove.inputEvents"+i.id),i.$target.unlisten("touchend.inputEvents"+i.id),i.$target.unlisten("touchcancel.inputEvents"+i.id)),i.$target.unlisten("mousedown.inputEvents"+i.id),i.$target.unlisten("mouseup.inputEvents"+i.id),i.$target.unlisten("mousemove.inputEvents"+i.id),i.$target.unlisten("mouseleave.inputEvents"+i.id)}if(i.$document.unlisten("mouseup.inputEvents"+i.id,i.handleDocumentUp),"resize"===t&&i.target.resizeTrigger){const t=i.target.resizeTrigger,a=t.childNodes[0],n=t.childNodes[1];a.removeEventListener("scroll",i.target.resizeHandler),n.removeEventListener("scroll",i.target.resizeHandler),i.target.resizeHandler=null,(window[p].EnableShadowDOM&&i.target.enableShadowDOM?i.target.shadowRoot:i.target).removeChild(t),delete i.target.resizeTrigger}}handleDocumentUp(t){const i=this;i.isPressed=!1,i.isReleased=!1,i.resetSwipe(t)}createEvent(t,i){const a=this,n=t.touches,o=t.changedTouches,l=n&&n.length?n[0]:o&&o.length?o[0]:void 0,r=new CustomEvent(i,{bubbles:!0,cancelable:!0});if(r.originalEvent=t,l){for(let t=0;t<a.inputEventProperties.length;t++){const i=a.inputEventProperties[t];r[i]=l[i]}return r}for(let a in t)a in r||(r[a]=t[a]);return r}fireTap(t){const i=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const a=i.createEvent(t,"tap");i.tap(a)}}initTap(t){const i=this;i.isInBounds=!0,i.tapHoldFired=!1,i.tapHoldTimeout=setTimeout(function(){if(i.isInBounds){i.tapHoldFired=!0;const a=i.createEvent(t,"taphold");i.taphold(a)}},i.tapHoldDelay)}pointerDown(t){const i=this;return i.handleDown(t)}mouseDown(t){const i=this;return i.isPressed||i.touchStartTime&&500>new Date-i.touchStartTime?void 0:i.handleDown(t)}touchStart(t){const i=this;return i.touchStartTime=new Date,i.isTouchMoved=!0,i.handleDown(t)}mouseUp(t){const i=this;return i.isReleased||i.touchEndTime&&500>new Date-i.touchEndTime?void 0:i.handleUp(t)}handleDown(t){const i=this;i.isReleased=!1,i.isPressed=!0;const a=i.createEvent(t,"down");return(i.handlers.tap||i.handlers.taphold)&&i.initTap(a),(i.handlers.swipeleft||i.handlers.swiperight||i.handlers.swipetop||i.handlers.swipebottom)&&i.initSwipe(a),i.down(a)}handleUp(t){const i=this;i.isReleased=!0,i.isPressed=!1;const a=i.createEvent(t,"up"),n=i.up(a);return(i.handlers.tap||i.handlers.taphold)&&i.fireTap(a),i.resetSwipe(a),n}handleMove(t){const i=this;let a=i.move(t);return i.isPressed&&(i._maxSwipeVerticalDistance=d(i._maxSwipeVerticalDistance,o(i._startY-t.pageY)),i._maxSwipeHorizontalDistance=d(i._maxSwipeHorizontalDistance,o(i._startX-t.pageX)),a=i.handleSwipeEvents(t)),a}touchEnd(t){const i=this;return i.touchEndTime=new Date,i.handleUp(t)}pointerUp(t){const i=this;return i.handleUp(t)}pointerCancel(t){const i=this;i.pointerUp(t)}touchCancel(t){const i=this;i.touchEnd(t)}mouseLeave(){const t=this;t.isInBounds=!1}mouseMove(t){const i=this;return i.isTouchMoved?void 0:i.handleMove(t)}pointerMove(t){const i=this;return i.handleMove(t)}touchMove(t){const i=this,a=t.touches,n=t.changedTouches,o=a&&a.length?a[0]:n&&n.length?n[0]:void 0;for(let a=0;a<i.inputEventProperties.length;a++){const n=i.inputEventProperties[a];void 0===t[n]&&(t[n]=o[n])}return i.isTouchMoved=!0,i.handleMove(t)}handleSwipeEvents(t){const i=this;let a=!0;return((i.handlers.swipetop||i.handlers.swipebottom)&&(a=this.handleVerticalSwipeEvents(t)),!1===a)?a:((i.handlers.swipeleft||i.handlers.swiperight)&&(a=this.handleHorizontalSwipeEvents(t)),a)}handleVerticalSwipeEvents(t){let i,a;return i=t.pageY,a=i-this._startY,this.swiped(t,a,"vertical")}handleHorizontalSwipeEvents(t){let i,a;return i=t.pageX,a=i-this._startX,this.swiped(t,a,"horizontal")}swiped(t,i,a){const n=this;if(a=a||0,o(i)>=n.swipeMin&&!n._swipeEvent&&!n._swipeLocked){let l=0>i?"swipeleft":"swiperight";if("horizontal"===a?n._swipeEvent=n.createEvent(t,l):(l=0>i?"swipetop":"swipebottom",n._swipeEvent=n.createEvent(t,0>i?"swipetop":"swipebottom")),n[l]&&(n[l](this._swipeEvent),o(i)<=this.swipeMax))return t.stopImmediatePropagation(),!1}return!0}resetSwipe(){const t=this;t._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(t){const i=this;i._maxSwipeVerticalDistance=0,i._maxSwipeHorizontalDistance=0,i._startX=t.pageX,i._startY=t.pageY,i._swipeLocked=!1,i._swipeEvent=null,i._swipeTimeout=setTimeout(function(){i._swipeLocked=!0},i.swipeDelay)}}class Scroll{get scrollWidth(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.max:-1}set scrollWidth(t){const i=this;0>t&&(t=0),i.horizontalScrollBar&&(i.horizontalScrollBar.max=t)}get scrollHeight(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.max:-1}set scrollHeight(t){const i=this;0>t&&(t=0),i.verticalScrollBar&&(i.verticalScrollBar.max=t)}get scrollLeft(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.value:-1}set scrollLeft(t){const i=this;0>t&&(t=0),i.horizontalScrollBar&&(i.horizontalScrollBar.value=t)}get scrollTop(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.value:-1}set scrollTop(t){const i=this;0>t&&(t=0),i.verticalScrollBar&&(i.verticalScrollBar.value=t)}get vScrollBar(){const t=this;return t.verticalScrollBar}get hScrollBar(){const t=this;return t.horizontalScrollBar}constructor(t,i,a){const n=this;n.container=t,n.horizontalScrollBar=i,n.verticalScrollBar=a,n.disableSwipeScroll=!1,n.listen()}listen(){function t(){let n,o;_.amplitude&&(a.container.$.fireEvent("kineticScroll"),n=Date.now()-u,o=-_.amplitude*i(-n/s),5<o||-5>o?(w(_.targetValue+o),cancelAnimationFrame(m),m=0,m=requestAnimationFrame(t)):w(_.targetValue))}var i=Math.exp;const a=this,n=Core.isMobile,l=a.horizontalScrollBar,r=a.verticalScrollBar;a.inputEvents=new InputEvents(a.container);let s=500,d,m,c,u,p,g,h,_;const f=function(t){return{amplitude:0,delta:0,initialValue:0,min:0,max:t.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:t,value:0,velocity:0}},b=f(l),y=f(r),v=function(){g=Date.now(),h=g-u,u=g;const t=function(t){t.delta=t.value-t.previousValue,t.previousValue=t.value;let i=1e3*t.delta/(1+h);t.velocity=.8*i+.2*t.velocity};t(y),t(b)},w=function(t){return _.value=t>_.max?_.max:t<_.min?_.min:t,_.scrollBar.value=_.value,t>_.max?"max":t<_.min?"min":"value"};a.inputEvents.down(function(t){if(n){c=!0,d=!1;const i=function(t,i){t.amplitude=0,t.pointerPosition=i,t.previousValue=t.value,t.value=t.scrollBar.value,t.initialValue=t.value,t.max=t.scrollBar.max};i(y,t.clientY),i(b,t.clientX),u=Date.now(),clearInterval(p),p=setInterval(v,s)}}),a.inputEvents.up(function(){if(!c)return!0;clearInterval(p);const i=function(i){_=i,i.amplitude=.8*i.velocity,i.targetValue=Math.round(i.value+i.amplitude),u=Date.now(),cancelAnimationFrame(m),m=requestAnimationFrame(t),i.velocity=0};10<y.velocity||-10>y.velocity?i(y):(10<b.velocity||-10>b.velocity)&&i(b),c=!1}),a.inputEvents.move(function(t){if(!c)return!0;if(a.disableSwipeScroll)return;if(d&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),b.visible=0<l.offsetHeight,y.visible=0<r.offsetWidth,!c||!b.visible&&!y.visible)return;y.ratio=-y.max/y.scrollBar.offsetHeight,y.delta=(t.clientY-y.pointerPosition)*y.ratio,b.ratio=-b.max/b.scrollBar.offsetWidth,b.delta=(t.clientX-b.pointerPosition)*b.ratio;let i="value";const n=function(t,n,o){return 5<t.delta||-5>t.delta?(_=t,i=t.initialValue+t.delta>_.max?"max":t.initialValue+t.delta<_.min?"min":"value","min"==i&&0===t.initialValue)||"max"==i&&t.initialValue===t.max||!t.visible||(a.container.$.fireEvent("kineticScroll"),w(t.initialValue+t.delta),v(),o.originalEvent.preventDefault(),o.originalEvent.stopPropagation(),d=!0,!1):null};let o=n(y,t.clientY,t);if(null===o){let i=n(b,t.clientX,t);if(null!==i)return i}else return o});let C;a.scrollTo=function(t,n){const l=!1===n?b:y;let r=!1;u||(u=Date.now()),C||(C=Date.now()),375<o(Date.now()-C)?u=Date.now():r=!0,C=Date.now(),l.value=l.scrollBar.value,l.delta=t-l.value,l.max=l.scrollBar.max,t<=l.min&&(t=l.min),t>=l.max&&(t=l.max),l.targetValue=t;const s=t;let d=l.value;l.velocity=100*l.delta/(1+l.max),l.from=d;const c=function(t){return l.value=t>l.max?l.max:t<l.min?l.min:t,l.scrollBar.value=l.value,t>l.max?"max":t<l.min?"min":"value"},p=function(){let n=175,o=Date.now()-C,g=Math.min(1e3,Date.now()-u),h=l.velocity*i(g/n),_;if(r)0>h&&l.value<=t?h=0:0<h&&l.value>=t&&(h=0),(l.value+h<=l.min||l.value+h>=l.max)&&(h=0),.5<h||-.5>h?(c(l.value+h),cancelAnimationFrame(m),m=0,m=requestAnimationFrame(p)):c(l.targetValue);else{if(o>=n)return cancelAnimationFrame(m),a.container.$.fireEvent("kineticScroll"),void(m=0);_=Utilities.Animation.Easings.easeInSine(o,d,s-d,n),c(_),cancelAnimationFrame(m),m=0,m=requestAnimationFrame(p)}};cancelAnimationFrame(m),m=requestAnimationFrame(p)},a.inputEvents.listen()}unlisten(){const t=this;t.inputEvents&&t.inputEvents.unlisten(),delete t.inputEvents}}class Extend{constructor(t){this.events={},this.handlers={},this.element=t}hasClass(t){const a=this,n=t.split(" ");for(let o=0;o<n.length;o++){const t=a.element.classList.contains(n[o]);if(!t)return!1}return!0}addClass(t){const a=this;if(!a.hasClass(t)){const n=t.split(" ");for(let t=0;t<n.length;t++)a.element.classList.add(n[t]);a.isNativeElement||StyleObserver.observeElement(a.element)}}removeClass(t){const a=this;if(0===arguments.length)return void a.element.removeAttribute("class");const n=t.split(" ");for(let o=0;o<n.length;o++)a.element.classList.remove(n[o]);""===a.element.className&&a.element.removeAttribute("class"),a.isNativeElement||StyleObserver.observeElement(a.element)}get isCustomElement(){const t=this;return!(!0!=t.element instanceof window[p].BaseElement)||"DIV"!==t.element.tagName&&"SPAN"!==t.element.tagName&&"BUTTON"!==t.element.tagName&&"INPUT"!==t.element.tagName&&"UL"!==t.element.tagName&&"LI"!==t.element.tagName&&!(!0!=document.createElement(t.element.nodeName)instanceof window[p].BaseElement)}get isNativeElement(){const t=this;return!t.isCustomElement}dispatch(t){const a=this,n=a.events[t.type];let i=!1;if(1<n.length)for(let t=0;t<n.length;t++){const a=n[t];if(a.namespace&&0<=a.namespace.indexOf("_")){i=!0;break}}i&&n.sort(function(t,i){let a=t.namespace,n=i.namespace;return a=-1===a.indexOf("_")?0:parseInt(a.substring(a.indexOf("_")+1)),n=-1===n.indexOf("_")?0:parseInt(n.substring(n.indexOf("_")+1)),a<n?-1:a>n?1:0});for(let o=0;o<n.length;o++){const i=n[o];if(t.namespace=i.namespace,t.context=i.context,t.defaultPrevented)break;const l=i.handler.apply(a.element,[t]);if(void 0!==l&&(t.result=l,!1===l)){t.preventDefault(),t.stopPropagation();break}}return t.result}fireEvent(t,i,a){const n=this;a||(a={bubbles:!0,cancelable:!0}),a.detail=i||{};const o=new CustomEvent(t,a);return o.originalStopPropagation=o.stopPropagation,o.stopPropagation=function(){return o.isPropagationStopped=!0,o.originalStopPropagation()},n.dispatchEvent(o),o}get isPassiveSupported(){const t=this;if(t.supportsPassive!==void 0)return t.supportsPassive;t.supportsPassive=!1;try{let i=Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(t){}return t.supportsPassive}dispatchEvent(t){const i=this,a=t.type,n=i.element.context;i.element.context=document,i.element["on"+a]?i.element["on"+a](t):i.element.dispatchEvent(t),i.element.context=n}listen(t,i){const a=this,n=t.split("."),o=n.slice(1).join("."),l=n[0];a.events[l]||(a.events[l]=[]);const r={type:l,handler:i,context:a.element,namespace:o};0<=f.indexOf(l)&&(!a.inputEvents&&(a.inputEvents=new InputEvents(a.element)),a.inputEvents[l](function(t){a.dispatchEvent(t)}),a.inputEvents.boundEventTypes.push(l),a.inputEvents.listen(l)),0===a.events[l].length&&(a.handlers[l]=a.dispatch.bind(a),"wheel"===l?a.element.addEventListener("wheel",a.handlers[l],!!a.isPassiveSupported&&{passive:!1}):a.element.addEventListener(l,a.handlers[l],!1)),a.events[l].push(r)}unlisten(t){const i=this,a=t.split("."),n=a.slice(1).join("."),o=a[0];let l=i.events[o];if(i.inputEvents&&0<=i.inputEvents.boundEventTypes.indexOf(o)&&(i.inputEvents.boundEventTypes.splice(i.inputEvents.boundEventTypes.indexOf(o),1),0===i.inputEvents.boundEventTypes.length&&i.inputEvents.unlisten(o)),!!l){for(let t=0;t<l.length;t++)if(""!==n){let t=l.findIndex(t=>t.namespace===n);l.splice(t,1);break}else l=[];0===l.length&&(i.element.removeEventListener(o,i.handlers[o]),i.events[o]=[],delete i.handlers[o])}}getAttributeValue(t,i){const a=this,n=a.element.getAttribute(t);if(a.isNativeElement)return a.deserialize(n,i);const o=a.element.propertyByAttributeName[t],l=o.deserialize===void 0?a.deserialize(n,i,o.nullable):a.element[o.deserialize](n);return l}setAttributeValue(t,i,a){const n=this;let o=!1,l;if(!n.isNativeElement){const r=n.element.propertyByAttributeName[t];o=!r||r.nullable,l=r&&r.serialize?n.element[r.serialize](i):n.serialize(i,a,o)}else if(l=n.serialize(i,a),"boolean"===a){if(0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t))return void(i?n.element.setAttribute(t,""):n.element.removeAttribute(t))}return("array"===a||"object"===a)&&("[]"===l||"{}"===l)?void n.element.removeAttribute(t):void(void 0===l?n.element.removeAttribute(t):n.element.setAttribute(t,l))}serialize(t,i,a){if(void 0===i&&(i=Utilities.Types.getType(t)),void 0!==t&&(a||null!==t)){if(a&&null===t)return"null";if("string"===i)return t;if("boolean"===i||"bool"===i){if(!0===t||"true"===t||1===t||"1"===t)return"";if(!1===t||"false"===t||0===t||"0"===t)return}if("array"===i)return JSON.stringify(t);return 0<=["string","number","int","integer","float","date","any","function"].indexOf(i)?t.toString():"object"===i?JSON.stringify(t):void 0}}deserialize(t,i,a){const n="null"===t;if(void 0!==t&&(!n||a)){if(n&&a)return null;if("boolean"===i||"bool"===i)return null!==t;if("number"===i||"float"===i)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseFloat(t);if("int"===i||"integer"===i)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseInt(t);if("string"===i)return t;if("any"===i)return t;if("date"===i)return new Date(t);if("function"===i){if("function"==typeof window[t])return window[t];}else if("array"===i||"object"===i)try{const i=JSON.parse(t);if(i)return i}catch(a){if(window[t]&&"object"==typeof window[t])return window[t];if("array"===i&&0<=t.indexOf("[")){if(0<=t.indexOf("{")){let a=t.replace(/{/ig,"").replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim();a=a.split("},");for(let t=0;t<a.length;t++){let i={},n=a[t].trim().split(",");for(let t=0;t<n.length;t++){const a=n[t].split(":")[0].trim(),o=n[t].split(":")[1].trim();i[a]=o}a[t]=i}return a}const i=t.replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim().split(",");return i}}}}}class Animation{static get Ripple(){return Ripple}static get Easings(){return Easings}}class Utilities{static get Types(){return Types}static get Core(){return Core}static get Animation(){return Animation}static get Scroll(){return Scroll}static get InputEvents(){return InputEvents}static Extend(t){return new Extend(t)}static Assign(t,i){if(0<=t.indexOf(".")){const a=t.split(".");return Utilities[a[0]]||(Utilities[a[0]]={}),void(Utilities[a[0]][a[1]]=i)}Utilities[t]=i}}const b=Utilities.Extend(document);BindingModule.cache={};class BaseElement extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},messages:{value:{en:{propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,type:"object"},readonly:{value:!1,type:"boolean"},rightToLeft:{value:!1,type:"boolean"},theme:{value:window[p].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}static get requires(){return{}}static get listeners(){return{"theme-changed":function(t){this.theme=t.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){const t=this;return"none"!==t.animation}get hasRippleAnimation(){const t=this;return"none"!==t.animation&&!("advanced"!==t.animation)}static get modules(){return window[p].Modules}get properties(){const t=this;return t._properties||(t._properties=[]),t._properties}get parents(){const t=this;let i=[],a=t.parentNode;for(;a&&9!==a.nodeType;)!0==a instanceof HTMLElement&&i.push(a),a=a.parentNode;return i}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){const t=this;t.onRegistered&&t.onRegistered()}created(){const t=this;t.isReady=!1,t._initElement(t),t._setModuleState("created"),t.onCreated&&t.onCreated()}completed(){const t=this;t.isCompleted=!0,t._onCompleted&&t._onCompleted(),t.onCompleted&&t.onCompleted()}whenReady(t){const i=this;return i.isCompleted?void t():void(!i.whenReadyCallbacks&&(i.whenReadyCallbacks=[]),i.whenReadyCallbacks.push(t))}addThemeClass(){const t=this;""!==t.theme&&t.classList.add("smart-"+t.theme)}addDefaultClass(){const t=this;t.classList.add(t.nodeName.toLowerCase()+"-element")}ready(){const t=this;t.addThemeClass(),t.addDefaultClass(),"collapsed"===t.visibility?t.classList.add("smart-hidden"):"hidden"===t.visibility&&t.classList.add("smart-visibility-hidden");const i=()=>{let i=[];const a=t.getStaticMember("requires");for(let t in a){const n=t.split(".");2<n.length?!window[p].Utilities[n[2]]&&i.push(a[t]):!window[p][n[1]]&&i.push(a[t])}if(0<i.length){const t=this;t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:i.join(", ")}))}};if(i(),t.dataContext&&t.applyDataContext(),t.onReady&&t.onReady(),t.shadowRoot&&Smart(t._selector)){if(Smart(t._selector).styleUrls){const a=Smart(t._selector).styleUrls;for(let n=0;n<a.length;n++)t.importStyle(a[n])}if(Smart(t._selector).styles){const i=document.createElement("style");i.innerHTML=Smart(t._selector).styles,t.shadowRoot.insertBefore(i,t.shadowRoot.firstChild)}}Smart(t._selector)&&Smart(t._selector).ready&&Smart(t._selector).ready()}get _selector(){const t=this;return t.id?"#"+t.id:0<t.classList.length?"."+t.classList[0]:void 0}applyDataContext(t){const i=this;let a="string"==typeof i.dataContext?window[i.dataContext]||document[i.dataContext]:i.dataContext;if(t&&(a=t,i.dataContext=t),!a){i.dataContextProperties=null;const t=function(){const a="string"==typeof i.dataContext?window[i.dataContext]||document[i.dataContext]:i.dataContext;a&&(i.applyDataContext(),window.removeEventListener("load",t))};return void window.addEventListener("load",t)}if(!a._uid)for(let t in a._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),a._properties=[],a){const n=a[t];"function"!=typeof n&&"_properties"!=t&&"_uid"!=t&&(a._properties[t]=n,Object.defineProperty(a,t,{configurable:!1,enumerable:!0,get(){return a._properties[t]},set(n){const o=a._properties[t];a._properties[t]=n;let l=[];l[t]={oldValue:o,value:n},l.length++,i.updatingDataContext=!0,b.fireEvent("dataContextPropertyChanged",{dataContext:a,properties:l},{bubbles:!1,cancelable:!0}),i.updatingDataContext=!1}}))}if(i.dataContextProperties=i.parseAttributes(i),i.dataContextPropertiesMap={},i.dataContextListeners={},!i.dataContextProperties)return void(i.dataContextProperties=null);for(let n in i.updatingDataContext=!0,i.dataContextProperties){const t=i.dataContextProperties[n],o=t.name;if(t.propertyName=n,i.dataContextPropertiesMap[o]=n,BindingModule.cache["toDash"+n]||(BindingModule.cache["toDash"+n]=Utilities.Core.toDash(o)),t.isEvent){const n=t.value;i.dataContextListeners[o]&&i.removeEventListener(o,i.dataContextListeners[o]),i.dataContextListeners[o]=function(t){a[n](t)},i.addEventListener(o,i.dataContextListeners[o])}if(0<=o.indexOf(".")){const t=o.split(".");let l=a[t[0]];for(let a=1;a<t.length;a++)l=l[t[a]];void 0!==l&&(i[n]=l)}else i[n]=a[o]}i.dataContextPropertyChangedHandler=function(t){const a=t.detail.properties,n=t.detail.dataContext,o="string"==typeof i.dataContext?window[i.dataContext]||document[i.dataContext]:i.dataContext;if(n===o)for(let t in a){const n=i.dataContextPropertiesMap[t],o=i.context;n&&(i.context=document,i[n]=a[t].value,i.context=o)}},b.listen("dataContextPropertyChanged",i.dataContextPropertyChangedHandler),i.updatingDataContext=!1}updateDataContextProperty(t){const i=this,a="string"==typeof i.dataContext?window[i.dataContext]||document[i.dataContext]:i.dataContext,n=i.dataContextProperties[t];if(!i.updatingDataContext&&n.twoWay){const o=n.name;if(0<=o.indexOf(".")){const n=o.split(".");let l=a[n[0]];for(let t=1;t<n.length;t++)l=l[n[t]];void 0!==l&&(l=i[t],h[a._uid]&&(h[a._uid][t]=l))}else a[o]=i[t],h[a._uid]&&(h[a._uid][t]=a[o])}}static get version(){return window[p].Version}initProperties(){const t=this;if(Smart(t._selector)&&Smart(t._selector).properties&&(t._initProperties=Smart(t._selector).properties),t._initProperties){const a=Object.keys(t._initProperties);for(let n=0;n<a.length;n++){const i=a[n],o=t._initProperties[i];if(o.constructor===Smart.DataAdapter||"object"!=typeof o||Utilities.Types.isArray(o)){t[i]=o;continue}if("object"==typeof o){const a=function(n,o){const l=Object.keys(n);for(let r=0;r<l.length;r++){const i=l[r],s=n[i];"object"!=typeof s||Utilities.Types.isArray(s)||s.constructor===Date?t[o+"_"+i]=s:a(s,o+"_"+i)}};a(o,i)}}}}setup(){const t=this;if(t.context=this,t.isReady&&!t.isCompleted)return;if(t.isReady)return t._setModuleState("attached"),t.isAttached=!0,t.attached(),t._handleListeners("listen"),void(t.context=document);t.ownerElement&&0<=t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.splice(t.ownerElement.detachedChildren.indexOf(t),1),t.isReady=!0,t.methods=t.getStaticMember("methods"),t.initProperties();const i=Core.isMobile;i&&t.classList.add("smart-mobile");for(let a=0;a<t.attributes.length;a+=1){const i=t.propertyByAttributeName[t.attributes[a].name];if(!i)continue;let n=t.$.getAttributeValue(i.attributeName,i.type);const o=n?n.toString():"";if(!(0<=o.indexOf("{{")||0<=o.indexOf("[["))&&!("object"!==i.type&&"array"!==i.type&&(0<=t.attributes[a].value.indexOf("{{")||0<=t.attributes[a].value.indexOf("[[")))&&void 0!==n&&i.value!==n){const o=Utilities.Types.getType(n),l=t.attributes[a].value;if(("any"===i.type||"object"===i.type)&&""+t[i.name]===n)continue;if("array"===i.type&&t[i.name]&&JSON.stringify(t[i.name])===n)continue;if("number"===o&&isNaN(n)&&"NaN"!==l&&"Infinity"!==l&&"-Infinity"!==l){const a=t.localize("propertyInvalidValueType",{name:i.name,actualType:"string",type:i.type});t.log(a)}i.isUpdatingFromAttribute=!0,t[i.name]=n,i.isUpdatingFromAttribute=!1}}for(let i in t._properties){const a=t._properties[i];if("innerHTML"==i&&a.value===a.defaultValue&&(a.value=a.defaultValue=Utilities.Core.html(t)),("boolean"===a.type||"bool"===a.type)&&"false"===t.getAttribute(a.attributeName)&&(a.isUpdating=!0,t.setAttribute(a.attributeName,""),a.isUpdating=!1),a.defaultReflectToAttribute&&a.reflectToAttribute){if(a.defaultReflectToAttribute&&a.defaultReflectToAttributeConditions){let n=!0;for(let o=0;o<a.defaultReflectToAttributeConditions.length;o++){const i=a.defaultReflectToAttributeConditions[o];let l,r;for(let t in i)l=t,r=i[t];t._properties[l]&&t._properties[l].value!==r&&(n=!1)}if(!n)continue}a.isUpdating=!0,t.$.setAttributeValue(a.attributeName,a.value,a.type),a.isUpdating=!1}}const a=[];if(0<t.children.length)for(let n=0;n<t.children.length;n++){const i=t.children[n];Utilities.Extend(i).isCustomElement&&a.push(i)}t.applyTemplate(),t.complete=function(){if(!t.templateBindingsReady){const a=t=>{t.templateBindingsReady||(t.templateBindingsReady=!0,t.updateTextNodes(),t.updateBoundNodes())};if(!t.ownerElement)a(t);else{let i=t.ownerElement,n=[];for(;i;)n.push(i),i=i.ownerElement;for(let t=n.length-1;0<=t;t--)a(n[t]);a(t)}}const i=()=>{if(t._setModuleState("ready"),t.ready(),t.isAttached=!0,t._setModuleState("attached"),t.attached(),t._handleListeners("listen"),requestAnimationFrame(()=>{t.isHidden||0!==t.offsetWidth&&0!==t.offsetHeight||(t.isHidden=!0)}),t.completed(),t.context=document,t.whenReadyCallbacks){for(let a=0;a<t.whenReadyCallbacks.length;a++)t.whenReadyCallbacks[a]();t.whenReadyCallbacks=[]}};t.wait?t.classList.add("smart-visibility-hidden"):t.classList.contains("smart-async")?requestAnimationFrame(()=>{i()}):i()};let n=[].slice.call(t.querySelectorAll("[smart-id]")).concat(a);if(window[p].EnableShadowDOM&&t.enableShadowDOM&&(n=[].slice.call(t.shadowRoot.querySelectorAll("[smart-id]")).concat(a)),0===n.length)t.complete();else{t._completeListeners=0;for(let a=0;a<n.length;a++){const o=n[a];if(Utilities.Extend(o).isCustomElement){const i=function(){t._completeListeners--,0===t._completeListeners&&(t.complete(),delete t._completeListeners)}.bind(t);o.isCompleted||o.isUtilityElement||!1!==o.wait||(t._completeListeners++,!o._onCompleted&&(o.completeHandlers=[],o._onCompleted=function(){for(let t=0;t<o.completeHandlers.length;t++)o.completeHandlers[t]()}),o.completeHandlers.push(i))}}0===t._completeListeners&&t.complete()}}visibilityChangedHandler(){const t=this;t.isReady&&requestAnimationFrame(()=>{(t.isHidden||0!==t.offsetWidth)&&0!==t.offsetHeight?t.isHidden&&(t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}),t.isHidden=!1):t.isHidden=!0})}attributeChangedCallback(t,i,a){const n=this,o=n.propertyByAttributeName[t];if(("class"===t||"style"===t)&&n.visibilityChangedHandler(),o||n.attributeChanged(t,i,a),!(!o||o&&o.isUpdating)){let t=n.$.getAttributeValue(o.attributeName,o.type);void 0!==a&&n[o.name]!==t&&(o.isUpdatingFromAttribute=!0,n[o.name]=void 0===t?n._properties[o.name].defaultValue:t,o.isUpdatingFromAttribute=!1)}}attributeChanged(t,i,a){}set hasStyleObserver(t){const i=this;i._hasStyleObserver===void 0&&(i._hasStyleObserver=t),t?StyleObserver.watch(i):StyleObserver.unwatch(i)}get hasStyleObserver(){const t=this;return!(void 0!==t._hasStyleObserve)||t._hasStyleObserver}attached(){const t=this;t.hasStyleObserver&&StyleObserver.watch(t),t.onAttached&&t.onAttached(),Smart(t._selector)&&Smart(t._selector).attached&&Smart(t._selector).attached()}detached(){const t=this;t.hasStyleObserver&&StyleObserver.unwatch(t),t._setModuleState("detached"),t.isAttached=!1,t.ownerElement&&-1===t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.push(t),t._handleListeners("unlisten"),t.onDetached&&t.onDetached(),Smart(t._selector)&&Smart(t._selector).detached&&Smart(t._selector).detached()}propertyChangedHandler(t,i,a){const n=this;i===a||("theme"===t&&(""!==i&&n.classList.remove("smart-"+i),""!==a&&n.classList.add("smart-"+a)),"visibility"===t&&("collapsed"===i?n.classList.remove("smart-hidden"):"hidden"==i&&n.classList.remove("smart-visibility-hidden"),"collapsed"===a?n.classList.add("smart-hidden"):"hidden"==a&&n.classList.add("smart-visibility-hidden")),n.propertyChanged&&n.propertyChanged(t,i,a))}_handleListeners(t){const i=this,a=i.tagName.toLowerCase(),n=i.getStaticMember("listeners"),o=n=>{for(let o in n){const l=o.split(".");let r=l[0],s=i.$;if(!l[1])i.smartId&&(r=r+"."+i.smartId);else if(r=l[1],s=i["$"+l[0]],"document"===l[0]){let t=i.smartId;""===t&&(t=Utilities.Core.toCamelCase(a)),r=r+"."+t}else i.smartId&&(r=r+"."+i.smartId+"_"+i.parents.length);const d=n[o];s&&s[t](r,function(t){const a=i.context;i.context=i,i[d]&&i[d].apply(i,[t]),i.context=a})}};o(n),o(i.templateListeners),Smart(i._selector)&&Smart(i._selector).properties&&o(Smart(i._selector).listeners)}parseTemplate(){const t=this,i=t.template(),a=document.createDocumentFragment();if(u[t.nodeName])return u[t.nodeName].cloneNode(!0);if(""===i)return null;let n=document.createElement("div");a.appendChild(n),n.innerHTML=i;let o=n.childNodes;n.parentNode.removeChild(n);for(let t=0;t<o.length;t++)a.appendChild(o[t]);return u[t.nodeName]=a,a.cloneNode(!0)}applyTemplate(){const t=this,i=t.parseTemplate();if(!i)return;if(!i.hasChildNodes)return;const a=i.childNodes[0],n=(i,a)=>{t["$"+i]=a.$=Utilities.Extend(a),t.$[i]=a,a.ownerElement=t};let o=a;if(0<a.getElementsByTagName("content").length){let t=a.getElementsByTagName("content")[0];o=t.parentNode,o.removeChild(t)}else{const t=i.querySelectorAll("[inner-h-t-m-l]");t&&0<t.length&&(o=t[0])}t.$.template="template"===a.nodeName.toLowerCase()?a:a.querySelector("template");let l=i.querySelectorAll("[id]");0===l.length&&(l=i.querySelectorAll("*")),n("root",a),n("content",o),t.$.html=t.innerHTML.toString().trim();for(let a=0,i;a<l.length;a+=1)i=l[a],""===i.id&&(i.id="child"+a),n(i.id,i),i.setAttribute("smart-id",i.id),t.shadowRoot||i.removeAttribute("id");for(t.bindings=!1===t.hasTemplateBindings?[]:t.getBindings(i),t.$root.addClass("smart-container");t.childNodes.length;)o.appendChild(t.firstChild);if(t.appendTemplate(i),t.$.template){const i=document.createElement("div");i.classList.add("smart-template-container"),t.$.templateContainer=i,t.$.template.parentNode.insertBefore(i,t.$.template),t.refreshTemplate()}}refreshTemplate(){const t=this;if(!t.$.templateContainer)return;t.templateDetached(t.$.templateContainer);const i=t.$.template.content.cloneNode(!0);t.templateBindings=t.getBindings(i),t.templateProperties=[];let a=document.createDocumentFragment();const n=function(i,a,o){for(let l in i){const r=i[l],s=r.node.cloneNode();a.appendChild(s);let d=[],m=!1;if(r.data)for(let i in r.data){const n=r.data[i],l=n.name;if(t.templateProperties[l]=!0,s.removeAttribute(Utilities.Core.toDash(i)),"*items"==i)d=t[l],m=!0;else if(0<=l.indexOf("item.")&&o)n.value=o[l.substring(5)],s[i]=n.value;else if(0<=l.indexOf("item")&&o)n.value=o,s[i]=n.value;else if("*if"!=i)t.updateBoundNode(s,r,t,l);else if(0<=l.indexOf("(")){let n=l.substring(l.indexOf("(")),i;const o=l.substring(0,l.indexOf("("));if(n=n.substring(1,n.length-1),n=n.replace(/ /ig,""),n=n.split(","),0<n.length&&""!==n[0]){let a=[];for(let o=0;o<n.length;o++)a.push(t[n[o]]);i=t[o].apply(t,a)}else i=t[o]();!1===i&&a.removeChild(s)}else t[l]||a.removeChild(s)}if(0<d.length||m)for(let t=0;t<d.length;t++)r.children&&n(r.children,s,d[t]);else r.children&&n(r.children,s,o)}};n(t.templateBindings.children,a),t.$.templateContainer.innerHTML="",t.$.templateContainer.appendChild(a),t.templateAttached(t.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(t){const i=this;i.appendChild(t)}defineElementModules(){const t=this,i=t.constructor.prototype;if("BaseElement"===i.elementName){i.modules=t.constructor.modules;const a=i.modules;for(let n=0;n<a.length;n+=1)t.addModule(a[n])}else{const a=i.modules;for(let n=0;n<a.length;n+=1){const i=a[n],o=i.prototype;t.defineElementMethods(o.methodNames,o),t.defineElementProperties(i.properties)}}}watch(t,i){const a=this;return null===t||null===i?void(a._watch=null):void(a._watch={properties:t,propertyChangedCallback:i})}unwatch(){const t=this;t._watch=null}set(t,i,a){const n=this,o=n.context;n.context=!0===a?document:n,n[t]=i,n.context=o}get(t){const i=this;return i[t]}_setModuleState(t,a){const n=this,o="is"+t.substring(0,1).toUpperCase()+t.substring(1),l="on"+t.substring(0,1).toUpperCase()+t.substring(1);for(let r=0;r<n.modulesList.length;r++){const i=n.modulesList[r];i[o]=!0,i[t]&&i[t](a),i[l]&&i[l](a)}}addModule(t,i){const a=this;if(!t)return;const n=a.modules.slice(0),o=t.prototype;!t.moduleName&&t.name&&(t.moduleName=t.name),-1===n.findIndex(i=>t.moduleName===i.moduleName)&&n.push(t),a.defineModule(t),a.defineElementMethods(o.methodNames,o),a.defineElementProperties(t.properties);const l=a.constructor.prototype;if(l.modules=n,i)for(let i in Smart.Elements.tagNames){const n=Smart.Elements.tagNames[i];let o=Object.getPrototypeOf(n),l=[];for(;o!==HTMLElement;)l.push(o.prototype),o=Object.getPrototypeOf(o);0<=l.indexOf(a)&&n!==a&&n.prototype.addModule(t)}}defineModule(t){if(t.isDefined)return;t.prototype._initModule=function(t){const i=this;i.ownerElement=t};const i=t.properties||{},a=Object.keys(i),n=Object.getOwnPropertyNames(t.prototype);t.prototype.methodNames=n;for(let n=0;n<a.length;n+=1){const o=a[n],l=i[o];Object.defineProperty(t.prototype,o,{configurable:!1,enumerable:!0,get(){const t=this;return t.ownerElement?t.ownerElement[o]:l.value},set(t){const i=this;i.ownerElement[o]=t}})}t.isDefined=!0}getStaticMember(t,a){const i=this,n=window[p][i.elementName],o=n[t];a||(a="");let l="array"===a?[]:"string"===a?"":{},r=Object.getPrototypeOf(n),s=[];for(;r[t];)s.push(r[t]),r=Object.getPrototypeOf(r);for(let n=s.length-1;0<=n;n--)if("array"===a)for(let t=0;t<s[n].length;t++)-1===l.indexOf(s[n][t])&&l.push(s[n][t]);else"string"===a?-1===l.indexOf(s[n])&&(l+=s[n]):l=Utilities.Core.assign(l,s[n]);if("array"===a){for(let t=0;t<o.length;t++)-1===l.indexOf(o[t])&&l.push(o[t]);return l}return"string"===a?(-1===l.indexOf(o)&&(l+=o),l):Utilities.Core.assign(l,o)}defineElementHierarchicalProperties(t,i){const a=this,n=[];(function(t){const a=Object.keys(t);for(let o=0;o<a.length;o++){const l=a[o];if("messages"===l)continue;const r=t[l],s=Object.keys(r),d=0<=s.indexOf("value")&&0<=s.indexOf("type")&&"object"==typeof r.value;if("propertyObject"===r.type||d){const t=function(a,o){if(a.value){const l=Object.keys(a.value);for(let r=0;r<l.length;r++){const s=l[r],d=a.value[s],m=o+"_"+s;if("object"!=typeof d||null===d)break;const c=Object.keys(d),u=0<=c.indexOf("value")&&0<=c.indexOf("type");if(!u)break;if(d.parentPropertyName=o,i){const t=i._properties[m];if(a.value.hasOwnProperty(s))if(!t.isDefined)delete a.value[s];else continue;t.isDefined=!0,Object.defineProperty(a.value,s,{configurable:!1,enumerable:!0,get(){return i._properties[m].value},set(t){i.updateProperty(i,i._properties[m],t)}})}n[m]||(n[m]=d,n.length++),("propertyObject"===d.type||"object"==typeof d.value&&"array"!==d.type)&&(i?t(i._properties[m],m):t(d,m))}}};t(r,l)}}})(t),0<n.length&&!i&&a.defineElementProperties(n)}defineElement(){const t=this,i=t.constructor.prototype,a=t.getStaticMember("properties"),n=Object.getOwnPropertyNames(i);i.extendedProperties={},i.boundProperties={},i.templateListeners={},t.defineElementModules(),t.defineElementMethods(n,i),t.defineElementProperties(a),t.defineElementHierarchicalProperties(t.extendedProperties),i._initElement=function(){const t=this,a=i.extendedProperties,n=Object.keys(a),o=t.modules;t.$=Utilities.Extend(t),t.$document=b,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(let a=0;a<o.length;a+=1){const i=o[a];let n=new i;n._initModule(t),t.modulesList.push(n)}for(let o=0;o<n.length;o+=1){const i=n[o],l=a[i];let r=l.value;if(t._properties[i])if(void 0!==t._properties[i].notify)continue;else delete t._properties[i];if(C&&"innerHTML"===i&&delete t[i],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(i)&&(r=t[i],delete t[i]),"array"===l.type&&void 0!==r&&null!==r&&(r=r.slice(0)),"object"===l.type&&void 0!==r&&null!==r&&(Array.isArray(r)?r=r.slice(0):r=Object.assign({},r)),t._properties[i]={name:i,notify:l.notify,allowedValues:l.allowedValues,type:l.type,nullable:l.nullable,reflectToAttribute:l.reflectToAttribute,defaultReflectToAttribute:l.defaultReflectToAttribute,defaultReflectToAttributeConditions:l.defaultReflectToAttributeConditions,value:r,readOnly:l.readOnly,defaultValue:r,attributeName:l.attributeName,observer:l.observer,inherit:l.inherit,extend:l.extend,validator:l.validator},t.propertyByAttributeName[l.attributeName]=t._properties[i],!l.hasOwnProperty("type")){const a=t.localize("propertyUnknownType",{name:i});t.log(a)}if("any"===l.type||"propertyObject"===l.type)continue;const s=Utilities.Types.getType(r);if(void 0!==r&&null!==r&&l.type!==s&&!l.validator){if("object"===l.type&&"array"===s)continue;if("number"===s){const t=["integer","int","float"].findIndex(t=>t===l.type);if(0<=t)continue}const a=t.localize("propertyInvalidValueType",{name:i,actualType:s,type:l.type});t.log(a)}}t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},i.registered()}defineElementMethods(t,i){const a=this,n=a.constructor.prototype,o=function(t,a){const i=Array.prototype.slice.call(arguments,2),n=function(){if(!this.isReady&&"localize"!==a&&"log"!==a&&"parseAttributes"!==a){const t=this.localize("elementNotInDOM");this.log(t)}let n=this;for(let t=0,i;t<this.modulesList.length;t++)if(i=this.modulesList[t],a in i){n=i;break}const o=this.context,l=i.concat(Array.prototype.slice.call(arguments));let r=null;const s=function(t,i){return t===i||"number"===t&&("int"===i||"integer"===i||"float"===i)||"bool"===t&&"boolean"===i||"boolean"===t&&"bool"===i||"object"===t&&"any"===i||void 0};if(this.methods){const t=this.methods[a];if(t){const i=t.split(":");r=i[i.length-1].trim();const n=t.substring(1+t.indexOf("("),t.lastIndexOf(")")),o=[],d=n.split(",");let m="";for(let t=0;t<d.length;t++){const i=d[t];m+=i,0<=i.indexOf(":")?(o.push(m),m=""):m+=","}let c=o.length;for(let t=0;t<o.length;t++){const i=o[t].trim(),n=i.split(":"),r=n[0].split("=")[0].trim(),d=0<=r.indexOf("?"),m=0<=n[1].indexOf("?"),u=n[1].replace(/\?/ig,"").trim(),p=u.split("|");let g=n[0].split("=")[1];const h=Utilities.Types.getType(l[t]);if(void 0===l[t]&&g){switch(g=g.trim(),u[0]){case"date":{let t=g.substring(g.indexOf("(")+1,g.lastIndexOf(")"));t=0<t.length?t.split(",").map(t=>parseInt(t)):[],g=0===t.length?new Date:new Date(t[0],t[1],t[2]);break}case"bool":case"boolean":g="true"===g||"1"===g;break;case"int":case"integer":g=parseInt(g);break;case"float":case"number":g=parseFloat(g);break;case"any":case"object":g=0<=g.indexOf("{")?JSON.parse(g):g;}l.push(g)}else d&&c--;if(u!==h&&h){let i=!0;for(let t=0;t<p.length;t++)if(s(h,p[t])){i=!1;break}if(i&&!(null===l[t]&&m)){const i=this.localize("methodInvalidValueType",{name:a,actualType:h,type:u,argumentIndex:t});this.log(i)}}if(l.length<c){const t=this.localize("methodInvalidArgumentsCount",{name:a,actualArgumentsCount:l.length,argumentsCount:c});this.log(t)}}}}this.context=this;const d=t.apply(n,l);if(r){const t=void 0===Utilities.Types.getType(d)?"void":Utilities.Types.getType(d);if(!s(t,r)){const i=this.localize("methodInvalidReturnType",{name:a,actualType:t,type:r});this.log(i)}}return this.context=o,d};return n},l=["constructor","ready","created","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler"];for(let a in t){let r=t[a];r.startsWith("_")||void 0!==l.find(t=>t===r)||!n.extendedProperties[r]&&Utilities.Types.isFunction(i[r])&&(n[r]=o(i[r],r))}}defineElementProperties(t){if(!t)return;const i=this,a=i.constructor.prototype,n=Object.keys(t),o=i.getStaticMember("properties");Object.assign(a.extendedProperties,t),i.updateProperty=function(t,a,n){const i=t;if(!a||a.readOnly)return;if(a.allowedValues){let t=!1;for(let o=0;o<a.allowedValues.length;o++)if(a.allowedValues[o]===n){t=!0;break}if(!t){const t=JSON.stringify(a.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),o="'"+n+"'",l=i.localize("propertyInvalidValue",{name:a.name,actualValue:o,value:t});return void i.log(l)}}const o=a.name,l=i._properties[o].value;if(a.validator&&i[a.validator]){const t=i.context;i.context=i;const o=i[a.validator](l,n);void 0!==o&&(n=o),i.context=t}if(l!==n){if(i.propertyChanging){const t=i.propertyChanging(o,l,n);if(!1===t||null===t)return}if(!a.hasOwnProperty("type")){const t=i.localize("propertyUnknownType",{name:o});i.log(t)}if("array"!==a.type||JSON.stringify(l)!==JSON.stringify(n)){if(void 0!==n&&null!==n&&"any"!==a.type&&"propertyObject"!==a.type&&a.type!==Utilities.Types.getType(n)&&!a.validator||null===n&&!a.nullable){let t=!0;if("object"===a.type&&"array"===Utilities.Types.getType(n)&&(t=!1),"number"===Utilities.Types.getType(n)){const i=["integer","int","float"].findIndex(t=>t===a.type);0<=i&&(t=!1)}if(t){const t=i.localize("propertyInvalidValueType",{name:o,actualType:Utilities.Types.getType(n),type:a.type});return void i.error(t)}}a.isUpdating=!0,i._properties[o].value=n,!a.isUpdatingFromAttribute&&a.reflectToAttribute&&i.$.setAttributeValue(a.attributeName,n,a.type);const t=i.isReady&&(!i.ownerElement||i.ownerElement&&i.ownerElement.isReady);if(t){if("wait"!==o||n||!l||i.isCompleted||(i.classList.remove("smart-visibility-hidden"),i.complete()),i.context!==i&&!i.wait){const t=i.context;i.context=i,i.propertyChangedHandler(o,l,n),i.context=t,a.observer&&i[a.observer]&&(i.context=i,i[a.observer](l,n),i.context=document),i._watch&&0<=i._watch.properties.indexOf(o)&&i._watch.propertyChangedCallback(o,l,n)}const t=a.notify||i.boundProperties[o];t&&(i.$.fireEvent(a.attributeName+"-changed",{context:i.context,oldValue:l,value:i[o]}),i.boundProperties[o]&&i.updateBoundNodes(o)),t&&i.templateProperties&&i.templateProperties[o]&&i.refreshTemplate(),i.dataContextProperties&&("dataContext"===o?i.applyDataContext():i.dataContextProperties[o]&&i.updateDataContextProperty(o))}a.isUpdating=!1}}};for(let l=0;l<n.length;l+=1){const i=n[l],r=t[i],s=Utilities.Core.toDash(i),d=r.type||"any",m=0<=d.indexOf("?")||"any"===d;(m&&"any"!==d&&(r.type=d.substring(0,d.length-1)),r.nullable=m,r.attributeName=s.toLowerCase(),r.name=i,r.reflectToAttribute=void 0===r.reflectToAttribute||r.reflectToAttribute,r.inherit&&o[i]&&(r.value=o[i].value),r.extend&&o[i]&&Utilities.Core.assign(r.value,o[i].value),!a.hasOwnProperty(i))&&Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get(){const t=this;return t._properties[i]?t._properties[i].value:void 0},set(t){const a=this;a.updateProperty(a,a._properties[i],t)}})}}}let y=[],v=[],w=[],C=!1;const x=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(x){const t=parseInt(x[2],10);50>=t&&(C=!0)}const S=function(){if("complete"===document.readyState){w.sort(function(t,i){let a=t.element.parents.length,n=i.element.parents.length;return a<n?-1:a>n?1:0});for(let t=0;t<w.length;t++)w[t].element.isLoading=!1,w[t].callback();w=[],document.removeEventListener("readystatechange",S)}};document.addEventListener("readystatechange",S);class BaseCustomElement extends BaseElement{static get observedAttributes(){let t=this,i=["external-style"];for(let a in t.prototype.extendedProperties){const n=t.prototype.extendedProperties[a];i.push(n.attributeName)}return i}static get styleUrls(){return["smart.variables.css","smart.common.css"]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(t){this._styleUrl=t}get enableShadowDOM(){return window[p].EnableShadowDOM}importStyle(t,i){const a=this;if(a.shadowRoot&&t){const n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,n.onload=i,a.shadowRoot.insertBefore(n,a.shadowRoot.firstChild)}}attributeChanged(t,i,a){"style-url"===t&&(this.styleUrl=a)}attributeChangedCallback(t,i,a){const n=this;n.isReady&&super.attributeChangedCallback(t,i,a)}constructor(t,i){super();const a=this;if(t&&(i&&(a._initProperties=i),document.querySelector(t))){const i=document.querySelector(t);return i instanceof HTMLDivElement&&(i.__proto__=a.__proto__,i.created(),i.connectedCallback()),i}a._styleUrl="",window[p].EnableShadowDOM&&a.enableShadowDOM&&a.attachShadow({mode:"open"});a.isUtilityElement||a.created()}connect(){const t=this,i=t.isReady;let a;if(!i&&0<t.children.length&&t.children[0]instanceof HTMLStyleElement&&(a=t.children[0],t.removeChild(a)),(!t.shadowRoot||i&&t.shadowRoot)&&t.setup(),!i&&t.shadowRoot){a&&t.shadowRoot.insertBefore(a,t.shadowRoot.firstChild),t.importStyle(t._styleUrl);const n=t.getStaticMember("styleUrls","array"),i=t.getStaticMember("styles","string");let o=0;t.classList.add("smart-element-init");for(let a=0;a<n.length;a++)t.importStyle(Utilities.Core.getScriptLocation()+window[p].StyleBaseUrl+n[a],function(){o++,o===n.length&&(t.whenReady(function(){t.classList.remove("smart-element-init")}),t.setup())});if(i){const a=document.createElement("style");a.innerHTML=i,t.shadowRoot.insertBefore(a,t.shadowRoot.firstChild)}}}connectedCallback(){const t=this;if(t.isLoading||t.isUtilityElement)return;t.classList.add("smart-element-init");const i=function(){t.classList.remove("smart-element-init")};"complete"===document.readyState?(i(),t.connect()):(t.isLoading=!0,w.push({element:this,callback:function(){this.isReady||(i(),this.connect())}.bind(t)}))}disconnectedCallback(){const t=this;t.isAttached&&t.detached()}adoptedCallback(){const t=this;t.setup()}appendTemplate(t){const i=this;i.shadowRoot?i.shadowRoot.appendChild(t):i.appendChild(t)}}class ElementRegistry{static register(t,i){const a=i.prototype;let n=Core.toCamelCase(t).replace(/[a-z]+/,""),o=i.version||window[p].Version;if(!(window.customElements.get(t)&&window.customElements.get(t).version===o)){let l=t;for(o=o.split(".");window.customElements.get(t);)t=l+"-"+o.join("."),o[2]=parseInt(o[2])+1;y[t]||(y[t]=window[p][n]=i,a.elementName=n,a.defineElement(),v[t]&&v[t](a),window.customElements.define(t,i))}}static registerElements(){const t=this;if(t.toRegister){t.isRegistering=!0;for(let a=0;a<t.toRegister.length;a++){const i=t.toRegister[a];t.register(i.tagName,i.element)}t.isRegistering=!1}}static get(t){return y[t]?y[t]:void 0}static whenRegistered(t,i){if(!t)throw new Error("Syntax Error: Invalid tag name");const a=this,n=v[t],o=a.get(t),l=o?o.modules.length:3;try{n||o?!n&&o?(i(o.prototype),v[t]=void 0):n&&!o?v[t]=function(t){n(t),i(t)}:n&&o&&(o.proto&&(n(o.proto),i(o.proto)),v[t]=void 0):v[t]=function(t){try{i(t)}catch(t){const i=t instanceof Error?t.message:t.toString();console.log(i)}}}catch(t){const i=t instanceof Error?t.message:t.toString();console.log(i)}if(o&&l!==o.prototype.modules.length){const i=document.querySelectorAll(t);for(let t=0;t<i.length;t++){const a=i[t];a.isCreated&&a._initElement()}}}}ElementRegistry.lazyRegister=!1,ElementRegistry.tagNames=[];class Observable{constructor(t,i){const a=this;this.name="observable",t&&Object.assign(a,t);(function(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(i=>"constructor"===i||!!i.startsWith("_")||void(a[i]=t[i]))})(t);const n=new Proxy(a,{deleteProperty:function(t,i){return delete t[i],!0},get:function(t,i){return t[i]},set:function(t,n,o){const l=t[n];return!(l!==o)||!(t[n]=o,!("notifyFn"===n||n.startsWith("_")||"canNotify"===n))||!!(i&&-1===i.indexOf(n))||!a.canNotify||(a._notify({target:t,propertyName:n,oldValue:l,newValue:o}),!0)}});return n}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const i=this;i._canNotify=t}_notify(t){const a=this;if(a.canNotify&&a.notifyFn)for(let n=0;n<a.notifyFn.length;n++)a.notifyFn[n](t)}notify(t){const i=this;t&&(!i.notifyFn&&(i.notifyFn=[]),i.notifyFn.push(t))}}class ObservableArray{constructor(){const t=this;t.name="observableArray",t.observables=3>arguments.length?null:arguments[2];const i=new Proxy(t,{deleteProperty:function(t,i){return delete t[i],!0},apply:function(t,i,a){return t.apply(i,a)},get:function(i,a){return i[a]||isNaN(parseInt(a))?i[a]:t.getItem(parseInt(a))},set:function(i,a,n){return i[a]||isNaN(parseInt(a))?(i[a]=n,!0):(t.setItem(parseInt(a),n),!0)}});if(t._addArgs={eventName:"change",object:i,action:"add",index:null,removed:[],addedCount:1},t._removeArgs={eventName:"change",object:i,action:"remove",index:null,removed:null,addedCount:0},1<=arguments.length&&Array.isArray(arguments[0])){t._array=[];const a=arguments[0];for(let n=0,i=a.length;n<i;n++){const i=t._getItem(t._array.length,a[n]);t._array.push(i)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),i}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const i=this;i._canNotify=t}_notify(t){const i=this;!i.canNotify||i.notifyFn&&i.notifyFn(t)}notify(t){const i=this;t&&(i.notifyFn=t)}toArray(){const t=this;return t._array}_getItem(t,i){const a=this;if("string"==typeof i)return i;if("number"==typeof i)return i;if(void 0===i)return i;const n=new Proxy(i,{deleteProperty:function(t,i){delete t[i]},set:function(i,n,o){const l=i[n];return!(i[n]=o,!!a._canNotify)||!(!a.observables||a.observables[n])||(a._notify({eventName:"change",object:a,target:i,action:"update",index:t,path:t+"."+n,oldValue:l,newValue:o,propertyName:n}),!0)}});return n}getItem(t){return this._array[t]}setItem(t,i){const a=this,n=a._array[t];a._array[t]=a._getItem(t,i),a._notify({eventName:"change",object:this,action:"update",index:t,removed:[n],addedCount:1})}get length(){return this._array.length}set length(t){const i=this;Types.isNumber(t)&&i._array&&i._array.length!==t&&i.splice(t,i._array.length-t)}toString(){const t=this;return t._array.toString()}toLocaleString(){const t=this;return t._array.toLocaleString()}concat(){const t=this;t._addArgs.index=t._array.length;const i=t._array.concat.apply(t._array,arguments);return new Smart.ObservableArray(i)}join(t){const i=this;return i._array.join(t)}pop(){const t=this;t._removeArgs.index=t._array.length-1,delete t[t._array.length-1];const i=t._array.pop();return t._removeArgs.removed=[i],t._notify(t._removeArgs),t._notifyLengthChange(),i}push(){const t=this;if(t._addArgs.index=t._array.length,1===arguments.length&&Array.isArray(arguments[0])){const a=arguments[0];for(let n=0,i=a.length;n<i;n++){const i=t._getItem(t._array.length,a[n]);t._array.push(i)}}else{const i=t._getItem(t._addArgs.index,arguments[0]);t._array.push.apply(t._array,[i])}return t._addArgs.addedCount=t._array.length-t._addArgs.index,t._notify(t._addArgs),t._notifyLengthChange(),t._array.length}_notifyLengthChange(){const t=this;if(t.canNotify){const i=t._createPropertyChangeData("length",t._array.length);t._notify(i)}}_createPropertyChangeData(t,i,a){return{eventName:"change",object:this,propertyName:t,value:i,oldValue:a}}reverse(){const t=this;return t._array.reverse()}shift(){const t=this,i=t._array.shift();return t._removeArgs.index=0,t._removeArgs.removed=[i],t._notify(t._removeArgs),t._notifyLengthChange(),i}slice(t,i){const a=this;return a._array.slice(t,i)}sort(t){const i=this;return i._array.sort(t)}splice(t,i,a){const n=this,o=n._array.length,l=n._array.splice.apply(n._array,arguments);return a?n._notify({eventName:"change",object:this,action:"add",index:t,added:l,addedCount:n._array.length>o?n._array.length-o:0}):n._notify({eventName:"change",object:this,action:"remove",index:t,removed:l,addedCount:n._array.length>o?n._array.length-o:0}),n._array.length!==o&&n._notifyLengthChange(),l}unshift(){const t=this,i=t._array.length,a=t._array.unshift.apply(t._array,arguments);return t._addArgs.index=0,t._addArgs.addedCount=a-i,t._notify(this._addArgs),t._notifyLengthChange(),a}indexOf(t,i){const a=this,n=i?i:0;for(let o=n,r=a._array.length;o<r;o++)if(a._array[o]===t)return o;return-1}lastIndexOf(t,i){const a=this,n=i?i:a._array.length-1;for(let o=n;0<=o;o--)if(a._array[o]===t)return o;return-1}find(t,i){const a=this;return a._array.find(t,i)}findIndex(t,i){const a=this;return a._array.findIndex(t,i)}every(t,i){const a=this;return a._array.every(t,i)}some(t,i){const a=this;return a._array.some(t,i)}forEach(t,i){const a=this;a._array.forEach(t,i)}map(t,i){const a=this;return a._array.map(t,i)}filter(t,i){const a=this,n=a._array.filter(t,i);return n}reduce(t,i){const a=this;return i===void 0?a._array.reduce(t):a._array.reduce(t,i)}reduceRight(t,i){const a=this;return i===void 0?a._array.reduceRight(t):a._array.reduceRight(t,i)}}let D={};window[p]&&(D=window[p]),window[p]=function(i,a){let n=i;if(i){if(0<=i.indexOf("#")||0<=i.indexOf("."))return _[i]?_[i]:a?(_[i]=new a,t(i,_[i]),_[i]):void 0;if(a){if(ElementRegistry.tagNames[i]=a,ElementRegistry.lazyRegister){ElementRegistry.toRegister||(ElementRegistry.toRegister=[]);const t=Core.toCamelCase(n).replace(/[a-z]+/,"");return window[p][t]=a,void ElementRegistry.toRegister.push({tagName:n,element:a})}ElementRegistry.register(n,a)}}},window.addEventListener("load",function(){const t=window[p].Elements.tagNames;for(let i in t){const a=t[i];let n=document.querySelectorAll("["+i+"]");for(let t=0;t<n.length;t++){const i=n[t];i instanceof HTMLDivElement&&(i.__proto__=a.prototype,i.created(),i.connectedCallback()),i.classList.add("smart-element-ready")}}});class App{constructor(t){const i=this;i._template=t.template||{},i._id=t.id||window[p].Utilities.Core.createGUID(),i._data=t.data,i._appRoot=document.getElementById(i._id),i._appRoot||(i._appRoot=document.body),i._addAttributeBindings(),i._renderForBindings(),i._addModelBindings(),i._observeData(),i.render()}_addAttributeBindings(t,a){const n=this,o=new BindingModule,l=t?o.getBindings(t):o.getBindings(n._appRoot);a||(a="");const r=function(){return i(65536*(1+Math.random())).toString(16).substring(1)},s=function(t){const i=function(t){if(t.data){let i=t.node.id;for(let o in i||(t.node.id=i="id"+r()),t.data){const l=t.data[o];if("textContent"==o&&(t.node.parentNode.id?i=t.node.parentNode.id:(t.node.id="",t.node.parentNode.id=i)),l.isEvent){const t={};t[l.name]=l.value,n._addListenerBinding(i,t)}else{const t={};t[o]=a+l.name,n._addTemplateBinding(i,t)}}}};for(let a in i(t),t.children){const n=t.children[a];n.node&&n.node.getAttribute&&n.node.getAttribute("smart-for")&&null===n.node.getAttribute("smart-for-rendered")||(i(n),n.children&&s(n))}};s(l)}get template(){return this._template}set template(t){this._template=t,this.render()}get id(){return this._id}set id(t){this._id=t}get data(){return this._data}set data(t){const i=this;i._data=t,i._observeData(),i.render()}_addTemplateBinding(t,i){const a=this;a.template["#"+t]?a.template["#"+t].bind?Object.assign(a.template["#"+t].bind,i):a.template["#"+t].bind=i:a.template["#"+t]={bind:i}}_addListenerBinding(t,i){const a=this;a.template["#"+t]?a.template["#"+t].listeners?Object.assign(a.template["#"+t].listeners,i):a.template["#"+t].listeners=i:a.template["#"+t]={listeners:i}}_updateDataFromBooleanElement(t,i){const a=this,n=i.checked,o=a.data[n];if(!(t.value&&"on"!==t.value))a.data[n]=t.checked;else if(!(Array.isArray(o)||"observableArray"===o.name))"radio"===t.type?t.checked&&(a.data[n]=t.value):t.checked?a.data[n]=t.value:a.data[n]="";else if(t.checked)o.push(t.value);else{const i=o.indexOf(t.value);0<=i&&o.splice(i,1)}}_updateDataFromNativeElement(t,i){const a=this;if("SELECT"===t.tagName&&t.addEventListener("change",function(){const n=i.value;let o=a.data[n];if(t.__updating=!0,Array.isArray(o)||"observableArray"===o.name){if(o=new ObservableArray,t.selectedOptions)for(let a=0;a<t.selectedOptions.length;a++){const i=t.selectedOptions[a];o.push(i.value)}a.data[n]=o}else a.data[n]=t.value;t.__updating=!1}),"INPUT"===t.tagName||"TEXTAREA"===t.tagName){t.addEventListener("change",function(){t.__updating=!0,n?a._updateDataFromBooleanElement(t,i):a.data.value=t.value,t.__updating=!1});let n="checkbox"===t.type||"radio"===t.type;n||t.addEventListener("keyup",function(){const n=i.value;a.data[n]=t.value})}}_addModelBindings(t){const a=this,n=t?t.querySelectorAll("[smart-model]"):a._appRoot.querySelectorAll("[smart-model]");for(let o=0;o<n.length;o++){const t=n[o];let i={value:t.getAttribute("smart-model")};"list"===t.type&&(i={selectedValues:t.getAttribute("smart-model")}),("checkbox"===t.type||"radio"===t.type)&&(i={checked:t.getAttribute("smart-model")}),t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),a._updateDataFromNativeElement(t,i),a._addTemplateBinding(t.id,i)}}_renderForBindings(t){const a=this,n=a._appRoot.querySelectorAll("[smart-for]");for(let o=0;o<n.length;o++){const t=n[o],i=t.getAttribute("smart-for"),l=a.data[i];t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),t.setAttribute("smart-for-rendered","");const r=null!==t.getAttribute("smart-for-self"),s=r?t.parentNode.querySelectorAll(".smart-for-item-"+t.id):t.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<s.length;t++)a.template[s[t].id]&&delete a.template[s[t].id],s[t].remove();const d=r?t:t.firstElementChild,m=document.createDocumentFragment();for(let i=0;i<l.length;i++){const a=d.cloneNode(!0);a.style.display="",a.id=t.id+"_"+i,a.classList.add("smart-for-item"),a.classList.add("smart-for-item-"+t.id),a.removeAttribute("smart-for"),m.appendChild(a)}d.style.display="none",r?t.parentNode.insertBefore(m,t.nextSibling):t.appendChild(m);let c=a._appRoot.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<c.length;t++){const n=c[t];a._addAttributeBindings(n,i+"."+t+".")}}t&&0<n.length&&a.render()}notify(t){const i=this;i.notifyFn=t}_notify(t){const i=this;if("length"===t.propertyName)return;i.notifyFn&&i.notifyFn(t);let a=t.propertyName;for(let n in t.object&&(a=t.object.propertyName),i.template){const t=i.template[n];let o=null;for(let i in t.bind)if(0<=t.bind[i].indexOf(a)){o=i;break}o&&i._setPropertyFromData(t,o)}i._renderForBindings(!0)}_observeData(){const t=this;for(let i in t._data=new window[p].Observable(t._data),t._data.canNotify=!1,t._data.notify(t._notify.bind(t)),t.data){if("function"==typeof t.data[i])continue;if(i.startsWith("_")||"notifyFn"==i||"canNotify"==i||"name"==i)continue;const a=t.data[i];Array.isArray(a)?(t.data[i]=new Smart.ObservableArray(t.data[i]),t.data[i].canNotify=!1,t.data[i].notify(t._notify.bind(t)),t.data[i].canNotify=!0,t.data[i].propertyName=i):"object"==typeof a&&(t.data[i]=new Smart.Observable(t.data[i]),t.data[i].canNotify=!1,t.data[i].notify(t._notify.bind(t)),t.data[i].canNotify=!0,t.data[i].propertyName=i)}t._data.canNotify=!0}_setPropertyFromData(t,i){const a=this;if(t.element.__updating)return;const n=t.bind[i],o=n?n.split("."):[];let l=a.data;for(let a=0;a<o.length;a++){const t=o[a];if("string"==typeof l)break;if(void 0===l[t])break;l=l[t]}t.element.__updatingProperties=!0,n&&l!==void 0?"observableArray"===l.name?"checkbox"===t.element.type?t.element[i]=0<=l.indexOf(t.element.value):t.element[i]=l.toArray().slice(0):"radio"===t.element.type?t.element.value===l?t.element[i]=!0:t.element[i]=!1:t.element[i]=l:t.properties&&(t.element[i]=t.properties[i]),t.element.__updatingProperties=!1}render(){const t=this;for(let i in t.template){const a=t.template[i],n=a.element?a.element:document.querySelector(i),o=a.properties,l=a.listeners,r=a.bind;if(!n)continue;for(let i in a.element=n,o){const o=n._properties[i];o.notify=!0,t._setPropertyFromData(a,i)}for(let i in r){const o=n._properties?n._properties[i]:null;o&&(o.notify=!0),t._setPropertyFromData(a,i)}const s=function(i){for(let a in l)n.$||(n.$=Smart.Utilities.Extend(n)),n.$[i](a,function(i){const n=l[a];t.data[n]&&t.data[n](i)});for(let a in r){const o=n._properties?n._properties[a]:null;if(o){const l=function(i){if(!n.__updatingProperties){n.__updating=!0;const o=function(t){if("radio"===n.type){const a=n.parentNode.querySelectorAll("[type=\"radio\"]");for(let n=0;n<a.length;n++)a[n].__updating=t}};o(!0);const l=r[a];if("radio"===n.type||"toggle"===n.type||"checkbox"===n.type)t._updateDataFromBooleanElement(n,r);else{(function(t,a,n){var o;for(o=0;o<a.length-1;o++)t=t[a[o]];t[a[o]]=n})(t.data,l.split("."),i.detail.value)}n.__updating=!1,o(!1)}};"textarea"===n.type&&n.$[i]("input.keyup",function(t){const i=new CustomEvent("keyup",{detail:{originalEvent:t,value:n.$.input.value}});l(i)}),n.$[i](o.attributeName+"-changed",function(t){l(t)})}else;}};s("unlisten"),s("listen"),n.onAttached=function(){s("listen")},n.onDetached=function(){s("unlisten")}}}}Object.assign(window[p],{Elements:ElementRegistry,Modules:[ErrorModule,LocalizationModule,BindingModule],BaseElement:BaseCustomElement,Utilities:Utilities,Import:function(t,i){let a=0;const n=function(t,i){return new Promise(a=>{const n=document.createElement("script");n.src=t,n.onload=a;for(let t=0;t<document.head.children.length;t++){const n=document.head.children[t];if(n.src&&0<=n.src.toString().indexOf(i))return void a()}document.head.appendChild(n)})};return new Promise(o=>{const l=Utilities.Core.getScriptLocation(),r=function(i){if(t[i]){const s=l+"/"+t[i];n(s,t[i]).then(function(){a++,a===t.length&&o(),r(i+1)})}};if(i)for(let r=0;r<t.length;r++){const i=l+"/"+t[r];n(i,t[r]).then(function(){a++,a===t.length&&o()})}else r(0)})},ObservableArray:ObservableArray,Observable:Observable,App:App,Component:class{constructor(t,i,a){let n=document.querySelector(t);return n||(n=document.querySelector(i)),window[p](t,class{get properties(){return a}}),n}},Theme:D.Theme||"",EnableShadowDOM:!1,StyleBaseUrl:"/styles/default/scoped/",Version:"3.0.0"});let T=window[p].Theme;Object.defineProperty(window[p],"Theme",{configurable:!1,enumerable:!0,get(){return T},set(t){const i=T;T=t,b.fireEvent("theme-changed",{oldValue:i,newValue:t},{bubbles:!0,cancelable:!0})}}),window[p]("smart-base-element",window[p].BaseElement),window[p]("smart-content-element",class extends window[p].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready();const t=this;t.applyContent()}clearContent(){for(const t=this;t.$.content.firstChild;)t.$.content.removeChild(t.$.content.firstChild)}applyContent(){const t=this;if(void 0===t.content)return void(t.content=t.$.content);if(""===t.content||null===t.content)return void t.clearContent();if(t.content instanceof HTMLElement)return t.clearContent(),void t.$.content.appendChild(t.content);const a=document.createDocumentFragment();let i=document.createElement("div");a.appendChild(i),t.content instanceof HTMLElement?i.appendChild(t.content):i.innerHTML=t.content;let n=Array.from(i.childNodes);i.parentNode.removeChild(i);for(let t=0;t<n.length;t++)a.appendChild(n[t]);t.clearContent(),t.$.content.appendChild(a)}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;i===a||("innerHTML"===t&&(n.content=a,n.applyContent(),n.innerHTML=n.content=Utilities.Core.html(n.$.content)),"content"===t&&n.applyContent())}}),window[p]("smart-scroll-viewer",class extends window[p].ContentElement{static get properties(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",wheel:"_mouseWheelHandler"}}template(){return`<div id="container" class="smart-container">
                    <div id="scrollViewerContainer" class ="smart-scroll-viewer-container">
                      <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-scroll-viewer-content-container">
                          <content></content>
                      </div>
                    </div>
                    <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                    <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]"></smart-scroll-bar>
                </div>`}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t&&i.$.scrollViewerContentContainer.appendChild(t)}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t&&i.$.scrollViewerContentContainer.removeChild(t)}removeAll(){const t=this;t.isCompleted&&(t.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(t){const i=this;i.$.scrollViewerContentContainer.style.left=-i.scrollLeft+"px",t.stopPropagation(),i.onHorizontalChange&&i.onHorizontalChange()}_verticalScrollbarHandler(t){const i=this;i.$.scrollViewerContentContainer.style.top=-i.scrollTop+"px",t.stopPropagation(),i.onVerticalChange&&i.onVerticalChange()}_mouseWheelHandler(t){const i=this;!i.disabled&&(i.computedHorizontalScrollBarVisibility||i.computedVerticalScrollBarVisibility)&&(i.computedVerticalScrollBarVisibility?(t.stopPropagation(),t.preventDefault(),0<i.scrollHeight&&i.scrollTo(i.scrollTop+(0>t.deltaY?-i.offsetHeight:i.offsetHeight))):i.computedHorizontalScrollBarVisibility&&(t.stopPropagation(),t.preventDefault(),0<i.scrollWidth&&i.scrollTo(void 0,i.scrollLeft+(0>t.deltaY?-i.offsetWidth:i.offsetWidth))))}applyContent(){const t=this;super.applyContent(),t.refresh()}get computedHorizontalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?!t._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?!t._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(t,i){const a=this;a._scrollView&&(t!==void 0&&a._scrollView.scrollTo(t),i!==void 0&&a._scrollView.scrollTo(i,!1))}refreshScrollBarsVisibility(){const t=this;t._scrollView&&(t._scrollView.hScrollBar.disabled=t.disabled,t._scrollView.vScrollBar.disabled=t.disabled,"disabled"===t.horizontalScrollBarVisibility&&(t._scrollView.hScrollBar.disabled=!0),"disabled"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.disabled=!0),0<t.scrollWidth?t._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),0<t.scrollHeight?t._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.$.removeClass("smart-hidden"),!t.disabled&&(t._scrollView.vScrollBar.disabled=0>=t.scrollHeight)),t.computedHorizontalScrollBarVisibility&&t.computedVerticalScrollBarVisibility?(t._scrollView.hScrollBar.$.addClass("bottom-corner"),t._scrollView.vScrollBar.$.addClass("bottom-corner")):(t._scrollView.hScrollBar.$.removeClass("bottom-corner"),t._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const t=this;t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t.refresh()}refresh(){function t(){return n=a.$.scrollViewerContentContainer.offsetWidth-a.$.scrollViewerContainer.offsetWidth,0<n&&"hidden"!==a.horizontalScrollBarVisibility||"visible"===a.horizontalScrollBarVisibility?a.$.scrollViewerContainer.classList.add("hscroll"):a.$.scrollViewerContainer.classList.remove("hscroll"),n}function i(){return o=a.$.scrollViewerContentContainer.offsetHeight-a.$.scrollViewerContainer.offsetHeight,0<o&&"hidden"!==a.verticalScrollBarVisibility||"visible"===a.verticalScrollBarVisibility?a.$.scrollViewerContainer.classList.add("vscroll"):a.$.scrollViewerContainer.classList.remove("vscroll"),o}const a=this;if(!a.$.scrollViewerContentContainer)return;let n,o;a.scrollWidth=t(),a.scrollHeight=i(),a.scrollHeight||(a.scrollWidth=t()),a.scrollWidth||(a.scrollHeight=i()),a.computedVerticalScrollBarVisibility&&(a.scrollHeight+=a._scrollView.hScrollBar.offsetHeight),a.computedHorizontalScrollBarVisibility&&(a.scrollWidth+=a._scrollView.vScrollBar.offsetWidth)}attached(){const t=this;super.attached(),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar))}detached(){const t=this;super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView)}get scrollWidth(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?1===t._scrollView.hScrollBar.max&&"visible"===t.horizontalScrollBarVisibility?0:t._scrollView.hScrollBar.max:-1}set scrollWidth(t){const i=this;0>t&&(t=0),i._scrollView&&i._scrollView.hScrollBar&&(i._scrollView.hScrollBar.max=0===t&&"visible"===i.horizontalScrollBarVisibility?0:t,i.refreshScrollBarsVisibility())}get scrollHeight(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?1===t._scrollView.vScrollBar.max&&"visible"===t.verticalScrollBarVisibility?0:t._scrollView.vScrollBar.max:0}set scrollHeight(t){const i=this;0>t&&(t=0),i._scrollView&&i._scrollView.vScrollBar&&(i._scrollView.vScrollBar.max=0===t&&"visible"===i.verticalScrollBarVisibility?1:t,i.refreshScrollBarsVisibility())}get scrollLeft(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?t._scrollView.hScrollBar.value:0}set scrollLeft(t){const i=this;0>t&&(t=0),i._scrollView&&i._scrollView.hScrollBar&&(i._scrollView.hScrollBar.value=t)}get scrollTop(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?t._scrollView.vScrollBar.value:0}set scrollTop(t){const i=this;0>t&&(t=0),i._scrollView&&i._scrollView.vScrollBar&&(i._scrollView.vScrollBar.value=t)}propertyChangedHandler(t,i,a){const n=this;super.propertyChangedHandler(t,i,a),n.refresh()}}),window[p].Utilities.Assign("PositionDetection",class{constructor(t,a,n,o){const l=this;if(a){const n="dropDown"+i(65536*(1+Math.random())).toString(16).substring(1);a.id=n,t.setAttribute("aria-controls",n)}l.context=t,l.dropDown=a,l.defaultParent=n,l.closeMethod=o}handleAutoPositioning(){function t(){l=n(t),("auto"!==a.dropDownPosition||a.disabled||null===a.parentElement)&&cancelAnimationFrame(l);const r=Date.now();200<=r-o&&(i.scrollHandler(),o=Date.now())}const i=this,a=i.context;if("auto"!==a.dropDownPosition||a.disabled)return;const n=(()=>window.requestAnimationFrame)();let o=Date.now(),l;return l=n(t)}checkBrowserBounds(t){const i=this.context;"auto"!==i.dropDownPosition||i.disabled||("vertically"===t?this.checkBrowserBoundsVertically():"horizontally"===t?this.checkBrowserBoundsHorizontally():(this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()))}checkBrowserBoundsHorizontally(){const t=this.context,i=this.dropDown;let a=0,n;null===t._dropDownParent?i.style.left="":(n=!0,window.innerWidth!==document.documentElement.clientWidth&&(a=window.innerWidth-document.documentElement.clientWidth));let l=t.getBoundingClientRect().left;if(0>l&&(i.style.left=(n?0:o(l))+"px",l=parseFloat(i.style.left)),l+i.offsetWidth>document.documentElement.clientWidth){const t=l-o(document.documentElement.clientWidth-l-i.offsetWidth);i.style.left=(n?t:t-l)+"px",window.innerWidth===document.documentElement.clientWidth&&(i.style.left=parseFloat(i.style.left)+a+"px"),n&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(t){const i=this.context,a=this.dropDown,n=i._dropDownListPosition;t||(t=i.getBoundingClientRect());0===t.height||(i._dropDownListPosition=0<=document.documentElement.clientHeight-o(t.top+t.height+a.offsetHeight)?"bottom":0<=t.top-a.offsetHeight?"top":"overlay-center",this.updatePositionAttribute(n,i._dropDownListPosition))}scrollHandler(){const t=this.context;if(t.parentElement){const i=t.getBoundingClientRect();if(i.top!==t._positionTop){const a=t._dropDownListPosition;this.checkBrowserBoundsVertically(i),t._dropDownListPosition!==a&&this.positionDropDown(),t._positionTop=i.top}}}getDropDownParent(t){const i=this.context,a=this.dropDown;let n=i.dropDownAppendTo;i._positionedParent=null,null===n?i._dropDownParent=null:"body"===n||n===document.body?i._dropDownParent=document.body:n instanceof HTMLElement?i._dropDownParent=n:"string"==typeof n?(n=document.getElementById(n),n instanceof HTMLElement?i._dropDownParent=n:(i.dropDownAppendTo=null,i._dropDownParent=null)):(i.dropDownAppendTo=null,i._dropDownParent=null);let o=i._dropDownParent;if(null!==o){for(;"static"===window.getComputedStyle(o).position&&o!==document.body;)o=o.parentElement;i._positionedParent=o===document.body?null:o,a&&(a.setAttribute("animation",i.animation),""!==i.theme&&a.$.addClass(i.theme),t&&(i._dropDownParent.appendChild(a),a.$.addClass("smart-drop-down-repositioned")),-1===i.detachedChildren.indexOf(a)&&i.detachedChildren.push(a))}}dropDownAppendToChangedHandler(){const t=this.context,i=this.dropDown,a=t._dropDownParent;this.getDropDownParent();t._dropDownParent===a||(t[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(t=>i.style[t]=null),null===t._dropDownParent?(this.defaultParent.appendChild(i),i.$.removeClass("smart-drop-down-repositioned")):(t._dropDownParent.appendChild(i),i.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const t=this;t.dropDown.style.transition="none",t.context[t.closeMethod](),t.setDropDownPosition(),t.handleAutoPositioning()}dropDownAttached(t){const i=this.context;null===i._dropDownParent||(i._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),t&&i[t]())}dropDownDetached(){const t=this.context;null!==t._dropDownParent&&t._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const t=this.context,i=t.dropDownPosition,a=t._dropDownListPosition;"auto"===i?this.checkBrowserBounds():t._dropDownListPosition=i,this.updatePositionAttribute(a,t._dropDownListPosition)}updatePositionAttribute(t,i){const a=this.context,n=this.dropDown;a.$.dropDownButton&&!a.$.dropDownButton.hasAttribute(i)&&(a.$.dropDownButton.removeAttribute(t),a.$.dropDownButton.setAttribute(i,"")),n.hasAttribute(i)||(n.style.transition="none",n.removeAttribute(t),n.setAttribute(i,""),requestAnimationFrame(function(){n.style.transition=null}))}positionDropDown(t){const i=this.context,a=this.dropDown;if(!i.opened||null===i._dropDownParent)return;const n=i.getBoundingClientRect();let o,l;if(this.customPositionDropDown){const t=this.customPositionDropDown(n);o=t.left,l=t.top}else switch(o=n.left,l=n.top,i._dropDownListPosition){case"bottom":l+=i.$.container.offsetHeight-1;break;case"center-bottom":l+=i.$.container.offsetHeight-1,o+=i.offsetWidth-a.offsetWidth/2;break;case"center-top":l-=a.offsetHeight-1,o+=i.offsetWidth-a.offsetWidth/2;break;case"top":l-=a.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":l-=a.offsetHeight/2-i.offsetHeight/2;break;case"overlay-top":l-=a.offsetHeight-i.offsetHeight;}const r=this.getDropDownOffset();a.style.top=l+r.y+"px";t||(a.style.left=o+r.x+"px")}getDropDownOffset(){const t=this.context._positionedParent;let i,a;if(t){const n=t.getBoundingClientRect();i=-n.left,a=-n.top}else i=window.pageXOffset,a=window.pageYOffset;return{x:i,y:a}}placeOverlay(){const t=this.context;if(t.dropDownOverlay&&!t._overlay){const i=document.createElement("div");i.classList.add("smart-drop-down-overlay"),i.style.width=document.documentElement.scrollWidth+"px",i.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(i),t._overlay=i}}removeOverlay(t){function i(){0<a.dropDown.getBoundingClientRect().height?requestAnimationFrame(i):(document.body.removeChild(n._overlay),delete n._overlay)}const a=this,n=a.context;n._overlay&&(n.hasAnimation&&t?requestAnimationFrame(i):(document.body.removeChild(n._overlay),delete n._overlay))}})})(),Smart.Utilities.Assign("Complex",class{constructor(t,i){if("string"==typeof t)this.complexNumber=this.parseComplexNumber(t),this.realPart=this.complexNumber.realPart,this.imaginaryPart=this.complexNumber.imaginaryPart;else if("number"==typeof t){if(this.realPart=t,"number"==typeof i)this.imaginaryPart=i;else if("undefined"==typeof i)this.imaginaryPart=0;else throw new Error("Can't create complex number: invalid imaginary part");this.complexNumber=this.parseComplexNumber(this.realPart,this.imaginaryPart)}else throw new Error("Can't create complex number")}valueOf(){return 0===this.imaginaryPart?this.realPart:null}isNaN(){return isNaN(this.realPart)||isNaN(this.imaginaryPart)}isZero(){return(0===this.realPart||-0===this.realPart)&&(0===this.imaginaryPart||-0===this.imaginaryPart)}isFinite(){return isFinite(this.realPart)&&isFinite(this.imaginaryPart)}isInfinite(){return!(this.isNaN()||this.isFinite())}parseComplexNumber(t,i){const a={realPart:0,imaginaryPart:0};if(t===void 0||null===t)a.realPart=a.imaginaryPart=0;else if(i!==void 0)a.realPart=t,a.imaginaryPart=i;else switch(typeof t){case"object":if("imaginaryPart"in t&&"realPart"in t)a.realPart=t.realPart,a.imaginaryPart=t.imaginaryPart;else if(2===t.length)a.realPart=t[0],a.imaginaryPart=t[1];else throw SyntaxError("Invalid Complex Number Parameter");break;case"string":{a.imaginaryPart=a.realPart=0;const n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let o=1,l=0;if(null===n)throw SyntaxError("Invalid Complex Number Parameter");for(let t=0;t<n.length;t++){const i=n[t];if(" "===i||"\t"===i||"\n"===i);else if("+"===i)o++;else if("-"===i)l++;else if("i"===i||"I"===i){if(0===o+l)throw SyntaxError("Invalid Complex Number Parameter");" "===n[t+1]||isNaN(n[t+1])?a.imaginaryPart+=parseFloat((l%2?"-":"")+"1"):(a.imaginaryPart+=parseFloat((l%2?"-":"")+n[t+1]),t++),o=l=0}else{if(0===o+l||isNaN(i))throw SyntaxError("Invalid Complex Number Parameter");"i"===n[t+1]||"I"===n[t+1]?(a.imaginaryPart+=parseFloat((l%2?"-":"")+i),t++):a.realPart+=parseFloat((l%2?"-":"")+i),o=l=0}}if(0<o+l)throw SyntaxError("Invalid Complex Number Parameter");break}case"number":a.imaginaryPart=0,a.realPart=t;break;default:throw SyntaxError("Invalid Complex Number Parameter");}return a}compare(t,i){var a=Math.abs;const n=this.parseComplexNumber(t,i),o=this.parseComplexNumber("1e-16");return a(n.realPart-this.realPart)<=o&&a(n.imaginaryPart-this.imaginaryPart)<=o}toString(){let t=this.realPart,i=this.imaginaryPart,a="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==t&&(a+=t),0!==i&&(0===t?0>i&&(a+="-"):a+=0>i?" - ":" + ",i=Math.abs(i),1!==i&&(a+=i),a+="i"),a?a:"0")}});class DataAdapter{constructor(t){t||(t={});const a=Object.assign(this,t);if(a.$document=Smart.Utilities.Extend(document),a.boundSource=!1===a.observable?[]:new Smart.ObservableArray,a.dataItemById=[],void 0===a.allowAdd&&(a.allowAdd=!0),void 0===a.allowRemove&&(a.allowRemove=!0),void 0===a.allowUpdate&&(a.allowUpdate=!0),void 0===t.observable&&(a.observable=!0),t.dataSource||(a.dataSource=[]),t.dataFields||(a.dataFields=[]),t.dataSourceType||(a.dataSourceType="array"),t.id||(a.id=null),a.dataFields){let t=[];if("number"==typeof a.dataFields)for(let n=0;n<a.dataFields;n++)t.push({name:n,dataType:"string"});else for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if("string"==typeof i){const a=i.split(":"),n=a[0].trim(),o=1<a.length?a[1].trim():"string";t.push({name:n,dataType:o})}else t.push(i)}a.dataFields=t}t&&!1!==t.autoBind&&a.dataBind(),a.isInitialized=!0}get dataSource(){const t=this;return t._dataSource||(t._dataSource=[]),t._dataSource}set dataSource(t){const i=this;i._dataSource=t,i.isInitialized&&(i.boundSource=!1===i.observable?[]:new Smart.ObservableArray,i.dataItemById=[],i.bindingCompleted=!1,i.dataBind())}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const i=this;i._canNotify=t}_notify(t){const i=this;!i.canNotify||i.notifyFn&&i.notifyFn(t)}notify(t){const i=this;t&&(i.notifyFn=t)}dataBind(){const t=this;t.clear(),"array"===t.dataSourceType&&(t._bindToArray(),t.boundSource.notify(function(i){"update"===i.type&&0<=i.path.indexOf(".")&&t._notify&&t._notify({action:"update",data:i.item,index:i.index})}),t._onBindingComplete())}_onBindingComplete(){const t=this;t._buildHierarchy(),t.onBindingComplete&&t.onBindingComplete({data:t.boundSource}),t._notify&&t._notify({action:"bindingComplete",data:t.boundSource}),t.bindingCompleted=!0}refreshHierarchy(){const t=this;t._buildHierarchy()}find(){const t=this;return t.boundSource.find(arguments)}toArray(){const t=this;return t.boundSource.toArray()}onVirtualDataSourceRequested(t,i){const a=this;let n=i?i.first:1/0,o=i?i.last:1/0;if(void 0===n&&(n=1/0),void 0===o&&(o=1/0),a.virtualFirstIndex=n,a.virtualLastIndex=o,a.virtualDataSource){let l=!1;const r=t=>0===Object.entries(t).length&&t.constructor===Object,s=r(i.sorting)&&r(i.filtering)&&r(i.grouping);if(a.virtualDataSourceCache&&n!==1/0&&s){let t=0;for(let l=n;l<o;l++)a[l].isEmpty||t++;t==o-n&&(l=!0)}l?t():a.virtualDataSource(function(l){l.virtualDataSourceLength&&(a.virtualDataSourceLength=l.virtualDataSourceLength),new Smart.DataAdapter({dataSource:l.dataSource,dataFields:l.dataFields||a.dataFields,data:i,onBindingComplete(l){if(n===1/0)a.add(l.data);else{let t=[],r=[];for(let a=0;a<l.data.length;a++){const i=l.data[a];n+a<=o&&(t.push(i),r.push(n+a))}a.update(r,t)}a.onFilter&&a.onFilter(),t()}})},{first:n,last:o,sorting:i.sorting,filtering:i.filtering,grouping:i.grouping,action:i.action})}else t()}add(t){const i=this;if(!t)return;let a=!0;const n=function(t){const n=!t.$||t.$&&void 0===t.$.id?i._getDataItem(t,i.boundSource.length):t;i[i.boundSource.length]=n,i.dataItemById[n.$.id]=n;const o=i.boundSource.push(n);return o||(a=!1),n};if(t.length){let a=[];for(let o=0;o<t.length;o++){const i=n(t[o]);a.push(i)}i._notify({action:"add",data:a})}else{const a=n(t);i._notify({action:"add",data:a})}return i.refreshHierarchy(),a}removeLast(){const t=this,i=t.boundSource.pop();return t._notify({action:"removeLast",data:i}),t.refreshHierarchy(),i}remove(t){const i=this,a=i.boundSource[t];if(!a)throw new Error("Invalid Item Index");i.boundSource.splice(t,1),i._notify({action:"remove",index:t,data:a}),i.refreshHierarchy()}update(t,a){const n=this;if(!(Smart.Utilities.Types.isArray(t)&&Smart.Utilities.Types.isArray(a)&&0===t.length&&0===a.length)){if(a.length&&t.length){let o=[];for(let l=0;l<t.length;l++){const i=n._getDataItem(a[l],t[l]),r=t[l];o.push(i),n.boundSource[r]=i,n[r]=n.boundSource[r],n.dataItemById[i.$.id]=n[r]}return n._notify({action:"update",index:t,data:o}),void n.refreshHierarchy()}const i=n._getDataItem(a,t);return n.boundSource[t]=i,n[t]=n.boundSource[t],n.dataItemById[i.$.id]=n[t],n._notify({action:"update",index:t,data:i}),n.refreshHierarchy(),i}}insert(t,i){const a=this,n=a.boundSource.splice(t,0,i);return a._notify({action:"insert",index:t,data:i}),a.refreshHierarchy(),n}indexOf(t){const i=this,a=i.boundSource.indexOf(t);return a}get length(){const t=this;return t.virtualDataSourceLength?t.virtualDataSourceLength:"number"==typeof t.dataSource?t.dataSource:t.bindingCompleted?t.boundSource.length:t.dataSource&&t.dataSource.length?t.dataSource.length:t.boundSource.length}clear(){const t=this;for(let a=0;a<t.boundSource.length;a++)delete t[a];t._cachedValues=[],t.boundSource=t.observable?new Smart.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,i,a){if(null!==t&&t.name!==void 0&&t.name){let n=i.getAttribute(t.name);if(null!==n&&0<n.toString().length)return n;if(t.map)try{let a=i.getAttribute(t.map);if(null!==a&&0<a.toString().length)return a}catch(t){return a}return}if(t&&0<t.toString().length){let a=i.getAttribute(t);if(null!==a&&0<a.toString().length)return a.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");else{let a=t.split(this.mapChar);if(1<a.length){let t=i;for(let i=0;i<a.length;i++)void 0!==t&&(t=t[a[i]]);if(void 0!==t)return t}else if(void 0!==i[t])return i[t]}}return a}_buildHierarchy(){const t=this;if(!t.reservedNames)t.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else{const i=t.reservedNames;i.leaf||(i.leaf="leaf"),i.parent||(i.parent="parent"),i.expanded||(i.expanded="expanded"),i.checked||(i.checked="checked"),i.selected||(i.selected="selected"),i.level||(i.level="level"),i.data||(i.data="data")}const a=t.reservedNames;if(t.childrenDataField){for(let n=0;n<this.boundSource.length;n++){const i=this.boundSource[n];if(!i)continue;const o=function(i){if(t.item)i.boundSource=i[t.childrenDataField][t.item];else{const a=t.childrenDataField.split(t.mapChar);let n=null;if(1<a.length){let t=i;for(let i=0;i<a.length;i++)void 0!==t&&(t=t[a[i]]);n=t}else n=i[t.childrenDataField];i.boundSource=n}(null===i.boundSource||i.boundSource&&0===i.boundSource.length)&&(i[a.leaf]=!0)};o(i),i[a.level]=0;let l=this._getId(t.id,i,n);i.$||(i.$={}),i.$.id=l,i[a.parent]=null,i[a.data]=i,i[a.expanded]===void 0&&(i[a.expanded]=!1);const r=function(n,l){if(!l)return void(n.boundSource=[]);for(let s=0,i;s<l.length;s++){if(i=l[s],!i)continue;o(i),i[a.level]=n[a.level]+1,i[a.parent]=n,i[a.data]=i;let d=t._getId(t.id,i,s);i.$.id=d===s&&null===t.id?n.$.id+"_"+d:d,void 0===i[a.expanded]&&(i[a.expanded]=!1),r(i,i.boundSource)}};r(i,i.boundSource)}this.itemHierarchy=t.boundSource}t.xmlRoot&&"xml"===t.dataSourceType&&(this.itemHierarchy=this._getDataItemHierarchy("uid","_parentuid","boundSource",null,t.boundSource)),t.keyDataField&&t.parentDataField&&(this.itemHierarchy=this._getDataItemHierarchy(t.keyDataField.name,t.parentDataField.name,"boundSource",null,t.boundSource)),t.groupBy&&(this.itemHierarchy=this._getGroupDataItemHierarchy(t.groupBy,"boundSource","label",null,"data",null,"parent",t.boundSource))}_getGroupDataItemHierarchy(t,i,a,n,o,l,r,s,d){let m=this;d||(d=0);let c=m.reservedNames;const u=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};let p=[];for(let m=0;m<t.length;m++)p[m]=u();i||(i="items"),a||(a="group"),o||(o="item"),r||(r="parent"),void 0===l&&(l="value");const g=[],h=[];let _=0;const f=function(t){let i=t;if(n)for(let t in n){const a=n[t];a.name&&a.map&&(i[a.map]=i[a.name])}return i};for(let m=0,b;m<s.length;m++){b=Object.assign({},f(s[m])),b[c.leaf]=!1;let n=[],y=0;for(let i=0;i<t.length;i++){const a=t[i],o=b[a];null!==o&&(n[y++]={value:o,group:a,hash:p[i]})}if(n.length!==t.length)break;let v=null,w="";for(let t=0;t<n.length;t++){const s=n[t].value,m=n[t].group,u=n[t].hash;if(w=w+"_"+u+"_"+s,void 0!==h[w]&&null!==h[w]){v=h[w];continue}if(null===v){v={},v[c.level]=0,v[c.leaf]=!1,v[r]=null,v[a]=s,v[o]=b,v.groupDataField=m,v[c.expanded]=void 0!==b[c.expanded]&&b[c.expanded],l&&(v[l]=b[l]),v[i]=[];let t=g.length+d;(!this.id||"number"==typeof b.$.id||isFinite(b.$.id))&&(t="Item"+t),void 0===v.$.id&&(v.$.id=t),g[_++]=v}else{const t={};t[c.level]=v[c.level]+1,t[r]=v,t[a]=s,t[i]=[],t[o]=b,t.groupDataField=m,t[c.leaf]=!1,t[c.expanded]=void 0!==b[c.expanded]&&b[c.expanded],l&&(t[l]=b[l]),void 0===t.$.id&&(t.$.id=v.$.id+"_"+v[i].length),v[i][v[i].length]=t,v=t}h[w]=v}b&&(b[c.leaf]=!0),null===v?void 0===b.$.id&&(b.$.id=u()):(null===this.id?void 0===b.$.id&&(b.$.id=v.$.id+"_"+v[i].length):void 0===b.$.id&&-1===b.$.id.toString().indexOf(v.$.id)&&(b.$.id=v.$.id+"_"+b.$.id),b[r]=v,b[c.level]=v[c.level]+1,v[i][v[i].length]=b)}return g}_getDataItemHierarchy(t,a,i,n,o){const l=this;let r=[],s=this.boundSource;if(o&&(s=o),0===this.boundSource.length)return null;let d=null===i?"items":i,m=[],c=s,u=c.length,p=l.reservedNames,g=function(t){let i=t;if(n)for(let t in n){const a=n[t];a.name&&a.map&&(i[a.map]=i[a.name])}return i};for(let l=0;l<u;l++){let i=Object.assign({},c[l]),n=i[a],o=i[t];m[o]={parentId:n,item:i}}for(let l=0;l<u;l++){let i=Object.assign({},c[l]),n=i[a],o=i[t];if(void 0!==m[n]){let t={parentId:n,item:m[o].item},i=m[n].item;i[d]||(i[d]=[]);let a=i[d].length;t=t.item,p?void 0===t[p.parent]&&(t[p.parent]=i):void 0===t.parent&&(t.parent=i);let l=g(t);i[d][a]=l,m[n].item=i,m[o]=t}else{let t=m[o].item;p?void 0===t[p.parent]&&(t[p.parent]=null):void 0===t.parent&&(t.parent=null);let i=g(t);p?i[p.level]=0:i.level=0,r[r.length]=i}}if(0!==r.length){let t=function(a,n){for(let o=0;o<n.length;o++){p?n[o][p.level]=a:n[o].level=a;let i=n[o][d];i?0<i.length?t(a+1,i):p?n[o][p.leaf]=!0:n[o].leaf=!0:p?n[o][p.leaf]=!0:n[o].leaf=!0}};t(0,r)}return r}summarize(t,a){const i=this;Array.isArray(t)||(t=[t]);let n=[];for(let o=0;o<t.length;o++){const i=t[o];for(let t in i){const a=i[t];n.push({dataField:t,functions:a})}}t=n;let o={},l=[];a||(a=i.boundSource);let r=a.length;if(0!==r&&void 0!==r){for(let n=0,i;n<r;n++){i=a[n];for(let a=0;a<t.length;a++){const r=t[a];let s=i[r.dataField];if(r.functions){o[r.dataField]=o[r.dataField]||{},l[r.dataField]=l[r.dataField]||0,l[r.dataField]++;const t=function(t){for(let a in t){let n=o[r.dataField][a];null===n&&(o[r.dataField][a]=0,n=0),"function"==typeof t[a]&&(n=t[a](n,s,r.dataField,i)),o[r.dataField][a]=n}};let a=parseFloat(s);a=!isNaN(a),a&&(s=parseFloat(s)),"number"==typeof s&&isFinite(s)?r.functions.forEach(function(i){let a=o[r.dataField][i];if(null===a&&(a=0,"min"===this&&(a=9999999999999),"max"===this&&(a=-9999999999999)),"sum"===i||"avg"===i||"stdev"===i||"stdevp"===i||"var"===i||"varp"===i)a+=parseFloat(s);else if("product"===i)0==n?a=parseFloat(s):a*=parseFloat(s);else if("min"===i)a=Math.min(a,parseFloat(s));else if("max"===i)a=Math.max(a,parseFloat(s));else if("count"===i)a++;else if("object"==typeof i)return void t(i);o[r.dataField][i]=a}):r.functions.forEach(function(i){if("min"===i||"max"===i||"count"===i||"product"===i||"sum"===i||"avg"===i||"stdev"===i||"stdevp"===i||"var"===i||"varp"===i){if(null===s)return!0;let t=o[r.dataField][i];return null===t&&(t=0),o[r.dataField][i]=t,!0}"object"==typeof i&&t(i)})}}}for(let i=0;i<t.length;i++){const n=t[i];if(n.functions){if(o[n.dataField]||(o[n.dataField]={},n.functions.forEach(function(t){o[n.dataField][t]=0})),void 0!==o[n.dataField].avg){const t=o[n.dataField].avg,i=l[n.dataField];o[n.dataField].avg=0===i||void 0===i?0:t/i}else void 0!==o[n.dataField].count&&(o[n.dataField].count=r);(o[n.dataField].stdev||o[n.dataField].stdevp||o[n.dataField]["var"]||o[n.dataField].varp)&&n.functions.forEach(function(t){if("stdev"===t||"var"===t||"varp"===t||"stdevp"===t){const i=o[n.dataField][t],l=r,s=i/r;let d=0;for(let t=0;t<r;t++){let i=a[t],o=i[n.dataField];d+=(o-s)*(o-s)}let m="stdevp"===t||"varp"===t?l:l-1;0===m&&(m=1),"var"===t||"varp"===t?o[n.dataField][t]=d/m:("stdevp"===t||"stdev"===t)&&(o[n.dataField][t]=Math.sqrt(d/m))}})}}return o}}_getDataItem(t,i){const a=this,n={},o="number"==typeof a.dataSource;if(!t)return{$:{id:i},isEmpty:!0,index:i};if(o){for(let t=0;t<a.dataFields.length;t++){const i=a.dataFields?a.dataFields[t]:{};n[i.name]=""}return n.$={},n.$.id=i,n.$.index=i,n}const l=t;for(let o=0;o<a.dataFields.length;o++){const i=a.dataFields?a.dataFields[o]:{};let r="";if(void 0===i||null===i)continue;if(i.map){let t=i.map.split(a.mapChar);if(0<t.length){let i=l;for(let a=0;a<t.length;a++)l&&(i=i[t[a]]);r=i}else r=l[i.map]}void 0!==r&&null!==r?r=r.toString():void 0===r&&null!==r&&(r="");let s=!1;""===r&&(s=!0,r=t[i.name],void 0!==r&&null!==r?"array"!==i.dataType&&"date"!==i.dataType&&(r=r.toString()):r=""),"[object Object]"===r&&i.map&&s&&(r=""),a._cachedValues[r+"_"+i.dataType]?r=a._cachedValues[r+"_"+i.dataType]:("bool"===i.dataType||"boolean"===i.dataType?"true"===r||"1"===r?r=!0:("false"===r||"0"===r)&&(r=!1):r=a.$document.deserialize(""+r,i.dataType,!0),a._cachedValues[r+"_"+i.dataType]=r),"string"!==i.dataType&&"boolean"!==i.dataType&&"bool"!==i.dataType&&(isNaN(r)||r===-Infinity||r===1/0)&&(r=0),n[i.name]=r}let r=i;return a.id&&(r=l[a.id],"object"==typeof r&&(r=i)),n.$||(n.$={}),n.$.id=r,n.$.index=i,Object(n)}_bindToArray(){const t=this,a="number"==typeof t.dataSource,n=[];t.boundSource.canNotify=!1;for(let o=0;o<t.length;o++){const i=a?{}:t.dataSource[o],l=t._getDataItem(i,o);n.push(l)}t.boundSource=!1===t.observable?n:new Smart.ObservableArray(n);for(let a=0;a<t.length;a++)t[a]=t.boundSource[a],t.dataItemById[t[a].$.id]=t[a];t.boundSource.canNotify=!0}sortBy(t,i,a){const n=this;if(!i)for(let a=0;a<n.dataFields.length;a++){const o=n.dataFields[a];if(o.name===t){i=o.dataType;break}}n._sort(n.boundSource,t,a,i)}_createFilter(t,a){const i={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let n=[];for(let o=0;o<a.length;o++){const t=a[o],i=t.split(" ");n.push(i)}const o=new Smart.FilterGroup,l=[],r=[];for(let o=0;o<n.length;o++){const a=n[o];if(1<a.length){const n=new Smart.FilterGroup;let o="and",l=0;for(let r=0;r<a.length;r++){const s=a[r];if("and"===s||"or"===s){o=s;continue}if(l++,2===l){const d=n.createFilter(t,s,i[a[r-1]]);l=0,o&&n.addFilter(o,d)}}r.push(n)}else{const t=a[0];if("and"!==t&&"or"!==t)throw new Error("Filter Exprresion expects \"AND\" or \"OR\", but the token is: "+t);l.push(t)}}let s=0;if(1===r.length)return r[0];for(let n=0,i;n<r.length;n++)i=l[s],0==(n+1)%2&&s++,i||(i="and"),o.addFilter(i,r[n]);return o}filterBy(t,...i){const a=this,n=(()=>{for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if(i.name===t)return i.dataType}})(),o=a._createFilter(n,i);let l=a.boundSource.filter(i=>{const a=o.evaluate(i[t]);return a});return l}_filter(t){const a=this,n=[],o=[];if(0===t.length)return void a.clearFilter();const l=t=>{for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if(i.name===t)return i.dataType}};for(let r=0;r<t.length;r++){const i=t[r],s=i[0];let d=null;d=i[1]instanceof Smart.FilterGroup?i[1]:a._createFilter(l(s),i.splice(1)),d&&(o.push(s),d.dataField=s,n.push(d))}for(let o=0;o<a.boundSource.length;o++){const t=a.boundSource[o];let i=!0;for(let a=0;a<n.length;a++){const o=n[a];i=i&&o.evaluate(t[o.dataField])}t.$.filtered=i}a.onFilter&&a.onFilter()}clearFilter(){const t=this;for(let a=0;a<t.boundSource.length;a++){const i=t.boundSource[a];i.$.filtered=!0}t.onFilter&&t.onFilter()}clearSort(){const t=this;t._sort(t.boundSource,[],[],[])}_sort(t,n,a,o,i){const l=this;let r=!1;if(t&&t.constructor&&"ObservableArray"===t.constructor.name&&(r=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!r)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const s=[],d=[];void 0===a&&(a=[]);const m=function(t,i){let a;switch(i||typeof t){case"string":a=new Intl.Collator().compare;break;case"number":a=function(t,i){return t-i};break;case"boolean":a=function(t,i){return t===i?0:!1===t?-1:1};break;case"object":if(t instanceof Date)a=function(t,i){return t.getTime()-i.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof Smart.Utilities.BigNumber)a=function(t,i){return t.compare(i)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;a=function(i,a){return t.compareComplexNumbers(i,a)}}}return a};for(let l=0;l<n.length;l++){s[l]=void 0===a[l]||"asc"===a[l]||"ascending"===a[l]?1:-1;const i=t[0][n[l]];d[l]=m(i,o[l])}if(i)return void i(t,n,a,d);t.sort(function(t,a){for(let o=0;o<n.length;o++){const i=d[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*s[o];return 0}return i*s[o]}if(0===n.length)return t.$.index<a.$.index?-1:t.$.index>a.$.index?1:0});for(let r=0;r<t.length;r++)l[r]=t[r]}static Filter(t,a,n,o){const i=t.filter(t=>{let l=!0;for(let r=0;r<n.length;r++){const i=n[r],s=a[r];l=o?l&&o(t,s,i):l&&i.evaluate(t[s])}return l});return i}filter(t,i,a){Smart.DataAdapter.Filter(that.boundSource,t,i,a)}sort(t,i,a){Smart.DataAdapter.Sort(that.boundSource,t,i,a)}static Sort(t,n,a,i){const o=function(t){let i;switch(typeof t){case"string":i=new Intl.Collator().compare;break;case"number":i=function(t,i){return t-i};break;case"boolean":i=function(t,i){return t===i?0:!1===t?-1:1};break;case"object":if(t instanceof Date)i=function(t,i){return t.getTime()-i.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof BigNumberNG)i=function(t,i){return t.compare(i)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;i=function(i,a){return t.compareComplexNumbers(i,a)}}}return i};if(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)return;"string"==typeof n&&(n=[n]);const l=[],r=[];void 0===a&&(a=[]);for(let s=0;s<n.length;s++)l[s]=void 0===a[s]||"asc"===a[s]||"ascending"===a[s]?1:-1,r[s]=o(t[0][n[s]]);if(i)return void i(t,n,a,r);const s=t.slice(0);return s.sort(function(t,a){for(let o=0;o<n.length;o++){const i=r[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*l[o];return 0}return i*l[o]}}),s}}Smart.DataAdapter=DataAdapter;const localTimezoneOffset=-1*new Date().getTimezoneOffset(),__timeZones=[{id:"Local",offset:localTimezoneOffset,offsetHours:localTimezoneOffset/60,displayName:"",supportsDaylightSavingTime:!1},{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:!1},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:!1},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:!1},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:!1},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:!0},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:!1},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:!1},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:!0},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:!1},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:!0},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:!1},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:!0},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:!0},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:!0},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:!0},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",supportsDaylightSavingTime:!1},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:!0},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:!1},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:!0},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:!0},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:!0},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:!0},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:!0},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:!1},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:!0},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:!0},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:!1},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:!0},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:!1},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:!0},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:!1},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:!0},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:!0},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:!1},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",supportsDaylightSavingTime:!0},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",supportsDaylightSavingTime:!0},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:!0},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",supportsDaylightSavingTime:!0},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:!1},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:!0},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:!0},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:!0},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:!0},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:!0},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:!0},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:!0},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:!0},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:!0},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:!1},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:!1},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:!0},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:!0},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:!0},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:!0},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:!1},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:!0},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:!1},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:!0},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:!0},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:!1},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:!0},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:!1},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:!1},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:!1},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:!1},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:!1},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:!0},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:!0},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:!1},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:!1},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:!0},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:!1},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",supportsDaylightSavingTime:!1},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:!1},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:!0},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:!1},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:!0},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:!1},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:!0},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:!1},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:!1},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:!0},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:!1},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:!0},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:!1},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:!0},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:!0},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:!0},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:!1},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:!0},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:!0},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:!0},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:!0},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:!1},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:!1},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:!0}],__daysToMonth365=[0,31,59,90,120,151,181,212,243,273,304,334,365],__daysToMonth366=[0,31,60,91,121,152,182,213,244,274,305,335,366],__daysPer4Years=1461,__daysPer100Years=36524,__daysPer400Years=146097,__daysTo1601=584388,__daysTo1899=693593,__daysTo10000=3652059,__minTicks=0,__maxTicks=3155378976000000000,__maxMillis=315537897600000;Smart.Utilities.Assign("TimeSpan",class{constructor(){const t=this;if(t.ticksPerMillisecond=1e4,t.millisecondsPerTick=1/1e4,t.ticksPerSecond=10000000,t.secondsPerTick=1/10000000,t.ticksPerMinute=600000000,t.minutesPerTick=1/600000000,t.ticksPerHour=36000000000,t.hoursPerTick=1/36000000000,t.ticksPerDay=864000000000,t.daysPerTick=1/864000000000,t.millisPerSecond=1e3,t.millisPerMinute=60000,t.millisPerHour=3600000,t.millisPerDay=86400000,t._ticks=0,1===arguments.length){if(isNaN(arguments[0]))throw new Error("Argument must be a number.");t._ticks=arguments[0]}else if(3===arguments.length)t._ticks=t.timeToMS(arguments[0],arguments[1],arguments[2],0);else if(4===arguments.length){const i=arguments[0],a=arguments[1],n=arguments[2],o=arguments[3];t._ticks=(1e3*(24*(3600*i)+3600*a+60*n+o)+0)*t.ticksPerMillisecond}else if(5===arguments.length){const i=arguments[0],a=arguments[1],n=arguments[2],o=arguments[3],l=arguments[4];t._ticks=(1e3*(24*(3600*i)+3600*a+60*n+o)+l)*t.ticksPerMillisecond}}ticks(){return this._ticks}days(){const t=this;return parseInt(t._ticks/t.ticksPerDay)}timeToMS(t,i,a,n){return parseInt((3600*t+60*i+a+n/1e3)*this.ticksPerSecond)}hours(){const t=this;return parseInt(t._ticks/t.ticksPerHour)%24}milliseconds(){const t=this;return parseInt(t._ticks/t.ticksPerMillisecond)%1e3}minutes(){const t=this;return parseInt(t._ticks/t.ticksPerMinute)%60}seconds(){const t=this;return parseInt(t._ticks/t.ticksPerSecond)%60}totalDays(){const t=this;return parseInt(t._ticks*t.daysPerTick)}totalHours(){const t=this;return parseInt(t._ticks*t.hoursPerTick)}totalMilliseconds(){const t=this,i=t._ticks*t.millisecondsPerTick;return parseInt(i)}totalMinutes(){const t=this;return parseInt(t._ticks*t.minutesPerTick)}totalSeconds(){const t=this;return parseInt(t._ticks*t.secondsPerTick)}add(t){const i=this._ticks+t._ticks,a=new Smart.Utilities.TimeSpan(i);return a}subtract(t){const i=this._ticks-t._ticks;return new Smart.Utilities.TimeSpan(i)}duration(){const t=this;return 0<=t._ticks?new Smart.Utilities.TimeSpan(t._ticks):new Smart.Utilities.TimeSpan(-t._ticks)}equals(t){return this._ticks===t._ticks}valueOf(){return this._ticks}compare(t,i){return t._ticks>i._ticks?1:t._ticks<i._ticks?-1:0}interval(t,i){const a=t*i+(0<=t?.5:-.5);return new Smart.Utilities.TimeSpan(a*this.ticksPerMillisecond)}fromDays(t){const i=this;return i.interval(t,i.millisPerDay)}fromHours(t){const i=this;return i.interval(t,i.millisPerHour)}fromMilliseconds(t){return this.interval(t,1)}fromMinutes(t){const i=this;return i.interval(t,i.millisPerMinute)}fromSeconds(t){const i=this;return i.interval(t,i.millisPerSecond)}fromTicks(t){return new Smart.Utilities.TimeSpan(t)}toString(){return this.totalMilliseconds().toString()}negate(){return new Smart.Utilities.TimeSpan(-this._ticks)}}),Smart.Utilities.Assign("DateTime",class{constructor(){function t(t){const n=i.regexISOString.exec(t);a=new Smart.Utilities.DateTime(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4]),parseFloat(n[5]),parseFloat(n[6]),parseFloat(n[7]),0,0,0,0,0,0,0,"UTC")}const i=this;let a;if(i.ticksPerMillisecond=1e4,i.millisecondsPerTick=1/1e4,i.ticksPerSecond=10000000,i.secondsPerTick=1/10000000,i.ticksPerMinute=600000000,i.minutesPerTick=1/600000000,i.ticksPerHour=36000000000,i.hoursPerTick=1/36000000000,i.ticksPerDay=864000000000,i.daysPerTick=1/864000000000,i.millisPerSecond=1e3,i.millisPerMinute=60000,i.millisPerHour=3600000,i.millisPerDay=86400000,i.daysPerYear=365,i.daysPer4Years=__daysPer4Years,i.daysPer100Years=__daysPer100Years,i.daysPer400Years=__daysPer400Years,i.daysTo1601=__daysTo1601,i.daysTo1899=__daysTo1899,i.daysTo10000=__daysTo10000,i.minTicks=0,i.maxTicks=__maxTicks,i.maxMillis=__maxMillis,i.datePartYear=0,i.datePartDayOfYear=1,i.datePartMonth=2,i.datePartDay=3,i.daysToMonth365=__daysToMonth365,i.daysToMonth366=__daysToMonth366,i.minValue=new Date(0),i.maxValue=new Date(3155378976000000000),i.ticksMask=0x3FFFFFFFFFFFFFFF,i.flagsMask=0xC000000000000000,i.localMask=0x8000000000000000,i.ticksCeiling=0x4000000000000000,i.kindUnspecified=0,i.kindUtc=0x4000000000000000,i.kindLocal=0x8000000000000000,i.kindLocalAmbiguousDst=0xC000000000000000,i.kindShift=62,i.regexTrim=/^\s+|\s+$/g,i.regexInfinity=/^[+-]?infinity$/i,i.regexHex=/^0x[a-f0-9]+$/i,i.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,i.regexISOString=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/,i.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",FP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",FPA:"yyyy/MM/dd HH:mm:ss:fffuunnppeeaaxxoo",FPA2:"yyyy-MM-dd HH:mm:ss:fffuunnppeeaaxxoo",FT:"HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",PP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp",PT:"HH:mm:ss:fff:uu:nn:pp"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},i.dateData=0,i.timeZone=null,i.timeZones=__timeZones,i._codeToUnit={u:"_microsecond",uu:"_microsecond",n:"_nanosecond",nn:"_nanosecond",p:"_picosecond",pp:"_picosecond",e:"_femtosecond",ee:"_femtosecond",a:"_attosecond",aa:"_attosecond",x:"_zeptosecond",xx:"_zeptosecond",o:"_yoctosecond",oo:"_yoctosecond"},i._smallUnits=["_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"],i._microsecond=0,i._nanosecond=0,i._picosecond=0,i._femtosecond=0,i._attosecond=0,i._zeptosecond=0,i._yoctosecond=0,0===arguments.length){const t=new Date;i.dateData=i.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+i.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else if(1===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const a="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!a&&"string"==typeof arguments[0]){let a;"today"===arguments[0]?a=new Date:"todayDate"===arguments[0]?(a=new Date,a.setHours(0,0,0,0)):i.regexISOString.test(arguments[0])?t(arguments[0]):a=i.tryparseDate(arguments[0]),a&&(i.dateData=i.dateToMS(a.getFullYear(),a.getMonth()+1,a.getDate())+i.timeToMS(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))}else if("number"==typeof arguments[0])i.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];i.dateData=i.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+i.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else i.dateData=arguments[0]}else if(2===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const a="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!a&&"string"==typeof arguments[0]){let a;"today"===arguments[0]?a=new Date:"todayDate"===arguments[0]?(a=new Date,a.setHours(0,0,0,0)):i.regexISOString.test(arguments[0])?t(arguments[0]):a=i.tryparseDate(arguments[0]),a&&(i.dateData=i.dateToMS(a.getFullYear(),a.getMonth()+1,a.getDate())+i.timeToMS(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))}else if("number"==typeof arguments[0])i.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];i.dateData=i.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+i.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else i.dateData=arguments[0];i.validateTimeZone(arguments[1])}else if(2<arguments.length)if("string"==typeof arguments[0]){const t=i.tryparseDate(arguments[0],arguments[2],arguments[1]);i.dateData=i.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+i.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else{const t=arguments[0],a=arguments[1]-1,n=arguments[2],o=arguments[3]||0,l=arguments[4]||0,r=arguments[5]||0,s=arguments[6]||0,d=arguments[7]||0,m=arguments[8]||0,c=arguments[9]||0,u=arguments[10]||0,p=arguments[11]||0,g=arguments[12]||0,h=arguments[13]||0,_=new Date(t,a,n,o,l,r,s);1970>t&&_.setFullYear(t),i.dateData=i.dateToMS(_.getFullYear(),_.getMonth()+1,_.getDate())+i.timeToMS(_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()),i._microsecond=d,i._nanosecond=m,i._picosecond=c,i._femtosecond=u,i._attosecond=p,i._zeptosecond=g,i._yoctosecond=h,arguments[14]&&i.validateTimeZone(arguments[14])}if(i.timeZone||i.validateTimeZone("Local"),a){const t=a.toTimeZone(i.timeZone);i.dateData=t.dateData}}static validateDate(t,i,a){if(t instanceof Smart.Utilities.DateTime)return t;if(t instanceof Date)return new Smart.Utilities.DateTime(t);try{if(new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}(, \d{1,2}:\d{2}:\d{1,2} [A|P]M)?$/).test(t)){const i=new Date(t);if(!isNaN(i.getTime()))return new Smart.Utilities.DateTime(i)}if("string"==typeof t)return this.parseDateString(t,i,a);if("number"==typeof t)return new Smart.Utilities.DateTime(new Date(t))}catch(t){}return i}static parseDateString(t,i,a){const n=t.indexOf("Date("),o=t.indexOf("DateTime("),l=t.lastIndexOf(")");let r=t;if((-1!==n||-1!==o)&&-1!==l){if(r=-1===n?t.slice(o+9,l):t.slice(n+5,l),r=r.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===r.trim())return new Smart.Utilities.DateTime;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+(\s*,\s*[a-zA-Z ]+)?$)/g).test(r))return r=r.split(","),r.map(function(t,i){r[i]=isNaN(r[i])?t.trim():parseInt(t)}),-1!==n&&r[1]++,r.unshift(null),r=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,r)),r}else{const i=new Smart.Utilities.DateTime,n=i.parseDate(t,a);if(n)return r=new Smart.Utilities.DateTime(n),i.copySmallTimePartValues(r),r}if(""===r.trim())return i;if(!isNaN(r))return r=new Date(parseInt(r,10)),new Smart.Utilities.DateTime(r);try{const t=r.split(",");2===t.length?(t[1]=t[1].trim(),t.unshift(null),r=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,t))):r=new Smart.Utilities.DateTime(r)}catch(t){r=i}return r}static fromFullTimeStamp(t){t=t.toString();const i=new Smart.Utilities.DateTime(parseFloat(t.slice(0,t.length-21)));for(let a=t.slice(t.length-21),n=0;0<a.length;)i[i._smallUnits[n]]=parseInt(a.slice(0,3),10),a=a.slice(3),n++;return i}static getConstructorParameters(t){return[t.year(),t.month(),t.day(),t.hour(),t.minute(),t.second(),t.millisecond(),t._microsecond,t._nanosecond,t._picosecond,t._femtosecond,t._attosecond,t._zeptosecond,t._yoctosecond,t.timeZone]}static detectDisplayMode(t,i,a){if(t.calendar.patterns[i])return-1===["d","D","M","Y","d1","d2"].indexOf(i)?-1===["t","T","FT","PT"].indexOf(i)?"default":"timePicker":"calendar";const n=["d","M","y"],o=["h","H","m","s","t","f","u","n","p","e","a","x","o"],l=a.groups;let r=!1,s=!1;for(let d=0;d<l.length;d++){const t=l[d].charAt(0);if(-1===n.indexOf(t)?-1!==o.indexOf(t)&&(s=!0):r=!0,r&&s)break}return r==s?"default":r?"calendar":"timePicker"}static getLocalizedNames(t){const a={names:[],namesAbbr:[],namesShort:[]},n={names:[],namesAbbr:[]};if(this[t])return this[t];for(let n=23;30>n;n++){const i=new Date(2017,6,n),o=i.toLocaleString(t,{weekday:"long"});a.names.push(o),a.namesAbbr.push(i.toLocaleString(t,{weekday:"short"})),a.namesShort.push(o.substring(0,2))}for(let a=0;12>a;a++){const i=new Date(2017,a,1),o=i.toLocaleString(t,{month:"long"});n.names.push(o),n.namesAbbr.push(o.substring(0,3))}return n.names.push(""),n.namesAbbr.push(""),this[t]={days:a,months:n},this[t]}internalMS(){return this.dateData}getDatePart(t){const i=this,a=i.internalMS();let o=parseInt(a/i.millisPerDay);const l=parseInt(o/i.daysPer400Years);o-=l*i.daysPer400Years;let r=parseInt(o/i.daysPer100Years);4===r&&(r=3),o-=r*i.daysPer100Years;const s=parseInt(o/i.daysPer4Years);o-=s*i.daysPer4Years;let d=parseInt(o/i.daysPerYear);if(4===d&&(d=3),t===i.datePartYear)return parseInt(400*l+100*r+4*s+d+1);if(o-=d*i.daysPerYear,t===i.datePartDayOfYear)return parseInt(o+1);const c=3===d&&(24!==s||3===r),u=c?i.daysToMonth366:i.daysToMonth365;let p=o>>6;for(;o>=u[p];)p++;return t===i.datePartMonth?parseInt(p):parseInt(o-u[p-1]+1)}dayOfWeek(){const t=this,i=t.dateData,a=parseInt(i/t.millisPerDay+1)%7;return a}dayOfYear(){const t=this;return t.getDatePart(t.datePartDayOfYear)}weekOfYear(t){var i=Math.floor;const a=this,n=a.toDate(),o=t||a.calendar.firstDay,l=new Date(n.getFullYear(),0,1),r=i((n.getTime()-l.getTime()-6e4*(n.getTimezoneOffset()-l.getTimezoneOffset()))/864e5)+1;let s=l.getDay()-o;s=0<=s?s:s+7;let d;if(!(4>s))d=i((r+s-1)/7);else if(d=i((r+s-1)/7)+1,52<d){const t=new Date(n.getFullYear()+1,0,1);let i=t.getDay()-o;i=0<=i?i:i+7,d=4>i?1:53}return d}subtract(t){const i=this;return new Smart.Utilities.TimeSpan(i.dateData*i.ticksPerMillisecond-t.dateData*i.ticksPerMillisecond)}dateToMS(t,i,a){const o=this;if(1<=t&&9999>=t&&1<=i&&12>=i){t=parseInt(t);const l=o.isLeapYear(t)?o.daysToMonth366:o.daysToMonth365;if(1<=a&&a<=l[i]-l[i-1]){const r=t-1,s=365*r+parseInt(r/4)-parseInt(r/100)+parseInt(r/400)+l[i-1]+a-1;return s*o.millisPerDay}}}isLeapYear(t){if(1>t||9999<t)throw new Error("Year out of Range");return 0==t%4&&(0!=t%100||0==t%400)}timeToMS(t,i,a,n){const o=this;if(0<=t&&24>t&&0<=i&&60>i&&0<=a&&60>a){const l=parseInt(3600*t+60*i+a);return 0<n&&1e3>n?l*o.millisPerSecond+n:l*o.millisPerSecond}}daysInMonth(t,i){if(1>i||12<i)throw new Error("Month out of Range");const a=this,n=a.isLeapYear(t)?a.daysToMonth366:a.daysToMonth365;return n[i]-n[i-1]}arrayIndexOf(t,i){return t.indexOf(i)}startsWith(t,i){return 0===t.indexOf(i)}endsWith(t,i){return t.substr(t.length-i.length)===i}trim(t){return(t+"").replace(this.regexTrim,"")}expandFormat(t,i){i=i||"F";let a=t.patterns,n=i.length,o;if(a[i])return a[i];if(1===n){if(o=a[i],!o)throw"Invalid date format string '"+i+"'.";i=o}else 2===n&&"%"===i.charAt(0)&&(i=i.charAt(1));return i}getEra(t,a){if(!a)return 0;if("string"==typeof t)return 0;let n=t.getTime(),o;for(let r=0,i=a.length;r<i;r++)if(o=a[r].start,null===o||n>=o)return r;return 0}toUpper(t){return t.split("\xA0").join(" ").toUpperCase()}toUpperArray(t){const a=[];for(let n=0,i=t.length;n<i;n++)a[n]=this.toUpper(t[n]);return a}getEraYear(t,i,a,n){let o=t.getFullYear();return!n&&i.eras&&(o-=i.eras[a].offset),o}getDayIndex(t,i,a){const n=this,o=t.days;let l=t._upperDays,r;return l||(t._upperDays=l=[n.toUpperArray(o.names),n.toUpperArray(o.namesAbbr),n.toUpperArray(o.namesShort)]),i=i.toUpperCase(),a?(r=n.arrayIndexOf(l[1],i),-1===r&&(r=n.arrayIndexOf(l[2],i))):r=n.arrayIndexOf(l[0],i),r}getMonthIndex(t,a,n){const o=this;let l=t.months,r=t.monthsGenitive||t.months,s=t._upperMonths,d=t._upperMonthsGen;s||(t._upperMonths=s=[o.toUpperArray(l.names),o.toUpperArray(l.namesAbbr)],t._upperMonthsGen=d=[o.toUpperArray(r.names),o.toUpperArray(r.namesAbbr)]),a=o.toUpper(a);let m=o.arrayIndexOf(n?s[1]:s[0],a);return 0>m&&(m=o.arrayIndexOf(n?d[1]:d[0],a)),m}appendPreOrPostMatch(t,i){let a=0,n=!1;for(let o=0,l=t.length;o<l;o++){const l=t.charAt(o);switch(l){case"'":n?i.push("'"):a++,n=!1;break;case"\\":n&&i.push("\\"),n=!n;break;default:i.push(l),n=!1;}}return a}getTokenRegExp(){return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyyy|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|uu|u|nn|n|pp|p|ee|e|aa|a|xx|x|oo|o|i{1,24}|zzz|zz|z|gg|g/g}tryparseDate(t,a,n){const o=this;if((void 0===a||null===a)&&(a=o.calendar),void 0!==n){if(Array.isArray(n))for(let l=0;l<n.length;l++){const i=o.parseDate(t,n[l],a);if(i)return i}const i=o.parseDate(t,n,a);if(i)return i}if(""===t)return null;if(null===t||void 0===t||t.substring||(t=t.toString()),null!==t&&void 0!==t&&"/Date("===t.substring(0,6)){const i=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;let a=new Date(+t.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"===a){const i=t.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);a=null,i&&(a=new Date(1*i[1]+36e5*i[2]+6e4*i[3]))}if(null===a||void 0===a||"Invalid Date"===a||isNaN(a)){const a=i.exec(t);if(a){const t=new Date(parseInt(a[1]));if(a[2]){let i=parseInt(a[3]);"-"===a[2]&&(i=-i);const n=t.getUTCMinutes();t.setUTCMinutes(n-i)}if(!isNaN(t.valueOf()))return t}}return a}const i={smartdate:"yyyy-MM-dd HH:mm:ss",d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",d4:"MM.dd.yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",iso:"yyyy-MM-ddTHH:mm:ssZ",iso_date1:"yyyy-MM-dd",iso_date2:"yyyy-MM-dd",iso_date3:"yyyy-ddd",iso_date4:"yyyy-MM-dd HH:mm",iso_date5:"yyyy-MM-dd HH:mm Z",iso_date6:"yyyy-MMM-dd",iso_date7:"yyyy-MM",iso_date8:"yyyy-MMM",iso_date9:"yyyy-MMMM",iso_date10:"yyyy-MMMM-dd",iso_time1:"HH:mm:ss.tttt",iso_time2:"HH:mm:ss",iso_time3:"HH:mm",iso_time4:"HH",iso_time5:"yyyyyy-MM-dd",iso_time6:"yyyyyy-MM-dd"};for(let l in i){const n=o.parseDate(t,i[l],a);if(n)return n}const l=a.patterns;for(let i in l){const n=o.parseDate(t,l[i],a);if(n){if("ISO"==i){const i=o.parseDate(t,l.ISO2,a);if(i)return i}return n}}let r;if("string"==typeof t){t=o.trim(t);const n=[":","/","-"," ",","];t=function(t,i,a){return a.replace(new RegExp(t,"g"),i)}(", ",",",t);let i="",l=t;0<=t.indexOf(":")?(i=t.substring(t.indexOf(":")-2),i=o.trim(i),l=t.substring(0,t.indexOf(":")-2)):0<=t.toUpperCase().indexOf("AM")?(i=t.substring(t.toUpperCase().indexOf("AM")-2),i=o.trim(i),l=t.substring(0,t.toUpperCase().indexOf("AM")-2)):0<=t.toUpperCase().indexOf("PM")&&(i=t.substring(t.toUpperCase().indexOf("PM")-2),i=o.trim(i),l=t.substring(0,t.toUpperCase().indexOf("PM")-2));let s=new Date,d=!1;if(l){for(let t=0;t<n.length;t++)if(0<=l.indexOf(n[t])){r=l.split(n[t]);break}let t=[],c=[],u=[],m=null,p=null;for(let n=0;n<r.length;n++){const i=r[n],l=o.parseDate(i,"d",a)||o.parseDate(i,"dd",a)||o.parseDate(i,"ddd",a)||o.parseDate(i,"dddd",a);if(l&&(t.push(l.getDate()),2<i.length)){m=n;break}}for(let t=0;t<r.length;t++){const i=r[t],n=o.parseDate(i,"M",a)||o.parseDate(i,"MM",a)||o.parseDate(i,"MMM",a)||o.parseDate(i,"MMMM",a);if(n){if(null!==m&&void 0!==m&&m===t)continue;if(c.push(n.getMonth()),2<i.length){p=t;break}}}for(let t=0;t<r.length;t++){const i=r[t],n=o.parseDate(i,"yyyy",a);if(n){if(null!==m&&void 0!==m&&m===t)continue;if(null!==p&&void 0!==p&&p===t)continue;u.push(n.getFullYear())}}const i=[];for(let a=0;a<t.length;a++)for(let n=0;n<c.length;n++)for(let o=0;o<u.length;o++){const l=new Date(u[o],c[n],t[a]);1970>u[o]&&l.setFullYear(u[o]),isNaN(l.getTime())||i.push(l)}0<i.length&&(s=i[0],d=!0)}if(i){const t=0<=i.indexOf(":")?i.split(":"):i,n=o.parseDate(i,"h:mm tt",a)||o.parseDate(i,"HH:mm:ss.fff",a)||o.parseDate(i,"HH:mm:ss.ff",a)||o.parseDate(i,"h:mm:ss tt",a)||o.parseDate(i,"HH:mm:ss.tttt",a)||o.parseDate(i,"HH:mm:ss",a)||o.parseDate(i,"HH:mm",a)||o.parseDate(i,"HH",a);let l=0,r=0,m=0,c=0;n&&!isNaN(n.getTime())?(l=n.getHours(),r=n.getMinutes(),m=n.getSeconds(),c=n.getMilliseconds()):(1===t.length&&(l=parseInt(t[0])),2===t.length&&(l=parseInt(t[0]),r=parseInt(t[1])),3===t.length&&(l=parseInt(t[0]),r=parseInt(t[1]),0<=t[2].indexOf(".")?(m=parseInt(t[2].toString().split(".")[0]),c=parseInt(t[2].toString().split(".")[1])):m=parseInt(t[2])),4===t.length&&(l=parseInt(t[0]),r=parseInt(t[1]),m=parseInt(t[2]),c=parseInt(t[3]))),!s||isNaN(l)||isNaN(r)||isNaN(m)||isNaN(c)||(s.setHours(l,r,m,c),d=!0)}if(d)return s}if(null!==t&&void 0!==t){r=[":","/","-"];let i=!0;for(let a=0;a<r.length;a++)-1!==t.indexOf(r[a])&&(i=!1);if(i){const i=new Number(t);if(!isNaN(i))return new Date(i)}}return null}getParseRegExp(t,i){const a=this;let n=t._parseRegExp;if(!n)t._parseRegExp=n={};else{const t=n[i];if(t)return t}let o=a.expandFormat(t,i).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),l=["^"],r=[],s=0,d=0,c=a.getTokenRegExp(),u;for(;null!==(u=c.exec(o));){const t=o.slice(s,u.index);if(s=c.lastIndex,d+=a.appendPreOrPostMatch(t,l),d%2){l.push(u[0]);continue}let i=u[0],n=i.length,m;switch(i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case"yyyyy":m="(\\d{1,4})";break;case"yyyy":m="(\\d{"+n+"})";break;case"fff":case"ff":case"f":m="(\\d{1,"+n+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":m="(\\d{1,3})";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="/";break;default:if(/i{1,24}/.test(i))m="(\\d{"+i.length+"})";else throw"Invalid date format pattern '"+i+"'.";}(m&&l.push(m),"/"!==i)&&r.push(u[0])}a.appendPreOrPostMatch(o.slice(s),l),l.push("$");const m=l.join("").replace(/\s+/g,"\\s+");return n[i]={regExp:m,groups:r}}outOfRange(t,i,a){return t<i||t>a}expandYear(t,i){const a=this,n=new Date,o=a.getEra(n);if(100>i){let l=t.twoDigitYearMax;l="string"==typeof l?new Date().getFullYear()%100+parseInt(l,10):l;const r=a.getEraYear(n,t,o);i+=r-r%100,i>l&&(i-=100)}return i}padZeros(t,i){let a=t+"",n;return 1<i&&a.length<i?(n=["0","00","000"][i-2]+a,n.substr(n.length-i,i)):(n=a,n)}parseDate(t,i,a){const n=this;(void 0===a||null===a)&&(a=n.calendar),t=n.trim(t);const o=a,l=n.getParseRegExp(o,i),r=new RegExp(l.regExp).exec(t);if(null===r)return null;let s=l.groups,d=null,m=null,c=null,u=null,p=null,g=0,h=0,_=0,f=0,b=null,y=!1,v;for(let l=0,w=s.length;l<w;l++){const t=r[l+1];if(t){const i=s[l],a=i.length,r=parseInt(t,10);switch(i){case"dd":case"d":if(u=r,n.outOfRange(u,1,31))return null;break;case"MMM":case"MMMM":case"MMMMM":case"MMMMMM":case"MMMMMMM":case"MMMMMMMM":if(c=n.getMonthIndex(o,t,3===a),n.outOfRange(c,0,11))return null;break;case"M":case"MM":if(c=r-1,n.outOfRange(c,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=4>a?n.expandYear(o,r):r,n.outOfRange(m,0,9999))return null;break;case"h":case"hh":if(g=r,12===g&&(g=0),n.outOfRange(g,0,11))return null;break;case"H":case"HH":if(g=r,n.outOfRange(g,0,23))return null;break;case"m":case"mm":if(h=r,n.outOfRange(h,0,59))return null;break;case"s":case"ss":if(_=r,n.outOfRange(_,0,59))return null;break;case"tt":case"t":if(y=o.PM&&(t===o.PM[0]||t===o.PM[1]||t===o.PM[2]),!y&&(!o.AM||t!==o.AM[0]&&t!==o.AM[1]&&t!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(f=r*Math.pow(10,3-a),n.outOfRange(f,0,999))return null;break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":if(n.outOfRange(r,0,1e3))return null;n[n._codeToUnit[i]]=r;break;case"ddd":case"dddd":if(p=n.getDayIndex(o,t,3===a),n.outOfRange(p,0,6))return null;break;case"zzz":{const i=t.split(/:/);if(2!==i.length)return null;if(v=parseInt(i[0],10),n.outOfRange(v,-12,13))return null;const a=parseInt(i[1],10);if(n.outOfRange(a,0,59))return null;b=60*v+(n.startsWith(t,"-")?-a:a);break}case"z":case"zz":if(v=r,n.outOfRange(v,-12,13))return null;b=60*v;break;case"g":case"gg":{let a=t;if(!a||!o.eras)return null;a=this.trim(a.toLowerCase());for(let t=0,i=o.eras.length;t<i;t++)if(a===o.eras[t].nathat.toLowerCase()){d=t;break}if(null===d)return null;break}default:{let i=t;1==i.length%3?i+="00":2==i.length%3&&(i+="0"),f=parseInt(i.slice(0,3),10),i=i.slice(3);for(let t=0;0<i.length;)n[n._smallUnits[t]]=parseInt(i.slice(0,3),10),i=i.slice(3),t++}}}}let w=new Date,C=o.convert,x;if(x=w.getFullYear(),null===m?m=x:o.eras&&(m+=o.eras[d||0].offset),null===c&&(c=0),null===u&&(u=1),!C){if(w.setFullYear(m,c,u),w.getDate()!==u)return null;if(null!==p&&w.getDay()!==p)return null}else if(w=C.toGregorian(m,c,u),null===w)return null;if(y&&12>g&&(g+=12),w.setHours(g,h,_,f),null!==b){const t=w.getMinutes()-(b+w.getTimezoneOffset());w.setHours(w.getHours()+parseInt(t/60,10),t%60)}return w}toString(t,i){function a(t,i){if(h)return h[i];if(void 0!==t.getMonth)switch(i){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();}}var n=Math.floor,o=Math.abs;const l=this;void 0===t&&(t="yyyy-MM-dd HH:mm:ss");const r=l.dateData.toString()+l.getFractionsOfSecondStamp()+t+(l.timeZone||"");if(Smart.Utilities.DateTime.cache&&Smart.Utilities.DateTime.cache[r])return Smart.Utilities.DateTime.cache[r];const s=l.toDate();if((void 0===i||null===i)&&(i=l.calendar),"string"==typeof s)return s;if(!t||!t.length||"i"===t){let t;return t=l.formatDate(s,i.patterns.F,i),t}const d=i.eras,m="s"===t;t=l.expandFormat(i,t);const c=[];let u=0,p=l.getTokenRegExp(),g,h;for(;;){const r=p.lastIndex,h=p.exec(t),_=t.slice(r,h?h.index:t.length);if(u+=l.appendPreOrPostMatch(_,c),!h)break;if(u%2){c.push(h[0]);continue}const f=h[0],b=f.length;let y;if(/i{1,24}/.test(f)){c.push(l.getFirstNDigitsOfPrecision(f.length));continue}switch(f){case"ddd":case"dddd":{const t=3===b?i.days.namesAbbr:i.days.names;c.push(t[s.getDay()]);break}case"d":case"dd":c.push(l.padZeros(a(s,2),b));break;case"MMM":case"MMMM":y=a(s,1),c.push(i.months[3===b?"namesAbbr":"names"][y]);break;case"M":case"MM":c.push(l.padZeros(a(s,1)+1,b));break;case"y":case"yy":case"yyyy":y=l.getEraYear(s,i,l.getEra(s,d),m),4>b&&(y%=100),c.push(l.padZeros(y,b));break;case"h":case"hh":g=s.getHours()%12,0===g&&(g=12),c.push(l.padZeros(g,b));break;case"H":case"HH":c.push(l.padZeros(s.getHours(),b));break;case"m":case"mm":c.push(l.padZeros(s.getMinutes(),b));break;case"s":case"ss":c.push(l.padZeros(s.getSeconds(),b));break;case"t":case"tt":y=12>s.getHours()?i.AM?i.AM[0]:" ":i.PM?i.PM[0]:" ",c.push(1===b?y.charAt(0):y);break;case"f":case"ff":case"fff":c.push(l.padZeros(s.getMilliseconds(),3).substr(0,b));break;case"u":case"n":case"p":case"e":case"a":case"x":case"o":c.push(l[l._codeToUnit[f]]);break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":c.push(l.padZeros(l[l._codeToUnit[f]],3));break;case"z":case"zz":c.push((0<=l.timeZoneOffsetHours?"+":"-")+l.padZeros(n(o(l.timeZoneOffsetHours)),b));break;case"zzz":c.push((0<=l.timeZoneOffsetHours?"+":"-")+l.padZeros(n(o(l.timeZoneOffsetHours)),2)+":"+l.padZeros(60*o(l.timeZoneOffsetHours%1),2));break;case"g":case"gg":i.eras&&c.push(i.eras[l.getEra(s,d)].name);break;case"/":c.push(i["/"]);break;default:throw"Invalid date format pattern '"+f+"'.";}}const _=c.join("");return Smart.Utilities.DateTime.cache||(Smart.Utilities.DateTime.cache=[]),Smart.Utilities.DateTime.cache[r]=_,_}getFractionsOfSecondStamp(){const t=this;return t._microsecond.toString()+t._nanosecond+t._picosecond+t._femtosecond+t._attosecond+t._zeptosecond+t._yoctosecond}getFirstNDigitsOfPrecision(t,i){const a=this,n=""+(!0===i?"":a.padZeros(a.millisecond(),3))+a.padZeros(a._microsecond,3)+a.padZeros(a._nanosecond,3)+a.padZeros(a._picosecond,3)+a.padZeros(a._femtosecond,3)+a.padZeros(a._attosecond,3)+a.padZeros(a._zeptosecond,3)+a.padZeros(a._yoctosecond,3);return n.slice(0,t)}copySmallTimePartValues(t){const i=this;t._microsecond=i._microsecond,t._nanosecond=i._nanosecond,t._picosecond=i._picosecond,t._femtosecond=i._femtosecond,t._attosecond=i._attosecond,t._zeptosecond=i._zeptosecond,t._yoctosecond=i._yoctosecond}add(t,i,a){const n=this,o=n.internalMS();if(void 0===i){if(!1===a)return n.dateData=o+parseInt(t._ticks/n.ticksPerMillisecond),n;const i=new Smart.Utilities.DateTime(o+parseInt(t._ticks/n.ticksPerMillisecond));return n.copyTimeZone(i),n.copySmallTimePartValues(i),i}const l=t*i;if(l<=-n.maxMillis||l>=n.maxMillis)throw new Error("Out of Range");if(!1===a)return n.dateData=o+l,n;const r=new Smart.Utilities.DateTime(o+l);return n.copyTimeZone(r),n.copySmallTimePartValues(r),r}addDays(t,i){const a=this;return a.add(t,a.millisPerDay,i)}clone(){const t=this,i=new Smart.Utilities.DateTime(t.dateData);return t.copyTimeZone(i),t.copySmallTimePartValues(i),i}clearTime(){const t=this,i=t.month(),a=t.year(),n=t.day(),o=new Smart.Utilities.DateTime(a,i,n,0,0,0,0);return t.copyTimeZone(o),o}addHours(t,i){const a=this;return a.add(t,a.millisPerHour,i)}addDeciseconds(t,i){return this.add(100*t,1,i)}addCentiseconds(t,i){return this.add(10*t,1,i)}addMilliseconds(t,i){return this.add(t,1,i)}addMinutes(t,i){const a=this;return a.add(t,a.millisPerMinute,i)}addMonths(t,i){const a=this;if(-12e4>t||12e4<t)throw new Error("Invalid Months Value");let n=parseInt(a.getDatePart(a.datePartYear)),o=parseInt(a.getDatePart(a.datePartMonth)),l=parseInt(a.getDatePart(a.datePartDay));if(0==t%12)n+=t/12;else{const a=o-1+t;0<=a?(o=a%12+1,n+=a/12):(o=12+(a+1)%12,n+=(a-11)/12),n=parseInt(n)}if(1>n||9999<n)throw new Error("Year out of range");const r=a.daysInMonth(n,o);if(l>r&&(l=r),!1===i)return a.dateData=a.dateToMS(n,o,l)+a.internalMS()%a.millisPerDay,a;const s=new Smart.Utilities.DateTime(a.dateToMS(n,o,l)+a.internalMS()%a.millisPerDay);return a.copyTimeZone(s),a.copySmallTimePartValues(s),s}addSeconds(t,i){const a=this;return a.add(t,a.millisPerSecond,i)}addYears(t,i){return this.addMonths(12*t,i)}addMicroseconds(t,i){if(0===t)return;const a=this;let n,o;0>t&&0===a.hour()&&0===a.minute()&&0===a.second()&&0===a.millisecond()&&0===a._microsecond&&(n=parseInt(t/1e3,10)-1,o=1e3+t%1e3);const l=1e3*a.timeToMS(a.hour(),a.minute(),a.second(),a.millisecond())+a._microsecond,r=l+t;void 0==n&&(n=parseInt(r/1e3,10)-parseInt(l/1e3,10)),void 0===o&&(o=parseInt(r%1e3,10));let s;return 0!==n&&(s=a.addMilliseconds(n,i)),!1===i?void(a._microsecond=o):(s||(s=a.clone()),s._microsecond=o,s)}addFractionsOfSecond(t,i,a,n,o){if(0===t)return;const l=this,r=1e3*l[n]+l[a],s=t+r;let d=parseInt(s/1e3,10)-parseInt(r/1e3,10),m=parseInt(s%1e3,10),c;return 0>t&&0>s&&0>m&&(d--,m=1e3+m),0!=d&&(c=l[o](d,i)),!1===i?void(l[a]=m):(c||(c=l.clone()),c[a]=m,c)}addNanoseconds(t,i){return this.addFractionsOfSecond(t,i,"_nanosecond","_microsecond","addMicroseconds")}addPicoseconds(t,i){return this.addFractionsOfSecond(t,i,"_picosecond","_nanosecond","addNanoseconds")}addFemtoseconds(t,i){return this.addFractionsOfSecond(t,i,"_femtosecond","_picosecond","addPicoseconds")}addAttoseconds(t,i){return this.addFractionsOfSecond(t,i,"_attosecond","_femtosecond","addFemtoseconds")}addZeptoseconds(t,i){return this.addFractionsOfSecond(t,i,"_zeptosecond","_attosecond","addAttoseconds")}addYoctoseconds(t,i){return this.addFractionsOfSecond(t,i,"_yoctosecond","_zeptosecond","addZeptoseconds")}getTimeZoneOffset(){const t=new Date,i=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1),n=t.getTimezoneOffset()<Math.max(i.getTimezoneOffset(),a.getTimezoneOffset());return{offset:-(t.getTimezoneOffset()/60),dst:+n}}isInDaylightSavingTime(){const t=new Date,i=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1);return this.date().getTimezoneOffset()<Math.max(i.getTimezoneOffset(),a.getTimezoneOffset())}supportsDaylightSavingTime(){const t=new Date,i=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1);return i.getTimezoneOffset()!==a.getTimezoneOffset()}date(){const t=this,i=t.month(),a=t.year(),n=t.day(),o=new Smart.Utilities.DateTime(a,i,n);return t.copyTimeZone(o),o}isWeekend(){const t=this;return 0===t.dayOfWeek()||6===t.dayOfWeek()}toDate(t){const i=this,a=i.month(),n=i.year(),o=i.day(),l=i.hour(),r=i.minute(),s=i.second(),d=i.millisecond();let m=new Date(n,a-1,o);if(1970>n&&m.setFullYear(n),m.setHours(l,r,s,d),t){const a=i.timeZones.filter(function(i){return i.id===t});if(a.length){let t=a[0].offset;const n=m.getTime();let o=1e3*(60*m.getTimezoneOffset());if(i.timeZone){const t=i.timeZones.filter(function(t){return t.id===i.timeZone});t.length&&(o=1e3*(60*-t[0].offset))}const l=n+o;m=new Date(l+60000*t)}}return m}toTimeZone(t){const i=this;let a=t;if((null===a||void 0===a)&&(a="Local"),i.timeZone===a)return i.clone();const n=i.timeZones.filter(function(t){return t.id===a});if(0===n.length)return i.clone();const o=this.toDate(a),l=new Smart.Utilities.DateTime(o);return l.timeZone=a,l.timeZoneOffset=n[0].offset,l.timeZoneOffsetHours=n[0].offsetHours,i.copySmallTimePartValues(l),l}day(){const t=this;return t.getDatePart(t.datePartDay)}month(){const t=this;return t.getDatePart(t.datePartMonth)}year(){const t=this;return t.getDatePart(t.datePartYear)}millisecond(){return parseInt(this.internalMS()%1e3)}hour(){const t=this;return parseInt(Math.floor(t.internalMS()/t.millisPerHour)%24)}minute(){const t=this;return parseInt(t.internalMS()/t.millisPerMinute%60)}second(){const t=this;return parseInt(t.internalMS()/t.millisPerSecond%60)}microsecond(){return this._microsecond}nanosecond(){return this._nanosecond}picosecond(){return this._picosecond}femtosecond(){return this._femtosecond}attosecond(){return this._attosecond}zeptosecond(){return this._zeptosecond}yoctosecond(){return this._yoctosecond}valueOf(){return this.dateData}equals(t){const i=this;return i.dateData===t.dateData&&i._microsecond===t._microsecond&&i._nanosecond===t._nanosecond&&i._picosecond===t._picosecond&&i._femtosecond===t._femtosecond&&i._attosecond===t._attosecond&&i._zeptosecond===t._zeptosecond&&i._yoctosecond===t._yoctosecond}equalDateParts(t){const i=this;return!(i.year()!==t.year()||i.month()!==t.month()||i.day()!==t.day())}compare(t){const a=this;if(a.equals(t))return 0;const n=["dateData","_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"];for(let o=0;o<n.length;o++){const i=n[o];if(a[i]>t[i])return 1;if(a[i]<t[i])return-1}return 0}toDateString(){return this.toDate().toDateString()}toLocaleDateString(){const t=this;return t.toDate().toLocaleDateString(t.calendar.locale)}toLocaleString(){const t=this;return t.toDate().toLocaleString(t.calendar.locale)}toLocaleTimeString(){const t=this;return t.toDate().toLocaleTimeString(t.calendar.locale)}validateTimeZone(t){const i=this;if("string"==typeof t){const a=i.timeZones.filter(function(i){return i.id===t});0===a.length||(i.timeZone=t,i.timeZoneOffset=a[0].offset,i.timeZoneOffsetHours=a[0].offsetHours)}}copyTimeZone(t){const i=this;t.timeZone=i.timeZone,t.timeZoneOffset=i.timeZoneOffset,t.timeZoneOffsetHours=i.timeZoneOffsetHours}getTimeStamp(){const t=this,i=new Smart.Utilities.BigNumber(t.dateData.toString()+t.getFirstNDigitsOfPrecision(void 0,!0));return i}}),Smart.Utilities.Assign("Draw",class{constructor(t,i){const a=this;a.host=t,a.renderEngine=i||"",a.refresh();const n=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(let o in n)a._addFn(Smart.Utilities.Draw.prototype,n[o])}_addFn(t,i){t[i]||(t[i]=function(){return this.renderer[i].apply(this.renderer,arguments)})}_initRenderer(t){return this.createRenderer(this,t)}_internalRefresh(){const t=this;if(t.renderer||(t.host.innerHTML="",t._initRenderer(t.host)),"none"!==window.getComputedStyle(t.host).display){const i=t.renderer;if(i){const a=i.getRect();t._render({x:1,y:1,width:a.width,height:a.height})}}}_render(t){this._plotRect=t}refresh(){this._internalRefresh()}getSize(){const t=this._plotRect;return{width:t.width,height:t.height}}toGreyScale(t){if(-1===t.indexOf("#"))return t;const i=this.cssToRgb(t);i[0]=i[1]=i[2]=Math.round(.3*i[0]+.59*i[1]+.11*i[2]);const a=this.rgbToHex(i[0],i[1],i[2]);return"#"+a[0]+a[1]+a[2]}decToHex(t){return t.toString(16)}hexToDec(t){return parseInt(t,16)}rgbToHex(t,i,a){return[this.decToHex(t),this.decToHex(i),this.decToHex(a)]}hexToRgb(t,i,a){return[this.hexToDec(t),this.hexToDec(i),this.hexToDec(a)]}cssToRgb(t){return-1>=t.indexOf("rgb")?this.hexToRgb(t.substring(1,3),t.substring(3,5),t.substring(5,7)):t.substring(4,t.length-1).split(",")}hslToRgb(t){let i,a,n;const o=parseFloat(t[0]),d=parseFloat(t[1]),s=parseFloat(t[2]);if(0===d)i=a=n=s;else{const t=.5>s?s*(1+d):s+d-s*d,l=2*s-t;i=this.hueToRgb(l,t,o+1/3),a=this.hueToRgb(l,t,o),n=this.hueToRgb(l,t,o-1/3)}return[255*i,255*a,255*n]}hueToRgb(i,a,n){return(0>n&&(n+=1),1<n&&(n-=1),n<1/6)?i+6*(a-i)*n:n<1/2?a:n<2/3?i+6*((a-i)*(2/3-n)):i}rgbToHsl(t){const i=parseFloat(t[0])/255,a=parseFloat(t[1])/255,n=parseFloat(t[2])/255,o=Math.max(i,a,n),r=Math.min(i,a,n);let d=(o+r)/2,l,m;if(o===r)l=m=0;else{const t=o-r;m=.5<d?t/(2-o-r):t/(o+r);o===i?l=(a-n)/t+(a<n?6:0):o===a?l=(n-i)/t+2:o===n?l=(i-a)/t+4:void 0;l/=6}return[l,m,d]}swap(t,i){const a=t;t=i,i=a}getNum(t){if(!(t.constructor!==Array)){for(let a=0;a<t.length;a++)if(!isNaN(t[a]))return t[a];}else if(isNaN(t))return 0;return 0}_ptRotate(t,i,a,n,o){var l=Math.abs,r=Math.pow;const s=Math.sqrt(r(l(t-a),2)+r(l(i-n),2)),d=Math.asin((t-a)/s),m=d+o;return t=a+Math.cos(m)*s,i=n+Math.sin(m)*s,{x:t,y:i}}log(t,i){var a=Math.log;return a(t)/(i?a(i):1)}_mod(t,i){const n=Math.abs(t>i?i:t);let o=1;if(0!==n)for(;100>n*o;)o*=10;return t*=o,i*=o,t%i/o}createRenderer(t,i){const a=t;let n=a.renderer=null;return document.createElementNS&&"HTML5"!==a.renderEngine&&(n=new Smart.Utilities.SvgRenderer(this)),null===n&&("HTML5"===a.renderEngine||void 0===a.renderEngine)&&(n=new Smart.Utilities.HTML5Renderer(this)),n.init(i),a.renderer=n,n}getByPriority(t){let i;for(let a=0;a<t.length;a++){const n=t[a];if(n!==void 0&&null!==n&&""!==n){i=n;break}}return i}get(t,i,a){return a===void 0?t[i]:t[i][a]}min(t,a){let n=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);(isNaN(n)||i<n)&&(n=i)}return n}max(t,a){let n=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);(isNaN(n)||i>n)&&(n=i)}return n}sum(t,a){let n=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);isNaN(i)||(n+=i)}return n}count(t,a){let n=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);isNaN(i)||n++}return n}avg(t,i){return this.sum(t,i)/Math.max(1,this.count(t,i))}filter(t,a){if(!a)return t;const n=[];for(let o=0;o<t.length;o++)a(t[o])&&n.push(t[o]);return n}scale(t,i,a,n){var o=Math.min,l=Math.abs,r=Math.pow,s=Math.max;if(isNaN(t))return NaN;if((t<o(i.min,i.max)||t>s(i.min,i.max))&&(!n||!0!==n.ignore_range))return NaN;let d=NaN,m=1;if(i.type===void 0||"logarithmic"!==i.type){let a=l(i.max-i.min);a||(a=1),m=l(t-o(i.min,i.max))/a}else if("logarithmic"===i.type){let a=i.base;isNaN(a)&&(a=10);let n=o(i.min,i.max);0>=n&&(n=1);let d=s(i.min,i.max);0>=d&&(d=1);const c=this.log(d,a);d=r(a,c);const u=this.log(n,a);n=r(a,u);const p=this.log(t,a);m=l(p-u)/(c-u)}if("logarithmic"===a.type){let t=a.base;isNaN(t)&&(t=10);const i=this.log(a.max,t),n=this.log(a.min,t);a.flip&&(m=1-m);const s=o(n,i)+m*l(i-n);d=r(t,s)}else d=o(a.min,a.max)+m*l(a.max-a.min),a.flip&&(d=s(a.min,a.max)-d+a.min);return d}axis(t,a,n){var o=Math.round,l=Math.floor,r=Math.pow;if(1>=n)return[a,t];(isNaN(n)||2>n)&&(n=2);let s=0;for(;o(t)!==t&&o(a)!==a&&10>s;)t*=10,a*=10,s++;let d=(a-t)/n;for(;10>s&&o(d)!==d;)t*=10,a*=10,d*=10,s++;const m=[1,2,5];let c=0,u;for(;;){let t=c%m.length,i=l(c/m.length),a=r(10,i)*m[t];if(t=(c+1)%m.length,i=l((c+1)/m.length),u=r(10,i)*m[t],d>=a&&d<u)break;c++}const p=u,g=[];let h=this.renderer._rnd(t,p,!1);for(const i=0>=s?1:r(10,s);h<a+p;)g.push(h/i),h+=p;return g}_widgetToImage(t,i,a,n,o){let l=t;if(!l)return!1;(void 0===a||""===a)&&(a="image."+i);let r=l.renderEngine,s=l.animation;if(l.animation="none",l.renderEngine="HTML5",l.renderEngine!==r)try{l.refresh()}catch(t){return l.renderEngine=r,l.refresh(),l.animation=s,!1}let d=l.renderer.getContainer().firstElementChild,m=!0;"function"==typeof n&&(m=n(t,d));let c=!0;return m&&(c=this.exportImage(d,i,a,o)),l.renderEngine!==r&&(l.renderEngine=r,l.refresh(),l.animation=s),c}_saveAsImage(t,i){return this._widgetToImage(this,t,i)}saveAsPNG(t){return this._saveAsImage("png",t)}saveAsJPEG(t){return this._saveAsImage("jpeg",t)}exportImage(t,i,a,n){if(!t)return!1;let o="pdf"===i.toLowerCase();o&&(i="jpeg"),(a===void 0||""===a)&&(a="image."+i);let l=!0;try{if(t)if(o){n=n||"portrait";const o=t.toDataURL("image/"+i),l={content:{image:o,width:Math.min(t.width/1.35,"portrait"===n?515:762)},pageOrientation:n};pdfMake.createPdf(l).download(a)}else{const n=new Smart.Utilities.DataExporter;t.toBlob(function(t){n.downloadFile(t,i,a)})}}catch(t){l=!1}return l}}),Smart.Utilities.Assign("Renderer",class{constructor(t){const i=this;i.draw=t,i._gradients={},i._toRadiansCoefficient=2*Math.PI/360}pieSlicePath(t,i,a,n,o,l,r){var s=Math.abs,d=Math.sin,m=Math.cos;n||(n=1);const c=s(o-l),u=180<c?1:0;360<=c&&(l=o+359.99);const p=o*this._toRadiansCoefficient,g=l*this._toRadiansCoefficient;let h=t,_=t,f=i,b=i;const v=!isNaN(a)&&0<a;v&&(r=0);const w=m(p),C=d(p),S=m(g),D=d(g);if(0<r+a){if(0<r){const a=(c/2+o)*this._toRadiansCoefficient;t+=r*m(a),i-=r*d(a)}v&&(h=t+a*w,f=i-a*C,_=t+a*S,b=i-a*D)}const T=t+n*w,$=t+n*S,I=i-n*C,B=i-n*D;let H="";const E=.02<s(s(l-o)-360);return v?(H="M "+_+","+b,H+=" a"+a+","+a,H+=" 0 "+u+",1 "+(h-_)+","+(f-b),H+=E?" L"+T+","+I:" M"+T+","+I,H+=" a"+n+","+n,H+=" 0 "+u+",0 "+($-T)+","+(B-I),E&&(H+=" Z")):(H="M "+$+","+B,H+=" a"+n+","+n,H+=" 0 "+u+",1 "+(T-$)+","+(I-B),E&&(H+=" L"+t+","+i,H+=" Z")),H}measureText(t,i,a,n){var o=Math.abs;const l=this._getTextParts(t,i,a),r=l.width;let s=l.height;!1===n&&(s/=.6);let d={};if(isNaN(i)&&(i=0),0===i)d={width:this._rup(r),height:this._rup(s)};else{const t=2*(i*Math.PI)/360,a=o(Math.sin(t)),n=o(Math.cos(t)),l=o(r*a+s*n),m=o(r*n+s*a);d={width:this._rup(m),height:this._rup(l)}}return n&&(d.textPartsInfo=l),d}alignTextInRect(t,i,a,n,o,l,r,s,d,m){const c=2*(d*Math.PI)/360,u=Math.sin(c),p=Math.cos(c),g=o*u,h=o*p;"center"===r||""===r||"undefined"===r?t+=a/2:"right"===r&&(t+=a),"center"===s||"middle"===s||""===s||"undefined"===s?i+=n/2:"bottom"===s?i+=n-l/2:"top"==s&&(i+=l/2),m=m||"";let _="middle";-1===m.indexOf("top")?-1!==m.indexOf("bottom")&&(_="bottom"):_="top";let f="center";return-1===m.indexOf("left")?-1!==m.indexOf("right")&&(f="right"):f="left","center"==f?(t-=h/2,i-=g/2):"right"==f&&(t-=h,i-=g),"top"==_?(t-=l*u,i+=l*p):"middle"==_&&(t-=l*u/2,i+=l*p/2),t=this._rup(t),i=this._rup(i),{x:t,y:i}}adjustColor(t,i){var a=Math.min;if("string"!=typeof t)return"#000000";if(-1===t.indexOf("#"))return t;const n=this.draw;let o=n.cssToRgb(t);const l=n.rgbToHsl(o);l[2]=a(1,l[2]*i),l[1]=a(1,1.1*(l[1]*i)),o=n.hslToRgb(l),t="#";for(let a=0,l;3>a;a++)l=Math.round(o[a]),l=n.decToHex(l),1===l.toString().length&&(t+="0"),t+=l;return t.toUpperCase()}_rup(t){let i=Math.round(t);return t>i&&i++,i}_ptdist(t,i,a,n){return Math.sqrt((a-t)*(a-t)+(n-i)*(n-i))}_rnd(t,i,n,o){if(isNaN(t))return t;void 0===o&&(o=!0);let l=t-(!0===o?t%i:this._mod(t,i));return t===l?l:(n?t>l&&(l+=i):l>t&&(l-=i),1===i?Math.round(l):l)}_ptrnd(t){var i=Math.round;if(!document.createElementNS)return i(t)===t?t:this._rnd(t,1,!1,!0);const a=this._rnd(t,.5,!1,!0);return .5===Math.abs(a-i(a))?a:a>t?a-.5:a+.5}_getContrastColor(t){if(void 0!==t){let i=this.draw.hexToRgb(t.slice(1,3),t.slice(3,5),t.slice(5,7)),a=(.299*i[0]+.587*i[1]+.114*i[2])/255;return .6<a?"#000000":"#FFFFFF"}}}),Smart.Utilities.Assign("SvgRenderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const i=this;i._svgns="http://www.w3.org/2000/svg",i._openGroups=[],i._clipId=0}init(t){const i=document.createElement("div");i.className="drawContainer",i.onselectstart=function(){return!1},t.appendChild(i),this.host=t,this.container=i;try{const t=document.createElementNS(this._svgns,"svg");t.setAttribute("version","1.1"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("overflow","hidden"),i.appendChild(t),this.canvas=t}catch(t){return!1}return this._id=new Date().getTime(),this.clear(),!0}getType(){return"SVG"}refresh(){}getRect(){var t=Math.max;return{x:0,y:0,width:t(this._rup(this.host.offsetWidth)-1,0),height:t(this._rup(this.host.offsetHeight)-1,0)}}getContainer(){return this.container}clear(){for(;0<this.canvas.childNodes.length;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}removeElement(t){if(void 0!==t)try{for(;t.firstChild;)this.removeElement(t.firstChild);t.parentNode?t.parentNode.removeChild(t):this.canvas.removeChild(t)}catch(t){}}beginGroup(){const t=this._activeParent(),i=document.createElementNS(this._svgns,"g");return t.appendChild(i),this._openGroups.push(i),i}endGroup(){0===this._openGroups.length||this._openGroups.pop()}_activeParent(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}createClipRect(t){const i=document.createElementNS(this._svgns,"clipPath"),a=document.createElementNS(this._svgns,"rect");return this.attr(a,{x:t.x,y:t.y,width:t.width,height:t.height,fill:"none"}),this._clipId=this._clipId||0,i.id="cl"+this._id+"_"+(++this._clipId).toString(),i.appendChild(a),this._defs.appendChild(i),i}getWindowHref(){let t=window.location.href;return t?(t=t.replace(/([\('\)])/g,"\\$1"),t=t.replace(/#.*$/,""),t):t}setClip(t,i){const a="url("+this.getWindowHref()+"#"+i.id+")";return this.attr(t,{"clip-path":a})}addHandler(t,i,a){t.addEventListener(i,a)}removeHandler(){}on(t,i,a){this.addHandler(t,i,a)}off(t,i,a){this.removeHandler(t,i,a)}shape(t,i){const a=document.createElementNS(this._svgns,t);if(a){for(let t in i)a.setAttribute(t,i[t]);return this._activeParent().appendChild(a),a}}_getTextParts(t,i,a){const n={width:0,height:0,parts:[]};if(void 0===t)return n;const o=t.toString().split("<br>"),l=this._activeParent(),r=document.createElementNS(this._svgns,"text");this.attr(r,a);for(let s=0;s<o.length;s++){const t=o[s],i=r.ownerDocument.createTextNode(t);r.appendChild(i),l.appendChild(r);let a;try{a=r.getBBox()}catch(t){}const d=this._rup(a.width),m=this._rup(a.height*.6);r.removeChild(i),n.width=Math.max(n.width,d),n.height+=m+(0<s?4:0),n.parts.push({width:d,height:m,text:t})}return l.removeChild(r),n}_measureText(t,i,a,n){return super.measureText(t,i,a,n)}measureText(t,i,a){return this._measureText(t,i,a,!1)}text(t,a,n,i,o,l,r,s,d,m,c){const u=this._measureText(t,l,r,!0,this),p=u.textPartsInfo,g=p.parts,_=this._getContrastColor(arguments[11]);let f;if(d||(d="center"),m||(m="center"),(1<g.length||s)&&(f=this.beginGroup()),s){const t=this.createClipRect({x:this._rup(a)-1,y:this._rup(n)-1,width:this._rup(i)+2,height:this._rup(o)+2});this.setClip(f,t)}let b=this._activeParent(),v=0,C=0;v=p.width,C=p.height,(isNaN(i)||0>=i)&&(i=v),(isNaN(o)||0>=o)&&(o=C);const S=i||0,w=o||0;let h=0;if(!l||0===l){n+=C,"center"===m||"middle"===m?n+=(w-C)/2:"bottom"===m&&(n+=w-C),i||(i=v),o||(o=C),b=this._activeParent();let t;for(let o=g.length-1;0<=o;o--){t=document.createElementNS(this._svgns,"text"),this.attr(t,r),this.attr(t,{cursor:"default"});const i=t.ownerDocument.createTextNode(g[o].text);t.appendChild(i);let l=a;const s=g[o].width,m=g[o].height;"center"===d?l+=(S-s)/2:"right"==d&&(l+=S-s),this.attr(t,{x:this._rup(l),y:this._rup(n+h),width:this._rup(s),height:this._rup(m)}),void 0!==_&&(t.style.fill=_),b.appendChild(t),h-=g[o].height+4}return f?(this.endGroup(),f):t}const D=this.alignTextInRect(a,n,i,o,v,C,d,m,l,c);a=D.x,n=D.y;const T=this.shape("g",{transform:"translate("+a+","+n+")"}),$=this.shape("g",{transform:"rotate("+l+")"});T.appendChild($),h=0;for(let u=g.length-1;0<=u;u--){const t=document.createElementNS(this._svgns,"text");this.attr(t,r),this.attr(t,{cursor:"default"});const i=t.ownerDocument.createTextNode(g[u].text);t.appendChild(i);let a=0;const n=g[u].width,o=g[u].height;"center"===d?a+=(p.width-n)/2:"right"==d&&(a+=p.width-n),this.attr(t,{x:this._rup(a),y:this._rup(h),width:this._rup(n),height:this._rup(o)}),$.appendChild(t),h-=o+4}return b.appendChild(T),f&&this.endGroup(),T}line(t,i,a,n,o){const l=this.shape("line",{x1:t,y1:i,x2:a,y2:n});return this.attr(l,o),l}path(t,i){const a=this.shape("path");return a.setAttribute("d",t),i&&this.attr(a,i),a}rect(t,i,a,n,o){var l=Math.max;t=this._ptrnd(t),i=this._ptrnd(i),a=l(1,this._rnd(a,1,!1)),n=l(1,this._rnd(n,1,!1));const r=this.shape("rect",{x:t,y:i,width:a,height:n});return o&&this.attr(r,o),r}circle(t,i,a,n){const o=this.shape("circle",{cx:t,cy:i,r:a});return n&&this.attr(o,n),o}pieslice(t,i,a,n,o,l,r,d){const m=this.pieSlicePath(t,i,a,n,o,l,r),c=this.shape("path");return c.setAttribute("d",m),d&&this.attr(c,d),c}attr(t,i){if(t&&i)for(let a in i)"textContent"==a?t.textContent=i[a]:t.setAttribute(a,i[a])}removeAttr(t,i){if(t&&i)for(let a in i)"textContent"==a?t.textContent="":t.removeAttribute(i[a])}getAttr(t,i){return t.getAttribute(i)}_toLinearGradient(t,i,a){const n="grd"+this._id+t.replace("#","")+(i?"v":"h"),o="url("+this.getWindowHref()+"#"+n+")";if(this._gradients[o])return o;const l=document.createElementNS(this._svgns,"linearGradient");this.attr(l,{x1:"0%",y1:"0%",x2:i?"0%":"100%",y2:i?"100%":"0%",id:n});for(let n=0;n<a.length;n++){const i=a[n],o=document.createElementNS(this._svgns,"stop"),r="stop-color:"+this.adjustColor(t,i[1]);this.attr(o,{offset:i[0]+"%",style:r}),l.appendChild(o)}return this._defs.appendChild(l),this._gradients[o]=!0,o}_toRadialGradient(t,a,i){const n="grd"+this._id+t.replace("#","")+"r"+(void 0===i?"":i.key),o="url("+this.getWindowHref()+"#"+n+")";if(this._gradients[o])return o;const l=document.createElementNS(this._svgns,"radialGradient");void 0===i?this.attr(l,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:n}):this.attr(l,{cx:i.x,cy:i.y,r:i.outerRadius,id:n,gradientUnits:"userSpaceOnUse"});for(let n=0;n<a.length;n++){const i=a[n],o=document.createElementNS(this._svgns,"stop"),r="stop-color:"+this.adjustColor(t,i[1]);this.attr(o,{offset:i[0]+"%",style:r}),l.appendChild(o)}return this._defs.appendChild(l),this._gradients[o]=!0,o}}),Smart.Utilities.Assign("HTML5Renderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const i=this;i._renderers=new Smart.Utilities.HTML5RenderHelpers(i)}init(t){try{this.host=t;const i=document.createElement("div"),a=document.createElement("canvas");i.className="chartContainer",i.style.position="relative",i.onselectstart=function(){return!1},a.id="__smartCanvasWrap",a.style.width="100%",a.style.height="100%",i.appendChild(a),t.appendChild(i),this.canvas=a,a.width=t.offsetWidth,a.height=t.offsetHeight,this.ctx=a.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(t){return!1}return!0}getType(){return"HTML5"}getContainer(){let t=this.host.getElementsByClassName("chartContainer")[0];return t}getRect(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}beginGroup(){}endGroup(){}setClip(){}createClipRect(){}addHandler(){}removeHandler(){}on(t,i,a){this.addHandler(t,i,a)}off(t,i,a){this.removeHandler(t,i,a)}clear(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}removeElement(t){void 0===t||this._elements[t.id]&&delete this._elements[t.id]}shape(t,i){let a={type:t,id:this._maxId++};for(let n in i)a[n]=i[n];return this._elements[a.id]=a,a}attr(t,i){for(let a in i)t[a]=i[a]}removeAttr(t,i){for(let a in i)delete t[i[a]]}rect(t,i,a,n,o){if(isNaN(t))throw"Invalid value for \"x\"";if(isNaN(i))throw"Invalid value for \"y\"";if(isNaN(a))throw"Invalid value for \"width\"";if(isNaN(n))throw"Invalid value for \"height\"";let l=this.shape("rect",{x:t,y:i,width:a,height:n});return o&&this.attr(l,o),l}path(t,i){let a=this.shape("path",i);return this.attr(a,{d:t}),a}line(t,i,a,n,o){return this.path("M "+t+","+i+" L "+a+","+n,o)}circle(t,i,a,n){let o=this.shape("circle",{x:t,y:i,r:a});return n&&this.attr(o,n),o}pieslice(t,i,a,n,o,l,r,s){let d=this.path(this.pieSlicePath(t,i,a,n,o,l,r),s);return this.attr(d,{x:t,y:i,innerRadius:a,outerRadius:n,angleFrom:o,angleTo:l}),d}_getCSSStyle(t){const i=document.createElement("div");i.className=t,i.style.position="absolute",i.style.visibility="hidden",this.host.appendChild(i);let a=window.getComputedStyle(i);return a={fontFamily:a.fontFamily,fontSize:a.fontSize,fontWeight:a.fontWeight},this.host.removeChild(i),a}_getTextParts(t,i,a){let n="Arial",o="10pt",l="";if(a&&a["class"]){let t=this._getCSSStyle(a["class"]);t.fontSize&&(o=t.fontSize),t.fontFamily&&(n=t.fontFamily),t.fontWeight&&(l=t.fontWeight)}this.ctx.font=l+" "+o+" "+n;let r={width:0,height:0,parts:[]},s=t.toString().split("<br>");for(let n=0;n<s.length;n++){let t=s[n],i=this.ctx.measureText(t).width,a=document.createElement("span");a.className="smartchart",a.font=this.ctx.font,a.textContent=t,this.host.appendChild(a);let o=a.offsetHeight*.6;this.host.removeChild(a),r.width=Math.max(r.width,this._rup(i)),r.height+=o+(0<n?4:0),r.parts.push({width:i,height:o,text:t})}return r}_measureText(t,i,a,n){return super.measureText(t,i,a,n)}measureText(t,i,a){return this._measureText(t,i,a,!1)}text(i,a,n,o,l,r,s,d,m,c,u){let p=this.shape("text",{text:i,x:a,y:n,width:o,height:l,angle:r,clip:d,halign:m,valign:c,rotateAround:u});if(s&&this.attr(p,s),p.fontFamily="Arial",p.fontSize="10pt",p.fontWeight="",p.color=this._getContrastColor(arguments[11])||"#000000",s&&s["class"]){let t=this._getCSSStyle(s["class"]);p.fontFamily=t.fontFamily||p.fontFamily,p.fontSize=t.fontSize||p.fontSize,p.fontWeight=t.fontWeight||p.fontWeight,p.color=t.color||p.color}let t=this._measureText(i,0,s,!0);return this.attr(p,{textPartsInfo:t.textPartsInfo,textWidth:t.width,textHeight:t.height}),(0>=o||isNaN(o))&&this.attr(p,{width:t.width}),(0>=l||isNaN(l))&&this.attr(p,{height:t.height}),p}_toLinearGradient(t,i,a){if(this._renderers._gradients[t])return t;let n=[];for(let o=0;o<a.length;o++)n.push({percent:a[o][0]/100,color:this.adjustColor(t,a[o][1])});let o="gr"+this._gradientId++;return this.createGradient(o,i?"vertical":"horizontal",n),o}_toRadialGradient(t,a){if(this._renderers._gradients[t])return t;let n=[];for(let o=0;o<a.length;o++)n.push({percent:a[o][0]/100,color:this.adjustColor(t,a[o][1])});let i="gr"+this._gradientId++;return this.createGradient(i,"radial",n),i}createGradient(t,i,a){this._renderers.createGradient(this,t,i,a)}refresh(){for(let t in this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._elements){let i=this._elements[t];this._renderers.setFillStyle(this,i),this._renderers.setStroke(this,i),this._renderers[this._elements[t].type](this.ctx,i)}}}),Smart.Utilities.Assign("HTML5RenderHelpers",class{constructor(t){this.HTML5Renderer=t,this._cmds="mlcazq"}ptrnd(t){var i=Math.round;if(.5===Math.abs(i(t)-t))return t;let a=i(t);return a<t&&--a,a+.5}createGradient(t,i,a,n){t._gradients[i]={orientation:a,colorStops:n}}setStroke(t,i){let a=t.ctx,n=i["stroke-width"];a.strokeStyle=i.stroke||"transparent",a.lineWidth=0===n?.01:void 0===n?1:n,a.globalAlpha=void 0===i["fill-opacity"]?void 0===i.opacity?1:i.opacity:i["fill-opacity"],a.setLineDash&&(i["stroke-dasharray"]?a.setLineDash(i["stroke-dasharray"].split(",")):a.setLineDash([]))}setFillStyle(t,i){let a=t.ctx;if(a.fillStyle="transparent",a.globalAlpha=void 0===i["fill-opacity"]?void 0===i.opacity?1:i.opacity:i["fill-opacity"],i.fill&&-1===i.fill.indexOf("#")&&t._gradients[i.fill]){let n="horizontal"!==t._gradients[i.fill].orientation,o="radial"===t._gradients[i.fill].orientation,l=this.ptrnd(i.x),r=this.ptrnd(i.y),s=this.ptrnd(i.x+(n?0:i.width)),d=this.ptrnd(i.y+(n?i.height:0)),m;if(("circle"===i.type||"path"===i.type||"rect"===i.type)&&o){let t=this.ptrnd(i.x),n=this.ptrnd(i.y);const o=i.innerRadius||0,l=i.outerRadius||i.r||0;"rect"===i.type&&(t+=i.width/2,n+=i.height/2),m=a.createRadialGradient(t,n,o,t,n,l)}o||((isNaN(l)||isNaN(s)||isNaN(r)||isNaN(d))&&(l=0,r=0,s=n?0:a.canvas.width,d=n?a.canvas.height:0),m=a.createLinearGradient(l,r,s,d));let c=t._gradients[i.fill].colorStops;for(let t=0;t<c.length;t++)m.addColorStop(c[t].percent,c[t].color);a.fillStyle=m}else i.fill&&(a.fillStyle=i.fill)}rect(t,i){0===i.width||0===i.height||(t.fillRect(this.ptrnd(i.x),this.ptrnd(i.y),i.width,i.height),t.strokeRect(this.ptrnd(i.x),this.ptrnd(i.y),i.width,i.height))}circle(t,i){0===i.r||(t.beginPath(),t.arc(this.ptrnd(i.x),this.ptrnd(i.y),i.r,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke())}_parsePoint(t){let i=this._parseNumber(t),a=this._parseNumber(t);return{x:i,y:a}}_parseNumber(t){let a=!1,n;for(n=this._pos;n<t.length;n++){if("0"<=t[n]&&"9">=t[n]||"."===t[n]||"e"===t[n]||"-"===t[n]&&!a||"-"===t[n]&&1<=n&&"e"===t[n-1]){a=!0;continue}if(!a&&(" "===t[n]||","===t[n])){this._pos++;continue}break}let o=parseFloat(t.substring(this._pos,n));if(!isNaN(o))return this._pos=n,o}_isRelativeCmd(t){return-1!==this._cmds.indexOf(t)}_parseCmd(t){for(let a=this._pos;a<t.length;a++){if(-1!==this._cmds.toLowerCase().indexOf(t[a].toLowerCase()))return this._pos=a+1,this._lastCmd=t[a],this._lastCmd;if(" "===t[a]){this._pos++;continue}if("0"<=t[a]&&"9">=t[a])if(this._pos=a,""===this._lastCmd)break;else return this._lastCmd}}_toAbsolutePoint(t){return{x:this._currentPoint.x+t.x,y:this._currentPoint.y+t.y}}path(t,i){var n=Math.sqrt,o=Math.pow,l=Math.sin,d=Math.cos,c=Math.PI;let p=i.d;this._pos=0,this._lastCmd="";let a;for(this._currentPoint={x:0,y:0},t.beginPath();this._pos<p.length;){let i=this._parseCmd(p);if(i===void 0)break;if("M"===i||"m"===i){let i=this._parsePoint(p);if(void 0===i)break;t.moveTo(i.x,i.y),this._currentPoint=i,void 0===a&&(a=i);continue}if("L"===i||"l"===i){let i=this._parsePoint(p);if(void 0===i)break;t.lineTo(i.x,i.y),this._currentPoint=i;continue}if("A"===i||"a"===i){let g=this._parseNumber(p),h=this._parseNumber(p),_=this._parseNumber(p)*(c/180),f=this._parseNumber(p),b=this._parseNumber(p),y=this._parsePoint(p);if(this._isRelativeCmd(i)&&(y=this._toAbsolutePoint(y)),0===g||0===h)continue;let w=this._currentPoint,C={x:d(_)*(w.x-y.x)/2+l(_)*(w.y-y.y)/2,y:-l(_)*(w.x-y.x)/2+d(_)*(w.y-y.y)/2},x=o(C.x,2)/o(g,2)+o(C.y,2)/o(h,2);1<x&&(g*=n(x),h*=n(x));let S=(f===b?-1:1)*n((o(g,2)*o(h,2)-o(g,2)*o(C.y,2)-o(h,2)*o(C.x,2))/(o(g,2)*o(C.y,2)+o(h,2)*o(C.x,2)));isNaN(S)&&(S=0);let s={x:S*g*C.y/h,y:S*-h*C.x/g},D={x:(w.x+y.x)/2+d(_)*s.x-l(_)*s.y,y:(w.y+y.y)/2+l(_)*s.x+d(_)*s.y},T=function(t){return n(o(t[0],2)+o(t[1],2))},m=function(t,i){return(t[0]*i[0]+t[1]*i[1])/(T(t)*T(i))},r=function(t,i){return(t[0]*i[1]<t[1]*i[0]?-1:1)*Math.acos(m(t,i))},a=r([1,0],[(C.x-s.x)/g,(C.y-s.y)/h]),$=[(C.x-s.x)/g,(C.y-s.y)/h],u=[(-C.x-s.x)/g,(-C.y-s.y)/h],v=r($,u);-1>=m($,u)&&(v=c),1<=m($,u)&&(v=0),0===b&&0<v&&(v-=2*c),1===b&&0>v&&(v+=2*c);let I=g>h?g:h,B=g>h?1:g/h,H=g>h?h/g:1;t.translate(D.x,D.y),t.rotate(_),t.scale(B,H),t.arc(0,0,I,a,a+v,1-b),t.scale(1/B,1/H),t.rotate(-_),t.translate(-D.x,-D.y);continue}if(("Z"===i||"z"===i)&&void 0!==a){t.lineTo(a.x,a.y),this._currentPoint=a;continue}if("C"===i||"c"===i){let i=this._parsePoint(p),a=this._parsePoint(p),n=this._parsePoint(p);t.bezierCurveTo(i.x,i.y,a.x,a.y,n.x,n.y),this._currentPoint=n;continue}if("Q"===i||"q"===i){let i=this._parsePoint(p),a=this._parsePoint(p);t.quadraticCurveTo(i.x,i.y,a.x,a.y),this._currentPoint=a;continue}}t.fill(),t.stroke(),t.closePath()}text(t,i){let a=this.ptrnd(i.x),n=this.ptrnd(i.y),o=this.ptrnd(i.width),l=this.ptrnd(i.height),r=i.halign,s=i.valign,d=i.angle,m=i.rotateAround,c=i.textPartsInfo,u=c.parts,p=i.clip;void 0===p&&(p=!0),t.save(),r||(r="center"),s||(s="center"),p&&(t.rect(a,n,o,l),t.clip());let g=i.textWidth,_=i.textHeight,f=o||0,b=l||0;if(t.fillStyle=i.color,t.font=i.fontWeight+" "+i.fontSize+" "+i.fontFamily,!d||0===d){n+=_,"center"===s||"middle"===s?n+=(b-_)/2:"bottom"===s&&(n+=b-_),o||(o=g),l||(l=_);let d=0;for(let o=u.length-1;0<=o;o--){let i=u[o],l=a,s=u[o].width;"center"===r?l+=(f-s)/2:"right"===r&&(l+=f-s),t.fillText(i.text,l,n+d),d-=i.height+(0<o?4:0)}return void t.restore()}let h=this.HTML5Renderer.alignTextInRect(a,n,o,l,g,_,r,s,d,m);a=h.x,n=h.y;let v=2*(d*Math.PI)/360;t.translate(a,n),t.rotate(v);let w=0,C=c.width;for(let a=u.length-1,n;0<=a;a--)n=0,"center"===r?n+=(C-u[a].width)/2:"right"===r&&(n+=C-u[a].width),t.fillText(u[a].text,n,w),w-=u[a].height+4;t.restore()}}),Smart.Utilities.Assign("Plot",class{constructor(t){this.renderer=t}get(t,i,a){return a===void 0?t[i]:t[i][a]}min(t,a){let n=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),(isNaN(n)||i<n)&&(n=i);return n}max(t,a){let n=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),(isNaN(n)||i>n)&&(n=i);return n}sum(t,a){let n=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),isNaN(i)||(n+=i);return n}count(t,a){let n=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),isNaN(i)||n++;return n}avg(t,i){return this.sum(t,i)/Math.max(1,this.count(t,i))}filter(t,a){if(!a)return t;let n=[];for(let o=0;o<t.length;o++)a(t[o])&&n.push(t[o]);return n}scale(t,i,a,n){var o=Math.log,l=Math.min,r=Math.abs,s=Math.pow,d=Math.max;if(isNaN(t))return NaN;if((t<l(i.min,i.max)||t>d(i.min,i.max))&&(!n||!0!==n.ignore_range))return NaN;let m=NaN,c=1;if(i.type===void 0||"logarithmic"!==i.type){let a=r(i.max-i.min);a||(a=1),c=r(t-l(i.min,i.max))/a}else if("logarithmic"===i.type){let a=i.base;isNaN(a)&&(a=10);let n=l(i.min,i.max);0>=n&&(n=1);let m=d(i.min,i.max);0>=m&&(m=1);let u=o(m)/o(a);m=s(a,u);let p=o(n)/o(a);n=s(a,p);let g=o(t)/o(a);c=r(g-p)/(u-p)}if("logarithmic"===a.type){let t=a.base;isNaN(t)&&(t=10);let i=o(a.max)/o(t),n=o(a.min)/o(t);a.flip&&(c=1-c);let d=l(n,i)+c*r(i-n);m=s(t,d)}else m=l(a.min,a.max)+c*r(a.max-a.min),a.flip&&(m=d(a.min,a.max)-m+a.min);return m}axis(t,a,n){var o=Math.round,l=Math.floor,r=Math.pow;if(1>=n)return[a,t];(isNaN(n)||2>n)&&(n=2);let s=0;for(;o(t)!==t&&o(a)!==a&&10>s;)t*=10,a*=10,s++;let d=(a-t)/n;for(;10>s&&o(d)!==d;)t*=10,a*=10,d*=10,s++;let m=[1,2,5],c=0,u;for(;;){let t=c%m.length,i=l(c/m.length),a=r(10,i)*m[t];if(t=(c+1)%m.length,i=l((c+1)/m.length),u=r(10,i)*m[t],d>=a&&d<u)break;c++}let p=u,g=[],h=this.renderer._rnd(t,p,!1),_=0>=s?1:r(10,s);for(;h<a+p;)g.push(h/_),h+=p;return g}}),Smart.Utilities.Assign("DataExporter",class{constructor(t,i,a,n){const o=this;t||(t={}),o.style=t.style,o.header=t.header,o.exportHeader=t.exportHeader||!0,o.hierarchical=t.hierarchical,o.expandChar=t.expandChar||"+",o.collapseChar=t.collapseChar||"-",o.pageOrientation=t.pageOrientation,!o.hierarchical&&i&&0<i.length?o.groupBy=i:o.mergedCells=t.mergedCells,!o.groupBy&&a&&0<Object.keys(a).length&&(o.filterBy=a),n&&(o.conditionalFormatting=n),o.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}downloadFile(t,i,n){let o;if(o=t instanceof Blob?t:new Blob([t],{type:i}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,n);else{const t=document.createElement("a"),i=URL.createObjectURL(o);t.href=i,t.download=n,t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(i)},0)}}exportData(t,i,a){const n=this;return(n.actualHierarchy=n.hierarchical,i=i.toLowerCase(),n.exportHeader&&(n.header?(t=t.slice(0),0===t.length&&(n.actualHierarchy=!1),n.processComplexHeader(n.header,t,i)):1===t.length&&(n.actualHierarchy=!1)),0===t.length)?void console.warn("No data to export."):void("xlsx"===i&&(n.xlsxStartIndex=n.complexHeader?n.complexHeader.length:+n.exportHeader),n.actualHierarchy&&(t=n.processHierarchicalData(t,i)),n.getDatafields(t),a.slice(a.length-i.length-1,a.length)!=="."+i&&(a+="."+i),"csv"===i?n.exportToCSVAndTSV(t,{delimiter:", ",MIME:"text/csv",toRemove:2},a):"html"===i?n.exportToHTML(t,a):"json"===i?n.exportToJSON(t,a):"pdf"===i?n.exportToPDF(t,a):"tsv"===i?n.exportToCSVAndTSV(t,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},a):"xlsx"===i?n.exportToXLSX(t,a):"xml"===i?n.exportToXML(t,a):void 0,delete n.complexHeader)}exportToCSVAndTSV(t,a,i){const n=this,o=n.datafields;let l="";for(let r=0;r<t.length;r++){const i=t[r];let s="";for(let t=0;t<o.length;t++){if(n.actualHierarchy&&0==t){s+=("\"\""+a.delimiter).repeat(i._level-1)+"\""+i[o[t]]+"\""+a.delimiter+("\"\""+a.delimiter).repeat(n.maxLevel-i._level);continue}s+="\""+i[o[t]]+"\""+a.delimiter}s=s.slice(0,s.length-a.toRemove)+"\n",l+=s}this.downloadFile(l,a.MIME,i)}exportToHTML(t,i){const a=this,n=a.datafields,o=a.style;let l="",r=0;t=a.processGroupingInformation(t),a.data=t,a.exportHeader&&(l=a.getHTMLHeader(n,t),r=1);let s=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style type="text/css">
${a.getRowStyle()}${a.getColumnStyle()}
    </style>${a.toggleableFunctionality()}
</head>
<body>
    <table${a.getTableStyle()}>${l}
        <tbody>\n`;const d={},m={},c=[];a.getMergedCellsInfo(d,m);mainLoop:for(let l=r;l<t.length;l++){const i=t[l],u=l-r;let p=a.getAlternationIndex(u," rowN"),g="",h="",_="",f=0;if(a.actualHierarchy)i._collapsed&&(g=" collapsed"),h=` level="${i._level}"`;else if(a.groupBy)for(let t=0;t<a.groupBy.length;t++){const n=a.groupBy[t],o=i[n],r=a.groups[n][o];if(_+=o,-1===c.indexOf(_)){s+=`            <tr class="row">
                <td class="column group" style="padding-left: ${25*f}px;" colspan="${a.datafields.length}">${r}</td>
            </tr>`,c.push(_),l--;continue mainLoop}f++}let b=`            <tr class="row row${u}${p}${g}"${h}>\n`;for(let t=0;t<n.length;t++){const l=t+","+u;let r=1,s=1;if(d[l])r=d[l].colspan,s=d[l].rowspan;else if(m[l])continue;const c=n[t];let p=i[c],g="";if(a.actualHierarchy&&0==t){let t="";i._expanded?t=a.collapseChar:!1===i._expanded&&(t=a.expandChar),g=`<div class="toggle-element" style="margin-left: ${25*(i._level-1)+5}px;" expanded>${t}</div>`}p=a.getFormattedValue(p,c);let h="";if(o&&o.columns&&o.columns[c]&&o.columns[c][u]){const t=o.columns[c][u];h+=`border-color: ${t.border}; background-color: ${t.background}; color: ${t.color};"`}0==t&&1<f&&(h+=`padding-left: ${25*(f-1)}px;"`),h&&(h=` style="${h}"`),b+=`                <td class="column column${c}"${h} colspan="${r}" rowspan="${s}">${g+p}</td>\n`}s+=b+"            </tr>\n"}s+=`        </tbody>
    </table>
</body>
</html>`,this.downloadFile(s,"text/html",i)}getMergedCellsInfo(t,i,a){const n=this;if(n.mergedCells){const o=a&&0!==a[n.datafields.length-1];n.mergedCellsPDF=n.mergedCells.slice(0);for(let l=0;l<n.mergedCellsPDF.length;l++){const r=n.mergedCellsPDF[l];let s=r.colspan,d=r.rowspan;if(2>d&&2>s)continue;const m=r.cell[1];let c=r.cell[0];if(o&&1<s){const t=a[c],o=a[c+s-1],l=[];if(o>t){let i=t,r=c,u=0;mainLoop:for(let n=t;n<=o;n++){let t=r,n=0;for(;a[r]===i;)if(r++,u++,n++,u===s){l.push({start:t,span:n});break mainLoop}l.push({start:t,span:n}),i=a[r]}s=l[0].span;for(let t=1;t<l.length;t++)n.mergedCellsPDF.push({cell:[l[t].start,m],colspan:l[t].span,rowspan:d,originalCell:c})}}for(let a=c;a<c+s;a++)for(let n=m;n<m+d;n++){const o=a+","+n;if(a===c&&n===m){t[o]={colspan:s,rowspan:d,originalCell:r.originalCell};continue}i[o]=!0}}}}getAlternationIndex(t,i){const a=this;if(!a.style)return"";const n=a.style.rows,o=n&&n.alternationCount;return!o||n.alternationStart&&t<n.alternationStart||n.alternationEnd&&t>n.alternationEnd?"":i+t%n.alternationCount}getFormattedValue(t,i){const a=this,n=a.style;if(i&&n&&n.columns&&n.columns[i]&&n.columns[i].format){if("number"==typeof t)return a.formatNumber(t,n.columns[i].format);if(t instanceof Date)return a.formatDate(t,n.columns[i].format)}else if(t instanceof Date)return a.formatDate(t,"d");return t}exportToJSON(t,i){this.downloadFile(JSON.stringify(t,this.datafields.concat("rows")),"application/json",i)}exportToPDF(t,i){function a(){let t=[];for(let a=0;a<h.length;a++)t.push([]);return t}const o=this,l=o.datafields,r=+o.exportHeader,n=[],s={},d={},m={},c=r?o.complexHeader?o.complexHeader.length:1:0,u={pageOrientation:o.pageOrientation||"portrait"};let p=[],g=[],h;t=o.processGroupingInformation(t),o.data=t,o.headerRows=c,o.getPDFStyle();const _=o.styleInfo;h=_?o.wrapPDFColumns(u,m):[{body:p,datafields:l}],r&&(p=o.getPDFHeader(l,h,m)),o.getMergedCellsInfo(s,d,m);mainLoop:for(let c=r;c<t.length;c++){const i=t[c];let u="",p=0;if(o.groupBy)for(let t=0;t<o.groupBy.length;t++){const a=o.groupBy[t],l=i[a],r=o.groups[a][l];if(u+=l,-1===n.indexOf(u)){o.createGroupHeaderRow(h,{text:r,style:["row","cell","group"],marginLeft:7.5*p}),n.push(u),c--;continue mainLoop}p++}const g=a(),_=c-r;let f=o.getAlternationIndex(_,"");for(let t=0;t<l.length;t++){const a=l[t],n={style:["row","row"+_,"cell","cell"+a]},r=m[t]||0;if(void 0!==f&&n.style.splice(1,0,"rowN"+f),o.mergedCellsPDF){const i=t+","+_,a=s[i];if(a){if(n.colSpan=a.colspan,n.rowSpan=a.rowspan,void 0!==a.originalCell){n.text="",n.style[n.style.length-1]="cell"+l[a.originalCell],g[r].push(n);continue}}else if(d[i]){g[r].push({});continue}}const c=o.getFormattedValue(i[a],a);n.text=c.toString(),o.getUniqueStylePDF(n,a,_),o.setIndentation(n,{j:t,currentRecord:i,value:c,outlineLevel:p}),g[r].push(n)}for(let t=0;t<h.length;t++)h[t].body.push(g[t])}if(_){for(let t=0;t<h.length;t++){const i=h[t].body;for(let a=c-1;0<=a;a--)i.unshift(p[t][a]);g.push({table:{headerRows:c,widths:h[t].widths,heights:function(t){return _.heights[t]?_.heights[t]:_.defaultHeight?_.defaultHeight:void 0},body:i},pageBreak:"after"})}delete g[h.length-1].pageBreak,u.styles=_.styles}else{const t=h[0].body;for(let i=c-1;0<=i;i--)t.unshift(p[0][i]);g=[{table:{headerRows:c,body:t}}],u.styles={header:{bold:!0},group:{bold:!0}}}u.content=g,pdfMake.createPdf(u).download(i),delete o.mergedCellsPDF,delete o.styleInfo}getPDFStyle(){function t(t,i){if(t)for(let o in t)if(t.hasOwnProperty(o))if(void 0!==n[o])for(let n in t[o]){if(!isNaN(n)||!t[o].hasOwnProperty(n))continue;const l=t[o][n],r=a.datafields.indexOf(o);"width"==n&&"*"===s.widths[r]?s.widths[r]=parseFloat(l):a.storePDFStyle({prop:n,value:l,toUpdate:i+o})}else if("height"==o&&"header"===i)for(let n=0;n<a.headerRows;n++)s.heights[n]=parseInt(t[o],10)/a.headerRows/1.57;else a.storePDFStyle({prop:o,value:t[o],toUpdate:i})}const a=this,i=a.style;if(!i)return"";const n=a.data[0],o=i.header,l=i.columns,r=i.rows,s={heights:[],widths:Array(a.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};if(a.styleInfo=s,t(o,"header"),t(l,"cell"),!!r){for(let t in r){if(!r.hasOwnProperty(t)||-1!==t.indexOf("alt"))continue;const i=r[t];if(!isNaN(t)){for(let n in i)i.hasOwnProperty(n)&&("height"==n?s.heights[parseFloat(t)+a.headerRows]=parseFloat(i[n])/1.57:a.storePDFStyle({prop:n,value:i[n],toUpdate:"row"+t}));continue}"height"==t?s.defaultHeight=parseFloat(i)/1.57:a.storePDFStyle({prop:t,value:i,toUpdate:"row"})}if(r.alternationCount)for(let t=0;t<r.alternationCount;t++){const i={};r[`alternationIndex${t}Color`]&&(i.color=r[`alternationIndex${t}Color`]),r[`alternationIndex${t}BackgroundColor`]&&(i.fillColor=r[`alternationIndex${t}BackgroundColor`]),s.styles["rowN"+t]=i}}}storePDFStyle(t){const i=this;let a=i.styleInfo.styles[t.toUpdate];a||(a={},i.styleInfo.styles[t.toUpdate]=a);let n=t.value;switch(t.prop){case"backgroundColor":a.fillColor=n;break;case"color":a.color=n;break;case"fontSize":a.fontSize=parseFloat(n);break;case"fontStyle":"italic"===n&&(a.italics=!0);break;case"fontWeight":"bold"===n&&(a.bold=!0);break;case"textAlign":a.alignment=n;}}wrapPDFColumns(t,a){const n=this,o=this.styleInfo,l="portrait"===t.pageOrientation?775:1155,r=[];let s=0;for(let d=0;d<o.widths.length;d++){let t=o.widths[d],i=t;if("*"===t?i=150:t>=l?(i=l,t="*"):t/=1.57,void 0===r[s]){r[s]={body:[],width:i,widths:[t],datafields:[n.datafields[d]]},a[d]=s;continue}const m=r[s];if(m.width+i>l){s++,d--;continue}a[d]=s,m.width+=i,m.widths.push(t),m.datafields.push(n.datafields[d])}return r}getPDFHeader(t,a,n){function o(t,i,a){for(let n=0;n<r;n++){const o=t[n],l=[];for(let i=0;i<o.length;i++){const s=o[i];let d=1,m=1;if(o[i-1]&&o[i-1]===s||t[n-1]&&t[n-1][i]===s){l.push({});continue}let c=i+1;for(;o[c]&&o[c]===o[c-1];)d++,c++;for(c=n+1;t[c]&&t[c][i]===s;)m++,c++;const u=n==r-1||m+n===r?a.datafields[i]:null,p={text:s,colSpan:d,rowSpan:m};u?p.style=["header","header"+u]:(p.alignment="center",p.style="header"),l.push(p)}i.push(l)}}const i=this,l=[],r=i.headerRows,s=i.complexHeader?i.complexHeader:[Object.values(i.data[0])],d=[];let m=[];for(let o=0;o<r;o++){const t=s[o];for(let i=0,a;i<t.length;i++)a=n[i]||0,d[a]||(d[a]=[]),d[a][o]||(d[a][o]=[]),d[a][o].push(t[i])}for(let r=0;r<a.length;r++)m=[],o(d[r],m,a[r]),l.push(m);return l}createGroupHeaderRow(t,a){for(let n=0;n<t.length;n++){const i=Object.assign({},a),o=t[n].datafields.length,l=[i];i.colSpan=o,l.length=o,l.fill({},1,o-1),t[n].body.push(l)}}getUniqueStylePDF(t,i,a){function n(t){const i=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,"")),a=parseFloat(i[1]).toString(16).toUpperCase(),n=parseFloat(i[2]).toString(16).toUpperCase(),o=parseFloat(i[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-a.length)+a+"0".repeat(2-n.length)+n+"0".repeat(2-o.length)+o}const o=this.style;if(o&&o.columns&&o.columns[i]){const l=o.columns[i][a];l&&(t.fillColor=n(l.background),t.color=l.color.toLowerCase())}}setIndentation(t,i){if(0===i.j){const a=this;if(a.actualHierarchy){const n=i.currentRecord;void 0===n._expanded?t.marginLeft=25*(n._level-1)+6:(t.marginLeft=25*(n._level-1),t.text=a.collapseChar+" "+i.value)}else 1<i.outlineLevel&&(t.marginLeft=7.5*(i.outlineLevel-1))}}exportToXLSX(t,i){const a=this;let n=a.style;if(t=a.processGroupingInformation(t,!0),a.data=t,a.getColumnsArray(),a.complexHeaderMergedCells=[],a.complexHeaderMergeInfo)for(let t in a.complexHeaderMergeInfo)if(a.complexHeaderMergeInfo.hasOwnProperty(t)){const i=a.complexHeaderMergeInfo[t];if(i.from[0]===i.to[0]&&i.from[1]===i.to[1])continue;a.complexHeaderMergedCells.push({from:a.columnsArray[i.from[1]]+(i.from[0]+1),to:a.columnsArray[i.to[1]]+(i.to[0]+1)})}a.getConditionalFormatting(),n||(n=a.generateDefaultStyle(t));const o=a.generateSharedStrings(t),l=o.collection,r=o.xml,s=a.generateStyles(n),d=a.groupBy?a.generateSheet1WithGrouping(t,l):a.generateSheet1(t,l),m=a.generateAuxiliaryFiles(),c=new JSZip,u=c.folder("_rels"),p=c.folder("docProps"),g=c.folder("xl"),h=g.folder("_rels"),_=g.folder("theme"),f=g.folder("worksheets");u.file(".rels",m._relsRels),p.file("app.xml",m.docPropsAppXml),p.file("core.xml",m.docPropsCoreXml),h.file("workbook.xml.rels",m.xl_relsWorkbookXmlRels),_.file("theme1.xml",m.xlThemeTheme1Xml),f.file("sheet1.xml",d),g.file("sharedStrings.xml",r),g.file("styles.xml",s),g.file("workbook.xml",m.xlWorkbookXml),c.file("[Content_Types].xml",m.Content_TypesXml),c.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then(function(t){a.downloadFile(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",i)}),delete a.conditionalFormattingXLSX,delete a.complexHeaderMergeInfo,delete a.defaultRowHeight,delete a.rowHeight}processGroupingInformation(t,i){const a=this;if(!a.groupBy)return t;let n;return t=t.slice(0),a.exportHeader&&(i&&a.complexHeader?(n=t.slice(0,a.complexHeader.length),t.splice(0,a.complexHeader.length)):(n=[t[0]],t.splice(0,1))),1<t.length&&sortByMultipleColumns(t,a.groupBy),n&&(t=n.concat(t)),a.getGroupLabels(t),t}exportToXML(t,i){function a(t,o){let l="";for(let r=0;r<t.length;r++){const i=t[r];l+=o+"<row>\n";for(let t=0;t<n.length;t++){const r=n[t];if("rows"===r){if(!i.rows)continue;l+=`${o}    <rows>\n${a(i.rows,o+"        ")}${o}    </rows>\n`;continue}l+=o+`    <${r}>${i[r]}</${r}>\n`}l+=o+"</row>\n"}return l}const n=this.datafields.slice(0);let o="<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<table>\n";-1===n.indexOf("rows")&&n.push("rows"),o+=a(t,"    ")+"</table>",this.downloadFile(o,"application/xml",i)}formatDate(t,i){if(!Smart.Utilities.DateTime)return t;try{return new Smart.Utilities.DateTime(t).toString(i)}catch(i){return t}}formatNumber(t,i){if(!Smart.Utilities.NumberRenderer)return t;const a=new Smart.Utilities.NumberRenderer,n=a.formatNumber(t,i);return void 0===n?t:n}generateAuxiliaryFiles(){const t=new Date().toISOString();return{_relsRels:"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>",docPropsAppXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>`,docPropsCoreXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${t}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${t}</dcterms:modified></cp:coreProperties>`,xl_relsWorkbookXmlRels:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>`,xlThemeTheme1Xml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック Light"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线 Light"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>`,xlWorkbookXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:\Users\jqwidgets\Desktop\" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>`,Content_TypesXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>`}}generateDefaultStyle(t){const i=this,a={},n=i.datafields,o=i.complexHeader?t[i.complexHeader.length]:t[+i.exportHeader];if(!o)return a;for(let l=0;l<n.length;l++){const t=o[n[l]];t instanceof Date&&(!a.columns&&(a.columns=[]),a.columns[n[l]]={format:"d"})}return a}generateGroupRow(t){const i=t.rowNumber,a="A"+i,n=`        <row r="${i}" outlineLevel="${t.outlineLevel}" spans="1:${t.numberOfColumns}"${this.getCustomRowHeight(i-1)} x14ac:dyDescent="0.45">
            <c r="${a}" t="s">
                <v>${t.sharedStringIndex}</v>
            </c>
        </row>\n`;return t.mergedCells.push({from:a,to:this.columnsArray[t.numberOfColumns-1]+i}),n}generateSharedStrings(t){function a(t){r++,-1===o.indexOf(t)&&(s++,o.push(t),l+=`<si><t>${t}</t></si>`)}const n=this,i=n.datafields,o=[];let l="",r=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];for(let t=0,n;t<i.length;t++)(n=o[i[t]],"string"==typeof n)&&a(n)}if(n.groupLabels)for(let t=0;t<n.groupLabels.length;t++)a(n.groupLabels[t]);return l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${r}" uniqueCount="${s}">${l}</sst>`,{collection:o,xml:l}}generateSheet1(t,i){function a(t,i){return n.columnsArray[t]+i}const n=this,o=n.columnsArray.length,l=t.length,r=n.columnsArray[o-1]+l,d=n.datafields,s=n.getFilters(),m=[].concat(n.complexHeaderMergedCells);let c=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <sheetPr filterMode="${""!==s}" />
    <dimension ref="A1:${r}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${n.getCustomColumnWidths()}
    <sheetData>\n`;for(let l=0;l<=t.length;l++){const r=t[l],m=l+1;let s="";if(n.actualHierarchy){const i=t[l-1];i&&i._collapsed&&(!r||i._level>r._level)&&(s=" collapsed=\"true\"")}if(l===t.length){s&&(c+=`        <row r="${m}" outlineLevel="${Math.max(t[l-1]._level-2,0)}" hidden="false" collapsed="true" />\n`);break}let u=`        <row r="${m}"${n.getOutlineLevel(r)} hidden="${r._hidden||r._collapsed||!1}"${s} spans="1:${o}"${n.getCustomRowHeight(m-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const o=n.getXLSXCellStyle(a(t,m));u+=n.getActualCellData(r[d[t]],{r:a(t,m),s:o},i)}u+="        </row>\n",c+=u}return c+=`    </sheetData>${n.conditionalFormattingXLSX.conditions}${s}${n.getMergedCells(m)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,c}generateSheet1WithGrouping(t,a){function n(t,i){return o.columnsArray[t]+i}const o=this,l=o.columnsArray.length,i=t.length,r=o.columnsArray[l-1]+i,d=o.datafields,s=[].concat(o.complexHeaderMergedCells);let m=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <dimension ref="A1:${r}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${o.getCustomColumnWidths()}
    <sheetData>\n`,c=0,u=[];mainLoop:for(let r=0;r<t.length;r++){const i=t[r],p=r+1+c;let g=0,h="";if(!o.exportHeader||!o.complexHeader&&0!=r||o.complexHeader&&r>=o.complexHeader.length){let t="";for(let n=0;n<o.groupBy.length;n++){const d=o.groupBy[n],h=i[d],_=o.groups[d][h];if(t+=h,-1===u.indexOf(t)){let i=a.indexOf(_);m+=o.generateGroupRow({rowNumber:p,outlineLevel:g,numberOfColumns:l,sharedStringIndex:i,mergedCells:s}),u.push(t),r--,c++;continue mainLoop}g++}h=` outlineLevel="${g}"`}let _=`        <row r="${p}"${h} spans="1:${l}"${o.getCustomRowHeight(p-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const l=o.getXLSXCellStyle(n(t,r+1));_+=o.getActualCellData(i[d[t]],{r:n(t,p),s:l},a)}_+="        </row>\n",m+=_}return m+=`    </sheetData>${o.getMergedCells(s)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,m}getActualCellData(t,i,a){const n=i.r,o=i.s;if("string"==typeof t)return`            <c r="${n}" t="s"${o}>
                <v>${a.indexOf(t)}</v>
            </c>\n`;if("boolean"==typeof t)return`            <c r="${n}" t="b"${o}>
                <v>${+t}</v>
            </c>\n`;if(t instanceof Date){const i=(t.getTime()+this.timeBetween1900And1970)/864e5+2;return`            <c r="${n}"${o}>
                <v>${i}</v>
            </c>\n`}return`            <c r="${n}"${o}>
                <v>${t}</v>
            </c>\n`}getColumnsArray(){function t(t){return 26>t?"":a(64+Math.floor(t/26))}var a=String.fromCharCode;const i=this,n=i.datafields.length,o=[];for(let l=0;l<n;l++)o.push(t(l)+a(65+(26>l?l:l%26)));i.columnsArray=o}getColumnStyle(){const t=this,i=t.style;if(!i)return`        .header { border: 1px solid black; padding: 5px; }
        .column { border: 1px solid black; padding: 5px; }
        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }`;const a={header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "},n=t.data[0];let o="";const l=i.header||{};for(let i in l){if(!l.hasOwnProperty(i))continue;const o=l[i];if(n[i]){for(let t in a["header"+i]||(a["header"+i]=""),o)if(o.hasOwnProperty(t)){const n=Smart.Utilities.Core.toDash(t)+": "+o[t]+"; ";a["header"+i]+=n,"width"==t&&(!a["column"+i]&&(a["column"+i]=""),a["column"+i]+=n)}continue}a.header+="height"==i&&t.complexHeader?"height: "+parseInt(l[i],10)/t.complexHeader.length+"px; ":Smart.Utilities.Core.toDash(i)+": "+l[i]+"; "}const r=i.columns||{};for(let t in r){if(!r.hasOwnProperty(t))continue;const i=r[t];if(n[t]){for(let n in a["column"+t]||(a["column"+t]=""),i)isNaN(n)&&i.hasOwnProperty(n)&&"format"!=n&&(a["column"+t]+=Smart.Utilities.Core.toDash(n)+": "+i[n]+"; ");continue}a.column+=Smart.Utilities.Core.toDash(t)+": "+i+"; "}for(let t in a)a.hasOwnProperty(t)&&(o+=`        .${t} { ${a[t]}}\n`);return o}getCustomColumnWidths(){const t=this;if(!t.style||!t.columnWidth||0===t.columnWidth.length)return"";let a="\n    <cols>\n";for(let n=0,i;n<t.columnWidth.length;n++)i=t.columnWidth[n],void 0!==i&&(i=Math.round(parseFloat(i))/11,a+=`        <col min="${n+1}" max="${n+1}" width="${i}" customWidth="1" />\n`);return a+="    </cols>",a}getCustomFilter(t,i){let a="equal",n;return t instanceof Date&&(t=(t.getTime()+this.timeBetween1900And1970)/864e5+2),i=i.toUpperCase(),("EMPTY"===i?n="":"NOT_EMPTY"===i?(n="",a="notEqual"):"CONTAINS"===i||"CONTAINS_CASE_SENSITIVE"===i?n=`*${t}*`:"DOES_NOT_CONTAIN"===i||"DOES_NOT_CONTAIN_CASE_SENSITIVE"===i?(n=`*${t}*`,a="notEqual"):"STARTS_WITH"===i||"STARTS_WITH_CASE_SENSITIVE"===i?n=`${t}*`:"ENDS_WITH"===i||"ENDS_WITH_CASE_SENSITIVE"===i?n=`*${t}`:"EQUAL"===i||"EQUAL_CASE_SENSITIVE"===i?n=t:"NULL"===i?n=null:"NOT_NULL"===i?(n=null,a="notEqual"):"NOT_EQUAL"===i?(n=t,a="notEqual"):"LESS_THAN"===i?(n=t,a="lessThan"):"LESS_THAN_OR_EQUAL"===i?(n=t,a="lessThanOrEqual"):"GREATER_THAN"===i?(n=t,a="greaterThan"):"GREATER_THAN_OR_EQUAL"===i?(n=t,a="greaterThanOrEqual"):void 0,`                <customFilter val="${n}" operator="${a}"/>\n`)}getCustomRowHeight(t){const i=this;return i.style?i.rowHeight[t]||i.defaultRowHeight||"":""}getDatafields(t){const i=this,a=t[0],n=[];for(let i in a)a.hasOwnProperty(i)&&"_"!==i.charAt(0)&&n.push(i);i.datafields=n}getFilters(){const t=this,i=t.filterBy;if(!i)return"";let a="";for(let n in i)if(i.hasOwnProperty(n)){const o=t.datafields.indexOf(n);if(-1===o)continue;const l=i[n],r=l.filters;a+=`        <filterColumn colId="${o}">
            <customFilters and="${!l.operator}">\n`;for(let n=0;n<r.length;n++)a+=t.getCustomFilter(r[n].value,r[n].condition);a+=`            </customFilters>
        </filterColumn>`}return a?(a=`\n    <autoFilter ref="A1:${t.columnsArray[t.columnsArray.length-1]+t.data.length}">\n${a}\n    </autoFilter>`,a):""}getGroupLabels(t){const i=this,a=i.xlsxStartIndex===void 0?+i.exportHeader:i.xlsxStartIndex,n={},o=[];for(let l=a;l<t.length;l++){const r=t[l];for(let l=0;l<i.groupBy.length;l++){const s=i.groupBy[l],d=r[s];let m=n[s];m===void 0&&(n[s]={},m=n[s]),m[d]===void 0&&(m[d]=(i.exportHeader?t[a-1][s]:s)+": "+d,o.push(m[d]))}}i.groups=n,i.groupLabels=o}getHTMLHeader(t,i){const a=this;let n="\n        <thead>\n";if(!a.complexHeader){n+="            <tr>\n";for(let a=0;a<t.length;a++){const o=t[a];n+=`                <th class="header header${o}">${i[0][o]}</th>\n`}return n+="            </tr>\n        </thead>",n}for(let o=0;o<a.complexHeader.length;o++){const i=a.complexHeader[o];n+="            <tr>\n";for(let l=0;l<i.length;l++){const r=i[l];let s=1,d=1;if(i[l-1]&&i[l-1]===r||a.complexHeader[o-1]&&a.complexHeader[o-1][l]===r)continue;let m=l+1;for(;i[m]&&i[m]===i[m-1];)s++,m++;for(m=o+1;a.complexHeader[m]&&a.complexHeader[m][l]===r;)d++,m++;const c=o==a.complexHeader.length-1||d+o===a.complexHeader.length?" header"+t[l]:"";n+=`                <th class="header${c}" colspan="${s}" rowspan="${d}">${r}</th>\n`}n+="            </tr>\n"}return n+="        </thead>",n}getConditionalFormatting(){const t=this,a=t.conditionalFormatting;if(!a)return void(t.conditionalFormattingXLSX={conditions:"",styles:""});const n=[];let o="",i="";for(let l=a.length-1;0<=l;l--){const r=a[l],s=t.columnsArray[t.datafields.indexOf(r.column)],d=s+(t.xlsxStartIndex+1),m=d+":"+s+t.data.length,c=r.background+r.color,u=t.getConditionalAttributes(r,d);let p=n.indexOf(c);if(-1===p){const a=`        <dxf>
            <font>
                <b val="0"/>
                <i val="0"/>
                <color rgb="${"White"===r.color?"FFFFFFFF":"FF000000"}"/>
                <sz val="10"/>
            </font>
            <fill>
                <patternFill>
                    <bgColor rgb="${t.toARGB(r.background)}"/>
                </patternFill>
            </fill>
        </dxf>\n`;i+=a,p=n.length,n.push(c)}o+=`    <conditionalFormatting sqref="${m}">
        <cfRule dxfId="${p}" text="${u.text}" rank="${u.rank}" percent="${u.percent}" bottom="${u.bottom}" equalAverage="${u.equalAverage}" aboveAverage="${u.aboveAverage}"${u.operator}${u.timePeriod} priority="${l+2}" type="${u.type}">
${u.formula}        </cfRule>
    </conditionalFormatting>\n`}i=`    <dxfs count="${n.length}">\n${i}    </dxfs>`,t.conditionalFormattingXLSX={conditions:o,styles:i}}getConditionalAttributes(t,i){let a=t.condition,n=t.comparator,o="",l=0,r=0,s=0,d=0,m="",c="",u="",p="";return"equal"===a?(m="equal",u="cellIs",p=`            <formula>${n}</formula>\n`):"lessThan"===a?(m="lessThan",u="cellIs",p=`            <formula>${n}</formula>\n`):"greaterThan"===a?(m="greaterThan",u="cellIs",p=`            <formula>${n}</formula>\n`):"notEqual"===a?(m="notEqual",u="cellIs",p=`            <formula>${n}</formula>\n`):"between"===a?(m="between",u="cellIs",p=`            <formula>${t.min}</formula>
            <formula>${t.max}</formula>\n`):"duplicate"===a?(u="duplicateValues",p=`            <formula>0</formula>\n`):"topNItems"===a?(l=n,u="top10"):"bottomNItems"===a?(l=n,s=1,u="top10"):"topNPercent"===a?(l=n,r=1,u="top10"):"bottomNPercent"===a?(l=n,r=1,s=1,u="top10"):"aboveAverage"===a?(d=1,u="aboveAverage",p=`            <formula>0</formula>\n`):"belowAverage"===a?(u="aboveAverage",p=`            <formula>0</formula>\n`):"contains"===a?(o=n,m="containsText",u="containsText",p=`            <formula>NOT(ISERROR(SEARCH("${n}",${i})))</formula>\n`):"doesNotContain"===a?(o=n,m="notContains",u="notContainsText",p=`            <formula>ISERROR(SEARCH("${n}",${i}))</formula>\n`):"dateOccur"===a?(c=` timePeriod="${n}"`,u="timePeriod"):void 0,m&&(m=` operator="${m}" `),{text:o,rank:l,percent:r,bottom:s,equalAverage:0,aboveAverage:d,operator:m,timePeriod:c,type:u,formula:p}}getMergedCells(t){const a=this;let n="";for(let a=0;a<t.length;a++)t[a].from!==t[a].to&&(n+=`\n        <mergeCell ref="${t[a].from}:${t[a].to}" />\n`);if(a.mergedCells)for(let t=0;t<a.mergedCells.length;t++){const i=a.mergedCells[t];if(2>i.rowspan&&2>i.colspan)continue;const o=a.columnsArray[i.cell[0]]+(i.cell[1]+a.xlsxStartIndex+1),l=a.columnsArray[i.cell[0]+i.colspan-1]+(i.cell[1]+a.xlsxStartIndex+i.rowspan);n+=`\n        <mergeCell ref="${o}:${l}" />\n`}return n&&(n=`\n    <mergeCells count="${t.length}">${n}    </mergeCells>`),n}getNumFmtIndex(t,i){let a=i.collection.indexOf(t);return-1===a?(a=i.collection.length+100,i.collection.push(t),i.xml+=`<numFmt numFmtId="${a}" formatCode="${t}"/>`):a+=100,a}getOutlineLevel(t){return this.actualHierarchy&&1!==t._level?` outlineLevel="${t._level-1}"`:""}getRowStyle(){const t=this,i=t.style;if(!i)return"";const a=i.rows;if(!a)return"";const n={row:""};let o="";for(let t in a){if(!a.hasOwnProperty(t)||"alternationCount"==t||"alternationStart"==t||"alternationEnd"==t)continue;const o=a[t];if(-1!==t.indexOf("alt")){const a=t.slice(16,17),i=t.slice(17);n["rowN"+a]||(n["rowN"+a]=""),n["rowN"+a]+="Color"===i?"color : "+o+"; ":"BorderColor"===i?"border-color : "+o+"; ":"background-color : "+o+"; ";continue}if(!isNaN(t)){for(let i in n["row"+t]||(n["row"+t]=""),o)o.hasOwnProperty(i)&&(n["row"+t]+=Smart.Utilities.Core.toDash(i)+": "+o[i]+"; ");continue}n.row+=Smart.Utilities.Core.toDash(t)+": "+a[t]+"; "}let l=Object.keys(n);l.sort(function(t,i){if("row"===t)return-1;if("row"===i)return 1;const a=!isNaN(t.slice(3)),n=!isNaN(i.slice(3));return a&&!n?1:!a&&n?-1:+(t<i)});for(let t=0;t<l.length;t++)o+=`        .${l[t]} { ${n[l[t]]}}\n`;return o}getTableStyle(){const t=this,i=t.style;if(!i)return" style=\"table-layout: fixed; border: 1px solid black; border-collapse: collapse;\"";let a="table-layout: fixed; ";for(let t in i)i.hasOwnProperty(t)&&-1===["header","columns","rows"].indexOf(t)&&(a+=Smart.Utilities.Core.toDash(t)+": "+i[t]+"; ");return a&&(a=" style=\""+a+"\""),a}getXLSXCellStyle(t){const i=this;return void 0===i.cellStyleMapping[t]?"":` s="${i.cellStyleMapping[t]}"`}getXLSXFormat(t,i){if("number"==typeof i){let i=parseFloat(t.slice(1))||0,a=0<i?"."+"0".repeat(i):"";return t=t.slice(0,1),"C"===t||"c"===t?"$#,0"+a:"D"===t||"d"===t?i?"0".repeat(i):"0":"E"===t||"e"===t?"0"+a+t+"000":"F"===t||"f"===t?"0"+a:"N"===t||"n"===t?"#,0"+a:"P"===t||"p"===t?"#,0"+a+" %":void 0}return i instanceof Date?"d"===t?"m/d/yyyy":"D"===t?"nnnnmmmm dd, yyyy":"t"===t?"h:m AM/PM":"T"===t?"h:mm:ss AM/PM":"f"===t?"nnnnmmmm dd, yyyy h:m AM/PM":"F"===t?"nnnnmmmm dd, yyyy h:mm:ss AM/PM":"M"===t?"mmmm d":"Y"===t?"yyyy mmmm":"FP"===t||"PP"===t?"yyyy-mm-dd hh:mm:ss":"FT"===t||"PT"===t?"hh:mm:ss":(t=t.replace(/f|u|n|p|e|a|x|o/gi,""),t=t.replace(/tt/gi,"AM/PM"),t=t.replace(/:{2,}|:\s|:$|\.$/g,""),t=t.trim(),t):void 0}processColumnStyle(t){const a=this,n=t.header,o=t.columns,i=a.data[0],l=a.xlsxStartIndex;if(a.columnWidth=[],l&&n)for(let t=0;t<a.columnsArray.length;t++){const o=a.columnsArray[t],r=o+l,s=n[a.datafields[t]];for(let t in n)if(n.hasOwnProperty(t)&&void 0===i[t])if(a.complexHeader){for(let i=0;i<a.complexHeader.length;i++)if("height"==t){a.rowHeight[i]=` ht="${parseFloat(n.height)/a.complexHeader.length/2}"`;continue}else a.storeCellStyle(o+(i+1),t,n[t]);}else{if("height"==t){a.rowHeight[0]=` ht="${parseFloat(n.height)/2}"`;continue}a.storeCellStyle(r,t,n[t])}if(s)for(let i in s)if(s.hasOwnProperty(i)){if("width"==i){a.columnWidth[t]=s.width;continue}a.storeCellStyle(r,i,s[i])}}else if(n)for(let t=0;t<a.columnsArray.length;t++){const i=n[a.datafields[t]];i&&void 0!==i.width&&(a.columnWidth[t]=i.width)}if(!o)return"";for(let n=l;n<a.data.length;n++)for(let t=0;t<a.columnsArray.length;t++){const l=a.columnsArray[t],r=l+(n+1),s=a.datafields[t],d=o[s];for(let t in o)o.hasOwnProperty(t)&&void 0===i[t]&&a.storeCellStyle(r,t,o[t]);if(d)for(let t in d)isNaN(t)&&d.hasOwnProperty(t)&&a.storeCellStyle(r,t,d[t],a.data[n][s])}}processComplexHeader(t,a,n){function i(a){for(let n=0;n<t.columngroups.length;n++){const i=t.columngroups[n];if(i.name===a)return i}}function o(t){for(const a=[];t;)if(a.unshift(t.label),t.parentGroup)t=i(t.parentGroup);else return a}const l=this,r={},s=-1!==["html","pdf","xlsx"].indexOf(n)&&t.columngroups,d=[],m={},c=[];let u=0;if(s){for(let a=0;a<t.columngroups.length;a++){const i=t.columngroups[a],n=o(i);m[i.name]=n,u=Math.max(u,n.length)}u++;for(let t=0;t<u;t++)c[t]=[]}for(let o=0;o<t.columns.length;o++){const i=t.columns[o];if(r[i.dataField]=i.label,!s)continue;if(d[o]=i.dataField,c[u-1][o]=i.label,!i.columnGroup)continue;const a=m[i.columnGroup];for(let t=0;t<a.length;t++)c[t][o]=a[t]}if(1<c.length){const t=Object.keys(r).length;for(let o=0;o<u-1;o++){const i={};for(let a=0;a<t;a++){if(void 0===c[o][a]){let t=o+1;for(;void 0===c[t][a];)t++;c[o][a]=c[t][a]}i[d[a]]=c[o][a]}"xlsx"===n&&a.splice(o,0,i)}if(l.complexHeader=c,"xlsx"!==n)a.unshift(r);else{a.splice(u-1,0,r);const n={};for(let a=0;a<u;a++)for(let i=0;i<t;i++){const t=c[a][i];n[t]?n[t].to=[a,i]:(n[t]={from:[a,i]},n[t].to=n[t].from)}l.complexHeaderMergeInfo=n}}else a.unshift(r)}processHierarchicalData(t,a){function n(t,a,o){const l=s[t];if(m=i(m,a),void 0!==l)for(let t=0;t<l.length;t++){const i=l[t],r=i._keyDataField;i._collapsed=o,i._level=a,d.push(i),s[r]&&(c=!0,i._expanded=void 0===i._expanded||i._expanded,n(r,a+1,o||!i._expanded))}}function o(t,n,l){const r=s[t];if(m=i(m,n),void 0!==r)for(let t=0;t<r.length;t++){const i=r[t],d=i._keyDataField;let m;if("json"===a)for(let t in m={},i)i.hasOwnProperty(t)&&"_"!==t.charAt(0)&&(m[t]=i[t]);else m=Object.assign({},i);l.push(m),s[d]&&(c=!0,m.rows=[],o(d,n+1,m.rows))}}var i=Math.max;const l=this,r="xlsx"===a?l.xlsxStartIndex:+l.exportHeader,s={},d=[];let m=0,c=!1;if(void 0===t[r]._keyDataField)return l.processNestedData(t,a,r);for(let n=r;n<t.length;n++){const i=Object.assign({},t[n]),a=i._parentDataField;void 0===s[a]?s[a]=[i]:s[a].push(i)}if(r)for(let n=0;n<r;n++)d.push(Object.assign({},t[n])),-1===["json","pdf","xml"].indexOf(a)&&(d[n]._level=1);return"json"!==a&&"xml"!==a?n(null,1,!1):o(null,1,d),c||(l.actualHierarchy=!1),l.maxLevel=m,d}processNestedData(t,a,n){function o(t,a,n,l){d=i(d,n);for(let r=t;r<a.length;r++){const t=Object.assign({},a[r]);t._collapsed=l,t._level=n,s.push(t),t.children&&0<t.children.length&&(m=!0,t._expanded=void 0===t._expanded||t._expanded,o(0,t.children,n+1,l||!t._expanded)),delete t.children}}function l(t,a,n,o){d=i(d,o);for(let r=t;r<a.length;r++){const t=Object.assign({},a[r]);1===o?s[r]=t:n[r]=t,t.children&&0<t.children.length&&(m=!0,t.rows=[],l(0,t.children,t.rows,o+1)),delete t.children}}var i=Math.max;const r=this,s=[];let d=0,m=!1;if(n)for(let o=0;o<n;o++)s.push(Object.assign({},t[o])),-1===["json","pdf","xml"].indexOf(a)&&(s[o]._level=1);return"json"!==a&&"xml"!==a?o(n,t,1,!1):l(n,t,void 0,1),m||(r.actualHierarchy=!1),r.maxLevel=d,s}processRowStyle(t){function a(t,i,a){for(let o=0;o<n.columnsArray.length;o++){const r=n.columnsArray[o]+(t+1+l);n.storeCellStyle(r,i,a)}}const n=this,o=t.rows;if(n.rowHeight=[],!o)return;const l=n.xlsxStartIndex;o.height&&(n.defaultRowHeight=` ht="${parseFloat(o.height)/2}"`);for(let r=l;r<n.data.length;r++){const t=r-l;for(let i in o)o.hasOwnProperty(i)&&-1===i.indexOf("alt")&&isNaN(i)&&"height"!=i&&a(t,i,o[i]);if(o.alternationCount&&!(o.alternationStart&&t<o.alternationStart)&&!(o.alternationEnd&&t>o.alternationEnd)){const n=o.alternationStart||0,l=(t-n)%o.alternationCount;o[`alternationIndex${l}Color`]&&a(t,"color",o[`alternationIndex${l}Color`]),o[`alternationIndex${l}BorderColor`]&&a(t,"borderColor",o[`alternationIndex${l}BorderColor`]),o[`alternationIndex${l}BackgroundColor`]&&a(t,"backgroundColor",o[`alternationIndex${l}BackgroundColor`])}if(o[t])for(let i in o[t])if(o[t].hasOwnProperty(i)){if("height"==i){n.rowHeight[r]=` ht="${parseFloat(o[t].height)/2}"`;continue}a(t,i,o[t][i])}}}storeCellStyle(t,i,a){const n=this,o=n.styleMap[t];switch(i){case"backgroundColor":o.fills.fgColor=a;break;case"color":o.fonts.color=a;break;case"fontFamily":o.fonts.name=a;break;case"fontSize":o.fonts.sz=parseFloat(a);break;case"fontStyle":"italic"===a?o.fonts.i=!0:delete o.fonts.i;break;case"fontWeight":"bold"===a?o.fonts.b=!0:delete o.fonts.b;break;case"numFmt":{o.numFmt=a;break}case"textAlign":o.alignment.horizontal=a;break;case"textDecoration":"underline"===a?o.fonts.u=!0:delete o.fonts.u;break;case"verticalAlign":"middle"===a&&(a="center"),o.alignment.vertical=a;}}toARGB(t){t=t.replace(/\s/g,"");const i=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(t);if(null!==i){const t=parseFloat(i[1]).toString(16).toUpperCase(),a=parseFloat(i[2]).toString(16).toUpperCase(),n=parseFloat(i[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-t.length)+t+"0".repeat(2-a.length)+a+"0".repeat(2-n.length)+n}const n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t);if(null!==n){const t=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),i=parseFloat(n[1]).toString(16).toUpperCase(),a=parseFloat(n[2]).toString(16).toUpperCase(),o=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-t.length)+t+"0".repeat(2-i.length)+i+"0".repeat(2-a.length)+a+"0".repeat(2-o.length)+o}const a=/^#(.)(.)(.)$/gi.exec(t);if(null!==a){const t=a[1].toUpperCase(),i=a[2].toUpperCase(),n=a[3].toUpperCase();return"FF"+t+t+i+i+n+n}return"FF"+t.toUpperCase().slice(1)}toggleableFunctionality(){const t=this;return t.actualHierarchy?`\n    <style type="text/css">
        .toggle-element {
            width: 5px;
            height: 1px;
            padding-right: 5px;
            float: left;
            text-align: right;
            cursor: pointer;
            user-select: none;
        }

        .collapsed {
            display: none;
        }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            var expandChar = '${t.expandChar}',
                collapseChar = '${t.collapseChar}',
                toggleElements = document.getElementsByClassName('toggle-element');

            function getParent(child) {
                var prevSibling = child.previousElementSibling;

                while (prevSibling) {
                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {
                        return prevSibling;
                    }

                    prevSibling = prevSibling.previousElementSibling;
                }

            }

            function getFirstCollapsedAncestor(child) {
                var parent = getParent(child);

                while (parent) {
                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {
                        return parent;
                    }

                    parent = getParent(parent);
                }
            }

            for (var i = 0; i < toggleElements.length; i++) {
                toggleElements[i].addEventListener('click', function (event) {
                    var expanded = this.innerHTML === collapseChar,
                        row = this.parentElement.parentElement,
                        sibling = row.nextElementSibling;

                    if (expanded) {
                        this.innerHTML = expandChar;
                    }
                    else {
                        this.innerHTML = collapseChar;
                    }

                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {
                        if (expanded) {
                            sibling.style.display = 'none';
                        }
                        else {
                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);

                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {
                                sibling.classList.remove('collapsed');
                                sibling.style.display = null;
                            }

                        }

                        sibling = sibling.nextElementSibling;
                    }
                });
            }
        }
    </script>`:""}generateStyles(t){const a=this;if(a.cellStyleMapping={},0===Object.keys(t).length&&!a.complexHeader)return`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${a.conditionalFormattingXLSX.styles||"<dxfs count=\"0\"/>"}<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`;a.styleMap={};for(let n=0;n<a.data.length;n++)for(let t=0;t<a.columnsArray.length;t++)a.styleMap[a.columnsArray[t]+(n+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(t&&t.columns)for(let n=0;n<a.columnsArray.length;n++){const i=a.datafields[n];if(!t.columns[i]||!t.columns[i].format)continue;const o=a.getXLSXFormat(t.columns[i].format,a.data[a.data.length-1][i]);o&&(t.columns[i].numFmt=o)}a.processRowStyle(t),a.processColumnStyle(t);const i={};for(let n=0;n<a.complexHeaderMergedCells.length;n++){const t=a.complexHeaderMergedCells[n];if(parseFloat(t.to[1])===a.complexHeader.length){i[t.to]=t.from;continue}a.styleMap[t.from].alignment.horizontal="center",a.styleMap[t.from].alignment.vertical="center"}const n={xml:"<font><sz val=\"11\" /><color theme=\"1\" /><name val=\"Calibri\" /><family val=\"2\" /><charset val=\"204\" /><scheme val=\"minor\" /></font>",collection:["default"]},o={xml:"<fill><patternFill patternType=\"none\" /></fill><fill><patternFill patternType=\"gray125\" /></fill>",collection:["default","gray125"]},l={xml:"",collection:[]},r={xml:"<xf fontId=\"0\" fillId=\"0\" />",collection:["default"]};for(let s=0;s<a.data.length;s++)for(let t=0;t<a.columnsArray.length;t++){const d=a.columnsArray[t]+(s+1),m=a.styleMap[d];let c="",u="",p="",g=[],h=[],_=[],f=[];for(let t in m.fonts)if(m.fonts.hasOwnProperty(t)){const i=m.fonts[t];"color"==t?(g[0]=i,c+=`<color rgb="${a.toARGB(i)}" />`):"name"==t?(g[1]=i,c+=`<name val="${i}" />`):"sz"==t?(g[2]=i,c+=`<sz val="${i}" />`):"i"==t?(g[3]=i,c+="<i />"):"b"==t?(g[4]=i,c+="<b />"):"u"==t?(g[5]=i,c+="<u />"):void 0}for(let t in m.fills)if(m.fills.hasOwnProperty(t)){const i=m.fills[t];"fgColor"==t?(h[0]=i,u+=`<fgColor rgb="${a.toARGB(i)}" />`):void 0}for(let t in m.alignment)if(m.alignment.hasOwnProperty(t)){const i=m.alignment[t];"horizontal"==t?(_[0]=i,p+=`horizontal="${i}" `):"vertical"==t?(_[1]=i,p+=`vertical="${i}" `):void 0}if(g=g.toString(),h=h.toString(),""!=c){let t=n.collection.indexOf(g);-1===t&&(t=n.collection.length,n.xml+="<font>"+c+"</font>",n.collection.push(g)),f[0]=t}if(""!=u){let t=o.collection.indexOf(h);-1===t&&(t=o.collection.length,o.xml+="<fill><patternFill patternType=\"solid\">"+u+"</patternFill></fill>",o.collection.push(h)),f[1]=t}0<_.length&&(f[2]=p),void 0!==m.numFmt&&(f[3]=a.getNumFmtIndex(m.numFmt,l));const b=f.toString();if(""!==b){let t=r.collection.indexOf(b);if(-1===t){let i="<xf ";t=r.collection.length,void 0!==f[0]&&(i+=`fontId="${f[0]}" `),void 0!==f[1]&&(i+=`fillId="${f[1]}" `),void 0!==f[3]&&(i+=`numFmtId="${f[3]}" `),i+=void 0===f[2]?"/>":`applyAlignment="1"><alignment ${p}/></xf>`,r.xml+=i,r.collection.push(b)}a.cellStyleMapping[i[d]||d]=t}}return l.collection.length&&(l.xml=`<numFmts count="${l.collection.length}">${l.xml}</numFmts>`),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">${l.xml}<fonts count="${n.collection.length}" x14ac:knownFonts="1">${n.xml}</fonts><fills count="${o.collection.length}">${o.xml}</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="${r.collection.length}">${r.xml}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${a.conditionalFormattingXLSX.styles}<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`}});let bigIntNativeSupport;try{BigInt,bigIntNativeSupport=!0}catch(t){bigIntNativeSupport=!1}Smart.Utilities.Assign("BigNumber",class{constructor(t,a,l){var s=Math.abs,d=this,o;if(Smart.Utilities.BigNumber.bigIntSupport){if(t instanceof Smart.Utilities.BigNumber)if(Array.isArray(t._d))t=(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f==t._d.length?"":"."+t._d.slice(t._f).join(""));else return new Smart.Utilities.BigNumber(t._d);try{d._d=BigInt(t)}catch(i){d._d=BigInt(Math.round(t))}return d._f=d._d.toString().replace("-","").length,void(d._s=0>d._d)}if(t instanceof Smart.Utilities.BigNumber){if("bigint"==typeof t._d)return new Smart.Utilities.BigNumber(t._d.toString());for(o in{precision:0,roundType:0,_s:0,_f:0})d[o]=t[o];return d._d=t._d.slice(),void(t._s&&1===t._d.length&&0===t._d[0]&&(d._s=!1))}if(void 0!==t&&("-0"===t&&(t="0"),new RegExp(/e/i).test(t))){var m=t.toString().toLowerCase(),c=m.indexOf("e"),u=new Smart.Utilities.BigNumber(m.slice(0,c)),g=m.slice(c+2),h=m.slice(c+1,c+2),_=new Smart.Utilities.BigNumber(10),f=_.pow(h+g),b=u.multiply(f);t=b.toString()}for(d.precision=isNaN(a=s(a))?Smart.Utilities.BigNumber.defaultPrecision:a,d.roundType=isNaN(l=s(l))?Smart.Utilities.BigNumber.defaultRoundType:l,d._s="-"==(t+="").charAt(0),d._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,o=(t=d._d=(t.join("")||"0").split("")).length;o;t[--o]=+t[o]);d.round()}static get defaultPrecision(){return 40}static get defaultRoundType(){return 4}static get bigIntSupport(){return bigIntNativeSupport&&!0!==Smart.Utilities.BigNumber.ignoreBigIntNativeSupport}add(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d+new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);if(t=l.normalizeOperand(t),l.isZero()&&l._s&&(l._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(l);if(l._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,l.subtract(t);var s=new Smart.Utilities.BigNumber(l),o=s._d,a=t._d,d=s._f,m=t._f,c,u;for(t=Math.max(d,m),d!=m&&(0<(m=d-m)?s._zeroes(a,m,1):s._zeroes(o,-m,1)),c=(d=o.length)==(m=a.length)?o.length:(0<(m=d-m)?s._zeroes(a,m):s._zeroes(o,-m)).length,u=0;c;u=(o[--c]=o[c]+a[c]+u)/10>>>0,o[c]%=10);return u&&++t&&o.unshift(u),s._f=t,s.round()}subtract(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d-new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);if(t=l.normalizeOperand(t),l.isZero()&&l._s&&(l._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(l);if(l._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,l.add(t);var r=new Smart.Utilities.BigNumber(l),o=r.abs().compare(t.abs())+1,s=o?r:t,m=o?t:r,c=s._f,u=m._f,p=c,d,g;for(s=s._d,m=m._d,c!=u&&(0<(u=c-u)?r._zeroes(m,u,1):r._zeroes(s,-u,1)),d=(c=s.length)==(u=m.length)?s.length:(0<(u=c-u)?r._zeroes(m,u):r._zeroes(s,-u)).length;d;){if(s[--d]<m[d]){for(g=d;g&&!s[--g];s[g]=9);--s[g],s[d]+=10}m[d]=s[d]-m[d]}return o||(r._s^=1),r._f=p,r._d=m,r.round()}multiply(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);t=l.normalizeOperand(t);var d=new Smart.Utilities.BigNumber(l),o=d._d.length>=(t=new Smart.Utilities.BigNumber(t))._d.length,m=(o?d:t)._d,a=(o?t:d)._d,c=m.length,u=a.length,p=new Smart.Utilities.BigNumber,g,h,_;for(g=u;g;o&&_.unshift(o),p.set(p.add(new Smart.Utilities.BigNumber(_.join("")))))for(_=Array(u- --g).join("0").split(""),o=0,h=c;h;o+=m[--h]*a[g],_.unshift(o%10),o=o/10>>>0);return d._s=d._s!=t._s,d._f=((o=c+u-d._f-t._f)>=(h=(d._d=p._d).length)?l._zeroes(d._d,o-h+1,1).length:h)-o,d.round()}divide(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d/new Smart.Utilities.BigNumber(t)._d);let d=this.normalizeOperand(this);if(t=d.normalizeOperand(t),"0"==(t=new Smart.Utilities.BigNumber(t)))throw new Error("Division by 0");else if("0"==d)return new Smart.Utilities.BigNumber;var m=new Smart.Utilities.BigNumber(d),o=m._d,a=t._d,u=o.length-m._f,p=a.length-t._f,g=new Smart.Utilities.BigNumber,r=0,h=1,_=0,v=0,w,C,x;for(g._s=m._s!=t._s,g.precision=Math.max(m.precision,t.precision),g._f=+g._d.pop(),u!=p&&m._zeroes(u>p?a:o,Math.abs(u-p)),t._f=a.length,a=t,a._s=!1,a=a.round(),t=new Smart.Utilities.BigNumber;"0"==o[0];o.shift());out:do{for(x=_=0,"0"==t&&(t._d=[],t._f=0);r<o.length&&-1==t.compare(a);++r){if((x=r+1==o.length,!h&&1<++_||(v=x&&"0"==t&&"0"==o[r]))&&(g._f==g._d.length&&++g._f,g._d.push(0)),"0"==o[r]&&"0"==t||(t._d.push(o[r]),++t._f),v)break out;if(x&&-1==t.compare(a)&&(g._f==g._d.length&&++g._f,1)||(x=0))for(;g._d.push(0),t._d.push(0),++t._f,-1==t.compare(a););}if(h=0,-1==t.compare(a)&&!(x=0))for(;x?g._d.push(0):x=1,t._d.push(0),++t._f,-1==t.compare(a););var S;for(C=new Smart.Utilities.BigNumber,w=0;t.compare(S=C.add(a))+1&&++w;C.set(S));t.set(t.subtract(C)),x||g._f!=g._d.length||++g._f,g._d.push(w)}while((r<o.length||"0"!=t)&&g._d.length-g._f<=g.precision);return g.round()}mod(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d%new Smart.Utilities.BigNumber(t)._d);let i=this.normalizeOperand(this);t=i.normalizeOperand(t);var a=i.subtract(i.divide(t).intPart().multiply(t));return a.isZero()&&a._s&&(a._s=!a._s),a}pow(t){if(Smart.Utilities.BigNumber.bigIntSupport){let a=BigInt(1);for(let n=BigInt(0);n<new Smart.Utilities.BigNumber(t)._d;n+=BigInt(1))a*=this._d;return new Smart.Utilities.BigNumber(a)}let a=this.normalizeOperand(this);t=a.normalizeOperand(t);var l=new Smart.Utilities.BigNumber(a),o;if(0==(t=new Smart.Utilities.BigNumber(t).intPart()))return l.set(1);for(o=Math.abs(t);--o;l.set(l.multiply(a)));return 0>t?l.set(new Smart.Utilities.BigNumber(1).divide(l)):l}set(t){return t=new Smart.Utilities.BigNumber(t),this._d=t._d,this._f=t._f,this._s=t._s,this}compare(t){if(Smart.Utilities.BigNumber.bigIntSupport){const i=new Smart.Utilities.BigNumber(t)._d;return this._d===i?0:this._d>i?1:-1}let o=this.normalizeOperand(this);t=o.normalizeOperand(t);var s=o,a=o._f,d=new Smart.Utilities.BigNumber(t),m=d._f,c=[-1,1],r,u,p;if(s.isZero()&&d.isZero())return 0;if(s._s!=d._s)return s._s?-1:1;if(a!=m)return c[a>m^s._s];for(a=(p=s._d).length,m=(d=d._d).length,r=-1,u=Math.min(a,m);++r<u;)if(p[r]!=d[r])return c[p[r]>d[r]^s._s];return a==m?0:c[a>m^s._s]}negate(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*BigInt(-1));let t=this.normalizeOperand(this);var i=new Smart.Utilities.BigNumber(t);return i._s^=1,i}abs(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(0>this._d?this._d*BigInt(-1):this._d);let t=this.normalizeOperand(this);var i=new Smart.Utilities.BigNumber(t);return i._s=0,i}intPart(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d);let t=this.normalizeOperand(this);return new Smart.Utilities.BigNumber((t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0"))}valueOf(t,i){let a=this.normalizeOperand(this);return a.toString(t,i)}toString(t,i){function a(t,i,a){var n="";if(String.prototype.repeat){var o="0".repeat(a-t.length);t=o+t}for(;t.length<a;)t="0"+t;n=t.replace(/0/g,"a"),n=n.replace(/1/g,"b"),n=n.replace(/a/g,"1"),n=n.replace(/b/g,"0");for(var r=!0,s="",d=n.length-1;0<=d;d--){var m=n.charAt(d),c;"0"===m?!0===r?(c="1",r=!1):c="0":!0===r?c="0":c="1",s=c+""+s}switch(i){case 2:return s;case 8:var u,p;8===a?(u=3,p="0"):16===a?(u=6,p="00"):32===a?(u=11,p="0"):64===a?(u=22,p="00"):void 0,s=p+s;for(var g="",h=u,_;1<=h;h--)_=s[3*h-3]+""+s[3*h-2]+""+s[3*h-1],g=parseInt(_,2).toString(8)+""+g;return g;case 16:var f;8===a?f=2:16===a?f=4:32===a?f=8:64===a?f=16:void 0;for(var b="",y=f,v;1<=y;y--)v=s[4*y-4]+""+s[4*y-3]+""+s[4*y-2]+""+s[4*y-1],b=parseInt(v,2).toString(16)+""+b;return b.toUpperCase();}}function n(t){var i=new Smart.Utilities.BigNumber(2),a=[],n,o;o=void 0===t?s:t;do n=o.mod(i),a.push(n.toString()),o=o.subtract(n).divide(i).intPart();while(1===o.compare(new Smart.Utilities.BigNumber(0)));return a.reverse().join("")}function l(t){for(var i="";0!=t.length%3;)t="0"+t;for(var a=t.length/3,n;1<=a;a--)n=t[3*a-3]+""+t[3*a-2]+""+t[3*a-1],i=parseInt(n,2).toString(8)+""+i;return i}function r(t){for(var i="";0!=t.length%4;)t="0"+t;for(var a=t.length/4,n;1<=a;a--)n=t[4*a-4]+""+t[4*a-3]+""+t[4*a-2]+""+t[4*a-1],i=parseInt(n,2).toString(16)+""+i;return i}let s,d;if(Smart.Utilities.BigNumber.bigIntSupport?(s=this,d=Array.isArray(s._d)?(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join("")):this._d.toString()):(s=this.normalizeOperand(this),d=(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join(""))),void 0===t||10===t)return d;let m;if(-1<s.compare(0))2===t?m=n():8===t?m=l(n()):16===t?m=r(n()).toUpperCase():void 0;else{var c=s.negate(),u=n(c);m=a(u,t,i)}return m}_zeroes(i,a,n){var t=["push","unshift"][n||0];for(++a;--a;i[t](0));return i}round(){if("_rounding"in this)return this;var t=Smart.Utilities.BigNumber,i=this.roundType,a=this._d,o,l,r,s;for(this._rounding=!0;1<this._f&&!a[0];--this._f,a.shift());for(o=this._f,l=this.precision+o,r=a[l];a.length>o&&!a[a.length-1];a.pop());return s=(this._s?"-":"")+(l-o?"0."+this._zeroes([],l-o-1).join(""):"")+1,a.length>l&&(r&&i!=t.DOWN&&(i==t.UP||(i==t.CEIL?!this._s:i==t.FLOOR?this._s:i==t.HALF_UP?5<=r:i==t.HALF_DOWN?5<r:i==t.HALF_EVEN&&5<=r&&1&a[l-1]))&&this.add(s),a.splice(l,a.length-l)),(delete this._rounding,this)}isZero(){return 1===this._d.length&&0===this._d[0]}normalizeOperand(t){return t instanceof Smart.Utilities.BigNumber&&"bigint"==typeof t._d?new Smart.Utilities.BigNumber(t._d.toString()):t}}),Smart.Utilities.Assign("NumericProcessor",class{constructor(t,i){switch(t[i]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(t,i);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(t,i);case"complex":return new Smart.Utilities.ComplexNumericProcessor(t,i);}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(t,i){const a=this;a.context=t,a._longestLabelSize=0,a.numericFormatProperty=i,a.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),a.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),a.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),a.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},a.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(t,i,a){const n=this.context,o=t||void 0!==i;if(a=a.toString(),a=a.replace(/\s/g,""),a=n._discardDecimalSeparator(a),this.regexLeadingZero.test(a)){const t=this.regexLeadingZero.exec(a);a=t[1]?a.replace(t[1],""):t[2]?a.replace(t[2],"0"):a.replace(t[3],"0")}this.regexNoLeadingZero.test(a)?"-"===a.charAt(0)?a="-0"+a.slice(1):a="0"+a:("integer"===n[this.numericFormatProperty]&&(10===n._radixNumber||o)||"floatingPoint"===n[this.numericFormatProperty])&&this.regexScientificNotation.test(a)&&(a=this.scientificToDecimal(a));let l=!1,r;if("complex"===n[this.numericFormatProperty]&&!1===n._regexSpecial.nonNumericValue.test(a))try{if(n._regexSpecial.exaValue.test(a)){const t=a.indexOf("E"),i=1000000000000000000*parseFloat(a.slice(0,t)),n=parseFloat(a.slice(t+1,-1));r=new this.complexConstructor(i,n)}else r=new this.complexConstructor(a);l=!0}catch(t){l=!1}return!1==l&&(!o&&!1===n._regex[n._radixNumber].test(a)||o&&!1===n._regex[10].test(a))?void n._handleNonNumericValue(t,i,a):{value:a,enteredComplexNumber:r}}isENotation(t){const i=new RegExp(/e/i);return i.test(t.toString())}scientificToDecimal(t){const i=this.regexScientificNotation.exec(t),a=i[1],n=i[2],o=parseFloat(a)*Math.pow(10,this.prefixesToPowers[n]);return o}_createMeasureLabel(){const t=this.context,i=document.createElement("div");return i.className="smart-label",i.style.position="absolute",i.style.visibility="hidden",t._measureLabelScale="far"===t.scalePosition?t.$.scaleFar:t.$.scaleNear,t._measureLabelScale.appendChild(i),i}_addMajorTickAndLabel(t,i,a,n,o){const l=this.context,r=l._settings.leftOrTop,s=this.valueToPx(n);let d="",m="";if(parseInt(s)>parseInt(l._measurements.trackLength))return{tick:d,label:m};if(l.logarithmicScale&&(t=l._formatLabel(Math.pow(10,n))),"smart-tank"===l.nodeName.toLowerCase()||l._intervalHasChanged){let i=l._tickIntervalHandler.labelsSize;if(o){l._labelDummy.innerHTML=t;let o=this.valueToPx(n),r=this.valueToPx(l._drawMax),s=this.valueToPx(l._drawMin),d=l._labelDummy[l._settings.size],m="vertical"===l.orientation?l._labelDummy.offsetWidth:l._labelDummy.offsetHeight,c=(d+i.minLabelSize)/2,u=(d+i.maxLabelSize)/2;a=l._normalLayout?o+u<r&&o-c>s:o-u>r&&o+c<s,m>this._longestLabelSize&&(this._longestLabelSize=m)}else this._longestLabelSize=Math.max(i.minLabelOtherSize,i.maxLabelOtherSize,this._longestLabelSize)}if(l._tickValues.push(n),d="<div style=\""+r+": "+s+"px;\" class=\"smart-tick\"></div>",!1!==a){void 0===i&&(l._labelDummy.innerHTML=t,i=l._labelDummy[l._settings.size]);const a=s-i/2;m+="<div class=\"smart-label"+(o?" smart-label-middle":"")+"\" style=\""+r+": "+a+"px;\">"+t+"</div>"}return{tick:d,label:m}}getWordLength(t){return this.context._unsigned="u"===t.charAt(0),"int8"===t||"uint8"===t?8:"int16"===t||"uint16"===t?16:"int32"===t||"uint32"===t?32:"int64"===t||"uint64"===t?64:void 0}getAngleByValue(t,i,a){var n=Math.PI;const o=this.context;!1!==i&&o.logarithmicScale&&(t=Math.log10(t));const l=(t-o._drawMin)*o._angleRangeCoefficient;let r;return r=o.inverted?o.startAngle+l:o.endAngle-l,a?r:r*n/180+n/2}getValueByAngle(t,i){var a=Math.pow;const n=this.context;let o,l,r;for(n.inverted?(o=t,l=n._normalizedStartAngle):(o=n.endAngle,l=t);o<l;)o+=360;if(r=(o-l)/n._angleDifference*n._range+parseFloat(n._drawMin),n.logarithmicScale){if(n.customInterval)return parseFloat(a(10,this.getCoercedValue(r,!0)).toFixed(12));r=a(10,r)}return i&&!n.coerce?Math.round(r):(r=this.createDescriptor(r,void 0,!0,!0),this.getCoercedValue(r,!1))}updateGaugeValue(t){const i=this.context,a=i.value;i.value=t,i._drawValue=i.logarithmicScale?Math.log10(t).toString():t,i._number=this.createDescriptor(i.value),i.$.digitalDisplay.value=t,i.$.fireEvent("change",{value:t,oldValue:a}),delete i._valueBeforeCoercion}validateColorRange(t){const i=this.context;return Math.min(Math.max(t,i.min),i.max)}getActualValue(t){return this.context.logarithmicScale?Math.pow(10,t):t}drawGaugeLogarithmicScaleMinorTicks(t,a,n){var o=Math.pow;const l=this.context;let r;for(let o in a instanceof Smart.Utilities.BigNumber&&(a=parseFloat(a.toString())),t)if(r=o,0<=o&&0==o%1)break;for(let s=parseFloat(r);s<l._drawMax;s+=a)for(let t=2;9>=t;t++){const i=t*o(10,s+a-1);i<l.max&&n(i)}for(let s=parseFloat(r);s>l._drawMin;s-=a)for(let t=2;9>=t;t++){const i=t*o(10,s-1);i>l.min&&n(i)}}_getAngleDifference(t,i){const a=Math.abs(i-t)%360,n=180<a?360-a:a;return n}addCustomTicks(){function t(t){const i=n.customTicks[t],s=o?a.createDescriptor(i):Math.log10(i),d=0<t&&t<n.customTicks.length-1,m=a._addMajorTickAndLabel(n._formatLabel(i),void 0,!0,s,d);l+=m.tick,r+=m.label}const a=this,n=a.context,o=!n.logarithmicScale;let l="",r="";if(a._longestLabelSize=0,n._tickValues=[],n._labelDummy=a._createMeasureLabel(),!n._normalLayout)for(let a=n.customTicks.length-1;0<=a;a--)t(a);else for(let a=0;a<n.customTicks.length;a++)t(a);"smart-tank"===n.nodeName.toLowerCase()&&n._updateScaleWidth(a._longestLabelSize),n._appendTicksAndLabelsToScales(l,r)}addGaugeCustomTicks(){function t(t){const i=n.customTicks[t],o=a.createDescriptor(i),s=a.getAngleByValue(o,!0),d=0<t&&t<n.customTicks.length-1;l(s),r(s,i,d)}const a=this,n=a.context,i=n._distance,o=n._measurements.radius-i.majorTickDistance;let l,r;l="none"!==n.ticksVisibility&&!1!==n._plotTicks?function(t){n._drawTick(t,o,"major")}:function(){},r="none"!==n.labelsVisibility&&!1!==n._plotLabels?function(t,a,o){n._drawLabel(t,a,i.labelDistance,o)}:function(){};for(let a=n.customTicks.length-1;0<=a;a--)t(a)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,i){super(t,i);const a=this;a.context=t,a.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},a.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(t,i,a,n,o){const l=this.context;let r;if(t.constructor!==Smart.Utilities.BigNumber){let a=!o&&l._radixNumber?l._radixNumber:10;10===a&&i&&t.constructor!==Smart.Utilities.BigNumber&&this.isENotation(t)&&(t=new Smart.Utilities.NumberRenderer(t).largeExponentialToDecimal()),r=l._toBigNumberDecimal?l._toBigNumberDecimal(t.toString(a,l._wordLengthNumber),a):new Smart.Utilities.BigNumber(t)}else r=new Smart.Utilities.BigNumber(t);return a&&(l._unsigned&&-1===r.compare(0)&&(r=r.set(0)),n&&(r=this.validate(r,l._minObject,l._maxObject)),r=this.round(r)),r}round(t){const i=this.context;if(t instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof t._d)return t;if(!1==t instanceof window.Smart.Utilities.BigNumber||!i._wordLengthNumber||64>i._wordLengthNumber)return new Smart.Utilities.BigNumber(Math.round(t.toString()));const a=t.mod(1);return 1===a._d.length&&0===a._d[0]||(t=t.intPart(),t._s?(5<a._d[1]||5===a._d[1]&&a._d[2])&&(t=t.add(-1)):4<a._d[1]&&(t=t.add(1))),t}validate(t,i,a){let n;return n=-1===t.compare(i)?i:1===t.compare(a)?a:t,n}validateMinMax(t,i){const a=this.context;let n=this.defaultMins[a.wordLength],o=new Smart.Utilities.BigNumber(n),l=this.defaultMaxs[a.wordLength],r=new Smart.Utilities.BigNumber(l),s="date"!==a.mode;if(void 0===a._numberRenderer&&(a._numberRenderer=new Smart.Utilities.NumberRenderer),t&&s){null!==a.min&&(a.min=a.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.min)&&(a.min=this.scientificToDecimal(a.min)));let t=this.round(new Smart.Utilities.BigNumber(a.min));null===a.min||a._minIsNull&&a._initialized||!(0<=t.compare(o))?(a._minIsNull=!0,a.min=n,a._minObject=o):a._minObject=t}if(i&&s){null!==a.max&&(a.max=a.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.max)&&(a.max=this.scientificToDecimal(a.max)));let t=this.round(new Smart.Utilities.BigNumber(a.max));null===a.max||a._maxIsNull&&a._initialized||!(0>=t.compare(r))?(a._maxIsNull=!0,a.max=l,a._maxObject=r):a._maxObject=t}s||(a._minObject=new Smart.Utilities.BigNumber(a.min),a._maxObject=new Smart.Utilities.BigNumber(a.max)),this.compare(a._minObject,a._maxObject)||(a._minObject=o,a._maxObject=r,a._drawMin=a.logarithmicScale?0:n,a._drawMax=a.logarithmicScale?10:l,a.min=n,a.max=l),s||(a._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(a.min),a._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(a.max))}valueToPx(t){const i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=this.context,n=new Smart.Utilities.BigNumber(a._measurements.trackLength).divide(new Smart.Utilities.BigNumber(a._range));let o;if(a._normalLayout){const i=a._drawMin instanceof Smart.Utilities.BigNumber?a._drawMin:new Smart.Utilities.BigNumber(a._drawMin);t=new Smart.Utilities.BigNumber(t),o=parseFloat(n.multiply(t.subtract(i)).toString())}else{const i=a._drawMax instanceof Smart.Utilities.BigNumber?a._drawMax:new Smart.Utilities.BigNumber(a._drawMax);o=parseFloat(this.round(i.subtract(t).multiply(n)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,o}pxToValue(t){const i=this.context,a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let n;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,n=i._normalLayout?i._valuePerPx.multiply(t-i._trackStart):i._valuePerPx.multiply(i._trackEnd-t),n=this.round(n).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,i.logarithmicScale){let t=parseFloat(n)+parseFloat(i._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,t)))}let o=this.createDescriptor(i._minObject.add(n),!1,!0,!0);return o}compare(t,i,a){if((null===t||null===i)&&t!==i)return!0;t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t));const n=t.compare(i);return!0===a?n:0!==n}incrementDecrement(t,i,a){const n=this.context;let o;if(t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),"add"===i){if(o=t.add(a),void 0!==n._drawMax)return 0<o.compare(n._drawMax)?new Smart.Utilities.BigNumber(n._drawMax):o;}else if(o=t.subtract(a),void 0!==n._drawMin)return 0>o.compare(n._drawMin)?new Smart.Utilities.BigNumber(n._drawMin):o;return o}render(t,i){const a=this.context;if(!a.scientificNotation&&!0===i)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(t)).bigNumberToExponent(a.significantDigits);let n=t;return a.scientificNotation&&!0===i?n=new Smart.Utilities.NumberRenderer(n).toScientific(a.significantDigits,a.precisionDigits):"string"!=typeof t&&(n=t.toString(a._radixNumber,a._wordLengthNumber)),n}addTicksAndLabels(){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=this.context,a=i._measurements.trackLength,n=i._normalLayout,o=i._majorTicksInterval,l=this.round(new Smart.Utilities.BigNumber(i._range).divide(o)),r=a/l,s=new Smart.Utilities.BigNumber(i._drawMin),d=new Smart.Utilities.BigNumber(i._drawMax);let m="",c="",u,p,g,h,_,f,b,y,v;i._tickValues=[],this._longestLabelSize=0,n?(u=s,p=o.add(u.subtract(u.mod(o))),g=p.subtract(u),_=i._formatLabel(s),f=i._tickIntervalHandler.labelsSize.minLabelSize,h=d,b=i._formatLabel(d),y=i._tickIntervalHandler.labelsSize.maxLabelSize):(u=d,p=u.subtract(u.mod(o)),g=u.subtract(p),_=i._formatLabel(d),f=i._tickIntervalHandler.labelsSize.maxLabelSize,h=s,b=i._formatLabel(s),y=i._tickIntervalHandler.labelsSize.minLabelSize),i._labelDummy=this._createMeasureLabel(),v=this._addMajorTickAndLabel(_,f,!0,u),m+=v.tick,c+=v.label;const w=g.divide(o).multiply(r);if(0!==p.compare(i.max)&&0>w.compare(a)){const t=i._formatLabel(p.toString()),a=0<w.compare(f);v=this._addMajorTickAndLabel(t,void 0,a,p,!0),m+=v.tick,c+=v.label}v=this.addMiddleMajorTicks(l,r,w,g,n,o),m+=v.tick,c+=v.label,v=this._addMajorTickAndLabel(b,y,!0,h),m+=v.tick,c+=v.label,"date"!==i.mode&&(m+=this.addMinorTicks(n)),i._measureLabelScale.removeChild(i._labelDummy),delete i._labelDummy,delete i._measureLabelScale,"smart-tank"===i.nodeName.toLowerCase()&&i._updateScaleWidth(this._longestLabelSize),i._appendTicksAndLabelsToScales(m,c),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}addMiddleMajorTicks(t,a,n,o,l,r){const s=this.context;let i="",d="",m;for(let c=1;c<t;c++){let u=n.add(c*a),p;if(l?p=r.multiply(c).add(o.add(new Smart.Utilities.BigNumber(s._drawMin))):(p=new Smart.Utilities.BigNumber(s._drawMax).subtract(o).subtract(r.multiply(c)),c==t-1&&0===p.compare(0)&&(s._numberRenderer.numericValue=s._tickIntervalHandler.nearestPowerOfTen,m=s._numberRenderer.bigNumberToExponent(1))),0!==p.compare(s._drawMax)){let n=s._formatLabel(p.toString()),o=!0;s._labelDummy.innerHTML=m?m:n;let l=s._labelDummy[s._settings.size];0<=u.add(l).compare(t*a)&&(o=!1);const r=this._addMajorTickAndLabel(n,void 0,o,p,!0);i+=r.tick,d+=r.label}}return{tick:i,label:d}}addMinorTicks(t){function a(t){-1===l.indexOf(t)&&0==t%s&&(m+="<div style=\""+d+": "+o._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let t=o._measurements.trackLength,i=t/l.length,a=.1;20>i?a=1:20<=i&&40>i?a=1<u-c?1:.5:40<=i&&80>i&&(a=.2);let r=Math.floor(o._drawMax),s=o._drawMax-r,p=o._drawMax-o._drawMin>l.length;for(let t=o._drawMax;0<t;--t){let l=0<s?n(10,t-s+1):n(10,t),r=l*a;for(let t=l;0<t;t-=r)if(t<o.max&&t>o.min){let i=new Smart.Utilities.BigNumber(Math.log10(t));(0==i%1&&p||!p)&&(m+="<div style=\""+d+": "+o._numericProcessor.valueToPx(i)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var n=Math.pow;const o=this.context,l=o._tickValues,r=o._tickIntervalHandler.nearestPowerOfTen,s=o._minorTicksInterval,d=o._settings.leftOrTop;let m="",c,u,p;if(t?(c=l[0],u=l[1],p=l[l.length-1]):(c=l[l.length-1],u=l[l.length-2],p=l[0]),o.logarithmicScale)i();else{for(let t=u;0>c.compare(t);t=t.subtract(r))a(t);for(let t=u.add(r);0<p.compare(t);t=t.add(r))a(t)}return m}validateCustomTicks(){const t=this.context,a="date"!==t.mode;let n=[];for(let o=0,i;o<t.customTicks.length;o++)i=t.customTicks[o],a?i=this.createDescriptor(i,!1,!0):void 0===i._d&&(i=Smart.Utilities.DateTime.validateDate(i).getTimeStamp()),0<=i.compare(t._minObject)&&0>=i.compare(t._maxObject)&&n.push(i);if(n.sort(function(t,i){return t.compare(i)}),a){for(let t=0;t<n.length;t++)n[t]=n[t].toString();n=n.filter(function(t,i,a){return!i||t!==a[i-1]})}t.customTicks=n.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,o=this,l=Math.max(n._tickIntervalHandler.labelsSize.minLabelSize,n._tickIntervalHandler.labelsSize.maxLabelSize),r=n._majorTicksInterval,s=n._minorTicksInterval,d={},m=n._distance,c=n._measurements.radius,u=c-m.majorTickDistance,p=c-m.minorTickDistance,g=new Smart.Utilities.BigNumber(n._drawMin),h=new Smart.Utilities.BigNumber(n._drawMax);let _,f,b,y,v,w;"none"!==n.ticksVisibility&&!1!==n._plotTicks?(_=function(t){n._drawTick(t,u,"major")},f=function(t){n._drawTick(o.getAngleByValue(t,!0),p,"minor")}):(_=function(){},f=function(){}),b="none"!==n.labelsVisibility&&!1!==n._plotLabels?function(t,i,a){n._drawLabel(t,i,m.labelDistance,a)}:function(){},n.inverted?(v=n.startAngle,w=n.endAngle):(v=n.endAngle,w=n.startAngle),y=o.getAngleByValue(g,!1),_(y),d[n._drawMin.toString()]=!0,b(y,n.min,!1);let C=g.subtract(g.mod(r)),x;-1!==g.compare(0)&&(C=C.add(r));for(let t=new Smart.Utilities.BigNumber(C);-1!==t.compare(g);t=t.subtract(s))x=t;y=o.getAngleByValue(C,!1),_(y),d[C.toString()]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(v,o.getAngleByValue(C,!1,!0))/360)>l&&b(y,this.getActualValue(C),-1===C.compare(h));let S;for(S=C.add(r);-1===S.compare(h.subtract(r));S=S.add(r))y=o.getAngleByValue(S,!1),_(y),d[S.toString()]=!0,b(y,this.getActualValue(S),!0);if(void 0===d[S.toString()]&&1!==S.compare(h)&&(y=o.getAngleByValue(S,!1),_(y),d[S.toString()]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(w,o.getAngleByValue(S,!1,!0))/360)>=l&&b(y,this.getActualValue(S),!0),n._normalizedStartAngle!==n.endAngle&&(y=o.getAngleByValue(h,!1),_(y),2*t*n._measurements.innerRadius*(this._getAngleDifference(w,v)/360)>=l&&b(y,n.max,!1))),"date"===n.mode)return void(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a);if(!n.logarithmicScale)for(let t=x;-1===t.compare(h);t=t.add(s))d[t.toString()]||f(t);else this.drawGaugeLogarithmicScaleMinorTicks(d,r,f);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a}updateToolTipAndValue(t,i,a){const n=this.context,o=n.logarithmicScale;n._updateTooltipValue(t.toString()),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11))),t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const l=t.toString();n._number=t,n._drawValue=o?Math.log10(l):t,0!==t.compare(i)&&a&&("numeric"===n.mode?(n.value=l,t=l):(i=n._valueDate,n._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(l),n.value=t,t=n._valueDate),!n._programmaticValueIsSet&&n.$.fireEvent("change",{value:t,oldValue:i}),n.$.hiddenInput&&(n.$.hiddenInput.value=t))}validateInterval(t){const i=this.context,a=i._maxObject.subtract(i._minObject);i._validInterval=new Smart.Utilities.BigNumber(t),i._validInterval=this.round(i._validInterval),1===i._validInterval.compare(a)&&(i._validInterval=a),i.interval=i._validInterval.toString()}getCoercedValue(t,i,a){var n=Math.abs;const o=this.context;if(!o.coerce)return t;const l=!o.logarithmicScale;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);let r,s;if(o.customInterval){const s=o.customTicks;if(0===s.length)return t;let d,m;if(l||a){r=o._minObject,d=r.subtract(t).abs(),m=r;for(let a=0;a<s.length;a++){const i=this.createDescriptor(s[a]),n=i.subtract(t).abs();-1===n.compare(d)&&(d=n,m=i)}}else{r=o._drawMin,d=n(r-parseFloat(t.toString())),m=r;for(let a=0;a<s.length;a++){const i=Math.log10(s[a]),o=n(i-t);o<d&&(d=o,m=i)}m=new Smart.Utilities.BigNumber(m)}return m}let d=o._validInterval;if("date"===o.mode){if("addYears"===o._dateIncrementMethod)return this.coerceYear(t);if("addMonths"===o._dateIncrementMethod)return this.coerceMonth(t);d=new Smart.Utilities.BigNumber(o._dateIntervalNumber).multiply(d)}!1===i?(r=new Smart.Utilities.BigNumber(o.min),s=new Smart.Utilities.BigNumber(o.max)):(r=new Smart.Utilities.BigNumber(o._drawMin),s=new Smart.Utilities.BigNumber(o._drawMax));let m=t.subtract(r),c=m.mod(d);if(0===c.compare(0))return t;let u=m.subtract(c),p=u.add(d);if(0>m.subtract(u).abs().compare(m.subtract(p).abs()))return u.add(r);else{const t=p.add(r);return 0>=t.compare(s)?t:u.add(r)}}coerceMonth(t){const i=this.context,a=parseFloat(i._validInterval),n=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=n.year(),l=n.month(),r=n.day(),s=i._minDate.year(),d=i._minDate.month(),m=12*(i._maxDate.year()-s-1)+12-d+i._maxDate.month();let c=12*(o-1-s)+(12-d)+l;1===a&&(-1===[1,3,5,7,8,10,12].indexOf(l)?2===l?n.isLeapYear(o)?(15<r||15===r&&11<n.hour())&&c++:14<r&&c++:15<r&&c++:(16<r||16===r&&11<n.hour())&&c++),c=this.getCoercedTimePart(0,m,c,a);let u=i._minDate.addMonths(c,!0);return 1===u.compare(i._maxDate)&&(u=i._minDate.addMonths(c-a,!0)),i._drawValue=new Smart.Utilities.BigNumber(u.getTimeStamp()),i._drawValue}coerceYear(t){const i=this.context,a=parseFloat(i._validInterval),n=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=i._maxDate.year(),l=Smart.Utilities.DateTime.getConstructorParameters(i._minDate);let r=n.year();6<n.month()&&r++;let s=this.getCoercedTimePart(i._minDate.year(),o,r,a);s>o&&(s-=a),l[0]=s,l.unshift(null);const d=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,l));return i._drawValue=new Smart.Utilities.BigNumber(d.getTimeStamp()),i._drawValue}getCoercedTimePart(t,i,a,n){var o=Math.abs;let l=a-t,r=l%n;if(0==r)return a;let s=parseFloat((l-r).toFixed(12)),d=s+n;if(i-t<=n)return a>=t+(i-t)/2?i:t;if(o(l-s)<o(l-d))return s+t;else{const a=d+t;return a>i?s+t:a}}updateValue(t){const i=this.context;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const a=this.validate(t,i._minObject,i._maxObject);let n=i._number;i._number=a,i._drawValue=i.logarithmicScale?Math.log10(a):a,"numeric"===i.mode?i.value=t.toString():(n=i._valueDate,i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),i.value=t,t=i._valueDate),!i._programmaticValueIsSet&&(this.compare(t,i._number)||i._scaleTypeChangedFlag)&&i.$.fireEvent("change",{value:t,oldValue:n}),i.$.hiddenInput&&(i.$.hiddenInput.value=t),i._moveThumbBasedOnValue(i._drawValue)}getValuePerPx(t,i){const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=new Smart.Utilities.BigNumber(t).divide(i);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,n}restrictValue(t){t[1].constructor===Smart.Utilities.BigNumber?-1===t[1].compare(t[0])&&t[1].set(t[0]):t[1]<t[0]&&(t[1]=t[0])}getAngleByValue(t,i,a){var n=Math.PI;const o=this.context,l=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,64>o._wordLengthNumber)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=l,super.getAngleByValue(parseFloat(t.toString()),i,a);!1==t instanceof Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),!1!==i&&o.logarithmicScale&&(t=new Smart.Utilities.BigNumber(Math.log10(t.toString())));const r=t.subtract(o._drawMin).multiply(o._angleRangeCoefficient);let s;return s=o.inverted?r.add(o.startAngle):r.multiply(-1).add(o.endAngle),s=parseFloat(s.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=l,a?s:s*n/180+n/2}getValueByAngle(t){const i=this.context;if(64>i._wordLengthNumber)return super.getValueByAngle(t,!0);const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let n,o,l;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i.inverted?(n=t,o=i._normalizedStartAngle):(n=i.endAngle,o=t);n<o;)n+=360;l=new Smart.Utilities.BigNumber((n-o)/i._angleDifference).multiply(i._range).add(i._drawMin),i.logarithmicScale&&(l=new Smart.Utilities.BigNumber(Math.pow(10,l.toString())));let r;return r=i.coerce?this.getCoercedValue(l,!1):this.round(l),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,new Smart.Utilities.BigNumber(r)}updateGaugeValue(t){!1==t instanceof Smart.Utilities.BigNumber&&super.updateGaugeValue(t);const i=this.context,a=i._getEventValue();"numeric"===i.mode?(i.value=t.toString(),i.$.digitalDisplay.value=i.value):(i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),i.value=t,i.$.digitalDisplay.$.input.value=i._valueDate),i._drawValue=i.logarithmicScale?Math.log10(i.value).toString():i.value,i._number=t,i.$.fireEvent("change",{value:i._getEventValue(),oldValue:a})}validateColorRange(t){const i=this.context;if(64>i._wordLengthNumber)return super.validateColorRange(t);"numeric"===i.mode?t=new Smart.Utilities.BigNumber(t):(t=Smart.Utilities.DateTime.validateDate(t),t=t.getTimeStamp());const a=new Smart.Utilities.BigNumber(i.min),n=new Smart.Utilities.BigNumber(i.max);return-1===t.compare(a)&&(t=a),1===t.compare(n)&&(t=n),t}lockRotation(t,i){const a=this.context;if(!1==i instanceof Smart.Utilities.BigNumber&&(i=new Smart.Utilities.BigNumber(i)),t&&-1===i.compare(a._number)){if(a._lockCW=!0,-1===i.compare(a._maxObject))return new Smart.Utilities.BigNumber(a._maxObject);}else if(!t&&1===i.compare(a._number)&&(a._lockCCW=!0,1===i.compare(a._minObject)))return new Smart.Utilities.BigNumber(a._minObject)}getAngleRangeCoefficient(){const t=this.context,i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,t._angleRangeCoefficient=new Smart.Utilities.BigNumber(t._angleDifference).divide(t._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,i){super(t,i),this.context=t}getPreciseModulo(t,i,a){var n=Math.round,o=Math.abs;const l=0<=t?1:-1;if(t=o(t),i=o(i),"undefined"==typeof a){const a=t.toExponential(),n=i.toExponential(),r=parseInt(a.slice(a.indexOf("e")+1),10),s=parseInt(n.slice(n.indexOf("e")+1),10),d=0>r?o(r):0,m=0>s?o(s):0,c=Math.max(d,m);if(this.roundCoefficient=c,t<i)return l*t;if(t===i)return 0;if((-1>t||1<t)&&(-1>i||1<i||1===i))if(0==t%1&&0==i%1)return l*(t%i);else{const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=l*parseFloat(new Smart.Utilities.BigNumber(t).mod(i).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,n}const u=Math.pow(10,c);return l*(t*u%(i*u)/u)}return l*(n(t*a)%n(i*a))}createDescriptor(t,i,a,n){let o=parseFloat(t);return n&&(o=this.validate(o,this.context._minObject,this.context._maxObject)),o}round(t){return Math.round(t)}validate(t,i,a){let n;return n=t<i?i:t>a?a:t,n}validateMinMax(t,i){const a=this.context,n="undefined"!=typeof a._regexSpecial&&a._regexSpecial.inf.test(a.min),o="undefined"!=typeof a._regexSpecial&&a._regexSpecial.inf.test(a.max);t&&(null===a.min||n?(a.min=-Infinity,a._minObject=-Infinity):(a.min=a.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.min)&&(a.min=this.scientificToDecimal(a.min)),a._minObject=a._discardDecimalSeparator(a.min))),i&&(null===a.max||o?(a.max=1/0,a._maxObject=1/0):(a.max=a.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.max)&&(a.max=this.scientificToDecimal(a.max)),a._maxObject=a._discardDecimalSeparator(a.max))),this.compare(a._minObject,a._maxObject)||(a._maxObject=parseFloat(a._maxObject)+1,a.max=a._maxObject)}valueToPx(t){const i=this.context,a=i._measurements.trackLength/i._range;let n;return n=i._normalLayout?a*(t-i._drawMin):a*(i._drawMax-t),Math.round(n)}pxToValue(t){const i=this.context;let a;if(a=i._normalLayout?(t-i._trackStart)*i._valuePerPx:(i._trackEnd-t)*i._valuePerPx,i.logarithmicScale){const t=a+parseFloat(i._drawMin);return Math.pow(10,t)}return this.validate(a+i._minObject,i._minObject,i._maxObject)}compare(t,i,a){return!0===a?(t=parseFloat(t),i=parseFloat(i),t<i?-1:t>i?1:0):t!==i}incrementDecrement(t,i,a){const n=this.context;let o;if("add"===i){if(o=parseFloat(t)+parseFloat(a),void 0!==n._drawMax)return o>parseFloat(n._drawMax)?n._drawMax:o;}else if(o=parseFloat(t)-parseFloat(a),void 0!==n._drawMin)return o<parseFloat(n._drawMin)?n._drawMin:o;return o}render(t){const i=this.context,a="undefined"!=typeof i._regexSpecial&&i._regexSpecial.nonNumericValue.test(t);if(a)return t;else{const a=new Smart.Utilities.NumberRenderer(t);return i.scientificNotation?a.toScientific(i.significantDigits,i.precisionDigits):a.toDigits(i.significantDigits,i.precisionDigits)}}addTicksAndLabels(){const t=this.context,i=t._measurements.trackLength,a=t._normalLayout,n=t._majorTicksInterval,o=Math.round(t._range/parseFloat(n.toString())),l=i/o,r=parseFloat(t._drawMin),s=parseFloat(t._drawMax);let d="",m="",c,u,p,g,h,_,f,b,y;t._tickValues=[],this._longestLabelSize=0,a?(c=r,u=t.logarithmicScale&&0>r&&-1!==r?parseFloat(c-this.getPreciseModulo(c,n)):parseFloat(c-this.getPreciseModulo(c,n)+parseFloat(n)),p=u-c,h=t._formatLabel(r),_=t._tickIntervalHandler.labelsSize.minLabelSize,g=s,f=t._formatLabel(s),b=t._tickIntervalHandler.labelsSize.maxLabelSize):(c=s,u=parseFloat(c-this.getPreciseModulo(c,n)),p=c-u,h=t._formatLabel(s),_=t._tickIntervalHandler.labelsSize.maxLabelSize,g=r,f=t._formatLabel(r),b=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),y=this._addMajorTickAndLabel(h,_,!0,c),d+=y.tick,m+=y.label;const v=p/n*l;if(u.toString()!==t._drawMax.toString()&&v<i){const i=t._formatLabel(u.toString()),a=_<v;y=this._addMajorTickAndLabel(i,void 0,a,u,!0),d+=y.tick,m+=y.label}y=this.addMiddleMajorTicks(o,l,v,p,a,n),d+=y.tick,m+=y.label,y=this._addMajorTickAndLabel(f,b,!0,g),d+=y.tick,m+=y.label,d+=this.addMinorTicks(a),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(d,m)}addMiddleMajorTicks(t,a,n,o,l,r){const s=this.context;let i="",d="";for(let m=1;m<t;m++){let c=m*a+n,u;if(u=l?parseFloat(s._drawMin)+r*m+o:parseFloat(s._drawMax)-r*m-o,u.toString()!==s._drawMax.toString()){let n=s._formatLabel(u.toString()),o=!0;s._labelDummy.innerHTML=n;let l=s._labelDummy[s._settings.size];c+l>=t*a&&(o=!1);const r=this._addMajorTickAndLabel(n,void 0,o,u,!0);i+=r.tick,d+=r.label}}return{tick:i,label:d}}addMinorTicks(t){function a(t){return parseFloat(t.toFixed(c))}function n(t){-1===s.indexOf(t)&&0===r._numericProcessor.getPreciseModulo(t,m,u)&&(g+="<div style=\""+p+": "+r._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let t=r._measurements.trackLength,i=t/s.length,a=.1;20>i?a=1:20<=i&&40>i?a=1<_-h?1:.5:40<=i&&80>i&&(a=.2);let n=Math.floor(r._drawMax),d=r._drawMax-n,m=r._drawMax-r._drawMin>s.length;for(let t=r._drawMax;t>r._drawMin-1;--t){let n=0<d?l(10,t-d+1):l(10,t),s=n*a;for(let t=n;0<t;t-=s)if(t<r.max&&t>r.min){let i=new Smart.Utilities.BigNumber(o(t));(0==i%1&&m||!m)&&(g+="<div style=\""+p+": "+r._numericProcessor.valueToPx(i)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var o=Math.log10,l=Math.pow;const r=this.context,s=r._tickValues,d=r._tickIntervalHandler.nearestPowerOfTen,m=r._minorTicksInterval,c=0>o(d)?Math.round(Math.abs(o(d))):0,u=l(10,c),p=r._settings.leftOrTop;let g="",h,_,f;if(t?(h=s[0],_=s[1],f=s[s.length-1]):(h=s[s.length-1],_=s[s.length-2],f=s[0]),r.logarithmicScale)i();else{for(let t=_;t>h;t=a(t-d))n(t);for(let t=a(_+d);t<f;t=a(t+d))n(t)}return g}validateCustomTicks(){const t=this.context;let a=[];for(let n=0;n<t.customTicks.length;n++){const i=t.customTicks[n],o=this.createDescriptor(i);o>=t._minObject&&o<=t._maxObject&&a.push(o.toString())}a.sort(function(t,i){return t-i}),a=a.filter(function(t,i,a){return!i||t!==a[i-1]}),t.customTicks=a.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const a=this.context,n=this,o=Math.max(a._tickIntervalHandler.labelsSize.minLabelSize,a._tickIntervalHandler.labelsSize.maxLabelSize),l=a._majorTicksInterval,r=a._minorTicksInterval,s={},d=a._distance,m=a._measurements.radius,c=m-d.majorTickDistance,u=m-d.minorTickDistance;let p,g,h,_,f,b;"none"!==a.ticksVisibility&&!1!==a._plotTicks?(p=function(t){a._drawTick(t,c,"major")},g=function(t){a._drawTick(n.getAngleByValue(t,!0),u,"minor")}):(p=function(){},g=function(){}),h="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(t,i,n){a._drawLabel(t,i,d.labelDistance,n)}:function(){},a.inverted?(f=a.startAngle,b=a.endAngle):(f=a.endAngle,b=a.startAngle),_=n.getAngleByValue(a._drawMin,!1),p(_),s[a._drawMin]=!0,h(_,a.min,!1);let y=a._drawMin-n.getPreciseModulo(a._drawMin,l),v;0<=a._drawMin&&(y+=l);for(let t=y;t>=a._drawMin;t-=r)v=t;_=n.getAngleByValue(y,!1),p(_),s[y]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(f,n.getAngleByValue(y,!1,!0))/360)>o&&h(_,this.getActualValue(y),y<a._drawMax);let w;for(w=y+l;w<a._drawMax-l;w+=l)_=n.getAngleByValue(w,!1),p(_),s[w]=!0,h(_,this.getActualValue(w),!0);if(void 0===s[w]&&w<=a._drawMax&&(_=n.getAngleByValue(w,!1),p(_),s[w]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(b,n.getAngleByValue(w,!1,!0))/360)>=o&&h(_,this.getActualValue(w),!0),a._normalizedStartAngle!==a.endAngle&&(_=n.getAngleByValue(a._drawMax,!1),p(_),s[a._drawMax]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(b,f)/360)>=o&&h(_,a.max,!1))),!a.logarithmicScale)for(let t=v;t<a._drawMax;t+=r)s[t]||g(t);else this.drawGaugeLogarithmicScaleMinorTicks(s,l,g)}updateToolTipAndValue(t,i,a){const n=this.context,o=n.logarithmicScale;n._updateTooltipValue(t),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11)));const l=t.toString();n._number=t,n._drawValue=o?Math.log10(l):t,l!==i&&a&&(n.value=n._discardDecimalSeparator(l),!n._programmaticValueIsSet&&n.$.fireEvent("change",{value:n.value,oldValue:i}),n.$.hiddenInput&&(n.$.hiddenInput.value=n.value))}validateInterval(t){const i=this.context,a=i._maxObject-i._minObject;i._validInterval=Math.min(parseFloat(t),a),i.interval=i._validInterval}getCoercedValue(t,i,a){var n=Math.abs;const o=this.context;if(!o.coerce)return t;let l=!o.logarithmicScale,r,s;if(o.customInterval){const s=o.customTicks;if(0===s.length)return t;l=l||a,r=!1===i?o._minObject:parseFloat(o._drawMin);let d=n(r-t),m=r;for(let a=0;a<s.length;a++){const i=this.createDescriptor(s[a]),o=l?i:Math.log10(i),r=n(o-t);r<d&&(d=r,m=o)}return m}!1===i?(r=parseFloat(o.min),s=parseFloat(o.max)):(r=parseFloat(o._drawMin),s=parseFloat(o._drawMax));let d=t-r,m=this.getPreciseModulo(d,parseFloat(o.interval)),c=this.roundCoefficient;if(0===m)return t;0===this.roundCoefficient&&(c=12);let u=parseFloat((d-m).toFixed(c)),p=u+parseFloat(o.interval);if(o.max-o.min<=parseFloat(o.interval)&&l){let i=r,a=s;return t>=i+(a-i)/2?a:i}if(n(d-u)<n(d-p))return u+r;else{const t=p+r;return t>s?u+r:t}}updateValue(t){const i=this.context,a=this.validate(t,i._minObject,i._maxObject),n=i._number.toString();t.toString()!==n.toString()||i._scaleTypeChangedFlag?(i.value=t.toString(),i._number=a,!i._programmaticValueIsSet&&i.$.fireEvent("change",{value:i.value,oldValue:n})):i.value="string"==typeof t?t:t.toString(),i._drawValue=i.logarithmicScale?Math.log10(a).toString():a.toString(),i._moveThumbBasedOnValue(i._drawValue),i.$.hiddenInput&&(i.$.hiddenInput.value=i.value)}getValuePerPx(t,i){return parseFloat(t)/i}restrictValue(t){t[1]<t[0]&&(t[1]=t[0])}lockRotation(t,i){const a=this.context;if(t&&i<a._number){if(a._lockCW=!0,i<a._maxObject)return a._maxObject;}else if(!t&&i>a._number&&(a._lockCCW=!0,i>a._minObject))return a._minObject}getAngleRangeCoefficient(){const t=this.context;t._angleRangeCoefficient=t._angleDifference/t._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,i){super(t,i),this.context=t}createDescriptor(t,i,a,n,o,l){let r;return r=l?l:t.constructor===this.complexConstructor?new this.complexConstructor(t.realPart,t.imaginaryPart):new this.complexConstructor(t),n&&(r=this.validate(r,this.context._minObject,this.context._maxObject)),r}validate(t,i,a){let n=t;return i===-Infinity?a!==1/0&&1===this.compareComplexNumbers(t,a)&&(n=new this.complexConstructor(a.realPart,a.imaginaryPart)):-1===this.compareComplexNumbers(t,i)&&(n=new this.complexConstructor(i.realPart,i.imaginaryPart)),n}compare(t,i,a){return!0===a?this.compareComplexNumbers(t,i):0!==this.compareComplexNumbers(t,i)}validateMinMax(t,i){const a=this.context;t&&(null===a.min||a._regexSpecial.inf.test(a.min)?(a.min=-Infinity,a._minObject=-Infinity):a._minObject=new this.complexConstructor(a.min)),i&&(null===a.max||a._regexSpecial.inf.test(a.max)?(a.max=1/0,a._maxObject=1/0):a._maxObject=new this.complexConstructor(a.max))}incrementDecrement(t,i){let a=new this.complexConstructor(t.realPart,t.imaginaryPart),n=this.context._spinButtonsStepObject;return"add"===i?(a.realPart+=n.realPart,a.imaginaryPart+=n.imaginaryPart):(a.realPart-=n.realPart,a.imaginaryPart-=n.imaginaryPart),a}render(t){let i=t;if(!1===this.context._regexSpecial.nonNumericValue.test(t)){let t=i.realPart,a=i.imaginaryPart,n=this.context.significantDigits,o=this.context.precisionDigits,l;0<=a?l="+":(l="-",a=Math.abs(a));const r=new Smart.Utilities.NumberRenderer(t),s=new Smart.Utilities.NumberRenderer(a);this.context.scientificNotation?(t=r.toScientific(n,o),a=s.toScientific(n,o)):(t=r.toDigits(n,o),a=s.toDigits(n,o)),i=`${t} ${l} ${a}i`}return i}compareComplexNumbers(t,i){if(!1==t instanceof this.complexConstructor||!1==i instanceof this.complexConstructor)return-1;const a=t.realPart,n=i.realPart;if(a<n)return-1;if(a>n)return 1;else{const a=t.imaginaryPart,n=i.imaginaryPart;return a<n?-1:a>n?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(t){const i=this;i.numericValue=t,i.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-2":"c","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},i.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(t){return new RegExp(/e/i).test(t)}largeExponentialToDecimal(t){let i;t===void 0&&(t=this.numericValue,i=!0);let a=t.toString().toLowerCase(),n=a.indexOf("e"),o=new Smart.Utilities.BigNumber(a.slice(0,n)),l=a.slice(n+1,n+2);"+"!==l&&"-"!==l&&(a=a.slice(0,n)+"e+"+a.slice(n+1),l="+");let r=a.slice(n+2),s=new Smart.Utilities.BigNumber(10),d=s.pow(l+(i?Math.min(20,r):r)),m=o.multiply(d);return m.toString()}bigNumberToExponent(t,i){let a=this.numericValue;a.constructor!==Smart.Utilities.BigNumber&&(a=new Smart.Utilities.BigNumber(a));const n=a._f;let o=a.toString();if(10>=n)return i?parseFloat(o).toExponential(null===t?void 0:t-1):new Smart.Utilities.NumberRenderer(parseFloat(o)).toDigits(t);if(t>=n&&!i)return o;else{let l;!1===a._s?l="":(l="-",o=o.slice(1));const r=parseFloat(o.slice(t,t+1));5<=r&&(o=new Smart.Utilities.BigNumber(o.slice(0,t)).add(1).toString());let s=o.slice(1,t);if(i)t--,0<s.length&&t>s.length?s+="0".repeat(t-s.length):0===s.length&&(s="0".repeat(t));else for(;0<s.length&&"0"===s.charAt(s.length-1);)s=s.slice(0,s.length-1);const d=0<s.length?".":"";return l+o.slice(0,1)+d+s+"E+"+(n-1)}}toScientific(){const t=this;let i=t.numericValue._d?t.bigNumberToExponent(null===arguments[0]?arguments[1]+1:arguments[0],!0).toLowerCase():(+t.numericValue.toString()).toExponential();const a=i.indexOf("e"),n=i.slice(a+1);let o=parseFloat(i.slice(0,a));if("-2"===n)return o+"c";const l=parseInt(n,10)%3;if(0<l)for(let t=0;t<l;t++)o*=10;else 0>l&&(o=parseFloat(new Smart.Utilities.BigNumber(o).multiply(Math.pow(10,l)).toString()));if(0<n){const t=0<=o?0:1,n=i.slice(t,a).length-l-2;0<=n&&(o=o.toFixed(n))}const r=new Smart.Utilities.NumberRenderer(o);o=r.toDigits(arguments[0],arguments[1]);const s=parseInt(n,10)-l,d=o+t.powersToPrefixes[s.toString()];return d}bigNumberToScientific(){const t=this,i=t.numericValue._f-1,a=parseInt(i,10)%3,n=parseInt(i,10)-a;let o=t.numericValue.toString(),l,r;if("-"===o.charAt(0)?(l="-",o=o.slice(1)):l="",null!==arguments[0])for(r=o.slice(0,arguments[0]),5<=parseFloat(o.slice(arguments[0],arguments[0]+1))&&(r=new Smart.Utilities.BigNumber(r).add(1).toString());r.length>1+a&&"0"===r.charAt(r.length-1);)r=r.slice(0,r.length-1);else null!==arguments[1]&&(r=o.slice(0,arguments[1]+1),5<=parseFloat(o.slice(arguments[1]+1,arguments[1]+2))&&(r=new Smart.Utilities.BigNumber(r).add(1).toString()),arguments[1]+a>r.length-1&&(r+="0".repeat(arguments[1]+a-r.length+1)));return r.length>1+a&&(r=r.slice(0,1+a)+"."+r.slice(1+a)),l+r+t.powersToPrefixes[n.toString()]}toDigits(t,i){const a=this;let n;return n=null===t?null===i?a.applySignificantDigits(8):a.applyPrecisionDigits(i):a.applySignificantDigits(t),n}applySignificantDigits(t){function i(t){for(;"0"===t.charAt(t.length-1);)t=t.slice(0,-1);return"."===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}const a=this;t=Math.max(1,Math.min(t,21));let n=parseFloat(a.numericValue).toPrecision(t).toUpperCase();if(-1!==n.indexOf("."))if(a.isENotation(n)){const t=n.indexOf("."),a=n.indexOf("E");let o=n.slice(t,a);o=i(o),n=n.slice(0,t)+o+n.slice(a)}else n=i(n);return n}applyPrecisionDigits(t){const i=this;t=Math.max(0,Math.min(t,20));let a=parseFloat(i.numericValue).toFixed(t);return i.isENotation(a)&&(a=i.largeExponentialToDecimal(a)+"."+"0".repeat(t)),a}getLogarithm(t){var i=Math.log;const a=this.numericValue;let n;if(void 0===t&&(t=10),10===t)try{n=Math.log10(a)}catch(t){n=i(a)/2.302585092994046}else n=i(a)/i(t);return n}applySeparators(t,i){const a=this;t=t.toString();const n=t.indexOf(".");if(-1!==n){const o=t.slice(0,n),l=t.slice(n+1);return a.applyThousandsSeparator(o,i)+a.localizationObject.decimalseparator+l}return a.applyThousandsSeparator(t,i)}applyThousandsSeparator(t,i){if(i)return t;let a="";t=t.toString(),"-"===t.charAt(0)&&(a="-",t=t.slice(1));let n=t.split("").reverse();for(let a=2;a<n.length-1;a+=3)n[a]=this.localizationObject.thousandsseparator+n[a];return n.reverse(),n=n.join(""),a+n}formatNumber(t,i,a){var n=Math.round;const o=this;if(void 0===arguments[3]&&delete o._ignoreMinus,delete o._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(i))try{const a=o.applyCustomFormat(t,i);return a}catch(i){return t.toString()}const l=i.slice(0,1);let r=i.slice(1);if(""!==r&&(isNaN(parseFloat(r))||0>parseFloat(r)||99<parseFloat(r)?r="":0!=parseFloat(r)%1&&(r=n(r))),t._d)o.inputFormat="integer";else{if(t.imaginaryPart)return o.formatComplexNumber(t,i,l,r);o.inputFormat="floatingPoint"}let s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.createDescriptor(t),m;switch(o._wordLengthNumber=s.getWordLength(a?a:"int32"),"integer"===o.inputFormat&&(d=s.round(d)),o.numericValue=d,l){case"C":case"c":return""===r&&(r=o.localizationObject.defaultPrecision),r=parseFloat(r),m="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(r):d.toString()+(0<r?"."+"0".repeat(r):""),m=o.applySeparators(m),"before"===o.localizationObject.currencysymbolposition?"-"===m.charAt(0)?"-"+o.localizationObject.currencysymbol+m.slice(1):o.localizationObject.currencysymbol+m:m+" "+o.localizationObject.currencysymbol;case"D":case"d":{if(m=d,"floatingPoint"===o.inputFormat&&(m=n(d)),m=m.toString(),""===r)return m;let t="";"-"===m.charAt(0)&&(t="-",m=m.slice(1));const i=r-m.length;return 0<i&&(m="0".repeat(i)+m),t+m}case"E":case"e":case"U":case"u":{""===r&&(r=6),m="floatingPoint"===o.inputFormat?d.toExponential(r):o.bigNumberToExponent(parseFloat(r)+1,!0).toLowerCase();const t=m.indexOf("e"),i=m.slice(t+2).length;return(3>i&&(m=m.slice(0,t+2)+"0".repeat(3-i)+m.slice(t+2)),"u"===l.toLowerCase())?o.exponentialToSuperscript(o.applySeparators(m,!0)):("E"===l&&(m=m.toUpperCase()),o.applySeparators(m,!0))}case"F":case"f":case"N":case"n":return""===r&&(r=o.localizationObject.defaultPrecision),r=parseFloat(r),m="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(r):d.toString()+(0<r?"."+"0".repeat(r):""),o.applySeparators(m,"f"===l.toLowerCase());case"G":case"g":{(""===r||"0"===r)&&(r="floatingPoint"===o.inputFormat?15:"int8"===a||"uint8"===a?3:"int16"===a||"uint16"===a?5:"int64"===a?19:"uint64"===a?20:10),r=parseFloat(r);let i=o.formatNumber(t,"E"+r,a),n=i.indexOf("E");const s=parseInt(i.slice(n+1),10);if(-5<s&&s<r)return"floatingPoint"===o.inputFormat?o.applySeparators(o.applySignificantDigits(r),!0):d.toString();if(-100<s&&100>s&&(i=i.slice(0,n+2)+i.slice(n+3)),-1!==i.indexOf(o.localizationObject.decimalseparator)){for(;"0"===i.charAt(n-1);)i=i.slice(0,n-1)+i.slice(n),n=i.indexOf("E");i.charAt(n-1)===o.localizationObject.decimalseparator&&(i=i.slice(0,n-1)+i.slice(n))}return"g"===l&&(i=i.toLowerCase()),i}case"P":case"p":return""===r&&(r=o.localizationObject.defaultPrecision),r=parseFloat(r),"floatingPoint"===o.inputFormat?(o.numericValue=100*d,m=o.applyPrecisionDigits(r)):m=d.multiply(100).toString()+(0<r?"."+"0".repeat(r):""),o.applySeparators(m)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{"integer"!==o.inputFormat&&(o.inputFormat="integer",s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.round(s.createDescriptor(t)));let i;if(i="B"===l||"b"===l?2:"O"===l||"o"===l?8:16,m=d.toString(i,o._wordLengthNumber),""!==r){const t=parseFloat(r)-m.length;0<t&&(m="0".repeat(t)+m)}return"x"===l&&(m=m.toLowerCase()),m}case"S":case"s":return""===r&&(r=o.localizationObject.defaultPrecision),r=parseFloat(r),o.toScientific(null,r).replace(".",o.localizationObject.decimalseparator);default:return t.toString();}}formatComplexNumber(t,i,a){const n=this;return"E"===a||"e"===a||"U"===a||"u"===a||"F"===a||"f"===a||"G"===a||"g"===a||"N"===a||"n"===a||"S"===a||"s"===a?0<=t.imaginaryPart?n.formatNumber(t.realPart,i)+" + "+n.formatNumber(t.imaginaryPart,i)+"i":n.formatNumber(t.realPart,i)+" - "+n.formatNumber(Math.abs(t.imaginaryPart),i)+"i":t.toString()}toString(t,i,a){return i?this.formatNumber(t,i,a):t.toString()}applyCustomFormat(t,i){const a=this;i=i.replace(/_.|\[\w*\]|.\*|\*./g,""),i=i.replace(/\?/g,"#");const n=i.split(";");if("string"==typeof t&&isNaN(t))return n[n.length-1].replace(/"/g,"").replace(/@/g,t.toString());if(t._d)a.inputFormat="integer";else{if(t.imaginaryPart)return t.toString();t=parseFloat(t),a.inputFormat="floatingPoint"}let o=new Smart.Utilities.NumericProcessor(a,"inputFormat"),l=o.createDescriptor(t);"integer"===a.inputFormat&&(l=o.round(l)),a.numericProcessor=o;const r=a.getRelevantFormatSection(n,l);if(void 0===r)return t.toString();if(-1!==r.indexOf("@"))return n[n.length-1].replace(/"/g,"").replace(/@/g,t.toString());const s=-1!==r.replace(/".*"/g,"").indexOf("%"),d=a.getTextParts(r);if(-1!==d.main.toLowerCase().indexOf("e"))return a.applyCustomExponentialFormat(l,d,o);if(-1!==d.main.indexOf("/"))return a.applyCustomFractionalFormat(l,d,o);if(s&&("integer"===a.inputFormat?l=l.multiply(100):l=Math.round(100*l)),""===d.main){if(!s)return d.suffix;let t=l.toString();return a._ignoreMinus&&"-"===t.charAt(0)&&(t=t.slice(1)),t+d.suffix}let m=d.main.replace(/[^0#,. \/]/g,""),c=m.indexOf(".");for(-1!==c&&(m=m.substring(0,c+1)+m.substring(c+1).replace(/\./g,""),"."===m.charAt(m.length-1)&&(m=m.slice(0,m.length-1)),0===c&&(m="#"+m));","===m.charAt(m.length-1);)m=m.slice(0,m.length-1),"floatingPoint"===a.inputFormat?l/=1e3:l=l.multiply(.001);"integer"===a.inputFormat&&(l=o.round(l));const u=-1!==m.indexOf(",");m=m.replace(/,/g,"");const p=m.split("."),g=p[0];let h=p[1],_="";if(1===p.length)return"floatingPoint"===a.inputFormat&&(l=o.round(l)),_=l.toString(),a.setTextParts(a.formatWholeNumber(_,g,u),d);_=l.toString();let f=_.split("."),b=a.formatWholeNumber(f[0],g,u),y=f[1]||"";if(h.length<=y.length&&(_=parseFloat(l.toFixed(h.length)).toString(),f=_.split("."),b=a.formatWholeNumber(f[0],g,u),y=f[1]||"",y))return a.setTextParts(b+a.localizationObject.decimalseparator+y.slice(0,h.length),d);h=h.slice(y.length-h.length);let v=h.lastIndexOf("0");return-1===v?""===y?a.setTextParts(b,d):a.setTextParts(b+a.localizationObject.decimalseparator+y,d):a.setTextParts(b+a.localizationObject.decimalseparator+y+"0".repeat(v+1),d)}getRelevantFormatSection(t,i){const a=this,n=a.numericProcessor.compare(i,0,!0);if(1===n)return t[0];let o,l;return 3<=t.length?(a._ignoreMinus=!0,o=1,l=2):2===t.length?(a._ignoreMinus=!0,l=0,o=1):1===t.length&&(l=0,o=0),0===n?t[l]:-1===n?t[o]:void 0}getTextParts(t){const i=t.replace(/"[^"]*"/g,""),a=t.match(/"[^"]*"/g),n=i.search(/0|#|\./g),o=Math.max(i.lastIndexOf("0"),i.lastIndexOf("#"),i.lastIndexOf("."),i.lastIndexOf(",")),l=i.slice(n,o+1);if(""===l)return{prefix:"",main:"",suffix:t.replace(/"/g,"")};let r=t.indexOf(l),s=r+l.length;if(a)for(let n=0;n<a.length;n++){const i=t.indexOf(a[n]);r>=i&&s<=i+a[n].length&&(r=t.indexOf(l,i+a[n].length),s=r+l.length)}const d=t.slice(0,r).replace(/"/g,""),m=t.slice(s).replace(/"/g,"");return{prefix:d,main:l,suffix:m}}applyCustomExponentialFormat(t,i,a){var n=Math.pow;const o=this;let l=i.main,r;const s=-1!==l.indexOf(",");l=l.replace(/[^0#.eE+-]/g,"");const d=l.toLowerCase().indexOf("e");l=l.substring(0,d+1)+l.substring(d+1).replace(/[eE\.]/g,"");const m=l.charAt(d),c=l.indexOf(".");-1!==c&&(l=l.substring(0,c+1)+l.substring(c+1).replace(/\./g,"")),"."===l.charAt(l.length-1)&&(l=l.slice(0,l.length-1));const u=l.split(m);let p=u[0];const g=p.split("."),h=g[0],_=g[1],f=u[1];let b=t.toString().split(".")[0].replace(/-/,""),y=0;if("0"===b&&a.compare(t,0)){let i=h.length-1;for(;0===parseInt(t);)y++,t*=10;b=t.toString().split(".")[0].replace(/-/,""),y+=i,t*=n(10,i)}if(s&&(p=p.slice(0,1)+","+p.slice(1)),b.length<=h.length)r=o.formatNumber(t,p,void 0,!0)+m+o.formatExponent(0-y,f);else{const i=b.length-h.length;let l="floatingPoint"===o.inputFormat?t/n(10,i):t.divide(n(10,i));if(!_){let t=o.applyThousandsSeparator(a.round(l).toString(),!s);r=t+m+o.formatExponent(i-y,f)}let d=l.toString().split(".")[1]||"";d.length===_.length?r=o.applySeparators(l,!s)+m+o.formatExponent(i-y,f):d.length<_.length?r=o.formatNumber(l,p,void 0,!0)+m+o.formatExponent(i-y,f):(l="floatingPoint"===o.inputFormat?l.toFixed(_.length):l=a.round(t.divide(n(10,i-_.length))).divide(n(10,_.length)),r=o.formatNumber(parseFloat(l),p,void 0,!0)+m+o.formatExponent(i-y,f))}return o.setTextParts(r,i)}formatExponent(t,i){let a;return-1!==["+","-"].indexOf(i.charAt(0))&&(a=i.charAt(0),(0<t&&"-"===a||0>t&&"+"===a)&&(a=void 0)),0>t&&(t=Math.abs(t),a="-"),i=i.replace(/[+-]/g,""),t=this.formatNumber(t,i,void 0,!0),(a?a:"")+t}formatWholeNumber(t,a,i){const n=this;let o="";if("-"===t.charAt(0)&&(!n._ignoreMinus&&(o="-"),t=t.slice(1)),"0"===t){if(a==="#".repeat(a.length))return o;t=""}if(a.length<=t.length)return o+n.applyThousandsSeparator(t,!i);a=a.slice(0,a.length-t.length);for(let n=a.length-1;0<=n;n--)"0"===a.charAt(n)&&(t="0"+t);return o+n.applyThousandsSeparator(t,!i)}setTextParts(t,i){return i.prefix+t+i.suffix}applyCustomFractionalFormat(t,i,a){var n=Math.abs;const o=this,l=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let r=i.main.trim(),s;if(!l.test(r))return t.toString();const d=l.exec(r);if(d[2]=d[2].replace(/,/g,""),"integer"===o.inputFormat){const a=d[2].split("/");return void 0===d[1]?s=o.formatNumber(t,a[0],void 0,!0)+"/"+o.formatNumber(1,a[1],void 0,!0):(s=o.formatNumber(t,d[1].trim(),void 0,!0),-1!==d[2].indexOf("0")&&(s+=" "+o.formatNumber(0,a[0],void 0,!0)+"/"+o.formatNumber(1,a[1],void 0,!0))),o.setTextParts(s,i)}if(void 0===d[1])s=(0>t?"-":"")+o.formatAsFraction(n(t),d[2]);else{const i=d[1].trim(),l=d[2];s=o.formatNumber(parseInt(t,10),i,void 0,!0)+" "+o.formatAsFraction(a.getPreciseModulo(n(t),1),l)}return o.setTextParts(s.trim(),i)}formatAsFraction(t,i){const a=this,n=i.split("/");if(0===t)return-1===i.indexOf("0")?"":a.formatNumber(0,n[0],void 0,!0)+"/"+a.formatNumber(1,n[1],void 0,!0);if(0==t%1)return a.formatNumber(t,n[0],void 0,!0)+"/"+a.formatNumber(1,n[1],void 0,!0);const o=[];a.approximateFractions(t,o);const l=2<=n[1].length?2:1;let r=[],s=[];o.forEach(function(i,a){const n=i.denominator.toString().length,o=Math.abs(t-i.numerator/i.denominator);return void 0===r[n]?(s[n]=a,void(r[n]=o)):void(o<r[n]&&(s[n]=a,r[n]=o))});let d=s[l]?o[s[l]]:o[s[1]];return a.formatNumber(d.numerator,n[0],void 0,!0)+"/"+a.formatNumber(d.denominator,n[1],void 0,!0)}approximateFractions(t,a){const n=[0,1],o=[1,0],l=this.getMaxNumerator(t);let r=t,s=NaN,d;for(let m=2;1e3>m;m++){const i=Math.floor(r);if(n[m]=i*n[m-1]+n[m-2],Math.abs(n[m])>l)return;if(o[m]=i*o[m-1]+o[m-2],d=n[m]/o[m],d===s)return;if(a.push({numerator:n[m],denominator:o[m]}),d===t)return;s=d,r=1/(r-i)}}getMaxNumerator(t){let i=null,a=t.toString().indexOf("E");-1===a&&(a=t.toString().indexOf("e")),i=-1===a?t.toString():t.toString().substring(0,a);let n=null;const o=i.toString().indexOf(".");-1===o?n=i:0===o?n=i.substring(1,i.length):o<i.length&&(n=i.substring(0,o)+i.substring(o+1,i.length));let l=n;const r=l.toString().length,s=t;let d=s.toString().length;0===s&&(d=0);const m=r-d;for(let a=m;0<a&&0==l%2;a--)l/=2;for(let a=m;0<a&&0==l%5;a--)l/=5;return l}exponentialToSuperscript(t){const i=t.indexOf("e"),a=t.slice(i+1).replace(/0{1,2}/,"");let n=t.slice(0,i+1);return n=n.replace("e","\xD710"),n+=this.toSuperscript(a),n=n.replace("+",""),n}toSuperscript(t,a){const o="-0123456789",l="\u207B\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";let r="";for(let s=0;s<t.length;s++)if(!0===a){const i=l.indexOf(t.charAt(s));r+=-1===i?t[s]:o[i]}else{const i=o.indexOf(t.charAt(s));r+=-1===i?t[s]:l[i]}return r}}),Smart.Utilities.Assign("ConditionalFormatter",class{constructor(t){const i=this;i.data=t||[],i._allowedDateComparators=["yesterday","today","tomorrow","last7Days","lastWeek","thisWeek","nextWeek","lastMonth","thisMonth","nextMonth","lastYear","thisYear","nextYear"],i._colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#63BE7B","#FDD17F","#F8696B"]},{name:"scheme29",colors:["#F8696B","#FDD17F","#63BE7B"]},{name:"scheme30",colors:["#63BE7B","#FCFCFF","#F8696B"]},{name:"scheme31",colors:["#F8696B","#FCFCFF","#63BE7B"]},{name:"scheme32",colors:["#5A8AC6","#FCFCFF","#F8696B"]},{name:"scheme33",colors:["#F8696B","#FCFCFF","#5A8AC6"]},{name:"scheme34",colors:["#FCFCFF","#F8696B"]},{name:"scheme35",colors:["#F8696B","#FCFCFF"]},{name:"scheme36",colors:["#63BE7B","#FCFCFF"]},{name:"scheme37",colors:["#FCFCFF","#63BE7B"]},{name:"scheme38",colors:["#63BE7B","#FFEF9C"]},{name:"scheme39",colors:["#FFEF9C","#63BE7B"]},{name:"scheme40",colors:["#000000","#8b0000 ","#FFFF00","#FFFFFF"]},{name:"scheme41",colors:["#63BE7B","#FDD17F ","#F8696B","#FF69B4"]},{name:"scheme42",colors:["#63BE7B","#FDD17F ","#FDD17F","#F8696B"]},{name:"scheme00",colors:["#63BE7B","#FDD17F","#FDD17F","#FDD17F","#F8696B"]}]}format(t,i,a){const n=this,o=n.data;if(0!==o.length&&(t?n.condition=t:t=n.condition,!!t)){(void 0===n.comparator||null===n.comparator)&&(n.comparator=a),i?n.columns=i:i=n.columns,n.color&&(n.color=/^#[0-9A-F]{6}$/i.test(n.color)?n.color:void 0),i&&Array.isArray(i)&&(!Array.isArray(i)||0!==i.length)||(i=n.columns=[]);let t={};for(let a=0;a<i.length;a++){const l=i[a];null!==o[0][l]&&void 0!==o[0][l]&&(t[l]=n._validateColumnData(l))}return 0===Object.keys(t).length?void 0:t}}_applyColorScale(t){function a(t){let i=0;for(;i<p;){if(t<=m[i].max)return i;i++}return o(0,n(p-1,i))}var n=Math.min,o=Math.max;const l=this,r=t.length;if(0===r)return;const s=l.colorScheme===void 0?[l.color]:l._getSchemeColors();if(0===s.length||void 0===s[0]||null===s[0])return;let d={},m={},c,u;const p=s.length-("iconSet"===l.condition?0:1),i=l._getColumnRange(t),h=parseFloat(l.min)||i.min,_=o(h,parseFloat(l.max)||i.max);for(let i=0;i<p;i++)m[i]={min:m[i-1]?m[i-1].max:h,max:h+(_-h)*((i+1)/p)};0==p&&(m[0]={min:h,max:_});for(let g=0,i;g<r;g++)(i=t[g]instanceof Date?t[g].getTime():t[g],i=n(_,o(h,i)),"number"==typeof i)&&(c=a(i)||0,"iconSet"===l.condition?d[g]={"--icon-set":" ","--icon-set-color":s[c],"--icon-set-rotation-angle":l._getRotationAngle(c/(p-1)||0)+"deg"}:(u=1-((i-m[c].min)/(m[c].max-m[c].min)||0),d[g]=l._getCellStyle(l._mixColors(s[c],s[n(c+1,p)],u))));return d}_applyColorBar(t){const i=this,a=t.length,n=i._getColumnRange(t),o=i.min?parseFloat(i.min)||0:n.min,l=i.max?parseFloat(i.max)||0:n.max,r=i.colorScheme===void 0?[i.color]:i._getSchemeColors();let s="",d={},m;for(let i=0;i<r.length;i++)void 0!==r[i]&&null!==r[i]&&(s+=r[i]+",");if(!s)return void console.log("Invalid color/colorScheme detected.");s=s.slice(0,-1),m=1===r.length?r[0]:"-webkit-linear-gradient(left,"+s+")";for(let n=0,i;n<a;n++)(i=t[n]instanceof Date?t[n].getTime():t[n],i=Math.min(l,Math.max(o,t[n])),"number"==typeof i)&&(d[n]={"--color-bar":" ","--bar-width":(100*((i-o)/(l-o))||0)+"%","--bar-color":m});return d}_applyRule(t){function a(a){switch(o){case"between":{if(a instanceof Date&&(a=a.getTime()),a>=l&&a<=r)return a;break}case"contains":if(-1<(a+"").indexOf(s))return a;break;case"duplicate":{let o=0;for(let l=0;l<n;l++)if(t[l]===a&&o++,1<o)return a;break}case"dateOccur":{const t=i._getDateRange(a,s);if(!t)break;if(a=new Date(a),isNaN(a.getTime()))break;const n=a.getTime(),o=t.min.getTime(),l=t.max.getTime();if(n>=o&&n<=l)return a;break}case"doesNotContain":if(0>(a+"").indexOf(s))return a;break;case"equal":if("number"==typeof a&&a===parseFloat(s))return a;if("string"==typeof a&&0===a.localeCompare(s+""))return a;if("boolean"==typeof a&&a+""==s+"")return a;if(a instanceof Date&&a.getTime()===new Date(s).getTime())return a;break;case"greaterThan":if(a>parseFloat(s))return a;break;case"lessThan":if(a<parseFloat(s))return a;break;case"notEqual":if("number"==typeof a&&a!==parseFloat(s))return a;if("string"==typeof a&&0!==a.localeCompare(s+""))return a;if("boolean"==typeof a&&a+""!=s+"")return a;if(a instanceof Date&&a.getTime()!==new Date(s).getTime())return a;break;case"topNItems":case"bottomNItems":case"topNPercent":case"bottomNPercent":if(d||(d=t.slice(0).sort(0===o.indexOf("top")?(t,i)=>t<i?1:t>i?-1:0:(t,i)=>t>i?1:t<i?-1:0).slice(0,parseInt(0<o.indexOf("Percent")?n*s/100:s))),-1<d.indexOf(a))return a;break;case"aboveAverage":case"belowAverage":if(!m){let i=0;t.map(t=>i+=parseFloat(t)),m=i/n}if("aboveAverage"===o&&a>m)return a;if("belowAverage"===o&&a<m)return a;}return null}const i=this,n=t.length,o="string"==typeof i.condition?i.condition.trim():"";let l=parseFloat(i.min)||0,r=Math.max(l,parseFloat(i.max)||0),s,d,m;if(s="dateOccur"===o?"string"==typeof i.comparator&&-1<i._allowedDateComparators.indexOf(i.comparator.trim())?i.comparator.trim():void 0:Array.isArray(i.comparator)?i.comparator[0].trim():i.comparator,!t||0===t.length)return;if(0>["odd","even","duplicate","dateOccur","between","aboveAverage","belowAverage"].indexOf(o)&&0!==o.indexOf("everyN")&&(void 0===s||null===s))return console.warn(i.condition+" requires a comparator."),[];if("odd"===o||"even"===o||0===o.indexOf("everyN"))return i._getAlternateItems(t);let c=[],u;for(let o=0;o<n;o++)u=a(t[o],o),void 0!==u&&null!==u&&c.push(o);return c}_getAlternateItems(t){const i=this,a=t.length,n="string"==typeof i.condition?i.condition.trim():"",o=parseInt(i.min)||0,l=Math.max(o,parseInt(i.max)||a)-1,r=parseInt(i.comparator);let s=[],d=0;for(let m=0;m<=a;m++)if(!(m<o)){if(m>l)break;"even"===n&&0==(m+1)%2?s.push(m):"odd"===n&&0!=(m+1)%2?s.push(m):void 0!==r&&!isNaN(r)&&(d===r?(s.push(m),d=0):d++)}return s}_getColumnRange(t){const a=t.length;let n=0,o,l;for(let r=0;r<a;r++)l=t[r],l instanceof Date&&(l=l.getTime()),l>n&&(n=l),void 0===o&&(o=l),l<o&&(o=l);return{min:parseFloat(o)||0,max:parseFloat(n)||0}}_getCellStyle(t,i){var a=this._hexToRgba(t,i).toString(),n=this._getTextElementByColor(this._hexToRgba(t,.7));return{background:a,color:n,border:t}}_getDateRange(t,i){var a=Math.abs;const n=new Date(t);let o,l;if(n instanceof Date&&i){const t=new Date;switch(i){case"yesterday":case"today":case"tomorrow":{"yesterday"===i?l=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1):"today"===i?(l=new Date,l.setHours(0,0,0,0)):l=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),o=l;break}case"last7Days":l=new Date(t.getFullYear(),t.getMonth(),t.getDate()-6),o=new Date(t);break;case"lastWeek":case"thisWeek":case"nextWeek":l="lastWeek"===i?new Date(t.getFullYear(),t.getMonth(),t.getDate()-6-t.getDay()):"thisWeek"===i?new Date(t.getFullYear(),t.getMonth(),t.getDate()-a(1-t.getDay())):new Date(t.getFullYear(),t.getMonth(),t.getDate()+a(7-t.getDay())),o=new Date(l.getFullYear(),l.getMonth(),l.getDate()+6);break;case"lastMonth":case"thisMonth":case"nextMonth":"lastMonth"===i?(o=new Date(t.getFullYear(),t.getMonth(),0),l=new Date(o.getFullYear(),o.getMonth(),1)):"thisMonth"===i?(l=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0)):(l=new Date(t.getFullYear(),t.getMonth()+1,1),o=new Date(t.getFullYear(),t.getMonth()+2,0));break;case"lastYear":case"thisYear":case"nextYear":"lastYear"===i?(l=new Date(t.getFullYear()-1,0,1),o=new Date(t.getFullYear()-1,12,0)):"thisYear"===i?(l=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),12,0)):(l=new Date(t.getFullYear()+1,0,1),o=new Date(t.getFullYear()+1,12,0));}return{min:l,max:o}}}_getRotationAngle(t){var i=Math.round;let a=t;return .25>t?a=i(t)?.25:0:.25<t&&.5>t?a=i(t)?.5:.25:.5<t&&.75>t?a=i(t)?.75:.5:.75<t&&1>t&&(a=i(t)?1:.75),180*a}_getSchemeColors(){const t=this;let i;if("string"==typeof t.colorScheme)i=0===t.colorScheme.indexOf("scheme")?t._colorSchemes.filter(i=>i.name===t.colorScheme)[0]:void 0;else if("number"==typeof t.colorScheme)i=t._colorSchemes[t.colorScheme]?t._colorSchemes[t.colorScheme]:void 0;else return[];return i="object"==typeof i?i.colors:t._colorSchemes[0].colors}_getTextElementByColor(t){return 125<=.299*t.r+.587*t.g+.114*t.b?"Black":"White"}_hexToRgba(t,i){const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);var n=function(){return 1<this.alpha||void 0===this.alpha||null===this.alpha?this.alpha=1:0>this.alpha&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};return void 0===i?a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),toString:n}:null:(1<i?i=1:0>i&&(i=0),a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),alpha:i,toString:n}:null)}_mixColors(t,a,i){const n=t=>t.toString(16),o=t=>parseInt(t,16);let l="#",r;i="undefined"==typeof i?.5:i,t=t.replace(/#/g,""),a=a.replace(/#/g,"");for(let s=0;5>=s;s+=2){const d=o(t.substr(s,2)),m=o(a.substr(s,2));for(r=n(Math.floor(m+(d-m)*i));2>r.length;)r="0"+r;l+=r}return l}_shadeColor(i,a){var n=Math.round,o=parseInt(i.slice(1),16),l=0>a?0:255,t=0>a?-1*a:a,r=o>>16,s=255&o>>8,d=255&o;return"#"+(16777216+65536*(n((l-r)*t)+r)+256*(n((l-s)*t)+s)+(n((l-d)*t)+d)).toString(16).slice(1)}_validateColumnData(t){const i=this,a=[],n=i.data;let o={},l;for(let i=0;i<n.length;i++)a.push(n[i][t]);if("colorScale"===i.condition||"iconSet"===i.condition)return i._applyColorScale(a);if("colorBar"===i.condition)return i._applyColorBar(a);if(l=i._applyRule(a),!!l){if(!i.color)return void console.warn("No color is provided. \"color\" property is not set.");for(let t=0;t<l.length;t++)o[l[t]]=i._getCellStyle(i.color);return o}}}),Smart.Utilities.Assign("TickIntervalHandler",class{constructor(t,i,a,n,o,l,r){const s=this;s.context=t,s.minLabel=i,s.maxLabel=a,s.labelClass=n,s.dimension=o,s.logarithmic=r,s.labelsSize=t.customInterval?0<t.customTicks.length?s.getCustomTicksLabelSize():{minLabelSize:0,minLabelOtherSize:0,maxLabelSize:0,maxLabelOtherSize:0}:s.getMinAndMaxLabelSize(),l?(s.getNiceInterval=s.getNiceIntervalInteger,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelInteger):(s.getNiceInterval=s.getNiceIntervalFloatingPoint,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelFloatingPoint)}getInterval(t,i,a,n){var o=Math.max;const l=this.context,r=l._measurements.innerRadius;let s=1,d;"radial"===t?(d=o(this.labelsSize.minLabelSize,this.labelsSize.minLabelOtherSize,this.labelsSize.maxLabelSize,this.labelsSize.maxLabelOtherSize),s=1.35):(d=o(this.labelsSize.minLabelSize,this.labelsSize.maxLabelSize),s=1.45),d*=s;let m;m="radial"===t?function(){let t=2*Math.PI*r*(Math.abs(l.startAngle-l.endAngle)/360);return Math.round(t)}():l[this.dimension]-this.labelsSize.minLabelSize/2-this.labelsSize.maxLabelSize/2,m=o(10,m);const c=Math.ceil(m/d),u="radial"===t?4*c:3*c;let p=this.getNiceInterval(i,a,c,!0),g=this.getNiceInterval(i,a,u);if(l._cachedLabelsSize=this.labelsSize,2<c&&!l.customInterval){const r=this.getPossibleBiggerLabel(c,p);if(r.length>o(this.minLabel.length,this.maxLabel.length)){const o=this.minLabel;this.minLabel=r,this.labelsSize=this.getMinAndMaxLabelSize(),l._cachedLabelsSize=this.labelsSize;const s=this.getInterval(t,i,a,n);return this.minLabel=o,this.labelsSize=this.getMinAndMaxLabelSize(),s}}return{major:p,minor:g}}getNiceIntervalFloatingPoint(t,i,a,n){var o=Math.log10;const l=i-t,r=Math.floor(o(l)-o(a));let s=Math.pow(10,r),d=a*s,m;m=l<2*d?1:l<3*d?2:l<7*d?5:10;let c=m*s;return n&&this.context._range/c>a&&(5===m?m=10:2===m?m=5:1===m?m=2:void 0,c=m*s),this.nearestPowerOfTen=s,this.logarithmic&&n?Math.max(1,c):c}getPossibleBiggerLabelFloatingPoint(t,a){var n=Math.pow;const o=this.context;let i=parseFloat(o.min-o._numericProcessor.getPreciseModulo(parseFloat(o.min),a)+parseFloat(a)),l=i,r,s;this.logarithmic&&(i=n(10,i)),r=o._formatLabel(i);for(let d=1;d<t&&(l+=a,!(l>=o._drawMax));d++)s=this.logarithmic?n(10,l):l,s=o._formatLabel(s),s.length>r.length&&(r=s);return r}getNiceIntervalInteger(t,i,a,n){var o=Math.log10;const l=new Smart.Utilities.BigNumber(i).subtract(new Smart.Utilities.BigNumber(t)),r=Math.floor(o(l.toString())-o(a)),s=new Smart.Utilities.BigNumber(10).pow(new Smart.Utilities.BigNumber(r)),d=new Smart.Utilities.BigNumber(a).multiply(s);let m=-1===l.compare(new Smart.Utilities.BigNumber(2*d))?1:-1===l.compare(new Smart.Utilities.BigNumber(3*d))?2:-1===l.compare(new Smart.Utilities.BigNumber(7*d))?5:10;let c=new Smart.Utilities.BigNumber(m).multiply(s);return n&&1===new Smart.Utilities.BigNumber(this.context._range).divide(c).compare(a)&&(5===m?m=10:2===m?m=5:1===m?m=2:void 0,c=new Smart.Utilities.BigNumber(m).multiply(s)),-1===c.compare(1)&&(c=new Smart.Utilities.BigNumber(1)),this.nearestPowerOfTen=s,c}getPossibleBiggerLabelInteger(t,a){const n=this.context,o=new Smart.Utilities.BigNumber(10);let i=new Smart.Utilities.BigNumber(n.min).subtract(new Smart.Utilities.BigNumber(n.min).mod(a)).add(a),l=i,r,s;this.logarithmic&&(i=o.pow(i)),r=n._formatLabel(i);for(let d=1;d<t&&(l=l.add(a),-1===l.compare(n._drawMax));d++)s=this.logarithmic?o.pow(l):l,s=n._formatLabel(s),s.length>r.length&&(r=s);return r}getMinAndMaxLabelSize(){const t=this,i=t.context,a=i.$.container,n=document.createElement("span");n.className=t.labelClass,n.style.position="absolute",n.style.visibility="hidden",a.appendChild(n),n.innerHTML=t.minLabel;const o=n[t.dimension],l=n[i._settings.otherSize];n.innerHTML=t.maxLabel;const r=n[t.dimension],s=n[i._settings.otherSize];return a.removeChild(n),{minLabelSize:o,minLabelOtherSize:l,maxLabelSize:r,maxLabelOtherSize:s}}getCustomTicksLabelSize(){const t=this,a=t.context,i=a.$.container,n=document.createElement("span"),o=a.customTicks;n.className=t.labelClass,n.style.position="absolute",n.style.visibility="hidden",i.appendChild(n),n.innerHTML=a._formatLabel(o[0]);let l=n[t.dimension],r=n[a._settings.otherSize];for(let o=1;o<a.customTicks.length;o++){n.innerHTML=a._formatLabel(a.customTicks[o]);const i=n[t.dimension],s=n[a._settings.otherSize];i>l&&(l=i),s>r&&(r=s)}return i.removeChild(n),{minLabelSize:l,minLabelOtherSize:r,maxLabelSize:l,maxLabelOtherSize:r}}}),Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class='smart-button' inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role='button'></button>"}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}_upHandler(t){const i=this;t.stopPropagation(),i.$.setAttributeValue("active",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_clickHandler(t){const i=this;("release"!==i.clickMode&&"pressAndRelease"!==i.clickMode||i.readonly)&&(t.preventDefault(),t.stopPropagation())}_downHandler(t){const i=this;if(!i.disabled&&(i.enableShadowDOM||t.originalEvent.stopPropagation(),i.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(i,t.pageX,t.pageY),i.$.setAttributeValue("active",!0),("press"===i.clickMode||"pressAndRelease"===i.clickMode)&&!i.readonly)){const a="buttons"in t?t.buttons:t.which;i.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_mouseEnterHandler(t){const i=this;if(!i.readonly&&(i.$button.setAttributeValue("hover",!0),i.$.setAttributeValue("hover",!0),"hover"===i.clickMode)){const a="buttons"in t?t.buttons:t.which;i.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_touchEndHandler(){const t=this;setTimeout(function(){t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){const t=this;t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"disabled"===t?(n._setFocusable(),n.$button&&n.$button.setAttributeValue("hover",!1),n.$.setAttributeValue("hover",!1),n instanceof Smart.RepeatButton&&n._stopRepeat()):"unfocusable"==t&&n._setFocusable()}_setFocusable(){const t=this,i=t.$.button?t.$.button:t;return t.disabled||t.unfocusable?(i.removeAttribute("tabindex"),void(i.tabIndex=-1)):void(i.tabIndex=0<t.tabIndex?t.tabIndex:0)}ready(){const t=this;super.ready(),t._setFocusable()}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.mousedown":"_startRepeat","button.mouseenter":"_updateInBoundsFlag","button.mouseleave":"_updateInBoundsFlag","document.mouseup":"_stopRepeat"}}_clickHandler(t){const i=this;("release"!==i.clickMode||i.preventDefaultClick||i.readonly||i.disabled)&&(t.preventDefault(),t.stopPropagation(),i.preventDefaultClick=!1)}_updateInBoundsFlag(t){const i=this;i._isPointerInBounds=!0,"mouseleave"===t.type?(i._isPointerInBounds=!1,i.$button.setAttributeValue("hover",!1),i.$.setAttributeValue("hover",!1)):(i.$button.setAttributeValue("hover",!0),i.$.setAttributeValue("hover",!0));const a="buttons"in t?t.buttons:t.which;1!==a&&i._stopRepeat(t)}_startRepeat(t){const i=this;i._initialTimer||i.readonly||(i._initialTimer=setTimeout(function(){i._repeatTimer=setInterval(()=>{if(i._isPointerInBounds){const a="buttons"in t?t.buttons:t.which;i.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),i.preventDefaultClick=!0}},i.delay)},i.initialDelay))}_stopRepeat(){const t=this;t.readonly||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready()}_buttonClickHandler(){}_buttonMouseLeaveHandler(){const t=this;t.removeAttribute("hover")}_buttonMouseEnterHandler(){const t=this;t.setAttribute("hover","");t.disabled||t.readonly||"hover"!==t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue())}_documentUpHandler(){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(t){const i=this;i.disabled||i.readonly||(i.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(i,t.pageX,t.pageY),i._pressed=!0,("press"===i.clickMode||"pressAndRelease"===i.clickMode)&&(i._changeCheckState("pointer"),i.$.fireEvent("click"),i._updateHidenInputNameAndValue()),"press"===i.clickMode&&(t.preventDefault(),t.stopPropagation()))}_dragStartHandler(t){t.preventDefault()}_keyHandler(t){const i=this;if(!0!==i.disabled&&!i.readonly&&32===t.keyCode){if("keydown"===t.type)return void t.preventDefault();if("none"===i.switchMode)return;i._changeCheckState("keyboard"),i._updateHidenInputNameAndValue()}}_changeCheckState(t){const i=this;let a=null;null===i.checked?i.checked=!0:(a=i.checked,i.checked=!i.checked),i._handleTextSelection(),i.$.fireEvent("change",{value:i.checked,oldValue:a,changeType:t})}_handleTextSelection(){const t=this;t.$.addClass("smart-unselectable"),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>t.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"checked"===t&&n.$.fireEvent("change",{value:a,oldValue:i,changeType:"api"});"trueTemplate"===t?n._handleTemplate(!0):"falseTemplate"===t?n._handleTemplate(!1):"indeterminateTemplate"===t?n._handleTemplate():void 0}_htmlBindOnInitialization(){const t=this;t._bindContentProperty("trueContent","smart-true-content"),t._bindContentProperty("falseContent","smart-false-content"),t._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(t,i){const a=this;if(!a.$[t+"Container"])return;let n=document.createElement("div");n.innerHTML=a.innerHTML;let o=n.getElementsByClassName(i),l;if(0<o.length)for(let t=0;t<o.length;t++)l=o[t];""===a[t]&&(a[t]=l===void 0?"":l.outerHTML),a.$[t+"Container"].innerHTML=a[t]}_updateContentProperties(){function t(t){i.$[t+"Container"]&&(i[t]=i.$[t+"Container"].innerHTML)}const i=this;t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const t=this;if(!t.$.hiddenInput)return;let i;i=null===t.checked?"null":!1===t.checked?"off":t.value||"on",t.$.hiddenInput.setAttribute("value",i)}_updateHidenInputName(){const t=this;if(t.$.hiddenInput){let i=!1===t.checked?"":t.name||"";t.$.hiddenInput.setAttribute("name",i)}}_updateHidenInputNameAndValue(){const t=this;t._updateHidenInputName(),t._updateHidenInputValue()}_handleTemplate(t,i){const a=this;let n,o,l;if(!0===t?(n=a.trueTemplate,o=a.$.trueContentContainer,l=a.trueContent):!1===t?(n=a.falseTemplate,o=a.$.falseContentContainer,l=a.falseContent):(n=a.indeterminateTemplate,o=a.$.indeterminateContentContainer,l=a.indeterminateContent),i&&(o.innerHTML=l?l:""),null===n||!n)return;if("function"==typeof n)return void n(o,{value:l});if(!("content"in document.createElement("template")))return void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}));if(n=document.getElementById(n),null===n||!("content"in n))return void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"template"}));const r=n.content,s=r.childNodes.length,d=/{{\w+}}/g;let m=[],c;for(let a=0;a<s;a++)for(c=d.exec(r.childNodes[a].innerHTML);c;)m.push({childNodeIndex:a,bindingString:c[0]}),c=d.exec(r.childNodes[a].innerHTML);const u=m.length;let p=document.importNode(n.content,!0),g,h;for(let a=0;a<u;a++){g=p.childNodes[m[a].childNodeIndex],h=m.length;for(let t=0;t<h;t++)g.innerHTML=g.innerHTML.replace(m[a].bindingString,l)}o.innerHTML="";for(let a=0;a<p.childNodes.length;a++)p.childNodes[a].outerHTML&&(o.innerHTML+=p.childNodes[a].outerHTML)}}),Smart("smart-breadcrumb",class extends Smart.BaseElement{static get properties(){return{addNewItem:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},closeButtons:{value:!1,type:"boolean"},dataSource:{value:[],type:"array",reflectToAttribute:!1},itemTemplate:{value:null,type:"any"},minimizeWidth:{value:150,type:"number?"}}}static get listeners(){return{move:"_moveHandler",resize:"_resizeHandler","container.click":"_containerClickHandler","container.down":"_containerDownHandler","container.transitionend":"_containerTransitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}template(){return`<div id="container">
                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden">
                        <div id="hamburgerIcon" class="smart-hamburger-icon">
                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        </div>
                    </div>
                    <template>
                        <div id="itemsContainer" class="smart-breadcrumb-items" *items={{dataSource}}>
                            <div class="smart-breadcrumb-item">
                                <div class="smart-breadcrumb-item-label" inner-H-T-M-L={{item.label}}></div>
                                <div class="smart-close-button">&#xe81f</div>
                            </div>
                        </div>
                    </template>
                </div>`}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"addNewItem":a?n._appendNewItemButton():(n.$.templateContainer.firstElementChild.removeChild(n._addNewItemButton),delete n._addNewItemButton),n._setIndentation();break;case"animation":case"disabled":case"unfocusable":n.addNewItem&&(n._addNewItemButton[t]=a),"disabled"===t&&n._minimizedDropDownOpened&&n._hamburgerIconClickHandler();break;case"itemTemplate":for(let t=0;t<n._items.length;t++)n._items[t].firstElementChild.innerHTML=n.dataSource[t].label;a&&n._applyTemplate();break;case"minimizeWidth":null!==a&&n.offsetWidth<=a?n.minimize():n.maximize();break;case"closeButtons":n._minimized||n._setIndentation();}}ready(){super.ready();const t=this;t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t.templateContainer=t.$.container.children[1],null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth&&t.minimize()}templateAttached(){this._handleDataSourceRefresh()}addItem(t){const i=this,a=i.dataSource.slice(0);!t||"object"!=typeof t||isNaN(t.index)||0>t.index||(a.splice(t.index,0,{label:t.label,value:t.value}),i.dataSource=a)}maximize(){const t=this;t._minimized&&(t.$minimizedHeader.addClass("smart-hidden"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.$hamburgerIcon.removeClass("smart-close-button"),t.removeAttribute("minimized"),t._minimizedDropDownOpened=!1,t._minimized=!1,t._setIndentation())}minimize(){const t=this;if(t._minimized)return;const i=t.animation,a=t.hasAnimation;a&&(t.animation="none"),t.$minimizedHeader.removeClass("smart-hidden"),t.templateContainer.classList.add("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.add("not-in-view"),a&&setTimeout(function(){t.animation=i},0),t.setAttribute("minimized",""),t._minimized=!0,t._setIndentation()}removeItem(t){const i=this,a=i._items.indexOf(t),n=i.dataSource.slice(0);-1===a||(n.splice(a,1),i.dataSource=n)}_moveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_resizeHandler(){const t=this;null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth?t.minimize():t._minimized?t.maximize():t._setIndentation()}_containerClickHandler(t){const i=this;if(!i.disabled&&i.templateContainer.contains(t.target)){const a=t.target.closest(".smart-close-button");if(a){const t=a.closest(".smart-breadcrumb-item"),n=i.$.fireEvent("closing",{item:t});if(!n.defaultPrevented){const a=i.dataSource.slice(0);a.splice(i._items.indexOf(t),1),i.dataSource=a,i.$.fireEvent("close",{item:t})}}}}_containerDownHandler(t){const i=this,a=t.originalEvent.target;if(!(!i.allowDrag||i.disabled||a.classList.contains("smart-close-button"))){const n=a.closest(".smart-breadcrumb-item");n&&(i._dragDetails={item:n,x:t.pageX,y:t.pageY})}}_containerTransitionendHandler(t){const i=this;i._edgeMacFF&&t.target===i.templateContainer&&!i._minimizedDropDownOpened&&i.hasAnimation&&i.templateContainer.classList.add("not-in-view")}_hamburgerIconClickHandler(){const t=this;t._minimizedDropDownOpened?(t.$hamburgerIcon.removeClass("smart-close-button"),t.templateContainer.classList.add("smart-visibility-hidden"),t._minimizedDropDownOpened=!1):(t.$hamburgerIcon.addClass("smart-close-button"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._minimizedDropDownOpened=!0)}_documentMoveHandler(t){var i=Math.abs;const a=this,n=a._dragDetails;if(!n)return;let o=n.feedback;if(t.originalEvent.preventDefault(),!o)if(5<i(n.x-t.pageX)||5<i(n.y-t.pageY))o=document.createElement("div"),o.className="smart-breadcrumb-feedback",o.style.height=a._dragDetails.item.offsetHeight+"px",o.innerHTML=a._dragDetails.item.firstElementChild.innerHTML,document.body.appendChild(o),n.feedback=o,a._getItemCoordinates();else return;const l=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.clientX,t.clientY):t.originalEvent.target;if(o.style.left=t.pageX+10+"px",o.style.top=t.pageY+10+"px",!a.allowDrop)return o.classList.add("error"),void a.$.fireEvent("dragging",{item:n.item,target:l,originalEvent:t.originalEvent});if(delete n.target,a._clearItemDragClass(),!a.contains(l))return o.classList.add("error"),void a.$.fireEvent("dragging",{item:n.item,target:l,originalEvent:t.originalEvent});let r=l.closest(".smart-breadcrumb-item");if(r)return void a._applyItemDragClass(r,r.getBoundingClientRect(),t);if(a._minimized)return o.classList.add("error"),void a.$.fireEvent("dragging",{item:n.item,target:l,originalEvent:t.originalEvent});if(a.contains(l)){const o=a._itemCoordinates.rows,r=a._itemCoordinates.coordinates,s=parseFloat(window.getComputedStyle(a).getPropertyValue("--smart-breadcrumb-padding"))/2;let d;for(let a=0;a<o.length;a++)if(t.clientY<o[a].bottom+s){d=a;break}if(void 0===d)return n.feedback.classList.add("error"),void a.$.fireEvent("dragging",{item:n.item,target:l,originalEvent:t.originalEvent});let m=a._items[r[d][r[d].length-1].index],c;for(let n=0;n<r[d].length;n++)if(c=r[d][n].rect,t.clientX<c.right+s){m=a._items[r[d][n].index];break}return void a._applyItemDragClass(m,c,t)}}_getItemCoordinates(){const t=this,a=t._items,n=[[]],o=[];let l=a[0].offsetTop,r=0;n[0].push({index:0,rect:a[0].getBoundingClientRect()}),o[0]={top:n[0][0].rect.top,bottom:n[0][0].rect.bottom};for(let t=1;t<a.length;t++){const i=a[t],s=i.getBoundingClientRect(),d=a[t].offsetTop;d>l&&(l=d,r++,n[r]=[],o[r]={top:s.top,bottom:s.bottom}),n[r].push({index:t,rect:s})}t._itemCoordinates={coordinates:n,rows:o}}_applyItemDragClass(t,i,a){const n=this,o=n._dragDetails;let l,r,s;o.target=t,o.feedback.classList.remove("error"),o.before=!1,n._minimized?(l=a.clientY,r="top",s="height"):(l=a.clientX,r="left",s="width"),l<=i[r]+i[s]/2?(t.classList.add("target"),o.before=!0):t.nextElementSibling?t.nextElementSibling.classList.add("target"):t.classList.add("afterTarget"),n.$.fireEvent("dragging",{item:o.item,target:t,originalEvent:a.originalEvent})}_clearItemDragClass(){const t=this.querySelector(".target, .afterTarget");t&&(t.classList.remove("target"),t.classList.remove("afterTarget"))}_documentUpHandler(t){const i=this,a=i._dragDetails;if(a&&(delete i._dragDetails,a.feedback)){if(document.body.removeChild(a.feedback),i._clearItemDragClass(),!i.allowDrop)return;if(!a.target||a.item===a.target)return void i.$.fireEvent("dragEnd",{item:a.item,target:a.target||!Smart.Utilities.Core.isMobile?t.originalEvent.target:document.elementFromPoint(t.clientX,t.clientY),originalEvent:t.originalEvent});const n=i._items.slice(0),o=n.indexOf(a.item),l=i.dataSource.slice(0),r=l.splice(o,1);n.splice(o,1);const s=n.indexOf(a.target)+(a.before?0:1);o!==s&&(l.splice(s,0,r[0]),i.dataSource=l),i.$.fireEvent("dragEnd",{item:a.item,target:a.target,droppedBeforeTarget:a.before,originalEvent:t.originalEvent})}}_handleDataSourceRefresh(){const t=this;t._items=Array.from(t.$.templateContainer.firstElementChild.children),t.addNewItem&&t._appendNewItemButton(),t._applyTemplate(),t._setIndentation()}_appendNewItemButton(){const t=this,i=document.createElement("smart-button");i.innerHTML="+",i.animation=t.animation,i.disabled=t.disabled,i.unfocusable=t.unfocusable,i.addEventListener("click",function(){t.$.fireEvent("addNewItem")}),t.$.templateContainer.firstElementChild.appendChild(i),t._addNewItemButton=i}_setIndentation(){const t=this,a=t._items.slice(0);if(t._addNewItemButton&&a.push(t._addNewItemButton),0===a.length)return;let n=a[0].offsetTop,o=0;if(a.forEach(function(t){t.style.marginLeft=null}),!t._minimized)for(let t=1;t<a.length;t++){const i=a[t],l=a[t].offsetTop;l>n&&(n=l,o++,i.style.marginLeft=10*o+"px")}}_applyTemplate(){const t=this,i=t.itemTemplate;if(null===i)return;let a;if(a=i instanceof HTMLTemplateElement?i:document.getElementById(i),null!==a&&a instanceof HTMLTemplateElement){const i=document.importNode(a.content,!0),n=document.createElement("div");n.appendChild(i);const o=n.innerHTML;for(let a=0;a<t._items.length;a++){const i=t.dataSource,n=i[a].label,l=i[a].value,r=t._items[a].firstElementChild;r.innerHTML=o.replace(/{{label}}/g,n).replace(/{{value}}/g,l)}}}}),Smart("smart-check-box",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"checkbox",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}template(){return`<div id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='checkBoxInput' class ='smart-input'></span>
                 <span id='checkBoxLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler","checkBoxInput.mouseenter":"_mouseEnterHandler","checkBoxInput.mouseleave":"_mouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.checkbox.css"]}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;n._updateContentProperties();"indeterminate"===t?(a?(n._valueCashe=n.checked,n.checked=null):n.checked=n._valueCashe,n._updateHidenInputNameAndValue()):"value"===t?n._updateHidenInputNameAndValue():"checked"===t?n._updateHidenInputNameAndValue():"name"===t?n._updateHidenInputName():void 0}_documentUpHandler(t){const i=this,a=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(i._pressed)return i._pressed=!1,i.$.setAttributeValue("active",!1),i.disabled||i.readonly||"input"===i.checkMode&&a!==i.$.checkBoxInput||"label"===i.checkMode&&a!==i.$.checkBoxLabel?void 0:"press"===i.clickMode?(t.preventDefault(),void t.stopPropagation()):void(i._changeCheckState("pointer"),i.focus(),i._handleTextSelection(),i._updateHidenInputNameAndValue())}_downHandler(t){const i=this,a=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(i.disabled||i.readonly||"input"===i.checkMode&&a!==i.$.checkBoxInput||"label"===i.checkMode&&a!==i.$.checkBoxLabel)){if(i.$.setAttributeValue("active",!0),i.hasRippleAnimation){const t=i.$.checkBoxInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,n=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(i.$.checkBoxInput,t.left+t.width/2+a,t.top+t.height/2+n)}i._pressed=!0,("press"===i.clickMode||"pressAndRelease"===i.clickMode)&&(i._changeCheckState("pointer"),i.$.fireEvent("click"),i.focus(),i._updateHidenInputNameAndValue())}}}),Smart("smart-led",class extends Smart.ToggleButton{static get properties(){return{shape:{value:"round",allowedValues:["round","square"],type:"string"}}}static get styleUrls(){return["smart.led.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='ledAnimation' class ='smart-animation'></div>
                 <div id='button' class='smart-input'>
                    <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                    <span id='indeterminateContentContainer' inner-h-t-m-l='[[indeterminateContent]]' class ='smart-indeterminate-content-container'></span>
                    <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                 </div>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._htmlBindOnInitialization(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"indeterminate"===t?(a?(n._valueCashe=n.checked,n.checked=null):n.checked=n._valueCashe,n._updateHidenInputNameAndValue()):"trueContent"===t?(n.trueContent=a,n._handleTemplate(!0)):"falseContent"===t?(n.falseContent=a,n._handleTemplate(!1)):"indeterminateContent"===t?(n.indeterminateContent=a,n._handleTemplate()):"value"===t?n._updateHidenInputNameAndValue():"checked"===t?n._updateHidenInputNameAndValue():"name"===t?n._updateHidenInputName():void 0}_documentUpHandler(t){const i=this;return!i._pressed||i.readonly?void 0:"press"===i.clickMode?(t.preventDefault(),t.stopPropagation(),void(i._pressed=!1)):void(super._documentUpHandler(t),i.indeterminate=!1,i._updateHidenInputNameAndValue(),i._pressed=!1)}_mouseDownHandler(){const t=this;t.readonly||t.disabled||(t._pressed=!0,("press"===t.clickMode||"pressAndRelease"===t.clickMode)&&(t._changeCheckState("pointer"),t.$.fireEvent("click"),t.indeterminate=!1,t._updateHidenInputNameAndValue()))}}),Smart("smart-power-button",class extends Smart.ToggleButton{static get styleUrls(){return["smart.powerbutton.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='powerButtonAnimation' class ='smart-animation'></div>
                 <span id='button' class ='smart-input'></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._updateHidenInputNameAndValue()}}),Smart("smart-radio-button",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"radio",type:"string",defaultReflectToAttribute:!0,readonly:!0},groupName:{value:"",type:"string"}}}template(){return`<div  id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='radioButtonInput' class ='smart-input'></span>
                 <span id='radioButtonLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler",mouseenter:"_elementMouseEnterHandler","radioButtonInput.mouseenter":"_radioMouseEnterHandler","radioButtonInput.mouseleave":"_radioMouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.radiobutton.css"]}_radioMouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_radioMouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t._handleMultipleCheckedInstances(),t._updateHidenInputNameAndValue()}_downHandler(t){const i=this,a=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(i.disabled||i.readonly||"input"===i.checkMode&&a!==i.$.radioButtonInput||"label"===i.checkMode&&a!==i.$.radioButtonLabel)){if(i.$.setAttributeValue("active",!0),i.hasRippleAnimation){const t=i.$.radioButtonInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,n=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(i.$.radioButtonInput,t.left+t.width/2+a,t.top+t.height/2+n)}return i._preventAction?void(i._preventAction=!1):void(("release"===i.clickMode||"pressAndRelease"===i.clickMode)&&(i._pressed=!0),("press"===i.clickMode||"pressAndRelease"===i.clickMode)&&("pressAndRelease"===i.clickMode&&(""===i.groupName?i._checkedBeforeChange=i.parentNode.querySelector("smart-radio-button[checked]"):i._checkedBeforeChange=document.querySelector("smart-radio-button[group-name=\""+i.groupName+"\"][checked]")),i._handleMouseInteraction()))}}_elementMouseEnterHandler(){const t=this;"hover"!==t.clickMode||t.disabled||t.readonly||t._handleMouseInteraction()}_documentUpHandler(t){const i=this,a=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;!i._pressed||i.disabled||i.readonly||"input"===i.checkMode&&a!==i.$.radioButtonInput||"label"===i.checkMode&&a!==i.$.radioButtonLabel||("release"===i.clickMode?i._handleMouseInteraction():(null===i._checkedBeforeChange?(i.$.fireEvent("change",{value:!1,oldValue:!0,changeType:"pointer"}),i.checked=!1):i._checkedBeforeChange._changeCheckState("pointer"),i.focus(),i._updateHidenInputNameAndValue()),i.$.setAttributeValue("active",!1),i._pressed=!1)}_handleMouseInteraction(){const t=this;t._handleTextSelection(),t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()}_handleMultipleCheckedInstances(){const t=this,i=Array.from(document.querySelectorAll("smart-radio-button[group-name=\""+t.groupName+"\"][checked]")),a=i.length;2>a||i.forEach((t,n)=>n<a-1&&(t.checked=!1))}_changeCheckState(t){const i=this;let a=document.querySelectorAll("smart-radio-button[group-name=\""+i.groupName+"\"]");if(!0===i.checked&&"api"===t||!1===i.checked)if(0<a.length)i._changeCheckStateInGroup(a,t);else{let n=i.parentNode;a=n.querySelectorAll("smart-radio-button:not([group-name])"),i._changeCheckStateInGroup(a,t)}}_changeCheckStateInGroup(t,a){const n=this;for(let o=0;o<t.length;o++)t[o]._isUpdating=!0,t[o]===n?(n.checked=!0,n.$.fireEvent("change",{value:!0,oldValue:!1,changeType:a})):t[o].checked&&(t[o].checked=!1),t[o]._isUpdating=!1}propertyChangedHandler(t,i,a){const n=this;switch(t){case"value":n._updateHidenInputNameAndValue();break;case"checked":n._isUpdating||n._changeCheckState("api"),n._updateHidenInputNameAndValue();break;case"name":n._updateHidenInputName();break;default:super.propertyChangedHandler(t,i,a);}}}),Smart("smart-switch-button",class extends Smart.ToggleButton{static get properties(){return{inverted:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},switchMode:{value:"default",allowedValues:["default","click","drag","none"],type:"string"},clickMode:{value:"release",allowedValues:["press","release","pressAndRelease"],type:"string"}}}static get listeners(){return{"container.down":"_mouseDownHandler","document.move":"_drag","document.up":"_switchThumbDropHandler",mouseenter:"_switchButtonOnMouseEnter",mouseleave:"_switchButtonOnMouseLeave",resize:"_resizeHandler","container.resize":"_resizeHandler","document.selectstart":"_selectStartHandler"}}template(){return`<div  id='container' class='smart-container'>
                    <div  id='innerContainer' class ='smart-inner-container'>
                           <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                           <span id='switchThumb' class ='smart-thumb'></span>
                           <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                    </div>
                    <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready();let i=t.animation;t.hasAnimation&&(t.animation="none"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport()&&!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-switch-button-default-width"),t._htmlBindOnInitialization(),t._resizeHandler(),t._initializePrivateVariables(),t._getContainersSizeAndBreakPoint(),t.indeterminate&&(t._valueCache=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue(),t._updateThumbPosition(),t.animation=i}_mouseDownHandler(t){const i=this;i.disabled||i.readonly||"none"===i.switchMode||(t.originalEvent.target.closest(".smart-thumb")===i.$.switchThumb&&("default"===i.switchMode||"drag"===i.switchMode)&&i._switchThumbDragStartHandler(t),i._isSwitchClicked=i,i._updateContentProperties(),"release"!==i.clickMode&&"click"===i.switchMode&&(i._updateStateOnClick(),i.$.fireEvent("click"),i.indeterminate=!1,i._updateHidenInputNameAndValue()))}_updateStateOnClick(){const t=this;t._changeCheckState(),t.focus()}_drag(t){const i=this;i._mouseDown&&(Smart.Utilities.Core.isMobile&&t.originalEvent.preventDefault(),i._switchThumbDragHandler(t))}_switchThumbDragStartHandler(t){const i=this;i.disabled||("click"===i.switchMode&&"release"!==i.clickMode&&(t.preventDefault(),t.stopPropagation()),i._isInactiveOn("drag")||(i._mouseDown=!0,i._getContainersSizeAndBreakPoint(),i._pointerPosition="vertical"===i.orientation?t.pageY:t.pageX,t.preventDefault()))}_selectStartHandler(t){const i=this;i._mouseDown&&t.preventDefault()}_switchThumbDragHandler(t){var i=Math.max;const a=this;if(!a._isInactiveOn("drag")){if(!1===a._mouseDown)return void a._removeDragStyles();a.hasAttribute("dragged")||a.setAttribute("dragged","");let n=a.$.innerContainer,o=a.$.container.getBoundingClientRect(),l="vertical"===a.orientation?document.body.scrollTop||document.documentElement.scrollTop:document.body.scrollLeft||document.documentElement.scrollLeft,r="vertical"===a.orientation?o.top+l:o.left+l,s="vertical"===a.orientation?a._pointerPosition-n.offsetTop:a._pointerPosition-n.offsetLeft,d=a._pointerPosition>=r&&a._pointerPosition<=r+a._switchContainerSize;const m=-1*(a.offsetWidth-a.$.switchThumb.offsetWidth),c=-1*(a.offsetHeight-a.$.switchThumb.offsetHeight);if(a._pointerPosition="vertical"===a.orientation?t.pageY:t.pageX,d){let t=a._pointerPosition-s;t<-a._switchTrackLength&&(t=-a._switchTrackLength),0<t&&(t=0),"vertical"===a.orientation?a.$.innerContainer.style.top=i(c,t)+"px":a.$.innerContainer.style.left=i(m,t)+"px"}}}_switchThumbDropHandler(){const t=this;t.hasAttribute("dragged")?t._endDrag():t._isSwitchClicked&&t._endClick(),t._mouseDown=!1,delete t._isSwitchClicked}_endDrag(){const t=this;if(t.indeterminate=!1,t._updateHidenInputNameAndValue(),!t._isInactiveOn("drag")&&t._mouseDown){t.removeAttribute("dragged");let i="vertical"===t.orientation?t.$.innerContainer.offsetTop+t.$.switchThumb.offsetTop+t.$.switchThumb.clientHeight/2:t.$.innerContainer.offsetLeft+t.$.switchThumb.offsetLeft+t.$.switchThumb.clientWidth/2;const a=i>t._switchBreakPoint;null===t.checked?a?t._changeCheckState(t.inverted):t._changeCheckState(!t.inverted):!t.inverted==(a===t.checked)&&t._changeCheckState(!t.checked),t._removeDragStyles(),t._updateThumbPosition()}}_endClick(){const t=this;t._resizeHandler();t.disabled||t.readonly||t._isInactiveOn("click")||("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t._updateStateOnClick(),t.indeterminate=!1,t._updateHidenInputNameAndValue())}_switchButtonOnMouseEnter(){const t=this;t.disabled||t.readonly||t.$.addClass("hovered")}_switchButtonOnMouseLeave(){const t=this;t.disabled||t.readonly||t.$.removeClass("hovered")}_isInactiveOn(t){const i=this,a=i.disabled||i.readonly||i.switchMode!==t;return"default"!==i.switchMode&&a}_keyUpHandler(t){const i=this;i.disabled||i.readonly||32!==t.keyCode||"none"===i.switchMode||(i._getContainersSizeAndBreakPoint(),i._changeCheckState())}_initializePrivateVariables(){const t=this;t._switchContainerSize=t._switchTrackLength=t._switchBreakPoint=t._pointerPosition=0,t._mouseDown=!1}_changeCheckState(t){const i=this;let a=i.checked;return null===a&&void 0!==t?(i.$.fireEvent("change",{value:t,oldValue:null}),i.checked=t,void i._updateThumbPosition()):void(i.checked=!(null!==i.checked)||!i.checked,i._updateThumbPosition(),i.$.fireEvent("change",{value:i.checked,oldValue:a}),i._updateHidenInputNameAndValue())}_getContainersSizeAndBreakPoint(){const t=this;t._switchContainerSize="vertical"===t.orientation?t.$.container.clientHeight:t.$.container.clientWidth,t._switchTrackLength="vertical"===t.orientation?t._switchContainerSize-t.$.switchThumb.clientHeight:t._switchContainerSize-t.$.switchThumb.clientWidth,t._switchBreakPoint=t._switchContainerSize/2}_removeDragStyles(){const t=this;t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.left="",t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.top="",t._mouseDown=!1}propertyChangedHandler(t,i,a){const n=this;super.propertyChangedHandler(t,i,a),n._updateContentProperties();"indeterminate"===t?a?(n._valueCache=n.checked,n.checked=null):n.checked=n._valueCache:"trueContent"===t?n.trueContent=a:"falseContent"===t?n.falseContent=a:"orientation"===t?n._resizeHandler():void 0;n._getContainersSizeAndBreakPoint(),n._removeDragStyles(),n._resizeHandler()}_resizeHandler(){const t=this,i=window.getComputedStyle(t,null),a=parseInt(i.getPropertyValue("border-top-width")),n=parseInt(i.getPropertyValue("border-right-width")),o=parseInt(i.getPropertyValue("border-bottom-width")),l=parseInt(i.getPropertyValue("border-left-width")),r="vertical"===t.orientation?t.offsetHeight-(a+o):t.offsetWidth-(l+n);t._getContainersSizeAndBreakPoint(),t._supportCSSVariables?t.$.container.style.setProperty("--smart-switch-button-default-width",r+"px"):(t._innerContainerSize=r,t.$.innerContainer.style.height=t.$.innerContainer.style.width="",t.$.trueContentContainer.style.height=t.$.trueContentContainer.style.width="",t.$.falseContentContainer.style.height=t.$.falseContentContainer.style.width="","horizontal"===t.orientation?(t.$.innerContainer.style.setProperty("width",2*r-t.$.switchThumb.clientWidth+"px"),t.$.trueContentContainer.style.setProperty("width",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("width",t._switchTrackLength+"px")):(t.$.innerContainer.style.setProperty("height",2*r-t.$.switchThumb.clientHeight+"px"),t.$.trueContentContainer.style.setProperty("height",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("height",t._switchTrackLength+"px")),t._updateThumbPosition())}_updateThumbPosition(){const t=this;return t._supportCSSVariables||(t.inverted?!0===t.checked:!1===t.checked)||!t._innerContainerSize?void(t.$.innerContainer.style.left=t.$.innerContainer.style.top=""):void((t.inverted?!1===t.checked:t.checked)&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize-t.$.switchThumb.offsetWidth)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize-t.$.switchThumb.offsetHeight)+"px",t.$.innerContainer.style.left="")),null===t.checked&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetWidth/2)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetHeight/2)+"px",t.$.innerContainer.style.left="")))}}),Smart("smart-drop-down-list",class extends Smart.ContentElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},renderMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},tokenTemplate:{value:null,type:"any"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div class="smart-buttons-container" id="buttonsContainer">
                            <span id="actionButton" class="smart-input smart-action-button"></span>
                            <span id="dropDownButton" class="smart-drop-down-button">
                                <span id="arrow"></span>
                            </span>
                        </div>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-list-box id="listBox" unfocusable
                                    animation="[[animation]]"
                                    data-source="[[dataSource]]"
                                    disabled="[[disabled]]"
                                    display-loading-indicator="[[displayLoadingIndicator]]"
                                    display-member="[[displayMember]]"
                                    filterable="[[filterable]]"
                                    filter-mode="[[filterMode]]"
                                    filter-input-placeholder="[[filterInputPlaceholder]]"
                                    grouped="[[grouped]]"
                                    group-member="[[groupMember]]"
                                    item-height="[[itemHeight]]"
                                    item-template="[[itemTemplate]]"
                                    incremental-search-delay="[[incrementalSearchDelay]]"
                                    incremental-search-mode="[[incrementalSearchMode]]"
                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"
                                    loading-indicator-position="[[loadingIndicatorPosition]]"
                                    name="[[name]]"
                                    placeholder="[[dropDownPlaceholder]]"
                                    readonly="[[readonly]]"
                                    selected-indexes="{{selectedIndexes}}"
                                    selection-mode="[[selectionMode]]"
                                    selected-values="{{selectedValues}}"
                                    sorted="[[sorted]]"
                                    theme="[[theme]]"
                                    value-member="[[valueMember]]"
                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"
                                    virtualized="[[virtualized]]">
                                <content></content>
                            </smart-list-box>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}static get styleUrls(){return["smart.dropdownlist.css","smart.dropdown.css"]}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"animation":n.$.dropDownContainer.setAttribute("animation",n.animation);break;case"disabled":n._setFocusable(),n.close(),n._positionDetection.handleAutoPositioning();break;case"dataSource":case"displayMember":n.$.actionButton&&(n.$.actionButton.innerHTML=n.placeholder),n._setDropDownSize(),n._positionDetection.checkBrowserBounds("vertically"),n._positionDetection.positionDropDown(),n._positionDetection.checkBrowserBounds("horizontally");break;case"dropDownAppendTo":n._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownOpenMode":n._setFocusable(),n.$dropDownContainer.addClass("smart-visibility-hidden"),n.$.dropDownButton.removeAttribute("selected"),n.removeAttribute("drop-down-button-focus"),n.removeAttribute("action-button-focus");break;case"dropDownOverlay":a||n._positionDetection.removeOverlay();break;case"dropDownPosition":n._positionDetection.dropDownPositionChangedHandler();break;case"dropDownMinWidth":case"dropDownWidth":case"dropDownMaxWidth":case"dropDownHeight":case"dropDownMinHeight":case"dropDownMaxHeight":n._setDropDownSize();break;case"opened":if(n.disabled||n.readonly)return;a?n.open():n.close();break;case"placeholder":n._applySelection();break;case"readonly":n.close();break;case"resizeIndicator":a?n.$.dropDownContainer.setAttribute("resize-indicator",""):n.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":n.$.dropDownContainer.setAttribute("resize-mode",n.resizeMode);break;case"selectedValues":case"selectedIndexes":0===a.length?n.$.actionButton.innerHTML=n.placeholder:n._applySelection();break;case"selectionDisplayMode":n._applySelection();break;case"tokenTemplate":n._tokenTemplate=n._validateTemplate(n.tokenTemplate),n._applySelection();break;case"unfocusable":n._setFocusable();}}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(i.$.listBox.appendChild(t),i._dropDownSize&&"auto"===i._dropDownSize.height&&i._setDropDownSize()):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){const t=this;super.attached();t.isCompleted&&t.$.dropDownContainer&&(t._positionDetection.dropDownAttached("_setDropDownSize"),t._positionDetection.checkBrowserBounds())}detached(){const t=this;super.detached();t.$.dropDownContainer&&(t.close(),t._positionDetection.dropDownDetached())}clearItems(){const t=this;t.$.listBox&&(t.$.listBox.clearItems(),t.$.actionButton.innerHTML=t.placeholder)}clearSelection(){const t=this;t.$.listBox&&(t.$.listBox.clearSelection(),t.$.actionButton.innerHTML=t.placeholder)}close(){const t=this;if(!t.$dropDownContainer.hasClass("smart-visibility-hidden")){const i=t.$.fireEvent("closing").defaultPrevented;i||(t.$dropDownContainer.addClass("smart-visibility-hidden"),t.$.fireEvent("close"),t.$.dropDownButton&&t.$.dropDownButton.removeAttribute("selected"),t.opened=!1,t._preventDropDownClose=!1,t._positionDetection.removeOverlay(!0),t._edgeMacFF&&!t.hasAnimation&&(t.$.dropDownContainer.style.top=t.$.dropDownContainer.style.left="",t.$dropDownContainer.addClass("not-in-view")))}}cloneNode(){const t=this;if(t.$.listBox){let i=HTMLElement.prototype.cloneNode.apply(t,Array.prototype.slice.call(arguments,0,1));return i.dataSource=t.dataSource,i}}ensureVisible(t){const i=this;i.$.listBox&&i.$.listBox.ensureVisible(t)}getItem(t){const i=this;return i.$.listBox?i.$.listBox.getItem(t):void 0}get items(){const t=this;return t.$&&t.$.listBox?t.$.listBox.items:void 0}get _focusedItem(){const t=this;return t.$&&t.$.listBox?t.$.listBox._focusedItem:void 0}insert(t,i){const a=this;a.$.listBox&&(a.$.listBox.insert(t,i),a._applySelection(),a._dropDownSize&&"auto"===a._dropDownSize.height&&a._setDropDownSize())}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t&&i?void(!a.$.listBox||(a.$.listBox.insertBefore(t,i),a._dropDownSize&&"auto"===a._dropDownSize.height&&a._setDropDownSize())):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const t=this,i=function(){for(let a=0;a<t.items.length;a++)if(!t.items[a].disabled)return t.items[a]};if(!t.disabled&&t.offsetHeight&&t.$dropDownContainer.hasClass("smart-visibility-hidden")){if(t.$dropDownContainer.hasClass("not-in-view")&&t.$dropDownContainer.removeClass("not-in-view"),t.$.dropDownContainer.style.transition=null,t.dropDownAppendTo&&0<t.dropDownAppendTo.length){const i=t.getBoundingClientRect();if(t.$.container.contains(t.$.dropDownContainer)){let i=0;const a=setInterval(function(){const n=t.getBoundingClientRect();i++,n.top===t._positionTop&&10>i||(t.open(),clearInterval(a),t._positionTop=n.top)},100);return}i.top!==t._positionTop&&(t._positionTop=i.top)}const a=t.$.fireEvent("opening").defaultPrevented;a||(t.opened=!0,t._positionDetection.placeOverlay(),t._positionDetection.checkBrowserBounds("vertically"),t._positionDetection.positionDropDown(),t._positionDetection.checkBrowserBounds("horizontally"),t.$dropDownContainer.removeClass("smart-visibility-hidden"),t.$.fireEvent("open"),t.$.dropDownButton&&("dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.setAttribute("selected",""):t.$.dropDownButton.removeAttribute("selected")),(t.$.listBox&&!t._focusedItem||t._focusedItem&&!t._focusedItem._focused)&&(0<t.selectedIndexes.length?t._focus(t.items[t.selectedIndexes[0]]):t._focus(i)),t.$.input&&t.$.input.focus())}}ready(){super.ready();const t=this;t.$.dropDownContainer&&(t._positionDetection=new Smart.Utilities.PositionDetection(t,t.$.dropDownContainer,t.$.container,"close"),t._positionDetection.getDropDownParent(!0),t._positionDetection.setDropDownPosition(),t._calculateDropDownSize(),t.$.dropDownContainer.setAttribute("resize-mode",t.resizeMode),t.resizeIndicator&&t.$.dropDownContainer.setAttribute("resize-indicator",""),t._positionDetection.handleAutoPositioning()),t.opened&&t.open(),t._positionTop=t.getBoundingClientRect().top,t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t.hasAnimation&&t._edgeMacFF&&t.$dropDownContainer.addClass("not-in-view"),t._createElement()}remove(t){const i=this;i.$.listBox&&(i.$.listBox.remove(t),i._applySelection(),i._dropDownSize&&"auto"===i._dropDownSize.height&&i._setDropDownSize())}removeChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t&&t instanceof Smart.ListItem?void(i.$.listBox.removeChild(t),i._dropDownSize&&"auto"===i._dropDownSize.height&&i._setDropDownSize()):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}select(t){const i=this;i.$.listBox&&i.$.listBox.select(t)}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.removeAttribute("tabindex"),t.$.actionButton.removeAttribute("tabindex"),void t.$.dropDownButton.removeAttribute("tabindex");let i=0<t.tabIndex?t.tabIndex:0;"dropDownButton"===t.dropDownOpenMode?(t.removeAttribute("tabindex"),t.$.actionButton.setAttribute("tabindex",i),t.$.dropDownButton.setAttribute("tabindex",i)):(t.$.actionButton.removeAttribute("tabindex"),t.$.dropDownButton.removeAttribute("tabindex"),t.tabIndex=i)}static get requires(){return{"Smart.ListBox":"smart.listbox.js"}}unselect(t){const i=this;i.$.listBox&&i.$.listBox.unselect(t)}update(t,i){const a=this;a.$.listBox&&(a.$.listBox.update(t,i),a._applySelection())}_resizeBarMoveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_createToken(){const t=this;let i;const a=document.createDocumentFragment(),n=t.selectedIndexes[t.selectedIndexes.length-1];return i="plain"===t.selectionDisplayMode&&("one"===t.selectionMode||"zeroOrOne"===t.selectionMode||"radioButton"===t.selectionMode)?"":"tokens"===t.selectionDisplayMode?1===t.selectedIndexes.length&&-1<["oneOrManyExtended","oneOrMany","one","radioButton"].indexOf(t.selectionMode)?"":"&#10006":1===t.selectedIndexes.length?"":",",t.selectedIndexes.map(o=>{a.appendChild(t._applyTokenTemplate(t.$.listBox._items[o].label,"tokens"!==t.selectionDisplayMode&&o===n?"":i))}),a}_applySelection(){const t=this;return"placeholder"===t.selectionDisplayMode||0===t.selectedIndexes.length?void(t.$.actionButton.innerHTML=t.placeholder):void(!t.$.listBox._items||0===t.$.listBox._items.length||(t.$.actionButton.innerHTML="",t.$.actionButton.appendChild(t._createToken())))}_applyTokenTemplate(t,i){const a=this,n=document.createElement("span"),o=function(){return"<span class='smart-drop-down-list-selection-label'>"+t+"</span><span class='smart-drop-down-list-unselect-button'>"+i+"</span>"};if(n.classList.add("smart-token"),a._tokenTemplate){let t=document.importNode(a._tokenTemplate.content,!0);const l=t.childNodes.length,r=/{{\w+}}/g;let s;for(let a=0;a<l;a++)s=r.exec(t.childNodes[a].innerHTML),s&&(t.childNodes[a].innerHTML=t.childNodes[a].innerHTML.replace(s[0],o())),t.childNodes[a].outerHTML&&(n.innerHTML+=t.childNodes[a].outerHTML)}else"function"==typeof a.tokenTemplate?a.tokenTemplate(n,{label:t,iconSeparator:i}):n.innerHTML=o();return n}_bindingCompleteHandler(){const t=this;t.$.listBox&&requestAnimationFrame(()=>{t._setDropDownSize(),t._positionDetection.checkBrowserBounds()})}_buttonsDownHandler(t){const i=this;if(!i.disabled){if(i.hasRippleAnimation)if(!i.$.buttonsContainer||"dropDownButton"===i.dropDownOpenMode)Smart.Utilities.Animation.Ripple.animate(t.target,t.pageX,t.pageY);else{const a=i.$.buttonsContainer;a.firstElementChild.noRipple=!0,Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),a.firstElementChild.noRipple=!1}i._preventsSelectStart=!0,"dropDownButton"===i.dropDownOpenMode&&t.target===i.$.actionButton&&i.$.actionButton.setAttribute("active",""),i.opened&&(i._preventDropDownClose=!0)}}_buttonsMouseEventsHandler(t){const i=this;i.disabled||("mouseenter"===t.type?(i.setAttribute("hover",""),t.target.setAttribute("hover","")):(i.removeAttribute("hover"),t.target.removeAttribute("hover")))}_calculateDropDownSize(){const t=this;t._dropDownSize={};const i=window.getComputedStyle(t.$.dropDownContainer),a=parseFloat(i.getPropertyValue("border-top-width").trim()),n=parseFloat(i.getPropertyValue("border-bottom-width").trim()),o=parseFloat(i.getPropertyValue("margin-top").trim()),l=parseFloat(i.getPropertyValue("margin-bottom").trim()),r=parseFloat(i.getPropertyValue("padding-top").trim()),s=parseFloat(i.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(t._dropDownSize.width=i.getPropertyValue("--smart-drop-down-list-drop-down-width").trim(),t._dropDownSize.height=i.getPropertyValue("--smart-drop-down-list-drop-down-height").trim()),(!t._dropDownSize.width||-1<t._dropDownSize.width.indexOf("initial"))&&(t._dropDownSize.width=t.offsetWidth),t._dropDownSize.height||(t._dropDownSize.height="auto"),t._dropDownSize.minHeight=parseFloat(i.getPropertyValue("min-height").trim()),t._dropDownSize.maxHeight=parseFloat(i.getPropertyValue("max-height").trim()),t._dropDownSize.borderWidth=(isNaN(a)?0:a)+(isNaN(n)?0:n),t._dropDownSize.paddingWidth=(isNaN(r)?0:r)+(isNaN(s)?0:s),t._dropDownSize.marginWidth=(isNaN(o)?0:o)+(isNaN(l)?0:l)}_createElement(){const t=this;t._tokenTemplate=t._validateTemplate(t.tokenTemplate),t._applySelection(),t._setDropDownSize(),t._setFocusable(),t.$.arrow.noRipple=!0}_documentDownHandler(t){const i=this;if(i.disabled||i.readonly)return;let a=t.originalEvent.target;if(a===i._overlay&&(i._overlayDown=!0),i.enableShadowDOM){a=t.originalEvent.composedPath()[0];for(let t=a.getRootNode().host;t;)t.closest(".smart-drop-down-container")===i.$.dropDownContainer&&(i._isDropDownClicked=!0),t=t.getRootNode().host}else i._isDropDownClicked=a.closest(".smart-drop-down-container")===i.$.dropDownContainer;if(i._buttonClicked=a.closest(".smart-action-button")||a.closest(".smart-drop-down-button"),i.$.listBox){let n=a.closest("smart-list-item");i.$.listBox.contains(n)||(n=void 0),i.hasRippleAnimation&&n&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),(n||a===i.$.listBox.$.filterInput||a.closest(".smart-token"))&&(i._preventDropDownClose=!0)}if(i._isDropDownClicked&&(i._preventDropDownClose=!0),a===i.$.resizeBar&&"none"!==i.resizeMode){i._resizeDetails||(i._resizeDetails={});const a=i.$.dropDownContainer.getBoundingClientRect();i._resizeDetails.started=!0,i._resizeDetails.x=t.pageX,i._resizeDetails.y=t.pageY,i._resizeDetails.width=i.$.dropDownContainer.offsetWidth,i._resizeDetails.height=i.$.dropDownContainer.offsetHeight,i._resizeDetails.offsetXL=t.clientX-a.left,i._resizeDetails.offsetXR=a.left+i.$.dropDownContainer.offsetWidth-t.clientX,i._resizeDetails.offsetY=a.top+i.$.dropDownContainer.offsetHeight-t.clientY,i._resizeDetails.offsetYtop=t.clientY-a.top,i._preventDropDownClose=!0}}_documentMoveHandler(t){function i(){if(u=t.pageY-l._resizeDetails.y,"bottom"===c)l._resizeDetails.height=n(s.clientHeight-d.top-6,o(0,l._resizeDetails.height+u)),l._resizeDetails.y=o(d.top+s.scrollTop-l._resizeDetails.offsetY,n(s.clientHeight+s.scrollTop-1.5*l._resizeDetails.offsetY,t.pageY));else{if(l._resizeDetails.height=n(l._dropDownSize.maxHeight,o(0,n(m.top,l._resizeDetails.height-u))),u=o(0,d.top+(d.height-o(l._dropDownSize.minHeight,l._resizeDetails.height))),l.dropDownAppendTo&&0<l.dropDownAppendTo.length){const t=Math.abs(parseFloat(getComputedStyle(l.$.dropDownContainer).getPropertyValue("margin-bottom")))||0;l.$.dropDownContainer.style.top=l.dropDownAppendTo&&0<l.dropDownAppendTo.length?t+u+"px":""}const i=m.top+s.scrollTop+l._resizeDetails.offsetYtop;l._resizeDetails.y=o(l._resizeDetails.offsetYtop,n(i,o(i-l._dropDownSize.maxHeight,t.pageY)))}l.$.dropDownContainer.style.height=l._resizeDetails.height+"px"}function a(){u=t.pageX-l._resizeDetails.x,l._resizeDetails.width=n(s.clientWidth-d.left-6,o(0,l._resizeDetails.width+u)),l.$.dropDownContainer.style.width=l._resizeDetails.width+"px",l._resizeDetails.x=o(d.left+s.scrollLeft-l._resizeDetails.offsetXR,n(s.clientWidth+s.scrollLeft-1.5*l._resizeDetails.offsetXR,t.pageX))}var n=Math.min,o=Math.max;const l=this,r=l.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if("auto"===l.dropDownOpenMode&&null!==l.dropDownAppendTo&&(l.contains(r)||l.$.dropDownContainer.contains(r)?l._isElementHovered=!0:(l._isElementHovered=!1,l._autoClose())),!l._resizeDetails||l._resizeDetails&&!l._resizeDetails.started)return;l.setAttribute("resizing",""),l._resizeDetails.resizeEventFired||(l.$.fireEvent("resizeStart",{position:{left:t.pageX,top:t.pageY}}),l._resizeDetails.resizeEventFired=!0);const s=document.documentElement,d=l.$.dropDownContainer.getBoundingClientRect(),m=l.getBoundingClientRect(),c=l.$.dropDownContainer.hasAttribute("top")?"top":"bottom";let u;switch(l.resizeMode){case"vertical":i();break;case"horizontal":a();break;case"both":a(),i();}}_documentUpHandler(t){const i=this;if(i.$.actionButton.removeAttribute("active"),i._resizeDetails&&i._resizeDetails.started)return i._resizeDetails.started=i._resizeDetails.resizeEventFired=!1,i.removeAttribute("resizing"),i._preventDropDownClose=!1,i.focus(),void i.$.fireEvent("resizeEnd",{position:{left:t.pageX,top:t.pageY}});if(i.disabled||i._isDropDownClicked||i.readonly)return void delete i._isDropDownClicked;if(i._overlayDown)return i.close(),void delete i._overlayDown;let a=t.originalEvent.target,n=a.closest?a.closest("smart-drop-down-list"):void 0;if(i.enableShadowDOM&&(a=t.originalEvent.composedPath()[0],n=a.getRootNode().host),i._preventsSelectStart=!1,"undefined"!=typeof a&&a!==i.$.resizeBar){if("tokens"===i.selectionDisplayMode&&a.classList.contains("smart-drop-down-list-selection-label")&&n===i){"none"!==i.dropDownOpenMode&&i.open();let t=i.$.listBox._items.filter(t=>t.label.toString()===a.textContent)[0];return i.$.listBox._scrollView.scrollTop=t.offsetTop,void i._focus(t)}if("tokens"===i.selectionDisplayMode&&a.classList.contains("smart-drop-down-list-unselect-button")&&n===i)return 1===i.selectedIndexes.length&&0>["zeroOrMany","zeroOrOne","checkBox"].indexOf(i.selectionMode)?void 0:void i.unselect(i.$.listBox._items.filter(t=>t.label.toString()===a.previousElementSibling.textContent)[0]);const t=a.closest(".smart-action-button");if(i._buttonClicked&&("dropDownButton"===i.dropDownOpenMode&&t&&i._buttonClicked===i.$.actionButton?i.$.fireEvent("actionButtonClick"):(a.closest(".smart-drop-down-button")===i._buttonClicked||t===i._buttonClicked)&&i.$.fireEvent("dropDownButtonClick")),i._buttonClicked=void 0,t===i.$.actionButton||a.closest(".smart-drop-down-button")===i.$.dropDownButton)return"dropDownButton"===i.dropDownOpenMode&&t===i.$.actionButton?void i.close():void(i.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==i.dropDownOpenMode?i.open():i.close());a=i._getUpEventTarget(a),void 0===a||("dropDownContainer"!==a&&"item"!==a||"item"===a&&"checkBox"!==i.selectionMode&&0>i.selectionMode.indexOf("Many"))&&i.close()}}_dragStartHandler(t){const i=this;i._resizeDetails&&i._resizeDetails.started&&t.preventDefault()}_dropDownTransitionendHandler(){const t=this;t._edgeMacFF&&!t.opened&&t.hasAnimation&&(t.$.dropDownContainer.style.top=t.$.dropDownContainer.style.left="",t.$dropDownContainer.addClass("not-in-view"))}_focus(t){this.$.listBox._focus(t)}_blurEventHandler(){const t=this;t.$.dropDownButton&&(t.removeAttribute("focus"),t.$.dropDownButton.removeAttribute("focus")),t.$.actionButton&&(t.removeAttribute("focus"),t.$.actionButton.removeAttribute("focus")),t.nodeName&&"Smart-DROP-DOWN-LIST"===t.nodeName&&!t._preventDropDownClose&&t.close()}_focusEventHandler(){const t=this;t.$.dropDownButton&&(t.setAttribute("focus",""),t.$.dropDownButton.setAttribute("focus","")),t.$.actionButton&&(t.setAttribute("focus",""),t.$.actionButton.setAttribute("focus","")),t.removeAttribute("drop-down-button-focus"),t.removeAttribute("action-button-focus")}_buttonsFocusHandler(t){const i=this;t.target===i.$.dropDownButton?"focus"===t.type?i.setAttribute("drop-down-button-focus",""):(i.removeAttribute("drop-down-button-focus"),i.nodeName&&"Smart-DROP-DOWN-LIST"===i.nodeName&&!i._preventDropDownClose&&i.close()):"focus"===t.type?i.setAttribute("action-button-focus",""):i.removeAttribute("action-button-focus")}_getUpEventTarget(t){const i=this;let a=t;for(;a;){if(a instanceof Smart.ListItem&&a.ownerListBox===i.$.listBox){if(a.unselectable||a.disabled)return;a="item";break}else if(a===i.$.dropDownContainer){a="dropDownContainer";break}a=a.parentElement}if(i.enableShadowDOM&&null!==a)for(a=t.getRootNode().host;a;){if(a===i.$.dropDownContainer){a="dropDownContainer";break}a=a.parentElement}return a}_keyDownHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement||document.activeElement:document.activeElement,n=i.enableShadowDOM?t.composedPath()[0]:t.target;if(!(i.$.listBox&&n===i.$.listBox.$.filterInput||a!==i&&a!==i.$.dropDownButton&&a!==i.$.actionButton))switch(t.key){case"Enter":case" ":n.setAttribute("active",""),t.preventDefault(),n!==i.$.actionButton&&(i._keyPressed=!0,i.opened?(i._focusedItem&&i.select(i._focusedItem),"Enter"===t.key&&0>["none"].indexOf(i.selectionMode)&&i.close()):!i.opened&&!i.readonly&&"none"!==i.dropDownOpenMode&&i.open());break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(i.readonly)return;if(t.altKey)return i._keyPressed=!1,void(i.$dropDownContainer.hasClass("smart-visibility-hidden")?i.open():i.close());t.preventDefault(),i.$.listBox._handleKeyStrokes(t.key);break;case"Escape":t.preventDefault(),i.close();break;default:if(i.readonly)return;"oneOrManyExtended"===i.selectionMode&&(i.$.listBox._keysPressed[t.key]=!0),i.$.listBox._applyIncrementalSearch(t.key);}}_keyUpHandler(t){const i=this,a=i.enableShadowDOM?t.composedPath()[0]:t.target;i.$.listBox&&a===i.$.listBox.$.filterInput||(("Enter"===t.key||" "===t.key)&&(a.removeAttribute("active"),!i.$dropDownContainer.hasClass("smart-visibility-hidden")&&(i._keyPressed=!1)),i.$.listBox&&"oneOrManyExtended"===i.selectionMode&&(i.$.listBox._keysPressed[t.key]=!1))}_listBoxChangeHandler(t){const i=this;(i.dropDownAppendTo&&0<i.dropDownAppendTo.length||i.enableShadowDOM)&&i.$.fireEvent("change",t.detail),i._applySelection(i.selectionMode,t.detail)}_listBoxItemClickHandler(){const t=this;"checkBox"!==t.selectionMode&&0>t.selectionMode.indexOf("Many")&&t.close(),"Smart-COMBO-BOX"===t.nodeName&&t.$.input.focus()}_listBoxKeyDownHandler(t){const i=this;if("Enter"===t.key&&(i.close(),"dropDownButton"===i.dropDownOpenMode?i.$.dropDownButton.focus():i.focus(),t.stopPropagation()),"Escape"===t.key)return void i.close()}_mouseEnterHandler(){const t=this;t._isElementHovered=!0,!(-1<t.tagName.indexOf("Smart-DROP-DOWN-"))||"auto"!==t.dropDownOpenMode||t.disabled||t.readonly||t.open()}_mouseLeaveHandler(){const t=this;t.removeAttribute("hover"),t._isElementHovered=!1,"auto"!==t.dropDownOpenMode||t.disabled||t.readonly||t._autoClose()}_autoClose(){const t=this;t._autoCloseTimeout=setTimeout(function(){t._isElementHovered||t.close(),clearTimeout(t._autoCloseTimeout)}.bind(t),t.autoCloseDelay)}_propertyValidator(t,i){return"number"!=typeof i&&"string"!=typeof i?t:i}_resizeHandler(){const t=this;"none"===t.resizeMode&&(t._calculateDropDownSize(),t._setDropDownSize())}_selectStartHandler(t){this._preventsSelectStart&&t.preventDefault()}_setDropDownSize(){const t=this;if(t._dropDownSize||t._calculateDropDownSize(),["dropDownMinWidth","dropDownMinHeight","dropDownMaxWidth","dropDownMaxHeight"].forEach(i=>{t.$.dropDownContainer.style[i.replace("dropDown","").replace(/^./,"m")]=t[i]?t[i]+(t[i].toString().endsWith("%")?"%":"px"):null}),!t.dropDownWidth)t.$.dropDownContainer.style.width="auto"===t._dropDownSize.width?"auto":(parseFloat(t._dropDownSize.width)||0)+"px";else if("auto"!==t.dropDownWidth)t.$.dropDownContainer.style.width=("initial"===t.dropDownWidth?t.offsetWidth:parseFloat(t.dropDownWidth))+"px";else if(t.$.dropDownContainer.style.width="auto",t.$.listBox){let i=2+2*parseInt(window.getComputedStyle(t.$.listBox.$.itemsContainer).getPropertyValue("--smart-list-item-horizontal-offset"));t.$.dropDownContainer.style.width=i+t.$.listBox._scrollWidth+"px"}if(t.dropDownHeight&&"auto"!==t.dropDownHeight)t.$.dropDownContainer.style.height=parseFloat(t.dropDownHeight)+(-1<(t.dropDownHeight+"").indexOf("%")?"%":"px");else if(t.$.listBox&&("auto"===t._dropDownSize.height||"auto"===t.dropDownHeight)){t.$.dropDownContainer.style.height="";let i=2*parseInt(window.getComputedStyle(t.$.listBox.$.itemsContainer).getPropertyValue("--smart-list-item-vertical-offset"));isNaN(i)&&(i=6);let a=i;0<t.$.listBox.items.length&&t.$.listBox.items.map(t=>a+=t.height||t.offsetHeight),a=a+t._dropDownSize.paddingWidth+t._dropDownSize.borderWidth,t.$.dropDownContainer.style.height=a+"px"}else t.$.dropDownContainer.style.height=t._dropDownSize.height;t.$.listBox&&t.$.listBox._refreshLayout()}_styleChangedHandler(t){const i=this;if(i.dropDownAppendTo&&0<i.dropDownAppendTo.length){const a=t.detail.styleProperties,n=["font-size","font-family","font-style","font-weight"];for(let t=0;t<n.length;t++)a[n[t]]&&(i.$.dropDownContainer.style[n[t]]=a[n[t]].value)}"auto"===i._dropDownSize.height&&i._setDropDownSize()}_validateTemplate(t){const i=this;if(t)return"function"==typeof t?void 0:"content"in document.createElement("template")?(t instanceof HTMLTemplateElement||(t=document.getElementById(t)),null!==t&&"content"in t?t:void i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:"tokenTemplate"}))):void i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()}))}}),Smart("smart-drop-down-button",class extends Smart.DropDownList{static get requires(){return{"Smart.DropDownList":"smart.dropdownlist.js"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <span id="actionButton" class="smart-input smart-action-button">[[placeholder]]</span>
                            <span id="dropDownButton" class="smart-drop-down-button">
                                <span id="arrow"></span>
                            </span>
                        </div>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-scroll-viewer id="scrollViewer"
                                inner-h-t-m-l = "[[innerHTML]]"
                                right-to-left="[[right-to-left]]" 
                                horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]">
                                    <content></content>
                            </smart-scroll-viewer>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"placeholder":case"selectedIndexes":case"selectedValues":case"tokenTemplate":case"dataSource":case"displayMember":break;case"innerHTML":case"resizeMode":"innerHTML"===t?n.$.scrollViewer.innerHTML=a:n.$.dropDownContainer.setAttribute("resize-mode",n.resizeMode),n.$.scrollViewer.refresh();break;default:super.propertyChangedHandler(t,i,a);}}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void i.$.scrollViewer.appendChild(t):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(!i.$.dropDownContainer.contains(t)||i.$.scrollViewer.removeChild(t)):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeAll(){const t=this;t.isCompleted&&t.$.scrollViewer.removeAll()}open(){const t=this,a=document.getElementsByTagName("smart-drop-down-button");for(let n=0;n<a.length;n++)a[n]!==t&&a[n].opened&&a[n].close();super.open(),t.$.scrollViewer.refresh()}scrollTo(t,i){const a=this;a.isCompleted&&a.$.scrollViewer.scrollTo(t,i)}_createElement(){const t=this;t._setDropDownSize(),t._setFocusable(),t.$.arrow.noRipple=!0}_documentUpHandler(t){const i=this,a=i.hasAttribute("resizing");super._documentUpHandler(t),a&&i.$.scrollViewer&&i.$.scrollViewer.refresh()}_keyDownHandler(t){const i=this,a=document.activeElement;if(!(i.disabled||i.readonly||a!==i&&a!==i.$.dropDownButton&&a!==i.$.actionButton))switch(t.key){case"Enter":case" ":t.target.setAttribute("active",""),t.preventDefault(),t.target!==i.$.actionButton&&(i._keyPressed=!0,i.opened&&"Enter"===t.key?i.close():!i.opened&&!i.readonly&&"none"!==i.dropDownOpenMode&&i.open());break;case"End":i.$.scrollViewer.scrollTop=i.$.scrollViewer.scrollHeight;break;case"Home":i.$.scrollViewer.scrollTop=0;break;case"PageUp":case"PageDown":i.$.scrollViewer.scrollTop+=(-1<t.key.indexOf("Down")?1:-1)*i.$.dropDownContainer.offsetHeight;break;case"ArrowUp":case"ArrowDown":if(t.altKey)return i._keyPressed=!1,void(i.$dropDownContainer.hasClass("smart-visibility-hidden")?i.open():i.close());t.preventDefault(),i.$.scrollViewer.scrollTop+=10*(-1<t.key.indexOf("Down")?1:-1);break;case"Escape":t.preventDefault(),i.close();}}}),Smart("smart-multi-split-button",class extends Smart.DropDownList{static get properties(){return{buttonsDataSource:{value:[],type:"array"},dropDownOpenMode:{allowedValues:["none","dropDownButton","auto"],value:"dropDownButton",type:"string"}}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div id="actionButton" class ="smart-input smart-action-button">
                         <template>
                                 <div class="smart-multi-split-button-buttons" *items={{buttonsDataSource}}><span class="smart-action-split-button" inner-H-T-M-L={{item}}></span></div>
                          </template>
                        </div>
                        <span id="dropDownButton" class="smart-drop-down-button">
                            <span id="arrow"></span>
                        </span>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-list-box id="listBox" unfocusable
                                    animation="[[animation]]"
                                    data-source="[[dataSource]]"
                                    disabled="[[disabled]]"
                                    display-loading-indicator="[[displayLoadingIndicator]]"
                                    display-member="[[displayMember]]"
                                    filterable="[[filterable]]"
                                    filter-mode="[[filterMode]]"
                                    filter-input-placeholder="[[filterInputPlaceholder]]"
                                    grouped="[[grouped]]"
                                    group-member="[[groupMember]]"
                                    item-height="[[itemHeight]]"
                                    item-template="[[itemTemplate]]"
                                    incremental-search-delay="[[incrementalSearchDelay]]"
                                    incremental-search-mode="[[incrementalSearchMode]]"
                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"
                                    loading-indicator-position="[[loadingIndicatorPosition]]"
                                    name="[[name]]"
                                    placeholder="[[dropDownPlaceholder]]"
                                    readonly="[[readonly]]"
                                    selected-indexes="{{selectedIndexes}}"
                                    selection-mode="[[selectionMode]]"
                                    selected-values="{{selectedValues}}"
                                    sorted="[[sorted]]"
                                    theme="[[theme]]"
                                    value-member="[[valueMember]]"
                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"
                                    virtualized="[[virtualized]]">
                                <content></content>
                            </smart-list-box>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.move":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","dropDownButton.mouseenter":"_dropDownButtonMouseEventsHandler","dropDownButton.mouseleave":"_dropDownButtonMouseEventsHandler","actionButton.focus":"_focusEventHandler","actionButton.blur":"_blurEventHandler","dropDownButton.focus":"_focusEventHandler","dropDownButton.blur":"_blurEventHandler"}}_blurEventHandler(){const t=this;t.removeAttribute("focus"),t._preventDropDownClose||t.close()}_focusEventHandler(){this.setAttribute("focus","")}_documentUpHandler(t){const i=this;super._documentUpHandler(t);const a=i.querySelectorAll(".smart-action-split-button");for(let n=0;n<a.length;n++){const t=a[n];t.removeAttribute("active")}i.removeAttribute("active")}_dropDownButtonMouseEventsHandler(t){const i=this;"mouseleave"===t.type?(i.$.dropDownButton.removeAttribute("hover"),i.removeAttribute("hover")):(i.$.dropDownButton.setAttribute("hover",""),i.setAttribute("hover",""))}_buttonsDownHandler(t){const a=this,n=a.querySelectorAll(".smart-action-split-button");for(let o=0;o<n.length;o++){const i=n[o],l=i.getBoundingClientRect();"mouseleave"===t.type?(n[o].removeAttribute("active"),a.removeAttribute("active","")):(a.setAttribute("active",""),n[o].removeAttribute("active"),l.left<=t.pageX&&t.pageX<=l.width+l.left&&(n[o].setAttribute("active",""),a.$.fireEvent("buttonClick",{index:o,label:a.buttonsDataSource[o]})))}}_buttonsMouseEventsHandler(t){const a=this,n=a.querySelectorAll(".smart-action-split-button");for(let o=0;o<n.length;o++){const i=n[o],l=i.getBoundingClientRect();"mouseleave"===t.type?(n[o].removeAttribute("hover"),a.removeAttribute("hover","")):(a.setAttribute("hover",""),n[o].removeAttribute("hover"),l.left<=t.pageX&&t.pageX<=l.width+l.left&&n[o].setAttribute("hover",""))}}_applySelection(){const t=this;if(0===t.buttonsDataSource.length){if("placeholder"===t.selectionDisplayMode||0===t.selectedIndexes.length)return void(t.querySelector(".smart-template-container").innerHTML=t.placeholder);if(!t.$.listBox._items||0===t.$.listBox._items.length)return;t.querySelector(".smart-template-container").innerHTML="<div class=\"smart-multi-split-button-buttons\"><span class=\"smart-action-split-button\"></span></div>",t.$.actionButton.querySelector(".smart-action-split-button").appendChild(t._createToken())}}propertyChangedHandler(t,i,a){const n=this;"dataSource"===t||"displayMember"===t?(n._setDropDownSize(),n._positionDetection.checkBrowserBounds("vertically"),n._positionDetection.positionDropDown(),n._positionDetection.checkBrowserBounds("horizontally")):super.propertyChangedHandler(t,i,a)}}),Smart("smart-combo-box",class extends Smart.DropDownList{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"none"},autoCompleteDelay:{value:700,type:"number"},escKeyMode:{allowedValues:["none","previousValue","clearValue"],type:"string",value:"none"},minLength:{type:"number",value:2},value:{value:"",type:"string"}}}static get listeners(){return{"input.focus":"_inputFocusHandler","input.blur":"_inputFocusHandler","dropDownButton.focus":"_dropDownButtonFocusHandler","dropDownButton.blur":"_dropDownButtonFocusHandler","input.change":"_inputChangeEventHandler","input.mouseenter":"_buttonsMouseEventsHandler","input.mouseleave":"_buttonsMouseEventsHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.selectstart":"_selectStartHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler",wheel:"_mouseWheelHandler"}}static get styleUrls(){return["smart.combobox.css"]}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                         <div id="selectionField" class ="smart-input smart-selection-field">
                             <input id="input" placeholder="[[placeholder]]" autocomplete="off"/>
                             <div class="smart-combo-box-auto-complete-string" id="autoCompleteString"></div>
                         </div>
                        <span id="dropDownButton" class ="smart-drop-down-button smart-unselectable">
                            <span id="arrow"></span>
                        </span>
                         <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-list-box id="listBox"
                                    animation="[[animation]]"
                                    unfocusable="true"
                                    data-source="[[dataSource]]"
                                    disabled="[[disabled]]"
                                    display-loading-indicator="[[displayLoadingIndicator]]"
                                    display-member="[[displayMember]]"
                                    filterable="[[filterable]]"
                                    filter-mode="[[filterMode]]"
                                    filter-input-placeholder="[[filterInputPlaceholder]]"
                                    grouped="[[grouped]]"
                                    group-member="[[groupMember]]"
                                    item-height="[[itemHeight]]"
                                    item-template="[[itemTemplate]]"
                                    incremental-search-delay="[[incrementalSearchDelay]]"
                                    incremental-search-mode="[[incrementalSearchMode]]"
                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"
                                    loading-indicator-position="[[loadingIndicatorPosition]]"
                                    name="[[name]]"
                                    placeholder="[[dropDownPlaceholder]]"
                                    readonly="[[readonly]]"
                                    selected-indexes="{{selectedIndexes}}"
                                    selection-mode="[[selectionMode]]"
                                    selected-values="{{selectedValues}}"
                                    sorted="[[sorted]]"
                                    theme="[[theme]]"
                                    value-member="[[valueMember]]"
                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"
                                    virtualized="[[virtualized]]">
                                <content></content>
                            </smart-list-box>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"autoComplete":n._autoComplete(!0);break;case"dataSource":case"displayMember":n._clearSelection(!0),n._setDropDownSize(),n._positionDetection.checkBrowserBounds("vertically"),n._positionDetection.positionDropDown(),n._positionDetection.checkBrowserBounds("horizontally");break;case"disabled":n.$.input.disabled=a,n._setFocusable(),n.close(),n._positionDetection&&n._positionDetection.handleAutoPositioning();break;case"readonly":n.$.input.readOnly=a,n.close();break;case"selectedValues":case"selectedIndexes":n._clearSelection(!0),n._applySelection(n.selectionMode);break;case"selectionMode":case"selectionDisplayMode":n._clearSelection(),n._applySelectionDisplayMode(),"tokens"===n.selectionDisplayMode&&(n._currentSelection=void 0),n._applySelection(n.selectionMode);break;case"tokenTemplate":if(n.$.selectionField)for(;"SPAN"===n.$.selectionField.firstElementChild.nodeName;)n.$.selectionField.removeChild(n.$.selectionField.firstElementChild);n._tokenTemplate=n._validateTemplate(n.tokenTemplate),n._applySelection();break;case"value":n._queryItems(!0);break;default:super.propertyChangedHandler(t,i,a);}}clearItems(){const t=this;t.$.listBox.clearItems(),t._clearSelection(!0)}clearSelection(){const t=this;t.$.listBox.clearSelection(),t._clearSelection(!arguments[0])}_setFocusable(){const t=this;if(!t.disabled&&!t.unfocusable){let i=0<t.tabIndex?t.tabIndex:0;return t.$.input.tabIndex=i,void("dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.setAttribute("tabindex",i):t.$.dropDownButton.removeAttribute("tabindex"))}t.$.input.tabIndex=-1,t.$.dropDownButton.removeAttribute("tabindex")}_autoComplete(t){const i=this;if(0===i.$.listBox._items.length&&"function"!=typeof i.dataSource)return void i.close();const a=i.$.input.value.length<i.minLength?"":"escaped"===i.displayMode?i._toDefaultDisplayMode(i.$.input.value):i.$.input.value,n=function(t){for(let a=0;a<t.length;a++)if(t[a]._focused&&t[a].hasAttribute("focus"))return!0};let o;1===i.$.listBox.selectedValues.length&&(o=i.$.listBox.getItem(i.$.listBox.selectedValues[0])),i.$.autoCompleteString.textContent="",i.$.listBox.$.filterInput.value="none"===i.autoComplete||i.$.input.value.length<i.minLength?"":a;const l=function(){if(i.$.listBox.isAttached&&i.$.input){const t=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;if(i._setDropDownSize(),i.opened&&(i._positionDetection.positionDropDown(),i._positionDetection.checkBrowserBounds()),i.$.listBox._filteredItems&&0<i.$.listBox._filteredItems.length){if(i.$.listBox._scrollView.scrollTop=i.$.listBox._filteredItems[0].offsetTop,"none"!==i.autoComplete&&i.$.input.value.length>=i.minLength&&!n(i.$.listBox._filteredItems)&&i._focus(i.$.listBox._filteredItems[0]),t===i.$.input&&"inline"===i.autoComplete&&i.$.input.value.length>=i.minLength&&i._updateAutoCompleteHelper(),o&&o.label===i.$.listBox._filteredItems[0].label&&o.value===i.$.listBox._filteredItems[0].value&&(i.$.listBox.context=i.$.listBox,i.$.listBox._select(i.$.listBox._filteredItems[0],!0),i.$.listBox.context=r),a!==i.$.listBox._filteredItems[0].label){if(i._closedFromKeyCombination)return void(i._closedFromKeyCombination=!1);if(a.length<i.minLength)return void i.close();i.isCompleted&&"none"!==i.dropDownOpenMode&&t===i.$.input&&i.open()}return}i.close()}};let r=i.$.listBox.context;i.$.listBox.context=i.$.listBox,i.$.listBox._filterItems(!!t,l),i.$.listBox.context=r}_updateAutoCompleteHelper(){const t=this;return t.$.autoCompleteString.style.width=t.$.input.offsetWidth+"px",t.$.autoCompleteString.style.height=t.$.input.offsetHeight+"px",t.$.autoCompleteString.style.left=t.$.input.offsetLeft+"px",t.$.autoCompleteString.style.top=t.$.input.offsetTop+"px",t._focusedItem?void(t._focusedItem.label.length!==t.$.input.value.length&&(t.$.autoCompleteString.textContent=t.$.input.value+t._focusedItem.label.slice(t.$.input.value.length))):void(t.$.autoCompleteString.textContent="")}_applySelection(t,i){function a(){for(;"SPAN"===n.$.selectionField.firstElementChild.nodeName;)n.$.selectionField.removeChild(n.$.selectionField.firstElementChild);let t=document.createDocumentFragment(),i,a;a="tokens"===n.selectionDisplayMode?1===n.selectedIndexes.length&&("oneOrManyExtended"===n.selectionMode||"oneOrMany"===n.selectionMode)?"":"&#10006":",",n.selectedIndexes.map(o=>{i=n._applyTokenTemplate(n.$.listBox._items[o].label,a),i._value=n.$.listBox._items[o].value,t.appendChild(i)}),n.$.selectionField.insertBefore(t,n.$.input),n._currentSelection=n.selectedIndexes.map(t=>n.$.listBox._items[t].label),n.$.container.setAttribute("has-value",""),n._oldValue=n.value=n._currentSelection.toString(),n._positionDetection.positionDropDown()}const n=this;if(n.$.autoCompleteString.textContent="",0===n.selectedIndexes.length)return void n._clearSelection(i&&n.$.input.value===i.label);if(n.$.listBox._items&&0!==n.$.listBox._items.length)if("one"===n.selectionMode||"zeroOrOne"===n.selectionMode||"radioButton"===n.selectionMode){if(n._currentSelection&&n._currentSelection.length>n.selectedIndexes.length)return n._currentSelection=n.selectedIndexes.map(t=>n.$.listBox._items[t].label),n.$.input.value=n._currentSelection.toString(),void(n._oldValue=n.value=n._currentSelection.toString());n._clearSelection(),n._currentSelection=n.selectedIndexes.map(t=>n.$.listBox._items[t].label),n.$.input.value=n._currentSelection.toString(),n._oldValue=n.value=n._currentSelection.toString(),n.$.container.setAttribute("has-value",""),"none"!==n.autoComplete&&"function"!=typeof n.dataSource&&(n._autoComplete(!0),n.close())}else{if(n.$.input.value="",n.$.input.placeholder="",n.$.container.setAttribute("has-value",""),!n._currentSelection||"oneOrManyExtended"===n.selectionMode||"radioButton"===n.selectionMode&&!n.grouped)return void a();const o=n.$.selectionField.getElementsByClassName("smart-token");if(n._currentSelection.length<n.selectedIndexes.length){let t=n.selectedIndexes.map(t=>n.$.listBox._items[t].label);for(let a=0;a<t.length;a++)if(0>n._currentSelection.indexOf(t[a])){const t=n.$.listBox._items[n.selectedIndexes[a]];let i,o;o="tokens"===n.selectionDisplayMode?1===n.selectedIndexes.length&&("oneOrManyExtended"===n.selectionMode||"oneOrMany"===n.selectionMode)?"":"&#10006":",",1===n.selectedIndexes.length&&("oneOrManyExtended"===n.selectionMode||"oneOrMany"===n.selectionMode)&&(o=""),i=n._applyTokenTemplate(t.label,o),i._value=t.value,n.$.selectionField.insertBefore(i,n.$.input)}"none"!==n.autoComplete&&n.$.listBox._filteredItems&&n.$.listBox._filteredItems.length!==n.$.listBox._items.length&&n._autoComplete(!0),n._positionDetection.positionDropDown()}else{if(0<n._currentSelection.length&&0===o.length||n._currentSelection.length===n.selectedIndexes.length&&n._currentSelection.toString()!==n.selectedValues.toString())return void a();if(!i)return;for(let a=0;a<o.length;a++)if(o[a]._value===i.value){n.$.selectionField.removeChild(o[a]);break}}n._currentSelection=n.selectedIndexes.map(t=>n.$.listBox._items[t].label),n._oldValue=n.value=n._currentSelection.toString()}}_applySelectionDisplayMode(){const t=this;"one"===t.selectionMode||"zeroOrOne"===t.selectionMode||"radioButton"===t.selectionMode?t.$.removeClass("auto-height"):t.$.addClass("auto-height")}_bindingCompleteHandler(){const t=this;t._queryItems(),t._setDropDownSize()}_buttonsMouseEventsHandler(t){const i=this;i.disabled||i.readonly||("mouseenter"===t.type?(t.target.setAttribute("hover",""),i.setAttribute("hover",""),"auto"===i.dropDownOpenMode&&(t.target===i.$.dropDownButton?(i.open(),i.$.input.focus()):i.close())):(t.target.removeAttribute("hover"),i.removeAttribute("hover")))}_createElement(){const t=this;t._tokenTemplate=t._validateTemplate(t.tokenTemplate),t._applySelectionDisplayMode(),t._applySelection(t.selectionMode),"none"!==t.autoComplete&&(t._autoComplete(!0),t.$.input.autocomplete="off"),t._setDropDownSize(),t.$.input.disabled=t.disabled,t.$.input.readOnly=t.readonly,t._setFocusable(),0<t.$.input.value.length&&0===t.selectedIndexes.length&&(t.$.container.setAttribute("has-value",""),t._oldValue=t.value=t.$.input.value),t.$.arrow.noRipple=!0}_clearSelection(t){const i=this;if(t&&(i.$.input.value=""),i.$.input.placeholder=i.placeholder,i.$.autoCompleteString.textContent="",i._currentSelection=[],i.$.selectionField)for(;"SPAN"===i.$.selectionField.firstElementChild.nodeName;)i.$.selectionField.removeChild(i.$.selectionField.firstElementChild);"none"!==i.autoComplete&&0<i.$.input.value.length&&(i._autoCompleteTimer&&clearTimeout(i._autoCompleteTimer),"function"!=typeof i.dataSource&&(i._autoCompleteTimer=setTimeout(function(){i._autoComplete(!0)},i.autoCompleteDelay))),i.$.container.removeAttribute("has-value")}_documentDownHandler(t){const i=this;super._documentDownHandler(t);let a=t.originalEvent.target;i.enableShadowDOM&&(a=t.originalEvent.composedPath()[0]),a===i.$.dropDownButton&&"none"!==i.dropDownOpenMode&&requestAnimationFrame(()=>i.$.input.focus())}_documentUpHandler(t){const i=this;let a=t.originalEvent.target,n=a.closest?a.closest("smart-combo-box"):void 0;i.enableShadowDOM&&(a=t.originalEvent.composedPath()[0],n=a.getRootNode().host);const o=a;if(i._resizeDetails&&i._resizeDetails.started)return i._resizeDetails.started=i._resizeDetails.resizeEventFired=!1,i.removeAttribute("resizing"),i._dropDownResized=!0,void i.$.fireEvent("resizeEnd",{position:{left:t.pageX,top:t.pageY}});if(i.disabled||i._isDropDownClicked||i.readonly)return void delete i._isDropDownClicked;if(i._overlayDown)return i.close(),void delete i._overlayDown;if(a!==i.$.input&&"undefined"!=typeof a&&a!==i.$.resizeBar){if(a===i.$.selectionField)return void i.$.input.focus();if(a===i.$.dropDownButton&&"none"!==i.dropDownOpenMode)return i._preventDropDownClose=!0,i.$dropDownContainer.hasClass("smart-visibility-hidden")?i.open():i.close(),void requestAnimationFrame(()=>i.$.input.focus());if(a.classList.contains("smart-drop-down-list-selection-label")&&n===i&&"none"!==i.dropDownOpenMode){i.open();let t=i.$.listBox._items.filter(t=>t.label.toString()===a.textContent)[0];return i.$.input.focus(),i.$.listBox._scrollView.scrollTop=t.offsetTop,void i._focus(t)}return"tokens"===i.selectionDisplayMode&&a.classList.contains("smart-drop-down-list-unselect-button")&&n===i?1===i.selectedIndexes.length&&0>["zeroOrMany","zeroOrOne","checkBox"].indexOf(i.selectionMode)?void 0:(i.unselect(i.$.listBox._items.filter(t=>t.label.toString()===a.previousElementSibling.textContent)[0]),void i.$.input.focus()):(a=i._getUpEventTarget(a),void 0===a?void i.$.input.focus():void((!i.$dropDownContainer.hasClass("smart-visibility-hidden")&&"dropDownContainer"!==a&&"item"!==a||"item"===a&&0>i.selectionMode.indexOf("Many")&&"checkBox"!==i.selectionMode)&&i.close(),("item"===a||"dropDownContainer"===a&&o!==i.$.listBox.$.filterInput)&&i.$.input.focus()))}}_dropDownButtonFocusHandler(t){const i=this;"focus"===t.type?("dropDownButton"!==i.dropDownOpenMode&&i.$.input.focus(),i.setAttribute("focus","")):i.removeAttribute("focus")}_inputFocusHandler(t){const i=this;i.disabled||("focus"===t.type?(i.setAttribute("focus",""),i._oldValue=i.$.input.value):(i.removeAttribute("focus"),""!==t.target.value||0!==i.selectedIndexes.length&&""===t.target.value?i.$.container.setAttribute("has-value",""):i.$.container.removeAttribute("has-value"),!i._preventDropDownClose&&(i.opened&&("auto"===i.autoComplete||"inline"===i.autoComplete)&&0<i.$.input.value.length&&i._focusedItem&&!i._focusedItem.selected&&i.select(i._focusedItem),i.close()),"previousValue"===i.escKeyMode&&(i.value=i.$.input.value)))}_inputChangeEventHandler(t){const i=this;t.stopPropagation(),i.$.fireEvent("change",{oldValue:i._oldValue,newValue:i.$.input.value,selectedItems:i.selectedItems,selectedValues:i.selectedValues})}_keyDownHandler(t){const i=this,a=i.enableShadowDOM?t.composedPath()[0]:t.target;if(!(i.disabled||i.readonly||a===i.$.listBox.$.filterInput))switch(t.key){case"Enter":return void(a===i.$.input&&i._focusedItem&&i.opened?(i.select(i._focusedItem),!i.$dropDownContainer.hasClass("smart-visibility-hidden")&&-1<i.selectionMode.indexOf("one")&&(i.close(),i._unfocus())):a===i.$.dropDownButton?(i.$.dropDownButton.setAttribute("active",""),i.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==i.dropDownOpenMode?i.open():i.close(),i.$.input.focus()):i.close());case"Escape":switch(i.escKeyMode){case"none":i.$dropDownContainer.hasClass("smart-visibility-hidden")||(i.close(),i._unfocus());break;case"clearValue":i.value=i.$.input.value="";break;case"previousValue":i.$.input.value=i._oldValue;}break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.altKey){if(i._closedFromKeyCombination=!0,i.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==i.dropDownOpenMode){if(i.open(),0===i.items.length)return;0===i.selectedIndexes.length?i._focus(i.items[0]):0<i.selectedIndexes.length&&!i.$.listBox._items[i.selectedIndexes[i.selectedIndexes.length-1]].hidden&&i._focus(i.items[i.selectedIndexes[i.selectedIndexes.length-1]])}else i.close();return}if(a===i.$.input&&i.$dropDownContainer.hasClass("smart-visibility-hidden"))return;if(("PageUp"===t.key||"PageDown"===t.key)&&!i._focusedItem||a===i.$.listBox.$.filterInput)return;if(t.preventDefault(),!i._focusedItem||i._focusedItem&&!i._focusedItem._focused)return void i._focus(i.items[0]);i.$.listBox._handleKeyStrokes(t.key),"inline"===i.autoComplete&&i._updateAutoCompleteHelper();break;case"Backspace":if(i.$.input.previousElementSibling){if(0===i.$.input.value.length){if(1===i.selectedIndexes.length&&0>["zeroOrMany","zeroOrOne","checkBox"].indexOf(i.selectionMode))return;const t=i.$.listBox.getItem(i.$.input.previousElementSibling._value);t?i.unselect(t):i.$.selectionField.firstElementChild&&"SPAN"===i.$.selectionField.firstElementChild.nodeName&&i.$.selectionField.removeChild(i.$.selectionField.firstElementChild)}return}1<i.selectedIndexes.length&&i.clearSelection(!0);break;default:a===i.$.input&&"oneOrManyExtended"===i.selectionMode&&(i.$.listBox._keysPressed[t.key]=!0);}}_keyUpHandler(t){const i=this,a=i.enableShadowDOM?t.composedPath()[0]:t.target;if(!(i.disabled||"none"===i.escKeyMode&&"Escape"===t.key||a===i.$.listBox.$.filterInput)){if(a===i.$.input&&"oneOrManyExtended"===i.selectionMode&&(i.$.listBox._keysPressed[t.key]=!1),-1<["one","radioButton","zeroOrOne"].indexOf(i.selectionMode)&&1===i.selectedIndexes.length&&i.$.input.value!==(i._currentSelection?i._currentSelection[0]:void 0)&&i.unselect(i.$.listBox._items[i.selectedIndexes[0]]),"Enter"===t.key)return void i.$.dropDownButton.removeAttribute("active");if(a===i.$.input&&0>t.key.indexOf("Arrow")&&0>["Control","Shift"].indexOf(t.key)){if(i.value===i.$.input.value)return;if(i.value=i._currentSelection?i._currentSelection.toString()+(0<i._currentSelection.length?",":"")+i.$.input.value:i.$.input.value,i.$.autoCompleteString.textContent="",i._closedFromKeyCombination)return void(i._closedFromKeyCombination=!1);if("none"===i.autoComplete?(0<i.$.input.value.length&&i._queryItems(),i._focusedItem&&(i.open()," "!==t.key&&(i.$.listBox._scrollView.scrollTop=i._focusedItem.offsetTop))):(i.$.input.value!==(i._currentSelection?i._currentSelection.toString():void 0)||i.$.listBox._filteredItems&&i.$.listBox._filteredItems.length!==i.$.listBox._items.length)&&(i._autoCompleteTimer&&clearTimeout(i._autoCompleteTimer),i._autoCompleteTimer=setTimeout(function(){i._autoComplete(!0)},i.autoCompleteDelay)),"none"!==i.autoComplete&&i.$.listBox._filteredItems&&i.$.listBox._filteredItems.length===i.$.listBox._items.length)return void i.close()}}}_mouseWheelHandler(t){const i=this;i.disabled||i.readonly||0===i.items.length||!i.$dropDownContainer.hasClass("smart-visibility-hidden")||i.$.listBox._handleKeyStrokes(0<t.deltaY?"ArrowDown":"ArrowUp")}_queryItems(t){const a=this;if(!a.value||!a.$.input)return void a.close();let n=a.$.listBox._queryItems(a.$.input.previousElementSibling?a.$.input.value:a.value,a.incrementalSearchMode);0===n.length&&a._unfocus();for(let o=0;o<n.length;o++)if(!n[o].hidden){t&&!n[o].selected&&a.select(n[o]),a._focus(n[o]);break}}_selectStartHandler(t){const i=this;i._resizeDetails&&i._resizeDetails.started&&t.preventDefault()}_unfocus(){const t=this;t._focusedItem&&(t._focusedItem._focused=!1,t.$.listBox._focusedItem=void 0)}}),Smart("smart-text-box",class extends Smart.ComboBox{static get properties(){return{autoFocus:{value:!1,type:"boolean"},autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},enterKeyBehavior:{value:"submit",allowedValues:["submit","clearOnSubmit"],type:"string"},form:{value:"",type:"string"},hint:{value:null,reflectToAttribute:!1,type:"any"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},selectionMode:{value:"zeroOrOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},type:{value:"input",type:"string",defaultReflectToAttribute:!0,readonly:!0},value:{value:"",type:"string"}}}static get listeners(){return{"document.up":"_documentUpHandler",focus:"_focusHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.blur":"_focusHandler","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.keyup":"_textBoxKeyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler","listBox.bindingComplete":"_bindingCompleteHandler"}}template(){return`<div id="container">
                    <span id="label" inner-h-t-m-l="[[label]]" class="smart-label"></span>
                    <div id="content" class="smart-content">
                        <input class="smart-input" type="text" id="input"
                            disabled="[[disabled]]"
                            maxlength="[[maxLength]]"
                            name="[[name]]"
                            placeholder="[[placeholder]]"
                            readonly="[[readonly]]">
                        <div id="autoCompleteString"></div>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                           <smart-list-box id="listBox"
                               data-source="[[dataSource]]"
                               unfocusable="true"
                               disabled="[[disabled]]"
                               display-loading-indicator="[[displayLoadingIndicator]]"
                               display-member="[[displayMember]]"
                               item-height="[[itemHeight]]"
                               item-template="[[itemTemplate]]"
                               filter-mode="[[filterMode]]"
                               loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"
                               loading-indicator-position="[[loadingIndicatorPosition]]"
                               readonly="[[readonly]]"
                               selection-mode="[[selectionMode]]"
                               value-member="[[valueMember]]">
                                <content></content>
                            </smart-list-box>
                         </div>
                    </div>
                    <span id="hint" class ="smart-hint"></span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"autoComplete":n.$.listBox._filteredItems&&n.$.listBox._filteredItems.length!==n.$.listBox._items.length&&super._autoComplete(!0),n.$.input.autocomplete="none"===a?"on":"off";break;case"dataSource":case"displayMember":n._clearSelection(),n._setDropDownSize(),n._positionDetection.checkBrowserBounds("vertically"),n._positionDetection.positionDropDown(),n._positionDetection.checkBrowserBounds("horizontally");break;case"displayMode":n.$.input.value="escaped"===a?n._toEscapedDisplayMode(n.value):n.value=n._toDefaultDisplayMode(n.$.input.value);break;case"value":(n.$.input!==document.activeElement||n.$.input===document.activeElement&&n.$.input.value===n._oldValue)&&(n.$.input.value="escaped"===n.displayMode?n._toEscapedDisplayMode(n.value):n.value,n._oldValue=i),0<a.length?n.$.addClass("has-value"):n.$.removeClass("has-value");break;case"hint":if(null===a)return n.$.hint.innerHTML="",void n.$.removeClass("invalid");n._handleHintContainer();break;default:super.propertyChangedHandler(t,i,a);}}static get requires(){return{"Smart.ComboBox":"smart.combobox.js"}}static get styleUrls(){return["smart.textbox.css"]}open(){const t=this;return 0===t.$.listBox.items.length||"none"===t.autoComplete?void 0:0===t.$.input.value.length&&t.$.listBox._filteredItems&&t.$.listBox._filteredItems.length!==t.$.listBox._items.length?void super._autoComplete(!0):void super.open()}close(){const t=this;super.close(),t.$.autoCompleteString.textContent="",t.$.listBox._focusedItem&&(t.$.listBox._focusedItem._focused=!1);"none"===t.autoComplete||t.$.input._filteredItems&&t.$.input._filteredItems[0]&&t.$.input._filteredItems[0]!==t.$.input.value&&super._autoComplete(!0)}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void(t.$.input.tabIndex=-1):void t.$.input.removeAttribute("tabindex")}reset(){const t=this;"escaped"===t.displayMode?(t.value=t._initializationValue,t.$.input.value=t._toEscapedDisplayMode(t._initializationValue)):t.$.input.value=t.value=t._initializationValue}_bindingCompleteHandler(){const t=this;t.$.listBox&&(t._setDropDownSize(),t._positionDetection.checkBrowserBounds())}_createElement(){const t=this;t._browserIsIEorEdge=Smart.Utilities.Core.Browser.IE||Smart.Utilities.Core.Browser.Edge,t.autoFocus&&t.$.input.focus(),t.value&&(t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(t.value):t.value),"none"!==t.autoComplete&&(t.$.input.autocomplete="off"),t._setDropDownSize(),t._handleSelectedText(),t._setFocusable(),t._initializationValue=t._oldValue=t.value,0<t.value.length?t.$.addClass("has-value"):t.$.removeClass("has-value"),t._handleHintContainer()}_focusHandler(t){const i=this;return"blur"===t.type?i._isDropDownClicked?void 0:(i.removeAttribute("focus"),i.$.autoCompleteString.textContent="",0<i.value.length?i.$.addClass("has-value"):i.$.removeClass("has-value"),("auto"===i.autoComplete||"inline"===i.autoComplete)&&0<i.$.input.value.length&&i.$.listBox._focusedItem&&i.$.listBox._focusedItem._focused&&(i.$.input.value=i.$.listBox._focusedItem.label),i._preventDropDownClose||i.close(),void(i._oldValue!==i.value&&i.$.fireEvent("change",{oldValue:i._oldValue,newValue:i.value}))):void(i.disabled||(i.setAttribute("focus",""),i._oldValue=i.value,i.selectAllOnFocus&&i.$.input.select()))}_handlePointerInEscapedSymbol(t){const i=this;if("escaped"===i.displayMode){let a=i.$.input.selectionStart,n=i.$.input.selectionEnd,o=i.$.input.value;if("\\"===o[a-1]&&o[a].match(/n|r|s|t|f/g)){if(a===n){let n="next"===t?1:-1;return i.$.input.selectionStart=a+n,void(i.$.input.selectionEnd=a+n)}i.$.input.selectionStart=a-1,"\\"===o[n-1]&&o[n].match(/n|r|s|t|f/g)&&(i.$.input.selectionEnd=n+1)}}}_handleSelectedText(){const t=this;null===t.selectionStart||null===t.selectionEnd||t.selectionStart===t.selectionEnd||t.selectAllOnFocus||(t.selectionStart=0>t.selectionStart?0:t.selectionStart,t.selectionEnd=t.selectionEnd>t.value.length?t.value.length:t.selectionEnd,t.$.input.setSelectionRange(t.selectionStart,t.selectionEnd))}_handleHintContainer(){const t=this;if(t.hint){const i=t.$.hint;if("function"==typeof t.hint){const a=t.value,n=t.hint(a,i);n?t.$.addClass("invalid"):t.$.removeClass("invalid")}else"string"==typeof t.hint&&(i.innerHTML=t.hint,t.$.removeClass("invalid"))}}_keyDownHandler(t){function i(i){let n=a.$.input.selectionStart,o=a.$.input.selectionEnd,l=a.$.input.value;t.preventDefault(),l=l.substring(0,n)+i+l.substring(o,l.length),a.value=a._toDefaultDisplayMode(l),a.$.input.value=l,a.$.input.selectionStart=a.$.input.selectionEnd=n+2}const a=this;switch(t.stopPropagation(),a._showAutoCompleteHighlighter=!1,t.key){case"ArrowUp":case"ArrowDown":if(t.altKey)return t.preventDefault(),void("ArrowDown"===t.key?a.open():a.close());if(a.opened){if(t.preventDefault(),a.$.listBox._handleKeyStrokes(t.key),"inline"!==a.autoComplete)break;a._showAutoCompleteHighlighter=!0,super._updateAutoCompleteHelper()}break;case"PageUp":a.$.input.selectionStart=a.$.input.selectionEnd=0;break;case"PageDown":a.$.input.selectionStart=a.$.input.selectionEnd=a.$.input.value.length;break;case"Enter":if(a.opened&&a.$.listBox._focusedItem&&a.$.listBox._focusedItem._focused&&(a.$.listBox.$.filterInput.value=a.$.listBox._focusedItem.label,a.$.input.value="escaped"===a.displayMode?a._toEscapedDisplayMode(a.$.listBox._focusedItem.label):a._toDefaultDisplayMode(a.$.listBox._focusedItem.label),a.select(a.$.listBox._focusedItem),a.close()),"default"!==a.enterKeyBehavior){t.preventDefault();const i=a.$.input.value;""!==i&&a._oldValue!==i&&(a.$.fireEvent("change",{oldValue:a._oldValue,newValue:i,type:"submit"}),"clearOnSubmit"===a.enterKeyBehavior&&(Smart.MaskedTextBox&&a instanceof Smart.MaskedTextBox?(a._cleanMask(),a._setMaskToInput(),a.$.input.selectionStart=a.$.input.selectionEnd=0):a.$.input.value=""),a._oldValue=a.value=a._toDefaultDisplayMode(a.$.input.value)),a._submitted=!0}break;case"Escape":if(a.close(),a._closedFromKeyCombination=!0,"none"===a.escKeyMode)return;switch(a.escKeyMode){case"none":break;case"clearValue":a.value=a.$.input.value="";break;case"previousValue":a.$.input.value="escaped"===a.displayMode?a._toEscapedDisplayMode(a._oldValue):a._oldValue;}break;case" ":"escaped"===a.displayMode&&i("\\s");break;case"Backspace":if("escaped"===a.displayMode&&a.$.input.selectionStart===a.$.input.selectionEnd){let t=a.$.input.selectionStart;"\\"===a.$.input.value[t-2]&&("s"===a.$.input.value[t-1]||"n"===a.$.input.value[t-1])&&(a.$.input.value=a.$.input.value.substring(0,t-2)+a.$.input.value.substring(t-2,a.$.input.value.length),a.$.input.selectionStart=t-2)}}}_keyUpHandler(t){const i=this;i.disabled||"Escape"===t.key||t.target===i.$.listBox.$.filterInput||t.target===i.$.input&&"oneOrManyExtended"===i.selectionMode&&(i.$.listBox._keysPressed[t.key]=!1)}_listBoxItemClickHandler(t){const i=this,a=t.detail;if(super._listBoxItemClickHandler(),a.selected){if("escaped"===i.displayMode){const t=i.$.input.value;i.value=i._toDefaultDisplayMode(t),i.$.input.value=t}else i.value=i.$.input.value;i._oldValue!==i.value&&(i.$.fireEvent("change",{oldValue:i._oldValue,newValue:i.value}),i.$.input.focus())}}_submitKeyUpHandler(){const t=this;t._submitted&&("clearOnSubmit"===t.enterKeyBehavior&&(t.$.input.selectionStart=t.$.input.selectionEnd=0),t._submitted=!1)}_textBoxKeyUpHandler(t){const i=this;if(i.disabled||t.altKey||t.ctrlKey)return;if("escaped"===i.displayMode){const t=i.$.input.value;i.value=i._toDefaultDisplayMode(i.$.input.value),i.$.input.value=t}else i.value=i.$.input.value;let a;if(1===i.$.listBox.selectedIndexes.length&&(a=i.$.listBox.getItem(i.$.listBox.selectedValues[0]),i.value!==a.label&&i.unselect(a)),i._showAutoCompleteHighlighter||(i.$.autoCompleteString.textContent=""),"Alt"===t.key||"Control"===t.key||!i.opened&&"Escape"===t.key||"Enter"===t.key)return void(i._closedFromKeyCombination=!1);if(t.key&&-1<t.key.indexOf("Arrow"))return void i._handlePointerInEscapedSymbol("ArrowRight"===t.key?"next":void 0);if("none"!==i.autoComplete&&0<i.$.input.value.length){const t=super._autoComplete.bind(i);if(i._autoCompleteTimer&&clearTimeout(i._autoCompleteTimer),0===i.$.listBox._items.length&&"function"!=typeof i.dataSource)return void i.close();i._autoCompleteTimer=setTimeout(function(){t(!0)},i.autoCompleteDelay)}else i.close();"Enter"===t.key&&i.value!==i.value&&i._browserIsIEorEdge&&(i.value=i.$.input.value,i.$.fireEvent("change",{value:i.value}))}_listBoxChangeHandler(t){const i=this;t.stopPropagation(),t.detail.selected&&(i.$.listBox.$.filterInput.value=t.detail.label,i.$.input.value="escaped"===i.displayMode?i._toEscapedDisplayMode(t.detail.value):i._toDefaultDisplayMode(t.detail.label))}_mouseEventsHandler(t){const i=this;"mouseenter"===t.type?i.setAttribute("hover",""):i.removeAttribute("hover")}_textBoxChangeHandler(t){const i=this;if(t.stopPropagation(),"escaped"===i.displayMode){const a=i.$.input.value,n=i.$.input.selectionStart,o=i.$.input.selectionEnd,l=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData||window.clipboardData;if(l){let a=l.getData("text"),r=i.$.input.value;t.preventDefault(),a=i._toEscapedDisplayMode(a),i.$.input.value=r.substring(0,n)+a+r.substring(o,r.length)}i.value=i._toDefaultDisplayMode(i.$.input.value),i.$.input.value=a}else i.value=i.$.input.value;i._handleHintContainer()}_textBoxSelectHandler(){const t=this;t.disabled||(t.selectionStart=t.$.input.selectionStart,t.selectionEnd=t.$.input.selectionEnd)}_toEscapedDisplayMode(t){const a=[{key:/\r\n|\n\r|\n|\r/g,value:"\\n"},{key:/\s/g,value:"\\s"},{key:/\n/g,value:"\\n"},{key:/\t/g,value:"\\t"},{key:/\f/g,value:"\\f"},{key:/\r/g,value:"\\r"}];for(let n=0;n<a.length;n++)t=t.replace(a[n].key,a[n].value);return t}_toDefaultDisplayMode(t){const a=[{key:/\\s/g,value:" "},{key:/\\n/g,value:"\n"},{key:/\\t/g,value:"\t"},{key:/\\f/g,value:"\f"},{key:/\\r/g,value:"\r"}];for(let n=0;n<a.length;n++)t=t.replace(a[n].key,a[n].value);return t}_documentDownHandler(t){const i=this;if(i.disabled||i.readonly)return;let a=t.originalEvent.target;if(i.enableShadowDOM){a=t.originalEvent.composedPath()[0];for(let t=a.getRootNode().host;t;)t.closest(".smart-drop-down-container")===i.$.dropDownContainer&&(i._isDropDownClicked=!0),t=t.getRootNode().host}else i._isDropDownClicked=a.closest(".smart-drop-down-container")===i.$.dropDownContainer;const n=t.originalEvent.target.closest("smart-list-item");i.hasRippleAnimation&&n&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),(n||i._isDropDownClicked)&&(i._preventDropDownClose=!0)}_documentUpHandler(t){const i=this;if(i.disabled)return;let a=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(a){if("escaped"===i.displayMode&&a===i.$.input&&i._handlePointerInEscapedSymbol(),i._isDropDownClicked||i.readonly)return void delete i._isDropDownClicked;for(;a;){if(a instanceof Smart.ListItem&&a.ownerListBox===i.$.listBox)return a.unselectable||a.disabled?void 0:("escaped"===i.displayMode?(i.value=a.label,i.$.input.value=i._toEscapedDisplayMode(a.label)):i.$.input.value=i.value=a.label,i.$.fireEvent("change",{oldValue:i._oldValue,newValue:i.value,type:"submit"}),i._oldValue=i.value,"clearOnSubmit"===i.enterKeyBehavior&&(i.$.input.value=i.value=""),super._autoComplete(!0),i.close(),a="item",void i.$.input.focus());if(a===i.$.listBox)return void(a="listBox");a=a.parentElement}if("listBox"!==a&&"item"!==a)return void i.close()}}}),Smart("smart-masked-text-box",class extends Smart.TextBox{static get properties(){return{allowPromptAsInput:{value:!1,type:"boolean"},asciiOnly:{value:!1,type:"boolean"},autoShowMask:{value:!1,type:"boolean"},cutCopyMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},hidePromptOnLeave:{value:!1,type:"boolean"},hint:{value:"",reflectToAttribute:!0,type:"string"},isOverwriteMode:{value:!1,type:"boolean"},mask:{value:"#####",type:"string"},maskCompleted:{value:!1,type:"boolean"},maskFull:{value:!1,type:"boolean"},promptChar:{value:"_",type:"string"},rejectInputOnFirstFailure:{value:!1,type:"boolean"},resetOnPrompt:{value:!1,type:"boolean"},resetOnSpace:{value:!1,type:"boolean"},textMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},validation:{value:null,type:"function?",reflectToAttribute:!1},value:{value:null,reflectToAttribute:!0,type:"string?"}}}static get listeners(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.copy":"_cutCopyHandler","input.change":"_textBoxChangeHandler","input.cut":"_cutCopyHandler","input.paste":"_textBoxPasteHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_textBoxKeyUpHandler","input.blur":"_blurHandler","input.focus":"_focusHandler"}}template(){return`<div id="container">
                    <span id="label" inner-h-t-m-l="[[label]]" class ="smart-label"></span>
                    <input type="text" id="input"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        disabled="[[disabled]]"
                        maxlength="[[maxLength]]"
                        minlength="[[minLength]]"
                        name="[[name]]"
                        placeholder="[[placeholder]]"
                        readonly="[[readonly]]">
                    <span id="hint" inner-h-t-m-l="[[hint]]" class ="smart-hint"></span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;let o;switch(t){case"hidePromptOnLeave":a&&!n._focused?n._hidePrompt():n._promptHidden&&n._showPrompt();break;case"maxLength":0<n.mask.length&&(n.maxLength=i);break;case"maskCompleted":case"maskFull":n[t]=i;break;case"promptChar":n._updatePromptChar();break;case"placeholder":n._isPlaceholderRequired()?(n.$.input.value="",n.$.removeClass("has-value")):n._updatePromptChar(),n._updatePromptChar();break;case"mask":o=n._getValueWithTextMaskFormat({start:0,end:n._mask.length},"excludePromptAndLiterals"),n._isPlaceholderRequired()?(n.$.input.value="",n.$.removeClass("has-value")):(n._initializeMask(),n._setValueToMask(o),n._setMaskToInput(),n.maxLength=n._mask.length,n._promptHidden&&n._hidePrompt());break;case"value":n._overwrite=!0,n._setValueToMask(a),n._overwrite=!1,n._setMaskToInput(),n._promptHidden&&n._hidePrompt();break;case"disabled":n._setFocusable();break;case"readonly":break;default:super.propertyChangedHandler(t,i,a);}n.value=n._getValueWithTextMaskFormat({start:0,end:n._mask.length},n.textMaskFormat)}_createElement(){const t=this;t.autoFocus&&t.$.input.focus(),t._setFocusable(),t._initializeMask(),t._updateMaxLength(),t._isPlaceholderRequired()?(t.$.input.value="",t.$.removeClass("has-value")):(t._setValueToMask(t.value),t._setMaskToInput(),t._updateMaskFullAndCompleted(),t.$.addClass("has-value")),t.$.input.selectionStart=t.$.input.selectionEnd=0,t._initializationValue=t._value=t.value,t._rejectInput=!1}_blurHandler(){const t=this,i=t._isPlaceholderRequired();t.disabled||(t._valueBeforeChange!==t.value&&(t.$.fireEvent("change",{newValue:t.value,oldValue:t._valueBeforeChange}),t._valueBeforeChange=""),t._hidePrompt(),t._focused=!1,t._validateMaskValue(),t.removeAttribute("focus"),0<t.$.input.value.length?t.$.addClass("has-value"):t.$.removeClass("has-value"),i&&(t.$.input.value="",t.$.removeClass("has-value")))}_updateMaskFullAndCompleted(){const t=this;let a=!0,n=!0,o=!1;for(let l=0;l<t._mask.length;l++){const i=t._mask[l];"mask"===i.type&&(i.required&&(o=!0),""===i.character&&(i.required&&(n=!1),a=!1))}a||!n||o||(n=!1),t.maskFull=a,t.maskCompleted=n}_isPlaceholderRequired(){const t=this,i=t.value&&0<t.value.length,a=0<t.placeholder.length,n=!i&&(a||t.autoShowMask);return n}_cleanMask(t,a){const n=this;t=t?t:0,a=a?a:n._mask.length;for(let o=t,i;o<a;o++)i=n._mask[o],"mask"===i.type&&(n._mask[o].character="")}_cutCopyHandler(t,i){const a=this,n=parseInt(a.$.input.selectionStart,10),o=parseInt(a.$.input.selectionEnd,10),l=a._getValueWithTextMaskFormat({start:n,end:o});return(window.clipboardData&&(window.clipboardData.setData("text/plain",l),window.clipboardData.setData("text/html",l)),t&&a._preventDefault(t),"Copy"===i)?l:(a._cleanMask(n,o),a.value=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},a.textMaskFormat),a._setMaskToInput(),a.$.input.selectionStart=a.$.input.selectionEnd=n,a.maskFull=a.maskCompleted=!1,l)}_documentUpHandler(){}_deleteHandler(t){const a=this,n=a.$.input.selectionStart,i=a.$.input.selectionEnd,o=t.key;let l=n;if(a._preventDefault(t),n!==i)a._cleanMask(n,i),"Delete"===o&&(l=i);else if("Backspace"===o)for(let t=n;0<t;t--){const i=a._mask[t-1];if("mask"===i.type){l=t-1,i.character="";break}else{l=n-1;break}}else for(let t=n;t<a._mask.length;t++){const i=a._mask[t];if("mask"===i.type){l=t+1,i.character="";break}else{l=n+1;break}}a._setMaskToInput(),a._updateMaskFullAndCompleted(),a.value=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},a.textMaskFormat),a.$.input.selectionStart=a.$.input.selectionEnd=l}_findNextOccupiedPosition(t){const a=this,n=a._mask.length;let o=t;for(let l=t,i;l<n&&(i=a._mask[l],"mask"===i.type&&""===i.character);l++)o++;return o}_focusHandler(t){const i=this;if("INPUT"!==t.context.nodeName.toUpperCase())return void i.$.input.focus();if(!i.disabled&&(i.setAttribute("focus",""),i.selectAllOnFocus&&i.$.input.select(),i._showPrompt(),i._focused=!0,i._isPlaceholderRequired())){i._initializeMask(),i._setValueToMask(i.value),i._setMaskToInput();const t=i._getEditableSelectionStart(0);i.$.input.selectionStart=i.$.input.selectionEnd=t}}_setMaskToInput(){const t=this;let a="";for(let n=0;n<t._mask.length;n++){const i=t._mask[n];let o;if("literal"===i.type||"separator"===i.type||"placeholder"===i.type||"currency"===i.type)o=i.character;else if("mask"===i.type&&""!==i.character)switch(i.escapeSymbol){case">":o=i.character.toUpperCase();break;case"<":o=i.character.toLowerCase();break;case"|":o=i.character;break;case"\\":o=i.character;break;default:o=i.character;}else o=i.defaultCharacter;a+=o}t.$.input.value=a}_getEditableSelectionStart(t,a){const n=this;for(let o=t;o<n._mask.length;o++){const t=n._mask[o];if("mask"===t.type&&(""===t.character||n.isOverwriteMode||" "===a&&n.resetOnSpace||a===n.promptChar&&n.resetOnPrompt))return o}return-1}_getNonEditableSelectionStart(t,a){const n=this;for(let o=t;o<n._mask.length;o++){const t=n._mask[o];if("mask"!==t.type&&t.character===a)return o}return-1}_getValueWithTextMaskFormat(t,i){const a=this,n=t?t.start:0,o=t?t.end:a._mask.length||a.$.input.value.length;let l="";if(i=i?i:a.cutCopyMaskFormat,"includePromptAndLiterals"===i)return a.$.input.value.substring(n,o);for(let r=n;r<o;r++){const t=a._mask[r];switch(i){case"excludePromptAndLiterals":if("mask"!==t.type)continue;l=""===t.character?l+" ":l+t.character;break;case"includePrompt":if("mask"!==t.type)continue;l=""===t.character?l+t.defaultCharacter:l+t.character;break;case"includeLiterals":if("mask"===t.type&&""===t.character)continue;l+=t.character;}}return l.trim()}_hidePrompt(){const t=this,i=new RegExp(t.promptChar,"g");t.disabled||!t.hidePromptOnLeave||0===t.mask.length||(t.$.input.value=t.$.input.value.replace(i," "),t._promptHidden=!0)}_initializeMask(){const t=this;let a=t.mask.length,n;if(t._mask=[],void 0!==t.mask&&null!==t.mask&&0!==t.mask.length)for(let o=0;o<a;o++){const i=t.mask.charAt(o);let a={defaultCharacter:t.promptChar};"0"===i?(a.editable=!0,a.required=!0,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="0",a.regex="\\d",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"9"===i?(a.editable=!0,a.required=!1,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="9",a.regex="(\\d|\\s)",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"#"===i?(a.editable=!0,a.required=!1,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="#",a.regex="(\\d|\\s|[+]|[-])",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"L"===i?(a.editable=!0,a.required=!0,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="L",a.regex="([a-zA-Z\u0430-\u044F\u0410-\u042F])",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"?"===i?(a.editable=!0,a.required=!1,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="?",a.regex="[a-zA-Z\u0430-\u044F\u0410-\u042F]?",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"&"===i?(a.editable=!0,a.required=!0,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="&",a.regex="[^\\s]",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"C"===i?(a.editable=!0,a.required=!1,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="C",a.regex=".",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"A"===i?(a.editable=!0,a.required=!0,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="A",a.regex="[a-zA-Z\u0430-\u044F\u0410-\u042F]",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"a"===i?(a.editable=!0,a.required=!1,a.escapeSymbol=n,a.type="\\"===a.escapeSymbol?"literal":"mask",a.maskCharacter="a",a.regex="[a-zA-Z\u0430-\u044F\u0410-\u042F]?",a.character="\\"===a.escapeSymbol?a.maskCharacter:"",a.defaultCharacter=t.promptChar,n=null):"."===i?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="placeholder",a.maskCharacter=".",a.regex=null,a.character=".",a.defaultCharacter=t.promptChar,n=null):","===i?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="placeholder",a.maskCharacter=",",a.regex=null,a.character=",",a.defaultCharacter=t.promptChar,n=null):":"===i?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="separator",a.maskCharacter=":",a.regex=null,a.character=":",a.defaultCharacter=t.promptChar,n=null):"/"===i?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="separator",a.maskCharacter="/",a.regex=null,a.character="/",a.defaultCharacter=t.promptChar,n=null):"$"===i?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="currency",a.maskCharacter="$",a.regex=null,a.character="$",a.defaultCharacter=t.promptChar,n=null):"<"===i?n?"|"===n?n=null:"\\"===n?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="literal",a.maskCharacter="<",a.regex="<",a.character="<",a.defaultCharacter=t.promptChar,n=null):n="<":n="<":">"===i?n?"|"===n?n=null:"\\"===n?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="literal",a.maskCharacter=">",a.regex=">",a.character=">",a.defaultCharacter=t.promptChar,n=null):n=">":n=">":"|"===i?n?"\\"===n?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="literal",a.maskCharacter="|",a.regex="|",a.character="|",a.defaultCharacter=t.promptChar,n=null):n="|":n="|":"\\"===i?n?"\\"===n?(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="literal",a.maskCharacter="\\",a.regex="\\",a.character="\\",a.defaultCharacter=t.promptChar,n=null):n="\\":n="\\":(a.editable=!1,a.required=!0,a.escapeSymbol=n,a.type="literal",a.maskCharacter=i,a.regex=null,a.character=i,a.defaultCharacter=i,n=null),n||a.type&&t._mask.push(a)}}_validateInput(t,i){const a=this,n=a._mask[i],o=new RegExp(n.regex);return o.test(t)}_setValueToMask(t,i){const a=this,n=t||"",o=n.length,l=i&&i.start?i.start:0,r=i&&i.end?i.end:a._mask.length;let s=l,d=0;for(;s<r&&d<o;)"mask"===a._mask[s].type&&d++,(a._setCharAtPosition(n.charAt(d-1),s)||"mask"!==a._mask[s].type)&&s++;if(s<r)for(let t=s;t<r;t++)"mask"===a._mask[t].type&&(a._mask[t].character="");i&&(i.start=s)}_preventDefault(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}_showPrompt(){const t=this;t.disabled||!t._promptHidden||t._setMaskToInput()}_textBoxChangeHandler(){const t=this;t.disabled||t.readonly||(t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat),t._valueBeforeChange!==t.value&&(t.$.fireEvent("change",{newValue:t.value,oldValue:t._valueBeforeChange}),t._valueBeforeChange="",t._validateMaskValue()))}_textBoxKeyDownHandler(t){const i=this,a=t.key,n=t.ctrlKey,o=i.$.input.selectionEnd,l=/xxx[\0-]+xxx/,r=/^[a-zA-ZÀ-ÿа-яА-Я0-9.!@?#"$%&:';()*\+,\/;\-=[\\\]\^_{|}<>~` ]+$/;let s=i.$.input.selectionStart;if(n&&-1<["a","c","v","x"].indexOf(a)){const t=function(t,a){const n=document.createElement("textarea");n.style.position="absolute",n.style.left="-1000px",n.style.top="-1000px",document.body.appendChild(n),n.focus(),"Paste"===t?setTimeout(function(){let t=n.value;0===t.length&&window.clipboardData&&(n.value=window.clipboardData.getData("Text"),t=n.value),n.parentNode.removeChild(n),i.$.input.focus(),a(t)},25):(n.value=i._cutCopyHandler(null,t),n.focus(),n.setSelectionRange(0,n.value.length),setTimeout(function(){document.designMode="off",n.focus(),n.parentNode.removeChild(n),i.$.input.focus()},25),window.clipboardData&&window.clipboardData.setData("Text",n.value))};return void("a"===a?i.$.input.setSelectionRange(0,i.$.input.value.length):"c"===a?t("Copy"):"v"===a?t("Paste",function(t){const a=i.context;i.context=i,i._textBoxPasteHandler(null,t),i.context=a}):"x"===a?t("Cut"):void 0)}if("Backspace"===a)return i._deleteHandler(t),void i._updateMaskFullAndCompleted();if("Delete"===a)return i._deleteHandler(t),void i._updateMaskFullAndCompleted();if(!i.allowPromptAsInput&&a===i.promptChar)return void i._preventDefault(t);if(!(i.disabled||i.readonly||i.asciiOnly&&!l.test(a)||!r.test(a)||1<a.length)&&(i._preventDefault(t),s!==o||s!==i.$.input.value.length)&&(" "!==a||i.resetOnSpace)){s=i._getEditableSelectionStart(s,a);const t=function(){s=i._getNonEditableSelectionStart(i.$.input.selectionStart,a),-1!==s&&(i.$.input.selectionStart=i.$.input.selectionEnd=s+1)};if(-1===s)return void t();const n=i._setCharAtPosition(a,s);n?(i._setMaskToInput(),i._updateMaskFullAndCompleted(),i.$.input.selectionStart=i.$.input.selectionEnd=s+1):t()}}_textBoxKeyUpHandler(){const t=this;t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat)}_textBoxPasteHandler(t,i){const a=this,n=a.$.input.value,o=a.$.input.selectionStart;let l=a.$.input.selectionEnd,r;if(t&&a._preventDefault(t),window.clipboardData&&window.clipboardData.getData?r=window.clipboardData.getData("Text"):t&&t.clipboardData&&t.clipboardData.getData?r=t.clipboardData.getData("text/plain"):i&&(r=i),l-o!==n.length){if(o===l&&(a.$.input.selectionEnd=l=a._mask.length),a.rejectInputOnFirstFailure){let t=0;for(let n=o;n<l;n++)if("mask"===a._mask[n].type){if(!a._validateInput(r.charAt(t),n))return void(a.$.input.selectionStart=a.$.input.selectionEnd=o);if(t++,t>r.length)break}}const t={start:o,end:l};a._overwrite=!0,a._setValueToMask(r,t),a._setMaskToInput(),a._updateMaskFullAndCompleted(),a.$.input.selectionStart=a.$.input.selectionEnd=t.start,a.value=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},a.textMaskFormat)}}_setCharAtPosition(t,i){const a=this,n=a._mask[i];if(" "===t&&a.resetOnSpace&&(t=""),"mask"!==n.type||a.readonly||a.disabled||!n.editable)return!1;if(""===t&&!a.resetOnSpace)return!1;if(t===a.promptChar&&!a.resetOnPrompt&&a.allowPromptAsInput)return!1;if(!a.isOverwriteMode&&""!==t&&t!==a.promptChar&&""!==n.character&&!a._overwrite)return!1;const o=n.regex;if(o){let l=new RegExp(o,"i");if(l.test(t)){switch(n.escapeSymbol){case">":t=t.toUpperCase();break;case"<":t=t.toLowerCase();}return a._mask[i].character=t,!0}return a.resetOnSpace&&""===t?(a._mask[i].character=t,!0):!!(a.resetOnPrompt&&t===a.promptChar&&a.allowPromptAsInput)&&(a._mask[i].character="",!0)}return!1}_updateMaxLength(){const t=this;0<t._mask.length&&(t.maxLength=t._mask.length)}_updatePromptChar(){const t=this;for(let a=0,i;a<t._mask.length;a++)i=t._mask[a],i.defaultCharacter=t.promptChar;t._setMaskToInput()}_validateMaskValue(){const t=this;if(t.readonly||t.disabled||!t.validation||"function"!=typeof t.validation)return;const i=t.value,a=t.validation(i);a?t.removeAttribute("error"):t.setAttribute("error",""),t.$.fireEvent("validation",{success:a})}_keyUpHandler(){}_resizeHandler(){}_selectStartHandler(){}_mouseWheelHandler(){}_applySelection(){}_setDropDownSize(){}_styleChangedHandler(){}}),Smart("smart-multiline-text-box",class extends Smart.TextBox{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoComplete:{value:"off",allowedValues:["on","off"],type:"string"},autoExpand:{value:!1,type:"boolean"},cols:{value:20,type:"number?"},enterKeyBehavior:{value:"newLine",allowedValues:["submit","clearOnSubmit","newLine"],type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},minLength:{value:0,type:"number"},resizable:{value:!1,type:"boolean"},rows:{value:5,type:"number?"},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},type:{value:"textarea",type:"string",defaultReflectToAttribute:!0,readonly:!0},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}static get listeners(){return{down:"_documentDownHandler","document.mousemove":"_documentSelectionOutsideHandler","container.resize":"_handleScrollbarsDisplay","document.move":"_resizeMoveHandler","document.up":"_upHandler",focus:"_focusHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",resize:"_handleScrollbarsDisplay","resizeElement.down":"_resizeDownHandler",styleChanged:"_handleScrollbarsDisplay","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_keyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler",wheel:"_mouseWheelHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}attached(){const t=this;super.attached(),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t.$.input,t.$.horizontalScrollBar,t.$.verticalScrollBar))}detached(){const t=this;super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView)}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}template(){return`<div id="container">
                    <span id="label" inner-h-t-m-l="[[label]]" class="smart-label"></span>
                    <div id="innerContainer" class="smart-inner-container">
                            <textarea class="smart-input" id="input"
                                autocapitalize="[[autoCapitalize]]"
                                autocomplete="off"
                                cols="[[cols]]"
                                disabled="[[disabled]]"
                                maxlength="[[maxLength]]"
                                minlength="[[minLength]]"
                                name="[[name]]"
                                placeholder="[[placeholder]]"
                                readonly="[[readonly]]"
                                required="[[required]]"
                                rows="[[rows]]"
                                spellcheck="[[spellCheck]]"
                                wrap="[[wrap]]"></textarea>
                            <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                            <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]"></smart-scroll-bar>
                            <div id="resizeElement" class="smart-resize-element"></div>
                    </div>
                            <textarea id="textBoxHidden"
                                class="smart-text-box-hidden"
                                autocapitalize="[[autoCapitalize]]"
                                autocomplete="off"
                                cols="[[cols]]"
                                disabled="[[disabled]]"
                                inner-h-t-m-l="[[value]]"
                                maxlength="[[maxLength]]"
                                minlength="[[minLength]]"
                                name="[[name]]"
                                placeholder="[[placeholder]]"
                                readonly="[[readonly]]"
                                required="[[required]]"
                                rows="[[rows]]"
                                spellcheck="[[spellCheck]]"
                                wrap="[[wrap]]"></textarea>
                    <span id="hint" class="smart-hint"></span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"displayMode":n.$.input.value="escaped"===a?n._toEscapedDisplayMode(n.value):n.value=n._toDefaultDisplayMode(n.$.input.value);n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"value":switch(n._preventProgramaticValueChange?(n._userValue="escaped"===n.displayMode?n._toDefaultDisplayMode(n.$.input.value):n.$.input.value,n._programmaticValue=a):n._userValue=n._programmaticValue=a,n.displayMode){case"escaped":n.$.input.value=n._toEscapedDisplayMode(n._userValue);break;default:n.$.input.value=n._userValue;}n._oldValue=i,n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"horizontalScrollBarVisibility":case"verticalScrollBarVisibility":case"singleLine":case"wrap":case"resizable":case"placeholder":n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"selectionEnd":case"selectionStart":n._handleSelectedText();break;case"rows":case"cols":n._updateSizeRowsCols();break;case"disabled":n._setFocusable();break;case"animation":case"readonly":break;default:super.propertyChangedHandler(t,i,a);}}selection(t){const i=this;let a=i.$.input.selectionStart,n=i.$.input.selectionEnd,o=i.value;return"escaped"===i.displayMode?(o=i.$.input.value.substring(a,n),"escaped"===t?o:i._toDefaultDisplayMode(o)):"escaped"===t?(o=o.substring(a,n),i._toEscapedDisplayMode(o)):(o=o.substring(a,n),o)}select(t,i){const a=this,n=Array.from(arguments).slice(0,2);let o,l;for(let a in n)n[a]=parseInt(n[a])||0;return(2===n.length?(o=Math.min([t,i]),l=Math.max([t,i])):o=n[0],2===n.length)?(o=parseInt(o),o=0<o?o<a.$.input.length?a.$.input.length:o:0,l<o?l=o:l>a.$.input.length&&(o=0),a.$.input.focus(),void a.$.input.setSelectionRange(o,l)):1===n.length?(a.$.input.focus(),void a.$.input.setSelectionRange(o,o+1)):void a.$.input.select()}_autoExpandUpdate(){const t=this;t.autoExpand&&(t.$.textBoxHidden.value=t.$.input.value,t.$.textBoxHidden.style.cssText="height:0px",t.$.input.style.cssText="height:"+t.$.textBoxHidden.scrollHeight+"px")}_blurHandler(){const t=this;t._outsideAutoScroll&&clearInterval(t._outsideAutoScroll),t.removeAttribute("focus"),t._preventProgramaticValueChange=!1,t._oldValue=t.value,t.value=t._userValue||t.value}_createElement(){const t=this;t.autoFocus&&(navigator.userAgent.match(/Edge/)?setTimeout(function(){t.$.input.focus(),t.setAttribute("focus","")},10):(t.$.input.focus(),t.setAttribute("focus","")));const i=t.$.input.innerHTML;t.value?t.$.input.innerHTML="escaped"===t.displayMode?t._toEscapedDisplayMode(t.value):t.value:0<i.length&&"escaped"===t.displayMode?(t.value=i,t.$.input.innerHTML=t._toEscapedDisplayMode(i)):0<i.length&&(t.value=i),t._setFocusable(),t._syncTextBoxContentOnInitialization(),t._scrollView=new Smart.Utilities.Scroll(t.$.input,t.$.horizontalScrollBar,t.$.verticalScrollBar),t._autoExpandUpdate(),t._handleScrollbarsDisplay(),t._initializationValue=t._oldValue=t.value,0<t.value.length?t.$.addClass("has-value"):t.$.removeClass("has-value"),t._handleHintContainer()}_handleScrollbarsDisplay(t){const i=this,a=i.$.input;setTimeout(function(){switch(i.horizontalScrollBarVisibility){case"disabled":i.$container.addClass("hscroll"),i.$.horizontalScrollBar.disabled=!0;break;case"hidden":i.$container.removeClass("hscroll");break;case"visible":i.$container.addClass("hscroll"),i._scrollView.scrollWidth=a.scrollWidth-a.clientWidth,i._scrollView.scrollTo(i.$.input.scrollLeft,!0),i.$.horizontalScrollBar.disabled=!1;break;default:a.scrollWidth>a.clientWidth?(i.$container.addClass("hscroll"),i._scrollView.scrollWidth=a.scrollWidth-a.clientWidth,t&&"resize"===t.type?i.$.input.scrollLeft=i._scrollView.scrollLeft:i._scrollView.scrollTo(i.$.input.scrollLeft,!0)):i.$container.removeClass("hscroll"),i.$.horizontalScrollBar.disabled=!1;}switch(i.verticalScrollBarVisibility){case"disabled":i.$container.addClass("vscroll"),i.$.verticalScrollBar.disabled=!0;break;case"hidden":i.$container.removeClass("vscroll");break;case"visible":i.$container.addClass("vscroll"),i._scrollView.scrollHeight=a.scrollHeight-a.clientHeight,i._scrollView.scrollTo(i.$.input.scrollTop),i.$.verticalScrollBar.disabled=!1;break;default:a.scrollHeight>a.clientHeight?(i.$container.addClass("vscroll"),i._scrollView.scrollHeight=a.scrollHeight-a.clientHeight,t&&"resize"===t.type?i.$.input.scrollTop=i._scrollView.scrollTop:i._scrollView.scrollTo(i.$.input.scrollTop)):i.$container.removeClass("vscroll"),i.$.verticalScrollBar.disabled=!1;}},0)}_focusHandler(t){const i=this;if(!i.disabled){if(t.target===i)return i.$.input.focus(),void(i._edgeSelect=!1);if(i.setAttribute("focus",""),i.selectAllOnFocus)if(navigator.userAgent.match(/Edge/)){const t=i.$.input.scrollTop;if(i._edgeSelect)return void(i._edgeSelect=!1);setTimeout(function(){i._edgeSelect=!0,i.$.input.select(),i.$.input.scrollTop=t},5)}else i.$.input.select()}}_horizontalScrollbarHandler(t){const i=this;i.disabled||"hidden"===i.horizontalScrollBarVisibility||"disabled"===i.horizontalScrollBarVisibility||(t.stopPropagation(),i.$.input.scrollLeft=t.detail.value)}_keyDownHandler(t){function i(i){let n=a.$.input.selectionStart,o=a.$.input.selectionEnd,l=a.$.input.value;t.preventDefault(),a.$.input.value=l.substring(0,n)+i+l.substring(o,l.length),a.value=a._toDefaultDisplayMode(a.$.input.value),a.$.input.selectionStart=n+2,a.$.input.selectionEnd=n+2}const a=this,n=t.key,o=t.shiftKey,l=t.ctrlKey,r=a.$.input.value;if(a.allowVerticalScrollbar&&a.$.input.selectionEnd>a.$.input.value.length-5&&a._scrollView.scrollTo(a._scrollView.scrollTop+(0>t.deltaY?-a.offsetHeight:a.offsetHeight)),-1<n.indexOf("Arrow"))return void t.stopPropagation();switch(n){case"Enter":{if("newLine"===a.enterKeyBehavior&&!l&&!o){"escaped"===a.displayMode&&i("\\n");break}t.preventDefault(),a._userValue="escaped"===a.displayMode?a._toDefaultDisplayMode(a.$.input.value):a.$.input.value,a.value=a._userValue,""!==r&&a._userValue!==a._oldValue&&a.$.fireEvent("change",{oldValue:a._oldValue,value:r,type:"submit"}),"clearOnSubmit"===a.enterKeyBehavior&&(a.$.input.value=""),a._oldValue=a.value=a._toDefaultDisplayMode(a.$.input.value),a._submitted=!0,"escaped"!==a.displayMode||!(0>a.enterKeyBehavior.toLowerCase().indexOf("submit"))||l||o||i("\\n"),("submit"===a.enterKeyBehavior||"newLine"===a.enterKeyBehavior&&l)&&a.$.input.blur();break}case"Escape":if("none"===a.escKeyMode)return;switch(a.escKeyMode){case"none":break;case"clearValue":a.value=a.$.input.value="";break;case"previousValue":a.$.input.value="escaped"===a.displayMode?a._toEscapedDisplayMode(a._oldValue):a._oldValue;}break;case" ":"escaped"===a.displayMode&&i("\\s");break;case"Backspace":if("escaped"===a.displayMode&&a.$.input.selectionStart===a.$.input.selectionEnd){let t=a.$.input.selectionStart;"\\"===r[t-2]&&("s"===r[t-1]||"n"===r[t-1])&&(a.$.input.value=a.$.input.value.substring(0,t-2)+a.$.input.value.substring(t-2,a.$.input.value.length),a.$.input.selectionStart=t-2)}a._scrollView&&a._handleScrollbarsDisplay();}}_keyUpHandler(t){const i=this,a=t.key;"ArrowLeft"===a||"ArrowUp"===a||"ArrowDown"===a?i._handlePointerInEscapedSymbol():"ArrowRight"===a?i._handlePointerInEscapedSymbol("next"):void 0;i._autoExpandUpdate(),i._userValue="escaped"===i.displayMode?i._toDefaultDisplayMode(i.$.input.value):i.$.input.value,i._submitKeyUpHandler()}_textBoxKeyDownHandler(t){const i=this,a=t.key;i._scrollView&&i._handleScrollbarsDisplay(),i._autoExpandUpdate(),i.value&&0<i.value.length?i.$.addClass("has-value"):i.$.removeClass("has-value"),-1===["Enter","Escape"].indexOf(a)&&(i._preventProgramaticValueChange=!0),-1<["ArrowLeft","ArrowUp","ArrowDown","ArrowRight"].indexOf(a)&&i._scrollView.scrollTo(i.$.input.scrollTop),-1<["PageUp","PageDown"].indexOf(a)&&Smart.Utilities.Core.Browser.Chrome&&("PageUp"===t.key&&(i.$.input.setSelectionRange(0,0),i.$.input.scrollTop=0),"PageDown"===t.key&&(i.$.input.setSelectionRange(i.$.input.value.length,i.$.input.value.length),i.$.input.scrollTop=i._scrollView.verticalScrollBar.max),t.preventDefault())}_mouseWheelHandler(t){const i=this;i.disabled||i.$.verticalScrollBar.disabled||(i._scrollView.scrollTo(i._scrollView.scrollTop+(0>t.deltaY?-i.offsetHeight:i.offsetHeight)),i.$.input.scrollTop+=0>t.deltaY?-i.offsetHeight:i.offsetHeight,0<i.$.input.scrollTop&&t.preventDefault())}_syncTextBoxContentOnInitialization(){const t=this;let i;return i=""===t.value?t.innerHTML:t.value,"escaped"===t.displayMode?void(i.match(/\r\n|\n\r|\n|\r|\s|\t|\f|\r/g)?(t.value=t._initializationValue=i,t.$.input.value=t._toEscapedDisplayMode(i)):(t.value=t._initializationValue=t._toDefaultDisplayMode(i),t.$.input.value=i)):void(t.$.input.value=t.value=t._initializationValue=i)}_textBoxChangeHandler(t){const i=this,a=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData||window.clipboardData,n=i.value;if("escaped"===i.displayMode){const n=i.$.input.selectionStart,o=i.$.input.selectionEnd;if(a){let l=a.getData("text"),r=i.$.input.value;t.preventDefault(),l=i._toEscapedDisplayMode(l),i.$.input.value=r.substring(0,n)+l+r.substring(o,r.length)}i.value=i._toDefaultDisplayMode(i.$.input.value)}else i.value=i.$.input.value;i._handleScrollbarsDisplay(),0<i.value.length?i.$.addClass("has-value"):i.$.removeClass("has-value"),a||i.$.fireEvent("change",{value:i.value,oldValue:n,type:"blur"}),i._handleHintContainer()}_resizeDownHandler(){const t=this;t.disabled||!t.resizable||(t._resizeStarted=!0,t.$container.addClass("smart-resize"),!t.readonly&&t.$.input.setAttribute("readonly",""))}_resizeMoveHandler(t){const i=this;if(!i.disabled&&i.resizable&&i._resizeStarted){const a=i.getBoundingClientRect(),n={width:50,height:50},o=t.clientX-a.left,l=t.clientY-a.top;o>n.width&&(i.style.width=o+"px"),l>n.height&&(i.style.height=l+"px")}}_updateSizeRowsCols(){const t=this;t.$.container.removeAttribute("style"),setTimeout(function(){if("disabled"!==t.horizontalScrollBarVisibility&&"hidden"!==t.horizontalScrollBarVisibility||"disabled"!==t.verticalScrollBarVisibility&&"hidden"!==t.verticalScrollBarVisibility){const i=t.getBoundingClientRect();t.$.container.style.width=i.width+"px",t.$.container.style.height=i.height+"px"}},0)}_upHandler(t){const i=this;return i._selectionStarted=!1,i.disabled?void 0:t.originalEvent.target===i.$.input?void i._handlePointerInEscapedSymbol():void(i.$container.removeClass("smart-resize"),!i.readonly&&i.$.input.removeAttribute("readonly"),i._resizeStarted&&i.$.input.focus(),i._resizeStarted=!1)}_verticalScrollbarHandler(t){const i=this;i.disabled||"disabled"===i.verticalScrollBarVisibility||"hidden"===i.verticalScrollBarVisibility||(t.stopPropagation(),i.$.input.scrollTop=t.detail.value)}_documentDownHandler(t){const i=this;i._selectionStarted=!1;t.originalEvent&&i.contains(t.originalEvent.target)&&(i._selectionStarted=!0,i._selectionStartTime=new Date,i._pointerDown={pageX:t.pageX,pageY:t.pageY},i._edgeSelect=!1)}_documentSelectionOutsideHandler(t){function i(i){const a=n.getBoundingClientRect(),o=document.documentElement,l=i?a.left+o.scrollLeft-t.pageX:a.top+o.scrollTop-t.pageY,r=i?"Left":"Top";0<l?(n.$.input["scroll"+r]-=10,n._scrollView["scroll"+r]-=10):(n.$.input["scroll"+r]+=10,n._scrollView["scroll"+r]+=10)}var a=Math.abs;const n=this;if(clearInterval(n._outsideAutoScroll),!n._selectionStarted)return;const o=n.$.input.getBoundingClientRect(),l=o.y+10,r=o.y+o.height-10;if(t.pageY>l&&t.pageY<r)return;const s=300>new Date-n._selectionStartTime,d=!s&&(3<=a(n._pointerDown.pageX-t.pageX)||3<=a(n._pointerDown.pageY-t.pageY));d&&(n._outsideAutoScroll=setInterval(function(){i(),i(!0)},10))}_selectStartHandler(){}_styleChangedHandler(){}}),Smart("smart-password-text-box",class extends Smart.TextBox{static get properties(){return{messages:{value:{en:{passwordStrength:"Password strength",short:"Short",weak:"Weak",far:"Far",good:"Good",strong:"Strong",showPassword:"Show password"}},type:"object",extend:!0},passwordStrength:{value:null,type:"function?",reflectToAttribute:!1},showPasswordIcon:{value:!1,type:"boolean"},showPasswordStrength:{value:!1,type:"boolean"},tooltipArrow:{value:!1,type:"boolean"},tooltipDelay:{value:0,type:"number"},tooltipPosition:{allowedValues:["bottom","top","left","right","absolute"],value:"top",type:"string"},tooltipTemplate:{value:null,type:"string?"},type:{value:"password",type:"string",defaultReflectToAttribute:!0,readonly:!0},value:{value:"",reflectToAttribute:!1,type:"string"}}}static get requires(){return{"Smart.Tooltip":"smart.tooltip.js"}}static get listeners(){return{"document.up":"_documentUpHandler",blur:"_blurHandler",focus:"_focusHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","passwordIcon.down":"_showPassword","input.change":"_textBoxChangeHandler","input.paste":"_textBoxChangeHandler","input.keyup":"_textBoxChangeHandler","input.blur":"_blurHandler","input.focus":"_focusHandler"}}template(){return`<div id="container">
                    <span id="label" inner-h-t-m-l="[[label]]" class ="smart-label"></span>
                    <div id="innerContainer" class="smart-inner-container">
                            <input class ="smart-input" type="password" id="input"
                                disabled="[[disabled]]"
                                maxlength="[[maxLength]]"
                                minlength="[[minLength]]"
                                name="[[name]]"
                                placeholder="[[placeholder]]"
                                value="[[value]]">
                            <span id="passwordIcon" title="Show Password" class ="smart-password-icon smart-hidden">&#xe80a; </span>
                    </div>
                    <span id="hint" class ="smart-hint"></span>
                    <smart-tooltip id="tooltip"
                        open-mode="manual"
                        arrow="[[tooltipArrow]]"
                        tooltip-template="[[tooltipTemplate]]"
                        position="[[tooltipPosition]]"
                        delay="[[tooltipDelay]]">
                     </smart-tooltip>
                </div>`}propertyChangedHandler(t,i,a){const n=this;let o;switch(t){case"locale":case"messages":case"passwordStrength":o=n._evaluatePasswordStrength(),n._updateTooltipString(o),n.$.passwordIcon.setAttribute("title",n.localize("showPassword")),n._updatePasswordStrengthStyles(o);break;case"tooltipPosition":n.$.tooltip.position=n.tooltipPosition;break;case"tooltipTemplate":n.$.tooltip.tooltipTemplate=n.tooltipTemplate;break;case"value":o=n._evaluatePasswordStrength(),n._updateTooltipString(o),n._updatePasswordStrengthStyles(o);break;case"disabled":n._setFocusable();break;case"readonly":break;default:super.propertyChangedHandler(t,i,a);}}_createElement(){const t=this;t.autoFocus&&t.$.input.focus(),t._setFocusable(),t.$.tooltip.selector=t.$.innerContainer,t.$.passwordIcon.setAttribute("title",t.localize("showPassword")),t._updateTooltipString("short"),t._updatePasswordStrengthStyles(),t._initializationValue=t.value,0<t.value.length?t.$.addClass("has-value"):t.$.removeClass("has-value"),t._handleHintContainer()}_focusHandler(){const t=this;t.disabled||(t.selectAllOnFocus&&t.$.input.select(),t.showPasswordIcon&&t.$passwordIcon.removeClass("smart-hidden"),t.setAttribute("focus",""),t._valueBeforeChange=t.value,t.showPasswordStrength&&(t._tooltipOpened||(t.$.tooltip.open(),t._tooltipOpened=!0)))}_blurHandler(){const t=this;t.disabled||t._passwordIconPressed||(t._valueBeforeChange!==t.value&&(t.$.fireEvent("change",{newValue:t.value,oldValue:t._valueBeforeChange}),t._valueBeforeChange=""),t.showPasswordIcon&&t.$passwordIcon.addClass("smart-hidden"),t.removeAttribute("focus"),0<t.value.length?t.$.addClass("has-value"):t.$.removeClass("has-value"),t._tooltipOpened&&(t.$.tooltip.close(),t._tooltipOpened=!1))}_showPassword(){const t=this;t.disabled||!t.showPasswordIcon||(t.$.input.type="text",t._passwordIconPressed=!0)}_documentUpHandler(){const t=this;!t.disabled&&t.showPasswordIcon&&t._passwordIconPressed&&(t.$.input.type="password",t._passwordIconPressed=!1,t.$.input.focus())}_textBoxChangeHandler(){const t=this;if(!(t.disabled||t.readonly)){t.value=t.$.input.value;let i=t._evaluatePasswordStrength();t._updateTooltipString(i),t._updatePasswordStrengthStyles(i)}}_updatePasswordStrengthStyles(t){const a=this,n=["short","weak","far","good","strong"];t=t||"short";for(let o=0;o<n.length;o++)a.$container.removeClass("smart-password-"+n[o]);a.disabled||a.$container.addClass("smart-password-"+t)}_evaluatePasswordStrength(){const t=this,a=t.$.input.value,n=a.length;if(t.disabled)return;if(t.passwordStrength)return t.passwordStrength(a,"<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=");let o=0,l=0,r=0,s=0;for(var d=0;d<n;d++){const t=a.charAt(d),i=a.charCodeAt(d);if(64<i&&91>i||96<i&&123>i||127<i&&155>i||159<i&&166>i){o+=1;continue}if(!1===isNaN(t)){l+=1;continue}if(-1!=="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=".indexOf(t)){r+=1;continue}}return s=o+l+2*r+o*l/2+n,8>n?"short":20>s?"weak":30>s?"far":40>s?"good":"strong"}_keyUpHandler(){}_mouseWheelHandler(){}_resizeHandler(){}_selectStartHandler(){}_setDropDownSize(){}_styleChangedHandler(){}_updateTooltipString(t){const i=this;i.$.tooltip.value="<span class=\"password-strength-label\">"+i.localize("passwordStrength")+":</span><span class=\"password-strength-value\">"+i.localize(t)+"</span>"}}),Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{dataSource:{type:"any",value:[]},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},openedre:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},type:{type:"string"},value:{type:"string",value:""}}}static get styleUrls(){return["smart.textbox.css"]}template(){return"<div tabindex=0 id=\"inputContainer\"><input class=\"smart-input\" id='input' readonly='[[readonly]]' pleaseholder='[[placeholder]]' type='[[type]]' name='[[name]]' value='{{value::keyup}}' disabled='[[disabled]]' role='input'/><div id=\"dropDownButton\" tabindex=-1 class=\"smart-drop-down-button\"><div id=\"arrow\" class=\"arrow\"></div></div></div>"}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){const t=this;t.$.input.focus()}select(){const t=this;t.readonly?t.$.input.focus():t.$.input.select()}_documentUpHandler(t){const i=this;let a=t.originalEvent.target;if(a!==i&&a!==i.$.dropDownButton&&a!==i.$.input&&a!==i.$.arrow){if(i._isPointerDown)return i._isPointerDown=!1,void i.$.input.focus();if(!i.$.scrollView.contains(a)){const a=i.close();a&&(t.stopPropagation(),t.preventDefault(),t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}}}_focusHandler(){const t=this;t.setAttribute("focus","")}_blurHandler(){const t=this;t.opened||t.removeAttribute("focus")}_refreshMenu(){const t=this;t.$.menu.classList.remove("scroll"),t.$.scrollView.computedVerticalScrollBarVisibility&&t.$.menu.classList.add("scroll")}_performSelect(){const t=this,i=t.$.menu.querySelector(".active").getAttribute("data-value");t.value=i,t.close()}_offsetTop(t){const i=this;return t?t.offsetTop+i._offsetTop(t.offsetParent):0}_offsetLeft(t){const i=this;return t?t.offsetLeft+i._offsetLeft(t.offsetParent):0}_offset(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}}_open(){const t=this,i=t._offset(t);this.opened||(t.timer&&clearTimeout(t.timer),document.body.appendChild(t.$.scrollView),t.$.scrollView.style.left=-3+i.left+"px",t.$.scrollView.style.top=i.top+t.offsetHeight+1+"px",t.$.scrollView.classList.remove("open"),t.$.scrollView.onpointerdown=function(){t._isPointerDown=!0},requestAnimationFrame(function(){t.$.scrollView.refresh(),t._refreshMenu(),t.$.scrollView.setAttribute("open",""),t.setAttribute("open",""),t.$.dropDownButton.setAttribute("open",""),t.$.input.setAttribute("open",""),"auto"!==t.dropDownWidth&&t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.dropDownWidth+"px"):"auto"===t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""):t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.offsetWidth-8+"px")}),t.$.scrollView.refresh(),t._refreshMenu(),this.opened=!0)}close(){const t=this;return!!t.opened&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.$.scrollView.parentNode&&!t.opened&&document.body.removeChild(t.$.scrollView)},1e3),t.$.scrollView.removeAttribute("open"),t.$.dropDownButton.removeAttribute("open"),t.$.input.removeAttribute("open"),t.removeAttribute("open"),t.opened=!1,t.$.input.focus(),!0)}_lookup(t){const i=this;let a=[];return(i.query=i.$.input.value,i.$.input.readonly&&(!i._incrementalSearchQuery&&(i._incrementalSearchQuery=""),i._incrementalSearchQuery+=t.key,i._incrementalSearchTimer&&clearTimeout(i._incrementalSearchTimer),i.query=i._incrementalSearchQuery,i._incrementalSearchTimer=setTimeout(function(){i._incrementalSearchQuery=""},700)),!i.query||i.query.length<i.minLength)?void i.close():(a="function"==typeof i.dataSource?i.dataSource(i.query):i.dataSource,i._process(a))}_downHandler(t){const i=this;i.readonly&&i._dropDownButtonDownHandler(t)}_dropDownButtonDownHandler(t){const i=this;return i._toggle(),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_toggle(){const t=this;t.opened?t.close():t.open()}open(){const t=this;let i;t.dropDownDataSource?(t.query="",i="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource):i="function"==typeof t.dropDownDataSource?t.dropDownDataSource(t.query):t.dropDownDataSource,t._process(i);const a=t.$.menu.querySelector(".active");if(a)for(let n=0;n<t.$.menu.children.length;n++){const i=t.$.menu.children[n],o=i.getAttribute("data-value");if(o===t.$.input.value){a.classList.remove("active"),i.classList.add("active");break}}t.ensureVisible(),t.$.input.focus(),setTimeout(function(){t.$.input.focus()},25)}_process(t){const i=this;"string"==typeof t&&(t=i.$.deserialize(t,"array")),t=t.filter(function(t){return i.matcher?i.matcher:i._matcher(t)}),t=i._sorter(t),t.sort(),!t.length&&i.opened&&i.close();0===t.length||(0<i.query.length?i._render(t.slice(0,i.items)):i._render(t),i._open(),i.$.scrollView.refresh(),i._refreshMenu(),i.ensureVisible())}_matcher(t){const i=this,a=i.query;switch(i.queryMode){case"startsWith":return t.startsWith(a);case"startsWithIgnoreCase":return t.toLowerCase().startsWith(a.toLowerCase());case"doesNotContain":return 0>t.indexOf(a);case"doesNotContainIgnoreCase":return 0>t.toLowerCase().indexOf(a.toLowerCase());case"contains":return-1<t.indexOf(a);default:case"containsIgnoreCase":return~t.toLowerCase().indexOf(a.toLowerCase());case"equals":return 0===t.localeCompare(a);case"equalsIgnoreCase":return 0===t.toLowerCase().localeCompare(a.toLowerCase());case"endsWith":return t.endsWith(a);case"endsWithIgnoreCase":return t.toLowerCase().endsWith(a.toLowerCase());}}_sorter(t){const i=this;let a=[],n=[],o=[],l;for(;l=t.shift();)l.toLowerCase().indexOf(i.query.toLowerCase())?~l.indexOf(i.query)?n.push(l):o.push(l):a.push(l);return a.concat(n,o)}_highlighter(t){const i=this,a=i.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+a+")","ig"),function(t,i){return"<strong>"+i+"</strong>"})}_render(t){const a=this,n=t.map(function(t){const i=document.createElement("li"),n=document.createElement("a");return n.href="#",i.setAttribute("data-value",t),n.innerHTML=a.highlighter?a.highlighter(t):a._highlighter(t),i.appendChild(n),i});0<n.length&&n[0].classList.add("active"),a.$.menu.innerHTML="";for(let o=0;o<n.length;o++){const t=n[o];a.$.menu.appendChild(t),t.onmouseenter=function(){this.classList.add("active")},t.onmouseleave=function(){this.classList.remove("active")}}}ensureVisible(){const t=this,i=t.$.menu.querySelector(".active");i&&(i.offsetTop+i.offsetHeight>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight&&(t.$.scrollView.scrollTop=i.offsetTop+i.offsetHeight),(i.offsetTop<=t.$.scrollView.scrollTop||i.offsetTop>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight)&&(t.$.scrollView.scrollTop=i.offsetTop),0===[...t.$.menu.children].indexOf(i)?t.$.scrollView.scrollTop=0:[...t.$.menu.children].indexOf(i)===t.$.menu.children.length-1&&(t.$.scrollView.scrollTop=t.$.scrollView.scrollHeight))}_next(){const t=this,i=t.$.menu.querySelector(".active");if(!i)return void t.$.menu.firstElementChild.classList.add("active");i.classList.remove("active");let a=i.nextElementSibling;a||(a=t.$.menu.firstElementChild),a.classList.add("active"),t.ensureVisible()}_prev(){const t=this,i=t.$.menu.querySelector(".active");if(!i)return void t.$.menu.firstElementChild.classList.add("active");i.classList.remove("active");let a=i.previousElementSibling;a||(a=t.$.menu.lastElementChild),a.classList.add("active"),t.ensureVisible()}_move(t){const i=this;if(i.opened){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),i._prev();break;case 40:t.preventDefault(),i._next();}t.stopPropagation()}}_keyDownHandler(t){const i=this;i._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(t.keyCode);t.shiftKey||t.altKey||t.ctrlKey||i._move(t)}_keyPressHandler(t){const i=this;i._suppressKeyPressRepeat||t.shiftKey||t.altKey||t.ctrlKey||i._move(e)}_keyUpHandler(t){const i=this;if(!(t.shiftKey||t.altKey||t.ctrlKey))switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:40===t.keyCode&&t.altKey&&i.open(),38===t.keyCode&&t.altKey&&i.close();break;case 9:case 13:if(!i.opened)return;i._performSelect(),t.stopPropagation(),t.preventDefault();break;case 27:if(!i.opened)return;i.close(),t.stopPropagation(),t.preventDefault();break;default:i._lookup(t),!i.opened||t.ctrlKey||t.shiftKey||(t.stopPropagation(),t.preventDefault());}}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"dropDownHeight"===t&&n.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",n.dropDownHeight+"px"),"opened"===t&&(a?n.open():n.close())}ready(){const t=this;super.ready();const i=document.createElement("ul"),a=document.createElement("smart-scroll-viewer");a.horizontalScrollBarVisibility="hidden",a.appendChild(i),a.style.setProperty("--smart-input-drop-down-menu-height",t.dropDownHeight+"px"),a.classList.add("smart-input-drop-down-menu"),a.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),t.setAttribute("aria-controls",a.id),t.$.scrollView=a,t.$.menu=i,t.opened&&t.open(),t.opened=!1,t.$.inputContainer.tabIndex=0,t.$.menu.onclick=function(i){i.stopPropagation(),i.preventDefault(),t._performSelect(),t.$.input.focus()}}}),Smart("smart-menu-item",class extends Smart.BaseElement{static get properties(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(t,i,a){const n=this;if("disabled"===t&&!1!==a&&n.checked){const o=n.menu;if(o){super.propertyChangedHandler(t,i,a),n.checked=!1;const l=n.parentItem,r=l?l.checkMode:o.checkMode;"radioButton"===r&&o._validateRadioButtonSelection(l,n.level,[])}}}}),Smart("smart-menu-items-group",class extends Smart.BaseElement{static get properties(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){super.ready(),this.$.addClass("smart-unselectable")}propertyChangedHandler(t,i,a){if(-1!==["checkable","checkMode","disabled"].indexOf(t)){const n=this,o=n.menu;if(o)switch(super.propertyChangedHandler(t,i,a),t){case"checkable":a?n.itemContainer.setAttribute("checkable",""):n.itemContainer.removeAttribute("checkable"),o._isContainerOpened(n.container.level,n.container)&&"tree"!==o.mode&&!o._minimized&&o._closeSubContainers(n.level+2);break;case"checkMode":n.itemContainer.setAttribute("check-mode",a),o._changeToRadioButtonMode(a,n.itemContainer,n);break;case"disabled":{if(!(Smart.ListMenu&&o instanceof Smart.ListMenu))o._isContainerOpened(n.container.level,n.container)&&o._closeSubContainers(n.level+1,n.container);else if(o._view)for(;n.contains(o._view);)o._backButtonClickHandler();if(!n.checked)return;n.checked=!1;const t=n.parentItem,i=t?t.checkMode:o.checkMode;"radioButton"===i&&o._validateRadioButtonSelection(t,n.level,[]);break}}}}}),Smart("smart-menu",class extends Smart.BaseElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",allowedValues:["checkbox","radioButton"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},dropDownAppendTo:{value:null,type:"any?"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"}}}static get listeners(){return{"container.click":"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler","container.mouseout":"_mouseoutMouseoverHandler","container.mouseover":"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.menu.css"]}get items(){return this._menuItems}template(){return`<div id="container">
                    <div id="minimizedHeader" class ="smart-header smart-minimized-header smart-hidden">
                        <div id="hamburgerIcon" class ="smart-hamburger-icon smart-hidden">
                            <div id="hamburgerIconLineTop" class ="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                            <div id="hamburgerIconLineCenter" class ="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                            <div id="hamburgerIconLineBottom" class ="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                            <div id="customIconContainer" class ="smart-hamburger-icon-custom-container smart-hidden"></div>
                        </div>
                    </div>
                    <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable>
                        <div id="arrowNear" class="smart-arrow"></div>
                    </smart-repeat-button>
                    <div id="mainContainer" class="smart-menu-main-container">
                        <content></content>
                    </div>
                    <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable>
                        <div id="arrowFar" class="smart-arrow"></div>
                    </smart-repeat-button>
                </div>`}attached(){const t=this;if((super.attached(),!("tree"===t._element||Smart.ListMenu&&t instanceof Smart.ListMenu))&&t.isCompleted&&null!==t.dropDownAppendTo){if(t._minimized)t._dropDownParent.appendChild(t.$.mainContainer);else for(let a=0;a<t._containersInBody.length;a++)t._dropDownParent.appendChild(t._containersInBody[a]);"dropDown"===t.mode&&(t._dropDownParent===t.parentElement?t._dynamicallyReparented?delete t._dynamicallyReparented:t._positionRelativeTo=null:(t._positionRelativeTo=t.parentElement,t._dynamicallyReparented=!0,setTimeout(function(){t._dropDownParent.appendChild(t)},0)))}}detached(){const t=this;super.detached();"tree"===t._element||Smart.ListMenu&&t instanceof Smart.ListMenu||(t._close(),null!==t.dropDownAppendTo&&(t._minimized?t._dropDownParent.removeChild(t.$.mainContainer):t._removeContainersInBody()))}ready(){super.ready();const t=this;t._element="menu",t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t._containers=[],t._containersInBody=[],t._openedContainers=[],t._containersFixedHeight=[],t._menuItemsGroupsToExpand=[],t._additionalScrollButtons=[],t._createElement()}addItem(t,i){const a=this;if(!(t instanceof Smart.MenuItem||t instanceof Smart.MenuItemsGroup))return;let n,o;if(void 0===i)i=a.$.mainContainer,n=1,o=i;else{if(i=a.getItem(i),!1==i instanceof Smart.MenuItemsGroup)return;n=i.level+1,o=i.itemContainer}if(a._createItemHTMLStructure(t,n,i,o.childElementCount,0),t instanceof Smart.MenuItemsGroup&&(a._processHTML(t,n+1),a._checkContainersLength()),o.appendChild(t),a._checkOverflowAddRemove(t.level,o),t instanceof Smart.MenuItemsGroup&&("tree"===a.mode||a._minimized)){const n=t.getElementsByClassName("smart-menu-items-group-arrow");for(let t=0;t<n.length;t++)n[t].className="smart-menu-items-group-arrow down smart-arrow-down";a._expandItemsByDefault()}}checkItem(t){const i=this;t=i.getItem(t);void 0===t||t.checked||t.disabled||t.templateApplied||i._toggleItem(t)}clear(){const t=this;t.$.mainContainer.innerHTML="",t._removeContainersInBody(),t._menuItems={},t._containers=[],t._containersInBody=[],t._openedContainers=[],t._containersFixedHeight=[],t._menuItemsGroupsToExpand=[],t._additionalScrollButtons=[]}close(){const t=this;if(!("dropDown"!==t.mode||!1===t.opened&&t.$.hasClass("smart-visibility-hidden"))){const i=t.$.fireEvent("closing");i.defaultPrevented?t.opened=!0:(t.opened=!1,t.$.addClass("smart-visibility-hidden"),t.$.fireEvent("close"))}}collapseItem(t,i){const a=this;if(t=a.getItem(t),!(void 0===t||t instanceof Smart.MenuItem)){const n=t.level;if(a._openedContainers[n+1]&&a._isContainerOpened(n+1,t.container)){const o=a.mode,l=a.animation,r=!1===i&&a.hasAnimation;r&&(a.animation="none"),a._closeSubContainers(n+1,t.container,void 0,!1!==arguments[2]),(1===n||"tree"===o)&&a._checkOverflow(a.$.mainContainer,"horizontal"===o,[a.$.scrollButtonNear,a.$.scrollButtonFar]),r&&(a.animation=l)}}}expandItem(t,i){const a=this;if(t=a.getItem(t),void 0===t||t instanceof Smart.MenuItemsGroup&&a._isContainerOpened(t.level+1,t.container)&&a._isBranchExpanded(t))return;const n=[t],o=a.animation,l=!1===i&&a.hasAnimation;let r=t.parentItem;for(l&&(a.animation="none"),a._discardKeyboardHover();r;)n.unshift(r),r=r.parentItem;for(let o=0;o<n.length;o++){const t=n[o];if(o==n.length-1&&t instanceof Smart.MenuItem){t.disabled||t.templateApplied||a._hoverViaKeyboard(t);break}a._isContainerOpened(t.container.level,t.container)||a._menuItemsGroupSelectionHandler(t,{target:t,type:"expand",isTrusted:!0},arguments[2])}l&&(a.animation=o)}getItem(t){const i=this;let a;if("string"!=typeof t){if(!isNaN(t))return i._menuItems[t.toString()];a=t}else if(a=document.getElementById(t),null===a)return i._menuItems[t];return(a instanceof Smart.MenuItem||a instanceof Smart.MenuItemsGroup)&&(i.contains(a)||i.$.mainContainer.contains(a)||a.parentElement.parentElement.ownerElement===i)?a:void 0}maximize(){const t=this;if(!t._minimized)return;const i=t.animation;if(t.$.mainContainer.style.marginTop="",t.$.mainContainer.style.marginLeft="","none"!==i&&(t.animation="none"),t._positionDetection.removeOverlay(),t._closeSubContainers(2),t.$minimizedHeader.addClass("smart-hidden"),t._minimized=!1,t._minimizedDropDownOpened&&(t.$hamburgerIcon.removeClass("smart-close-button"),t._minimizedDropDownOpened=!1),null!==t.dropDownAppendTo&&t._appendMinimizedContainerToMenu(t.$.mainContainer,t.$.scrollButtonFar),"tree"!==t.mode){t.$mainContainer.addClass("smart-menu-main-container"),t.$mainContainer.removeClass("smart-menu-minimized-items-container");const a=t.getElementsByClassName("smart-menu-items-group-arrow");for(let n=0;n<a.length;n++)t._setArrowDirection(a[n],a[n].parentElement.parentElement.level+1);null!==t.dropDownAppendTo&&t._moveDropDownsToExternalContainer(),t._applyContainerFixedHeight()}t.$mainContainer.removeClass("smart-visibility-hidden"),t.$hamburgerIcon.addClass("smart-hidden"),t.removeAttribute("minimized"),t._checkOverflow(t.$.mainContainer,"horizontal"===t.mode,[t.$.scrollButtonNear,t.$.scrollButtonFar]),"none"!==i&&setTimeout(function(){t.animation=i},0)}minimize(){const t=this;if(t._minimized||"dropDown"===t.mode)return;t.$minimizedHeader.removeClass("smart-hidden");const i=null!==t.dropDownAppendTo,a=t.animation,n=t.hasAnimation;if(n&&(t.animation="none"),t._positionDetection.removeOverlay(),t._closeSubContainers(2),n&&i&&(t.animation=a),"tree"!==t.mode&&(i&&t._moveDropDownsToMenu(),t._removeContainerFixedHeight()),t._hideMainContainerScrollButtons(),t.$mainContainer.removeClass("smart-menu-main-container"),t.$mainContainer.addClass("smart-visibility-hidden"),t._edgeMacFF&&(t.$.mainContainer.style.left="",t.$.mainContainer.style.top="",t.$mainContainer.addClass("not-in-view")),t.$hamburgerIcon.removeClass("smart-hidden"),i&&t._appendMinimizedContainerToExternalElement(t.$.mainContainer),setTimeout(function(){t.$mainContainer.addClass("smart-menu-minimized-items-container"),n&&!i&&(t.animation=a)},0),t._minimized=!0,t.setAttribute("minimized",""),"tree"!==t.mode){const a=t.$.mainContainer.getElementsByClassName("smart-menu-items-group-arrow");for(let n=0;n<a.length;n++)t._setArrowDirection(a[n],a[n].parentElement.parentElement.level+1)}}open(t,i){var a=Math.max;const n=this;if("dropDown"!==n.mode)return;const o=n.$.fireEvent("opening");if(o.defaultPrevented)return void(n.opened=!1);let l;if(n.opened=!0,n._positionRelativeTo){const a=n._positionRelativeTo.getBoundingClientRect();t+=a.left,i+=a.top,n._positionedParent?(l=n._positionedParent.getBoundingClientRect(),t-=l.left,i-=l.top):(t+=window.pageXOffset,i+=window.pageYOffset)}let r=t+n.offsetWidth-document.documentElement.clientWidth,s=i+n.offsetHeight-document.documentElement.clientHeight;l?(r+=l.left,s+=l.top):(r-=window.pageXOffset,s-=window.pageYOffset),0<r?t-=r:l?t=a(t,-l.left):t=a(t,window.pageXOffset),0<s?i-=s:l?i=a(i,-l.top):i=a(i,window.pageYOffset),isNaN(t)||(n.style.left=t+"px"),isNaN(i)||(n.style.top=i+"px"),n.$.removeClass("smart-visibility-hidden"),n.$.fireEvent("open"),n.hasAnimation||n._noAutoFocus||n.focus()}removeItem(t){const i=this;if(t=i.getItem(t),void 0!==t){const a=t.parentElement;if(t instanceof Smart.MenuItemsGroup){const a=t.container;if(i._isContainerOpened(a.level,a)&&i._closeSubContainers(a.level,a),1===t.level){const t=i._containersInBody.indexOf(a);-1!==t&&(i._containersInBody.splice(t,1),null!==i.dropDownAppendTo&&"tree"!==i.mode&&!i._minimized&&i._dropDownParent.removeChild(a))}}a.removeChild(t),i._refreshContainersArrays(),i._menuItems={},i._refreshItemPaths(i.$.mainContainer,!0),i._checkOverflowAddRemove(t.level,a)}}uncheckItem(t){const i=this;t=i.getItem(t);void 0===t||!t.checked||t.disabled||t.templateApplied||i._toggleItem(t)}propertyChangedHandler(t,a,n){function i(){(null!==l.dropDownAppendTo||"tree"===l.mode)&&l._checkOverflow(l.$.mainContainer,"horizontal"===l.mode,[l.$.scrollButtonNear,l.$.scrollButtonFar])}function o(t,i,a){a?i.setAttribute(t,""):i.removeAttribute(t)}super.propertyChangedHandler(t,a,n);const l=this;switch(t){case"animation":l.$.mainContainer.setAttribute("animation",n),l._additionalScrollButtons.forEach(function(t){t[0].animation=n,t[1].animation=n}),null!==l._dropDownParent&&l._containers.forEach(function(t){t.setAttribute("animation",n)});break;case"checkable":"tree"===l.mode||l._minimized?l._minimized&&null!==l.dropDownAppendTo&&o("checkable",l.$.mainContainer,n):l._closeSubContainers(2);break;case"checkboxes":if(l._close(),null!==l.dropDownAppendTo){for(let t=0;t<l._containers.length;t++){const i=l._containers[t];o("checkboxes",i,n)}l._minimized&&o("checkboxes",l.$.mainContainer,n)}break;case"checkMode":l._changeToRadioButtonMode(n,l.$.mainContainer),l._minimized&&null!==l.dropDownAppendTo&&l.$.mainContainer.setAttribute("check-mode",n);break;case"dataSource":{let t=!1;l._minimized&&(l.maximize(),t=!0),l._removeContainersInBody(),l._containersInBody=[],l._menuItems={},l._processDataSource(),l._checkContainersLength(),t?l.minimize():i(),l._expandItemsByDefault();break}case"dropDownAppendTo":{const t=l._dropDownParent;if(l._positionDetection.getDropDownParent(),l._dropDownParent===t||"tree"===l.mode&&!l._minimized)return;if(l._close(),l._minimized)return void(null===n?l._appendMinimizedContainerToMenu(l.$.mainContainer,l.$.scrollButtonFar):l._appendMinimizedContainerToExternalElement(l.$.mainContainer));if(null!==l._dropDownParent&&null===t)l._moveDropDownsToExternalContainer();else if(null===l._dropDownParent&&null!==t)l._moveDropDownsToMenu();else if(null!==l._dropDownParent&&null!==t)for(let t=0;t<l._containersInBody.length;t++)l._dropDownParent.appendChild(l._containersInBody[t]);null!==n||l.$mainContainer.hasClass("simple")?l._checkOverflow(l.$.mainContainer,"horizontal"===l.mode,[l.$.scrollButtonNear,l.$.scrollButtonFar]):l._hideMainContainerScrollButtons();for(let t=0;t<l._containersFixedHeight.length;t++)l._containersFixedHeight[t].itemContainer.checkOverflow=!0;"dropDown"===l.mode&&(l.close(),l._reparentMenu(!0,t));break}case"dropDownOverlay":n||l._positionDetection.removeOverlay();break;case"disabled":n&&l._close(),l._setFocusable(),l.$.scrollButtonNear.disabled=n,l.$.scrollButtonFar.disabled=n,!n&&(null!==l.dropDownAppendTo||l.$mainContainer.hasClass("simple")||"tree"===l.mode)&&l._updateScrollButtonVisibility(l.$.mainContainer,"horizontal"===l.mode,[l.$.scrollButtonNear,l.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":{if("mode"===t){if(delete l._dynamicallyReparented,"tree"===a||l._minimized?(l._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),l._openedContainers=[]):l._closeSubContainersDefaultMode(2),l._discardKeyboardHover(!0),l._minimized&&l._minimizedDropDownOpened&&(l.$mainContainer.addClass("smart-visibility-hidden"),l.$hamburgerIcon.removeClass("smart-close-button"),l._minimizedDropDownOpened=!1),("horizontal"===n||"horizontal"===a)&&l._changeScrollButtonsArrows(),l._minimized)return void("dropDown"===n&&(l.mode=a));!1===l.opened&&("dropDown"===n?l.$.addClass("smart-visibility-hidden"):"dropDown"===a&&l.$.removeClass("smart-visibility-hidden")),"tree"===a?(null!==l.dropDownAppendTo&&l._moveDropDownsToExternalContainer(),l.$mainContainer.addClass("smart-menu-main-container"),l.$mainContainer.removeClass("smart-menu-minimized-items-container"),l._applyContainerFixedHeight()):"tree"===n&&(null!==l.dropDownAppendTo&&l._moveDropDownsToMenu(),l._applyTreeMode()),"auto"===l.overflow&&l._hideMainContainerScrollButtons(),i()}if("tree"===l.mode||l._minimized)return l._minimizedDropDownOpened&&l._close(),void(l._minimized&&null!==l.dropDownAppendTo&&l.$.mainContainer.setAttribute(l.properties[t].attributeName,n));"dropDownPosition"===t&&l._close();const o=l.enableShadowDOM?l.shadowRoot.querySelectorAll("smart-menu-items-group"):l.getElementsByTagName("smart-menu-items-group");for(let t=0;t<o.length;t++){const i=o[t];l._setArrowDirection(i.children[0].children[1],i.level+1)}if(null!==l.dropDownAppendTo)for(let a=0;a<l._containers.length;a++){const i=l._containers[a];i.setAttribute(Smart.Utilities.Core.toDash(t),n),2<i.level&&l._setArrowDirection(i.menuItemsGroup.children[0].children[1],i.level)}break}case"minimizeIconTemplate":l._applyMinimizeIconTemplate(n,a);break;case"minimizeWidth":l._resizeHandler();break;case"opened":n?l.open():l.close();break;case"overflow":l._handleOverflowChange();break;case"theme":if(null===l.dropDownAppendTo||Smart.ListMenu&&l instanceof Smart.ListMenu)return;if(l._minimized)""!==a&&l.$mainContainer.removeClass(a),""!==n&&l.$mainContainer.addClass(n);else for(let t=0;t<l._containers.length;t++){const i=l._containers[t];""!==a&&i.classList.remove(a),""!==n&&i.classList.add(n)}break;case"unfocusable":l._setFocusable();}}_addOpenedContainer(t,i){const a=this;if("tree"===a.mode||a._minimized){a._openedContainers[t]||(a._openedContainers[t]=[]);const n=i.menuItemsGroup;return n.set("expanded",!0),a._updateState&&a._updateState("expanded",n.id,!0),a._openedContainers[t].push(i)}a._openedContainers[t]=i}_appendMinimizedContainerToExternalElement(t){const i=this;t.ownerElement=i,i._dropDownParent.appendChild(t),t.setAttribute("animation",i.animation),""!==i.theme&&t.$.addClass(i.theme),t.$.addClass("smart-menu-drop-down smart-drop-down"),t.$.addClass("smart-drop-down-repositioned"),t.setAttribute("check-mode",i.checkMode),t.setAttribute("drop-down-position",i.dropDownPosition),t.setAttribute("mode",i.mode),t.setAttribute("loading-indicator-position",i.loadingIndicatorPosition),i.checkable&&t.setAttribute("checkable",""),i.checkboxes&&t.setAttribute("checkboxes",""),i.$.view&&i.detachedChildren.indexOf(i.$.view)&&i.detachedChildren.push(i.$.view)}_appendMinimizedContainerToMenu(t,i){const a=this;delete t.ownerElement,a.$.container.insertBefore(t,i),t.removeAttribute("animation"),""!==a.theme&&t.$.removeClass(a.theme),t.$.removeClass("smart-menu-drop-down smart-drop-down"),t.$.removeClass("smart-drop-down-repositioned"),t.removeAttribute("checkable"),t.removeAttribute("checkboxes"),t.removeAttribute("check-mode"),t.removeAttribute("drop-down-position"),t.removeAttribute("mode"),t.removeAttribute("loading-indicator-position"),t.removeAttribute("style")}_applyContainerFixedHeight(){const t=this;for(let a=0;a<t._containers.length;a++){const i=t._containers[a];-1===t._containersFixedHeight.indexOf(i)?i.style.height="":(i.style.height=i.menuItemsGroup.dropDownHeight+"px",i.itemContainer.checkOverflow=!0)}}_applyGrouping(t,a){const n=this;let o=t===n.$.mainContainer?Array.from(t.children):Array.from(t.container.firstElementChild.children);for(let l=0;l<o.length;l++){const t=o[l];t.originalIndex=l,t instanceof Smart.MenuItemsGroup&&a===void 0&&n._applyGrouping(t)}n._sortItems(t)}_applyMinimizeIconTemplate(t,i){const a=this;if(null===t){if(null===i)return;a.$customIconContainer.addClass("smart-hidden"),a.$.customIconContainer.innerHTML="",a.$hamburgerIconLineTop.removeClass("smart-hidden"),a.$hamburgerIconLineCenter.removeClass("smart-hidden"),a.$hamburgerIconLineBottom.removeClass("smart-hidden")}else{const n=document.getElementById(t);if(null!==n&&"template"===n.tagName.toLowerCase()){const t=document.importNode(n.content,!0);a.$hamburgerIconLineTop.addClass("smart-hidden"),a.$hamburgerIconLineCenter.addClass("smart-hidden"),a.$hamburgerIconLineBottom.addClass("smart-hidden"),a.$.customIconContainer.innerHTML="",a.$.customIconContainer.appendChild(t),a.$customIconContainer.removeClass("smart-hidden")}else a.minimizeIconTemplate=i}}_applyTreeMode(){const t=this,a=t.getElementsByClassName("smart-menu-items-group-arrow");if(t.$mainContainer.removeClass("smart-menu-main-container"),t.$mainContainer.addClass("smart-menu-minimized-items-container"),t.isCompleted)for(let t=0;t<a.length;t++)a[t].className="smart-menu-items-group-arrow down";t._removeContainerFixedHeight()}_arrowLeftHandler(t,i,a,n){const o=this;1===t?"horizontal"===i&&o._levelOneNavigate("_getLastEnabledChild",a,n):2===t?o._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",a):o._escapeHandler(a,t,n)}_arrowRightHandler(t,i,a,n){const o=this;1===t?"horizontal"===i?o._levelOneNavigate("_getFirstEnabledChild",a,n):o._levelOneOpenDropDown(a):a instanceof Smart.MenuItemsGroup?o._selectionHandler({target:a,isTrusted:!0}):o._levelOneNavigateFromLowerLevel("_getNextEnabledChild",a)}_browserBoundsDetection(t){var i=Math.min;const a=this;if(("tree"!==a.mode||a._minimized)&&(t.style.marginTop="",t.style.marginLeft="","auto"===a.dropDownPosition)){const a=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,n=1===window.devicePixelRatio?document.documentElement.clientHeight:window.innerHeight,o=t.getBoundingClientRect(),l=a-o.left-t.offsetWidth,r=n-o.top-t.offsetHeight;10>l&&(t.style.marginLeft=i(l-10,-10)+"px"),10>r&&(t.style.marginTop=i(r-10,-10)+"px")}}_changeScrollButtonsArrows(){const t=this;"horizontal"===t.mode?(t.$arrowNear.removeClass("smart-arrow-up"),t.$arrowNear.addClass("smart-arrow-left"),t.$arrowFar.removeClass("smart-arrow-down"),t.$arrowFar.addClass("smart-arrow-right")):(t.$arrowNear.removeClass("smart-arrow-left"),t.$arrowNear.addClass("smart-arrow-up"),t.$arrowFar.removeClass("smart-arrow-right"),t.$arrowFar.addClass("smart-arrow-down"))}_changeToRadioButtonMode(t,a,i){if("radioButton"===t){const t=[];for(let n=0;n<a.childElementCount;n++){const i=a.children[n];!i.checked||i.disabled||i.templateApplied||t.push(i)}this._validateRadioButtonSelection(i,i?i.level+1:1,t)}}_checkContainersLength(t){const i=this;0===i._containers.length?(i.$mainContainer.addClass("simple"),!t&&i._checkOverflow(i.$.mainContainer,"horizontal"===i.mode,[i.$.scrollButtonNear,i.$.scrollButtonFar])):!t&&(i.$mainContainer.removeClass("simple"),null===i.dropDownAppendTo&&"tree"!==i.mode&&i.$mainContainer.removeClass("scroll-buttons-shown one-button-shown"))}_checkOverflow(t,i,a){var n=Math.round;const o=this,l=t===o.$.mainContainer?o.overflow:"auto";if(o._minimized||"hidden"===l||null===o.dropDownAppendTo&&"tree"!==o.mode&&t===o.$.mainContainer&&!o.$mainContainer.hasClass("simple"))return;const r=t.scrollTop;"auto"===l&&(t.classList.remove("scroll-buttons-shown"),t.classList.remove("one-button-shown"),a[0].$.addClass("smart-hidden"),a[1].$.addClass("smart-hidden"));let s,d,m;i?(s=n(t.scrollWidth)>n(t.offsetWidth),d=0<n(t.scrollLeft),m=n(t.offsetWidth+t.scrollLeft)<n(t.scrollWidth)):(s=n(t.scrollHeight)>n(t.offsetHeight),d=0<n(t.scrollTop),m=n(t.offsetHeight+t.scrollTop)<n(t.scrollHeight)),s?"auto"===l?(t.classList.add("scroll-buttons-shown"),d&&a[0].$.removeClass("smart-hidden"),m&&a[1].$.removeClass("smart-hidden"),!1===(d&&m)&&t.classList.add("one-button-shown"),!o.disabled&&(a[0].disabled=!1,a[1].disabled=!1),t.scrollTop=r):(a[0].$.removeClass("smart-hidden"),a[1].$.removeClass("smart-hidden"),o.disabled?(a[0].disabled=!0,a[1].disabled=!0):(a[0].disabled=!d,a[1].disabled=!m)):"scroll"===l&&(a[0].disabled=!0,a[1].disabled=!0),t===o.$.mainContainer&&"tree"!==o.mode&&o._close()}_checkOverflowAddRemove(t,i){const a=this;1===t&&null!==a.dropDownAppendTo||"tree"===a.mode?a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]):1<t&&i.dropDownHeightSet&&(a._isContainerOpened(t,i.container)?a._checkOverflow(i,!1,[i.container.children[0],i.container.children[2]]):i.checkOverflow=!0)}_close(){const t=this;t._positionDetection.removeOverlay(),t._closeSubContainers(2),t._discardKeyboardHover(!0),t._minimized&&t._minimizedDropDownOpened&&(t.$mainContainer.addClass("smart-visibility-hidden"),t._edgeMacFF&&(t.$.mainContainer.style.left="",t.$.mainContainer.style.top="",t.$mainContainer.addClass("not-in-view")),t.$hamburgerIcon.removeClass("smart-close-button"),t._minimizedDropDownOpened=!1)}_closeSubContainers(t,i,a,n){const o=this;"tree"===o.mode||o._minimized?o._closeSubContainersTreeMode(t,i,a,n):o._closeSubContainersDefaultMode(t,i,a,n)}_closeSubContainersDefaultMode(t,i,a,n){function o(o){const i=r[o].menuItemsGroup;a&&o===t||(i.$.removeClass("focus"),i.removeAttribute("focus"),i.$.removeClass("hover"),i.removeAttribute("hover")),i.$.removeClass("smart-menu-items-group-opened"),r[o].$.addClass("smart-visibility-hidden"),l._edgeMacFF&&2===o&&!l.hasAnimation&&(r[o].style.left="",r[o].style.top="",r[o].$.addClass("not-in-view")),l._minimized&&l._browserBoundsDetection(l.$.mainContainer),n&&l.$.fireEvent("collapse",{item:i,label:i.label,path:i.path,value:i.value,children:i.itemContainer.children}),r[o]=void 0}const l=this,r=l._openedContainers;for(let l=r.length-1;l>=t;l--)void 0!==r[l]&&o(l,!0)}_closeSubContainersTreeMode(t,i,a,n,o){const l=this;if(n){const t=i.menuItemsGroup,a=l.$.fireEvent("collapsing",{item:t,label:t.label,path:t.path,value:t.value,children:i.itemContainer.children});if(a.defaultPrevented)return}if(void 0===i)return void l._collapseAll(!1,o);const r=i.menuItemsGroup;if(r.set("expanded",!1),"menu"!==l._element)l._updateState("expanded",r.id,!1);else if(a){const t=l.$.mainContainer.getElementsByClassName("focus")[0];t&&(t.$.removeClass("focus"),t.removeAttribute("focus")),r.$.addClass("focus"),r.setAttribute("focus",""),l._focusedViaKeyboard=r}else r.$.removeClass("focus"),r.removeAttribute("focus");if(r.$.removeClass("smart-"+l._element+"-items-group-opened"),o||!l.hasAnimation?(r.$.removeClass("smart-"+l._element+"-items-group-expanded"),i.$.addClass("smart-visibility-hidden"),l._minimized&&l._browserBoundsDetection(l.$.mainContainer)):l._collapseSection(i),n&&l.$.fireEvent("collapse",{item:r,label:r.label,path:r.path,value:r.value,children:r.itemContainer.children}),!!l._openedContainers[t]){const a=l._openedContainers[t].indexOf(i);-1!==a&&l._openedContainers[t].splice(a,1)}}_collapseAll(t,a){const n=this;for(let o=n._openedContainers.length-1;2<=o&&!(n._openedContainers[o]===void 0);o--)for(let i=n._openedContainers[o].length-1;0<=i;i--)n._closeSubContainersTreeMode(o,n._openedContainers[o][i],void 0,t,a);n.hasAnimation||n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]);for(let o=n._openedContainers.length-1;2<=o;o--){const t=n._openedContainers[o];if(t===void 0||0===t.length)n._openedContainers.splice(o,1);else break}2===n._openedContainers.length&&(n._openedContainers=[])}_collapseSection(t){const i=this,a=t.scrollHeight+"px";t.style.transition="none",requestAnimationFrame(function(){return"tree"===i.mode||i._minimized?void(t.style.height=a,t.style.transition="",requestAnimationFrame(function(){t.style.height="0px",i._treeAnimationInProgress=t,"0px"==a&&i._transitionendHandlerCollapse(i,t)})):void(t.style.transition="")}),t.addEventListener("transitionend",i._transitionendHandlerCollapse)}_createElement(){const t=this,i=t.mode;t._positionDetection=new Smart.Utilities.PositionDetection(t),t._positionDetection.getDropDownParent(),t._reparentMenu(),t.disabled&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0),null===t.dataSource&&t.$.mainContainer.firstElementChild instanceof HTMLUListElement&&t._processUList();const a=t.getElementsByTagName("smart-menu-item"),n=function(){const a=t.animation;t._changeScrollButtonsArrows(),t._setFocusable(),"dropDown"===i&&!1===t.opened&&(t.hasAnimation?(t.animation="none",t.$.addClass("smart-visibility-hidden"),t.animation=a):t.$.addClass("smart-visibility-hidden")),t._menuItems={},t.$.mainContainer.setAttribute("animation",a),null===t.dataSource?t._processHTML(t.$.mainContainer,1):t._processDataSource(),t._checkContainersLength(!0),(null!==t.dropDownAppendTo||t.$mainContainer.hasClass("simple")||"tree"===t.mode)&&"scroll"===t.overflow&&(t.$mainContainer.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),t._updateScrollButtonVisibility(t.$.mainContainer,"horizontal"===i,[t.$.scrollButtonNear,t.$.scrollButtonFar])),t._applyMinimizeIconTemplate(t.minimizeIconTemplate,null),"tree"===i&&t._applyTreeMode(),null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth?t.minimize():t._checkOverflow(t.$.mainContainer,"horizontal"===i,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._expandItemsByDefault(),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted())};0===a.length?n():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(a,n))}_ensureItemsReady(t,i){const a=this,n=function(){const a=function(a){for(let n=0;n<t.length;n++)t[n].context="node"===a?t[n]:document};a("node"),i(),a()};if(0===t.length)n();else{a._nodesReadyListeners=0;for(let o=0;o<t.length;o++){const i=t[o],l=function(){a._nodesReadyListeners--,0===a._nodesReadyListeners&&(n(),delete a._nodesReadyListeners)}.bind(a);i.isCompleted||(a._nodesReadyListeners++,i.completeHandlers=[],i._onCompleted=l)}0===a._nodesReadyListeners&&n()}}_createItemHTMLStructure(t,i,a,n){const o=this,l=document.createElement("div"),r=document.createElement("div"),s=document.createDocumentFragment();let d;t.menu=o,1<i?(t.originalIndex=n,d=a.path+"."+t.originalIndex,t.parentItem=a):(t.originalIndex=n,d=""+n),t.path=d,o._menuItems[d]=t,l.className="smart-"+o._element+"-item-label-container",r.className="smart-"+o._element+"-item-label-element","tree"===o._element&&o._setIndentation(l,i,o.rightToLeft?"paddingRight":"paddingLeft");const m=Array.from(t.childNodes);for(let o=0;o<m.length;o++){const t=m[o];if(t instanceof Smart.MenuItem||t instanceof Smart.MenuItemsGroup)break;r.appendChild(t)}if(""===r.innerHTML.trim()){const i=t.label||t.getAttribute("label");i&&""!==i?o._setLabel(i,r,t,!0):(t.set("label","Item "+n),r.innerHTML="Item "+n)}else t.set("label",r.innerHTML.trim());if(t instanceof Smart.MenuItemsGroup&&void 0===t.titleLabel&&(t.titleLabel=t.label),r.innerHTML="<span>"+r.innerHTML+"</span>",s.appendChild(r),t.set("level",i),t.set("shortcut",t.shortcut||t.getAttribute("shortcut")||""),t.shortcut&&t instanceof Smart.MenuItem){const i=document.createElement("div");i.className="smart-"+o._element+"-item-shortcut",i.innerHTML=t.shortcut,s.appendChild(i)}l.appendChild(s),t.insertBefore(l,t.children[0]),t.id||(t.id=o.id+"ItemP"+t.path.replace(/\./g,"_")+"L"+t.label.replace(/<|\/|>|"|'|=|\s/g,""))}_createMenuItemsGroupContainer(t,i){const a=this,n=document.createElement("div"),o=document.createElement("div");if(n.className="smart-"+a._element+"-drop-down smart-visibility-hidden",a._edgeMacFF&&2===i&&"tree"!==a.mode&&(n.className+=" not-in-view"),n.$=Smart.Utilities.Extend(n),n.level=i,n.setAttribute("level",i),n.menuItemsGroup=t,o.className="smart-"+a._element+"-item-container",o.$=Smart.Utilities.Extend(o),o.container=n,o.menuItemsGroup=t,t.checkable&&o.setAttribute("checkable",""),o.setAttribute("check-mode",t.checkMode),n.itemContainer=o,n.appendChild(o),null!==t.dropDownHeight){const i=document.createElement("smart-repeat-button"),l=document.createElement("smart-repeat-button");i.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden",i.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-up\"></div>",i.animation=a.animation,i.unfocusable=!0,l.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden",l.innerHTML="<div id=\"arrowNear\" class=\"smart-arrow smart-arrow-down\"></div>",l.animation=a.animation,l.unfocusable=!0,n.insertBefore(i,o),n.appendChild(l),n.$.addClass("drop-down-height-set"),o.dropDownHeightSet=!0,o.checkOverflow=!0,n.style.height=t.dropDownHeight+"px",a._containersFixedHeight.push(n),a._additionalScrollButtons.push([i,l])}return n}_discardKeyboardHover(t){const i=this;!i._focusedViaKeyboard||!t&&i._focusedViaKeyboard instanceof Smart.MenuItemsGroup&&i._isContainerOpened(i._focusedViaKeyboard.level+1,i._focusedViaKeyboard.container)||(i._focusedViaKeyboard.$.removeClass("focus"),i._focusedViaKeyboard.removeAttribute("focus"),i._focusedViaKeyboard.$.removeClass("hover"),i._focusedViaKeyboard.removeAttribute("hover"),i._focusedViaKeyboard=void 0)}_documentDownHandler(t){const i=this;if("dropDown"===i.mode&&i.opened){const a=t.originalEvent.target,n=a.closest(".smart-drop-down-repositioned");i.contains(a)||n&&n.ownerElement===i||i.close()}}_documentUpHandler(t){const i=this,a=t.originalEvent.target;if(!(i.disabled||i.displayLoadingIndicator||!a.closest)){if(i.enableShadowDOM){const n=t.originalEvent.composedPath()[0],o=function(){for(let t=n.getRootNode().host;t;){if(t===i)return t;t=t.getRootNode().host}}();if(!o&&null===a.closest(".smart-menu-drop-down")||n===i.$.mainContainer||a===i.$.mainContainer){if("tree"===i.mode)return;i._close()}else(o||a.closest(".smart-list-menu-view")===i.$.view)&&i!==document.activeElement&&null===document.activeElement.closest("[template-applied]")&&i.focus();return}if(!i.contains(a)&&null===a.closest(".smart-menu-drop-down")||a===i.$.mainContainer){if("tree"===i.mode)return;i._close()}else(i.contains(a)||a.closest(".smart-list-menu-view")===i.$.view)&&i!==document.activeElement&&null===document.activeElement.closest("[template-applied]")&&i.focus()}}_endSwiping(t,i,a){var n=Math.abs;const o=this;if(!o._dragStartDetails)return;const l=o.$.mainContainer,r=n(o._dragStartDetails.startTime-i),s=300/r,d=(o._dragStartDetails.startY-t.pageY)*s;let m=n(d);const c=function(){return!(0<d&&l.scrollTop===l.scrollHeight-l.offsetHeight||0>d&&0===l.scrollTop)};let u=.03*n(d)*s;const p=function(){if(5<u){const t=(m-u)/n(d);.1>t?u/=1.25:.15>t?u/=1.2:.2>t?u/=1.15:.25>t?u/=1.1:.3>t&&(u/=1.05)}const t=l.scrollTop;l.scrollTop=0<d?Math.min(t+u,l.scrollHeight-l.offsetHeight):Math.max(t-u,0),m-=u,o._updateScrollButtonVisibility(o.$.mainContainer,"horizontal"===o.mode,[o.$.scrollButtonNear,o.$.scrollButtonFar]);const i=c();if(0<m&&i)o._scrollingAnimationFrame=window.requestAnimationFrame(p);else if(o._wheelInProgress=!1,!i&&(o._fireScrollBottomReachedEvent&&o._fireScrollBottomReachedEvent(t),!0!==a)){const t=o.$.mainContainer.scrollTop;0===t?o._bounceTop():o._bounceBottom(t)}};o._scrollingAnimationFrame&&cancelAnimationFrame(o._scrollingAnimationFrame),1e3>r&&c()?o._scrollingAnimationFrame=window.requestAnimationFrame(p):o._wheelInProgress=!1,delete o._dragStartDetails}_ensureVisible(t){function i(i,a,n){let o=t.firstElementChild[n]+i-l[n];0>o&&(o=i),l["scroll"+a]=o}function a(a,o){let s=t["offset"+a],d=l[o];"Top"!==a||l===n.$.mainContainer||r[0].$.hasClass("smart-hidden")||(s-=r[0][o]),i(s,a,o),n._updateScrollButtonVisibility(l,"Left"===a,r),d!==l[o]&&i(s,a,o)}const n=this;if(n._minimized)return;const o=n.mode;let l,r;if("tree"!==o&&t.parentElement!==n.$.mainContainer){if(null===t.dropDownHeight)return;l=t.parentElement,r=[l.container.children[0],l.container.children[2]]}else l=n.$.mainContainer,r=[n.$.scrollButtonNear,n.$.scrollButtonFar];if(l!==n.$.mainContainer||(null!==n.dropDownAppendTo||"tree"===n.mode||n.$mainContainer.hasClass("simple"))&&(l.$.hasClass("scroll-buttons-shown")||"hidden"===n.overflow)){const i=l.getBoundingClientRect(),r=t.getBoundingClientRect();return"tree"===o?void n._ensureVisibleTreeMode(t,r,l,i,0):void(l===n.$.mainContainer&&"horizontal"===o&&(i.left>r.left||i.right<r.right)?a("Left","offsetWidth"):(i.top>r.top||i.bottom<r.bottom)&&a("Top","offsetHeight"))}}_ensureVisibleTreeMode(t,i,a,n,o){const l=this;if(("menu"===l._element||"scrollButtons"===l.scrollMode)&&!a.$.hasClass("scroll-buttons-shown")&&"hidden"!==l.overflow)return;const r=a.offsetHeight,s=l.$scrollButtonNear.hasClass("smart-hidden");let d;if(n.top>i.top)d=l._getOffsetTop(t);else{const a=t.expanded?t.firstElementChild.offsetHeight+parseInt(window.getComputedStyle(t.children[1]).marginTop,10):t.offsetHeight;if(n.bottom<i.top+a)d=l._getOffsetTop(t)-r+a+o;else return}a.scrollTop=d,("menu"===l._element||"scrollButtons"===l.scrollMode)&&l._updateScrollButtonVisibility(a,!1,[l.$.scrollButtonNear,l.$.scrollButtonFar]),"auto"===l.overflow&&s&&!l.$scrollButtonNear.hasClass("smart-hidden")&&(a.scrollTop+=r-a.offsetHeight)}_escapeHandler(t,i,a){const n=this;t&&(t.$.removeClass("focus"),t.removeAttribute("focus")),n._closeSubContainers(i,void 0,void 0,!0),n._hoverViaKeyboard(a.menuItemsGroup)}_expandItemsByDefault(t){const a=this;if((0!==a._menuItemsGroupsToExpand.length||t)&&("tree"===a.mode||a._minimized)){const i=a.hasAnimation,n=a.animation;i&&(a.animation="none"),t&&a._collapseAll(!1);for(let t=0;t<a._menuItemsGroupsToExpand.length;t++)a.expandItem(a._menuItemsGroupsToExpand[t].path,void 0,!1);i&&(a.animation=n),a._menuItemsGroupsToExpand=[]}}_expandSection(t){const i=this,a=t.style.height,n=t.scrollHeight+"px";return t.style.height=n,i._treeAnimationInProgress=t,a!==n&&(parseFloat(a)||parseFloat(n))?void t.addEventListener("transitionend",i._transitionendHandlerExpand):void i._transitionendHandlerExpand(i,t)}_filterInputKeyupHandler(){const t=this;t._filterTimer&&clearTimeout(t._filterTimer),t._filterTimer=setTimeout(function(){const i=t.context;t.context=t,t._applyFilter(t.$.filterInput.value,t._view),t._checkOverflow(),t.context=i},300)}_findItem(t,i){if(""===i)return t;const a=this;switch(a.filterMode){case"startsWith":if(0===t.label.indexOf(i))return t;break;case"startsWithIgnoreCase":if(0===t.label.toLowerCase().indexOf(i.toLowerCase()))return t;break;case"doesNotContain":if(0>t.label.indexOf(i))return t;break;case"doesNotContainIgnoreCase":if(0>t.label.toLowerCase().indexOf(i.toLowerCase()))return t;break;case"contains":if(-1<t.label.indexOf(i))return t;break;case"containsIgnoreCase":if(-1<t.label.toLowerCase().indexOf(i.toLowerCase()))return t;break;case"equals":if(0===t.label.localeCompare(i))return t;break;case"equalsIgnoreCase":if(0===t.label.toLowerCase().localeCompare(i.toLowerCase()))return t;break;case"endsWith":if(t.label.endsWith(i))return t;break;case"endsWithIgnoreCase":if(t.label.toLowerCase().endsWith(i.toLowerCase()))return t;}return null}_getFirstEnabledChild(t){const a=t.children;for(let n=0;n<a.length;n++)if(this._isChildEnabled(a[n]))return a[n]}_getLastEnabledChild(t){const a=t.children;for(let n=a.length-1;0<=n;n--)if(this._isChildEnabled(a[n]))return a[n]}_getNextEnabledChild(t){if(t)for(;t.nextElementSibling;){const i=t.nextElementSibling;if(this._isChildEnabled(i))return i;t=i}}_getOffsetTop(t){let i=t.offsetTop;for(;t.offsetParent!==this.$.mainContainer;)t=t.offsetParent,i+=t.offsetTop;return i}_getPreviousEnabledChild(t){if(t)for(;t.previousElementSibling;){const i=t.previousElementSibling;if(this._isChildEnabled(i))return i;t=i}}_hamburgerIconClickHandler(t,i){t&&t.stopPropagation();const a=this;if(void 0===i&&(Smart.ListMenu&&a instanceof Smart.ListMenu?i=a.$.view:i=a.$.mainContainer),!a.disabled)if(!a._minimizedDropDownOpened){if(a._positionDetection.placeOverlay(),null!==a.dropDownAppendTo){const t=a.dropDownPosition,n=a.getBoundingClientRect(),o=a._positionDetection.getDropDownOffset();-1!==t.indexOf("right")||"auto"===t?(i.style.left=n.left+o.x+"px",i.style.right="initial"):-1!==t.indexOf("left")&&(i.style.left=n.right-i.offsetWidth+o.x+"px",i.style.right="initial"),-1!==t.indexOf("bottom")||-1!==t.indexOf("overlay")||"auto"===t?i.style.top=n.bottom+o.y+"px":-1!==t.indexOf("top")&&(i.style.top=n.top+o.y+"px")}a._edgeMacFF&&i.$.removeClass("not-in-view"),i.$.removeClass("smart-visibility-hidden"),a.$hamburgerIcon.addClass("smart-close-button"),a._minimizedDropDownOpened=!0,a._browserBoundsDetection(i)}else a._close()}_handleOverflowChange(){const t=this;if((t._minimized||null===t.dropDownAppendTo&&!t.$mainContainer.hasClass("simple")&&"tree"!==t.mode)&&!(Smart.ListMenu&&t instanceof Smart.ListMenu))return;const i=t.overflow;let a;"horizontal"===t.mode?(a=!0,t.$.mainContainer.scrollLeft=0):(a=!1,t.$.mainContainer.scrollTop=0),"hidden"===i?(t.$mainContainer.removeClass("scroll-buttons-shown"),t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden")):(t.$.scrollButtonNear.disabled=t.disabled,t.$.scrollButtonFar.disabled=t.disabled,"auto"===i?(t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden"),t._checkOverflow(t.$.mainContainer,a,[t.$.scrollButtonNear,t.$.scrollButtonFar])):(t.$mainContainer.addClass("scroll-buttons-shown"),t.$mainContainer.removeClass("one-button-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),t._updateScrollButtonVisibility(t.$.mainContainer,a,[t.$.scrollButtonNear,t.$.scrollButtonFar])))}_hideMainContainerScrollButtons(){const t=this;t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden"),t.$mainContainer.removeClass("scroll-buttons-shown"),t.$mainContainer.removeClass("one-button-shown")}_hoverViaKeyboard(t){if(t){const i=this;t.$.addClass("focus"),t.setAttribute("focus",""),i._focusedViaKeyboard=t,i._ensureVisible(t)}}_isBranchExpanded(t){const i=this;if("tree"!==i.mode)return!0;let a=!0;for(;t.parentItem;)a=a&&t.parentItem.expanded,t=t.parentItem;return a}_isChildEnabled(t){return!(t.disabled||t.templateApplied||t.hidden||t instanceof HTMLDivElement)}_isContainerOpened(t,i){const a=this;return"tree"===a.mode||a._minimized?(a._openedContainers[t]||(a._openedContainers[t]=[]),-1!==a._openedContainers[t].indexOf(i)):a._openedContainers[t]===i}_keydownHandler(t){const i=this,a=t.key;if(document.activeElement!==i||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(a)||i.disabled)return;t.preventDefault();const n=i.mode;if("tree"===n||i._minimized)return void i._keydownHandlerTreeMode(a);const o=i.dropDownPosition,l=-1!==o.indexOf("left"),r="top-left"===o||"top-right"===o,s=i._openedContainers;let d=i.$.mainContainer,m=1,c;for(let a=s.length-1;0<=a;a--)if(void 0!==s[a]){d=s[a],m=d.level,d=d.itemContainer;break}switch(c=d.querySelector("[focus][level=\""+m+"\"]"),a){case"ArrowDown":1===m?"horizontal"!==n||r?"horizontal"!==n&&i._levelOneNavigate("_getFirstEnabledChild",c,d):i._levelOneOpenDropDown(c):i._navigate("_getNextEnabledChild",c,d);break;case"ArrowLeft":l?1===m?"horizontal"===n?i._levelOneNavigate("_getLastEnabledChild",c,d):i._levelOneOpenDropDown(c):c instanceof Smart.MenuItemsGroup?i._selectionHandler({target:c,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",c):i._arrowLeftHandler(m,n,c,d);break;case"ArrowRight":l?1===m?"horizontal"===n&&i._levelOneNavigate("_getFirstEnabledChild",c,d):2===m?i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",c):i._escapeHandler(c,m,d):i._arrowRightHandler(m,n,c,d);break;case"ArrowUp":1===m?"horizontal"===n&&r?i._levelOneOpenDropDown(c):"horizontal"!==n&&i._levelOneNavigate("_getLastEnabledChild",c,d):i._navigate("_getPreviousEnabledChild",c,d);break;case"End":case"Home":{const t="End"===a?i._getLastEnabledChild(d):i._getFirstEnabledChild(d);if(!t||c===t)return;c&&(c.$.removeClass("focus"),c.removeAttribute("focus")),i._hoverViaKeyboard(t);break}case"Enter":c&&i._selectionHandler({target:c,isTrusted:!0});break;case"Escape":1<m?(2===m&&i._positionDetection.removeOverlay(),i._escapeHandler(c,m,d)):"dropDown"===n&&i.opened&&i.close();break;case" ":c&&i._toggleItem(c);}}_keydownHandlerTreeMode(t){function a(t){const i=t.level;return!1===t.disabled&&!0!==t.templateApplied&&(1===i||1<i&&l._isContainerOpened(i,t.parentElement.container)&&0<t.getBoundingClientRect().height)}function i(t){for(let n=t;n<r.length;n++){const t=r[n];if(a(t)){if(s){if(s===t)break;s.$.removeClass("focus"),s.removeAttribute("focus")}l._hoverViaKeyboard(t);break}}}function n(t){for(let n=t;0<=n;n--){const t=r[n];if(a(t)){if(s){if(s===t)break;s.$.removeClass("focus"),s.removeAttribute("focus")}l._hoverViaKeyboard(t);break}}}function o(){1<s.level&&(s.$.removeClass("focus"),s.removeAttribute("focus"),l._hoverViaKeyboard(s.parentItem))}const l=this,r=Array.from(l.$.mainContainer.querySelectorAll("smart-menu-item, smart-menu-items-group")),s=l.$.mainContainer.getElementsByClassName("focus")[0];let d;switch(t){case"ArrowDown":d=s?r.indexOf(s)+1:0,i(d);break;case"ArrowLeft":if(!s)return;if(s instanceof Smart.MenuItem)o();else{if(l._isContainerOpened(s.level+1,s.container))return void l._closeSubContainers(s.level+1,s.container,!0,!0);o()}break;case"ArrowRight":if(!s||s instanceof Smart.MenuItem)return;l._isContainerOpened(s.level+1,s.container)?(s.$.removeClass("focus"),s.removeAttribute("focus"),l._hoverViaKeyboard(l._getFirstEnabledChild(s.itemContainer))):l._selectionHandler({target:s,type:"keydown",isTrusted:!0},s);break;case"ArrowUp":d=s?r.indexOf(s)-1:r.length-1,n(d);break;case"End":n(r.length-1);break;case"Enter":l._minimized&&!l._minimizedDropDownOpened?l._hamburgerIconClickHandler(void 0,l.$.mainContainer):s&&l._selectionHandler({target:s,type:"keydown",isTrusted:!0});break;case"Escape":l._minimized&&l._minimizedDropDownOpened&&l._close();break;case"Home":i(0);break;case" ":s&&l._toggleItem(s);}}_levelOneNavigate(t,i,a){const n=this;if(!i){const i=n[t](a);i&&n._hoverViaKeyboard(i)}else"_getLastEnabledChild"===t?n._navigate("_getPreviousEnabledChild",i,a):n._navigate("_getNextEnabledChild",i,a)}_levelOneNavigateFromLowerLevel(t,i){const a=this,n=a[t](a._openedContainers[2].menuItemsGroup);n&&(i&&(i.$.removeClass("focus"),i.removeAttribute("focus")),a._closeSubContainers(2),n instanceof Smart.MenuItemsGroup?a._selectionHandler({target:n,isTrusted:!0}):a._hoverViaKeyboard(n))}_levelOneOpenDropDown(t){t&&t instanceof Smart.MenuItemsGroup&&this._selectionHandler({target:t,isTrusted:!0})}_mainContainerHandler(t){const i=this;if(i._minimized&&null!==i.dropDownAppendTo)switch(t.type){case"click":i._selectionHandler(t);break;case"mouseleave":i._mouseleaveHandler(t);break;case"mouseout":i._mouseoutMouseoverHandler(t);break;case"mouseover":i._mouseoutMouseoverHandler(t);}}_menuItemSelectionHandler(t,i){function a(){n.enableShadowDOM&&(n.shadowRoot.activeElement||document.activeElement)!==n&&null!==n.dropDownAppendTo&&"click"===i.type&&!n.shadowRoot.contains(t)?n.focus():document.activeElement!==n&&null!==n.dropDownAppendTo&&"click"===i.type&&!n.contains(t)&&n.focus()}const n=this;return t.disabled||t.templateApplied?void a():!n._toggleItem(t)&&(n.$.fireEvent("itemClick",{item:t,label:t.label,value:t.value}),"tree"!==n.mode&&(n._close(),"dropDown"===n.mode))?(n._ripple(t,i),void n.close()):void(n._ripple(t,i),a())}_menuItemsGroupSelectionHandler(t,i,a){const n=this,o=n.mode,l=t.container,r=l.level,s="tree"!==o&&!n._minimized;if(n._treeAnimationInProgress!==l&&(n._discardKeyboardHover(),document.activeElement===n||null===n.dropDownAppendTo||"click"!==i.type||n.contains(i.target)||n.focus(),"click"!==i.type||(i.target.classList.contains("smart-"+n._element+"-items-group-arrow")||!n._toggleItem(t))&&("mouseenter"!==n.selectionMode||"tree"===o||n._minimized))){let d=n.hasAnimation;if(n._isContainerOpened(r,l))n._closeSubContainers(r,l,!0,!1!==a),s&&t.hasAttribute("focus")&&(n._focusedViaKeyboard=t);else{const m=n.$.fireEvent("expanding",{item:t,label:t.label,path:t.path,value:t.value,children:t.itemContainer.children});if(m.defaultPrevented)return;if(n._positionDetection.placeOverlay(),s&&n._closeSubContainers(r),d&&!s&&("expand"!==i.type&&(n._ensureVisibleOnTransitionend=t),n._expandSection(l)),n._edgeMacFF&&2===r&&s&&l.$.removeClass("not-in-view"),l.$.removeClass("smart-visibility-hidden"),s||"expand"!==i.type){if(!s){const i=n.$.mainContainer.getElementsByClassName("focus")[0];i&&(i.$.removeClass("focus"),i.removeAttribute("focus")),n._focusedViaKeyboard=t}else"keydown"===i.type&&(n._focusedViaKeyboard=t);t.$.addClass("focus"),t.setAttribute("focus","")}if(t.$.addClass("smart-"+n._element+"-items-group-opened"),t.$.addClass("smart-"+n._element+"-items-group-expanded"),n._addOpenedContainer(r,l),s){if(n._ensureVisible(t),1<t.level&&t.parentElement.dropDownHeightSet){const i=n.dropDownPosition,a=t.getBoundingClientRect().top-t.parentElement.container.getBoundingClientRect().top;l.style.top=-1!==i.indexOf("bottom")||"auto"===i?a+"px":-1===i.indexOf("top")?a+t.offsetHeight/2+"px":a+t.offsetHeight+"px"}l.itemContainer.checkOverflow&&l.itemContainer.dropDownHeightSet&&(n._checkOverflow(l.itemContainer,!1,[l.children[0],l.children[2]]),delete l.itemContainer.checkOverflow)}n._positionExternalContainer(l,t),"tree"===o||n._minimized?!d&&n._browserBoundsDetection(n.$.mainContainer):n._browserBoundsDetection(l),void 0===i.type&&n._hoverViaKeyboard(n._getFirstEnabledChild(t.itemContainer)),!1!==a&&n.$.fireEvent("expand",{item:t,label:t.label,path:t.path,value:t.value,children:t.itemContainer.children})}s?n._ripple(t,i):"tree"===o&&!d&&(n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]),!n._minimized&&"expand"!==i.type&&n._ensureVisible(t))}}_mouseenterHandler(){const t=this;t.autoFocusOnMouseenter&&document.activeElement!==t&&t.focus()}_mouseleaveHandler(t){const i=this;if("mouseenter"===i.selectionMode&&"tree"!==i.mode&&!i._minimized){if(null!==i.dropDownAppendTo&&t.relatedTarget)if(i.contains(t.target)){const a=t.relatedTarget.closest(".smart-menu-drop-down");if(a&&a.ownerElement===i)return}else if(i.contains(t.relatedTarget))return;i._isElementHovered=!1,i._autoCloseTimeout=setTimeout(function(){const t=i.context;clearTimeout(i._autoCloseTimeout),i._isElementHovered||(i.context=i,i._close(),i.context=t)},i.autoCloseDelay)}}_mouseoutMouseoverHandler(t){const i=this;if(i.disabled||i.displayLoadingIndicator)return;let a=t.target.closest("smart-menu-item")||t.target.closest("smart-menu-items-group");if((i.enableShadowDOM&&(a=t.composedPath()[0].closest("smart-menu-item")||t.composedPath()[0].closest("smart-menu-items-group")||a),"mouseover"===t.type&&(i._isElementHovered=!0),!(null===a||a.disabled||a.templateApplied))&&!(("tree"===i.mode||i._minimized)&&a.hasAttribute("focus")&&t.relatedTarget&&(t.target.parentElement===t.relatedTarget||t.relatedTarget.parentElement===t.target)))if(i._discardKeyboardHover(!1),"mouseover"===t.type){"mouseenter"!==i.selectionMode||"tree"===i.mode||i._minimized||(a instanceof Smart.MenuItemsGroup&&!a.hasAttribute("hover")?i._selectionHandler(t,a):a instanceof Smart.MenuItem&&i._closeSubContainers(a.level+1));const n=t.target.closest(".smart-menu-drop-down");n&&(!n||a.contains(n))||(a.$.addClass("hover"),a.setAttribute("hover",""),i._discardKeyboardHover(!0))}else{if("tree"!==i.mode&&!i._minimized&&("mouseenter"===i.selectionMode&&t.relatedTarget===i.$.mainContainer&&i._close(),a instanceof Smart.MenuItemsGroup&&a.container&&!a.container.$.hasClass("smart-visibility-hidden")))return;a.$.removeClass("hover"),a.removeAttribute("hover")}}_moveDropDownsToExternalContainer(){const t=this;for(let a=0;a<t._containersInBody.length;a++){const i=t._containersInBody[a];t._dropDownParent.appendChild(i),i.$.listen("click",t._selectionHandler.bind(t)),i.$.listen("mouseleave",t._mouseleaveHandler.bind(t)),i.$.listen("mouseout",t._mouseoutMouseoverHandler.bind(t)),i.$.listen("mouseover",t._mouseoutMouseoverHandler.bind(t))}for(let a=0;a<t._containers.length;a++){const i=t._containers[a];i.ownerElement=t,""!==t.theme&&i.classList.add(t.theme),i.classList.add("smart-drop-down-repositioned"),i.setAttribute("mode",t.mode),i.setAttribute("drop-down-position",t.dropDownPosition),t.checkboxes&&i.setAttribute("checkboxes","")}}_moveDropDownsToMenu(){const t=this;for(let a=0;a<t._containersInBody.length;a++){const i=t._containersInBody[a];i.$.unlisten("click"),i.$.unlisten("mouseleave"),i.$.unlisten("mouseout"),i.$.unlisten("mouseover"),i.style.left="",i.style.right="",i.style.top="",i.style.marginLeft="",i.style.marginTop="",i.menuItemsGroup.appendChild(i)}for(let a=0;a<t._containers.length;a++){const i=t._containers[a];""!==t.theme&&i.classList.remove(t.theme),i.classList.remove("smart-drop-down-repositioned"),i.removeAttribute("mode"),i.removeAttribute("drop-down-position"),i.removeAttribute("checkboxes")}}_navigate(t,i,a){const n=this;if(!i)return void("_getNextEnabledChild"===t?n._hoverViaKeyboard(n._getFirstEnabledChild(a)):n._hoverViaKeyboard(n._getLastEnabledChild(a)));const o=n[t](i);o&&(i.$.removeClass("focus"),i.removeAttribute("focus"),n._hoverViaKeyboard(o))}_positionExternalContainer(t,i){const a=this;if(null===a.dropDownAppendTo||2!==t.level)return;const n=a.dropDownPosition,o=a.mode,l=i.getBoundingClientRect(),r=a._positionDetection.getDropDownOffset(),s=l.top+r.y,d=l.bottom+r.y;let m=l.left+r.x;t.style.left="",t.style.right="",t.style.top="",-1===n.indexOf("left")?"horizontal"===o||"overlay-right"===n?t.style.left=m+"px":t.style.left=m+l.width+"px":(m-=t.offsetWidth,("horizontal"===o||"overlay-left"===n)&&(m+=l.width),t.style.left=m+"px",t.style.right="initial");"bottom-right"===n||"bottom-left"===n||"auto"===n?t.style.top="horizontal"===o?d+"px":s+"px":"top-right"===n||"top-left"===n?t.style.top="horizontal"===o?s-t.offsetHeight+"px":d-t.offsetHeight+"px":"overlay-right"===n||"overlay-left"===n?t.style.top=s+l.height/2+"px":void 0}_processDataSource(){function t(n,i){let o;if(Array.isArray(n.items)&&0<n.items.length){o=document.createElement("smart-"+a._element+"-items-group"),!0===n.checkable&&o.set("checkable",!0),("checkbox"===n.checkMode||"radioButton"===n.checkMode)&&o.set("checkMode",n.checkMode),n.dropDownHeight&&o.set("dropDownHeight",n.dropDownHeight),!0===n.expanded&&"tree"===a.mode&&o.set("expanded",!0);for(let a=0;a<n.items.length;a++)t(n.items[a],o)}else o=document.createElement("smart-"+a._element+"-item"),void 0!==n.shortcut&&o.set("shortcut",n.shortcut),n.customAttribute&&o.setAttribute(n.customAttribute,"");!0===n.checked&&o.set("checked",!0),!0===n.disabled&&o.set("disabled",!0),n.label!==void 0&&o.set("label",n.label),!0===n.selected&&o.set("selected",!0),!0===n.separator&&o.set("separator",!0),n.value!==void 0&&o.set("value",n.value),i.appendChild(o)}const a=this,n=a.dataSource;a.$.mainContainer.innerHTML="";for(let o=0;o<n.length;o++){const i=n[o];t(i,a.$.mainContainer)}a._processHTML(a.$.mainContainer,1)}_processHTML(t,a,i){const n=this;let o,l;1<a&&(o=n._createMenuItemsGroupContainer(t,a),l=o.itemContainer,(t.expanded||t.hasAttribute("expanded"))&&"tree"===n.mode?n._menuItemsGroupsToExpand.push(t):(t.set("expanded",!1),t.removeAttribute("expanded")));const r=Array.from(t.children),s=[],d=document.createDocumentFragment();let m=0;for(let o=0;o<r.length;o++){if(1<a&&0==o){m++;continue}const i=r[o];if(!(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)){i.parentElement.removeChild(i),m++;continue}n._createItemHTMLStructure(i,a,t,o-m),(i.checked||i.hasAttribute("checked"))&&(i.disabled||i.hasAttribute("disabled")||i.templateApplied?(i.set("checked",!1),i.removeAttribute("checked")):s.push(i)),1<a&&d.appendChild(i),i instanceof Smart.MenuItemsGroup&&n._processHTML(i,a+1)}if(1<a){if(l.appendChild(d),t.container=o,t.itemContainer=l,t instanceof Smart.MenuItemsGroup){const i=document.createElement("div");i.className="smart-"+n._element+"-items-group-arrow",n._setArrowDirection(i,a),t.firstElementChild.appendChild(i)}n._containers.push(o),2==a&&(n._containersInBody.push(o),n._edgeMacFF&&o.addEventListener("transitionend",function(t){t.target===this&&this.$.hasClass("smart-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===n.dropDownAppendTo||"tree"===n.mode||n._minimized?t.appendChild(o):(o.ownerElement=n,o.classList.add("smart-drop-down-repositioned"),o.setAttribute("mode",n.mode),o.setAttribute("drop-down-position",n.dropDownPosition),n.checkboxes&&o.setAttribute("checkboxes",""),""!==n.theme&&o.$.addClass(n.theme),o.setAttribute("animation",n.animation),2===a?(n._dropDownParent.appendChild(o),o.$.listen("click",n._selectionHandler.bind(n)),o.$.listen("mouseleave",n._mouseleaveHandler.bind(n)),o.$.listen("mouseout",n._mouseoutMouseoverHandler.bind(n)),o.$.listen("mouseover",n._mouseoutMouseoverHandler.bind(n))):t.appendChild(o))}n._validateRadioButtonSelection(t,a,s),n._sortItems&&!1!==i&&n._sortItems(t)}_processUList(){const t=this,i=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),a=new RegExp(/<\/ul>(.|\n)*?<\/li>/);let n=t.$.mainContainer.firstElementChild.innerHTML;for(n=n.replace(/\r?\n|\r/g,""),n=n.replace(/<li(.|\n)*?>/g,"<li>"),n=n.replace(/<li><\/li>/g,"<li> </li>"),n=n.replace(/<ul(.|\n)*?>/g,"<ul>");i.test(n);){const a=i.exec(n),o="<smart-"+t._element+"-items-group>"+a[0].slice(4,a[0].length-4);n=n.replace(a[0],o)}for(;a.test(n);){const i=a.exec(n),o="</smart-"+t._element+"-items-group>";n=n.replace(i[0],o)}n=n.replace(/li>/g,"smart-"+t._element+"-item>"),t.$.mainContainer.innerHTML=n}_refreshContainersArrays(){const t=this;for(let a=t._containers.length-1;0<=a;a--){const i=t._containers[a];if(!document.body.contains(i)){t._containers.splice(a,1);const n=t._containersFixedHeight.indexOf(i);-1<n&&(t._containersFixedHeight.splice(n,1),t._additionalScrollButtons.splice(n,1))}}t._checkContainersLength()}_refreshItemPaths(t,a,n,o){const l=this;let i=a?t:t.container.itemContainer;const r=n?n(t):i.children;for(let s=0;s<r.length;s++){const i=r[s];let d;o&&(i.originalIndex=s),d=a?""+s:t.path+"."+s,i.path=d,l._menuItems[d]=i,i instanceof Smart.MenuItemsGroup&&l._refreshItemPaths(i,void 0,n,o)}}_removeContainerFixedHeight(){const t=this;for(let a=0;a<t._containersFixedHeight.length;a++){const i=t._containersFixedHeight[a];i.style.height="",i.itemContainer.$.removeClass("scroll-buttons-shown"),i.itemContainer.$.removeClass("one-button-shown"),i.children[0].$.addClass("smart-hidden"),i.children[2].$.addClass("smart-hidden"),i.itemContainer.checkOverflow=!0}}_removeContainersInBody(){const t=this;if(null!==t.dropDownAppendTo&&!t._minimized)for(let a=0;a<t._containersInBody.length;a++)t._dropDownParent.removeChild(t._containersInBody[a])}_reparentMenu(t,i){const a=this;if("dropDown"===a.mode&&(null!==a._dropDownParent||t)&&a._dropDownParent!==a.parentElement){if(!t||null===i)a._positionRelativeTo=a.parentElement;else if(null===a._dropDownParent)return a._positionRelativeTo.appendChild(a),void(a._positionRelativeTo=null);a._dropDownParent.appendChild(a)}}_resizeHandler(){const t=this,i=t.minimizeWidth,a=t.mode;if(null!==i&&"dropDown"!==a){if(t.offsetWidth<=i&&!t._minimized)return void t.minimize();t.offsetWidth>i&&t.maximize()}(null!==t.dropDownAppendTo||"tree"===a)&&t._checkOverflow(t.$.mainContainer,"horizontal"===a,[t.$.scrollButtonNear,t.$.scrollButtonFar])}_ripple(t,i){const a=this;if(a.hasRippleAnimation&&"click"===i.type)return Smart.Utilities.Animation.Ripple.animate(t,i.pageX,i.pageY),!0}_scroll(t){if(!t.closest("[template-applied]")){const i=this,a=i.mode,n=t.classList.contains("smart-scroll-button-near")?-1:1;if(t.parentElement===i.$.container){const t=i.$.mainContainer;"tree"!==a&&i._closeSubContainers(2),"horizontal"===i.mode?(t.scrollLeft+=10*n,i._updateScrollButtonVisibility(t,!0,[i.$.scrollButtonNear,i.$.scrollButtonFar])):(t.scrollTop+=10*n,i._updateScrollButtonVisibility(t,!1,[i.$.scrollButtonNear,i.$.scrollButtonFar]))}else{const a=t.parentElement,o=a.itemContainer;i._closeSubContainers(a.level+1),o.scrollTop+=10*n,i._updateScrollButtonVisibility(o,!1,[a.children[0],a.children[2]])}}}_selectionHandler(t,i){const a=this,n=t.target;if(n.closest("[template-applied]")&&t.stopPropagation(),!(a.disabled||a.displayLoadingIndicator)){if(void 0===i){if("click"===t.type){const i=n.closest("smart-repeat-button");if(i)return void a._scroll(i,t)}if(!t.isTrusted)return;const o=n.closest("smart-"+a._element+"-item");if(o)return void a._menuItemSelectionHandler(o,t);if(i=n.closest("smart-"+a._element+"-items-group"),i&&(n===i.container||n===i.container.firstElementChild))return}i&&!i.disabled&&a._menuItemsGroupSelectionHandler(i,t)}}_setArrowDirection(t,i){const a=this,n=a.mode;return"tree"===n||a._minimized?void(t.className="smart-"+a._element+"-items-group-arrow down smart-arrow-down"):void("overlay"===a.dropDownPosition.slice(0,7)?t.className="smart-menu-items-group-arrow minus":2===i&&"horizontal"===n?"top"===a.dropDownPosition.slice(0,3)?t.className="smart-menu-items-group-arrow up smart-arrow-up":t.className="smart-menu-items-group-arrow down smart-arrow-down":t.className="smart-menu-items-group-arrow right smart-arrow-right")}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return void t.removeAttribute("tabindex");const i=t.getAttribute("tabindex");(null===i||0>i)&&t.setAttribute("tabindex",0)}_setLabel(t,i,a,n){const o=document.getElementById(t);if(null!==o&&"template"===o.tagName.toLowerCase()){const l=document.importNode(o.content,!0);if(a instanceof Smart.MenuItem)i.appendChild(l),n&&(a.setAttribute("template-applied",""),a.templateApplied=!0);else if(Smart.ListMenu&&this instanceof Smart.ListMenu){const t=new RegExp(/{{title="(.*)"}}/);for(let n=0;n<l.childNodes.length;n++)t.test(l.childNodes[n].innerHTML)?(a.titleLabel=t.exec(l.childNodes[n].innerHTML)[1],l.childNodes[n].innerHTML=l.childNodes[n].innerHTML.replace(t,"")):t.test(l.childNodes[n].textContent)&&(a.titleLabel=t.exec(l.childNodes[n].textContent)[1],l.childNodes[n].textContent=l.childNodes[n].textContent.replace(t,""));a.titleLabel===void 0&&(a.titleLabel=l.textContent),i.appendChild(l)}else i.innerHTML=t,a.titleLabel=t}else i.innerHTML=t,a instanceof Smart.MenuItemsGroup&&(a.titleLabel=t)}_toggleItem(t){const i=this;if(i.checkboxes){const a=1===t.level?i:t.parentItem;if(a.checkable)return"checkbox"===a.checkMode?(t.set("checked",!t.checked),i.$.fireEvent("itemCheckChange",{item:t,label:t.label,value:t.value,checked:t.checked})):!t.checked&&(t.set("checked",!0),i._uncheckSiblings(t),i.$.fireEvent("itemCheckChange",{item:t,label:t.label,value:t.value,checked:!0})),!0}return!1}_transitionendHandler(t){const i=this;"dropDown"===i.mode&&i.opened&&t.target===i&&document.activeElement!==i&&!i._noAutoFocus&&i.focus()}_transitionendHandlerCollapse(){let t,i;1===arguments.length?(i=this,t=i.menuItemsGroup.menu):(t=arguments[0],i=arguments[1]),i.menuItemsGroup.$.removeClass("smart-"+t._element+"-items-group-expanded"),i.removeEventListener("transitionend",t._transitionendHandlerCollapse),i.style.height=null,i.$.addClass("smart-visibility-hidden"),t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._minimized&&t._browserBoundsDetection(t.$.mainContainer),delete t._treeAnimationInProgress}_transitionendHandlerExpand(){let t,i;1===arguments.length?(i=this,t=i.menuItemsGroup.menu):(t=arguments[0],i=arguments[1]),i.removeEventListener("transitionend",t._transitionendHandlerExpand),i.style.height=null,t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),t._minimized&&t._browserBoundsDetection(t.$.mainContainer),t._ensureVisibleOnTransitionend&&(t._ensureVisible(t._ensureVisibleOnTransitionend),delete t._ensureVisibleOnTransitionend),delete t._treeAnimationInProgress}_uncheckSiblings(t){for(let a=0;a<t.parentElement.childElementCount;a++){const i=t.parentElement.children[a];i!==t&&i.checked&&(i.set("checked",!1),this.$.fireEvent("itemCheckChange",{item:i,label:i.label,value:i.value,checked:!1}))}}_unsortItems(t,a){const n=this;let o=[],l,r;t===n.$.mainContainer?(r=t,l=t.children):(r=t.container.firstElementChild,l=r.children);for(let r=0;r<l.length;r++){const t=l[r];o[t.originalIndex]=t,t instanceof Smart.MenuItemsGroup&&a===void 0&&n._unsortItems(t)}if(!(2>o.length))for(let t=0;t<o.length;t++)r.appendChild(o[t])}_updateScrollButtonVisibility(t,i,a){var n=Math.round;const o=this,l=o.overflow,r=t===o.$.mainContainer;if(r&&"hidden"===l)return;let s=!0,d=!0,m,c,u;if(i?(m="scrollLeft",c="offsetWidth",u="scrollWidth"):(m="scrollTop",c="offsetHeight",u="scrollHeight"),0===n(t[m])&&(s=!1),n(t[c]+t[m])>=n(t[u])&&(d=!1),!r||"auto"===l){if(s&&d)return a[0].$.removeClass("smart-hidden"),a[1].$.removeClass("smart-hidden"),void t.classList.remove("one-button-shown");s?a[0].$.removeClass("smart-hidden"):a[0].$.addClass("smart-hidden"),d?a[1].$.removeClass("smart-hidden"):a[1].$.addClass("smart-hidden"),t.classList.add("one-button-shown")}else"scroll"!==l||o.disabled||(a[0].disabled=!s,a[1].disabled=!d)}_validateRadioButtonSelection(t,i,a){const n=this;if(n.checkboxes){let o,l;if(1===i?(o=n,l=n.$.mainContainer):(o=t,l=t.itemContainer),"radioButton"===o.checkMode&&o.checkable)if(1<a.length)for(let t=a.length-2;0<=t;t--)a[t].set("checked",!1);else if(0===a.length){const t=n._getFirstEnabledChild(l);t&&t.set("checked",!0)}}}_wheelHandler(t){const i=this;if(!i.enableMouseWheelAction||i._wheelInProgress||i.disabled||i.displayLoadingIndicator||i.$.mainContainer.offsetHeight===i.$.mainContainer.scrollHeight)return void(i._wheelInProgress&&t.preventDefault());t.preventDefault(),i._dragStartDetails={startY:t.pageY,x:t.pageX,y:t.pageY,startTime:Date.now(),target:t.target},i._wheelInProgress=!0;const a={pageY:t.pageY+50*(0<t.deltaY?-1:1)};i._endSwiping(a,i._dragStartDetails.startTime+100,!0)}}),Smart("smart-list-menu",class extends Smart.Menu{static get properties(){return{displayLoadingIndicator:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","auto"],type:"string"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"}}}static get listeners(){return{resize:"_resizeHandler","backButton.click":"_backButtonClickHandler","filterInput.keyup":"_filterInputKeyupHandler","mainContainer.down":"_mainContainerDownHandler","mainContainer.move":"_mainContainerMoveHandler","mainContainer.swipeleft":"_mainContainerSwipeHandler","mainContainer.swiperight":"_mainContainerSwipeHandler","view.click":"_viewHandler","view.mouseout":"_viewHandler","view.mouseover":"_viewHandler","view.transitionend":"_viewHandler","view.wheel":"_wheelHandler"}}template(){return`<div id="container">
                    <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden">
                        <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                        <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                        <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden"></div>
                    </div>
                    <div id="view" class="smart-list-menu-view">
                        <div id="header" class="smart-header smart-hidden">
                            <smart-button id="backButton" animation="[[animation]]" disabled="[[disabled]]">
                                <div class="smart-arrow smart-arrow-left"></div>
                            </smart-button>
                            <div id="title" class="smart-title"></div>
                        </div>
                        <div class="smart-list-menu-filter-input-container smart-hidden" id="filterInputContainer">
                            <input id="filterInput" class="smart-filter-input" disabled="[[disabled]]" placeholder="[[filterInputPlaceholder]]" type="text" />
                        </div>
                        <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable>
                            <div id="arrowNear" class="smart-arrow smart-arrow-up"></div>
                        </smart-repeat-button>
                        <div id="mainContainer" class="smart-menu-main-container">
                            <content></content>
                        </div>
                        <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable>
                            <div id="arrowFar" class="smart-arrow smart-arrow-down"></div>
                        </smart-repeat-button>
                        <div id="loadingIndicatorContainer" class="smart-loader-container smart-hidden">
                            <span id="loadingIndicator" class="smart-loader"></span>
                            <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                        </div>
                    </div>
                </div>`}attached(){const t=this;super.attached(),t.isCompleted&&null!==t.dropDownAppendTo&&t._minimized&&t._dropDownParent.appendChild(t.$.view)}detached(){const t=this;super.detached(),t._close(),null!==t.dropDownAppendTo&&t._minimized&&t._dropDownParent.removeChild(t.$.view)}addItem(t,i){const a=this;if(!(t instanceof Smart.MenuItem||t instanceof Smart.MenuItemsGroup))return;let n,o,l,r;if(void 0===i)i=a.$.mainContainer,n=void 0,o=1,l=i,r=a._topLevelFilter;else{if("string"==typeof i&&(i=a.getItem(i)),void 0===i||!(i instanceof Smart.MenuItemsGroup&&(a.contains(i)||i.closest(".smart-list-menu-view")===a.$.view)))return;n=i,o=i.level+1,l=i.itemContainer,r=i.filter}if(a._createItemHTMLStructure(t,o,i,a._getCurrentViewItems(n).length,0),t instanceof Smart.MenuItemsGroup&&a._processHTML(t,o+1),a._view===i||i.$.hasClass("smart-hidden")||!(0<i.offsetHeight)||!(0<i.offsetWidth)||(a._view||a.$.mainContainer.contains(i))&&(!a._view||a._view.contains(i))||t.$.addClass("smart-hidden"),a.grouped){const t=Array.from(l.children);for(let a=t.length-1;0<=a;a--)t[a].$.hasClass("smart-list-menu-group-label")&&l.removeChild(t[a]);a._unsortItems(i,!0)}if(l.appendChild(t),a.grouped){const t=a._view;a._applyGrouping(i,!0),a._home(),t&&a.changePage(t.path)}a.filterable&&void 0!==r&&""!==r&&null===a._findItem(t,r)&&(t.$.addClass("smart-hidden"),t.hidden=!0),a._toggleFilterInputGroupLabelVisibility(),a._checkOverflow()}back(t){const i=this,a=i.animation,n=!1===t&&"none"!==a;n&&(i.animation="none"),i._backButtonClickHandler(),n&&(i.animation=a)}changePage(t){const a=this,i=a.getItem(t);if(void 0===i||i instanceof Smart.MenuItem||i.hidden)return;const n=[i];let o=i.parentItem,l=0;for(a._discardKeyboardHover();o;)n.unshift(o),o=o.parentItem;if(a._view){const t=n.indexOf(a._view);-1===t?a._home():l=t+1}for(let o=l;o<n.length&&!(n[o].disabled||n[o].hidden);o++)a._menuItemsGroupSelectionHandler(n[o],{type:"expand"},!0)}maximize(){const t=this;t._minimized&&(t._positionDetection.removeOverlay(),t._minimized=!1,t._minimizedDropDownOpened&&(t.$hamburgerIcon.removeClass("smart-close-button"),t._minimizedDropDownOpened=!1),null!==t.dropDownAppendTo&&t._appendMinimizedContainerToMenu(t.$.view,null),t.$view.removeClass("smart-visibility-hidden"),t.$view.removeClass("smart-list-menu-view-minimized"),t.$hamburgerIcon.addClass("smart-hidden"),t.removeAttribute("minimized"),t.$.mainContainer.scrollTop=0,t._checkOverflow())}minimize(){const t=this;t._minimized||(t.$view.addClass("smart-visibility-hidden"),t._edgeMacFF&&t.$view.addClass("not-in-view"),t.$hamburgerIcon.removeClass("smart-hidden"),setTimeout(function(){null!==t.dropDownAppendTo&&t._appendMinimizedContainerToExternalElement(t.$.view),t.$view.addClass("smart-list-menu-view-minimized"),t.$.mainContainer.scrollTop=0,t._checkOverflow()},0),t._minimized=!0,t.setAttribute("minimized",""))}removeItem(t){const i=this;if("string"==typeof t&&(t=i.getItem(t)),void 0!==t&&(t instanceof Smart.MenuItem||t instanceof Smart.MenuItemsGroup)&&(i.contains(t)||t.closest(".smart-list-menu-view")===i.$.view)){const a=t.parentElement;for(;t.contains(i._view);)i._backButtonClickHandler(void 0,!0);const n=i._view;i.grouped&&(i._home(),i._discardGrouping()),a.removeChild(t),i._menuItems={},i._refreshItemPaths(i.$.mainContainer,!0,function(t){return i._getCurrentViewItems(t===i.$.mainContainer?void 0:t)}),i.grouped&&(i._applyGrouping(i.$.mainContainer),n&&i.changePage(n.path)),i._toggleFilterInputGroupLabelVisibility(),i._checkOverflow()}}propertyChangedHandler(t,i,a){if("disabled"===t||"dropDownOverlay"===t||"minimizeIconTemplate"===t||"minimizeWidth"===t||"overflow"===t||"unfocusable"===t)return void super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"animation":n.$.view.setAttribute("animation",a);break;case"checkable":case"checkboxes":n._minimized&&null!==n.dropDownAppendTo&&(a?n.$.view.setAttribute(t,""):n.$.view.removeAttribute(t));break;case"checkMode":n._changeToRadioButtonMode(a,n.$.mainContainer),n._minimized&&null!==n.dropDownAppendTo&&n.$.view.setAttribute("check-mode",a);break;case"dataSource":n.$header.addClass("smart-hidden"),n.$mainContainer.removeClass("header-shown"),n._view=void 0,n._menuItems={},n._topLevelFilter="",n._processDataSource(),n._toggleFilterInputGroupLabelVisibility(),n._checkOverflow();break;case"displayLoadingIndicator":if(a){const t=n.$.mainContainer.querySelector("[hover]");t&&t.removeAttribute("hover"),n._discardKeyboardHover(),n.$loadingIndicatorContainer.removeClass("smart-hidden")}else n.$loadingIndicatorContainer.addClass("smart-hidden");break;case"dropDownAppendTo":{const t=n._dropDownParent;if(n._positionDetection.getDropDownParent(),n._dropDownParent===t||!n._minimized)return;n._close(),null===a?n._appendMinimizedContainerToMenu(n.$.view,null):n._appendMinimizedContainerToExternalElement(n.$.view),n.$.mainContainer.scrollTop=0,n._checkOverflow();break}case"dropDownPosition":{n._close(),n._minimized&&null!==n.dropDownAppendTo&&n.$.view.setAttribute("drop-down-position",a);break}case"filterable":if(n._toggleFilterInputGroupLabelVisibility(!0),!1===a){""!==n._topLevelFilter&&n._applyFilter("");for(let t=n._filteredLowerLevelGroups.length-1;0<=t;t--)n._applyFilter("",n._filteredLowerLevelGroups[t])}n._checkOverflow();break;case"filterMode":if(!n.filterable)return;""!==n._topLevelFilter&&n._applyFilter(n._topLevelFilter);for(let t=n._filteredLowerLevelGroups.length-1;0<=t;t--)n._applyFilter(n._filteredLowerLevelGroups[t].filter,n._filteredLowerLevelGroups[t]);break;case"grouped":n._home(),a?n._applyGrouping(n.$.mainContainer):n._discardGrouping(),n._toggleFilterInputGroupLabelVisibility(!1,!0),n._checkOverflow();break;case"loadingIndicatorPosition":null!==n.dropDownAppendTo&&n._minimized&&n.$.view.setAttribute("loading-indicator-position",a),"center"===a?n.$loadingIndicatorPlaceHolder.addClass("smart-hidden"):n.$loadingIndicatorPlaceHolder.removeClass("smart-hidden");break;case"theme":super.propertyChangedHandler(t,i,a),null!==n.dropDownAppendTo&&n._minimized&&(""!==i&&n.$view.removeClass(i),a&&n.$view.addClass(a));}}_appendGroupLabels(t,a){for(let n=0;n<t.length;n++){const i=document.createElement("div");i.$=Smart.Utilities.Extend(i),i.className="smart-list-menu-group-label",i.innerHTML=t[n],i.groupChildren=a[n],a[n][0].parentElement.insertBefore(i,a[n][0]);for(let t=0;t<a[n].length;t++)a[n][t].groupLabel=i}}_applyFilter(t,a){const n=this,o=n._getCurrentViewItems(a);for(let l=0;l<o.length;l++){const i=n._findItem(o[l],t);i&&i.hidden?(i.hidden=!1,(a===n._view||n._view!==void 0&&a!==void 0&&!a.contains(n._view)||n._view===void 0)&&i.$.removeClass("smart-hidden")):!i&&(o[l].hidden=!0,o[l].$.addClass("smart-hidden"))}if(a){a.filter=t;const i=n._filteredLowerLevelGroups.indexOf(a);""===t?-1!==i&&n._filteredLowerLevelGroups.splice(i,1):-1===i&&n._filteredLowerLevelGroups.push(a)}else n._topLevelFilter=t}_backButtonClickHandler(t,i){const a=this,n=a._view;if(t&&t.stopPropagation(),!n||a.disabled&&t||a.displayLoadingIndicator||a._inTransition)return;let o=a.hasAnimation,l=a.animation,r=!1;o&&i&&(o=!1,r=!0,a.animation="none"),a._discardKeyboardHover(),a.$scrollButtonNear.addClass("smart-hidden"),a.$scrollButtonFar.addClass("smart-hidden"),a.$mainContainer.removeClass("scroll-buttons-shown"),n.firstElementChild.classList.remove("smart-hidden"),o?(a._inTransition=!0,n.container.$.addClass("no-transition"),n.container.$.addClass("smart-hidden"),n.$.addClass("right"),n.$.removeClass("right"),n.container.$.removeClass("no-transition")):(n.$.removeClass("smart-menu-items-group-opened"),n.container.$.addClass("smart-hidden")),a._showHideMenuItemsGroupSiblings(n,"removeClass",o),o?setTimeout(function(){n.container.style.top=n.parentElement.getBoundingClientRect().top-n.getBoundingClientRect().top+"px"},0):r&&(a.animation=l),1===n.level?(a.$header.addClass("smart-hidden"),a.$mainContainer.removeClass("header-shown"),a._view=void 0):(a.$.title.innerHTML=n.parentItem.titleLabel,a._view=n.parentItem),a._toggleFilterInputGroupLabelVisibility(),a.$.mainContainer.scrollTop=0,o||a._checkOverflow(),t&&a.focus()}_bounceBottom(t){function i(){o.scrollTop-=5,o.scrollTop>t?window.requestAnimationFrame(i):n.$mainContainer.removeClass("bounce-bottom")}function a(){o.scrollTop+=5,o.scrollTop===o.scrollHeight-o.offsetHeight?window.requestAnimationFrame(i):window.requestAnimationFrame(a)}const n=this,o=n.$.mainContainer;n.$mainContainer.addClass("bounce-bottom"),window.requestAnimationFrame(a)}_bounceTop(){function t(){n.scrollTop-=5,0<n.scrollTop?window.requestAnimationFrame(t):window.requestAnimationFrame(i)}function i(){n.scrollTop+=5,50===n.scrollTop?(n.scrollTop=0,a.$mainContainer.removeClass("bounce-top")):window.requestAnimationFrame(i)}const a=this,n=a.$.mainContainer;a.$mainContainer.addClass("bounce-top"),window.requestAnimationFrame(t)}_checkOverflow(){var t=Math.round;const i=this,a=i.overflow;if("hidden"!==a){const n=t(i.$.mainContainer.scrollHeight)>t(i.$.mainContainer.offsetHeight),o=0<t(i.$.mainContainer.scrollTop),l=t(i.$.mainContainer.offsetHeight+i.$.mainContainer.scrollTop)<t(i.$.mainContainer.scrollHeight);n?"auto"===a?(!i.$mainContainer.hasClass("scroll-buttons-shown")&&i.$mainContainer.addClass("scroll-buttons-shown"),o?i.$scrollButtonNear.removeClass("smart-hidden"):i.$scrollButtonNear.addClass("smart-hidden"),l?i.$scrollButtonFar.removeClass("smart-hidden"):i.$scrollButtonFar.addClass("smart-hidden"),!1==(o&&l)?i.$mainContainer.addClass("one-button-shown"):i.$mainContainer.removeClass("one-button-shown"),!i.disabled&&(i.$.scrollButtonNear.disabled=!1,i.$.scrollButtonFar.disabled=!1)):(i.$scrollButtonNear.removeClass("smart-hidden"),i.$scrollButtonFar.removeClass("smart-hidden"),i.disabled?(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0):(i.$.scrollButtonNear.disabled=!o,i.$.scrollButtonFar.disabled=!l)):!n&&"auto"===a&&i.$mainContainer.hasClass("scroll-buttons-shown")?(i.$mainContainer.removeClass("scroll-buttons-shown"),i.$mainContainer.removeClass("one-button-shown"),i.$scrollButtonNear.addClass("smart-hidden"),i.$scrollButtonFar.addClass("smart-hidden")):!n&&"scroll"===a&&(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0)}}_close(){const t=this;t._discardKeyboardHover(!0),t._minimized&&t._minimizedDropDownOpened&&(t._positionDetection.removeOverlay(),t.$view.addClass("smart-visibility-hidden"),t._edgeMacFF&&(t.$.view.style.left="",t.$.view.style.top="",t.$view.addClass("not-in-view")),t.$hamburgerIcon.removeClass("smart-close-button"),t._minimizedDropDownOpened=!1)}_createElement(){const t=this;t.mode="vertical",t._positionDetection=new Smart.Utilities.PositionDetection(t),t._positionDetection.getDropDownParent(),null===t.dataSource&&t.$.mainContainer.firstElementChild instanceof HTMLUListElement&&t._processUList();const i=t.getElementsByTagName("smart-menu-item"),a=function(){t._setFocusable(),t.$.backButton.firstElementChild.tabIndex=-1,t._menuItems={},t._topLevelFilter="",t._filteredLowerLevelGroups=[],t.$.view.setAttribute("animation",t.animation),null===t.dataSource?t._processHTML(void 0,1):t._processDataSource(),t._toggleFilterInputGroupLabelVisibility(),"scroll"===t.overflow&&(t.$mainContainer.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),t._updateScrollButtonVisibility(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar])),t._applyMinimizeIconTemplate(t.minimizeIconTemplate,null),null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth?t.minimize():t._checkOverflow(),t.displayLoadingIndicator&&t.$loadingIndicatorContainer.removeClass("smart-hidden"),"center"!==t.loadingIndicatorPosition&&t.$loadingIndicatorPlaceHolder.removeClass("smart-hidden"),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted())};0===i.length?a():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(i,a))}_createMenuItemsGroupContainer(t,i){const a=document.createElement("div"),n=document.createElement("div");return a.className="smart-menu-drop-down smart-hidden",a.$=Smart.Utilities.Extend(a),a.level=i,a.setAttribute("level",i),a.menuItemsGroup=t,n.className="smart-menu-item-container",n.$=Smart.Utilities.Extend(n),n.container=a,n.menuItemsGroup=t,t.checkable&&n.setAttribute("checkable",""),n.setAttribute("check-mode",t.checkMode),a.itemContainer=n,a.appendChild(n),a}_discardGrouping(){const t=this,a=Array.from(t.$.view.getElementsByClassName("smart-list-menu-group-label"));for(let t=0,i;t<a.length;t++)i=a[t],i.parentElement.removeChild(i);t._unsortItems(t.$.mainContainer)}_discardKeyboardHover(){const t=this;t._focusedViaKeyboard&&(t._focusedViaKeyboard===t.$.backButton?(t.$.backButton.removeAttribute("hover"),t.$.backButton.$.button.removeAttribute("hover")):(t._focusedViaKeyboard.removeAttribute("focus"),t._focusedViaKeyboard.removeAttribute("hover")),t._focusedViaKeyboard=void 0)}_documentUpHandler(t){const i=this,a=t.originalEvent.target;return i._endSwiping(t,Date.now()),i._swipeDetails?("left"===i._swipeDetails.direction?i._swipeDetails.start>t.pageX&&i._swipeDetails.start-t.pageX>i.offsetWidth/4&&i._selectionHandler({target:i._swipeDetails.target},i._swipeDetails.target,!0):i._swipeDetails.start<t.pageX&&t.pageX-i._swipeDetails.start>i.offsetWidth/4&&i._backButtonClickHandler(),void delete i._swipeDetails):void(a===i.$.filterInput||i.disabled||i.displayLoadingIndicator||!a.closest||(i.contains(a)||a.closest(".smart-list-menu-view")===i.$.view?(i.contains(a)||a.closest(".smart-list-menu-view")===i.$.view)&&i!==document.activeElement&&i.focus():(i._close(),i._scrolling&&delete i._scrolling)))}_ensureVisible(t){const i=this,a=i.$.mainContainer;if(a.$.hasClass("scroll-buttons-shown")||"hidden"===i.overflow){const n=a.getBoundingClientRect(),o=t.getBoundingClientRect(),l=[i.$.scrollButtonNear,i.$.scrollButtonFar];(n.top>o.top||n.bottom<o.bottom)&&(a.scrollTop=t.offsetTop,i._updateScrollButtonVisibility(a,!1,l))}}_fireScrollBottomReachedEvent(t){const i=this,a=i.$.mainContainer,n=a.scrollTop;t===n||n!==a.scrollHeight-a.offsetHeight||i.$.fireEvent("scrollBottomReached")}_getCurrentViewItems(t){const i=this;if(!i.grouped)return void 0===t?i.$.mainContainer.children:t.container.firstElementChild.children;if(void 0===t)return i.$.view.querySelectorAll(".smart-menu-main-container > smart-menu-item, .smart-menu-main-container > smart-menu-items-group");else{const a=t.container.firstElementChild.children,n=[];for(let t=0,i;t<a.length;t++)i=a[t],(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)&&n.push(i);return n}}_sortItems(t){const i=this;if(!i.grouped)return;const a=[],n=[];let o;t instanceof Smart.MenuItemsGroup?o=t.container.firstElementChild:t===i.$.mainContainer&&(o=t);const l=Array.from(o.children);l.sort(function(t,i){return t.label.localeCompare(i.label)});for(let a=l.length-1;0<=a;a--)o.insertBefore(l[a],o.firstElementChild);for(let o=0;o<l.length;o++){const t=l[o],i=t.label.charAt(0),r=a.indexOf(i.toUpperCase());-1===r?(a.push(i.toUpperCase()),n.push([t])):n[r].push(t)}i._appendGroupLabels(a,n)}_home(){for(const t=this;t._view;)t._backButtonClickHandler(void 0,!0)}_keydownHandler(t){const i=this,a=t.key;if(!(document.activeElement!==i||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(a)||i.disabled||i.displayLoadingIndicator)){t.preventDefault();const n=i._view,o=n?n.itemContainer:i.$.mainContainer,l=i.$.backButton.hasAttribute("hover")?i.$.backButton:o.querySelector("[focus]");switch(a){case"ArrowDown":i._navigate("_getNextEnabledChild",l,o);break;case"ArrowLeft":i._backButtonClickHandler();break;case"ArrowRight":l&&l instanceof Smart.MenuItemsGroup&&i._menuItemsGroupSelectionHandler(l,{type:"keydown"});break;case"ArrowUp":i._navigate("_getPreviousEnabledChild",l,o);break;case"End":case"Home":{if(n&&"Home"===a)return i.$.mainContainer.scrollTop=0,i._checkOverflow(),i.$.backButton.setAttribute("hover",""),i.$.backButton.$.button.setAttribute("hover",""),i._focusedViaKeyboard=i.$.backButton,void(l&&l.removeAttribute("focus"));const t="End"===a?i._getLastEnabledChild(o):i._getFirstEnabledChild(o);if(!t||l===t)return;l&&(l===i.$.backButton?(i.$.backButton.removeAttribute("hover"),i.$.backButton.$.button.removeAttribute("hover")):l.removeAttribute("focus")),i._hoverViaKeyboard(t);break}case"Enter":i._minimized&&!i._minimizedDropDownOpened?i._hamburgerIconClickHandler(void 0,i.$.view):l&&(l===i.$.backButton?i._backButtonClickHandler():i._selectionHandler({target:l}));break;case"Escape":i._minimized&&i._minimizedDropDownOpened&&!i._view?i._close():i._backButtonClickHandler();break;case" ":l&&(l===i.$.backButton?i._backButtonClickHandler():i._toggleItem(l));}}}_mainContainerDownHandler(t){const i=this;!Smart.Utilities.Core.isMobile||i.disabled||i.displayLoadingIndicator||(i._dragStartDetails={startY:t.pageY,x:t.pageX,y:t.pageY,startTime:Date.now(),target:t.originalEvent.target})}_mainContainerHandler(){}_mainContainerMoveHandler(t){const i=this;if(i._dragStartDetails){const a=t.pageY,n=i._dragStartDetails.y-a,o=i.$.mainContainer.scrollTop;i.$.mainContainer.scrollTop+=n,o!==i.$.mainContainer.scrollTop&&(i._checkOverflow(),i._fireScrollBottomReachedEvent(o)),i._dragStartDetails={startY:i._dragStartDetails.startY,x:t.pageX,y:a,startTime:i._dragStartDetails.startTime,target:t.originalEvent.target},i._scrolling=!0}}_mainContainerSwipeHandler(t){const i=this;if(!(!Smart.Utilities.Core.isMobile||i.disabled||i.displayLoadingIndicator)){const a=t.originalEvent.target,n=a.closest("smart-menu-item"),o=a.closest("smart-menu-items-group");if("swiperight"===t.type){const a=n||o;a&&(delete i._dragStartDetails,delete i._scrolling,i._swipeDetails={direction:"right",start:t.pageX,target:a})}else o&&null===n&&(delete i._dragStartDetails,delete i._scrolling,i._swipeDetails={direction:"left",start:t.pageX,target:o})}}_menuItemsGroupSelectionHandler(t,i,a){const n=this,o=t.container,l=o.level;if(n._view===t)return;if(n._discardKeyboardHover(),document.activeElement===n||null===n.dropDownAppendTo||"click"!==i.type||n.contains(i.target)||n.focus(),n._inTransition)return;if("click"===i.type&&!i.target.classList.contains("smart-menu-items-group-arrow")&&n._toggleItem(t))return void n._ripple(t,i);let r=n.hasAnimation,s=n.animation,d=!1;r&&a&&(r=!1,d=!0,n.animation="none"),2===l&&(n.$header.removeClass("smart-hidden"),n.$mainContainer.addClass("header-shown")),n.$.title.innerHTML=t.titleLabel,n._view=t,n._toggleFilterInputGroupLabelVisibility(),t.removeAttribute("hover"),t.removeAttribute("focus"),t.$.addClass("smart-menu-items-group-opened"),n._showHideMenuItemsGroupSiblings(t,"addClass",r),r?(n._inTransition=!0,t.firstElementChild.classList.add("animate"),setTimeout(function(){o.style.top=t.parentElement.getBoundingClientRect().top-t.getBoundingClientRect().top+"px"},0)):t.firstElementChild.classList.add("smart-hidden"),o.$.removeClass("smart-hidden"),d&&(n.animation=s),n.$.mainContainer.scrollTop=0,r||n._checkOverflow(),n.$.fireEvent("expand",{item:t,label:t.label,path:t.path,value:t.value})}_mouseoutMouseoverHandler(t){const i=this;if(!(i.disabled||i.displayLoadingIndicator)){const a=t.target.closest("smart-menu-item")||t.target.closest("smart-menu-items-group");null===a||i._view&&a.level<=i._view.level||a.disabled||a.templateApplied||(i._discardKeyboardHover(),"mouseover"===t.type?(a.setAttribute("hover",""),i._discardKeyboardHover(!0)):a.removeAttribute("hover"))}}_navigate(t,i,a){const n=this;if(!i)return void("_getNextEnabledChild"===t?n._view?(n.$.backButton.setAttribute("hover",""),n.$.backButton.$.button.setAttribute("hover",""),n._focusedViaKeyboard=n.$.backButton):n._hoverViaKeyboard(n._getFirstEnabledChild(a)):n._hoverViaKeyboard(n._getLastEnabledChild(a)));let o;if("_getNextEnabledChild"!==t||i!==n.$.backButton){if("_getPreviousEnabledChild"===t&&n._view&&i===n._getFirstEnabledChild(a))return n.$.backButton.setAttribute("hover",""),n.$.backButton.$.button.setAttribute("hover",""),n._focusedViaKeyboard=n.$.backButton,void i.removeAttribute("focus");o=n[t](i)}else if(o=n._getFirstEnabledChild(a),o)n.$.backButton.removeAttribute("hover"),n.$.backButton.$.button.removeAttribute("hover");else return;o&&(i.removeAttribute("focus"),n._hoverViaKeyboard(o))}_processHTML(t,a){const n=this;let i,o;t===void 0&&(t=n.$.mainContainer),1<a&&(i=n._createMenuItemsGroupContainer(t,a),o=i.itemContainer);const l=Array.from(t.children),r=[];let s=0;for(let d=0;d<l.length;d++){if(1<a&&0==d){s++;continue}const i=l[d];if(!(i instanceof Smart.MenuItem||i instanceof Smart.MenuItemsGroup)){i.parentElement.removeChild(i),s++;continue}n._createItemHTMLStructure(i,a,t,d-s),i.checked&&(i.disabled||i.templateApplied?i.checked=!1:r.push(i)),1<a&&o.appendChild(i),i instanceof Smart.MenuItemsGroup&&n._processHTML(i,a+1)}if(1<a){if(t.container=i,t.itemContainer=o,t instanceof Smart.MenuItemsGroup){const i=document.createElement("div");i.className="smart-menu-items-group-arrow smart-arrow-right right",t.children[0].appendChild(i)}t.appendChild(i)}n._validateRadioButtonSelection(t,a,r),n._sortItems(t)}_resizeHandler(){const t=this,i=t.minimizeWidth;if(null!==i){if(!t._minimized&&t.offsetWidth<=i)return void t.minimize();if(t._minimized&&t.offsetWidth>i)return void t.maximize()}t._checkOverflow()}_scroll(t){const i=this,a=i.$.mainContainer,n=t.classList.contains("smart-scroll-button-near")?-1:1,o=a.scrollTop;a.scrollTop+=10*n,o!==a.scrollTop&&(i._updateScrollButtonVisibility(a,!1,[i.$.scrollButtonNear,i.$.scrollButtonFar]),i._fireScrollBottomReachedEvent(o))}_selectionHandler(t,i,a){function n(){document.activeElement===o||null===o.dropDownAppendTo||"click"!==t.type||o.contains(l)||o.focus()}const o=this,l=t.target;if(!(o.disabled||o.displayLoadingIndicator)){if(o._scrolling||o._swipeDetails&&!a)return delete o._dragStartDetails,delete o._scrolling,void delete o._swipeDetails;if(void 0===i){if("click"===t.type){const i=l.closest("smart-repeat-button");if(i)return void o._scroll(i,t)}const a=l.closest("smart-menu-item");if(a)return a.disabled||a.templateApplied?void n():(o._toggleItem(a)||o.$.fireEvent("itemClick",{item:a,label:a.label,value:a.value}),o._ensureVisible(a),o._ripple(a,t),void n());if(i=l.closest("smart-menu-items-group"),i&&(l===i.container||l===i.container.firstElementChild))return}i&&!i.disabled&&o._menuItemsGroupSelectionHandler(i,t)}}_showHideMenuItemsGroupSiblings(t,a,n){const i=t.parentElement,o=i.children;for(let l=0;l<o.length;l++){const i=o[l];i!==t&&(i.hidden||(n?"addClass"===a?i.$.addClass("animate"):(i.$.removeClass("smart-hidden"),i.$.addClass("right"),setTimeout(function(){i.$.removeClass("right")},0)):i.$[a]("smart-hidden")))}}_toggleFilterInputGroupLabelVisibility(t,i){const a=this,n=a._getCurrentViewItems(a._view).length;if(!0!==i){const t=!a.$filterInputContainer.hasClass("smart-hidden");a.filterable&&1<n?(!t&&(a.$mainContainer.addClass("filter-input-shown"),a.$filterInputContainer.removeClass("smart-hidden")),a.$.filterInput.value=a._view?a._view.filter||"":a._topLevelFilter):t&&(a.$mainContainer.removeClass("filter-input-shown"),a.$filterInputContainer.addClass("smart-hidden"))}if(!t&&a.grouped&&0<n){const t=a._view?a._view.container.firstElementChild.firstElementChild.$:a.$.mainContainer.firstElementChild.$;1===n?t.addClass("smart-hidden"):t.removeClass("smart-hidden")}}_viewHandler(t){const i=this;if("transitionend"===t.type){const a=t.target;return a===i.$.view||i.$.backButton.contains(a)?void 0:(a.classList.contains("animate")&&(a.classList.remove("animate"),a.classList.add("smart-hidden")),a.classList.contains("smart-menu-drop-down")&&(a.style.top=""),a.classList.contains("smart-menu-items-group-opened")&&a.classList.remove("smart-menu-items-group-opened"),i._checkOverflow(),void(i._inTransition=!1))}if(i._minimized&&null!==i.dropDownAppendTo)switch(t.type){case"click":i._selectionHandler(t);break;case"mouseout":i._mouseoutMouseoverHandler(t);break;case"mouseover":i._mouseoutMouseoverHandler(t);}}}),Smart("smart-tank",class extends Smart.BaseElement{static get properties(){return{coerce:{value:!1,type:"boolean"},customInterval:{value:!1,type:"boolean"},customTicks:{reflectToAttribute:!1,value:["0","50","100"],type:"array"},dateLabelFormatString:{value:"d",type:"string"},decimalSeparator:{value:".",type:"string"},interval:{value:"1",type:"any"},inverted:{value:!1,type:"boolean"},labelFormatFunction:{value:null,type:"function?"},labelsVisibility:{value:"all",allowedValues:["all","endPoints","none"],type:"string"},logarithmicScale:{value:!1,type:"boolean"},max:{value:"100",type:"any"},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},messages:{value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}.",significantPrecisionDigits:"{{elementType}}: the properties significantDigits and precisionDigits cannot be set at the same time.",invalidMinOrMax:"{{elementType}}: Invalid {{property}} value. Max cannot be lower than Min.",noInteger:"{{elementType}}: precisionDigits could be set only on \"floatingPoint\" scaleType."}},type:"object",extend:!0},min:{value:"0",type:"any"},mode:{value:"numeric",allowedValues:["numeric","date"],type:"string"},name:{value:"",type:"string"},orientation:{value:"vertical",allowedValues:["horizontal","vertical"],type:"string"},precisionDigits:{value:null,type:"number?"},scalePosition:{value:"near",allowedValues:["near","far","both","none"],type:"string"},scaleType:{value:"floatingPoint",allowedValues:["floatingPoint","integer"],type:"string"},scientificNotation:{value:!1,type:"boolean"},showThumbLabel:{value:!1,type:"boolean"},showTooltip:{value:!1,type:"boolean"},showUnit:{value:!1,type:"boolean"},significantDigits:{value:null,type:"number?"},thumbLabelPosition:{value:"near",allowedValues:["near","far"],type:"string"},ticksPosition:{value:"scale",allowedValues:["scale","track"],type:"string"},ticksVisibility:{value:"minor",allowedValues:["major","minor","none"],type:"string"},tooltipPosition:{value:"near",allowedValues:["near","far"],type:"string"},unit:{value:"kg",type:"string"},value:{value:"0",type:"any"},wordLength:{value:"int32",allowedValues:["int8","uint8","int16","uint16","int32","uint32","int64","uint64"],type:"string"}}}static get listeners(){return{"track.down":"_trackDownHandler","track.move":"_trackMoveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler",keydown:"_keydownHandler",resize:"_resizeHandler",styleChanged:"_styleChangedHandler","document.selectstart":"_selectStartHandler","track.mouseenter":"_trackOnMouseEnterHandler","track.mouseleave":"_trackOnMouseLeaveHandler"}}static get requires(){return{"Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.Utilities.TickIntervalHandler":"smart.tickintervalhandler.js"}}template(){return"<div id=\"container\" class=\"smart-container\"><div id=\"scaleNear\" class=\"smart-scale smart-scale-near\"></div><div id=\"track\" class=\"smart-track\"><div id=\"fill\" class=\"smart-value\"><div id=\"bubbleContainer\" class=\"smart-bubble-container\"></div><div id=\"tooltip\" class=\"smart-tooltip\"><div id=\"tooltipContent\" class=\"smart-tooltip-content smart-unselectable\"></div></div><div id=\"thumb\" class=\"smart-thumb\"><span id=\"thumbLabel\" class=\"smart-thumb-label\"></span></div></div><div id=\"trackTicksContainer\" class=\"smart-track-ticks-container smart-hidden\"></div></div><div id=\"scaleFar\" class=\"smart-scale smart-scale-far\"></div><input id=\"hiddenInput\" type=\"hidden\" name=\"[[name]]\"></div>"}ready(){super.ready();const t=this;t._redefineProperty("customTicks"),this._createElement()}_createElement(){const t=this;return t.$.fill.style.transition="none","numeric"===t.mode?t._getEventValue=function(){return t.value}:t._handleDateScale(),t._setSettingsObject(),t._setDrawVariables(),t._getLayoutType(),t._numericProcessor=new Smart.Utilities.NumericProcessor(t,"scaleType"),t._numberRenderer=new Smart.Utilities.NumberRenderer,t._isVisible()?void(t._renderingSuspended=!1,t._setInitialComponentDisplay(),t._measurements={},t._wordLengthNumber=t._numericProcessor.getWordLength(t.wordLength),t._validateInitialPropertyValues(),t._setTicksAndInterval(),t._validate(!0),t._updateTooltipValue(t._drawValue),t._setFocusable(),t._setTrackSize(),t._setBubbles(),t.$.fill.style.transition="",t.$.hiddenInput.value=t._getEventValue()):void(t._renderingSuspended=!0)}val(t){const i=this;if(t!==void 0){if("date"===i.mode){let a=Smart.Utilities.DateTime.validateDate(t);return a=a.getTimeStamp(),0===a.compare(i.value)?i._valueDate:(i._programmaticValueIsSet=!0,i._validate(!1,a),void(i._programmaticValueIsSet=!1))}if(i.value.toString().toUpperCase()!==t.toString().toUpperCase()){t=t.toString().replace(/\s/g,""),i._numericProcessor.regexScientificNotation.test(t)&&(t=i._numericProcessor.scientificToDecimal(t));const a=i._discardDecimalSeparator(t.toString());i._programmaticValueIsSet=!0,i._validate(!1,a),i._programmaticValueIsSet=!1,delete i._valueBeforeCoercion}else return i.value="string"==typeof t?t:t.toString()}else return i._getEventValue()}_setBubbles(){const t=this;if(!t.hasAnimation)return;let i=document.createDocumentFragment(),a;for(let t=0;5>t;t++)a=document.createElement("div"),a.classList.add("bubble"),a.classList.add("bubble"+(t+1)),i.appendChild(a);t.$.bubbleContainer.appendChild(i)}_setTrackSize(){const t=this;t._trackSize="vertical"===t.orientation?t.$.track.offsetWidth:t.$.track.offsetHeight}getOptimalSize(){const t=this;if(t._renderingSuspended)return{width:0,height:0};let i,a,n;switch(t.labelsVisibility){case"all":a=t._numericProcessor._longestLabelSize;break;case"endPoints":a=Math.max(t._tickIntervalHandler.labelsSize.minLabelOtherSize,t._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":a=0;}switch(t.orientation){case"horizontal":return i={marginA:"marginBottom",marginB:"marginTop",nearScaleDistance:"bottom",farScaleDistance:"top",paddingA:"paddingBottom",paddingB:"paddingTop",offset:"offsetWidth",distance:"left"},t._orientationChanged&&(i.offset="offsetHeight",t._trackChanged=!0),n=t._getSize(a,i),{width:n.optimalOtherSize,height:n.optimalSize};case"vertical":return i={marginA:"marginLeft",marginB:"marginRight",nearScaleDistance:"right",farScaleDistance:"left",paddingA:"paddingLeft",paddingB:"paddingRight",offset:"offsetHeight",distance:"top"},t._orientationChanged&&(i.offset="offsetWidth",t._trackChanged=!0),n=t._getSize(a,i),{width:n.optimalSize,height:n.optimalOtherSize};}}propertyChangedHandler(t,i,a){var n=Math.log10,o=Math.pow;super.propertyChangedHandler(t,i,a);const l=this;if(!l._isVisible()||l._renderingSuspended)return void(l._renderingSuspended=!0);switch(t){case"labelsVisibility":case"ticksVisibility":return void l._updateScaleWidth(l._numericProcessor._longestLabelSize);case"coerce":if(a){const t=l.value,i=a=l.logarithmicScale?o(10,l._numericProcessor.getCoercedValue(n(t))):l._numericProcessor.getCoercedValue(t);l._validate(!1,i,!0),l._valueBeforeCoercion=t}else void 0!==l._valueBeforeCoercion&&l._validate(!1,l._valueBeforeCoercion,!1);return;case"interval":{l._numericProcessor.validateInterval(a);const t=a=l.logarithmicScale?o(10,l._numericProcessor.getCoercedValue(n(l.value))):l._numericProcessor.getCoercedValue(l.value);l._validate(!1,t,l.coerce);break}case"min":case"max":{"date"===l.mode&&(delete l._dateInterval,l[t]=Smart.Utilities.DateTime.validateDate(a).getTimeStamp()),l._validateMinMax(t,!1,i);const n=l._numericProcessor.createDescriptor(l._discardDecimalSeparator(l.value,l.decimalSeparator)),o=l._numericProcessor.validate(n,l._minObject,l._maxObject);l._setTicksAndInterval(),l._numericProcessor.updateValue(o);let r=l.getOptimalSize(),s=l.getBoundingClientRect(),d=l.$.track.getBoundingClientRect();r.width>s.width&&20>d.width&&(l.style.width=r.width+"px",l.style.height=r.height+"px");break}case"inverted":{l._getLayoutType(),l._normalLayout&&(l.$.fill.style[l._settings.margin]="0px");let t=l._numericProcessor.createDescriptor(l.value),i=l._numericProcessor.validate(t,l._minObject,l._maxObject);l._setTicksAndInterval(),l._numericProcessor.updateValue(i);break}case"orientation":{const t=l.$.fill.style,i=l.$.container.style;switch(!0!==l._orientationChanged&&(l._orientationChanged=!0),l._tankSizeBeforeOrientation={width:l.offsetWidth,height:l.offsetHeight},l._setSettingsObject(),l._getLayoutType(),l.inverted&&(t.marginTop="0",t.marginLeft="0"),l.orientation){case"vertical":l.inverted||(t.marginTop="auto",t.marginLeft="0"),t.width="100%",i.paddingLeft="0",i.paddingRight="0";break;case"horizontal":l.inverted||(t.marginTop="0",t.marginLeft="auto"),t.height="100%",i.paddingTop="0",i.paddingBottom="0";}l._validateMinMax("both");const a=l._numericProcessor.createDescriptor(l.value),n=l._numericProcessor.validate(a,l._minObject,l._maxObject);l._setTicksAndInterval(),l._setTicksAndInterval(),l._numericProcessor.updateValue(n),l._trackChanged=!0;break}case"significantDigits":case"precisionDigits":{if("date"===l.mode)return;if("precisionDigits"===t&&"integer"===l.scaleType&&l.error(l.localize("noInteger",{elementType:l.nodeName.toLowerCase(),property:t})),"significantDigits"===t&&null!==l.precisionDigits?l.precisionDigits=null:"precisionDigits"==t&&null!==l.significantDigits&&(l.significantDigits=null),l._validateInitialPropertyValues(),l._setTicksAndInterval(),"horizontal"===l.orientation&&l.inverted){const t=l._numericProcessor.valueToPx(l._numericProcessor.getCoercedValue(l._drawValue));l.updateFillSizeAndPosition(t,l._settings.margin,a,!1)}break}case"decimalSeparator":{if("integer"===l.scaleType||"date"===l.mode)return;const t=l._discardDecimalSeparator(l.value,i),a=l._applyDecimalSeparator(t);l.value=t,delete l._valueBeforeCoercion,l._numericProcessor.addTicksAndLabels(),l._updateTooltipValue(a);break}case"value":{if(null===a)return;if("date"===l.mode){let t=Smart.Utilities.DateTime.validateDate(a);return t=t.getTimeStamp(),void(0!==t.compare(i)&&(l._programmaticValueIsSet=!0,l._validate(!1,t),l._programmaticValueIsSet=!1))}if(l.value.toString().toUpperCase()!==i.toString().toUpperCase()){let t=void 0===a?i.toString().replace(/\s/g,""):a.toString().replace(/\s/g,"");l._numericProcessor.regexScientificNotation.test(t)&&(t=l._numericProcessor.scientificToDecimal(t)),l._programmaticValueIsSet=!0,l._validate(!1,t),l._programmaticValueIsSet=!1,delete l._valueBeforeCoercion}else l.value="string"==typeof a?a:a.toString();break}case"scaleType":if("date"===l.mode)return void(l.scaleType="integer");l._changeScaleType(i,a);break;case"disabled":case"unfocusable":l._setFocusable();break;case"showUnit":case"unit":{l._setTicksAndInterval(),l._moveThumbBasedOnValue(l._drawValue);break}case"tooltipPosition":break;case"wordLength":{if("date"===l.mode)return void(l.wordLength="uint64");l._wordLengthNumber=l._numericProcessor.getWordLength(a),l._validateMinMax("both");const t=l._numericProcessor.createDescriptor(l.value),i=l._numericProcessor.validate(t,l._minObject,l._maxObject);l._setTicksAndInterval(),l._numericProcessor.updateValue(i);break}case"scalePosition":{l._setInitialComponentDisplay(),l._setTicksAndInterval(),l._moveThumbBasedOnValue(l._drawValue);break}case"labelFormatFunction":case"scientificNotation":{if("date"===l.mode&&"scientificNotation"===t)return;const i=l._discardDecimalSeparator(l.value,l.decimalSeparator);l._setTicksAndInterval(),l._updateTooltipValue(i);break}case"logarithmicScale":if("date"===l.mode)return void(l.logarithmicScale=!1);l._validateMinMax("both"),l._setTicksAndInterval(),l._validate(!1,l.value);break;case"ticksPosition":"scale"===a?(l.$trackTicksContainer.addClass("smart-hidden"),l.$.trackTicksContainer.innerHTML=""):l.$trackTicksContainer.removeClass("smart-hidden"),l._numericProcessor.addTicksAndLabels();break;case"customInterval":a?(l._customTicks&&(l.customTicks=l._customTicks),l._numericProcessor.validateCustomTicks()):"date"===l.mode&&(l._customTicks=l.customTicks),l._setTicksAndInterval(),l._coerceCustomInterval();break;case"customTicks":if("date"===l.mode&&!l.customInterval)return l._customTicks=a,void(l.customTicks=i);l._numericProcessor.validateCustomTicks(),l.customInterval&&(l._setTicksAndInterval(),l._coerceCustomInterval());break;case"dateLabelFormatString":"date"===l.mode&&l._setTicksAndInterval();break;case"mode":l.mode=i;break;case"showThumbLabel":a&&l.showTooltip&&(l.showTooltip=!1);break;case"showTooltip":a&&l.showThumbLabel&&(l.showThumbLabel=!1);}}_setSettingsObject(){const t=this;t._settings="horizontal"===t.orientation?{clientSize:"clientWidth",dimension:"width",leftOrTop:"left",margin:"marginLeft",offset:"offsetLeft",otherSize:"offsetHeight",size:"offsetWidth",page:"pageX"}:{clientSize:"clientHeight",dimension:"height",leftOrTop:"top",margin:"marginTop",offset:"offsetTop",otherSize:"offsetWidth",size:"offsetHeight",page:"pageY"}}_setInitialComponentDisplay(){const t=this;switch(t.scalePosition){case"near":t.$scaleNear.removeClass("smart-hidden"),t.$scaleFar.addClass("smart-hidden");break;case"far":t.$scaleNear.addClass("smart-hidden"),t.$scaleFar.removeClass("smart-hidden");break;case"both":t.$scaleFar.removeClass("smart-hidden"),t.$scaleNear.removeClass("smart-hidden");break;case"none":t.$scaleFar.addClass("smart-hidden"),t.$scaleNear.addClass("smart-hidden");}t.$tooltip.addClass("smart-hidden"),"track"===t.ticksPosition&&t.$trackTicksContainer.removeClass("smart-hidden")}_styleChangedHandler(){const t=this;return t._isVisible()?t._renderingSuspended?void t._createElement():void(t._renderingSuspended||(t._setTicksAndInterval(),t._moveThumbBasedOnValue(t._drawValue))):void(t._renderingSuspended=!0)}_validateInitialPropertyValues(){const t=this,i=typeof t.value===String?t.value.replace(/\s/g,""):t.value.toString().replace(/\s/g,"");"numeric"===t.mode&&t._numericProcessor.regexScientificNotation.test(i)&&(t.value=t._numericProcessor.scientificToDecimal(i),delete t._valueBeforeCoercion),t.significantDigits=null===t.significantDigits?null:Math.min(Math.max(t.significantDigits,1),21),null===t.significantDigits&&null===t.precisionDigits?t.significantDigits=8:null!==t.significantDigits&&null!==t.precisionDigits&&t.error(t.localize("significantPrecisionDigits",{elementType:t.nodeName.toLowerCase()})),t._validateMinMax("both",!0),t.showTooltip&&t.showThumbLabel&&(t.showTooltip=!1)}_validateMinMax(t,i,a){function n(t,a){o._numericProcessor.validateMinMax("min"===t||i,"max"===t||i);const n=o["_"+t+"Object"];let s="min"===t?0>=o._numericProcessor.compare(o.max,n,!0):0<o._numericProcessor.compare(o.min,n,!0);s?a?(o._numberRenderer=new Smart.Utilities.NumberRenderer(a),"min"===t?l=!1:r=!1,o[t]=a,o["_"+t+"Object"]=a):o.error(o.localize("invalidMinOrMax",{elementType:o.nodeName.toLowerCase(),property:t})):(o._numberRenderer=new Smart.Utilities.NumberRenderer(n),o[t]=o["_"+t+"Object"])}const o=this;let l="min"===t||"both"===t,r="max"===t||"both"===t;typeof i===void 0&&(i=!1),"both"===t?(n("min",a),n("max",a)):n(t,a),o.logarithmicScale?o._validateOnLogarithmicScale(l,r,a):(o._drawMin=o.min,o._drawMax=o.max),o.min=o.min.toString(),o.max=o.max.toString(),o._minObject=o._numericProcessor.createDescriptor(o.min),o._maxObject=o._numericProcessor.createDescriptor(o.max),"date"===o.mode&&(o._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(o.min),o._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(o.max)),o._numericProcessor.validateInterval(o.interval),o.customInterval&&o._numericProcessor.validateCustomTicks()}_calculateTickInterval(){const t=this;let i=t._tickIntervalHandler.getInterval("linear",t._drawMin,t._drawMax,t.$.track,t.logarithmicScale);i.major===t._majorTicksInterval?t._intervalHasChanged=!0:(t._intervalHasChanged=!0,t._majorTicksInterval=i.major),t._minorTicksInterval=i.minor,"date"===t.mode&&t._calculateDateInterval(i.major)}_calculateDateInterval(t){const a=this,i={month:"2628000000000000000000000000000",day:"86400000000000000000000000000",hour:"3600000000000000000000000000",minute:"60000000000000000000000000",second:"1000000000000000000000000"};let n="year",o=new Smart.Utilities.BigNumber("31536000000000000000000000000000"),l=o.subtract(t).abs(),r=new Smart.Utilities.BigNumber(a.min).subtract(a.max).abs(),s=r.divide(t).toString();for(let a in 2>s&&(t=r.divide(3)),i)if(i.hasOwnProperty(a)){const r=new Smart.Utilities.BigNumber(i[a]),s=r.subtract(t).abs();if(-1===s.compare(l))n=a,o=r,l=s;else break}if("second"==n){if(a._numberRenderer.numericValue=parseFloat(t),1e3>a._numberRenderer.numericValue)return a._dateIncrementMethod="addYoctoseconds",void(a._dateIntervalNumber=1);let i=a._numberRenderer.toScientific(10);return i=i.charAt(i.length-1),a._dateIncrementMethod=a._unitToMethod[i],void(a._dateIntervalNumber=Math.pow(10,a._numericProcessor.prefixesToPowers[i]))}a._dateInterval=!0;const d=!a.customInterval;let m,c,u;switch(d&&(m=[new Smart.Utilities.BigNumber(a.min)],c=r.divide(o).toString(),u=Math.max(1,Math.floor(c/s))),n){case"year":if(d)for(let t=a._minDate.year()+u;t<a._maxDate.year();t+=u)m.push(new Smart.Utilities.BigNumber(new Smart.Utilities.DateTime(t,1,1).getTimeStamp()));a._dateIncrementMethod="addYears";break;case"month":if(d)for(let t=new Smart.Utilities.DateTime(a._minDate.year(),a._minDate.month()+u,1);-1===t.compare(a._maxDate);t.addMonths(u,!1))m.push(new Smart.Utilities.BigNumber(t.getTimeStamp()));a._dateIncrementMethod="addMonths";break;case"day":if(d)for(let t=new Smart.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day()+u);-1===t.compare(a._maxDate);t.addDays(u,!1))m.push(new Smart.Utilities.BigNumber(t.getTimeStamp()));a._dateIncrementMethod="addDays",a._dateIntervalNumber=864e26;break;case"hour":if(d)for(let t=new Smart.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day(),a._minDate.hour()+u);-1===t.compare(a._maxDate);t.addHours(u,!1))m.push(new Smart.Utilities.BigNumber(t.getTimeStamp()));a._dateIncrementMethod="addHours",a._dateIntervalNumber=36e26;break;case"minute":if(d)for(let t=new Smart.Utilities.DateTime(a._minDate.year(),a._minDate.month(),a._minDate.day(),a._minDate.hour(),a._minDate.minute()+u);-1===t.compare(a._maxDate);t.addMinutes(u,!1))m.push(new Smart.Utilities.BigNumber(t.getTimeStamp()));a._dateIncrementMethod="addMinutes",a._dateIntervalNumber=6e25;}d&&(-1===m[m.length-1].compare(a.max)&&m.push(new Smart.Utilities.BigNumber(a.max)),a.customTicks=m)}_formatNumber(t){var i=Math.round;const a=this;if("date"===a.mode){const i=Smart.Utilities.DateTime.fromFullTimeStamp(t);return i.toString(a.dateLabelFormatString)}const n=a._numberRenderer;let o=parseFloat(t);if(n.numericValue=t,a.scientificNotation)o=a._numberRenderer.toScientific(a.significantDigits,a.precisionDigits);else switch(a.scaleType){case"floatingPoint":o=a._applyDecimalSeparator(n.toDigits(a.significantDigits,a.precisionDigits));break;case"integer":o=n.isENotation(o)?i(n.largeExponentialToDecimal(o)):i(o),o=n.toDigits(a.significantDigits,0);}return o}_formatLabel(t,i){const a=this;let n;return a.labelFormatFunction&&("date"===a.mode&&(t=Smart.Utilities.DateTime.fromFullTimeStamp(t)),n=a.labelFormatFunction(t),void 0!==n&&""!==n)?n:(n=a._formatNumber(t),a._numberRenderer=new Smart.Utilities.NumberRenderer(n),a.showUnit&&(!1===i?n+=" "+a.unit:n+=" <span class=\"smart-unselectable\">"+a.unit+"</span>"),n)}_layout(){const t=this,i=t.$.container.style,a=t._tickIntervalHandler.labelsSize.minLabelSize/2+"px",n=t._tickIntervalHandler.labelsSize.maxLabelSize/2+"px";switch(t.orientation){case"horizontal":if("none"===t.scalePosition){i.paddingLeft="",i.paddingRight="";break}t.inverted?(i.paddingLeft=n,i.paddingRight=a):(i.paddingLeft=a,i.paddingRight=n);break;case"vertical":if("none"===t.scalePosition){i.paddingTop="",i.paddingBottom="";break}t.inverted?(i.paddingBottom=n,i.paddingTop=a):(i.paddingBottom=a,i.paddingTop=n);}t._measurements.trackLength=t.$.track[this._settings.clientSize]}_trackDownHandler(t){const i=this;i.disabled||i.readonly||("switchUntilReleased"===i.mechanicalAction&&(i._cachedValue={},i._cachedValue._number=i._number,i._cachedValue._drawValue=i._drawValue,i._cachedValue.value=i.value,i._valueDate&&(i._cachedValue._valueDate=i._valueDate)),i._getTrackStartAndEnd(),i._moveThumbBasedOnCoordinates(t,!0,"switchWhenReleased"!==i.mechanicalAction),i._thumbDragged=!0,i.$track.addClass("smart-dragged"),i.showTooltip&&i.$tooltip.removeClass("smart-hidden"))}_trackMoveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_documentMoveHandler(t){const i=this;i._thumbDragged&&(t.originalEvent.preventDefault(),i._moveThumbBasedOnCoordinates(t,!0,"switchWhenReleased"!==i.mechanicalAction),i.$fill.addClass("disable-animation"))}_documentUpHandler(t){const i=this;if(i._thumbDragged){if("switchWhenReleased"===i.mechanicalAction)i._moveThumbBasedOnCoordinates(t,!0,!0);else if("switchUntilReleased"===i.mechanicalAction&&i._numericProcessor.compare(i._number,i._cachedValue._number)){const t=i._getEventValue();i._number=i._cachedValue._number,i._drawValue=i._cachedValue._drawValue,i._cachedValue._valueDate&&(i._valueDate=i._cachedValue._valueDate),i.value=i._cachedValue.value,i._moveThumbBasedOnValue(i._drawValue);const a=i._getEventValue();i.$.fireEvent("change",{value:a,oldValue:t}),i.$.hiddenInput.value=a}i.showTooltip&&i.$tooltip.addClass("smart-hidden"),i._thumbDragged=!1,i.$track.removeClass("smart-dragged"),i.$fill.removeClass("disable-animation")}}_selectStartHandler(t){const i=this;i._thumbDragged&&t.preventDefault()}_resizeHandler(){const t=this;return t._isVisible()?t._renderingSuspended?void t._createElement():void(t._renderingSuspended||(!0!==t._orientationChanged&&(t._setTicksAndInterval(),t._moveThumbBasedOnValue(t._drawValue)),t._trackChanged&&(t._measurements.trackLength=t.$.track[this._settings.clientSize],t._setTicksAndInterval(),t._moveThumbBasedOnValue(t._drawValue)),t._setTrackSize(),delete t._orientationChanged,delete t._trackChanged)):void(t._renderingSuspended=!0)}_moveThumbBasedOnCoordinates(t,i,a){var n=Math.min,o=Math.max;const l=this;let r=i?n(o(t[l._settings.page],l._trackStart),l._trackEnd):t[l._settings.page],s=l._numericProcessor.pxToValue(r);l.logarithmicScale?(l._drawValue=Math.log10(s),s=l._numericProcessor.getCoercedValue(l._drawValue)):(l._drawValue=s,s=l._numericProcessor.getCoercedValue(s)),r=n(o(l._numericProcessor.valueToPx(s)+l._trackStart,l._trackStart),l._trackEnd);const d=r-l._trackStart;l.updateFillSizeAndPosition(d,l._settings.margin,s,!0,a),t.originalEvent&&t.originalEvent.stopPropagation()}_moveThumbBasedOnValue(t){const i=this,a=i._numericProcessor.valueToPx(i._numericProcessor.getCoercedValue(t));i.updateFillSizeAndPosition(a,i._settings.margin,t,!0)}updateFillSizeAndPosition(t,i,a,n,o){const l=this,r=l.$.fill.style;if(l._normalLayout?r[l._settings.dimension]=t+"px":(r[l._settings.dimension]=Math.min(l._measurements.trackLength,Math.max(0,l._measurements.trackLength-t))+"px",r[i]=t+"px"),n){const t=l.value;delete l._valueBeforeCoercion,l._numericProcessor.updateToolTipAndValue(a,t,o)}}_updateTooltipValue(t){const i=this;t===void 0&&(t=i.value),i.logarithmicScale&&(t=Math.pow(10,t.toString())),t=i._formatLabel(t),i.$.tooltipContent.innerHTML=t,i.$.thumbLabel.innerHTML=t}_getSize(t,i){function a(t,i){const a=t.getElementsByClassName("smart-label");s=a[0],d=a[a.length-1];const n=window.getComputedStyle(a[0])[i];m+=parseFloat(n)}const n=this,o=window.getComputedStyle(n),l=window.getComputedStyle(n.$.track),r=n._trackSize+parseFloat(l[i.marginA])+parseFloat(l[i.marginB]);let s,d,m,c;switch(m=r,n.scalePosition){case"none":return m+=parseFloat(o[i.paddingA])+parseFloat(o[i.paddingB]),c="undefined"==typeof n._tankSizeBeforeOrientation?"horizontal"===n.orientation?parseFloat(l.width):parseFloat(l.height):"horizontal"===n.orientation?n._tankSizeBeforeOrientation.height:n._tankSizeBeforeOrientation.width,!0!==n._trackChanged&&(n._trackChanged=!0),{optimalSize:m,optimalOtherSize:c};case"near":m+=t,a(n.$.scaleNear,i.nearScaleDistance);break;case"far":m+=t,a(n.$.scaleFar,i.farScaleDistance);break;case"both":m+=2*t,a(n.$.scaleNear,i.nearScaleDistance),a(n.$.scaleFar,i.farScaleDistance);}let u,p,g;return m+=parseFloat(o[i.paddingA])+parseFloat(o[i.paddingB]),u=s.getBoundingClientRect(),p=d.getBoundingClientRect(),c=n[i.offset],g=u[i.distance]+s[i.offset]-p[i.distance],0<g&&(c=s[i.offset]+d[i.offset]),{optimalSize:m,optimalOtherSize:c}}_getRange(){const t=this;return t.logarithmicScale?void(t._range=t._drawMax-t._drawMin):void("floatingPoint"===t.scaleType?t._range=(t._drawMax-t._drawMin).toString():t._range=new Smart.Utilities.BigNumber(t._drawMax).subtract(t._drawMin).toString())}_getTrackStartAndEnd(){const t=this;let i=t.$.track.getBoundingClientRect(),a;if("horizontal"===t.orientation){const t=document.body.scrollLeft||document.documentElement.scrollLeft;a=i.left+t}else{const t=document.body.scrollTop||document.documentElement.scrollTop;a=i.top+t}const n=a+t._measurements.trackLength,o=n-a;t._trackStart=a,t._trackEnd=n,t._valuePerPx=t._numericProcessor.getValuePerPx(t._range,o)}_updateScaleWidth(t){var i=Math.max;const a=this;let n="track"===a.ticksPosition?4:12;switch(a.labelsVisibility){case"all":t=a._numericProcessor._longestLabelSize;break;case"endPoints":t=i(a._tickIntervalHandler.labelsSize.minLabelOtherSize,a._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":t=0;}let o=n+t,l=window.getComputedStyle(a.$.track),r=!!l.getPropertyValue("--smart-tank-scale-size");if(r)a.$.container.style.setProperty("--smart-tank-scale-size",o+"px");else{const t=window.getComputedStyle(a),n=a.$.scaleNear.style,r=a.$.scaleFar.style,s=a.$.track.style,d=parseFloat(l.getPropertyValue("min-width"));let m=parseFloat(l.getPropertyValue("outline-width"))||0,c=parseFloat(l.getPropertyValue("outline-offset"))||0,u=m+c,p,g,h,_,f;switch(a.orientation){case"horizontal":p="height",g="width",h=a.offsetHeight,f=parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom")),_=parseFloat(l.getPropertyValue("margin-top"))+parseFloat(l.getPropertyValue("margin-bottom"));break;case"vertical":p="width",g="height",h=a.offsetWidth,f=parseFloat(t.getPropertyValue("padding-left"))+parseFloat(t.getPropertyValue("padding-right")),_=parseFloat(l.getPropertyValue("margin-left"))+parseFloat(l.getPropertyValue("margin-right"));}switch(a.scalePosition){case"near":n.setProperty(p,o+"px"),s.setProperty(p,i(isNaN?0:d,h-f-o-4-_-u)+"px");break;case"far":r.setProperty(p,o+"px"),s.setProperty(p,i(isNaN?0:d,h-f-o-4-_-u)+"px");break;case"both":n.setProperty(p,o+"px"),r.setProperty(p,o+"px"),s.setProperty(p,i(isNaN?0:d,h-f-2*o-4-_-u)+"px");break;case"none":s.setProperty(p,"");}s.setProperty(g,"100%"),n.setProperty(g,"100%"),r.setProperty(g,"100%")}}_appendTicksAndLabelsToScales(t,i){function a(a){a.innerHTML=i,"scale"===n.ticksPosition&&(a.innerHTML+=t)}const n=this;switch(n.scalePosition){case"near":a(n.$.scaleNear);break;case"far":a(n.$.scaleFar);break;case"both":a(n.$.scaleNear),a(n.$.scaleFar);}"track"===n.ticksPosition&&(n.$.trackTicksContainer.innerHTML=t)}_discardDecimalSeparator(t,i){const a=this;if(void 0===i&&(i=a.decimalSeparator),"."!==i){let a=new RegExp(i,"g");return"string"==typeof t?t.replace(a,"."):t.toString().replace(a,".")}return t}_applyDecimalSeparator(t){const i=this;return"string"!=typeof t&&(t=t.toString()),"."!==i.decimalSeparator&&(t=t.replace(/\./g,i.decimalSeparator)),t}_validate(t,i,a){var n=Math.log10;const o=this;let l=t?o.value:i;let r,s;!0!==a&&o.coerce?(r=o._numericProcessor.createDescriptor(l,!0,!0,!0),r=o.logarithmicScale?Math.pow(10,o._numericProcessor.getCoercedValue(n(r))):o._numericProcessor.getCoercedValue(r),s=r):(r=o._numericProcessor.createDescriptor(l,!0,!0,!1),s=o._numericProcessor.validate(r,o._minObject,o._maxObject)),o._numericProcessor.regexScientificNotation.test(s)&&(s=o._numericProcessor.scientificToDecimal(s)),s=o._discardDecimalSeparator(s,o.decimalSeparator),t?(o._number=s,o._drawValue=o.logarithmicScale?n(s):s,"numeric"===o.mode?o.value=r.toString():(o._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(r),o.value=r),delete o._valueBeforeCoercion,o._moveThumbBasedOnValue(o._drawValue),o._programmaticValueIsSet=!1):o._numericProcessor.updateValue(r)}_changeScaleType(){const t=this;t._numericProcessor=new Smart.Utilities.NumericProcessor(t,"scaleType"),t._validateMinMax("both"),t._setTicksAndInterval(),t._scaleTypeChangedFlag=!0,t._validate(!0,t._number.toString()),t._scaleTypeChangedFlag=!1}_setTicksAndInterval(){const t=this;if(!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);let i=t._formatLabel(t.min),a=t._formatLabel(t.max);t._getRange(),t._tickIntervalHandler=new Smart.Utilities.TickIntervalHandler(t,i,a,"smart-label",t._settings.size,"integer"===t.scaleType,t.logarithmicScale),t._layout(),t.customInterval?("date"===t.mode&&t._calculateTickInterval(),t._intervalHasChanged=!0,t._numericProcessor.addCustomTicks()):(t._calculateTickInterval(),t._dateInterval?(t._intervalHasChanged=!0,t._numericProcessor.addCustomTicks()):t._numericProcessor.addTicksAndLabels())}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_keyIncrementDecrement(t,i){const a=this,n="add"===t?1:-1,o=void 0===i;if(o&&(i=a.logarithmicScale?new Smart.Utilities.BigNumber(a._drawValue):a._drawValue),a.customInterval&&a.coerce){o&&(a.logarithmicScale&&(i=a.value),"numeric"===a.mode&&(i=i.toString()));let l,r;"numeric"===a.mode?(l=-1===a.customTicks.indexOf(a.min)?[a.min].concat(a.customTicks):a.customTicks.slice(0),r=l.indexOf(i)):(l=-1===a.customTicks.findIndex(function(t){return 0===t.compare(a._drawMin)})?[a._drawMin].concat(a.customTicks):a.customTicks.slice(0),r=l.findIndex(function(t){return 0===t.compare(i)}));const s=l[r+1*n];return void 0===s?i===a.max&&"subtract"===t?l[l.length-2]:i:s}if("numeric"===a.mode){let n=a._numericProcessor.incrementDecrement(i,t,a._validInterval);return a.logarithmicScale&&(a._drawValue=n,n=Math.pow(10,Math.round(n))),n}return a._valueDate[a._dateIncrementMethod](n*parseFloat(a.interval),!1),a._drawValue=new Smart.Utilities.BigNumber(a._valueDate.getTimeStamp()),-1===a._drawValue.compare(a._drawMin)?new Smart.Utilities.BigNumber(a._drawMin):1===a._drawValue.compare(a._drawMax)?new Smart.Utilities.BigNumber(a._drawMax):a._drawValue}_keydownHandler(t){const i=this;if(i.disabled||i.readonly)return;const a=t.charCode?t.charCode:t.which;if(-1===[35,36,37,38,39,40].indexOf(a))return;const n=-1<[35,38,39].indexOf(a),o=-1<[36,37,40].indexOf(a);if(t.preventDefault(),"floatingPoint"!==i.scaleType){let t=new Smart.Utilities.BigNumber(i._drawValue);if(1!==t.compare(i._drawMin)&&o||-1!==t.compare(i._drawMax)&&n)return}else if(parseFloat(i.value)<=parseFloat(i.min)&&o||parseFloat(i.value)>=parseFloat(i.max)&&n)return;let l;return 40===a||37===a?l=i._keyIncrementDecrement("subtract"):38===a||39===a?l=i._keyIncrementDecrement("add"):36===a?(i._drawValue=i._drawMin,l=i.min):35===a?(i._drawValue=i._drawMax,l=i.max):void 0,i._validate(!1,l,a),!1}_setDrawVariables(){var t=Math.log10;const i=this;i.logarithmicScale?(i._drawValue=t(i.value),i._drawMin=t(i.min),i._drawMax=t(i.max)):(i._drawValue=i.value,i._drawMin=i.min,i._drawMax=i.max)}_validateOnLogarithmicScale(t,i){function a(t){return Math.pow(10,Math.round(n(t)-0.7403626894942439+.5))}var n=Math.log10;const o=this;if(t)if(0>=o.min)o.min=1,o._drawMin=0;else if(0!=n(o.min)%1){let t=a(parseFloat(o.min));t>o.min&&(t/=10),o._drawMin=n(o.min)}else o._drawMin=n(o.min);if(i)if(0>=o.max)o.max=1,o._drawMax=0;else if(0!=n(o.max)%1){let t=a(parseFloat(o.max));t<o.max&&(t*=10),o._drawMax=n(o.max)}else o._drawMax=n(o.max);"integer"===o.scaleType&&(0>o._drawMin&&(o._drawMin=0,o.min=1),0>o._drawMax&&(o._drawMax=1,o.max=10)),o._drawMax===o._drawMin&&(o._drawMax=o._drawMin+1)}_getLayoutType(){const t=this,i=t.orientation,a=t.inverted;t._normalLayout="horizontal"===i&&!a||"vertical"===i&&a}_trackOnMouseEnterHandler(){const t=this;t.readonly||t.disabled||(t.$track.addClass("track-hovered"),t.$.track.setAttribute("hover",""))}_trackOnMouseLeaveHandler(){const t=this;t.readonly||t.disabled||(t.$track.removeClass("track-hovered"),t.$.track.removeAttribute("hover"))}_isVisible(){const t=this;return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}_coerceCustomInterval(){const t=this;if(t.coerce){const i=t._valueBeforeCoercion,a=t.logarithmicScale?Math.pow(10,t._numericProcessor.getCoercedValue(Math.log10(t.value))):t._numericProcessor.getCoercedValue(t.value);t._validate(!1,a,!0),t._valueBeforeCoercion=i}}_handleDateScale(){const t=this,i=Smart.Utilities.DateTime;i||t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:"smart.date.js"})),t._customTicks=t.customTicks,t._unitToMethod={Y:"addSeconds",Z:"addMilliseconds",E:"addMicroseconds",P:"addNanoseconds",T:"addPicoseconds",G:"addFemtoseconds",M:"addAttoseconds",k:"addZeptoseconds"},t._minDate=i.validateDate(t.min),t.min=t._minDate.getTimeStamp(),t._maxDate=i.validateDate(t.max),t.max=t._maxDate.getTimeStamp(),t.rangeSlider||(t._valueDate=i.validateDate(t.value),t.value=t._valueDate.getTimeStamp()),t._properties.min.serialize="_serializeMin",t._properties.max.serialize="_serializeMax",t._properties.value.serialize="_serializeValue",t.scaleType="integer",t.logarithmicScale=!1,t.wordLength="uint64";const a=["min","max","value"];for(let n=0;n<a.length;n++){const i=a[n];Object.defineProperty(t,i,{get:function(){return t.context===t?t.properties[i].value:t["_"+i+"Date"]},set(a){t.updateProperty(t,t._properties[i],a)}})}t._getEventValue=function(){return t._valueDate.clone()}}_serializeMin(){return this._minDate.toString()}_serializeMax(){return this._maxDate.toString()}_serializeValue(){return this._valueDate.toString()}_redefineProperty(t){const i=this;Object.defineProperty(i,t,{get:function(){return i.properties[t].value},set(a){function n(t,i){return i instanceof Smart.Utilities.BigNumber?i.toString():i}const o=i.properties[t].value,l=JSON.stringify(o,n),r=JSON.stringify(a,n);if(l!==r&&(i.properties[t].value=a,i.isReady&&(!i.ownerElement||i.ownerElement&&i.ownerElement.isReady)&&i.context!==i)){const n=i.context;i.context=i,i.propertyChangedHandler(t,o,a),i.context=n}}})}}),Smart("smart-gauge",class extends Smart.Tank{static get properties(){return{analogDisplayType:{value:"needle",allowedValues:["needle","fill","line"],type:"string"},animationDuration:{value:300,type:"number"},digitalDisplay:{value:!1,type:"boolean"},digitalDisplayPosition:{value:"bottom",allowedValues:["top","bottom","right","left","center"],type:"string"},drawNeedle:{value:null,type:"function?"},endAngle:{value:210,type:"number"},needlePosition:{value:"center",allowedValues:["center","edge"],type:"string"},ranges:{value:[],type:"array"},scalePosition:{value:"inside",allowedValues:["outside","inside","none"],type:"string"},showRanges:{value:!1,type:"boolean"},sizeMode:{value:"circle",allowedValues:["circle","auto"],type:"string"},startAngle:{value:-30,type:"number"}}}static get listeners(){return{down:"_downHandler",resize:"_resizeHandler",styleChanged:"_styleChangedHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.selectstart":"_selectStartHandler",keydown:"_keydownHandler",move:"_trackMoveHandler"}}static get requires(){return{"Smart.Utilities.Draw":"smart.draw.js","Smart.NumericTextBox":"smart.numerictextbox.js"}}template(){return"<div id=\"container\">\n                <div id=\"svgContainer\" class=\"smart-svg-container\"></div>\n                <div class=\"smart-digital-display-container\">\n                    <smart-numeric-text-box id=\"digitalDisplay\"\n                                            class=\"smart-digital-display\"\n                                            decimal-separator=\"[[decimalSeparator]]\"\n                                            max=\"[[max]]\"\n                                            min=\"[[min]]\"\n                                            name=\"[[name]]\"\n                                            readonly\n                                            input-format=\"[[scaleType]]\"\n                                            scientific-notation=\"[[scientificNotation]]\"\n                                            show-unit=\"[[showUnit]]\"\n                                            unit=\"[[unit]]\"\n                                            unfocusable\n                                            word-length=\"[[wordLength]]\">\n                    </smart-numeric-text-box>\n                </div>\n            </div>"}attached(){const t=this;super.attached();t.isCompleted&&(t._trackListener&&(t._trackListener=new Smart.Utilities.InputEvents(t._track),t._trackListener.down(function(i){t._SVGElementDownHandler(i)})),t._fillListener&&(t._fillListener=new Smart.Utilities.InputEvents(t._fill),t._fillListener.down(function(i){t._SVGElementDownHandler(i)})),t._lineListener&&(t._lineListener=new Smart.Utilities.InputEvents(t._line),t._lineListener.down(function(i){t._SVGElementDownHandler(i)})))}detached(){const t=this;super.detached(),t._unlisten()}ready(){super.ready()}getOptimalSize(){const t=this;return t._renderingSuspended?{width:0,height:0}:"circle"===t.sizeMode?{width:t.offsetWidth,height:t._updateSize(!0)}:{width:t.offsetWidth,height:t.offsetHeight}}val(t){const i=this;if(void 0===t)return i._getEventValue();if("date"===i.mode&&(t=Smart.Utilities.DateTime.validateDate(t),t=t.getTimeStamp()),i._numericProcessor.compare(t,i.value)){const a=i.value;if(i._validateValue(t,i.value),!i._isVisible()||i._renderingSuspended)return void(i._renderingSuspended=!0);i._animate(a)}}_createElement(){const t=this;return"numeric"===t.mode?t._getEventValue=function(){return t.value}:(t._handleDateScale(),t.digitalDisplay=!1),t._numericProcessor=new Smart.Utilities.NumericProcessor(t,"scaleType"),t._numberRenderer=new Smart.Utilities.NumberRenderer,t._draw=new Smart.Utilities.Draw(t.$.svgContainer),t._isVisible()?void(t._renderingSuspended=!1,t._setSettingsObject(),t._wordLengthNumber=t._numericProcessor.getWordLength(t.wordLength),t._measurements={},t._validateInitialPropertyValues(),t._getMeasurements(),t._setDrawVariables(),t._getRange(),t._numericProcessor.getAngleRangeCoefficient(),"numeric"!==t.mode&&t.coerce?t._coerceInitialDateValue=!0:t._validateValue(),t._initTickIntervalHandler(),t._renderAnalogItems(),delete t._preventResizeHandler,t._setFocusable(),t._setUpdatePointerMethod()):void(t._renderingSuspended=!0)}propertyChangedHandler(t,i,a){function n(a,n,l,r){const s=a&&n?"both":t;o._validateMinMax(s,!1,i);"logarithmicScale"!==t&&"scaleType"!==t&&("wordLength"!==t&&o[t]===i||"wordLength"===t&&o.min===l&&o.max===r)||(o._setDrawVariables(),o._getRange(),o._numericProcessor.getAngleRangeCoefficient(),o._initTickIntervalHandler(),o._renderAnalogItems(),o._validateValue(),o._updatePointer())}const o=this;if(!o._isVisible()||o._renderingSuspended)return void(o._renderingSuspended=!0);switch(t){case"analogDisplayType":delete o._customSVGElements,o._getMeasurements(),"needle"===a&&"center"===o.digitalDisplayPosition?o.digitalDisplayPosition="bottom":"needle"===i&&"bottom"===o.digitalDisplayPosition&&(o.digitalDisplayPosition="center"),o._renderAnalogItems(),o._setUpdatePointerMethod();break;case"coerce":if(a){const t=o.value;o._validateValue(t),o._updatePointer(),o._valueBeforeCoercion=t}else void 0!==o._valueBeforeCoercion&&(o._validateValue(o._valueBeforeCoercion),o._updatePointer());break;case"customInterval":a?(o._customTicks&&(o.customTicks=o._customTicks),o._numericProcessor.validateCustomTicks()):"date"===o.mode&&(o._customTicks=o.customTicks),o._initTickIntervalHandler(),o._renderAnalogItems(),o._coerceCustomInterval();break;case"customTicks":if("date"===o.mode&&!o.customInterval)return o._customTicks=a,void(o.customTicks=i);o._numericProcessor.validateCustomTicks(),o.customInterval&&(o._initTickIntervalHandler(),o._renderAnalogItems(),o._coerceCustomInterval());break;case"dateLabelFormatString":case"showUnit":case"unit":o._initTickIntervalHandler(),o._renderAnalogItems();break;case"decimalSeparator":case"scientificNotation":if("date"===o.mode)return;o._initTickIntervalHandler(),o._renderAnalogItems();break;case"digitalDisplay":case"digitalDisplayPosition":if("date"===o.mode)return void("digitalDisplay"===t&&(o.digitalDisplay=!1));o._updateSize();break;case"mechanicalAction":case"messages":case"readonly":break;case"disabled":case"unfocusable":o._setFocusable();break;case"drawNeedle":if("needle"!==o.analogDisplayType)return;null===i&&o._draw.removeElement(o._needle),null===a?(o._renderAnalogItems(),delete o._customSVGElements):o._updatePointer();break;case"endAngle":case"startAngle":o._validateAngles(),o._numericProcessor.getAngleRangeCoefficient(),o._renderAnalogItems();break;case"interval":o._numericProcessor.validateInterval(o.interval),o._validateValue(),o._updatePointer();break;case"inverted":case"labelFormatFunction":case"showRanges":o._renderAnalogItems();break;case"labelsVisibility":if("all"===i&&"endPoints"===a||"endPoints"===i&&"all"===a)return;o._getMeasurements(),o._renderAnalogItems();break;case"logarithmicScale":if("date"===o.mode)return void(o.logarithmicScale=!1);o._initTickIntervalHandler(),n(!0,!0);break;case"max":case"min":"date"===o.mode&&(delete o._dateInterval,o[t]=Smart.Utilities.DateTime.validateDate(a).getTimeStamp()),n("min"===t,"max"===t);break;case"mode":o.mode=i;break;case"needlePosition":"needle"===o.analogDisplayType&&o._updatePointer();break;case"precisionDigits":case"significantDigits":if("date"===o.mode)return;"precisionDigits"===t&&"integer"===o.scaleType&&o.error(o.localize("noInteger",{elementType:o.nodeName.toLowerCase(),property:t})),"significantDigits"===t&&null!==o.precisionDigits?o.precisionDigits=null:"precisionDigits"==t&&null!==o.significantDigits&&(o.significantDigits=null),null!==a&&(o.$.digitalDisplay.precisionDigits=o.precisionDigits,o.$.digitalDisplay.significantDigits=o.significantDigits),o._initTickIntervalHandler(),o._renderAnalogItems();break;case"ranges":if(!o.showRanges)return;o._renderAnalogItems();break;case"scaleType":if("date"===o.mode)return void(o.scaleType="integer");o._numericProcessor=new Smart.Utilities.NumericProcessor(o,"scaleType"),n(!0,!0);break;case"scalePosition":case"ticksPosition":o._getMeasurements(),o._renderAnalogItems();break;case"sizeMode":o._preventResizeHandler=!0,"circle"===a?(o.$.container.removeAttribute("style"),o.style.height=o.offsetWidth+"px",o._measurements.cachedHeight=o.offsetHeight):(o.$.container.style.height=o.offsetWidth+"px",o._updateSize());break;case"theme":super.propertyChangedHandler(t,i,a),o._getMeasurements(),o._renderAnalogItems();break;case"ticksVisibility":if("minor"===i&&"major"===a||"major"===i&&"minor"===a)return;o._getMeasurements(),o._renderAnalogItems();break;case"value":{"date"===o.mode&&(a=Smart.Utilities.DateTime.validateDate(a),a=a.getTimeStamp()),o._validateValue(a,i);const t=a.toString();o.value.toString()===t&&(o._drawValue=o.logarithmicScale?Math.log10(t).toString():t),o._animate(i);break}case"wordLength":if("date"===o.mode)return void(o.wordLength="uint64");o._wordLengthNumber=o._numericProcessor.getWordLength(o.wordLength),"integer"===o.scaleType&&n(!0,!0,o.min,o.max);}}_addAnalogDisplay(){const t=this,i=t._measurements,a=i.radius,n=t._draw;if("needle"===t.analogDisplayType){t._drawNeedle(!1);const o=(i.needleWidth+5)/2;t._centralCircle=n.circle(a,a,o,{class:"smart-needle-central-circle"}),t._minCoordinates.push(a-o),t._maxCoordinates.push(a+o)}else{const o=a-t._distance.trackDistance-i.trackBorderWidth/2-1;t._track=n.pieslice(a,a,o-i.trackWidth,o,t.startAngle,t.endAngle,0,{class:"smart-track"}),t._trackListener=new Smart.Utilities.InputEvents(t._track),t._trackListener.down(function(i){t._SVGElementDownHandler(i)})}}_calculateTickAndLabelDistance(){const t=this,i=t._measurements;if("none"===t.scalePosition)return t._plotLabels=!1,t._plotTicks=!1,i.innerRadius=i.radius,{majorTickDistance:0,minorTickDistance:0,labelDistance:0,needleDistance:0,trackDistance:0};const a=t._tickIntervalHandler.labelsSize,n=t._largestLabelSize||Math.max(a.minLabelSize,a.minLabelOtherSize,a.maxLabelSize,a.maxLabelOtherSize);let o=1,l=0,r,s,d;return t._largestLabelSize=n,"outside"===t.scalePosition&&(o=n,r=o+i.majorTickSize-i.minorTickSize,s=0),"needle"===t.analogDisplayType?(d="outside"===t.scalePosition?o+i.majorTickSize:o+i.majorTickSize+n,"none"===t.ticksVisibility&&(s=0,d-=i.majorTickSize),"none"===t.labelsVisibility&&(d-=n,"outside"===t.scalePosition&&(o-=n,r-=n))):"none"===t.labelsVisibility&&"none"===t.ticksVisibility?l=0:"outside"===t.scalePosition?"scale"===t.ticksPosition?("none"===t.labelsVisibility&&(o=1,r=1+i.majorTickSize-i.minorTickSize),l="none"===t.ticksVisibility?n:o+i.majorTickSize+2):"none"===t.labelsVisibility?(o=1,r=(i.trackWidth+i.trackBorderWidth)/4+1,l=0):(r-=(i.trackWidth+i.trackBorderWidth)/4,l=o-1):"scale"===t.ticksPosition?(o=i.trackWidth+1.5*i.trackBorderWidth+2,"none"===t.ticksVisibility&&(s=o)):r=(i.trackWidth+i.trackBorderWidth)/4+1,void 0===r&&(r=o),void 0===s&&(s=o+i.majorTickSize),i.innerRadius=i.radius-s,delete t._plotLabels,delete t._plotTicks,delete t._equalToHalfRadius,"inside"===t.scalePosition?i.innerRadius<n&&(t._plotLabels=!1,"scale"===t.ticksPosition?"needle"!==t.analogDisplayType&&i.innerRadius<i.majorTickSize&&(t._plotTicks=!1):(t._equalToHalfRadius=!0,i.innerRadius=i.radius/2)):i.radius-l-i.trackBorderWidth<i.trackWidth&&(i.trackWidth=i.radius-l-i.trackBorderWidth,i.lineSize=i.trackWidth+i.trackBorderWidth,"track"===t.ticksPosition&&(i.majorTickSize=i.lineSize,i.minorTickSize=i.majorTickSize/2,r=o+(i.majorTickSize-i.minorTickSize)/2)),{majorTickDistance:o,minorTickDistance:r,labelDistance:s,needleDistance:d,trackDistance:l}}_calculateTickInterval(){const t=this,i=t._tickIntervalHandler.getInterval("radial",t._drawMin,t._drawMax,t.$.container,t.logarithmicScale);i.major===t._majorTicksInterval?t._intervalHasChanged=!0:(t._intervalHasChanged=!0,t._majorTicksInterval=i.major),t._minorTicksInterval=i.minor,"date"===t.mode&&t._calculateDateInterval(i.major)}_computeNeedlePointsCenter(t,i){const a=this,n=a._measurements,o=n.innerRadius,l=n.radius,r=Math.sin(i),s=Math.cos(i);let d="inside"===a.scalePosition?.9*(o-a._largestLabelSize):.9*(o-a._distance.needleDistance);const m=l+d*r,c=l+d*s;return"M "+(l+t*s)+","+(l-t*r)+" L "+(l-t*s)+","+(l+t*r)+" L "+m+","+c+" Z"}_computeNeedlePointsEdge(t,i,a){const n=this,o=n._measurements.radius,l=o-n._distance.needleDistance,r=l-a,s=Math.sin(i),d=Math.cos(i),m=o+r*s,c=o+r*d;return"M "+(m+t*d)+","+(c-t*s)+" L "+(m-t*d)+","+(c+t*s)+" L "+(o+l*s)+","+(o+l*d)+" Z"}_documentMoveHandler(t){if(!this._dragging)return;const i=this,a=i._getAngleByCoordinate(t.pageX,t.pageY),n=i._getQuadrant(a),o=i._getRotationDirection();if(i._normalizedStartAngle===i.endAngle){let t;i.inverted?i._lockCW&&"cw"===o?(t=i._normalizedStartAngle,i._unlockRotation("_lockCW",a,n,t,{firstCondition:a<t,secondCondition:a>t})):i._lockCCW&&"ccw"===o&&(t=i.endAngle,i._unlockRotation("_lockCCW",a,n,t,{firstCondition:a>t,secondCondition:a<t})):i._lockCW&&"ccw"===o?(t=i.endAngle,i._unlockRotation("_lockCW",a,n,t,{firstCondition:a>t,secondCondition:a<t})):i._lockCCW&&"cw"===o&&(t=i._normalizedStartAngle,i._unlockRotation("_lockCCW",a,n,t,{firstCondition:a<t,secondCondition:a>t}))}else i._lockCW&&"ccw"===o&&!i._outsideRange&&10>i._numericProcessor._getAngleDifference(a,i._normalizedStartAngle)?i._lockCW=!1:i._lockCCW&&"cw"===o&&!i._outsideRange&&10>i._numericProcessor._getAngleDifference(a,i.endAngle)&&(i._lockCCW=!1);if(i._angle=a,i._quadrant=n,t.originalEvent&&(t.originalEvent.stopPropagation(),t.originalEvent.preventDefault()),i._lockCW||i._lockCCW)return;let l=i._numericProcessor.getValueByAngle(a);if(i._normalizedStartAngle===i.endAngle){const t=i._numericProcessor.lockRotation("cw"===o&&!i.inverted||"ccw"===o&&i.inverted,l);void 0!==t&&(l=t)}else"ccw"===o&&i._outsideEnd?i._lockCCW=!0:"cw"===o&&i._outsideStart&&(i._lockCW=!0);void 0!==l&&i._numericProcessor.compare(l,i.value)&&(cancelAnimationFrame(i._animationFrameId),i._updatePointer(l),"switchWhenReleased"===i.mechanicalAction?i._valueAtMoveEnd=l:i._numericProcessor.updateGaugeValue(l))}_documentUpHandler(){const t=this;if(t._dragging&&(t._lockCW=!1,t._lockCCW=!1,t._dragging=!1,t.removeAttribute("dragged"),"switchWhileDragging"!==t.mechanicalAction)){const i="switchUntilReleased"===t.mechanicalAction?t._valueAtDragStart:t._valueAtMoveEnd;t._numericProcessor.compare(i,t.value)&&("switchUntilReleased"===t.mechanicalAction&&t._animate(t.value,i),t._numericProcessor.updateGaugeValue(i))}}_downHandler(t,i){var a=Math.pow;const n=this;if("needle"!==n.analogDisplayType&&!i||n.disabled||n.readonly||n.$.digitalDisplay.contains(t.originalEvent.target)||!Smart.Utilities.Core.isMobile&&("buttons"in t&&1!==t.buttons||1!==t.which))return void t.stopPropagation();const o=t.pageX,l=t.pageY;if(n._measurements.center=n._getCenterCoordinates(),"needle"===n.analogDisplayType){const i=Math.sqrt(a(n._measurements.center.x-o,2)+a(n._measurements.center.y-l,2));if(i>n._measurements.radius)return void t.stopPropagation()}"switchUntilReleased"===n.mechanicalAction&&(n._valueAtDragStart=n.value),n._angle=n._getAngleByCoordinate(o,l),n._quadrant=n._getQuadrant(n._angle);const r=n._numericProcessor.getValueByAngle(n._angle);void 0!==r&&n._numericProcessor.compare(r,n.value)&&(n._animate(n.value,r),"switchWhenReleased"===n.mechanicalAction?n._valueAtMoveEnd=r:n._numericProcessor.updateGaugeValue(r)),n._dragging=!0,n.setAttribute("dragged","")}_animate(t,a){function n(){u=p(),d&&(u=Math.pow(10,u))}function o(){return c++,c===m?(u=a,void s._updatePointer(u)):void(s._updatePointer(u),n(),s._animationFrameId=requestAnimationFrame(o))}var l=Math.log10,r=Math.max;const s=this,d=s.logarithmicScale,m=r(1,Math.round(s.animationDuration/15));if(cancelAnimationFrame(s._animationFrameId),!s.hasAnimation||1===m)return void s._updatePointer(a);let c=1,u,p,g,h;t=parseFloat(t),void 0===a&&(a=s.value),d?(g=l(t),h=l(a)):(g=t,h=a);const _=Math.abs(h-g);p=a>t?function(){return Math.min(Smart.Utilities.Animation.Easings.easeInOutSine(c,g,_,m),h)}:function(){return r(2*g-Smart.Utilities.Animation.Easings.easeInOutSine(c,g,_,m),h)},n(),s._animationFrameId=requestAnimationFrame(o)}_drawFill(t,i){const a=this;if("needle"!==a.analogDisplayType){void 0===i&&(i=a._number);const n=a._measurements,o=n.radius,l=o-a._distance.trackDistance-n.trackBorderWidth/2-1;if("fill"===a.analogDisplayType){const r=a._numericProcessor.getAngleByValue(i,!0,!0);let s,d;a.inverted?(s=a.startAngle,d=r):(s=r,d=a.endAngle),t?a._fill.setAttribute("d",a._draw.pieSlicePath(o,o,l-n.trackWidth,l,s,d,0)):(a._fill=a._draw.pieslice(o,o,l-n.trackWidth,l,s,d,0,{class:"smart-value"}),a._fillListener=new Smart.Utilities.InputEvents(a._fill),a._fillListener.down(function(t){a._SVGElementDownHandler(t)}))}else{const r=l+n.trackBorderWidth/2,s=r-n.lineSize,d=a._numericProcessor.getAngleByValue(i),m=Math.sin(d),c=Math.cos(d),u=o+r*m,p=o+r*c,g=o+s*m,h=o+s*c;t?(a._line.setAttribute("x1",u),a._line.setAttribute("y1",p),a._line.setAttribute("x2",g),a._line.setAttribute("y2",h)):(a._line=a._draw.line(u,p,g,h,{class:"smart-line"}),a._lineListener=new Smart.Utilities.InputEvents(a._line),a._lineListener.down(function(t){a._SVGElementDownHandler(t)}))}}}_drawLabel(t,i,a,n){var o=Math.round;const l=this,s=l._measurements,d=s.radius,r={class:"smart-label"+(!1===n?"":" smart-label-middle"),"font-size":s.fontSize,"font-family":s.fontFamily,"font-weight":s.fontWeight,"font-style":s.fontStyle};i=l._formatLabel(i.toString(),!1);const m=l._draw.measureText(i,0,r),c=d-a-l._largestLabelSize/2,u=o(d+c*Math.sin(t))-m.width/2,p=o(d+c*Math.cos(t))-m.height/2,g=l._draw.text(i,u,p,m.width,m.height,0,r);l._minCoordinates.push(p),l._maxCoordinates.push(p+g.getBBox().height)}_drawNeedle(t,i){const a=this,n=a._measurements;i===void 0&&(i=a._number);const o=a._numericProcessor.getAngleByValue(i);if(!a.drawNeedle){let i;i="center"===a.needlePosition?a._computeNeedlePointsCenter(n.needleWidth/2,o):a._computeNeedlePointsEdge(n.needleWidth/2,o,n.needleLength),t?a._needle.setAttribute("d",i):a._needle=a._draw.path(i,{class:"smart-needle"})}else if(a._customSVGElements=a.drawNeedle(a,a._draw,n.radius,o,a._distance.needleDistance),a._customSVGElements){const t=a._customSVGElements[0].parentElement||a._customSVGElements[0].parentNode;for(let n=0;n<a._customSVGElements.length;n++)t.insertBefore(a._customSVGElements[n],a._centralCircle)}}_drawRanges(){const t=this,a=t._numericProcessor,n=t.ranges;if(!t.showRanges||0===n.length)return;const i=t._measurements,o=i.radius;let l,r,s,d;"needle"===t.analogDisplayType?(r=i.rangeSize,"inside"===t.scalePosition?l=o-1:(l=o-t._distance.needleDistance-2,"none"===t.labelsVisibility&&"none"===t.ticksVisibility&&(l+=1))):(l=o-t._distance.trackDistance-i.trackBorderWidth/2-1,r=i.trackWidth),t.inverted?(s="endValue",d="startValue"):(s="startValue",d="endValue");for(let m=0;m<n.length;m+=1){let i=n[m],c=a.validateColorRange(i[s]),u=a.validateColorRange(i[d]);const p=t._draw.pieslice(o,o,l-r,l,a.getAngleByValue(u,!0,!0),a.getAngleByValue(c,!0,!0),0,{class:"smart-range "+i.className});t._ranges.push(p)}}_drawTick(t,i,a){var n=Math.sin,o=Math.cos;const l=this,s=l._measurements,d=s.radius;let r="smart-tick",m;"major"===a?m=s.majorTickSize:(m=s.minorTickSize,r+=" smart-tick-minor");const c=i-m,u=d+i*n(t),p=d+i*o(t),g=d+c*n(t),h=d+c*o(t);l._draw.line(u,p,g,h,{class:r}),l._minCoordinates.push(Math.min(p,h)),l._maxCoordinates.push(Math.max(p,h))}_getAngleByCoordinate(t,i){const a=this,n=a._measurements.center,o=Math.atan2(i-n.y,t-n.x);let l=180*(-1*o)/Math.PI;return 0>l&&(l+=360),a._actualAngle=l,a._normalizedStartAngle===a.endAngle||function(t,i,a){for(;i<t;)i+=360;for(;a<t;)a+=360;return a>=t&&a<=i}(a._normalizedStartAngle,a.endAngle,l)?(a._outsideRange=!1,a._outsideStart=!1,a._outsideEnd=!1):(a._numericProcessor._getAngleDifference(l,a._normalizedStartAngle)<=a._numericProcessor._getAngleDifference(l,a.endAngle)?(l=a._normalizedStartAngle,a._outsideStart=!0,a._outsideEnd=!1):(l=a.endAngle,a._outsideEnd=!0,a._outsideStart=!1),a._outsideRange=!0),l}_getCenterCoordinates(){const t=this,i=t.$.container.getBoundingClientRect(),a=t._measurements.radius,n=document.body.scrollLeft||document.documentElement.scrollLeft,o=document.body.scrollTop||document.documentElement.scrollTop;return{x:i.left+n+a,y:i.top+o+a}}_getInlineColors(){const t=this;let i="",a="",n="";return t._track&&(i=t._track.style.fill),t._fill&&(a=t._fill.style.fill),t._line&&(n=t._line.style.stroke),[i,a,n]}_getMeasurements(){const t=this;if(!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);const i=t._measurements;i.cachedWidth=t.offsetWidth,i.cachedHeight=t.offsetHeight,i.radius=i.cachedWidth/2;const a=document.createElement("div");t.appendChild(a),a.className="smart-tick",i.majorTickSize=a.offsetWidth,a.className+=" smart-tick-minor",i.minorTickSize=a.offsetWidth,a.className="smart-label";const n=window.getComputedStyle(a);i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.fontWeight=n.fontWeight,i.fontStyle=n.fontStyle,i.trackWidth=0,i.trackBorderWidth=0,"needle"===t.analogDisplayType?(a.className="smart-needle",i.needleWidth=a.offsetWidth,i.needleLength=a.offsetHeight,a.className="smart-range",i.rangeSize=a.offsetWidth):(a.className="smart-track",i.trackBorderWidth=parseFloat(n.strokeWidth),i.trackWidth=Math.min(a.offsetWidth,i.radius-i.trackBorderWidth),i.lineSize=i.trackWidth+i.trackBorderWidth,"track"===t.ticksPosition&&(i.majorTickSize=i.lineSize,i.minorTickSize=i.majorTickSize/2)),t.removeChild(a)}_getQuadrant(t){return 270<t?4:180<t?3:90<t?2:1}_getRotationDirection(){const t=this,i=t._getQuadrant(t._actualAngle);return t._actualAngle<t._angle&&(1!==i||4!==t._quadrant)||t._actualAngle>t._angle&&4===i&&1===t._quadrant?"cw":"ccw"}_initTickIntervalHandler(){const t=this;if(!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);const i=t._formatLabel(t.min,!1),a=t._formatLabel(t.max,!1);t._tickIntervalHandler=new Smart.Utilities.TickIntervalHandler(t,i,a,"smart-label",t._settings.size,"integer"===t.scaleType,t.logarithmicScale)}_keydownHandler(t){const i=this,a=i._getEventValue(),n=i._number.toString();"numeric"===i.mode?(i.value.toString()!==n&&(i.value=n,i.$.digitalDisplay.value=n),super._keydownHandler(t),i.value.toString()!==a&&i.$.fireEvent("change",{value:i.value,oldValue:a})):(i.value.toString()!==n&&(i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(n),i.value=i._number,i.$.digitalDisplay.$.input.value=i._valueDate),super._keydownHandler(t),0!==i._valueDate.compare(a)&&i.$.fireEvent("change",{value:i._getEventValue(),oldValue:a}))}_normalizeAngle(t){return t%=360,0>t&&(t+=360),t}_renderAnalogItems(t){const i=this;if(!i._isVisible()||i._renderingSuspended)return void(i._renderingSuspended=!0);const a=i._getInlineColors();if(i._unlisten(),i._draw.clear(),delete i._needle,delete i._centralCircle,delete i._track,delete i._trackListener,delete i._fill,delete i._fillListener,delete i._line,delete i._lineListener,i._ranges=[],i._minCoordinates=[],i._maxCoordinates=[],!1!==t&&(delete i._largestLabelSize,i._distance=i._calculateTickAndLabelDistance()),!1!==i._plotTicks||!1!==i._plotLabels){i._calculateTickInterval();const a=i._cachedLabelsSize,n=Math.max(a.minLabelSize,a.minLabelOtherSize,a.maxLabelSize,a.maxLabelOtherSize);!1!==t&&i._largestLabelSize!==n&&(i._largestLabelSize=n,i._distance=i._calculateTickAndLabelDistance(),i._calculateTickInterval())}i._coerceInitialDateValue&&(i._validateValue(),delete i._coerceInitialDateValue),i._drawRanges(),i._addAnalogDisplay(),("none"!==i.ticksVisibility&&!1!==i._plotTicks||"none"!==i.labelsVisibility&&!1!==i._plotLabels)&&(i.customInterval||i._dateInterval?i._numericProcessor.addGaugeCustomTicks():i._numericProcessor.addGaugeTicksAndLabels()),i._drawFill(!1),i._updateSize(),i._restoreInlineColors(a[0],a[1],a[2])}_resizeHandler(){const t=this;if(t._preventResizeHandler)return void delete t._preventResizeHandler;if(!t._isVisible())return void(t._renderingSuspended=!0);if(t._renderingSuspended)return void t._createElement();const i=t._measurements;if(!(t._renderingSuspended||i.cachedWidth===t.offsetWidth&&i.cachedHeight===t.offsetHeight)){if("circle"===t.sizeMode)t.offsetWidth!==t.offsetHeight&&(i.cachedWidth===t.offsetWidth?i.cachedHeight!==t.offsetHeight&&(t.style.width=t.offsetHeight+"px",t._preventResizeHandler=!0):(t.style.height=t.offsetWidth+"px",t._preventResizeHandler=!0));else{if(i.cachedHeight!==t.offsetHeight&&i.cachedWidth===t.offsetWidth)return t.style.height=i.cachedHeight+"px",void(t._preventResizeHandler=!0);t.$.container.style.height=t.offsetWidth+"px"}i.cachedWidth=t.offsetWidth,i.cachedHeight=t.offsetHeight,i.radius=i.cachedWidth/2,i.innerRadius=t._equalToHalfRadius?i.radius/2:i.radius-t._distance.labelDistance,t._renderAnalogItems(!1)}}_restoreInlineColors(t,i,a){const n=this;n._track&&""!==t&&(n._track.style.fill=t),n._fill&&""!==i&&(n._fill.style.fill=i),n._line&&""!==a&&(n._line.style.stroke=a)}_selectStartHandler(t){this._dragging&&t.preventDefault()}_setUpdatePointerMethod(){const t=this;t._updatePointer="needle"===t.analogDisplayType?function(i){if(t._customSVGElements)for(let a=0;a<t._customSVGElements.length;a++)t._draw.removeElement(t._customSVGElements[a]);t._drawNeedle(!0,i)}:function(i){t._drawFill(!0,i)}}_styleChangedHandler(t){const i=this;return t.detail.styleProperties&&t.detail.styleProperties["min-height"]?void 0:i._isVisible()?i._renderingSuspended?void i._createElement():void(i._getMeasurements(),i._initTickIntervalHandler(),i._renderAnalogItems()):void(i._renderingSuspended=!0)}_SVGElementDownHandler(t){const i=this,a=i.context;i.context=i,i._downHandler(t,!0),i.context=a}_unlockRotation(t,i,a,n,o){const l=this,r=o.firstCondition,s=o.secondCondition,d=l._getQuadrant(n);(r&&(4!==a||1!==d)||s&&4===a&&1===d)&&10>l._numericProcessor._getAngleDifference(i,n)&&(l[t]=!1)}_updateSize(t){var a=Math.min,n=Math.max;const o=this;if("circle"===o.sizeMode&&void 0===t)return;const l=o._minCoordinates,r=o._maxCoordinates;let s=l[0],d=r[0];for(let n=1;n<l.length;n++)s=a(s,l[n]);for(let a=1;a<r.length;a++)d=n(d,r[a]);const m=o.getBoundingClientRect();if(o.digitalDisplay){const t=o.$.digitalDisplay.getBoundingClientRect();s=a(s,t.top-m.top),d=n(d,t.bottom-m.top)}if("needle"!==o.analogDisplayType){const t=o._track.getBBox();s=a(s,t.y),d=n(d,t.y+t.height)}for(let l=0;l<o._ranges.length;l++){const t=o._ranges[l].getBBox();s=a(s,t.y-m.top),d=n(d,t.y+t.height-m.top)}s-=2;const i=d-s;return void 0===t?void(o._preventResizeHandler=!0,o.style.height=i+"px",o.$.container.style.marginTop=-1*s+"px",o._measurements.cachedHeight=i):Math.round(i)}_updateValue(t){this._numericProcessor.updateGaugeValue(t)}_validate(t,i,a){const n=this,o=n.value;n._validateValue(i),a&&(35===a||36===a)?n._animate(o):n._updatePointer()}_validateAngles(){const t=this;t._normalizedStartAngle=t._normalizeAngle(t.startAngle),t.endAngle=t._normalizeAngle(t.endAngle),t.startAngle=t._normalizedStartAngle<t.endAngle?t._normalizedStartAngle:t._normalizedStartAngle-360,t._angleDifference=t.endAngle-t.startAngle}_validateInitialPropertyValues(){super._validateInitialPropertyValues();const t=this;"circle"===t.sizeMode?t.offsetWidth<t.offsetHeight?t.style.height=t.offsetWidth+"px":t.offsetWidth>t.offsetHeight&&(t.style.width=t.offsetHeight+"px"):(t.offsetHeight!==t.offsetWidth&&(t.style.height=t.offsetWidth+"px"),t.$.container.style.height=t.offsetWidth+"px"),t._validateAngles(),null===t.significantDigits?null!==t.precisionDigits&&(t.$.digitalDisplay.precisionDigits=t.precisionDigits):t.$.digitalDisplay.significantDigits=t.significantDigits}_validateValue(t,i){const a=this,n=a._numericProcessor,o=a.logarithmicScale;t=void 0===t?a.value:t.toString(),n.regexScientificNotation.test(t)&&(t=n.scientificToDecimal(t)),isNaN(t)&&(t=i||0);let l,r,s;a.coerce?(l=n.getCoercedValue(n.createDescriptor(t,!0,!0,!0),!1,o),a._number=l,r=l.toString(),s=r):(l=n.getCoercedValue(n.createDescriptor(t,!0,!0,!1),!1,o),a._number=n.validate(l,n.createDescriptor(a._minObject),n.createDescriptor(a._maxObject)),r=l.toString(),s=a._number.toString()),"numeric"===a.mode?(a.value=r,a.$.digitalDisplay.value=r):(a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(r),a.value=l,a.$.digitalDisplay.$.input.value=a._valueDate),a._drawValue=o?Math.log10(s).toString():s,delete a._valueBeforeCoercion}_unlisten(){const t=this;t._trackListener&&t._trackListener.unlisten(),t._fillListener&&t._fillListener.unlisten(),t._lineListener&&t._lineListener.unlisten()}}),Smart("smart-slider",class extends Smart.Tank{static get properties(){return{enableMouseWheelAction:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string",defaultReflectToAttribute:!0},rangeSlider:{value:!1,type:"boolean"},showButtons:{value:!1,type:"boolean"},values:{value:["0","100"],type:"array"}}}static get listeners(){return{"track.down":"_trackDownHandler","thumb.down":"_thumbDownHandler","secondThumb.down":"_thumbDownHandler","thumb.mouseleave":"_thumbMoveMouseleaveHandler","secondThumb.mouseleave":"_thumbMoveMouseleaveHandler","thumb.move":"_thumbMoveMouseleaveHandler","secondThumb.move":"_thumbMoveMouseleaveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","leftButton.click":"_spinButtonClickHandler","rightButton.click":"_spinButtonClickHandler",keydown:"_keydownHandlerSlider",keyup:"_keyupHandlerSlider",resize:"_resizeAndStyleChangedHandler",styleChanged:"_resizeAndStyleChangedHandler","document.selectstart":"_selectStartHandler",wheel:"_wheelHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}template(){return"<div id=\"container\" class=\"smart-container\">\n                <div id=\"scaleNear\" class=\"smart-scale smart-scale-near\"></div>\n                <div id=\"trackContainer\" class=\"smart-track-container\">\n                    <smart-repeat-button id=\"leftButton\" class=\"smart-spin-button\" animation=\"[[animation]]\" unfocusable>\n                        <div id=\"leftArrow\" class=\"smart-arrow\"></div>\n                    </smart-repeat-button>\n                    <div id=\"track\" class=\"smart-track\">\n                        <div id=\"fill\" class=\"smart-value\"></div>\n                        <div id=\"trackTicksContainer\" class=\"smart-track-ticks-container smart-hidden\"></div>\n                        <div id=\"thumb\" class=\"smart-thumb\">\n                            <span id=\"thumbLabel\" class=\"smart-thumb-label\"></span>\n                            <div id=\"tooltip\" class=\"smart-tooltip\">\n                                <div id=\"tooltipContent\" class=\"smart-tooltip-content smart-unselectable\"></div>\n                            </div>\n                        </div>\n                        <div id=\"secondThumb\" class=\"smart-thumb\">\n                            <span id=\"secondThumbLabel\" class=\"smart-thumb-label\"></span>\n                            <div id=\"secondTooltip\" class=\"smart-tooltip\">\n                                <div id=\"secondTooltipContent\" class=\"smart-tooltip-content smart-unselectable\"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <smart-repeat-button id=\"rightButton\" class=\"smart-spin-button\" animation=\"[[animation]]\" unfocusable>\n                        <div id=\"rightArrow\" class=\"smart-arrow\"></div>\n                    </smart-repeat-button>\n                </div>\n                <div id=\"scaleFar\" class=\"smart-scale smart-scale-far\"></div>\n                <input id=\"hiddenInput\" type=\"hidden\" name=\"[[name]]\">\n            </div>"}_createElement(){const t=this,i="numeric"===t.mode;if(t._renderingSuspended||(i?t._redefineProperty("values"):!i&&t._handleDateScale()),t._setSettingsObject(),t._setDrawVariables(),t._getLayoutType(),t._numericProcessor=new Smart.Utilities.NumericProcessor(t,"scaleType"),t._numberRenderer=new Smart.Utilities.NumberRenderer,!t._isVisible())return void(t._renderingSuspended=!0);t._renderingSuspended=!1,t._setInitialComponentDisplay(),t._measurements={},t._getMeasurements(),t._wordLengthNumber=t._numericProcessor.getWordLength(t.wordLength);const a=t._valuesHandler=t.rangeSlider?new Smart.Utilities.SliderMultipleValueHandler(t):new Smart.Utilities.SliderSingleValueHandler(t);i&&(t._getEventValue=function(){return t._valuesHandler.getValue()}),t._validateInitialPropertyValues(),t._setTicksAndInterval(),a.validate(!0),a.updateTooltipValue(),window.requestAnimationFrame(function(){t.$thumb.addClass("enable-animation"),t.$secondThumb.addClass("enable-animation"),t.$fill.addClass("enable-animation")}),t._setFocusable(),t._makeThumbAccessible(),t.$.hiddenInput.value=t._getEventValue()}val(t){const i=this,a=i._valuesHandler;return void 0===t?i._getEventValue():void("date"===i.mode&&(i.rangeSlider?(t[0]=Smart.Utilities.DateTime.validateDate(t[0]),t[1]=Smart.Utilities.DateTime.validateDate(t[1]),t[0]=t[0].getTimeStamp(),t[1]=t[1].getTimeStamp()):(t=Smart.Utilities.DateTime.validateDate(t),t=t.getTimeStamp())),a.areDifferent(t)&&(i._programmaticValueIsSet=!0,a.validate(!1,t),i._programmaticValueIsSet=!1))}getOptimalSize(){var t=Math.max;const i=this;if(i._renderingSuspended)return{width:0,height:0};const a=window.getComputedStyle(i),n=window.getComputedStyle(i.$.trackContainer);let o=0,l,r,s,d,m,c,u,p;return l="all"===i.labelsVisibility?i._numericProcessor._longestLabelSize:"endPoints"===i.labelsVisibility?t(i._tickIntervalHandler.labelsSize.minLabelOtherSize,i._tickIntervalHandler.labelsSize.maxLabelOtherSize):0,"horizontal"===i.orientation?(o+=parseFloat(n.marginTop)+parseFloat(n.marginBottom)+i.$.track.offsetHeight,("near"===i.scalePosition||"both"===i.scalePosition)&&(o+=l,s=i.$.scaleNear.getElementsByClassName("smart-label"),d=s[0],m=s[s.length-1],o+=parseFloat(window.getComputedStyle(d).bottom)),("far"===i.scalePosition||"both"===i.scalePosition)&&(o+=l,s=i.$.scaleFar.getElementsByClassName("smart-label"),d=s[0],m=s[s.length-1],o+=parseFloat(window.getComputedStyle(d).top)),o+=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),r=i.offsetWidth,"none"!==i.scalePosition&&(c=d.getBoundingClientRect(),u=m.getBoundingClientRect(),p=c.left+d.offsetWidth-u.left,0<p&&(r=d.offsetWidth+m.offsetWidth+t(10,i.$.thumb.offsetWidth))),{width:r,height:o}):(o+=parseFloat(n.marginLeft)+parseFloat(n.marginRight)+i.$.track.offsetWidth,("near"===i.scalePosition||"both"===i.scalePosition)&&(o+=l,s=i.$.scaleNear.getElementsByClassName("smart-label"),d=s[0],m=s[s.length-1],o+=parseFloat(window.getComputedStyle(d).right)),("far"===i.scalePosition||"both"===i.scalePosition)&&(o+=l,s=i.$.scaleFar.getElementsByClassName("smart-label"),d=s[0],m=s[s.length-1],o+=parseFloat(window.getComputedStyle(d).left)),o+=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),r=i.offsetHeight,"none"!==i.scalePosition&&(c=d.getBoundingClientRect(),u=m.getBoundingClientRect(),p=c.top+d.offsetHeight-u.top,0<p&&(r=d.offsetHeight+m.offsetHeight+t(10,i.$.thumb.offsetHeight))),{width:o,height:r})}propertyChangedHandler(t,i,a){function n(){o._setTicksAndInterval(),l.validate(!1,l.getValue())}const o=this;if(!o._isVisible()||o._renderingSuspended)return void(o._renderingSuspended=!0);if(-1!==["disabled","mode","readonly","showThumbLabel","tooltipPosition","unfocusable"].indexOf(t))return void super.propertyChangedHandler(t,i,a);let l=o._valuesHandler;if("values"!==t&&a!=i||"values"===t&&(a[0]!=i[0]||a[1]!==i[1]))switch(t){case"coerce":if(a){const t=l.getValue();l.validate(!1,t.slice(0)),o._valueBeforeCoercion=t}else void 0!==o._valueBeforeCoercion&&l.validate(!1,o._valueBeforeCoercion.slice(0));break;case"customInterval":case"customTicks":super.propertyChangedHandler(t,i,a),l.validate(!1,l.getValue());break;case"dateLabelFormatString":"date"===o.mode&&n();break;case"decimalSeparator":case"scientificNotation":if("date"===o.mode)return;n();break;case"interval":o._numericProcessor.validateInterval(a),l.validate(!1,l.getValue());break;case"inverted":o._getLayoutType(),o._normalLayout&&(o.$.fill.style[o._settings.margin]="0px"),n();break;case"labelFormatFunction":case"showUnit":case"unit":n();break;case"labelsVisibility":case"ticksVisibility":return;case"logarithmicScale":if("date"===o.mode)return void(o.logarithmicScale=!1);o._validateMinMax("both"),n();break;case"min":case"max":"date"===o.mode&&(delete o._dateInterval,o[t]=Smart.Utilities.DateTime.validateDate(a).getTimeStamp()),o._validateMinMax(t,!1,i),n();break;case"orientation":o.$.container.removeAttribute("style"),o.$.trackContainer.removeAttribute("style"),o.$.fill.removeAttribute("style"),o.$.thumb.removeAttribute("style"),o.$.secondThumb.removeAttribute("style"),o._setSettingsObject(),o._getLayoutType(),o._getMeasurements(),n(),"horizontal"===a?(o.$leftArrow.removeClass("smart-arrow-up"),o.$rightArrow.removeClass("smart-arrow-down"),o.$leftArrow.addClass("smart-arrow-left"),o.$rightArrow.addClass("smart-arrow-right")):(o.$leftArrow.removeClass("smart-arrow-left"),o.$rightArrow.removeClass("smart-arrow-right"),o.$leftArrow.addClass("smart-arrow-up"),o.$rightArrow.addClass("smart-arrow-down"));break;case"precisionDigits":case"significantDigits":if("date"===o.mode)return;"precisionDigits"===t&&"integer"===o.scaleType&&o.error(o.localize("noInteger",{elementType:o.nodeName.toLowerCase(),property:t})),"significantDigits"===t&&null!==o.precisionDigits?o.precisionDigits=null:"precisionDigits"==t&&null!==o.significantDigits&&(o.significantDigits=null),n();break;case"rangeSlider":a?(o.values=[o.min,o.value],o._drawValues=[o._drawMin,o._drawValue],"date"===o.mode&&(o._valueDate=[o._minDate.clone(),o._valueDate]),void 0!==o._valueBeforeCoercion&&(o._valueBeforeCoercion=[o.min,o._valueBeforeCoercion]),l=o._valuesHandler=new Smart.Utilities.SliderMultipleValueHandler(o)):(o.value=o.values[1],o._drawValue=o._drawValues[1],"date"===o.mode&&(o._valueDate=o._valueDate[1]),void 0!==o._valueBeforeCoercion&&(o._valueBeforeCoercion=o._valueBeforeCoercion[1]),l=o._valuesHandler=new Smart.Utilities.SliderSingleValueHandler(o),o.$.fill.style.marginTop=0,o.$.fill.style.marginLeft=0),l.validate(!1,l.getValue());break;case"scalePosition":o._setInitialComponentDisplay(),n();break;case"scaleType":if("date"===o.mode)return void(o.scaleType="integer");o._numericProcessor=new Smart.Utilities.NumericProcessor(o,"scaleType"),o._validateMinMax("both"),o._setTicksAndInterval(),l.validate(!0);break;case"showButtons":a?(o.$leftButton.removeClass("smart-hidden"),o.$rightButton.removeClass("smart-hidden")):(o.$leftButton.addClass("smart-hidden"),o.$rightButton.addClass("smart-hidden")),o._setTicksAndInterval(),l.moveThumbBasedOnValue(l.getDrawValue(),void 0,!0);break;case"showTooltip":super.propertyChangedHandler(t,i,a),a||(o.$tooltip.addClass("smart-hidden"),o.$secondTooltip.addClass("smart-hidden"));break;case"theme":super.propertyChangedHandler(t,i,a),n();break;case"ticksPosition":"scale"===a?(o.$trackTicksContainer.addClass("smart-hidden"),o.$.trackTicksContainer.innerHTML=""):o.$trackTicksContainer.removeClass("smart-hidden"),o._setTicksAndInterval();break;case"value":case"values":if("value"===t&&o.rangeSlider||"values"===t&&!o.rangeSlider)return;if("date"===o.mode)if("value"===t){if(a=Smart.Utilities.DateTime.validateDate(a),a=a.getTimeStamp(),o.value=a,0===a.compare(i))return;}else if(a[0]=Smart.Utilities.DateTime.validateDate(a[0]),a[1]=Smart.Utilities.DateTime.validateDate(a[1]),a[0]=a[0].getTimeStamp(),a[1]=a[1].getTimeStamp(),o.values=a,0===a[0].compare(i[0])&&0===a[1].compare(i[1]))return;o._programmaticValueIsSet=!0,l.validate(!1,a),o._programmaticValueIsSet=!1;break;case"wordLength":if("date"===o.mode)return void(o.wordLength="uint64");o._wordLengthNumber=o._numericProcessor.getWordLength(a),o._validateMinMax("both"),n();}else"string"!=typeof a&&"string"==typeof i&&(o[t]=i)}_addMovedThumbClass(){const t=this;t.rangeSlider&&(t._movedThumb.$.addClass("smart-moved-thumb"),t._movedThumb===t.$.thumb?t.$secondThumb.removeClass("smart-moved-thumb"):t.$thumb.removeClass("smart-moved-thumb"))}_setInitialComponentDisplay(){super._setInitialComponentDisplay();const t=this;t.$secondTooltip.addClass("smart-hidden"),t.showButtons||(t.$leftButton.addClass("smart-hidden"),t.$rightButton.addClass("smart-hidden"))}_getMeasurements(){const t=this,i=t._measurements,a=t.$.track,n=t.$.thumb;return!t._isVisible()||t._renderingSuspended?void(t._renderingSuspended=!0):void("horizontal"===t.orientation?(i.trackWidth=a.offsetHeight,i.thumbSize=n.offsetWidth,i.borderWidth=parseFloat(window.getComputedStyle(t.$.track).borderLeftWidth)):(i.trackWidth=a.offsetWidth,i.thumbSize=n.offsetHeight,i.borderWidth=parseFloat(window.getComputedStyle(t.$.track).borderTopWidth)),i.halfThumbSize=i.thumbSize/2)}_layout(){var t=Math.max;const i=this,a=i._measurements,n=i.$.container.style,o=a.halfThumbSize,l=i._tickIntervalHandler.labelsSize;let r,s,d,m;if("none"===i.scalePosition?(r=0,s=0):(r=l.minLabelSize/2,s=l.maxLabelSize/2),!i.showButtons)d=t(o,r)+"px",m=t(o,s)+"px";else{const a=i.$.leftButton[i._settings.size],n=a+o;d=t(r-n,0)+"px",m=t(s-n,0)+"px"}"horizontal"===i.orientation?(i.inverted?(n.paddingLeft=m,n.paddingRight=d):(n.paddingLeft=d,n.paddingRight=m),a.trackLength=i.$.track.clientWidth,i.$leftArrow.addClass("smart-arrow-left"),i.$rightArrow.addClass("smart-arrow-right")):(i.inverted?(n.paddingBottom=m,n.paddingTop=d):(n.paddingBottom=d,n.paddingTop=m),a.trackLength=i.$.track.clientHeight,i.$leftArrow.addClass("smart-arrow-up"),i.$rightArrow.addClass("smart-arrow-down"))}_trackDownHandler(t){const i=this,a=i.mechanicalAction;return i.disabled||i.readonly||!i.rangeSlider&&t.target===i.$.thumb?void 0:i._stopTrackDownHandler?void(i._stopTrackDownHandler=!1):void("switchWhileDragging"!==a&&(i._valueAtDragStart=i._valuesHandler.getValue()),i._getTrackStartAndEnd(),i._valuesHandler.setActiveThumbOnTrackClick(t),i._moveThumbBasedOnCoordinates(t,!0,"switchWhenReleased"!==a),i._thumbDragged=!0,i.setAttribute("dragged",""),i.showTooltip&&i._movedTooltip.removeClass("smart-hidden"))}_trackMoveHandler(){}_thumbDownHandler(t){const i=this;i.disabled||i.readonly||(i._getTrackStartAndEnd(),(t[i._settings.page]<i._trackStart||t[i._settings.page]>i._trackEnd)&&(i._stopTrackDownHandler=!0),"switchWhileDragging"!==i.mechanicalAction&&(i._valueAtDragStart=i._valuesHandler.getValue()),window.getSelection().removeAllRanges(),i._thumbDragged=!0,i.setAttribute("dragged",""),i.$track.addClass("smart-dragged"),i._movedThumb=t.target,i._addMovedThumbClass(),i._movedTooltip=i.$tooltip,i.rangeSlider&&(i._movedThumb===i.$.thumb?(i._staticThumb=i.$.secondThumb,i.$secondTooltip.addClass("smart-hidden")):(i._staticThumb=i.$.thumb,i._movedTooltip=i.$secondTooltip,i.$tooltip.addClass("smart-hidden"))),i.showTooltip&&i._movedTooltip.removeClass("smart-hidden"),t.stopPropagation())}_thumbMoveMouseleaveHandler(t){var i=Math.pow;const a=this;if(!(a.disabled||a.readonly)){const a=t.target;if("move"===t.type){const n=a.getBoundingClientRect(),o=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset,r=(n.left+n.right)/2+o,s=(n.top+n.bottom)/2+l,d=i(n.width/2,2);if(i(t.pageX-r,2)+i(t.pageY-s,2)>d)return;a.setAttribute("hover","")}else a.removeAttribute("hover")}}_documentMoveHandler(t){const i=this;i._thumbDragged&&(i.$thumb.removeClass("enable-animation"),i.$secondThumb.removeClass("enable-animation"),i.$fill.removeClass("enable-animation"),i._moveThumbBasedOnCoordinates(t,!0,"switchWhenReleased"!==i.mechanicalAction))}_documentUpHandler(t,i){const a=this;a._thumbDragged&&(a.$thumb.addClass("enable-animation"),a.$secondThumb.addClass("enable-animation"),a.$fill.addClass("enable-animation"),!i&&("switchUntilReleased"===a.mechanicalAction?a._valuesHandler.validate(!1,a._valueAtDragStart):"switchWhenReleased"===a.mechanicalAction&&a._moveThumbBasedOnCoordinates(t,!0,!0)),a.showTooltip&&a._movedTooltip.addClass("smart-hidden"),a._thumbDragged=!1,a.removeAttribute("dragged"),a._makeThumbAccessible(),a._movedThumb=void 0,a.$track.removeClass("smart-dragged"))}_spinButtonClickHandler(t){const i=this;if(i.disabled||i.readonly)return;let a;a=i.$.leftButton.contains(t.target)===i._normalLayout?"subtract":"add",i._valuesHandler.incrementOrDecrement(a)}_keydownHandlerSlider(t){const i=this,a=t.key;return"Escape"===a&&i._thumbDragged&&"switchWhenReleased"===i.mechanicalAction?(i._documentUpHandler(void 0,!0),void i._valuesHandler.validate(!1,i._valueAtDragStart)):void(-1!==["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].indexOf(a)&&!i.coerce&&(i.$thumb.removeClass("enable-animation"),i.$secondThumb.removeClass("enable-animation"),i.$fill.removeClass("enable-animation"),i._restoreAnimationClass=!0),this._valuesHandler.keydownHandler(t))}_keyupHandlerSlider(){const t=this;t._restoreAnimationClass&&(t.$thumb.addClass("enable-animation"),t.$secondThumb.addClass("enable-animation"),t.$fill.addClass("enable-animation"))}_resizeAndStyleChangedHandler(t){const i=this,a=i._valuesHandler;if(!i._isVisible())return void(i._renderingSuspended=!0);if(i._renderingSuspended)return void i._createElement();if(!i._renderingSuspended&&(i._getMeasurements(),i._setTicksAndInterval(),a.validate(!1,a.getValue()),"styleChanged"===t.type)){const a=t.detail.styleProperties;if(a["font-size"]||a["font-family"]||a["font-style"]||a["font-weight"]){const t=i.getOptimalSize();i.style.width=t.width+"px",i.style.height=t.height+"px"}}}_moveThumbBasedOnCoordinates(t,i,a){const n=this,o=n._numericProcessor,l=n._trackStart,r=n._settings.margin;let s=t[n._settings.page];i&&(s=n._valuesHandler.restrictThumbCoordinates(s,l,n._trackEnd));let d=o.pxToValue(s);n.rangeSlider&&n._movedThumb===n.$.thumb&&1===o.compare(d,n.values[1],!0)&&(d=o.createDescriptor(n.values[1]));let m=d;n.logarithmicScale?(d=o.getCoercedValue(Math.log10(d)),m=parseFloat(Math.pow(10,d).toFixed(11))):(d=o.getCoercedValue(d),m=d),s=o.valueToPx(d)+l;const c=s-l;n._movedThumb.style[r]=c-n._measurements.halfThumbSize+"px",n._valuesHandler.updateFillSizeAndPosition(c,r,m,!0,a),Smart.Utilities.Core.isMobile&&t.originalEvent&&(t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}_moveThumbBasedOnValue(t,i,a,n){const o=this,l=o._numericProcessor.valueToPx(i),r=o._settings.margin;t.style[r]=l-o._measurements.halfThumbSize+"px";const s=o._getSingleActualValue(i);n?o.rangeSlider&&(o._firstPassSize=l):o._valuesHandler.updateFillSizeAndPosition(l,r,s,a,a)}_validate(t,i){this._valuesHandler.validate(t,i)}_updateValue(t){const i=this._valuesHandler;i.updateValue(i.getActualValue(t))}_makeThumbAccessible(){const t=this;t.rangeSlider&&(t.$.thumb[t._settings.offset]===t.$.secondThumb[t._settings.offset]&&!1===t._numericProcessor.compare(t.values[1],t.max)?t.$thumb.addClass("accessible"):t.$thumb.removeClass("accessible"))}_getSingleActualValue(t){return this.logarithmicScale?parseFloat(Math.pow(10,t).toFixed(11)):t.toString()}_coerceCustomInterval(){const t=this;if(t.coerce){const i=t._valueBeforeCoercion;t._valuesHandler.validate(!1,t._valuesHandler.getValue()),t._valueBeforeCoercion=i}}_wheelHandler(t){const i=this;document.activeElement===i&&i.enableMouseWheelAction&&(t.stopPropagation(),t.preventDefault(),0<t.wheelDelta?i._keydownHandlerSlider({key:"ArrowRight",which:39,preventDefault:function(){}}):i._keydownHandlerSlider({key:"ArrowLeft",which:37,preventDefault:function(){}}))}_handleDateScale(){const t=this,i=Smart.Utilities.DateTime;super._handleDateScale(),Object.defineProperty(t,"values",{get:function(){return t.context===t?t.properties.values.value:t._valueDate},set(i){function a(t,i){return i instanceof Smart.Utilities.BigNumber?i.toString():i}const n=t.properties.values.value,o=JSON.stringify(n,a),l=JSON.stringify(i,a);if(o!==l&&(t.properties.values.value=i,t.isReady&&(!t.ownerElement||t.ownerElement&&t.ownerElement.isReady)&&t.context!==t)){const a=t.context;t.context=t,t.propertyChangedHandler("values",n,i),t.context=a}}}),t.rangeSlider&&(t._valueDate=[i.validateDate(t.values[0]),i.validateDate(t.values[1])],t.values=[t._valueDate[0].getTimeStamp(),t._valueDate[1].getTimeStamp()]),t._properties.values.serialize="_serializeValue"}_setTicksAndInterval(){const t=this;t._skipTrackReset?delete t._skipTrackReset:t.$.track.style[t._settings.dimension]=null,super._setTicksAndInterval(),10>t.$.track[t._settings.size]&&(t._skipTrackReset=!0,t.$.track.style[t._settings.dimension]=t.getOptimalSize()[t._settings.dimension]+"px",t._getMeasurements(),t._setTicksAndInterval(),t._valuesHandler.validate(!1,t._valuesHandler.getValue()))}}),Smart.Utilities.Assign("SliderSingleValueHandler",class{constructor(t){this.context=t,"date"===t.mode&&(t._getEventValue=function(){return t._valueDate.clone()})}applyFunctionToValue(t,i){const a=this,n=a.context;i===void 0&&(i=n.value);const o=t.apply(n,[i]);return o}areDifferent(t){return this.context.value!==t}incrementOrDecrement(t){const i=this.context,a=i._keyIncrementDecrement(t);this.validate(!1,a)}setActiveThumbOnTrackClick(){const t=this.context;t._movedThumb=t.$.thumb,t._addMovedThumbClass(),t._movedTooltip=t.$tooltip}getActualValue(t){return this.context._getSingleActualValue(t)}getCoercedLogarithmicValue(t){const i=this.context;if(i.logarithmicScale){const a=i._numericProcessor.getCoercedValue(Math.log10(t));return this.getActualValue(a)}return t}getDrawValue(){return this.context._drawValue}getValue(){return this.context.value}keydownHandler(t){this.context._keydownHandler(t)}moveThumbBasedOnValue(t,i,a){const n=this.context;if(void 0===t&&(t=n.value),n._moveThumbBasedOnValue(n.$.thumb,t,i),!0!==a){n._drawValue=t;const i=this.getActualValue(t);let a;a=void 0===n._valueNoRangeValidation?i.toString():n._valueNoRangeValidation.toString(),"date"===n.mode&&(n._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(a)),n.value=a,delete n._valueBeforeCoercion,this.updateTooltipValue(i)}}restrictThumbCoordinates(t,i,a){return t=Math.max(t,i),t=Math.min(t,a),t}updateFillSizeAndPosition(t,i,a,n,o){const l=this.context,r=l.$.fill.style,s=l._settings.dimension;if(l._normalLayout?r[s]=t+"px":(r[s]=l._measurements.trackLength-t+"px",r[i]=t+"px"),n){const t=l.value,i=l._getEventValue(),n=l._numericProcessor;if(n.compare(n.createDescriptor(a),n.createDescriptor(t))&&(this.updateTooltipValue(a),o)){let t;if(l._drawValue=l.logarithmicScale?Math.log10(a):a,t=void 0===l._valueNoRangeValidation?a.toString():l._valueNoRangeValidation.toString(),"date"===l.mode&&(l._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t)),l.value=t,delete l._valueBeforeCoercion,!0!==l._programmaticValueIsSet){const t=l._getEventValue();l.$.hiddenInput.value=t,l.$.fireEvent("change",{value:t,oldValue:i})}}}}updateTooltipValue(t){const i=this.context;t===void 0&&(t=i.value);const a=i._formatLabel(t);i.$.tooltipContent.innerHTML!==a&&(i.$.tooltipContent.innerHTML=a,i.$.thumbLabel.innerHTML=a)}updateValue(t){const i=this.context,a=i._numericProcessor.createDescriptor(t,!0,!1);i._drawValue=i.logarithmicScale?Math.log10(a):a,this.moveThumbBasedOnValue(i._drawValue,!0)}validate(t,i){const a=this.context,n=a._numericProcessor;let o=t?a.value:i;let l;a.coerce&&(o=a._numericProcessor.createDescriptor(o,!0,!0,!0)),o=a.logarithmicScale?this.getCoercedLogarithmicValue(o):n.getCoercedValue(o),a._valueNoRangeValidation=n.createDescriptor(o,!0,!0,!1),l=n.validate(a._valueNoRangeValidation,a._minObject,a._maxObject),t?(a._drawValue=a.logarithmicScale?Math.log10(l):l,o=a._valueNoRangeValidation.toString(),"date"===a.mode&&(a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(o)),a.value=o,this.moveThumbBasedOnValue(a._drawValue,void 0,!0),a._programmaticValueIsSet=!1):this.updateValue(l),delete a._valueNoRangeValidation}}),Smart.Utilities.Assign("SliderMultipleValueHandler",class{constructor(t){this.context=t,"date"===t.mode&&(t._getEventValue=function(){return[t._valueDate[0].clone(),t._valueDate[1].clone()]})}applyFunctionToValue(t,i){const a=this,n=a.context,o=[];return void 0===i&&(i=n.values),o[0]=t.apply(n,[i[0]]),o[1]=t.apply(n,[i[1]]),o}areDifferent(t){const i=this.context.values;return i[0]!==t[0]||i[1]!==t[1]}incrementOrDecrement(t){const i=this.context,a=i.values.slice(0);let n;n="add"===t?1:0,a[n]=this.keyIncrementDecrement(t,n),this.validate(!1,a)}keydownHandler(t){const i=this.context;if(!(i.disabled||i.readonly)){const a=t.charCode?t.charCode:t.which;if(-1!==[35,36,37,38,39,40].indexOf(a)){t.preventDefault();const n=i.values.slice(0);let o;return 40===a||37===a?(o=this.keyIncrementDecrement("subtract",0),n[0]=o,i._movedThumb=i.$.thumb):38===a||39===a?(o=this.keyIncrementDecrement("add",1),n[1]=o,i._movedThumb=i.$.secondThumb):36===a?(i._drawValues[0]=i._drawMin,n[0]=i.min,i._movedThumb=i.$.thumb):35===a?(i._drawValues[1]=i._drawMax,n[1]=i.max,i._movedThumb=i.$.secondThumb):void 0,this.validate(!1,n),!1}}}keyIncrementDecrement(t,i){const a=this.context;let n,o;if(a.customInterval&&a.coerce)return n=this.getValue()[i],a._keyIncrementDecrement(t,n.toString());if("date"===a.mode)return n=a._valueDate[i],o=n[a._dateIncrementMethod](("add"===t?1:-1)*parseFloat(a.interval),!0),o=o.getTimeStamp(),-1===o.compare(a._drawMin)?new Smart.Utilities.BigNumber(a._drawMin):1===o.compare(a._drawMax)?new Smart.Utilities.BigNumber(a._drawMax):o;const l=a._drawValues[i];return n=a._numericProcessor.createDescriptor(l),o=a._numericProcessor.incrementDecrement(n,t,a._validInterval),a.logarithmicScale&&(a._drawValues[i]=o,o=parseFloat(Math.pow(10,Math.round(o)).toFixed(11))),o}setActiveThumbOnTrackClick(t){const i=this.context,a=i._trackStart+i._measurements.halfThumbSize,n=i._settings.offset,o=i.$.thumb,l=i.$.secondThumb,r=o[n],s=l[n],d=t[i._settings.page];let m=i._normalLayout?a+r+(s-r)/2:a+s+(r-s)/2;i._normalLayout&&d<=m||!i._normalLayout&&d>m?(i._movedThumb=o,i._staticThumb=l,i._movedTooltip=i.$tooltip,i.$secondTooltip.addClass("smart-hidden")):(i._movedThumb=l,i._staticThumb=o,i._movedTooltip=i.$secondTooltip,i.$tooltip.addClass("smart-hidden")),i._addMovedThumbClass()}getActualValue(t){var i=Math.pow;return this.context.logarithmicScale?[parseFloat(i(10,t[0].toString()).toFixed(11)),parseFloat(i(10,t[1].toString()).toFixed(11))]:[t[0].toString(),t[1].toString()]}getCoercedLogarithmicValue(t){var i=Math.log10;const a=this.context;if(a.logarithmicScale){const n=[];return n[0]=a._numericProcessor.getCoercedValue(i(t[0])),n[1]=a._numericProcessor.getCoercedValue(i(t[1])),this.getActualValue(n)}return t}getDrawValue(){return this.context._drawValues}getValue(){return this.context.values.slice(0)}moveThumbBasedOnValue(t,i,a){const n=this.context,o=void 0===i;if(void 0===t&&(t=n.values),n._numericProcessor.restrictValue(t),(o||1===i)&&(n._movedThumb=n.$.secondThumb,n._moveThumbBasedOnValue(n.$.secondThumb,t[1],!0,o)),(o||0===i)&&(n._movedThumb=n.$.thumb,n._moveThumbBasedOnValue(n.$.thumb,t[0],!0)),delete n._firstPassSize,!0!==a){n._drawValues=t;const i=this.getActualValue(t);let a;a=n._valuesNoRangeValidation?[n._valuesNoRangeValidation[0].toString(),n._valuesNoRangeValidation[1].toString()]:i,"date"===n.mode&&(n._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(i[0]),Smart.Utilities.DateTime.fromFullTimeStamp(i[1])]),n.values=a,delete n._valueBeforeCoercion,this.updateTooltipValue()}}restrictThumbCoordinates(t,i,a){var n=Math.min,o=Math.max;const l=this.context,r=i+l._staticThumb[l._settings.offset]+l._measurements.halfThumbSize;return l._movedThumb===l.$.thumb&&l._normalLayout||l._movedThumb===l.$.secondThumb&&!l._normalLayout?(t=o(t,i),t=n(t,a,r)):(t=o(t,i,r),t=n(t,a)),t}updateFillSizeAndPosition(t,i,a,n,o){var l=Math.max;const r=this.context,s=r.$.fill.style,d=r._settings.dimension,m=r._settings.offset,c=r._measurements.halfThumbSize;let u,p;if(r._movedThumb===r.$.thumb?(u=t-c,p=void 0===r._firstPassSize?r.$.secondThumb[m]:r._firstPassSize-c):(u=void 0===r._firstPassSize?r.$.thumb[m]:r._firstPassSize-c,p=t-c),r._normalLayout?(s[d]=l(0,p-u)+"px",s[i]=u+c+"px"):(s[d]=l(0,u-p)+"px",s[i]=p+c+"px"),n){const t=r._numericProcessor,i=r._movedThumb===r.$.thumb?0:1,n=r.values[i],l=r._getEventValue();if(t.compare(t.createDescriptor(a),t.createDescriptor(n))){const t=r.values.slice(0);if(t[i]=a.toString(),this.updateTooltipValue(a,i),o){let i;if(this.updateDrawValues(t),i=r._valuesNoRangeValidation?[r._valuesNoRangeValidation[0].toString(),r._valuesNoRangeValidation[1].toString()]:t,"date"===r.mode&&(r._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(t[0]),Smart.Utilities.DateTime.fromFullTimeStamp(t[1])]),r.values=i,delete r._valueBeforeCoercion,!0!==r._programmaticValueIsSet){const t=r._getEventValue();r.$.hiddenInput.value=t,r.$.fireEvent("change",{value:t,oldValue:l})}}}}}updateDrawValues(t){var i=Math.log10;const a=this.context;a.logarithmicScale?(a._drawValues[0]=i(t[0]),a._drawValues[1]=i(t[1])):a._drawValues=t.slice(0)}updateTooltipValue(t,i){const a=this.context;if(t===void 0){const t=a.values,i=a._formatLabel(t[0]),n=a._formatLabel(t[1]);a.$.tooltipContent.innerHTML!==i&&(a.$.tooltipContent.innerHTML=i,a.$.thumbLabel.innerHTML=i),a.$.secondTooltipContent.innerHTML!==n&&(a.$.secondTooltipContent.innerHTML=n)}else{const n=a._formatLabel(t);(0===i&&a.$.tooltipContent.innerHTML!==n||i===void 0)&&(a.$.tooltipContent.innerHTML=n,a.$.thumbLabel.innerHTML=n),(1===i&&a.$.secondTooltipContent.innerHTML!==n||i===void 0)&&(a.$.secondTooltipContent.innerHTML=n,a.$.secondThumbLabel.innerHTML=n)}}updateValue(t){const i=this.context,a=[];let n;a[0]=i._numericProcessor.createDescriptor(t[0],!0,!1),a[1]=i._numericProcessor.createDescriptor(t[1],!0,!1),this.updateDrawValues(a),i._movedThumb===i.$.secondThumb&&(n=1),this.moveThumbBasedOnValue(i._drawValues.slice(0),n)}validate(t,i){const a=this.context,n=a._numericProcessor;let o=[],l;l=t?a.values.slice(0):i,a.coerce&&(l[0]=n.createDescriptor(l[0],!0,!0,!0),l[1]=n.createDescriptor(l[1],!0,!0,!0)),a.logarithmicScale?l=this.getCoercedLogarithmicValue(l):(l[0]=n.getCoercedValue(l[0]),l[1]=n.getCoercedValue(l[1])),a._valuesNoRangeValidation=[],a._valuesNoRangeValidation[0]=n.createDescriptor(l[0],!0,!0,!1),a._valuesNoRangeValidation[1]=n.createDescriptor(l[1],!0,!0,!1),a._numericProcessor.restrictValue(a._valuesNoRangeValidation),o[0]=n.validate(a._valuesNoRangeValidation[0],a._minObject,a._maxObject),o[1]=n.validate(a._valuesNoRangeValidation[1],a._minObject,a._maxObject),t?(a._drawValues=[],this.updateDrawValues(o),l=[a._valuesNoRangeValidation[0].toString(),a._valuesNoRangeValidation[1].toString()],"date"===a.mode&&(a._valueDate=[Smart.Utilities.DateTime.fromFullTimeStamp(o[0]),Smart.Utilities.DateTime.fromFullTimeStamp(o[1])]),a.values=l,this.moveThumbBasedOnValue(a._drawValues,void 0,!0),a._programmaticValueIsSet=!1):this.updateValue(o),delete a._valuesNoRangeValidation}}),Smart("smart-accordion-item",class extends Smart.ContentElement{static get properties(){return{dragged:{value:!1,type:"boolean"},expanded:{value:!1,type:"boolean"},focused:{value:!1,type:"boolean"},index:{value:null,type:"number?"},label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}static get listeners(){return{"accordionItemHeader.mouseenter":"_headerMouseEnterHandler","accordionItemHeader.mouseleave":"_headerMouseLeaveHandler","accordionItemHeader.down":"_ripple"}}template(){return`<div id="container">
                    <div id="accordionItemHeader" class ="smart-accordion-item-header smart-unselectable">
                        <span id="arrow" class ="smart-arrow"></span>
                        <span id="label" class ="smart-label" inner-h-t-m-l='[[label]]'></span>
                    </div>
                    <div id="accordionItemContent" class ="smart-accordion-item-content">
                        <div id="contentContainer" class ="smart-content-container"><content></content></div>
                    </div>
                </div>`}propertyChangedHandler(t,i,a){if(super.propertyChangedHandler(t,i,a),i=parseInt(i),a=parseInt(a),!("index"!==t||isNaN(i)||isNaN(a))){const t=this,n=t.parentElement.parentElement._items.length;0>a?a=0:a>=n&&(a=n-1),a!==i&&t.$.fireEvent("indexChange",{newIndex:a,oldIndex:i}),t.index=a}}_headerMouseEnterHandler(){const t=this;t.disabled||t.setAttribute("hovered","")}_headerMouseLeaveHandler(){const t=this;t.disabled||t.removeAttribute("hovered")}_ripple(t){const i=this;i.disabled||i.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(i.$.container,t.pageX,t.pageY)}_setIndex(t){const i=this,a=i.context;i.context=i,i.index=t,i.context=a}}),Smart("smart-accordion",class extends Smart.BaseElement{static get properties(){return{expandedIndexes:{value:[],type:"array"},expandMode:{allowedValues:["single","singleFitHeight","multiple","toggle","none"],value:"singleFitHeight",type:"string"},messages:{extend:!0,value:{en:{accordionItemRequired:"{{elementType}}: \"{{method}}\" requires an item from type \"smart-accordion-item\".",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter.",missingReference:"{{elementType}}: Missing reference to {{files}}.",noItems:"{{elementType}}: No child elements found.",overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default."}},type:"object"},reorder:{value:!1,type:"boolean"}}}static get listeners(){return{down:"_downHandler",focus:"_focusHandler",indexChange:"_indexChangeHandler",keydown:"_keyDownHandler",move:"_moveHandler",resize:"_resizeHandler",styleChanged:"_resizeHandler","document.up":"_upHandler"}}template(){return`<div id="container">
                    <content></content>
                </div>`}static get styleUrls(){return["smart.accordion.css"]}ready(){super.ready();const t=this;t._createElement()}propertyChangedHandler(t,i,a){function n(){o._toggleItems("expand",[0]),o.expandedIndexes=[0]}const o=this;if("expandedIndexes"===t){if(i.toString()===a.toString())return;let t=[];if(0<o._items.length)for(let n=0,i;n<a.length;n++)if(i=parseInt(a[n]),!isNaN(i))if(o._expandModeIs(["single","singleFitHeight","toggle"])){1>t.length&&0<=i&&i<o._items.length&&t.push(i);break}else 0<=i&&i<=o._items.length&&-1===t.indexOf(i)&&t.push(i);if(0===t.length&&o._expandModeIs(["single","singleFitHeight"]))return a=i.slice(),void(o.expandedIndexes=a);a=t;const n=o._compareExpandedIndexes(i,a);return o._toggleItems("collapse",n.collapse),o._toggleItems("expand",n.expand),void(o.expandedIndexes=a)}switch(super.propertyChangedHandler(t,i,a),t){case"disabled":o._setFocusable(),o._enableDisableHandler();break;case"expandMode":if(0===o._items.length)break;if("multiple"===i&&"none"!==a||"none"===i&&"multiple"!==a){const t=o.expandedIndexes.slice(1);o._toggleItems("collapse",t),0===o.expandedIndexes.length&&o._expandModeIs(["single","singleFitHeight"])&&n()}else"toggle"===i&&o._expandModeIs(["single","singleFitHeight"])&&0===o.expandedIndexes.length&&n();if(!o._supportCSSVariables||!o._usedCSSVariables){const t=o.expandedIndexes[0];"singleFitHeight"===i?o._items[t].$.accordionItemContent.style.height="":"singleFitHeight"===a&&(o._items[t].$.accordionItemContent.style.height=o._expandedItemsContainerHeight-1+"px")}break;case"unfocusable":o._setFocusable();break;default:}}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&(t.classList.contains("smart-resize-trigger-container")||t.classList.contains("smart-measure-element"))){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.AccordionItem||i.error(i.localize("accordionItemRequired",{method:"appendChild"})),i.insert(i._items.length,t)}collapse(t,i){const a=this;if(t=a._validateItemsIndex(t,"collapse"),!isNaN(t)){const n=a._items[t].expanded;!n||a._expandModeIs(["single","singleFitHeight"])&&-1<a.expandedIndexes.indexOf(t)||a._collapseItem(t,i)}}expand(t,i){const a=this;if(t=a._validateItemsIndex(t,"expand"),!isNaN(t)){const n=a._items[t].expanded;n||(a._expandModeIs(["single","singleFitHeight","toggle"])&&a._toggleItems("collapse",a.expandedIndexes),a._expandItem(t,i))}}insert(t,a){const n=this,i=0===n._items.length;let o,l;if(a||("number"==typeof t?a=[{label:"",content:""}]:(a=[{label:t?t.toString():"",content:t?t.toString():""}],t=0)),a instanceof HTMLElement)a instanceof Smart.AccordionItem?o=a:n.error(n.localize("accordionItemRequired",{method:"insert"}));else if(Array.isArray(a)){l=document.createDocumentFragment();for(let t=0;t<a.length;t++){const i=n._createItem(a[t]);l.appendChild(i)}}else o=a instanceof Object?n._createItem(a):"string"==typeof a||"number"==typeof a?n._createItem({label:a.toString(),content:a.toString()}):n._createItem({label:"",content:""});t>n._items.length?o?n.$.container.appendChild(o):n.$.container.appendChild(l):o?n.$.container.insertBefore(o,n._items[t]):n.$.container.insertBefore(l,n._items[t]),o&&(o.tabIndex=n._tabIndex),n._storeItems(),i&&n._expandModeIs(["single","singleFitHeight"])?n._expandItem(0):n.expandedIndexes=n._getExpandedIndexes(),n._updateExpanedContentHeight(),n._updateInlineHeight(),n._storeItemsCoordinates(),n._updateItemsIndexProperty()}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t!==void 0&&i!==void 0&&t instanceof Smart.AccordionItem&&i instanceof Smart.AccordionItem||a.error(a.localize("accordionItemRequired",{method:"insertBefore"})),i!==void 0&&null!==i?(!a.contains(i)&&a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(a._items.indexOf(i),t)):a.insert(a._items.indexOf(i),t)}remove(t){const i=this;let a;if(t instanceof HTMLElement)t instanceof Smart.AccordionItem?!i.contains(t)&&i.error(i.localize("referenceNodeNotChild",{argument:"node"})):i.error(i.localize("accordionItemRequired",{method:"remove"})),a=t,t=a.index;else{if(t=i._validateItemsIndex(t,"remove"),isNaN(t))return;a=i._items[t]}a&&(a.parentNode.removeChild(a),i._storeItems(),i._expandModeIs(["singleFitHeight"])&&(i._preventAnimation=!0),i._expandModeIs(["single","singleFitHeight"])&&t===i.expandedIndexes[0]&&0<i._items.length&&(i._expandItem(0),i._selectedItem=i._items[0],i._selectedItemIndex=0,i._itemIsFocussed=!0),i.expandedIndexes=i._getExpandedIndexes(),i._updateExpanedContentHeight(),i._updateInlineHeight(),i._storeItemsCoordinates(),i._updateItemsIndexProperty())}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return(t instanceof HTMLElement||i.error(i.localize("accordionItemRequired",{method:"removeChild"})),"smart-resize-trigger-container"===t.className)?void super.removeChild(t):void(t instanceof Smart.AccordionItem||i.error(i.localize("accordionItemRequired",{method:"removeChild"})),i.contains(t)||i.error(i.localize("referenceNodeNotChild",{argument:"node"})),i.remove(t))}_setFocusable(){const t=this;if(t.disabled||t.unfocusable){t.removeAttribute("tabindex");for(let a=0;a<t._items.length;a++)t._items[a].removeAttribute("tabindex");return}t.tabIndex=t._tabIndex;for(let a=0;a<t._items.length;a++)t._items[a].tabIndex=t._tabIndex}update(t,i){const a=this;if(t=a._validateItemsIndex(t,"update"),!isNaN(t)){let n=a._items[t];if(i||a.error(a.localize("invalidSettings",{elementType:a.nodeName.toLowerCase(),method:"update"})),n)if(Array.isArray(i)&&(0===i.length?i={label:"",content:""}:i=i[0]),"string"==typeof i)n.content=i;else for(let t in i)n[t]=i[t];const o=a._getItemsHeights(t);a._updateExpanedContentLocalHeight(a._items[t],o),a._updateInlineHeight(),a._storeItemsCoordinates()}}_adjustHeightValue(t){const a=this,n=a._items.length;let o,l;for(let r=0;r<n&&(a._items[r].expanded?o=a._items[r]:l=a._items[r],!(o&&l));r++);if(o||(o=a._items[0]),o||l){const i=o.expanded;o.expanded=!0;const a=window.getComputedStyle(o,null),r=!!l&&window.getComputedStyle(l,null),s=parseInt(a.getPropertyValue("margin-top"))+parseInt(a.getPropertyValue("margin-bottom")),d=r?parseInt(r.getPropertyValue("margin-top"))+parseInt(r.getPropertyValue("margin-bottom")):0;return o.expanded=i,t-((n-1)*d+s)}}_collapseItem(t,i){const a=this;let n=a._items[t];if(n.expanded&&!("none"===a.expandMode&&i)){if(n.expanded=!1,a.$.fireEvent("collapsing",{index:t,label:n.label,content:n.content.innerHTML}),-1<a.expandedIndexes.indexOf(t)){let i=a.expandedIndexes.indexOf(t),n=a.expandedIndexes.slice();n.splice(i,1),a.expandedIndexes=n}n.$.accordionItemContent.style.height="",a._handleAnimationsDuration(n,t,"collapsed")}}_compareExpandedIndexes(t,a){let n=[],o=[],l=[],r=t.length,s=a.length;for(let l=0;l<r;l++)-1===a.indexOf(t[l])?-1===n.indexOf(t[l])&&n.push(t[l]):-1===o.indexOf(t[l])&&o.push(t[l]);for(let n=0;n<s;n++)-1===o.indexOf(a[n])&&l.push(a[n]);return{collapse:n,expand:l}}_createElement(){const t=this;t._reorderItemsByIndex(),t._usedCSSVariables=!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-accordion-animation-duration"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport(),t._storeItems(),t._enableDisableHandler(),t._expandedIndexesHandler(),t._updateExpanedContentHeight(),t._tabIndex=0>=t.tabIndex?0:t.tabIndex,t._setFocusable(),t._updateItemsIndexProperty(),t._updateInlineHeight();for(let a=0;a<t._items.length;a++)t._items[a].$.arrow.classList.add("smart-animate-trigger")}_createItem(t){const i=this,a=document.createElement("smart-accordion-item");if(t)return(a.disabled=i.disabled,-1<i._tabIndex&&(a.tabIndex=i._tabIndex),"string"==typeof t||"number"==typeof t)?(a.label=t+"",a.content=t+"",a):(a.label=t.label||"",a.content=t.content||"",a)}_downHandler(t){const i=this;if(i.disabled||i.readonly||"none"===i.expandMode||i._toggled)return;const a=i.enableShadowDOM?i.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.originalEvent.target,n=a.closest(".smart-accordion-item-header"),o=a.closest("smart-accordion-item");return n?void(i._selectedItem=o,i._itemIsPressed=i._itemIsFocussed=!0,i._reorderedIndex=i._selectedItemIndex=i._items.indexOf(o),i._storeItemsCoordinates()):void(o&&(o.focused=!0))}_enableDisableHandler(){const t=this;if(t.disabled)for(let a=0;a<t._items.length;a++)t._items[a].disabled=!0;else for(let a=0;a<t._items.length;a++)t._items[a].disabled=!1}_expandedIndexesHandler(){const t=this;let i=t._getExpandedIndexes("initial"),a=i.length,n=t.expandedIndexes.length;if(0!==t._items.length){if(0===n&&0<a&&(t.expandedIndexes=i,n=a),t._expandModeIs(["multiple","none"])||1===n)return void t._toggleItems("expand",t.expandedIndexes);switch(t.expandMode){case"single":case"singleFitHeight":0===n?t._toggleItems("expand",[0]):1<n&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;case"toggle":1<n&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;default:}}}_expandItem(t,i){const a=this;let n=a._items[t];if(!(n.expanded||"none"===a.expandMode&&i)){if(n.$.container.style.getPropertyValue("--smart-accordion-expanded-content-local-height")||(n.expanded=!0,n.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",n.$.accordionItemContent.scrollHeight+"px"),n.expanded=!1),n.expanded=!0,a.$.fireEvent("expanding",{index:t,label:n.label,content:n.content.innerHTML}),-1===a.expandedIndexes.indexOf(t)){let i=a.expandedIndexes.slice();i.push(t),a.expandedIndexes=i}a._supportCSSVariables&&a._usedCSSVariables||"singleFitHeight"!==a.expandMode||(n.$.accordionItemContent.style.height=a._expandedItemsContainerHeight-1+"px"),a._handleAnimationsDuration(n,t,"expanded")}}_expandModeIs(t){const i=this;return-1<t.indexOf(i.expandMode)}_focusHandler(){const t=this;t.disabled||0===t._items.length||(t._itemIsFocussed?t._selectedItem.focused=!1:t._items[0].focused=!1)}_getExpandedIndexes(t){const a=this,n=[];for(let o=0;o<a._items.length;o++)"initial"===t?a._items[o].hasAttribute("expanded")&&(n.push(o),a._items[o].removeAttribute("expanded")):a._items[o].expanded&&n.push(o);return n.slice()}_getItemsHeights(t){const i=this,a=i._items,n=a.length;let o=[];if(0!==n){if(!isNaN(t)&&0<=t&&t<n){const i=a[t];let n=0;return i.expanded?n=i.$.accordionItemContent.scrollHeight:(i.expanded=!0,n=i.$.accordionItemContent.scrollHeight,i.expanded=!1),n+"px"}for(let t=0;t<n;t++){const i=a[t];let n=0;i.expanded?n=i.$.accordionItemContent.scrollHeight:(i.expanded=!0,n=i.$.accordionItemContent.scrollHeight,i.expanded=!1),o.push(n+"px")}return i._heightCalcAfterInitialization=!0,o}}_handleAnimationsDuration(t,i,a){const n=this;if(!n._animationAfterInitialization)return void(n._animationAfterInitialization=!0);if(1===n._items.length&&"singleFitHeight"===n.expandMode)return void n.$.fireEvent(a,{index:i,label:t.label,content:t.content.innerHTML});if(!1===n.hasAnimation||!n._supportCSSVariables)return void n.$.fireEvent(a,{index:i,label:t.label,content:t.content.innerHTML});if(n._preventAnimation)return n.$.fireEvent(a,{index:i,label:t.label,content:t.content.innerHTML}),void(n._preventAnimation=!1);n._toggled=!0;let o=window.getComputedStyle(n).animationDuration,l;if(-1<o.indexOf("ms"))o=parseFloat(o.substring(0,o.length-2)),l=isNaN(o)||0>o?0:o-50;else if(-1<o.indexOf("s"))o=parseFloat(o.substring(0,o.length-1)),l=isNaN(o)||0>o?0:1e3*o-50;else return void n.$.fireEvent(a,{index:i,label:t.label,content:t.content.innerHTML});t instanceof Smart.AccordionItem&&(t.$.addClass("smart-toggled-item"),n.$container.addClass("smart-toggling"),setTimeout(function(){t.$.removeClass("smart-toggled-item"),n.$container.removeClass("smart-toggling"),n.$.fireEvent(a,{index:i}),n._toggled=!1},l))}_indexChangeHandler(t){const i=this,a=i._items,n=a.length,o=t.detail;o.newIndex>=n?i.$.container.appendChild(a[o.oldIndex]):o.newIndex>o.oldIndex?i.$.container.insertBefore(a[o.oldIndex],a[o.newIndex+1]):i.$.container.insertBefore(a[o.oldIndex],a[o.newIndex]);let l=i.enableShadowDOM?i.shadowRoot.querySelectorAll("smart-accordion-item"):i.getElementsByTagName("smart-accordion-item");i._items=Array.from(l),i._updateItemsIndexProperty()}_keyDownHandler(t){function i(t){t===d||isNaN(t)||(s.focused=!1,d=t,s=n._items[d],s.focused=!0)}function a(t){return"up"===t?void(0>d-1?i(0):i(d-1)):void(d+1>r?i(r):i(d+1))}const n=this,o=t.key;if("none"===n.expandMode||n.disabled||n.readonly||n._toggled)return;if(-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"," ","Enter","Tab"].indexOf(o)||!(document.activeElement instanceof Smart.AccordionItem))return;"Tab"!==o&&t.preventDefault();let l=n._items.length,r=l-1,s,d;for(let a=0,i;a<l;a++)i=n._items[a],i.focused&&(s=i,d=a);switch(o){case"Tab":t.shiftKey?a("up"):a("down");break;case"ArrowLeft":n.collapse(d);break;case"ArrowDown":a("down");break;case"ArrowRight":n.expand(d);break;case"ArrowUp":a("up");break;case"End":i(r);break;case"Home":i(0);break;case" ":case"Enter":if(s.expanded)return void n.collapse(d);n.expand(d);break;default:}}_moveHandler(t){var i=Math.abs;const a=this;if(a._itemIsPressed&&a.reorder&&!a.readonly&&!(2>a._items.length))if(a._dragStart){if(a.$container.addClass("smart-reordering"),!a._dragging){const i=a._selectedItem;a.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:a._selectedItemIndex,label:i.label,content:i.content.innerHTML}),a._selectedItem.dragged=a._dragging=!0}const n=t.clientY;let o=!1;for(let t=0;t<a._itemsCoordinates.length;t++){const i=a._itemsCoordinates[t];if(n>=i.fromY&&n<=i.toY){o=t;break}}if(!0!==a._preventReorder&&!1!==o&&o!==a._reorderedIndex){if(1<i(a._reorderedIndex-o)){const t=0>a._reorderedIndex-o?-1:1;a._swapItems(a._reorderedIndex,o+t)}a._swapItems(a._reorderedIndex,o),a._reorderedIndex=o,a._storeItemsCoordinates()}a._preventReorder=!!(n<a._itemsCoordinates[a._reorderedIndex].fromY||n>a._itemsCoordinates[a._reorderedIndex].toY),1<i(a._reorderedIndex-o)&&(a._preventReorder=!1)}else a._dragStart=!0}_reorderItemsByIndex(){const t=this;let a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item"),i=Array.from(a),n=!1,o=i.map(function(t){return null===t.index?t.index=0:n=!0,t.index});if(n){const n=i.length;if(!(2>n)){let l=o.slice();if(l.sort(function(t,i){return parseInt(t)-parseInt(i)}),o.toString()!==l.toString())for(let o=0;o<n;o++){let i;for(let t=0;t<n;t++)a[t].index===l[o]&&(i=a[t]);t.$.container.insertBefore(i,a[o])}}}}_resizeHandler(){const t=this;t._updateExpanedContentHeight(),t._updateInlineHeight(),t._storeItemsCoordinates()}_storeItems(){const t=this,i=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item");if(t._items=Array.from(i),0===t._items.length)return void t.$container.addClass("smart-empty");t.$container.removeClass("smart-empty");const a=t._getItemsHeights();for(let n=0;n<t._items.length;n++)t._updateExpanedContentLocalHeight(t._items[n],a[n])}_storeItemsCoordinates(){const t=this;if(!t.disabled&&t.reorder){const a=[];for(let n=0;n<t._items.length;n++){const i=t._items[n],o=i.getBoundingClientRect();a.push({fromY:o.top+(window.scrollY||window.pageYOffset),toY:o.bottom+(window.scrollY||window.pageYOffset)})}t._itemsCoordinates=a}}_swapItems(t,i){const a=this,n=Math.min(t,i),o=Math.max(t,i),l=a._items;let r=a.expandedIndexes.slice();if(a._items[t].expanded&&!a._items[i].expanded){const n=r.indexOf(t);r[n]=i,a.expandedIndexes=r.slice()}else if(a._items[i].expanded&&!a._items[t].expanded){const n=r.indexOf(i);r[n]=t,a.expandedIndexes=r.slice()}a.selectedIndex=a.selectedIndex===t?i:t,a.$.container.insertBefore(l[o],l[n]),function(t,i,a){const n=t[a];t[a]=t[i],t[i]=n}(l,t,i),a._items[t].$.removeClass("hovered"),a._reorderedIndex=i}_toggleItems(t,a){const n=this,o=a.length;if(0<o)for(let l=0;l<o;l++)n["_"+t+"Item"](a[l])}_updateExpanedContentHeight(){const t=this;t.$.container.style.setProperty("--smart-accordion-item-header-height","");const a=t._items.length,n=t.$.container.offsetHeight,o=t._items[t.expandedIndexes[0]];let l=0,r=0,s=0,d=0;if(1===a){let i=t._items[0];i.expanded=!1,l=i.offsetHeight,r=i.$.accordionItemHeader.offsetHeight,i.expanded=!0}else for(;0===l&&d<a;){const i=t._items[d];i instanceof Smart.AccordionItem&&!i.expanded&&(l=i.offsetHeight,r=i.$.accordionItemHeader.offsetHeight),d++}if(1<a&&o instanceof Smart.AccordionItem){const t=o.$.accordionItemHeader.offsetHeight;s=t-r}const m=getComputedStyle(t.$.root),c=l*a;let u=n-c-s-parseFloat(m.paddingBottom)-parseFloat(m.paddingTop);"singleFitHeight"===t.expandMode&&(u=t._adjustHeightValue(u)),u=0<=u?u:0,t.$.container.style.setProperty("--smart-accordion-expanded-content-height",u+"px"),t.$.container.style.setProperty("--smart-accordion-item-header-height",r+"px"),t._expandedItemsContainerHeight=u}_updateExpanedContentLocalHeight(t,i){const a=this;a._supportCSSVariables&&a._usedCSSVariables&&t.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",i)}_updateInlineHeight(){const t=this;t._supportCSSVariables&&t._usedCSSVariables||"singleFitHeight"!==t.expandMode||0===t._items.length||(t._items[t.expandedIndexes[0]].$.accordionItemContent.style.height=t._expandedItemsContainerHeight-1+"px")}_updateItemsIndexProperty(){const t=this;let a=[];for(let n=0;n<t._items.length;n++)t._items[n]._setIndex(n),t._items[n].expanded&&a.push(n);t.expandedIndexes=a.slice()}_upHandler(t){const a=this;if(!(!a._itemIsPressed||a.disabled||a.readonly)){for(let t=0;t<a._items.length;t++)t!==a._selectedItemIndex&&(a._items[t].focused=!1);if(a._selectedItem.focused=!0,!a._dragging)a._selectedItem.expanded?a.collapse(a._selectedItemIndex,!0):a.expand(a._selectedItemIndex,!0);else{const i=a._selectedItem;a.$container.removeClass("smart-reordering"),a.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:a._selectedItemIndex,label:i.label,content:i.content.innerHTML})}a._reorderedIndex=void 0,a._dragStart=!1,a._dragging=!1,a._itemIsPressed=!1,a._selectedItem.dragged=!1,a._updateItemsIndexProperty()}}_validateItemsIndex(t,i){const a=this;return isNaN(parseInt(t))||0>t||t>a._items.length-1?void a.log(a.localize("indexOutOfBound",{elementType:a.nodeName.toLowerCase(),method:i})):parseInt(t)}}),Smart("smart-array",class extends Smart.BaseElement{static get properties(){return{arrayIndexingMode:{value:"LabVIEW",allowedValues:["LabVIEW","JavaScript"],type:"string"},changeProperty:{value:null,type:"function?"},columns:{value:1,type:"number"},customWidgetDefaultValue:{value:null,type:"any?"},dimensions:{value:1,type:"number"},elementHeight:{value:25,type:"number"},elementTemplate:{value:null,type:"function?"},elementWidth:{value:75,type:"number"},getElementValue:{value:null,type:"function?"},indexerHeight:{value:25,type:"number"},indexerWidth:{value:50,type:"number"},messages:{value:{en:{callbackFunctionRequired:"smart-array: When \"type\" is 'custom', the {{callback}} callback function has to be implemented."}},type:"object",extend:!0},rows:{value:1,type:"number"},setElementValue:{value:null,type:"function?"},showHorizontalScrollbar:{value:!1,type:"boolean"},showIndexDisplay:{value:!1,type:"boolean"},showSelection:{value:!1,type:"boolean"},showVerticalScrollbar:{value:!1,type:"boolean"},type:{value:"none",allowedValues:["none","boolean","numeric","string","custom"],type:"string"},value:{value:null,type:"array?",reflectToAttribute:!1}}}static get listeners(){return{resize:"_resizeHandler","horizontalScrollbar.change":"_scrollbarChangeHandler","horizontalScrollbar.click":"_scrollbarClickHandler","verticalScrollbar.change":"_scrollbarChangeHandler","verticalScrollbar.click":"_scrollbarClickHandler"}}static get requires(){return{"Smart.NumericTextBox":"smart.numerictextbox.js","Smart.ScrollBar":"smart.scrollbar.js","Smart.SwitchButton":"smart.switchbutton.js","Smart.TextBox":"smart.textbox.js"}}template(){return`<div>
                    <div id="indexerContainer" class="smart-indexer-container smart-hidden"></div>
                    <div id="bigContainer" class="smart-big-container smart-array-background">
                        <div id="centralContainer">
                            <div id="mainContainer" class="smart-main-container"></div>
                            <div id="horizontalScrollbarContainer" class="smart-scrollbar-container-horizontal smart-hidden">
                                <smart-scroll-bar id="horizontalScrollbar" animation="[[animation]]" min="0" max="0" value="0" step="1"></smart-scroll-bar>
                            </div>
                        </div>
                        <div id="verticalScrollbarContainer" class="smart-scrollbar-container-vertical smart-hidden">
                            <smart-scroll-bar id="verticalScrollbar" animation="[[animation]]" orientation="vertical" min="0" max="0" value="0" step="1"></smart-scroll-bar>
                        </div>
                    </div>
                </div>`}ready(){super.ready();const t=this;t._id=t.getAttribute("id")||Math.round(1e4*Math.random()),t._cachedWidth=t.offsetWidth,t._cachedHeight=t.offsetHeight,t._coordinates=[],t._getDefaultCellValue(),t._validateProperties(),t._addInitialDimensions(),"none"!==t.type&&(t._addElementStructure(),t._structureAdded=!0,t._initializeElements(!1)),t._getInitialFill(),t._updateWidgetWidth(),t._updateWidgetHeight(),t._cachedWidth=t.offsetWidth,t._cachedHeight=t.offsetHeight}addDimension(t){const i=this;if(!0!==i._suppressDimensionChange&&32===i.dimensions)return;const a=document.createElement("smart-numeric-text-box");a.className="smart-array-indexer",a.style.height=i.indexerHeight+"px",a.inputFormat="integer",a.spinButtons=!0,a.min=0,a.max=4294967295,a.disabled=i.disabled,a.animation=i.animation,a.onReady=function(){a.$upButton.addClass("smart-array-indexer-increment"),a.$downButton.addClass("smart-array-indexer-decrement")},i.$.indexerContainer.insertBefore(a,i.$.indexerContainer.children?i.$.indexerContainer.children[0]:null),a.$.listen("change",i._indexerChangeHandler.bind(i)),i._dimensions.push({index:i._dimensions.length,indexer:a}),"LabVIEW"===i.arrayIndexingMode?(i._indexers.unshift(a),i._coordinates.unshift(0)):(i._indexers.push(a),i._coordinates.push(0)),a.dimension=i._indexers.length-1,!0!==i._suppressDimensionChange&&(i.dimensions+=1,i.$.fireEvent("dimensionChange",{type:"add"})),!0!==i._initialDimensions&&!1!==t&&(i._validateValueArrayDimensions(),"LabVIEW"===i.arrayIndexingMode?i._filledUpTo.unshift(0):i._filledUpTo.push(0),!0===i._oneDimensionSpecialCase&&(i._oneDimensionSpecialCase=!1,i.$.verticalScrollbar.value=0,i._scroll())),i._absoluteSelectionStart!==void 0&&("LabVIEW"===i.arrayIndexingMode?i._absoluteSelectionStart.unshift(0):i._absoluteSelectionStart.push(0)),i._absoluteSelectionEnd!==void 0&&("LabVIEW"===i.arrayIndexingMode?i._absoluteSelectionEnd.unshift(0):i._absoluteSelectionEnd.push(0)),i._initialDimensions||i._refreshSelection(),!1===i._suppressDimensionChange&&!0===i.showIndexDisplay&&i.dimensions*(i.indexerHeight+4)-2>i._cachedHeight&&i._updateWidgetHeight("dimensions")}clearSelection(){const t=this;t._absoluteSelectionStart=void 0,t._absoluteSelectionEnd=void 0,t.showSelection&&t._clearSelection()}copyElementValueToClipboard(t,i){const a=this,n=a._getValueInCell(t,i);if(n!==void 0)try{const t=document.createElement("input");t.type="text",t.style.position="absolute",t.value=n,a.appendChild(t),t.focus(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),a.removeChild(t)}catch(t){}}deleteColumn(t){const i=this,a="LabVIEW"===i.arrayIndexingMode;let n;if(t=Math.max(0,t),n=a?i._filledUpTo[i._filledUpTo.length-1]:i._filledUpTo[0],t>n)return;if(0===n||i._oneDimensionSpecialCase&&0===t)return void i.emptyArray();const o=JSON.stringify(i.value);let l,r;if(a){l=i.dimensions-1,r=t+i._coordinates[l];const a=function(t,n){if(l!==n)for(let o=0;o<t.length;o++)a(t[o],n+1);else t.splice(r,1)};a(i.value,0)}else l=0,r=t+i._coordinates[0],i.value.splice(r,1);JSON.stringify(i.value)!==o&&(i._filledUpTo[l]--,i._scroll(),i.$.fireEvent("change",{value:i.value,oldValue:JSON.parse(o)}),i._setMaxValuesOfScrollBars())}deleteRow(t){const a=this,i=JSON.stringify(a.value),n="LabVIEW"===a.arrayIndexingMode;let o,l,r;if(t=Math.max(0,t),r=n?a._filledUpTo[a._filledUpTo.length-2]:a._filledUpTo[1],!(t>r)){if(0===r)return void a.emptyArray();if(1===a.dimensions){if(!a._oneDimensionSpecialCase)return void(0===t&&a.emptyArray());a.value.splice(t+a._coordinates[0],1),a._filledUpTo[0]--}else{if(n){o=a.dimensions-2,l=t+a._coordinates[o];const n=function(t,a){if(o!==a)for(let o=0;o<t.length;o++)n(t[o],a+1);else t.splice(l,1)};n(a.value,0)}else{o=1,l=t+a._coordinates[1];for(let t=0;t<a.value.length;t++){const i=a.value[t];i.splice(l,1)}}a._filledUpTo[o]--}i!==JSON.stringify(a.value)&&(a._scroll(),a.$.fireEvent("change",{value:a.value,oldValue:JSON.parse(i)}),a._setMaxValuesOfScrollBars())}}emptyArray(){const t=this;if("none"!==t.type){const a=t._cells,i=t.value;if(t.value=t._returnEmptyArray(),JSON.stringify(i)!==JSON.stringify(t.value)){for(let n=0;n<a.length;n++)for(let i=0;i<a[n].length;i++){const o=a[n][i].widget,l={x:i,y:n},r=t._getDefaultValue();o.classList.add("smart-array-element-empty"),t._areDifferent(t._getElementValue(o,l),r)&&(o.supressChange=!0,t._setElementValue(r,o,l))}t._getInitialFill(),t.clearSelection(),t.$.fireEvent("change",{value:t.value,oldValue:i})}}}endSelection(t,i){var a=Math.min;const n=this;if(void 0===n._absoluteSelectionStart)return;n._absoluteSelectionEnd=n._coordinates.slice(0);const o=n.dimensions;"LabVIEW"===n.arrayIndexingMode?(n._absoluteSelectionEnd[o-1]=a(i,n._filledUpTo[o-1]),1<o&&(n._absoluteSelectionEnd[o-2]=a(t,n._filledUpTo[o-2]))):(n._absoluteSelectionEnd[0]=a(i,n._filledUpTo[0]),1<o&&(n._absoluteSelectionEnd[1]=a(t,n._filledUpTo[1])));let l=!0;for(let a=0;a<o;a++)l=l&&n._absoluteSelectionStart[a]<=n._absoluteSelectionEnd[a];l?n._refreshSelection():(n._absoluteSelectionStart=void 0,n._absoluteSelectionEnd=void 0)}getElement(t,i){const a=this._cells;return void 0===a[t]||void 0===a[t][i]?void 0:a[t][i].widget}getElementSize(){const t=this;return{width:t.elementWidth,height:t.elementHeight}}getIndexerValue(){const t=this._indexers,a=[];for(let n=0;n<t.length;n++)a.push(t[n].val());return a}hitTest(t,i){const a=this,n=document.elementFromPoint(t,i);if(a.contains(n)){const t=n.closest(".smart-array-element"),i=n.closest(".smart-array-indexer");if(null!==t)return{type:"element",htmlElement:t,row:t.row,column:t.col};if(null!==i){let t=i.dimension;return"LabVIEW"===a.arrayIndexingMode&&(t=a.dimensions-t-1),{type:"indexer",htmlElement:i,dimension:t}}return{type:"array",htmlElement:a}}}insertColumnBefore(t,i){const a=this,n=JSON.stringify(a.value),o="LabVIEW"===a.arrayIndexingMode;let l;if(o&&!0!==i)return void a.insertRowBefore(t,!0);if(1!==a.dimensions){const i=a._filledUpTo.slice(0);if(o){l=t+a._coordinates[a.dimensions-2];const n=a.dimensions-2,o=function(t,a){if(n!==a)for(let n=0;n<t.length;n++)o(t[n],a+1);else t.splice(l,0,[])};o(a.value,0),i[n]++}else l=t+a._coordinates[0],a.value.splice(l,0,a._returnEmptyArray()[0]),i[0]++;a._fillValueArray(i,!0)}else if(o===a._oneDimensionSpecialCase)a.value.splice(t+a._coordinates[0],0,a._getDefaultValue()),a._scroll(),a._filledUpTo[0]++;else return;a.$.fireEvent("change",{value:a.value,oldValue:JSON.parse(n)}),a._setMaxValuesOfScrollBars()}insertRowBefore(t,i){const a=this,n=JSON.stringify(a.value),o="LabVIEW"===a.arrayIndexingMode;if(o&&!0!==i)return void a.insertColumnBefore(t,!0);if(1!==a.dimensions){const i=a._filledUpTo.slice(0);let n;if(o){const o=a.dimensions-1;n=t+a._coordinates[o];const l=function(t,r){if(o!==r)for(let a=0;a<t.length;a++)l(t[a],r+1);else t.splice(n,0,a._getDefaultValue())};l(a.value,0),i[o]++}else{n=t+a._coordinates[1];for(let t=0;t<a.value.length;t++){const i=a.value[t];i.splice(n,0,void 0)}i[1]++}a._fillValueArray(i,!0)}else if(o&&!a._oneDimensionSpecialCase||!o&&a._oneDimensionSpecialCase)a.value.splice(t+a._coordinates[0],0,a._getDefaultValue()),a._scroll(),a._filledUpTo[0]++;else return;a.$.fireEvent("change",{value:a.value,oldValue:JSON.parse(n)}),a._setMaxValuesOfScrollBars()}reinitializeArray(){const t=this;if("none"===t.type)return;const a=t.dimensions,i=JSON.stringify(t.value);if(1===t.dimensions)t.value.fill(t._getDefaultValue());else{const n=function(o,l){for(let r=0;r<o.length;r++)l===a?o[r]=t._getDefaultValue():n(o[r],l+1)};n(t.value,1)}i!==JSON.stringify(t.value)&&(t._scroll(),t.$.fireEvent("change",{value:t.value,oldValue:JSON.parse(i)}))}removeDimension(t,i){const a=this,n=a._dimensions.length-1;if(2>a._dimensions.length)return;if(2===a._dimensions.length){const t=a.rows;a.rows=1,a._changeRowsColumns("rows",t,1,void 0,!0)}a.$.indexerContainer.removeChild(a._dimensions[n].indexer),a._dimensions.pop();let o;"LabVIEW"===a.arrayIndexingMode?(o=a._coordinates[0],a._indexers.splice(0,1),a._coordinates.splice(0,1)):(o=a._coordinates[n],a._indexers.pop(),a._coordinates.pop()),!0!==a._suppressDimensionChange&&(a.dimensions-=1,a.$.fireEvent("dimensionChange",{type:"remove"})),!1!==i&&(a._removeDimensionFromJSArray(),"LabVIEW"===a.arrayIndexingMode?a._filledUpTo.splice(0,1):a._filledUpTo.pop()),a._absoluteSelectionStart!==void 0&&("LabVIEW"===a.arrayIndexingMode?a._absoluteSelectionStart.splice(0,1):a._absoluteSelectionStart.pop()),a._absoluteSelectionEnd!==void 0&&("LabVIEW"===a.arrayIndexingMode?a._absoluteSelectionEnd.splice(0,1):a._absoluteSelectionEnd.pop()),0<o&&a._scroll(),(1<a.dimensions&&!1===a._suppressDimensionChange&&!0===a.showIndexDisplay&&(a.dimensions+1)*(a.indexerHeight+4)-2>=a._cachedHeight||1===a.dimensions&&!0!==t)&&(a._updateWidgetHeight("dimensions"),1===a.dimensions&&a.showVerticalScrollbar&&a._showVerticalScrollbar(!1))}reset(t){const i=this;if("none"===i.type&&!0!==t)return;i.type="none";let a=i.rows;i.rows=1,i._changeRowsColumns("rows",a,1,!0),a=i.columns,i.columns=1,i._changeRowsColumns("columns",a,1);const n=i._cells[0][0];n.widget.$.unlisten("change"),n.widget.$.unlisten("click"),n.td.innerHTML="",i._table.classList.add("smart-hidden"),i._defaultValue=void 0;const o=i.value;i.value=null,i.$.fireEvent("change",{value:i.value,oldValue:o}),i.$.horizontalScrollbar.max=0,i.$.horizontalScrollbar.value=0,i.$.verticalScrollbar.max=0,i.$.verticalScrollbar.value=0}resizeElement(t,a){const i=this;if(t=parseInt(t,10),a=parseInt(a,10),t!==i.elementWidth||a!==i.elementHeight){if(t===i.elementWidth)return void i.setRowHeight(a);if(a===i.elementHeight)return void i.setColumnWidth(t);const n=i.getElementsByClassName("smart-array-element-"+i._id);if(i.elementWidth=t,i.elementHeight=a,"none"!==i.type){if(i._updateWidgetWidth(),i._updateWidgetHeight(),"custom"!==i.type)for(let o=0;o<n.length;o++)n[o].style.width=t+"px",n[o].style.height=a+"px";else if(i.changeProperty)i.changeProperty("width",t,n),i.changeProperty("height",a,n);else try{i.warn(i.localize("callbackFunctionRequired",{callback:"changeProperty"}))}catch(t){}i.$.fireEvent("sizeChange",{width:t,height:a})}}}selectAll(){const t=this;if(("LabVIEW"!==t.arrayIndexingMode||-1!==t._filledUpTo[0])&&("JavaScript"!==t.arrayIndexingMode||-1!==t._filledUpTo[t._filledUpTo.length-1])){const i=Array(t.dimensions);i.fill(0),t._absoluteSelectionStart=i,t._absoluteSelectionEnd=t._filledUpTo.slice(0),t._refreshSelection()}}selectElement(t,i){const a=this;a.startSelection(t,i),a.endSelection(t,i)}setColumnWidth(t,i){const a=this;if(t=parseInt(t,10),t!==a.elementWidth||!0===i){const n=a.getElementsByClassName("smart-array-element-"+a._id);if(a.elementWidth=t,"none"!==a.type){if("custom"!==a.type)for(let a=0;a<n.length;a++)n[a].style.width=t+"px";else if(a.changeProperty)a.changeProperty("width",t,n);else try{a.warn(a.localize("callbackFunctionRequired",{callback:"changeProperty"}))}catch(t){}a._updateWidgetWidth(),a.$.fireEvent("sizeChange",{width:t,height:a.elementHeight})}}}setDefaultValue(t){const i=this;i._areDifferent(t,i._defaultValue)&&(i._defaultValue=t,i._scroll())}setIndexerValue(t){const a=this;let n=!1;for(let o=0;o<t.length;o++){const i=t[o].index,l="LabVIEW"===a.arrayIndexingMode?a.dimensions-i-1:i,r=t[o].value,s=a._indexers[i];s!==void 0&&r!==a._coordinates[i]&&(n=!0,s.val(r),a._coordinates[i]=r,"none"!==a.type&&(0===l||1===l)&&a._syncScrollbar(l,r))}!0==n&&a._scroll()}setRowHeight(t,i){const a=this;if(t=parseInt(t,10),t!==a.elementHeight||!0===i){const n=a.getElementsByClassName("smart-array-element-"+a._id);if(a.elementHeight=t,"none"!==a.type){if("custom"!==a.type)for(let a=0;a<n.length;a++)n[a].style.height=t+"px";else if(a.changeProperty)a.changeProperty("height",t,n);else try{a.warn(a.localize("callbackFunctionRequired",{callback:"changeProperty"}))}catch(t){}a._updateWidgetHeight(),a.$.fireEvent("sizeChange",{width:a.elementWidth,height:t})}}}showLastElement(){const t=this,a=[];let n,o;if("none"!==t.type){if(1===t.dimensions){const i=parseFloat(t._indexers[0].value),a=t._oneDimensionSpecialCase?t.rows:t.columns,n=t._filledUpTo[0];return void((i+a<n+1||i>n)&&t.setIndexerValue([{index:0,value:n}]))}"LabVIEW"===t.arrayIndexingMode?(n=t.dimensions-1,o=t.dimensions-2):(n=0,o=1);for(let l=0,i;l<t.dimensions;l++){if(i=t._filledUpTo[l],l===n){const a=parseFloat(t._indexers[l].value);a+t.columns<i+1||a>i||(i=a)}else if(l===o){const a=parseFloat(t._indexers[l].value);a+t.rows<i+1||a>i||(i=a)}a.push({index:l,value:i})}t.setIndexerValue(a)}}startSelection(t,i){const a=this;a._absoluteSelectionStart=a._coordinates.slice(0),1===a.dimensions?a._absoluteSelectionStart[0]=i:"LabVIEW"===a.arrayIndexingMode?(a._absoluteSelectionStart[a.dimensions-1]=i,a._absoluteSelectionStart[a.dimensions-2]=t):(a._absoluteSelectionStart[0]=i,a._absoluteSelectionStart[1]=t),a._absoluteSelectionEnd=void 0}toggleElementGap(){const t=this;if("none"===t.type)return;let a;t._elementGap===void 0&&(t._elementGap=!1),t._elementGap?(a="remove",t._elementGap=!1):(a="add",t._elementGap=!0);for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t._cells[n][i].td.classList[a]("smart-array-table-data-gap");t._updateWidgetWidth(),t._updateWidgetHeight()}transposeArray(){const t=this;if(2===t.dimensions){const i=t.value[0].map(function(a,n){return t.value.map(function(t){return t[n]})}),a=JSON.stringify(t.value);t.value=i,t._scroll(),t.$.fireEvent("change",{value:i,oldValue:JSON.parse(a)}),t._filledUpTo.reverse()}}val(t,a){const n=this;let o;if(2===arguments.length){if("none"===n.type)return;o=JSON.stringify(n.value);let l=n.value,r;for(r=0;r<n.dimensions-1;r++){let t=a[r];t===void 0&&(t=0,a[r]=0),l[t]===void 0&&(l[t]=[]),l=l[t]}let i=a[r];i===void 0&&(i=0,a[r]=0),n._areDifferent(l[i],t)&&(l[i]=t,n._fillValueArray(a.slice(0)),n.$.fireEvent("change",{value:n.value,oldValue:JSON.parse(o),dimensionIndexes:a}))}else if(void 0!==t&&("object"!=typeof t||0!==Object.keys(t).length)){if("none"===n.type)return;const i=JSON.stringify(n.value);i!==JSON.stringify(t)&&(o=n.value,n.value=t,n._validateValue(),i!==JSON.stringify(n.value)&&(n._scroll(),n._getInitialFill(),n.$.fireEvent("change",{value:n.value,oldValue:o})))}else return n.value}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;if(a!==i)switch(t){case"arrayIndexingMode":n.arrayIndexingMode=i;break;case"columns":case"rows":n._changeRowsColumns(t,i,a);break;case"customWidgetDefaultValue":"custom"===n.type&&(n._defaultValue=a,n._scroll());break;case"dimensions":n._addRemoveMultipleDimensions(i,a);break;case"animation":case"disabled":for(let i=0;i<n._indexers.length;i++)n._indexers[i][t]=a;if("none"!==n.type){const o=n.getElementsByClassName("smart-array-element-"+n._id);if("custom"!==n.type)for(let n=0;n<o.length;n++)o[n][t]=a;else if(n.changeProperty)n.changeProperty(t,a,o);else try{n.warn(n.localize("callbackFunctionRequired",{callback:"changeProperty"}))}catch(t){}n._scroll()}break;case"elementHeight":n.setRowHeight(a,!0);break;case"elementTemplate":if("none"!==n.type){const t=n.getElementsByClassName("smart-array-element-"+n._id);for(let i=0,a;i<t.length;i++)a=t[i],n.elementTemplate(a,{x:a.col,y:a.row})}break;case"elementWidth":n.setColumnWidth(a,!0);break;case"indexerHeight":for(let t=0;t<n._indexers.length;t++)n._indexers[t].style.height=a+"px";n._updateWidgetHeight();break;case"indexerWidth":n.$.indexerContainer.style.width=a+"px",n._updateWidgetWidth();break;case"showHorizontalScrollbar":if(!0===n._oneDimensionSpecialCase)return void(n.showHorizontalScrollbar=!1);n._showHorizontalScrollbar(a);break;case"showIndexDisplay":a?n.$indexerContainer.removeClass("smart-hidden"):n.$indexerContainer.addClass("smart-hidden"),n._updateWidgetWidth(),n._updateWidgetHeight("showIndexDisplay");break;case"showSelection":a?n._refreshSelection():n._clearSelection();break;case"showVerticalScrollbar":if(1===n.dimensions&&!1===n._oneDimensionSpecialCase)return void(n.showVerticalScrollbar=!1);n._showVerticalScrollbar(a);break;case"type":n._getDefaultCellValue(),"none"!==i&&"none"!==a?(n._initializeElements(!0),n._updateWidgetWidth(),n._updateWidgetHeight()):"none"===i?(n.value=n._returnEmptyArray(),!0===n._structureAdded?(n._initializeElements(!1),n._table.classList.remove("smart-hidden")):(n._addElementStructure(),n._structureAdded=!0,n._initializeElements(!1)),n.$.centralContainer.style.width="",n.$.bigContainer.style.width="",n.$.mainContainer.style.height="",n.$.bigContainer.style.height="",n._updateWidgetWidth(),n._updateWidgetHeight(),n._getInitialFill()):"none"===a&&n.reset(!0);break;case"value":JSON.stringify(i)!==JSON.stringify(a)&&(n._validateValue(),JSON.stringify(i)!==JSON.stringify(n.value)&&(n._scroll(),n._getInitialFill(),n.$.fireEvent("change",{value:n.value,oldValue:i})));}}_addDimensionToJSArray(t){const i=this;if("LabVIEW"===i.arrayIndexingMode)i.value=[i.value];else{t===void 0&&(t=i.dimensions-1);const a=function(n,o){for(let l=0;l<n.length;l++)o===t?n[l]=[n[l]]:a(n[l],o+1)};a(i.value,1)}}_addElementHandlers(t){const i=this;t.$.listen("change",function(a){if(!0!==t.supressChange||t instanceof Smart.NumericTextBox){t.$.removeClass("smart-array-element-empty");const a=t.col,n=t.row;i._updateValue(n,a,i._getElementValue(t,{x:a,y:n},!0))}else t.supressChange=!1;a.stopPropagation()}),t.$.listen("click",function(){i.$.fireEvent("elementClick",{element:t})})}_addElementStructure(){const t=this;t._cells=[],t._table=document.createElement("table"),t._table.className="smart-array-element-gap";const i=document.createElement("tbody"),a=document.createDocumentFragment();for(let n=0;n<t.rows;n++){const i=document.createElement("tr"),o=document.createDocumentFragment();i.classList.add("smart-array-table-row"),t._cells.push([]);for(let i=0;i<t.columns;i++){const i=document.createElement("td");i.classList.add("smart-array-table-data"),t._elementGap&&i.classList.add("smart-array-table-data-gap"),t._cells[n].push({td:i}),o.appendChild(i)}i.appendChild(o),a.appendChild(i)}i.appendChild(a),t._table.appendChild(i),t.$.mainContainer.appendChild(t._table),t._tableBody=i}_addInitialDimensions(){const t=this,a=t.dimensions;t._dimensions=[],t._indexers=[],t._suppressDimensionChange=!0,t._initialDimensions=!0;for(let n=0;n<a;n++)t.addDimension();t._suppressDimensionChange=!1,t._initialDimensions=!1}_addRemoveColumn(t){const a=this;if("add"===t){const t=a._tableBody.children;for(let n=0;n<a._cells.length;n++){const i=a._cells[n],o=document.createElement("td");o.classList.add("smart-array-table-data"),a._elementGap&&o.classList.add("smart-array-table-data-gap"),i.push({td:o}),t[n].appendChild(o),a._initializeWidget(n,i.length-1)}a.columns++,!0!==a._suppressScroll&&a._scroll()}else if("remove"===t&&1<a.columns){for(let t=0;t<a._cells.length;t++){const i=a._cells[t],n=i[i.length-1];n.widget.$.unlisten("change"),n.widget.$.unlisten("click"),n.td.parentElement.removeChild(n.td),i.pop()}a.columns--}}_addRemoveMultipleDimensions(t,i,a){const n=this;if((1>i||32<i)&&(n.dimensions=1,n.dimensions===t))return;let o=n.dimensions-t;if(n._suppressDimensionChange=!0,0<o){do n.addDimension(a),o-=1;while(0<o);n.$.fireEvent("dimensionChange",{type:"add"})}else if(0>o){if(1===i){const a=n.rows;n.rows=1,n.dimensions=t,n._changeRowsColumns("rows",a,1,void 0,!0),n.dimensions=i}do n.removeDimension(!0,a),o+=1;while(0>o);n.$.fireEvent("dimensionChange",{type:"remove"}),1===i&&n.showVerticalScrollbar&&n._showVerticalScrollbar(!1)}else return;n._suppressDimensionChange=!1,(!0!==n.showIndexDisplay||1!==i&&(0<i-t&&i*(n.indexerHeight+4)-2<n._cachedHeight||0>i-t&&t*(n.indexerHeight+4)-2<n._cachedHeight))&&1!==i||n._updateWidgetHeight("dimensions")}_addRemoveRow(t){const a=this;if("add"===t&&(1<a.dimensions||1===a.dimensions&&1===a.columns)){a._cells.push([]);const t=document.createElement("tr"),i=document.createDocumentFragment(),n=a._cells.length-1,o=[];t.classList.add("smart-array-table-row");for(let t=0;t<a.columns;t++){const t=document.createElement("td");t.classList.add("smart-array-table-data"),a._elementGap&&t.classList.add("smart-array-table-data-gap"),a._cells[n].push({td:t}),o.push(t),i.appendChild(t)}t.appendChild(i),a._tableBody.appendChild(t);for(let t=0;t<o.length;t++)a._initializeWidget(n,t);a.rows++,!0!==a._suppressScroll&&a._scroll()}else if("remove"===t&&1<a.rows){const t=a._tableBody.children[a._tableBody.children.length-1],i=a._cells[a._cells.length-1];for(let t=0;t<i.length;t++)i[t].widget.$.unlisten("change"),i[t].widget.$.unlisten("click");a._tableBody.removeChild(t),a._cells.pop(),a.rows--}}_addSelectionClass(t,i,a,n){const o=this;o.showSelection&&o._absoluteSelectionStart!==void 0&&o._absoluteSelectionEnd!==void 0&&(!1===n&&o._inSelection(t,i)?a.classList.add("smart-array-element-selected"):a.classList.remove("smart-array-element-selected"))}_areDifferent(t,i){if(t instanceof Date){if(i instanceof Date)return t.getTime()!==i.getTime();if("string"==typeof i)try{return t.getTime()!==new Date(i).getTime()}catch(t){}return!0}if(i instanceof Date){if("string"==typeof t)try{return i.getTime()!==new Date(t).getTime()}catch(t){}return!0}return"object"!=typeof t||typeof t!=typeof i?t!==i:JSON.stringify(t)!==JSON.stringify(i)}_changeRowsColumns(t,i,a,n,o){const l=this,r="_addRemove"+t.charAt(0).toUpperCase()+t.slice(1,t.length-1);if(1>a&&(l[t]=1,l[t]===i))return;if(1===l.dimensions)if(!0===l._oneDimensionSpecialCase){if("columns"===t&&1<l[t]){if(1<l.rows)return void(l.columns=1);l._oneDimensionSpecialCase=!1,l.showVerticalScrollbar&&(l._showVerticalScrollbar(!1),l._showHorizontalScrollbar(!0))}}else if("rows"===t){if(1<l.columns)return void(l.rows=1);1<l.rows&&(l._oneDimensionSpecialCase=!0,!0===l.showHorizontalScrollbar&&(l._showHorizontalScrollbar(!1),l._showVerticalScrollbar(!0)))}let s=l[t]-i;if(l[t]=i,0<s){l._suppressScroll=!0;do l[r]("add"),s-=1;while(0<s);l._suppressScroll=!1,l._scroll()}else if(0>s)do l[r]("remove"),s+=1;while(0>s);l.$.fireEvent("arraySizeChange",{type:t,number:l[t],oldNumber:i}),"columns"===t?(l._updateWidgetWidth(),l._setMaxValuesOfScrollBars("horizontal")):"rows"==t&&!0!==o&&(l._updateWidgetHeight(!0===n?"dimensions":void 0),l._setMaxValuesOfScrollBars("vertical"))}_clearSelection(){const t=this;for(let a=0;a<t.rows;a++)for(let i=0;i<t.columns;i++)t._cells[a][i].td.classList.remove("smart-array-element-selected")}_cloneValue(t){if("object"!=typeof t)return t;return t instanceof Date?new Date(t.getTime()):Array.isArray(t)||t instanceof Object?JSON.parse(JSON.stringify(t)):void 0}_fillValueArray(t,i){function a(l,r){for(let s=0;s<=t[r];s++)r===o-1?void 0===l[s]&&(l[s]=n._getDefaultValue()):(void 0===l[s]&&(l[s]=[]),a(l[s],r+1))}const n=this,o=n.dimensions;if(n._filledUpTo!==void 0&&!0!==i){let i=!0;for(let o=0;o<t.length;o++)i=i&&n._filledUpTo[o]>=t[o],t[o]=Math.max(t[o],n._filledUpTo[o]);if(!0==i)return void n._scroll()}n._filledUpTo=t.slice(0),a(n.value,0),n._scroll(),n._setMaxValuesOfScrollBars()}_getDefaultCellValue(){const t=this;switch(t.type){case"custom":t._defaultValue=null===t.customWidgetDefaultValue?void 0:t.customWidgetDefaultValue;break;case"numeric":t._defaultValue=0;break;case"boolean":t._defaultValue=!1;break;case"string":t._defaultValue="";}}_getDefaultValue(){const t=this;return t._cloneValue(t._defaultValue)}_getElementValue(t,i,a){const n=this;let o;return o=n.getElementValue?n.getElementValue(t,i):"boolean"===n.type?t.checked:t.value,!0===a?n._cloneValue(o):o}_getInitialFill(){const t=this;if(t._filledUpTo=[],"none"!==t.type){let a=t.value;for(let n=0;n<t.dimensions;n++){const i=a.length-1;t._filledUpTo[n]=i,a=a[i]}t._setMaxValuesOfScrollBars()}}_getMaxValuesOfScrollBars(t){const i=this,a=i._filledUpTo.length;let n=0,o,l,r;return("horizontal"===t?(r=i.$.horizontalScrollbar.value,o="LabVIEW"===i.arrayIndexingMode?i._filledUpTo[a-1]:i._filledUpTo[0],l=i.columns):(r=i.$.verticalScrollbar.value,o=i._oneDimensionSpecialCase?"LabVIEW"===i.arrayIndexingMode?i._filledUpTo[a-1]:i._filledUpTo[0]:"LabVIEW"===i.arrayIndexingMode?i._filledUpTo[a-2]:i._filledUpTo[1],l=i.rows),void 0===o)?0:(n=o-l+2,Math.max(n,r))}_getValueInCell(t,i){const a=this,n=a.value,o=a._coordinates,l=o.length;let r;if(1===l)r=!1===a._oneDimensionSpecialCase?n[i+o[0]]:n[t+o[0]];else{const s=o.slice(0);"LabVIEW"===a.arrayIndexingMode?(s[l-1]+=i,s[l-2]+=t):(s[0]+=i,s[1]+=t);const d=n[s[0]];if(d!==void 0){const t=d[s[1]];if(void 0!==t&&(r=t,2<l))for(let t=2;t<l&&void 0!==r;t++)r=r[s[t]]}}return r}_indexerChangeHandler(t){const i=this,a=i.context;i.context=i;const n=t.target.dimension,o="LabVIEW"===i.arrayIndexingMode?i.dimensions-n-1:n,l=parseFloat(t.detail.value);i._coordinates[o]=l,i._scroll(),"none"!==i.type&&(0===n||1===n)&&i._syncScrollbar(n,l),t.stopPropagation(),i.context=a}_initializeElements(t){function i(t){a.elementTemplate&&a.elementTemplate(t,{x:t.col,y:t.row})}const a=this,n=a._cells;if(a._initializeElement=function(){},"custom"!==a.type)switch(a.type){case"numeric":a._initializeElement=function(t,n){t.style.width=a.elementWidth+"px",t.style.height=a.elementHeight+"px",t.disabled=a.disabled,t.animation=a.animation,t.inputFormat="floatingPoint",t.spinButtons=!0,t.value=n,i(t)};break;case"boolean":a._initializeElement=function(t,n){t.style.width=a.elementWidth+"px",t.style.height=a.elementHeight+"px",t.disabled=a.disabled,t.animation=a.animation,t.checked=n,i(t)};break;case"string":a._initializeElement=function(t,n){t.style.width=a.elementWidth+"px",t.style.height=a.elementHeight+"px",t.disabled=a.disabled,t.animation=a.animation,t.value=n,i(t)};}else a._initializeElement=function(t,i){if(a.elementTemplate){const n={x:t.col,y:t.row};a.elementTemplate(t,n),void 0!==i&&a._setElementValue(i,t,n)}else a.error(a.localize("callbackFunctionRequired",{callback:"elementTemplate"}))};for(let o=0;o<n.length;o++)for(let i=0;i<n[o].length;i++){if(!0===t){const t=n[o][i];t.widget.$.unlisten("change"),t.widget.$.unlisten("click"),t.td.innerHTML=""}a._initializeWidget(o,i)}}_initializeWidget(t,i){const a=this,n=a._cells[t][i],o=a._getValueInCell(t,i);let l;switch(a.type){case"boolean":l=document.createElement("smart-switch-button");break;case"numeric":l=document.createElement("smart-numeric-text-box");break;case"string":l=document.createElement("smart-text-box");break;case"custom":l=document.createElement("div"),l.$=Smart.Utilities.Extend(l);}l.row=t,l.col=i,n.widget=l,a._initializeElement(l,o===void 0?a._getDefaultValue():o,n),n.td.appendChild(l),l.classList.add("smart-array-element"),l.classList.add("smart-array-element-"+a._id),o===void 0&&l.classList.add("smart-array-element-empty"),a._addElementHandlers(l)}_inSelection(t,i){const a=this,n=a._coordinates;let o=!0,l,r,s,d;if("LabVIEW"===a.arrayIndexingMode?(l=a.dimensions-1,r=a.dimensions-2):(l=0,r=1),a._oneDimensionSpecialCase?s=i+n[l]:(s=t+n[l],d=i+n[r]),1===a.dimensions)return!!(s>=a._absoluteSelectionStart[l]&&s<=a._absoluteSelectionEnd[l]);if(o=!!(s>=a._absoluteSelectionStart[l]&&s<=a._absoluteSelectionEnd[l]&&d>=a._absoluteSelectionStart[r]&&d<=a._absoluteSelectionEnd[r]),"LabVIEW"===a.arrayIndexingMode)for(let t=0;t<r;t++)o=o&&n[t]>=a._absoluteSelectionStart[t]&&n[t]<=a._absoluteSelectionEnd[t];else for(let t=2;t<a.dimensions;t++)o=o&&n[t]>=a._absoluteSelectionStart[t]&&n[t]<=a._absoluteSelectionEnd[t];return o}_moveScrollbar(t,i,a,n){if(isNaN(n))return;const o=this,l=o._getMaxValuesOfScrollBars(i),r=t.max;let s;s="LabVIEW"===o.arrayIndexingMode?o.dimensions-a-1:a,o._indexers[s].val(n),o._coordinates[s]=n,n<=l?t.max=l:n<=r&&(t.max=n),o._scroll(),o.$.fireEvent("scroll",{direction:i})}_refreshSelection(){const t=this;if(t.showSelection)for(let a=0;a<t.rows;a++)for(let i=0;i<t.columns;i++){const n=t._getValueInCell(a,i);t._addSelectionClass(i,a,t._cells[a][i].td,void 0===n)}}_removeDimensionFromJSArray(){const t=this;if("LabVIEW"===t.arrayIndexingMode)t.value=t.value[0];else{const a=t.dimensions+1,n=function(o,l,r,s){for(let d=0;d<o.length;d++)l!==a&&0<o[d].length?n(o[d],l+1,o,d):void 0===r?t.value=t.value[0]:r[s]=o[0]};n(t.value,1)}}_resizeHandler(){const t=this;if(t.offsetWidth!==t._cachedWidth)if("none"!==t.type){const i=t.offsetWidth-t._cachedWidth,a=t.elementWidth;if(Math.abs(i)<a)return void(t.style.width=t._cachedWidth+"px");const n=Math.round(i/a),o=t.columns,l=o+n;t.columns=l,t._changeRowsColumns("columns",o,l)}else t._updateWidgetWidth();if(t._cachedWidth=t.offsetWidth,t.offsetHeight!==t._cachedHeight)if("none"===t.type)t._updateWidgetHeight();else return void(t.style.height=t._cachedHeight+"px");t._cachedHeight=t.offsetHeight}_returnEmptyArray(){const t=this,i=[];let a=i;if(1<t.dimensions)for(let n=1;n<t.dimensions;n++)a[0]=[],a=a[0];return i}_scroll(){const t=this;if("none"!==t.type)for(let a=0;a<t._cells.length;a++)for(let i=0;i<t._cells[a].length;i++){const n=t._getValueInCell(a,i),o=t._cells[a][i].widget,l={x:i,y:a},r=t._getElementValue(o,l);let s;void 0===n?(o.classList.add("smart-array-element-empty"),t._areDifferent(r,t._defaultValue)?(o.supressChange=!0,t._setElementValue(t._getDefaultValue(),o,l)):o.supressChange=!1,s=!0):(o.classList.remove("smart-array-element-empty"),t._areDifferent(r,n)?(o.supressChange=!0,t._setElementValue(n,o,l)):o.supressChange=!1,s=!1),t._addSelectionClass(i,a,t._cells[a][i].td,s)}}_scrollbarChangeHandler(t){const i=this;let a,n;t.stopPropagation();"none"===i.type||(t.target===i.$.horizontalScrollbar?(a="horizontal",n=0):(a="vertical",n=i._oneDimensionSpecialCase?0:1),!0===i._suppressScrollbarEvent?i._suppressScrollbarEvent=!1:i._moveScrollbar(t.target,a,n,Math.round(t.detail.value)),!i._clickTriggered&&(i._changeTriggered=!0,setTimeout(function(){i._changeTriggered=!1},50)))}_scrollbarClickHandler(t){const i=t.target.closest(".smart-scroll-button");if(null===i)return;const a=this,n=i.parentElement.parentElement;if(i===n.$.farButton){if(a._changeTriggered)return;a._clickTriggered=!0,setTimeout(function(){a._clickTriggered=!1},50);const t=n.max;let i=n.value;!0===isNaN(i)&&(i=0),t===i&&(n.max=t+1,n.value=t+1)}}_setElementValue(t,i,a){const n=this;t=n._cloneValue(t),n.setElementValue?(n.setElementValue(t,i,a),!0===i.supressChange&&(i.supressChange=!1)):"boolean"===n.type?i.checked=t:i.value=t}_setMaxValuesOfScrollBars(t){const i=this;i.showHorizontalScrollbar&&(t===void 0||"horizontal"===t)&&(i.$.horizontalScrollbar.max=i._getMaxValuesOfScrollBars("horizontal")),i.showVerticalScrollbar&&(t===void 0||"vertical"===t)&&(i.$.verticalScrollbar.max=i._getMaxValuesOfScrollBars("vertical"))}_showHorizontalScrollbar(t){const i=this;if(i.showHorizontalScrollbar=t,i._updateWidgetHeight("showHorizontalScrollbar"),!0!==t)i.$horizontalScrollbarContainer.addClass("smart-hidden");else if(i.$horizontalScrollbarContainer.removeClass("smart-hidden"),"none"!==i.type){let t;t="LabVIEW"===i.arrayIndexingMode?i.dimensions-1:0,i._syncScrollbar(0,i._coordinates[t])}}_showVerticalScrollbar(t){const i=this;if(i.showVerticalScrollbar=t,i._updateWidgetWidth(!0),!0!==t)i.$verticalScrollbarContainer.addClass("smart-hidden");else if(i.$verticalScrollbarContainer.removeClass("smart-hidden"),"none"!==i.type){let t;t=i._oneDimensionSpecialCase?0:"LabVIEW"===i.arrayIndexingMode?i.dimensions-2:1,i._syncScrollbar(1,i._coordinates[t])}}_syncScrollbar(t,i){const a=this;let n,o;if(0===t&&!1===a._oneDimensionSpecialCase){if(!a.showHorizontalScrollbar)return;n=a._getMaxValuesOfScrollBars("horizontal"),o=a.$.horizontalScrollbar}else{if(!a.showVerticalScrollbar)return;n=a._getMaxValuesOfScrollBars("vertical"),o=a.$.verticalScrollbar}i>n&&(n=i);const l=o.max;l!==n&&(l>n&&(a._suppressScrollbarEvent=!0),o.max=n),o.value!==i&&(a._suppressScrollbarEvent=!0,o.value=i)}_updateValue(t,i,a){const n=this,o=n._getValueInCell(t,i);if(!n._areDifferent(a,o))return;const l=n._coordinates,r=l.slice(0),s=[];"LabVIEW"===n.arrayIndexingMode?(r[r.length-1]+=i,r[r.length-2]+=t):(r[0]+=i,r[1]+=t);for(let o=0;o<n.dimensions;o++)0==o?!1===n._oneDimensionSpecialCase?s.push(r[0]):s.push(t+l[0]):1==o?s.push(r[1]):s.push(r[o]);let d=n.value;for(let n=0;n<s.length;n++)(void 0===d[s[n]]||d[s[n]]===o)&&(n==s.length-1?d[s[n]]=a:d[s[n]]=[]),d=d[s[n]];n._fillValueArray(s.slice(0)),n.$.fireEvent("change",{value:a,oldValue:o,dimensionIndexes:s})}_updateWidgetHeight(t){const i=this,a=i.showHorizontalScrollbar?20:0;let n,o;if(i.showIndexDisplay){const t=parseInt(window.getComputedStyle(i._indexers[0]).marginBottom,10);o=i.dimensions*(i.indexerHeight+t)-t}else o=0;if("none"!==i.type)n=i.$.mainContainer.offsetHeight+a;else{if("showHorizontalScrollbar"===t){const t=i.$.bigContainer.offsetHeight;n=!0===i.showHorizontalScrollbar?t+20:t-20}else n="showIndexDisplay"===t&&!1===i.showIndexDisplay||"dimensions"===t?i.$.bigContainer.offsetHeight:i.offsetHeight;const o=18+a;n<o&&(n=o),i.$.mainContainer.style.height=n-a+"px"}i.$.verticalScrollbarContainer.style.height=n-a+"px",i.$.bigContainer.style.height=n+"px";const l=window.getComputedStyle(i);i._cachedHeight=Math.max(o,n)+parseInt(l.borderTopWidth,10)+parseInt(l.borderBottomWidth,10),"none"!==i.type&&(i.style.minHeight=i._cachedHeight+"px",i.style.maxHeight=i._cachedHeight+"px"),i.style.height=i._cachedHeight+"px"}_updateWidgetWidth(t){const i=this,a=i.showVerticalScrollbar?20:0,n=i.showIndexDisplay?i.indexerWidth:0,o=parseInt(window.getComputedStyle(i.$.bigContainer).marginLeft,10);let l,r,s;if("none"!==i.type)l=i.$.centralContainer.offsetWidth,r=l+a,s=r+n+o;else{s=i.offsetWidth,!0===t&&(!0===i.showVerticalScrollbar?s+=20:s-=20);const d=n+18+a;s<d&&(s=d),r=s-n-o,l=r-a,i.$.centralContainer.style.width=l+"px"}i.$.bigContainer.style.width=r+"px";const d=window.getComputedStyle(i);s+=parseInt(d.borderLeftWidth,10)+parseInt(d.borderRightWidth,10),i.style.width=s+"px",i._cachedWidth=s}_validateProperties(){const t=this;t._oneDimensionSpecialCase=!1,"none"===t.type?(t.rows=1,t.columns=1):(1>t.rows&&(t.rows=1),1>t.columns&&(t.columns=1)),(1>t.dimensions||32<t.dimensions)&&(t.dimensions=1),1===t.dimensions&&(1<t.columns?(t.rows=1,!0===t.showVerticalScrollbar&&(t.showVerticalScrollbar=!1)):1===t.rows?1===t.columns&&1===t.rows&&!0===t.showVerticalScrollbar&&(t.showVerticalScrollbar=!1):(t._oneDimensionSpecialCase=!0,!0===t.showHorizontalScrollbar&&(t.showHorizontalScrollbar=!1))),t._validateValue(),t.showIndexDisplay&&t.$indexerContainer.removeClass("smart-hidden"),t.$.indexerContainer.style.width=t.indexerWidth+"px",t.showHorizontalScrollbar&&t.$horizontalScrollbarContainer.removeClass("smart-hidden"),t.showVerticalScrollbar&&t.$verticalScrollbarContainer.removeClass("smart-hidden")}_validateValue(){const t=this;"none"===t.type?t.value=null:null===t.value||t.value===void 0?t.value=t._returnEmptyArray():t._validateValueArrayDimensions()}_validateValueArrayDimensions(){const t=this;let i=0,a=t.value,n=!1;for(;a.constructor===Array;)if(i++,a=a[0],void 0===a){n=!0;break}if(t.dimensions>i){if(n)return void(t.value=t._returnEmptyArray());for(;t.dimensions>i;)t._addDimensionToJSArray(i),i++}}}),Smart("smart-calendar",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},dateFormatFunction:{value:null,type:"function"},disableAutoNavigation:{value:!1,type:"boolean"},displayMode:{value:"month",allowedValues:["month","year","decade"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownWidth:{value:"initial",type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},importantDates:{value:[],type:"array",defaultValue:[]},importantDatesTemplate:{value:null,type:"any"},max:{value:new Date(2100,1,1),type:"any",defaultValue:new Date(2100,1,1)},min:{value:new Date(1900,1,1),type:"any",defaultValue:new Date(1900,1,1)},months:{value:1,type:"number",defaultValue:1,validator:"_monthsValidator"},monthNameFormat:{value:"long",allowedValues:["narrow","firstTwoLetters","long","short","2-digit","numeric"],type:"string"},name:{value:"",type:"string"},restrictedDates:{value:[],type:"array",defaultValue:[]},scrollButtonsNavigationMode:{value:"landscape",allowedValues:["portrait","landscape"],type:"string"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedDates:{value:[],type:"array"},selectionMode:{value:"default",allowedValues:["none","default","one","many","zeroOrMany","oneOrMany","zeroOrOne","week"],type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},titleTemplate:{value:null,type:"any"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"},viewSections:{value:["header"],type:"array"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number",defaultValue:6,validator:"_weeksValidator"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"}}}static get listeners(){return{"container.down":"_downHandler","document.up":"_documentUpHandler","container.move":"_moveHandler","container.wheel":"_containerWheelHandler","body.focus":"_bodyFocusStateHandler","body.blur":"_bodyBlurStateHandler","header.click":"_headerClickHandler","header.change":"_headerChangeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listViewContainer.keydown":"_listViewContainerKeyDownHandler","listViewContainer.change":"_listViewContainerChangeEventHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","container.mouseover":"_mouseEventsHandler","container.mouseout":"_mouseEventsHandler","tooltip.open":"_tooltipEventHandler","tooltip.close":"_tooltipEventHandler"}}static get methods(){return{select:"select(date=new Date(): date|string): void",clearSelection:"clearSelection(): void",today:"today(): date",navigate:"navigate(step: int): bool"}}static get styleUrls(){return["smart.button.css","smart.dropdownlist.css","smart.dropdown.css","smart.tooltip.css","smart.calendar.css"]}template(){return`<div id="container">
                    <div id="title" class="smart-calendar-title">
                        <div id="yearContainer" class="smart-calendar-year-container"></div>
                        <div id="dateContainer" class="smart-calendar-date-container smart-calendar-selected"></div>
                    </div>
                    <div id="calendarContainer" class="smart-calendar-container">
                        <div id="header" class="smart-calendar-header">
                            <smart-repeat-button prev-month class="smart-calendar-button" id="previousMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe809</div>
                            </smart-repeat-button>
                            <div id="dateElement" class="smart-calendar-date-element">
                                <div id="defaultHeaderDate"></div>
                                <div id="classicHeaderDate">
                                    <smart-drop-down-list class="smart-calendar-month-element" id="monthElement" drop-down-position="bottom" selection-mode="one" disabled="[[disabled]]" readonly="[[readonly]]" drop-down-width="[[dropDownWidth]]" drop-down-height="[[dropDownHeight]]" theme="[[theme]]">
                                    </smart-drop-down-list>
                                    <input class="smart-calendar-year-element" id="yearElement" disabled="[[disabled]]" readonly="[[readonly]]"/>
                                    <span class="smart-calendar-year-elements">
                                        <smart-repeat-button next-year class="smart-calendar-button" id="nextYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe801</span>
                                        </smart-repeat-button>
                                        <smart-repeat-button prev-year class="smart-calendar-button" id="previousYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe804</span>
                                        </smart-repeat-button>
                                    </span>
                                </div>
                            </div>
                            <smart-repeat-button next-month class="smart-calendar-button" id="nextMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe810</div>
                            </smart-repeat-button>
                        </div>
                        <div id="body" class="smart-content smart-calendar-body">
                           <div id="monthsContainer" class="smart-calendar-months-container">
                              <div id="month" class="smart-calendar-month">
                                   <div id="monthName" class="smart-calendar-month-name"></div>
                                   <div id="weekTitles" class="smart-calendar-week-titles">
                                       <div class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                   </div>
                                   <div id="weeks" class="smart-calendar-weeks">
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                        </div>
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                   </div>
                                </div>
                            </div>
                            <div id="dateViewContainer" class="smart-calendar-date-view-container smart-hidden">
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                            </div>
                            <div id="monthsSeparator" class="smart-calendar-month-separator"></div>
                            <div id="nextMonthsContainer" class="smart-calendar-next-months-container"></div>
                            <smart-list-box item-height="30" unfocusable id="listViewContainer" selection-mode="one" class="smart-calendar-list-view smart-hidden" animation="simple"></smart-list-box>
                            <div id="animationPanel" class="smart-calendar-animation-panel smart-hidden"></div>
                        </div>
                        <div id="footer" class="smart-calendar-footer smart-hidden">
                            <div id="selectedDatesRange"></div>
                        </div>
                        <smart-tooltip id="tooltip" open-mode="manual" arrow
                                   tooltip-template="[[tooltipTemplate]]"
                                   position="[[tooltipPosition]]"
                                   delay="[[tooltipDelay]]"
                                   disabled="[[disabled]]">
                         </smart-tooltip>
                        <input id="hiddenInput" type="hidden" name="[[name]]">
                    </div>
                </div>`}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"animationSettings":n._applyAnimationSettings();break;case"disabled":case"unfocusable":n._setFocusable();break;case"calendarMode":n.displayMode="month",n._refreshCalendarMode(),n._setDisplayModeContent();break;case"dayNameFormat":n._refreshDayOfWeekTitles(n.$.month);break;case"dateFormatFunction":{let t=n.$.monthsContainer.children;for(let i=0;i<t.length;i++)t[i].firstElementChild.innerHTML=a?a(t[i]._date):n._monthsNames[t[i]._date.getMonth()]+" "+t[i]._date.toLocaleDateString(n.locale,{year:n.yearFormat});n._refreshHeaderTitle();break}case"displayMode":n._setDisplayMode(i,a);break;case"displayModeView":n._applyAnimationSettings(!0),"month"!==n.displayMode&&n._setDisplayModeContent();break;case"firstDayOfWeek":n._handleMonths(),n._refreshDayOfWeekTitles();break;case"hideTooltipArrow":n.$.tooltip.arrow=!a;break;case"titleTemplate":case"headerTemplate":case"footerTemplate":n._handleLayoutTemplate(n.$[t.split(/[T]/)[0]],a),"titleTemplate"===t?n._refreshTitle():"headerTemplate"===t?n._refreshHeaderTitle():n._refreshFooter();break;case"importantDates":n.importantDates=n._getValidDates(a),n._refreshImportantDates();break;case"importantDatesTemplate":n._handleImportantDateTemplate(),n._refreshImportantDates();break;case"locale":n._refreshMonthNames(),n._refreshDayOfWeekTitles(),n._refreshHeaderTitle(),n._refreshTitle(),n._refreshFooter(),n.displayMode&&"month"!==n.displayMode&&n._setDisplayModeContent();break;case"max":case"min":n._validateMinMax(t,a,i),n._validateSelectedDates(),n._noFocusingRequired=!1,n._refreshHeaderElements();break;case"months":n._handleMonths();break;case"monthNameFormat":n._refreshCalendarMode(),n._refreshHeaderTitle();break;case"restrictedDates":n._setRestrictedDates(n.restrictedDates=n._getValidDates(a));break;case"rightToLeft":n._refreshDayOfWeekTitles(),n._handleMonths();break;case"scrollButtonsNavigationMode":n._setScrollButtonsNavigationMode();break;case"selectedDates":if(n._clearSelection(!0),n._validateSelectedDates(n._getValidDates(a)),n._applySelectionMode(!0),n._viewDates){let t=n.selectedDates[n.selectedDates.length-1];n._isDateInView(t)?n.selectedDates.map(t=>n._selectDate(t,!0,!0)):n._handleMonths(t)}n._refreshFooter(),n._setWeeksVisibility(n.$.monthsContainer),n.$.hiddenInput.value=n.selectedDates.toString(),n.$.fireEvent("change",{value:n.selectedDates}),n._refreshTitle();break;case"selectionMode":n._applySelectionMode(),n._refreshTitle();break;case"view":n._refreshTitle();break;case"viewSections":-1<a.indexOf("title")?n.$title.removeClass("smart-hidden"):n.$title.addClass("smart-hidden"),n._refreshTitle(),-1<a.indexOf("header")?n.$header.removeClass("smart-hidden"):n.$header.addClass("smart-hidden"),n._refreshHeaderTitle(),-1<a.indexOf("footer")?n.$footer.removeClass("smart-hidden"):n.$footer.addClass("smart-hidden"),n._refreshFooter();break;case"weeks":n._setWeeksVisibility(n.$.monthsContainer);break;case"yearFormat":if(n._refreshCalendarMode(),n._refreshFooter(),1<n.months&&"month"===n.displayMode){let t=n._animationStarted?n.$.nextMonthsContainer.children:n.$.monthsContainer.children;for(let o=0;o<t.length;o++)t[o].firstElementChild.innerHTML=n.dateFormatFunction?n.dateFormatFunction(t[o]._date):n._monthsNames[t[o]._date.getMonth()]+" "+t[o]._date.toLocaleDateString(n.locale,{year:a})}n._refreshTitle(),n._refreshHeaderTitle();}}ready(){super.ready();const t=this;t._keysPressed={},t._applyAnimationSettings(),t.importantDates=t._getValidDates(t.importantDates),t.restrictedDates=t._getValidDates(t.restrictedDates),t._refreshMonthNames(),t._validateMinMax(),t._validateSelectedDates(t._getValidDates(t.selectedDates)),t._handleLayoutTemplate(t.$.title,t.titleTemplate),t._handleLayoutTemplate(t.$.header,t.headerTemplate),t._handleLayoutTemplate(t.$.footer,t.footerTemplate),t._handleImportantDateTemplate(),t._setFocusable(),t._refreshDayOfWeekTitles(),t._applySelectionMode(!0),t._handleMonths(0===t.selectedDates.length?new Date(new Date().setHours(0,0,0,0)):t.selectedDates[t.selectedDates.length-1]),t._updateViewSectionsVisibility(),t._setScrollButtonsNavigationMode(),t._refreshCalendarMode(),t._setDisplayMode(),t._refreshTitle(),t._refreshFooter(),t._refreshImportantDates(),t.$.monthElement&&t.$.monthElement._setDropDownSize(),t._changeEventFired=0}_updateViewSectionsVisibility(){const t=this;-1<t.viewSections.indexOf("title")?t.$title.removeClass("smart-hidden"):t.$title.addClass("smart-hidden"),-1<t.viewSections.indexOf("header")?t.$header.removeClass("smart-hidden"):t.$header.addClass("smart-hidden"),-1<t.viewSections.indexOf("footer")?t.$footer.removeClass("smart-hidden"):t.$footer.addClass("smart-hidden")}clearSelection(){this._clearSelection()}_setFocusable(){function t(t,i){return i?t&&t instanceof i?("function"==typeof t._setFocusable&&t.isCompleted?t.unfocusable=-1>=a:t.setAttribute("tabindex",a),t):void 0:void 0}const i=this;let a=0<i.tabIndex?i.tabIndex:0;(i.disabled||i.unfocusable)&&(a=-1),i.$.previousMonthButton=t(i.$.previousMonthButton,Smart.Button),i.$.nextMonthButton=t(i.$.nextMonthButton,Smart.Button),i.$.nextYearButton=t(i.$.nextYearButton,Smart.Button),i.$.previousYearButton=t(i.$.previousYearButton,Smart.Button),i.$.monthElement=t(i.$.monthElement,Smart.DropDownList),i.$.yearElement=t(i.$.yearElement,HTMLInputElement),-1<i.viewSections.indexOf("title")&&(i.$.dateContainer.setAttribute("tabindex",a),i.$.yearContainer.setAttribute("tabindex",a)),i.$.body.setAttribute("tabindex",a),"default"===i.calendarMode?i.$.dateElement.setAttribute("tabindex",a):i.$.dateElement.removeAttribute("tabindex"),i.tabIndex=i.readonly&&!i.disabled?0<i.tabIndex?i.tabIndex:0:a}static get requires(){return{"Smart.Tooltip":"smart.tooltip.js"}}navigate(t){const i=this;if(t=parseInt(t),isNaN(t)||0===t)return!1;const a=i._getNextDate(t);return!!a&&("month"===i.displayMode?(i.hasAnimation?(i._animateNavigation(a,t),i.$nextMonthsContainer.hasClass("smart-date-view-container")&&i.$nextMonthsContainer.removeClass("smart-date-view-container")):(i._handleMonths(a),i._refreshHeaderElements(),i._refreshHeaderTitle()),!0):(i.hasAnimation?(i.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),"list"===i.displayModeView?i._setDisplayModeContent(a):(!i._navigationDate||i._navigationDate.getTime()!==a.getTime())&&i._animateNavigation(a,t)):i._setDisplayModeContent(a),!0))}select(t){const i=this;"undefined"!=typeof i._viewDates[0]&&"none"!==i.selectionMode&&t&&(t=i._getValidDate(t),!(t instanceof Date)||"one"===i.selectionMode&&-1<i.selectedDates.map(Number).indexOf(t.getTime())||t.getTime()<i.min.getTime()||t.getTime()>i.max.getTime()||(("one"===i.selectionMode||"default"===i.selectionMode||"zeroOrOne"===i.selectionMode)&&i._clearSelection(!0),i._selectDate(t),1===i.selectedDates.length&&!i._isDateInView(i.selectedDates[0])&&i._handleMonths(i.selectedDates[0])))}today(){const t=this;let i=new Date;return i.setHours(0,0,0,0),i.getTime()<t.min.getTime()||i.getTime()>t.max.getTime()?i=new Date(t.max):t.selectedDates=[i],t._handleMonths(i),i}_animateNavigation(t,i,a){function n(){let t=0<i?r.$.body[r._animationSettings.scrollSize]>=d:0===r.$.body[r._animationSettings.scrollSize],a=r._scrollStep/2;return t?void r._animateNavigationCompleted():void(0<i&&r.$.body[r._animationSettings.scrollSize]>d*r._animationSettings.easeThreshold?(a=l(r.$.body[r._animationSettings.scrollSize]/r._animationSettings.stepEaseSize,o(a-(d-r.$.body[r._animationSettings.scrollSize])*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+a):0>i&&r.$.body[r._animationSettings.scrollSize]<d*r._animationSettings.easeThreshold&&(a=l(r.$.body[r._animationSettings.scrollMax]/r._animationSettings.stepEaseSize,o(a-r.$.body[r._animationSettings.scrollSize]*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+a),r.$.body[r._animationSettings.scrollSize]+=0<i?r._scrollStep:-r._scrollStep,r._animationId=requestAnimationFrame(n))}var o=Math.abs,l=Math.max;const r=this;r._navigationDate=t,r._animationSettings||r._applyAnimationSettings(),r.$animationPanel.addClass("smart-hidden"),r.$.dateViewContainer.style.transform="",r.$.dateViewContainer.style.opacity="",r.$.monthsContainer.style.transform="",r.$.monthsContainer.style.opacity="";const s="month"===r.displayMode?r.$.monthsContainer:r.$.dateViewContainer,d=r.$.body[r._animationSettings.scrollMax]-r.$.body[r._animationSettings.size];r._scrollStep=r.$.body[r._animationSettings.size]*r._animationSettings.startSpeed,r._animationStarted=!0,"month"===r.displayMode?r._handleMonths(t,r.$.nextMonthsContainer):(r._setCellState(r._focusedCell,"focus",!1),r._setDisplayModeContent(t,r.$.nextMonthsContainer)),a||(0<i?(s.style.order=1,r.$.nextMonthsContainer.style.order=3,(!r._animationStarted||r._animationStarted&&r.$.body[r._animationSettings.scrollSize]>2*(r.$.body[r._animationSettings.scrollMax]*r._animationSettings.resetThreshold))&&(r.$.body[r._animationSettings.scrollSize]=0)):(s.style.order=3,r.$.nextMonthsContainer.style.order=1,(!r._animationStarted||r._animationStarted&&r.$.body[r._animationSettings.scrollSize]<r.$.body[r._animationSettings.scrollMax]*r._animationSettings.resetThreshold)&&(r.$.body[r._animationSettings.scrollSize]=r.$.body[r._animationSettings.scrollMax]))),cancelAnimationFrame(r._animationId),r._animationId=requestAnimationFrame(n)}_animateNavigationCompleted(){const t=this;let i="month"===t.displayMode?t.$.monthsContainer:t.$.dateViewContainer,a,n,o;if(cancelAnimationFrame(t._animationId),"month"!==t.displayMode){let l=[].slice.call(i.children).indexOf(t._focusedCell);i.innerHTML=t.$.nextMonthsContainer.innerHTML;let r=i.children[l],s;n=i.children,o=t.$.nextMonthsContainer.children;for(let a=0;a<n.length;a++)n[a].value=o[a].value,n[a].restricted=o[a].restricted,n[a].important=o[a].important,n[a].otherMonth=o[a].otherMonth,n[a].value.getTime()<=t.max.getTime()&&(s=n[a]);a=r&&r.value.getTime()>=t.max.getTime()?s.value:t._focusedCell?t._focusedCell.value:void 0}else{let a=i.children,l=t.$.nextMonthsContainer.children;for(let r=0;r<a.length;r++){a[r]._date=l[r]._date,a[r].innerHTML=l[r].innerHTML,n=t._getMonthCells(a[r]),o=t._getMonthCells(l[r]);for(let t=0;t<n.length;t++)n[t].value=o[t].value,n[t].restricted=o[t].restricted,n[t].important=o[t].important,n[t].otherMonth=o[t].otherMonth}0<t._selectedCells.length&&(t._selectedCells=t._selectedCells.map(i=>i=t._getCellByDate(i.value)).filter(t=>"undefined"!=typeof t))}t._focusCell(t._getCellByDate(a)),i.style.order=1,t.$.nextMonthsContainer.style.order=3,t.$.body[t._animationSettings.scrollSize]=0,t._animationStarted=!1,delete t._navigationDate}_applyAnimationSettings(t){const i=this;if(!i.hasAnimation)return void delete i._animationSettings;i._animationSettings=i.animationSettings?i.animationSettings:i._animationSettings?i._animationSettings:{},"portrait"===i.scrollButtonsNavigationMode?(i._animationSettings.scrollMax="scrollHeight",i._animationSettings.size="offsetHeight",i._animationSettings.scrollSize="scrollTop"):(i._animationSettings.scrollMax="scrollWidth",i._animationSettings.size="offsetWidth",i._animationSettings.scrollSize="scrollLeft");t||(i._animationSettings.startSpeed=i._animationSettings.startSpeed?i._animationSettings.startSpeed:.2,i._animationSettings.easeThreshold=i._animationSettings.easeThreshold?i._animationSettings.easeThreshold:.5,i._animationSettings.step=i._animationSettings.step?i._animationSettings.step:.25,i._animationSettings.stepEaseSize=i._animationSettings.stepEaseSize?i._animationSettings.stepEaseSize:200,i._animationSettings.resetThreshold=i._animationSettings.resetThreshold?i._animationSettings.resetThreshold:.2)}_applySelectionMode(t){var i=Math.min,a=Math.max;const n=this;let o=[],l=!!t;switch(n.selectionMode){case"none":return void n._clearSelection(l);case"many":case"default":case"oneOrMany":if(0===n.selectedDates.length){o.push(new Date(i(a(n.min.getTime(),new Date().setHours(0,0,0,0)),n.max.getTime())));break}return;case"one":if(1===n.selectedDates.length)return;1<n.selectedDates.length?(o.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(l)):o.push(new Date(i(a(n.min.getTime(),new Date().setHours(0,0,0,0)),n.max.getTime())));break;case"zeroOrOne":if(1<n.selectedDates.length){o.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(l);break}return;case"zeroOrMany":return;case"week":if(1<=n.selectedDates.length){let t=n.selectedDates[n.selectedDates.length-1];for(let a=0;8>a;a++)o.push(new Date(t)),t.setDate(t.getDate()+1);n._clearSelection(l)}}if(n.selectedDates=[],t)return void(n.selectedDates=o);const r=o.length;for(let i=0;i<r;i++)n._selectDate(o[i],i<r-1)}_clearSelection(t){const i=this;if(i._selectedCells&&i._selectedCells.map(t=>{i._setCellState(t,"selected",!1)}),i.selectedDates=[],i._selectedCells=[],"many"===i.selectionMode){const t=i.$.monthsContainer.children;for(let a=0;a<t.length;a++)i._getMonthCells(t[a]).map(t=>{i._setCellState(t,"hover",!1)})}i._refreshFooter(),i.$.hiddenInput.value=i.selectedDates.toString(),t||i.$.fireEvent("change",{value:[]}),i._refreshTitle()}_bodyBlurStateHandler(t){const i=this;i._bodyStateHandler(t)}_bodyFocusStateHandler(t){const i=this;i._bodyStateHandler(t)}_bodyStateHandler(t){const i=this;if(i._focusedCell){if("blur"===t.type||"focus"===t.type&&i._noFocusingRequired)return i._noFocusingRequired=!1,void i._setCellState(i._focusedCell,"focus",!1);if("month"!==i.displayMode)return void("focus"!==t.type||i.$.dateViewContainer.querySelector("smart-calendar-cell[focus]")||i._setCellState(i._focusedCell||i.$.dateViewContainer.querySelector(".smart-calendar-cell"),"focus",!0))}"focus"===t.type&&i._focusCell()}_containerWheelHandler(t){const i=this;if(i.disabled||i.readonly)return;let a,n,o;o=n=document.activeElement,i.enableShadowDOM&&(o=i.shadowRoot.activeElement,o?n=o?i.shadowRoot.getRootNode().host:void 0:(o=function(){for(let t=i.shadowRoot;t&&t.host;){if(t.activeElement)return t.activeElement;t=t.host.getRootNode()}}(),n=o?o.closest("smart-calendar"):void 0)),i.$.yearElement===o&&(a=12),n&&n.closest("smart-calendar")===i&&(a=t.target===i.$.yearElement?12:1);a&&(t.preventDefault(),a=12==a?a:a*i.months,0<t.deltaY?i.navigate(-a):i.navigate(a))}_downHandler(t){const i=this;let a=t.originalEvent.target;if(i._dragStartDetails=void 0,!(i.disabled||i.readonly)){if(i.hasRippleAnimation&&(a.value instanceof Date||a.parentElement&&a.parentElement.classList.contains("smart-calendar-title")||a.parentElement===i.$.dateElement)&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),a=t.originalEvent.target.closest(".smart-calendar-header"),t.originalEvent.target.closest(".smart-calendar-year-container")&&"decade"!==i.displayMode)return"classic"===i.calendarMode?void 0:void i._showDateView("year");if(t.originalEvent.target.closest(".smart-calendar-date-container")&&"month"!==i.displayMode)return"classic"===i.calendarMode?void 0:void i._displayModeHandler("list"===i.displayModeView?i.$.listViewContainer.getItem(i.$.listViewContainer.selectedValues[0]):i._focusedCell,"month");if(i._animationStarted&&i._animateNavigationCompleted(),Smart.Utilities.Core.isMobile&&!(a&&a===i.$.header))return void(i._dragStartDetails={x:t.pageX,y:t.pageY,startTime:Date.now(),target:t.originalEvent.target});if(a=t.originalEvent.target,a.closest(".smart-calendar-week")||a.parentElement===i.$.dateViewContainer){for(;a&&!(a.value instanceof Date);)a=a.parentElement;return void(a&&("month"===i.displayMode?i._weeksDownHandler(t,a):i._displayModeHandler(a)))}if(!a.closest(".smart-calendar-month-element")){if(t.originalEvent.stopPropagation(),"list"===i.displayModeView&&"month"!==i.displayMode)return a=(i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target).closest("smart-list-item"),void(a&&i._displayModeHandler(a));const n=document.scrollingElement||document.documentElement,o=n.scrollLeft,l=n.scrollTop;i.focus(),window.scrollTo(o,l)}}}_displayModeHandler(t,i){const a=this;if(a._animationStarted&&a._animateNavigationCompleted(),t instanceof HTMLElement&&t.parentElement.classList.contains("smart-calendar-week")&&t.otherMonth){if("decade"===a.displayMode&&(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()>a.max.getFullYear()))return;if("year"===a.displayMode&&(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()===a.min.getFullYear()&&t.value.getMonth()<a.min.getMonth()||t.value.getFullYear()>a.max.getFullYear()||t.value.getFullYear()===a.max.getFullYear()&&t.value.getMonth()>a.max.getMonth()))return}if(i=i?i:a.displayMode,"year"===i?i="month":"decade"===i?i="year":void 0,a.displayMode!==i){const n=a.$.fireEvent("displayModeChanging",{oldDisplayMode:a.displayMode,newDisplayMode:i}).defaultPrevented;n||(a.displayMode=i,a.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),t.parentElement===a.$.dateViewContainer&&!t.disabled&&!t.restricted&&a._focusCell(t),a.hasAnimation?(t instanceof Smart.ListItem||t.ownerListBox===a.$.listViewContainer?t.offsetHeight?a.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px":a.$.animationPanel.style.transformOrigin=a.$.listViewContainer.offsetLeft+a.$.listViewContainer.offsetWidth/2+"px "+(a.$.listViewContainer.offsetTop+a.$.listViewContainer.offsetHeight/2)+"px":(t=a._focusedCell,a.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),a._animateView(1,t)):a._setDisplayModeContent(t.value instanceof Date?t.value:new Date(t.value)))}}_animateView(t,i){function a(){return(0<t&&3.5<=s||0>t&&0>=s)&&(r=!0),r?(cancelAnimationFrame(o._animationId),o.$animationPanel.addClass("smart-hidden"),o.$.animationPanel.style.transform="",o.$.animationPanel.style.opacity="",c.style.transform="",c.style.opacity="",void("month"===o.displayMode?o.$.body.focus():"list"===o.displayModeView&&o.focus())):void(o.$.animationPanel.style.opacity=d,c.style.opacity=1-d,d-=.05,0<t?(o.$.animationPanel.style.transform="scale("+s+")",c.style.transform="scale("+Math.min((s-1)/2,1)+")",s+=.125):(o.$.animationPanel.style.transform="scale("+n(s,0)+")",c.style.transform="scale("+n(1+s,1)+")",s-=.06),o._animationId=requestAnimationFrame(a))}var n=Math.max;const o=this;let l=i instanceof Date?i:new Date(i.value),r=!1,s=1,d=1,m,c;if("list"===o.displayModeView?(m=i instanceof Smart.ListItem||i.ownerListBox===o.$.listViewContainer?o.$.listViewContainer:"month"===o.displayMode?o.$.listViewContainer:o.$.monthsContainer,c="month"===o.displayMode?o.$.monthsContainer:o.$.listViewContainer):!(i.value instanceof Date)&&(i=o._focusedCell?o._focusedCell:0<o._selectedCells.length?o._selectedCells[o._selectedCells.length-1]:o._getCellByDate(new Date)),m||(m=i.parentElement===o.$.dateViewContainer?o.$.dateViewContainer:o.$.monthsContainer),c||(c="month"===o.displayMode?o.$.monthsContainer:o.$.dateViewContainer),c.style.transformOrigin=o.$.animationPanel.style.transformOrigin,m instanceof Smart.ListBox)for(o.$.animationPanel.innerHTML="",o.$.animationPanel.appendChild(m.cloneNode(!1));m.$.itemsInnerContainer.firstElementChild;)o.$.animationPanel.children[0].appendChild(m.$.itemsInnerContainer.firstElementChild);else o.$.animationPanel.innerHTML=m.innerHTML;if(o._setDisplayModeContent(l),o.$.animationPanel.style.width=o.$.body.offsetWidth+"px",o.$.animationPanel.style.height=o.$.body.offsetHeight+"px",o.$.animationPanel.style.transform="scale(1)",o.$.animationPanel.style.opacity=1,o.$animationPanel.removeClass("smart-hidden"),c.style.opacity="0",c.style.transform="scale(3.5)",m.$.hasClass("smart-calendar-date-view-container")?o.$animationPanel.addClass("smart-calendar-date-view-container"):o.$animationPanel.removeClass("smart-calendar-date-view-container"),m instanceof Smart.ListBox){const t=o.$.animationPanel.children[0];t.whenReady(function(){t._refreshLayout(),t.ensureVisible(t.selectedValues[0])})}cancelAnimationFrame(o._animationId),o._animationId=requestAnimationFrame(a)}_documentUpHandler(t){var i=Math.abs;const a=this;if(!Smart.Utilities.Core.isMobile||!a._dragStartDetails)return;const n=Date.now();let o=t.originalEvent.target,l={};if("portrait"===a.scrollButtonsNavigationMode?(l.coordinate="y",l.direction="pageY"):(l.coordinate="x",l.direction="pageX"),10>=i(a._dragStartDetails[l.coordinate]-t[l.direction])){if(o="list"===a.displayModeView&&"month"!==a.displayMode?o.closest("smart-list-item"):o,!o)return void(a._dragStartDetails=void 0);if("month"!==a.displayMode)return a._displayModeHandler(o),"portrait"===a.scrollButtonsNavigationMode?a.$.body.scrollTop=0:a.$.body.scrollLeft=0,void(a._dragStartDetails=void 0);if(a._weeksDownHandler(t,o),!a.disableAutoNavigation&&o.otherMonth)return}else{const o=i((t[l.direction]-a._dragStartDetails[l.coordinate])/(n-a._dragStartDetails.startTime));if(1<o){const t=parseInt(o);for(let n=0;n<t;n++)a.navigate(a._dragStartDetails.step);return void(a._dragStartDetails=void 0)}}if(!a.hasAnimation)return void(a._dragStartDetails=void 0);let r=("month"===a.displayMode?a.$.monthsContainer[a._animationSettings.scrollMax]:a.$.dateViewContainer[a._animationSettings.scrollMax])+a.$.monthsSeparator[a._animationSettings.size];return 0<a._dragStartDetails.step&&a.$.body[a._animationSettings.scrollSize]>r*a._animationSettings.easeThreshold||0>a._dragStartDetails.step&&a.$.body[a._animationSettings.scrollSize]<r*a._animationSettings.easeThreshold?(a._animateNavigation(a._dragStartDetails.navigationDate,a._dragStartDetails.step,!0),void(a._dragStartDetails=void 0)):void(a._animateMonthRepositioning(void 0,a._dragStartDetails.step),a._dragStartDetails=void 0)}_animateMonthRepositioning(t,i){function a(){let t=0>i?l.$.body[l._animationSettings.scrollSize]>=s:0===l.$.body[l._animationSettings.scrollSize],d=l._scrollStep/2;return t?(cancelAnimationFrame(l._animationId),r.style.order=1,l.$.nextMonthsContainer.style.order=3,l.$.body[l._animationSettings.scrollSize]=0,void(l._animationStarted=!1)):void(0<i?(d=o(l.$.body[l._animationSettings.scrollMax]/l._animationSettings.stepEaseSize,n(d-l.$.body[l._animationSettings.scrollSize]*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+d):(d=o(l.$.body[l._animationSettings.scrollMax]/l._animationSettings.stepEaseSize,n(d-(s-l.$.body[l._animationSettings.scrollSize])*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+d),l.$.body[l._animationSettings.scrollSize]+=0>i?l._scrollStep:-l._scrollStep,l._animationId=requestAnimationFrame(a))}var n=Math.abs,o=Math.max;const l=this,r="month"===l.displayMode?l.$.monthsContainer:l.$.dateViewContainer;l._animationSettings||l._applyAnimationSettings();const s=r[l._animationSettings.scrollMax]+l.$.monthsSeparator[l._animationSettings.size];l._scrollStep=l.$.body[l._animationSettings.size]*l._animationSettings.startSpeed,cancelAnimationFrame(l._animationId),l._animationId=requestAnimationFrame(a),l._animationStarted=!0}_focusCell(t){const i=this;if(i._focusedCell&&i._setCellState(i._focusedCell,"focus",!1),!(i.disabled||i.readonly)){if(t)return"month"===i.displayMode?t.disabled||t.restricted?void 0:(i._setCellState(t,"focus",!0),i._focusedCell=t,void i._updateWeeksVisibility()):(i._setCellState(t,"focus",!0),void(i._focusedCell=t));if("month"===i.displayMode||0!==i.$.monthsContainer.offsetHeight){if(0<i._selectedCells.length){const t=i._selectedCells[i._selectedCells.length-1];i._setCellState(t,"focus",!0),i._focusedCell=t}else{const t=i.$.monthsContainer.children;if(i.min.getTime<t[0]._date.getTime())return;const a=i._getMonthCells(t[0],i.rightToLeft);for(let t=0;t<a.length;t++){const n=a[t];if(!n.otherMonth){if(n.disabled||n.restricted)continue;i._focusedCell=n;break}}}i._focusedCell&&(i._setCellState(i._focusedCell,"focus",!0),i._updateWeeksVisibility())}}}_getDays(t,i){const a=i.length;let n=[];if(0<a)for(let o=0;o<a;o++)i[o].getFullYear()===t.getFullYear()&&i[o].getMonth()===t.getMonth()&&n.push(i[o].getDate());return n}_getCellByDate(t,i){const a=this;if(!(t instanceof Date))return;if(i||(i=a.$.monthsContainer),"month"!==a.displayMode){if("list"===a.displayModeView)return;let n=arguments[1]?a.$.nextMonthsContainer.children:a.$.dateViewContainer.children;for(let o=0;o<n.length;o++)if("year"===a.displayMode){if(n[o].value.getMonth()===t.getMonth())return n[o];continue}else if(n[o].value.getFullYear()===t.getFullYear())return n[o];return}let n=i.children,o,l;for(let a=0;a<n.length;a++)if(t.getFullYear()===n[a]._date.getFullYear()&&t.getMonth()===n[a]._date.getMonth()){o=n[a];break}if(o){l=a._getMonthCells(o);for(let a=0;a<l.length;a++)if((!l[a].otherMonth||l[a].hover)&&l[a].value.getMonth()===t.getMonth()&&l[a].value.getDate()===t.getDate())return l[a]}}_getMonthCells(t,i){const a=t.getElementsByClassName("smart-calendar-week");let n=[];if(i)for(let t=0,i;t<a.length;t++){i=a[t].children;for(let t=i.length-1;0<t;t--)n.push(i[t])}else for(let t=0,i;t<a.length;t++){i=a[t].children;for(let t=1;t<i.length;t++)n.push(i[t])}return n}_getWeekNumber(t){var i=Math.round;const a=this;let n=new Date(t.getFullYear(),0,1),o=i((t.getTime()-n.getTime()-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1,l=n.getDay()-a.firstDayOfWeek,r;return l=0<=l?l:l+7,4>l?(r=Math.floor((o+l-1)/7)+1,52<r&&(n=new Date(t.getFullYear()+1,0,1),l=n.getDay()-a.firstDayOfWeek,l=0<=l?l:l+7,r=4>l?1:53)):r=i((o+l-1)/7),r}_handleDateSelection(t){function i(t,i){if(a._clearSelection(!0),t.getTime()<i.value.getTime())for(;t.getTime()<=i.value.getTime();)a._selectDate(t,!0),t.setDate(t.getDate()+1);else if(t.getTime()>i.value.getTime())for(;t.getTime()>=i.value.getTime();)a._selectDate(t,!0),t.setDate(t.getDate()-1);else a._selectDate(i,!0);a.$.hiddenInput.value=a.selectedDates.toString(),a._refreshFooter(),a.$.fireEvent("change",{value:a.selectedDates}),a._refreshTitle()}const a=this;if(!("undefined"==typeof t||t.disabled||t.restricted))switch(a.selectionMode){case"none":a._focusCell(t);break;case"one":case"default":if(a._keysPressed.Control)return 1<a.selectedDates.length||1===a.selectedDates.length&&!t.selected?void a._selectDate(t.value):void a._focusCell(t);if(a._keysPressed.Shift)return void i(new Date(a.selectedDates[0]),t);a._clearSelection(!0),a._selectDate(t.value,!!(-1<a._selectedCells.indexOf(t.value)));break;case"many":{if(0===a.selectedDates.length)return void a._selectDate(t.value);const n=a.selectedDates[a.selectedDates.length-1];let o=new Date(a.selectedDates[0]);if(t.value.getTime()===o.getTime()||t.value.getTime()===n.getTime())return a._clearSelection(),void a._focusCell(t);0<a.selectedDates.length&&i(o,t);break}case"zeroOrMany":a._selectDate(t.value);break;case"oneOrMany":if(1===a.selectedDates.length&&t.selected)return void a._focusCell(t);a._selectDate(t.value);break;case"zeroOrOne":if(1===a.selectedDates.length&&t.selected)return void a._selectDate(t.value);a._clearSelection(!0),a._selectDate(t.value);break;case"week":{if(t.selected&&(t.value.getTime()===a.selectedDates[0].getTime()||t.value.getTime()===a.selectedDates[a.selectedDates.length-1].getTime()))return a._clearSelection(),void a._focusCell(t);a._clearSelection(!0);let n=new Date(t.value);a._selectDate(n);for(let t=1;8>t;t++)n.setDate(n.getDate()+1,7>t),a._selectDate(n);a._isDateInView(n)||a.navigate(1);break}}}_handleImportantDateTemplate(){const t=this;if(t._importantDatesTemplate=t._validateTemplate("importantDatesTemplate",t.importantDatesTemplate),!t._importantDatesTemplate||!t._importantDatesTemplate.content)return;let a=t._importantDatesTemplate.content;const n=a.childNodes.length,o=/{{\w+}}/g;let l;t._bindingDetails=[];for(let r=0;r<n;r++)if(l=o.exec(a.childNodes[r].innerHTML),l)return void t._bindingDetails.push({childNodeIndex:r,bindingString:l[0]})}_handleLayoutTemplate(t,i){const a=this,n=a._validateTemplate(t.$.hasClass("smart-header")?"headerTemplate":t.$.hasClass("smart-calendar-footer")?"footerTemplate":"titleTemplate",i);if(!n||!n.content)return void("function"==typeof i&&i(t,{}));a._layoutTemplates||(a._layoutTemplates=[]);let o=document.importNode(n.content,!0);t.innerHTML="";const l=o.childNodes.length,r=/{{\w+}}/g;let s=[],d;for(let a=0;a<l;a++)d=r.exec(o.childNodes[a].innerHTML),d&&s.push({childNodeIndex:a,bindingString:d[0]});return a._layoutTemplates=a._layoutTemplates.filter(i=>i.selector!==t),a._layoutTemplates.push({selector:t,template:n,bindings:s}),a.enableShadowDOM?(t.innerHTML="<slot></slot>",void a.appendChild(o)):void t.appendChild(o)}_handleCalendarCellHover(t,i){const a=this;if(!a._animationStarted){if("month"===a.displayMode)if("mouseover"===t.type&&"many"===a.selectionMode&&0<a.selectedDates.length){const t=a.$.monthsContainer.children;for(let i=0;i<t.length;i++)a._getMonthCells(t[i]).map(t=>{a._setCellState(t,"hover",!1)});let n=new Date(a.selectedDates[0]),o=new Date(i.value),l=i;const r=n.getTime()>o.getTime()?-1:1,s=function(){l=a._getCellByDate(n,a.$.monthsContainer),!l||l.selected||l.restricted||a._setCellState(l,"hover",!0)};if(n.getTime()!==o.getTime()){for(n.setDate(n.getDate()+r);n.getTime()!==o.getTime();)s(),n.setDate(n.getDate()+r);s()}}else a._setCellState(i,"hover",!1);"mouseover"!==t.type||i.otherMonth?a._setCellState(i,"hover",!1):a._setCellState(i,"hover",!0)}}_handleMonths(t,i){function a(t){let i=t.children.length,a=document.createDocumentFragment(),n;for(i;i<o.months;i++)n=o.$.month.cloneNode(!1),n.innerHTML=o.$.month.innerHTML,a.appendChild(n);return a}function n(i){let a=i.children;for(let n=0;n<a.length;n++)o._setMonth(t,a[n]),t.setMonth(t.getMonth()+1);o._setWeeksVisibility(i),o._refreshHeaderElements(),o._refreshHeaderTitle(),o.tooltip&&o.$.tooltip.close(),o.$.body===document.activeElement&&o._focusCell()}const o=this;let l;if(t||(t=o._viewDates&&0<o._viewDates.length?o._viewDates[0]:new Date),t=new Date(Math.min(Math.max(o.min.getTime(),t.getTime()),o.max.getTime())),i||(i=o.$.monthsContainer),o._selectedCells=[],o.hasAnimation){for(l=o.$.nextMonthsContainer.children,0<l.length&&l[0].value instanceof Date&&(o.$.nextMonthsContainer.innerHTML="");o.$.nextMonthsContainer.childElementCount<o.months;)o.$.nextMonthsContainer.appendChild(a(o.$.nextMonthsContainer));for(;o.$.nextMonthsContainer.childElementCount>o.months;)o.$.nextMonthsContainer.removeChild(l[o.$.nextMonthsContainer.childElementCount-1]);if(arguments[1]===o.$.nextMonthsContainer)return void n(o.$.nextMonthsContainer)}if(l=o.$.monthsContainer.children,l.length>o.months){for(;o.$.monthsContainer.childElementCount>o.months;)o.$.monthsContainer.removeChild(l[o.$.monthsContainer.childElementCount-1]),o._viewDates.pop();return void n(o.$.monthsContainer)}return o.$.monthsContainer.children.length===o.months?void n(o.$.monthsContainer):void(o._viewDates=[],o.$.monthsContainer.appendChild(a(o.$.monthsContainer)),n(o.$.monthsContainer))}_headerChangeHandler(t){const i=this;return t.stopPropagation(),i.disabled||i.readonly?void 0:t.target.ownerElement===i.$.monthElement&&0!==i._changeEventFired?void i._changeEventFired--:void(t.target===i.$.yearElement&&(i._viewDates[0].setFullYear(Math.min(Math.max(i.min.getFullYear(),isNaN(parseInt(i.$.yearElement.value))?0:parseInt(i.$.yearElement.value)),i.max.getFullYear())),i._handleMonths(i._viewDates[0])),i.$.monthElement&&t.target.ownerElement===i.$.monthElement&&i._handleMonths(new Date(i.$.monthsContainer.children[0]._date.getFullYear(),i.$.monthElement.selectedIndexes[0],1)))}_headerClickHandler(t){const i=this;if(!(i.disabled||i.readonly)){let a=t.target.closest("smart-repeat-button");if(!(a&&a.disabled))return a===i.$.previousMonthButton?(i._isInteractiveNavigation=!0,void i.navigate(-1*i.months)):a===i.$.nextMonthButton?(i._isInteractiveNavigation=!0,void i.navigate(1*i.months)):a===i.$.previousYearButton?void i.navigate(-12):a===i.$.nextYearButton?void i.navigate(12):"classic"===i.calendarMode?void(i.displayMode="month"):void(t.target.closest(".smart-calendar-date-element")&&(i._animationStarted&&i._animateNavigationCompleted(),i._isInteractiveNavigation=!0,i._showDateView()))}}_setDisplayMode(t,i,a){const n=this;if(n.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),0===arguments.length||!n.hasAnimation)return"classic"===n.calendarMode?void(n.displayMode="month"):("month"!==n.displayMode&&(n.$monthsContainer.addClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-hidden")&&n.$dateViewContainer.removeClass("smart-hidden")),!n.isCompleted&&"month"===n.displayMode)?void 0:void n._setDisplayModeContent();if(n._animationStarted&&(n.displayMode=t,n._animateNavigationCompleted(),n.displayMode=i),"month"===t&&"year"===i||"year"===t&&"decade"===i)n.displayMode=t,n._showDateView(a?void 0:n.displayMode);else if("month"===t&&"decade"===i)n._showDateView(n.displayMode="year");else{let t;"list"===n.displayModeView?(t=(n.$.listViewContainer.enableShadowDOM?n.$.listViewContainer.shadowRoot:n.$.listViewContainer).querySelector("smart-list-item[selected]"),n.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px"):(t=n._focusedCell,n.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),n._animateView(1,t)}}_setDisplayModeContent(t,i){const a=this;let n=t&&"Invalid Date"!==t.toString()?t:0<a.selectedDates.length?a.selectedDates[a.selectedDates.length-1]:new Date;n.setTime(Math.min(Math.max(n.getTime(),a.min.getTime()),a.max.getTime())),n.setHours(0,0,0,0);const o=a._prepareView(n);if(!o)return;let l;i?(a.$.nextMonthsContainer.innerHTML=a.$.dateViewContainer.innerHTML,l=a.$.nextMonthsContainer):l=a.$.dateViewContainer;const r=l.children;let s;for(let l=0;l<r.length;l++){const t=r[l];t.innerHTML=o.viewContent[l],t.value=o.dates[l],"year"===a.displayMode?(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()===a.min.getFullYear()&&t.value.getMonth()<a.min.getMonth()||t.value.getFullYear()>a.max.getFullYear()||t.value.getFullYear()===a.max.getFullYear()&&t.value.getMonth()>a.max.getMonth()?a._setCellState(t,"otherMonth",!0):a._setCellState(t,"otherMonth",!1),n.getFullYear()===t.value.getFullYear()&&n.getMonth()===t.value.getMonth()&&(s=t)):"decade"===a.displayMode&&(0==l||l==r.length-1||t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()>a.max.getFullYear()?a._setCellState(t,"otherMonth",!0):a._setCellState(t,"otherMonth",!1),n.getFullYear()===t.value.getFullYear()&&(s=t)),a._setCellState(t,"hover",!1)}if(s.otherMonth)for(let t=0;t<r.length;t++)if(!r[t].otherMonth){s=r[t];break}return a._focusedCell&&a._setCellState(a._focusedCell,"focus",!1),a._focusedCell=s,a._focusCell(a._focusedCell),a._refreshHeaderTitle(),a._refreshHeaderElements(),a.$.fireEvent("displayModeChange"),a._isInteractiveNavigation?void(a._isInteractiveNavigation=void 0):void(a._setCellState(s,"focus",!0),setTimeout(function(){a.$.body.focus(),a._focusCell(a._focusedCell)},0))}_prepareView(t){function a(t,i,a){let n=new Date(t,i+1,0),o=n.getDate();return a>o?n.setDate(o):n.setDate(a),n}const n=this;let o=[],l=[],r,i;if("month"===n.displayMode)return n.$nextMonthsContainer.hasClass("smart-date-view-container")&&n.$nextMonthsContainer.removeClass("smart-date-view-container"),n.$listViewContainer.addClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-visibility-hidden")&&n.$dateViewContainer.removeClass("smart-visibility-hidden"),n._isDateInView(t)||n._handleMonths(t),n.$header.hasClass("smart-hidden")&&n.$header.removeClass("smart-hidden"),n.$body.hasClass("smart-calendar-list-view")&&n.$body.removeClass("smart-calendar-list-view"),n.$dateContainer.addClass("smart-calendar-selected"),n.$yearContainer.removeClass("smart-calendar-selected"),n.$dateViewContainer.addClass("smart-hidden"),n.$monthsContainer.removeClass("smart-hidden"),n._refreshHeaderTitle(),n.$.body.setAttribute("tabindex",0<n.tabIndex?n.tabIndex:0),n._refreshHeaderElements(),n.$.body.focus(),n._focusCell(n._getCellByDate(t)),void n.$.fireEvent("displayModeChange");if("list"===n.displayModeView)return n._setDisplayModeListContent(t),void n.$.fireEvent("displayModeChange");if(n.$header.hasClass("smart-hidden")&&n.$header.removeClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-visibility-hidden")&&n.$dateViewContainer.removeClass("smart-visibility-hidden"),n.$listViewContainer.addClass("smart-hidden"),n.$.body.setAttribute("tabindex",0<n.tabIndex?n.tabIndex:0),"year"===n.displayMode){let r=new Date;for(let s=0;12>s;s++)r=a(r.getFullYear(),s,r.getDate()),o.push(r.toLocaleDateString(n.locale,{month:"short"})),l.push(a(t.getFullYear(),s,t.getDate()))}else{r=t?t.getFullYear():n._viewDates[0].getFullYear(),i=r%10,0!==i&&(r-=i),r-=1;for(let a=0;12>a;a++)o.push(r+""),l.push(new Date(r,t.getMonth(),t.getDate())),++r}return{viewContent:o,dates:l}}_setDisplayModeListContent(t){function a(t,i,a){let n=new Date(t,i+1,0),o=n.getDate();return a>o?n.setDate(o):n.setDate(a),n}const n=this;let o=[];if(n.$dateViewContainer.addClass("smart-visibility-hidden"),n.$listViewContainer.hasClass("smart-hidden")&&(n.$body.addClass("smart-calendar-list-view"),n.$listViewContainer.removeClass("smart-hidden"),n.$.listViewContainer._setFocusable(),n.$.body.removeAttribute("tabindex")),"year"===n.displayMode){let l=new Date;for(let r=0;12>r;r++)l=a(l.getFullYear(),r,l.getDate()),o.push({label:l.toLocaleDateString(n.locale,{month:"short"}),value:a(t.getFullYear(),r,t.getDate()).toDateString()});n.$yearContainer.removeClass("smart-calendar-selected"),n.$dateContainer.addClass("smart-calendar-selected")}else{let a=n.min.getFullYear(),l=n.max.getFullYear();l=Math.min(n.max.getFullYear(),t.getFullYear()+10),a=Math.max(n.min.getFullYear(),l-10);for(let n=a;n<l;n++)o.push({label:n.toString(),value:new Date(n,t.getMonth(),t.getDate()).toDateString()});n.$yearContainer.addClass("smart-calendar-selected"),n.$dateContainer.removeClass("smart-calendar-selected")}n.$.listViewContainer.dataSource=o,n.$.listViewContainer.selectedValues=[t.toDateString()],n.$.listViewContainer.ensureVisible(n.$.listViewContainer.selectedValues[0]),n._refreshHeaderTitle(),n._refreshHeaderElements(),n.focus()}_isDateInView(t){const i=this;if(!t)return!1;for(let a=0;a<i._viewDates.length;a++)if(t.getFullYear()===i._viewDates[a].getFullYear()&&t.getMonth()===i._viewDates[a].getMonth()){let a=i._getCellByDate(t,i._animationStarted?i.$.nextMonthsContainer:i.$.monthsContainer);return a?!(a.otherMonth||a.classList.contains("smart-visibility-hidden")):void 0}return!1}_keyDownHandler(t){const i=this;if(!(i.disabled||i.readonly))switch(i.enableShadowDOM?i.shadowRoot.activeElement||document.activeElement:document.activeElement){case i.$.yearElement:"Escape"===t.key&&i._refreshHeaderElements();break;case i.$.dateElement:if("default"===i.calendarMode&&" "===t.key||"Enter"===t.key)return t.preventDefault(),i._isInteractiveNavigation=!0,void i._showDateView();i._focusedCell||i._focusCell(),-1<t.key.indexOf("Arrow")&&i.$.dateElement===document.activeElement&&i.$.body.focus(),i._navigateDays(t);break;case i.$.body:(" "===t.key||"Enter"===t.key)&&t.preventDefault(),i._navigateDays(t);break;case i.$.yearContainer:if((" "===t.key||"Enter"===t.key)&&"decade"!==i.displayMode&&(t.preventDefault(),i._isInteractiveNavigation=!0,i._showDateView("year")),-1<t.key.indexOf("Arrow")){if(t.preventDefault(),i._focusedCell||i._focusCell(),"month"!==i.displayMode&&"list"===i.displayModeView)return i.focus(),void i.$.listViewContainer._handleKeyStrokes(t.key);i._navigateDays(t)}break;case i.$.dateContainer:if((" "===t.key||"Enter"===t.key)&&"month"!==i.displayMode&&(t.preventDefault(),i._displayModeHandler("list"===i.displayModeView?i.$.listViewContainer.getItem(i.$.listViewContainer.selectedValues[0]):i._focusedCell,"month")),-1<t.key.indexOf("Arrow")){if(i._focusedCell||i._focusCell(),"month"!==i.displayMode&&"list"===i.displayModeView)return i.focus(),void i.$.listViewContainer._handleKeyStrokes(t.key);i._navigateDays(t)}break;default:if("month"!==i.displayMode&&"list"===i.displayModeView)return(["Arrow","End","Home","Page"].indexOf(t.key)&&t.preventDefault()," "===t.key||"Enter"===t.key||t.ctrlKey&&("ArrowUp"===t.key||"ArrowDown"===t.key))?void i._navigateDays(t):void i.$.listViewContainer._handleKeyStrokes(t.key);-1<t.key.indexOf("Arrow")&&(!i._focusedCell&&i._focusCell(),i._navigateDays(t));}}_listViewContainerChangeEventHandler(t){t.stopPropagation()}_listViewContainerKeyDownHandler(t){const i=this;"list"!==i.displayModeView||(" "===t.key||"Enter"===t.key)&&i._navigateDays(t)}_showDateView(t){const i=this;if(t=t?t:i.displayMode,"month"===t?t="year":"year"===t?t="decade":void 0,i.displayMode===t)return;const a=i.$.fireEvent("displayModeChanging",{oldDisplayMode:i.displayMode,newDisplayMode:t}).defaultPrevented;if(a)return;i.displayMode=t;let n;return arguments[0]&&"list"===i.displayModeView&&"month"!==i.displayMode&&0<i.$.listViewContainer.items.length?(n=i.$.listViewContainer.getItem(i.$.listViewContainer.selectedValues[0]),i.$.animationPanel.style.transformOrigin=n.offsetHeight?n.offsetLeft+n.offsetWidth/2+"px "+(0<n.dataItem.top?n.offsetTop-n.offsetHeight/2:n.offsetTop+n.offsetHeight/2)+"px":i.$.listViewContainer.offsetLeft+i.$.listViewContainer.offsetWidth/2+"px "+(0<n.dataItem.top?n.offsetTop-n.offsetHeight/2:i.$.listViewContainer.offsetTop+i.$.listViewContainer.offsetHeight/2)+"px"):(!i._focusedCell&&i._focusCell(),n=i._focusedCell,i.$.animationPanel.style.transformOrigin=n.offsetLeft+n.offsetWidth/2+"px "+(n.offsetTop+n.offsetHeight/2)+"px"),i.$monthsContainer.addClass("smart-hidden"),i.$dateViewContainer.hasClass("smart-hidden")&&i.$dateViewContainer.removeClass("smart-hidden"),"decade"===i.displayMode&&(i.$yearContainer.addClass("smart-calendar-selected"),i.$dateContainer.removeClass("smart-calendar-selected")),i.hasAnimation?void i._animateView(-1,n):void i._setDisplayModeContent(i._focusedCell?i._focusedCell.value:i._viewDates[0])}_keyUpHandler(t){const i=this;i.disabled||i.readonly||"default"===i.selectionMode&&("Shift"===t.key||"Control"===t.key)&&(i._keysPressed[t.key]=!1)}_mouseEventsHandler(t){const i=this;if(i.disabled||i.readonly)return;if("mouseenter"===t.type)return void i.$.setAttributeValue("hover",!0);if("mouseleave"===t.type)return i.$.setAttributeValue("hover",!1),void(i.tooltip&&i.$.tooltip.close());const a=i.enableShadowDOM?t.composedPath()[0]:t.target;if(!a.closest(".smart-calendar-week"))return void(i.tooltip&&i.$.tooltip.close());let n=a,o;for(;n&&!(n.value instanceof Date);)n=n.parentElement,o=!0;if(n&&(Smart.Utilities.Core.isMobile||i._handleCalendarCellHover(t,n),i.tooltip)){if(n.hasAttribute("important")&&"mouseover"===t.type)return i.$.tooltip.open(),i.tooltipTemplate?i.$.tooltip.value=n.value+"":i.$.tooltip.innerHTML=0===i.$.tooltip.innerHTML.trim().length?"Important day!":i.$.tooltip.innerHTML,i.$.tooltip.selector=n,void(i.$.tooltip.selector!==n&&i.$.tooltip.close());if(o||i.$.tooltip.selector===n)return;i.$.tooltip.close()}}_moveHandler(t){var i=Math.round;const a=this;if(!Smart.Utilities.Core.isMobile||!a._dragStartDetails||"list"===a.displayModeView&&"month"!==a.displayMode)return;t.originalEvent.preventDefault(),t.preventDefault(),t.stopPropagation();const n={x:i(t.pageX),y:i(t.pageY)};let o="portrait"===a.scrollButtonsNavigationMode?n.y>a._dragStartDetails.y?-1*a.months:1*a.months:n.x<a._dragStartDetails.x?1*a.months:-1*a.months;const l=a._getNextDate(o);if(!l)return;if(a._dragStartDetails.step=o,a._dragStartDetails.navigationDate=new Date(l),!a.hasAnimation)return;let r;if("month"!==a.displayMode)a.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),r=a.$.dateViewContainer,a.$.nextMonthsContainer.children[0].value instanceof Date&&a.$.nextMonthsContainer.children[1].value.getFullYear()===l.getFullYear()||a._setDisplayModeContent(l,a.$.nextMonthsContainer);else if(a.$nextMonthsContainer.hasClass("smart-calendar-date-view-container")&&a.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),r=a.$.monthsContainer,!a.$.nextMonthsContainer.children[0]._date||a.$.nextMonthsContainer.children[0]._date.getTime()!==l.getTime()){let t=a.$.nextMonthsContainer.children;for(let n=0;n<t.length;n++)l.setMonth(a._dragStartDetails.navigationDate.getMonth()+n),a._setMonth(l,t[n],!0)}0>o?(r.style.order=3,a.$.nextMonthsContainer.style.order=1,a.$.body[a._animationSettings.scrollSize]=a.$.body[a._animationSettings.scrollMax]):(r.style.order=1,a.$.nextMonthsContainer.style.order=3,a.$.body[a._animationSettings.scrollSize]=0);const s="portrait"===a.scrollButtonsNavigationMode?"y":"x";10<Math.abs(a._dragStartDetails[s]-n[s])&&(a.$.body[a._animationSettings.scrollSize]+=2*-(n[s]-a._dragStartDetails[s]))}_getNextDate(t){const i=this;let a;if("month"!==i.displayMode){let n;const o=i._focusedCell&&i._focusedCell.value.getFullYear();if("list"===i.displayModeView)a=new Date(i.$.listViewContainer.items[0].value);else{let t=i._animationStarted?i.$.nextMonthsContainer:i.$.dateViewContainer;a=new Date("year"===i.displayMode?t.children[0].value:t.children[1].value)}if(n="year"===i.displayMode?1:0===t?1:10,a.setFullYear(a.getFullYear()+(0<t?n:-n)),a.getTime()<i.min.getTime()&&(a=i.min),a.getTime()>i.max.getTime()&&(a=i.max),"year"===i.displayMode){if(a.getFullYear()<i.min.getFullYear()||a.getFullYear()>i.max.getFullYear()||o===a.getFullYear())return;}else if(a.getFullYear()<i.min.getFullYear()||a.getFullYear()>i.max.getFullYear()||o===a.getFullYear())return}else{let n=i._viewDates[0];if(a=new Date(n),a.setDate(1),a.setMonth(a.getMonth()+t),a.setTime(Math.min(Math.max(a.getTime(),i.min.getTime()),i.max.getTime())),n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear())return}return a}_navigateDays(t){const i=this;let a="ArrowUp"===t.key||"ArrowDown"===t.key?7:1,n="ArrowUp"===t.key||"ArrowLeft"===t.key||"PageUp"===t.key?-1:1;switch(t.key){case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":if(!i._handleArrowKeys(t,a,n))return;break;case" ":case"Enter":if("month"!==i.displayMode)return void i._displayModeHandler("list"===i.displayModeView?i.$.listViewContainer.getItem(i.$.listViewContainer.selectedValues[0]):i._focusedCell);break;case"Control":case"Shift":return void("default"===i.selectionMode&&(i._keysPressed[t.key]=!0));case"Home":case"End":{t.preventDefault();let a=function(i){if("Home"===t.key){for(let t=0;t<i.length;t++)if(!i[t].otherMonth&&(!i[t].disabled||!i[t].restricted))return i[t];}else for(let t=i.length-1;0<=t;t--)if(!i[t].otherMonth&&(!i[t].disabled||!i[t].restricted))return i[t]},n;if(n="month"===i.displayMode?a(i._getMonthCells(i._focusedCell.closest(".smart-calendar-month"),i.rightToLeft)):a(i.$.dateViewContainer.children),!n)return;if(i._focusCell(n),"month"!==i.displayMode)return;break}case"PageUp":case"PageDown":{if(!i._handlePageUpDownKeys(t,n))return;break}default:return;}i._focusedCell&&i._handleDateSelection(i._focusedCell)}_handleArrowKeys(t,i,a){const n=this;let o;if("month"!==n.displayMode||n._animationStarted||n.$.body.focus(),n._focusedCell||n._focusCell(n._getCellByDate(new Date)),!t.altKey){if(t.ctrlKey){if("ArrowDown"===t.key||"ArrowUp"===t.key){let i;switch(n.displayMode){case"month":i="ArrowDown"===t.key?"month":"year";break;case"year":i="ArrowDown"===t.key?"month":"decade";break;case"decade":i="ArrowDown"===t.key?"year":"decade";}if(i!==n.displayMode){const t=n.displayMode;n.displayMode=i,n._setDisplayMode(t,i,"month"===t),n._keysPressed&&delete n._keysPressed.Control}}return}if(t.preventDefault(),n.rightToLeft&&("ArrowLeft"===t.key||"ArrowRight"===t.key)&&(a*=-1),"month"!==n.displayMode){let l=n._animationStarted?n.$.nextMonthsContainer.children:n.$.dateViewContainer.children;if(i="ArrowUp"===t.key||"ArrowDown"===t.key?4:1,"year"===n.displayMode){const t=n._focusedCell.value.getMonth()+a*i;let l=new Date(n._focusedCell.value.getFullYear(),t+1,0);n._focusedCell.value.getDate()<=l.getDate()&&(l=n._focusedCell.value),o=new Date(n._focusedCell.value.getFullYear(),t,l.getDate())}else o=new Date(n._focusedCell.value.getFullYear()+a*i,n._focusedCell.value.getMonth(),n._focusedCell.value.getDate());if("year"===n.displayMode){if(o.getFullYear()<n.min.getFullYear()||o.getFullYear()===n.min.getFullYear()&&o.getMonth()<n.min.getMonth()||o.getFullYear()>n.max.getFullYear()||o.getFullYear()===n.max.getFullYear()&&o.getMonth()>n.max.getMonth())return;o.getTime()>l[l.length-1].value.getTime()?n.navigate(1):o.getTime()<l[0].value.getTime()&&n.navigate(-1)}else{if(o.getFullYear()<n.min.getFullYear()||o.getFullYear()>n.max.getFullYear())return;if(o.getFullYear()<l[1].value.getFullYear()||o.getFullYear()>l[10].value.getFullYear()){let i=n._focusedCell;n.navigate(a),("ArrowUp"===t.key||"ArrowDown"===t.key)&&(i===l[3]||i===l[4]||i===l[7]||i===l[8]?o.setFullYear(o.getFullYear()+2*a):o.setFullYear(o.getFullYear()-2*a))}}return void n._focusCell(n._getCellByDate(o,n._animationStarted?n.$.nextMonthsContainer:void 0))}const l=n.restrictedDates.map(Number);for(o=new Date(n._focusedCell.value.getFullYear(),n._focusedCell.value.getMonth(),n._focusedCell.value.getDate()+a*i,0,0,0,0);-1<l.indexOf(o.getTime());)o.setDate(o.getDate()+a);if(!(o.getTime()<n.min.getTime()||o.getTime()>n.max.getTime())){n._isDateInView(o)||n.navigate(a*n.months);let t=n._getCellByDate(o,n._animationStarted?n.$.nextMonthsContainer:void 0);return n._focusCell(t),!(-1<["zeroOrMany","oneOrMany","none","many","week"].indexOf(n.selectionMode))||void 0}}}_handlePageUpDownKeys(t,i){const a=this;t.preventDefault();let n;if("month"!==a.displayMode){if(n=a._focusedCell,!a.navigate(i))return;for(;n&&n.classList.contains("smart-visibility-hidden");)n=null===n.previousElementSibling?n.nextElementSibling:n.previousElementSibling;return a._focusCell(n),void(a.hasAnimation&&"decade"===a.displayMode&&a._focusedCell.value.setFullYear(a._focusedCell.value.getFullYear()+10*i))}n=new Date(a._focusedCell.value.getFullYear(),a._focusedCell.value.getMonth()+i,1,0,0,0,0);let o=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();return a._focusedCell.value.getDate()>o?n.setDate(o):n.setDate(a._focusedCell.value.getDate()),a._isDateInView(n)||a.navigate(i*a.months),a._animationStarted?a._focusCell(a._getCellByDate(n,a.$.nextMonthsContainer)):a._focusCell(a._getCellByDate(n)),!0}_selectDate(t,i,a){const n=this;if("undefined"==typeof n._viewDates||"none"===n.selectionMode)return;let o=n.selectedDates.slice(0),l=n._getCellByDate(t,n._animationStarted?n.$.nextMonthsContainer:n.$.monthsContainer);l&&n._selectCell(l);let r;t=new Date(t),t.setHours(0,0,0,0),r=o.map(Number).indexOf(t.getTime());-1<n.restrictedDates.map(Number).indexOf(t.getTime())||t.getTime()<n.min.getTime()||t.getTime()>n.max.getTime()||(-1<r?o.splice(r,1):o.push(t),!a&&(n.selectedDates=o),n._refreshFooter(),n.$.hiddenInput.value=n.selectedDates.toString(),!i&&n.$.fireEvent("change",{value:[t]}),n._refreshTitle())}_selectCell(t){const i=this;if(!(!t||-1<i.restrictedDates.map(Number).indexOf(t.value.getTime())||i.disableAutoNavigation&&!1===t.otherMonth||t.value.getTime()<i.min.getTime()||t.value.getTime()>i.max.getTime())){const a=i._selectedCells.indexOf(t);-1<a?(i._setCellState(t,"selected",!1),i._selectedCells.splice(a,1)):(i._setCellState(t,"selected",!0),i._selectedCells.push(t)),i._focusCell(t)}}_refreshDayOfWeekTitles(){function t(t){let a;return"firstTwoLetters"===i.dayNameFormat?(a=new Intl.DateTimeFormat(i.locale,{weekday:"long"}).format(t),a=8206===a.charCodeAt(0)?a.substring(1,3):a.substring(0,2)):a=new Intl.DateTimeFormat(i.locale,{weekday:i.dayNameFormat}).format(t),a}const i=this;let a=[],n=new Date,o;for(let l=1;8>l;l++)n.setDate(l),o={number:n.getDay(),name:t(n)},a.push(o);a.sort((t,i)=>t.number>i.number?1:-1);const l=i.$.monthsContainer.children;let r,s;for(let t=0;t<l.length;t++)if(r=l[t].getElementsByClassName("smart-calendar-week-titles")[0].children,s=6<i.firstDayOfWeek?0:i.firstDayOfWeek,i.rightToLeft)for(let t=r.length-1;0<=t;t--)r[t].textContent=a[s++].name,s=6<s?0:s;else for(let t=1;t<r.length;t++)r[t].textContent=a[s++].name,s=6<s?0:s;if(i.hasAnimation){const t=i.$.monthsContainer.getElementsByClassName("smart-calendar-week-titles")[0].innerHTML,a=i.$.nextMonthsContainer.getElementsByClassName("smart-calendar-week-titles");for(let n=0;n<a.length;n++)a[n].innerHTML=t}}_refreshCalendarMode(){const t=this;if(!t.headerTemplate)if(t._refreshMonthNames(),"default"===t.calendarMode){t.$classicHeaderDate.addClass("smart-hidden"),t.$defaultHeaderDate.removeClass("smart-hidden");const i=t._viewDates.slice(0).sort((t,i)=>t.getTime()-i.getTime()),a=i[0],n=i[i.length-1];a.setDate(2);let o=a.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat});1<t.months&&(n.setDate(2),o+=" - "+n.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat})),t.$.defaultHeaderDate.innerHTML=o,t.unfocusable||t.$.dateElement.setAttribute("tabindex",0<t.tabIndex?t.tabIndex:0)}else t.$defaultHeaderDate.addClass("smart-hidden"),t.$classicHeaderDate.removeClass("smart-hidden"),t.$.dateElement.removeAttribute("tabindex")}_refreshFooter(){function t(){if(0===i.selectedDates.length)return"";if(1===i.selectedDates.length)return i.selectedDates[0].toLocaleDateString(i.locale,{year:i.yearFormat,weekday:"short",month:"short",day:"numeric"});else{let t=i.selectedDates.slice(0).sort((t,i)=>t.getTime()-i.getTime());return t[0].toLocaleDateString(i.locale,{year:i.yearFormat,weekday:"short",month:"short",day:"numeric"})+" - "+t[t.length-1].toLocaleDateString(i.locale,{year:i.yearFormat,weekday:"short",month:"short",day:"numeric"})}}const i=this;if(!(0>i.viewSections.indexOf("footer")||0===i.$.footer.offsetHeight)){if(i.footerTemplate){if("function"==typeof i.footerTemplate)return;let a=i._layoutTemplates.filter(t=>t.selector===i.$.footer)[0],n=document.importNode(a.template.content,!0);if(0<a.bindings.length){let i=n.childNodes[a.bindings[0].childNodeIndex];a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=i.innerHTML.replace(a.bindings[0].bindingString,t())}return}i.$.selectedDatesRange.innerHTML=t()}}_refreshImportantDates(){const t=this;if("month"===t.displayMode){t._clearImportantDates();for(let i=0;i<t.importantDates.length;i++)t._setImportantDate(t.importantDates[i])}}_clearImportantDates(){const t=this,i=t.$.monthsContainer.children;for(let a=0;a<i.length;a++)t._getMonthCells(i[a]).map(i=>{t._setCellState(i,"important",!1)})}_setImportantDate(t,i){const a=this,n=a._getCellByDate(t);i||(i=n),i&&(a._setCellState(i,"important",!0),a._applyImportantDateTemplate(i))}_applyImportantDateTemplate(t){const i=this;if(!i._importantDatesTemplate)return"function"==typeof i.importantDatesTemplate?void i.importantDatesTemplate(t,{value:t.value}):void(t.innerHTML=t.value.getDate()+"");let a=document.importNode(i._importantDatesTemplate.content,!0);if(i._bindingDetails&&0<i._bindingDetails.length){let n=a.childNodes[i._bindingDetails[0].childNodeIndex];n.innerHTML=n.innerHTML.replace(i._bindingDetails[0].bindingString,t.value.getDate())}t.innerHTML="";for(let n=0;n<a.childNodes.length;n++)a.childNodes[n].outerHTML&&(t.innerHTML+=a.childNodes[n].outerHTML)}_setMonth(t,a,i){const n=this,o=n._getDays(t,n.selectedDates),l=n._getDays(t,n.importantDates),r=n._getDays(t,n.restrictedDates);t.setDate(1),a||(a=n.$.month),a._date=new Date(t),i||((!n._viewDates||n._viewDates.length>=n.months)&&(n._viewDates=[]),n._viewDates.push(new Date(t))),t=new Date(t);let s=(t.getDay()-n.firstDayOfWeek+7)%7;t.setDate(0);let d=t.getDate();if(t.setDate(32),t.setDate(1),t.setDate(32),n._selectedCells)for(let t=0;t<n._selectedCells.length;t++)n._selectedCells[t].closest(".smart-calendar-month")===a&&n._setCellState(n._selectedCells[t],"selected",!1);n._setMonthContent(t,a,{previusMonthDays:d,firstDayOfWeek:s,selectedDates:o,importantDates:l,restrictedDates:r})}_setMonthContent(t,i,a){const n=this,o=32-t.getDate(),l=n._getMonthCells(i,n.rightToLeft),r=i._date.getMonth(),s=i._date.getFullYear(),m=new Date;let c=1,u=1,p;m.setHours(0,0,0,0),l.map(t=>{n._setCellState(t,"restricted",!1),n._setCellState(t,"selected",!1),n._setCellState(t,"otherMonth",!1),n._setCellState(t,"focus",!1),n._setCellState(t,"important",!1),n._setCellState(t,"today",!1),n._setCellState(t,"disabled",!1),n._setCellState(t,"hover",!1)});for(let g=0;g<l.length;g++){const t=l[g];g===a.firstDayOfWeek&&u<=o?(t.className="smart-calendar-cell",t.value=new Date(s,r,u),t.innerHTML=t.value.getDate().toString(),-1<a.restrictedDates.indexOf(u)||t.value.getTime()<n.min.getTime()||t.value.getTime()>n.max.getTime()?n._setCellState(t,"restricted",!0):-1<a.selectedDates.indexOf(u)&&(n._setCellState(t,"selected",!0),0>n._selectedCells.indexOf(t)&&n._selectedCells.push(t)),-1<a.importantDates.indexOf(u)&&(n._setImportantDate(t.value,t),a.importantDates.splice(a.importantDates.indexOf(u),1)),t.value.getTime()===m.getTime()&&n._setCellState(t,"today",!0),a.firstDayOfWeek++,u++):(1==u?(t.value=new Date(s,r-1,++a.previusMonthDays-a.firstDayOfWeek),p=!!(t.value.getTime()<n.min.getTime()||i.previousElementSibling)):(t.value=new Date(s,r+1,c++),p=!!(t.value.getTime()>n.max.getTime()||i.nextElementSibling)),t.innerHTML=t.value.getDate().toString(),p?t.classList.add("smart-visibility-hidden"):(n._setCellState(t,"otherMonth",!0),t.classList.remove("smart-visibility-hidden")))}1<n.months&&(i.firstElementChild.innerHTML=n.dateFormatFunction?n.dateFormatFunction(i._date):n._monthsNames[r]+" "+i._date.toLocaleDateString(n.locale,{year:n.yearFormat})),n._setMonthWeekNumbers(i)}_refreshMonthNames(){function t(t){let a=new Intl.DateTimeFormat(i.locale,{month:i.monthNameFormat}).format(t);return"firstTwoLetters"===i.monthNameFormat&&(a=8206===a.charCodeAt(0)?a.substring(0,2):a.substring(1,3)),a}const i=this;let a=new Date,n;a.setDate(1),i._monthsNames=[];for(let o=0;12>o;o++)a.setMonth(o),n=t(a),i._monthsNames.push(n);if("classic"===i.calendarMode&&i.$.monthElement){let t=i.$.monthsContainer.children;i.$.monthElement.dataSource&&(i._changeEventFired=1);const a=i.$.monthElement.context;if(i.$.monthElement.context=document,i.$.monthElement.dataSource=i._monthsNames,i.$.monthElement.context=a,i._viewDates){for(let a=0;a<t.length;a++)t[a].firstElementChild.textContent=i._monthsNames[t[a]._date.getMonth()]+" "+t[a]._date.getFullYear();i._changeEventFired=1,i.$.monthElement.selectedIndexes=i._viewDates.map(t=>t.getMonth())}}}_setMonthWeekNumbers(t){const i=this,a=function(t){for(let i=1;i<t.children.length;i++)if(!t.children[i].classList.contains("smart-visibility-hidden"))return!0};let n=t.getElementsByClassName("smart-calendar-week");n=[].slice.call(n);for(let o=0;o<n.length;o++){if(!a(n[o])){n[o].children[0].innerHTML="";continue}const l=n[o].children[1],r=l.otherMonth?l.value.getTime()>t._date.getTime()?1:-1:0;n[o].children[0].innerHTML=i._getWeekNumber(new Date(t._date.getFullYear(),t._date.getMonth()+r,l.value.getDate()))}}_setRestrictedDates(t){const a=this,i=a.$.monthsContainer.children;for(let n=0;n<i.length;n++)a._getMonthCells(i[n]).map(t=>{a._setCellState(t,"restricted",!1)});if(a._viewDates){const n=function(t){for(let n=0;n<a._viewDates.length;n++)if(a._viewDates[n].getFullYear()===t.getFullYear()&&a._viewDates[n].getMonth()===t.getMonth())return!0};for(let o=0;o<t.length;o++)if(n(t[o])){const i=a._getCellByDate(t[o]);a._setCellState(i,"restricted",!0)}}}_setScrollButtonsNavigationMode(){const t=this;"landscape"===t.scrollButtonsNavigationMode?(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe809"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe810")):(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe80b"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe80d")),t._applyAnimationSettings(!0)}_tooltipEventHandler(t){const i=this;i.enableShadowDOM&&i.$.fireEvent(t.type,t.detail)}_refreshTitle(){const t=this;let i=0<t.selectedDates.length?t.selectedDates[t.selectedDates.length-1]:new Date;if(t.titleTemplate){if("function"==typeof t.titleTemplate)return;let a=t._layoutTemplates.filter(i=>i.selector===t.$.title)[0],n=document.importNode(a.template.content,!0);if(0<a.bindings.length){let o=n.childNodes[a.bindings[0].childNodeIndex];return i=i.toLocaleDateString(t.locale,{year:t.yearFormat,weekday:"short",month:"short",day:"numeric"}),void(a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(a.bindings[0].bindingString,i))}}t.$.title.children[0].innerHTML=i.toLocaleDateString(t.locale,{year:t.yearFormat}),t.$.title.children[1].innerHTML="landscape"===t.view?i.toLocaleDateString(t.locale,{weekday:"short"})+",</br>"+i.toLocaleDateString(t.locale,{month:"short",day:"numeric"}):i.toLocaleDateString(t.locale,{weekday:"short"})+", "+i.toLocaleDateString(t.locale,{month:"short",day:"numeric"})}_setWeeksVisibility(t){function a(t){return function(t){for(let i=1;i<t.children.length;i++)if(!t.children[i].classList.contains("smart-visibility-hidden"))return!1;return!0}(t)||o>=i.weeks?void t.classList.add("smart-hidden"):void(o<i.weeks&&(t.classList.remove("smart-hidden"),o++))}const i=this,n=t.children;let o;for(let l=0;l<n.length;l++){const t=n[l];let r=t.getElementsByClassName("smart-calendar-week");r=[].slice.call(r);let s=i._selectedCells.filter(t=>t.closest(".smart-calendar-month")===n[l]);if(6===i.weeks){r.map(t=>t.classList.remove("smart-hidden"));continue}if(o=0,0<s.length){let t=s[s.length-1],n=r.indexOf(t.parentElement);for(let t=n;t<r.length;t++)a(r[t]);for(let t=n-1;0<=t;t--)a(r[t])}else for(let t=0;t<r.length;t++)a(r[t])}}_refreshHeaderElements(){const t=this,i=document.activeElement.closest("smart-calendar")===t,a=t._animationStarted?t.$.nextMonthsContainer:t.$.dateViewContainer;let n=t._viewDates[t._viewDates.length-1],o=t._viewDates.map(t=>t.getFullYear()),l,r;if("month"===t.displayMode||"list"!==t.displayModeView){if(t.$.previousMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?r="year"===t.displayMode?a.children[0].value.getFullYear()-1:a.children[1].value.getFullYear()-1:0>t._viewDates[0].getMonth()-1?(l=11,r=t._viewDates[0].getFullYear()-1):(l=t._viewDates[0].getMonth()-1,r=t._viewDates[0].getFullYear()),t.$.previousMonthButton.disabled=!!(r<t.min.getFullYear()||r===t.min.getFullYear()&&l<t.min.getMonth()),t.$.previousMonthButton.disabled&&i&&t.$.body.focus()),t.$.nextMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?r="year"===t.displayMode?a.children[0].value.getFullYear()+1:a.children[1].value.getFullYear()+11:11<n.getMonth()+1?(l=0,r=n.getFullYear()+1):(l=n.getMonth()+1,r=n.getFullYear()),t.$.nextMonthButton.disabled=!!(r>t.max.getFullYear()||r===t.max.getFullYear()&&l>t.max.getMonth()),t.$.nextMonthButton.disabled&&i&&t.$.body.focus()),"classic"===t.calendarMode&&t.$.monthElement){const a=t.$.monthElement.items;if(a.map(t=>t.disabled=!1),-1<o.indexOf(t.min.getFullYear()))for(let n=0;n<t.min.getMonth();n++)a[n].disabled=!0;if(-1<o.indexOf(t.max.getFullYear()))for(let n=t.max.getMonth()+1;n<a.length;n++)a[n].disabled=!0;t._changeEventFired=t.$.monthElement.selectedIndexes.length,t.$.monthElement.selectedIndexes=[t._viewDates[0].getMonth()],t._changeEventFired=0}t.$.previousYearButton&&!t.disabled&&(r=t._viewDates[0].getFullYear()-1,t.$.previousYearButton.disabled=!!(r<t.min.getFullYear()),t.$.previousYearButton.disabled&&i&&t.$.body.focus()),t.$.nextYearButton&&!t.disabled&&(r=n.getFullYear()+1,t.$.nextYearButton.disabled=!!(r>t.max.getFullYear()),t.$.nextYearButton.disabled&&i&&t.$.body.focus()),t.$.yearElement&&(t.$.yearElement.value=o[0],t.$.yearElement.disabled=!!(n.getFullYear()+1>t.max.getFullYear()&&t._viewDates[0].getFullYear()-1<t.min.getFullYear()))}}_refreshHeaderTitle(){function t(){if("month"!==i.displayMode){if("list"===i.displayModeView&&i.$.listViewContainer.selectedValues[0]){let t=i.$.listViewContainer.items;a="year"===i.displayMode?new Date(i.$.listViewContainer.getItem(i.$.listViewContainer.selectedValues[0]).value).getFullYear():new Date(t[0].value).getFullYear()+" - "+new Date(t[t.length-1].value).getFullYear()}else if(i.$.dateViewContainer.children[0].value){let t=i._animationStarted?i.$.nextMonthsContainer.children:i.$.dateViewContainer.children;a="year"===i.displayMode?t[0].value.getFullYear():t[1].value.getFullYear()+" - "+t[t.length-2].value.getFullYear()}if(a)return a}const t=i._viewDates.slice(0).sort((t,i)=>t.getTime()-i.getTime()),n=t[0],o=t[t.length-1];return n.setDate(2),a=n.toLocaleDateString(i.locale,{year:i.yearFormat,month:i.monthNameFormat}),1<i.months&&(o.setDate(2),a+=" - "+o.toLocaleDateString(i.locale,{year:i.yearFormat,month:i.monthNameFormat})),a}const i=this;let a;if("default"===i.calendarMode&&(i.$.defaultHeaderDate.innerHTML=t()),"function"!=typeof i.headerTemplate&&i._layoutTemplates){let a=i._layoutTemplates.filter(t=>t.selector===i.$.header)[0];if(a){let n=document.importNode(a.template.content,!0);if(0<a.bindings.length){const o=n.childNodes[a.bindings[0].childNodeIndex];a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(a.bindings[0].bindingString,i.dateFormatFunction?i.dateFormatFunction(i._viewDates):t())}}}}_updateWeeksVisibility(){const t=this,i=t._focusedCell.parentElement;if(!i.classList.contains("smart-hidden"))return;const a=[].slice.call(i.parentElement.children),n=a.indexOf(i),o=function(t){for(let i=1;i<t.children.length;i++)if(!t.children[i].classList.contains("smart-visibility-hidden"))return!1;return!0};let l=0;a.map(t=>t.classList.add("smart-hidden"));for(let r=n;r<a.length;r++)if(!o(a[r])&&(a[r].classList.remove("smart-hidden"),l++,l===t.weeks))return;if(l<t.weeks)for(let o=n-1;0<=o;--o)if(a[o].classList.remove("smart-hidden"),l++,l===t.weeks)return}_getValidDates(t){function a(t){if(t instanceof Date)return t;if(Smart.Utilities.DateTime&&t instanceof Smart.Utilities.DateTime)return t.toDate();if("string"==typeof t){if("new Date()"===t.trim()||"new Smart.Utilities.DateTime()"===t.trim())return new Date;let i=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;const a=()=>{if(t=t.replace(/[,-.\/]/g,",").split(","),2<t.length)t=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));else return new Date;return t};return i.test(t)?(t=i.exec(t)[0].replace(/[,-.\/]/g,",").split(","),t?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):a()):a()}}let n=[];if(void 0===t)return null;if(Array.isArray(t))for(let o=0;o<t.length;o++)n.push(a(t[o]));else n.push(a(t));return n=n.filter(t=>t&&"Invalid Date"!==t.toDateString()),n.map(t=>t.setHours(0,0,0,0)),n}_getValidDate(t){const i=this,a=i._getValidDates(t);return 0<a.length?a[0]:null}_validateSelectedDates(t){const i=this;let a=[];t||(t=i.selectedDates);let n=t.slice(0),o=function(t){for(let a=0;a<i.restrictedDates.length;a++)if(i.restrictedDates[a].getTime()===t.getTime())return!0};i.selectedDates=n.filter(function(t){return!!(t.getTime()>=i.min.getTime()&&t.getTime()<=i.max.getTime()&&!o(t))||void a.push(t)}),i._viewDates&&(a.map(t=>i._selectDate(t)),i._focusCell())}_validateMinMax(t,i,a){const n=this;switch(t){case"min":i=n._getValidDate(n[t]),n.min=i?i:a?a:n.properties.min.defaultValue;break;case"max":i=n._getValidDate(n[t]),n.max=i?i:a?a:n.properties.max.defaultValue;break;default:i=n._getValidDate(n.min),n.min=i?i:a?a:n.properties.min.defaultValue,i=n._getValidDate(n.max),n.max=i?i:a?a:n.properties.max.defaultValue;}n.min=n.min.getTime()>n.max.getTime()?n.max:n.min,n.min.setHours(0,0,0,0),n.max.setHours(0,0,0,0);let o=n.$.monthsContainer.children,l;if(n._viewDates){if(n._viewDates[0].getTime()>n.max.getTime()||n._viewDates[0].getTime()<n.min.getTime())return void n._handleMonths();for(let t=0;t<o.length;t++){l=n._getMonthCells(o[t]);for(let i=0;i<l.length;i++){const a=l[i];if(a.value.getTime()>=n.min.getTime()&&a.value.getTime()<=n.max.getTime())n._setCellState(a,"restricted",!1),a.value.getMonth()===o[t]._date.getMonth()?a.classList.remove("smart-visibility-hidden"):!n.hideOtherMonthDays&&(n._setCellState(a,"otherMonth",!0),a.classList.remove("smart-visibility-hidden")),"month"!==n.displayMode&&n._setCellState(a,"otherMonth",!1);else{if(!a.otherMonth)n._setCellState(a,"restricted",!0);else if(a.classList.contains("smart-visibility-hidden")){n._setCellState(a,"restricted",!1);continue}"month"!==n.displayMode&&(a.classList.remove("smart-visibility-hidden"),n._setCellState(a,"otherMonth",!0))}}}}}_setCellState(t,i,a){t[i]=a;const n=Smart.Utilities.Core.toDash(i);a?t.setAttribute(n,""):t.removeAttribute(n)}_validateTemplate(t,i){if(null!==i&&i&&"function"!=typeof i){const a=this;return"content"in document.createElement("template")?("string"==typeof i&&(i=document.getElementById(i)),null!==i&&"content"in i?i:void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:t}))):void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}))}}_weeksDownHandler(t,i){const a=this,n=i.value;let o;return(i.otherMonth&&(o=i.value.getTime()>i.closest(".smart-calendar-month")._date.getTime()?1:-1),a.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(i,t.pageX,t.pageY),o)?a._isDateInView(i.value)?void 0:void(a.disableAutoNavigation||a.navigate(o*a.months)):void(i=a._getCellByDate(n),i&&(i.disabled||i.restricted)||a._handleDateSelection(i))}_firstDayOfWeekValidator(t,i){return Math.min(Math.max(0,isNaN(i)?6:i),6)}_weeksValidator(t,i){return Math.min(Math.max(1,isNaN(i)?6:i),6)}_monthsValidator(t,i){return Math.min(Math.max(1,isNaN(i)?1:i),12)}}),Smart("smart-card",class extends Smart.ContentElement{static get properties(){return{dataSource:{value:null,type:"object?",reflectToAttribute:!1},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},contentHandler:{value:null,type:"function?",reflectToAttribute:!1}}}static get listeners(){return{mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler","container.swipeleft":"_swipeHandler","container.swiperight":"_swipeHandler","container.swipetop":"_swipeHandler","container.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.card.css"]}template(){return`<div id="container" inner-h-t-m-l="[[innerHTML]]">
                <content></content>
            </div>`}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"itemTemplate"===t?(n._template=n._handleTemplate(),n.innerHTML=n._processTemplate(),n.contentHandler&&n.contentHandler(n)):"dataSource"===t?(n.innerHTML=n._processTemplate(),n.contentHandler&&n.contentHandler(n)):"contentHandler"===t?n.contentHandler&&n.contentHandler(n):void 0}ready(){super.ready();const t=this;t._template=t._handleTemplate(),t._template.hasBindings?t.innerHTML=t._processTemplate():t.itemTemplate&&(t.innerHTML=t._template.content),t.contentHandler&&t.contentHandler(t)}_handleTemplate(){const t=this;let i=t.itemTemplate,a="",n=!1,o=/{{\w+}}/g;return t.itemTemplate?i instanceof HTMLElement?a=i.innerHTML:(i=document.getElementById(i),a=i?i.innerHTML:""):a=t.innerHTML,o.exec(a)&&(n=!0),{content:a,hasBindings:n}}_processTemplate(){const t=this,i=/{{\w+}}/g,a=t._template.content.match(i),n=t.dataSource||{};let o=t._template.content;return a&&0!==a.length?(a.forEach(function(t){const i=t.replace("{{","").replace("}}","");o=o.replace(t,n[i]||"")}),o):o}_swipeHandler(t){t.stopPropagation(),this.$.fireEvent(t.type)}}),Smart("smart-carousel",class extends Smart.ContentElement{static get properties(){return{autoPlay:{value:!1,type:"any"},dataSource:{value:[],type:"array",reflectToAttribute:!1},delay:{value:200,type:"number"},displayMode:{allowedValues:["default","multiple","3d"],value:"default",type:"string"},disableItemClick:{value:!1,type:"boolean"},hideArrows:{value:!1,type:"boolean"},hideIndicators:{value:!1,type:"boolean"},indicatorTemplate:{value:null,type:"any"},interval:{value:5e3,type:"number"},itemTemplate:{value:null,type:"any"},keyboard:{value:!1,type:"boolean"},loop:{value:!1,type:"boolean"},messages:{value:{en:{htmlTemplateNotSuported:"{{elementType}}:  Browser doesn't support HTMLTemplate elements."}},type:"object",extend:!0},slideShow:{value:!1,type:"boolean"},swipe:{value:!1,type:"boolean"},wheel:{value:!1,type:"boolean"}}}static get listeners(){return{"arrowLeft.click":"_handleArrowClick","arrowRight.click":"_handleArrowClick","indicatorsContainer.click":"_handleIndicatorsContainerClick",keydown:"_handleKeyDown",swipeleft:"_handleSwipe",swiperight:"_handleSwipe",wheel:"_handleMouseWheel","itemsContainer.click":"_handleItemClick","itemsContainer.transitionend":"_handleTransitionEnd"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.carousel.css"]}template(){return`<div id="container">
                    <div id="itemsContainer" inner-h-t-m-l="[[innerHTML]]" class="smart-items-container"><content></content></div>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowLeft" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-left"></smart-repeat-button>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowRight" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-right"></smart-repeat-button>
                    <div id="indicatorsContainer" class="smart-indicators-container"></div>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(super.propertyChangedHandler(t,i,a),t){case"disabled":n._setFocusable();break;case"dataSource":if(n._generateIndicators(),n._generateItems(),n._handleIndicatorsState(0,0),n._handleItemsState(0,0),n._handle3dMode(0),!1!==n.autoPlay){const t=parseInt(n.autoPlay);t?setTimeout(function(){n.play()},t):n.play()}n._animationTrigger(n._currentIndex);break;case"itemTemplate":n._generateItems(),n._handleItemsState(n._currentIndex,n._currentIndex+1);break;case"indicatorTemplate":n._generateIndicators(),n._handleIndicatorsState(n._currentIndex,n._currentIndex+1);break;case"interval":n.pause(),n.play();break;case"loop":n._handleArrowsActiveState(n._currentIndex,n._currentIndex);break;case"hideArrows":a||n._handleArrowsActiveState(n._currentIndex,n._currentIndex);break;case"displayMode":"multiple"===i&&n.$.itemsContainer.removeAttribute("style");}}ready(){super.ready();const t=this;if(t._setInitialState(),t._generateIndicators(),t._generateItems(),t._handleIndicatorsState(0,0),t._handleItemsState(0,0),t._handle3dMode(0),!1!==t.autoPlay){const i=parseInt(t.autoPlay);i?setTimeout(function(){t.play()},i):t.play()}t._setFocusable(),t._animationTrigger(t._currentIndex)}next(){const t=this,i=t.dataSource.length;if(t.disabled||0===i)return;let a=t._currentIndex;a=t.loop?a>=i-1?0:a+1:a>=i-1?a:a+1,t._goToItem(a)}pause(){const t=this;t._handleRotation(),t._rotate=!1}slideTo(t){const i=this;t=t?parseInt(t):0;i.disabled||0>t||t>i._items.length||i._goToItem(t)}prev(){const t=this,i=t.dataSource.length;if(t.disabled||0===i)return;let a=t._currentIndex;a=t.loop?0>=a?i-1:a-1:0>=a?0:a-1,t._goToItem(a)}play(){const t=this;t.disabled||!t.slideShow||(t._rotationInterval&&clearInterval(t._rotationInterval),t._handleRotation(!0),t._rotate=!0)}_animationTrigger(t){const a=this;for(let n=0;n<a._items.length;n++)n!==t&&a._items[n].classList.add("smart-animate-trigger")}_handle3dMode(t){const a=this,n=a.dataSource.length;if(!a.disabled&&n&&"3d"===a.displayMode){t=t||0;for(let o=0;o<n;o++){const i=o-t;i?a._items[o].setAttribute("position",i):a._items[o].removeAttribute("position")}}}_handleArrowsActiveState(t,i){const a=this,n=a.dataSource.length;a.loop?a.$.arrowLeft.disabled=a.$.arrowRight.disabled=!1:(0===i&&(a.$.arrowLeft.disabled=!1),i===n-1&&(a.$.arrowRight.disabled=!1),0===t&&(a.$.arrowLeft.disabled=!0),t===n-1&&(a.$.arrowRight.disabled=!0))}_handleArrowClick(t){const i=this,a=i._currentIndex;i.disabled||(i.$.arrowLeft.contains(t.target)?i.prev():i.next(),i._changeEvent(a,i._currentIndex))}_handleDefaultInnerHTML(){const t=this;if(!(t.dataSource&&0<t.dataSource.length)&&0<=t.$.itemsContainer.innerHTML.indexOf("<ul")){const i=t.$.itemsContainer.getElementsByTagName("ul")[0],a=i.getElementsByTagName("li");for(let n=0;n<a.length;n++){const i={HTMLcontent:a[n].innerHTML};t.dataSource.push(i)}}}_handleIndicatorsState(t,i){const a=this;!a.disabled&&0!==a._indicators.length&&(t||0===t)&&(i||0===i)&&(t!==i&&a._indicators[t].classList.remove("smart-active"),a._indicators[i].classList.add("smart-active"))}_handleItemClick(t){const i=this,a=t.target.closest(".smart-carousel-item");if(!(i.disabled||!a||"3d"!==i.displayMode||i.disableItemClick)){const t=parseInt(a.getAttribute("item-id")),n=parseInt(a.getAttribute("position"));3<Math.abs(n)||i._goToItem(t)}}_handleItemsState(t,i){const a=this;!a.disabled&&0!==a._items.length&&(t||0===t)&&(i||0===i)&&(t!==i&&(a._items[t].classList.remove("smart-active"),a._items[t].classList.add("smart-out")),a._items[i].classList.add("smart-active"))}_handleIndicatorsContainerClick(t){const i=this,a=t.target.closest(".smart-indicator"),n=i._currentIndex;if(!i.disabled&&a){const t=parseInt(a.getAttribute("indicator-id"));n===t||(i._goToItem(t),i._changeEvent(n,i._currentIndex))}}_handleMultipleMode(t){const a=this;if("multiple"!==a.displayMode)return;const i=a._items[t],n=i.offsetWidth,o=a.$.container.offsetWidth,l=a.$.itemsContainer.offsetWidth;let r=0;if(0===t)return void(a.$.itemsContainer.style.marginLeft="0px");if(t===a._items.length-1)return void(a.$.itemsContainer.style.marginLeft="-"+(l-o)+"px");for(let n=0;n<t;n++)r+=a._items[t].offsetWidth;r+n/2>=o/2&&r+n<l&&(a.$.itemsContainer.style.marginLeft="-"+(r+n/2-o/2)+"px")}_changeEvent(t,i){if(t!==i){const a=this;a.$.fireEvent("changing",{index:i,previousIndex:t}),a.hasAnimation||a.$.fireEvent("change",{index:i,previousIndex:t})}}_handleKeyDown(t){const i=this,a=t.key,n=i._currentIndex;!i.disabled&&i.keyboard&&-1!==["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","Home","End"," ","Enter"].indexOf(a)&&("ArrowLeft"===a||"ArrowDown"===a?i.prev():"ArrowUp"===a||"ArrowRight"===a?i.next():"Home"===a?i._goToItem(0):"End"===a?i._goToItem(i.dataSource.length-1):" "===a?i._rotate?i.pause():i.play():"Enter"===a?i.play():void 0,i._changeEvent(n,i._currentIndex))}_handleMouseWheel(t){const i=this,a=i._currentIndex;i.disabled||!i.wheel||document.activeElement!==i||(t.stopPropagation(),t.preventDefault(),0<t.deltaY?i.next():i.prev(),i._changeEvent(a,i._currentIndex))}_handleRotation(t){const i=this;t?i._rotationInterval=setInterval(function(){i.slideShow&&i.next()},i.interval):clearInterval(i._rotationInterval)}_handleSwipe(t){const i=this;i.disabled||!i.swipe||(t.stopPropagation(),t.preventDefault(),"swipeleft"===t.type?i.prev():i.next())}_generateIndicator(t){const i=this,a=document.createElement("span"),n=t?t:0;if(i.indicatorTemplate){const t=i._validateTemplate(i.indicatorTemplate);a.innerHTML=i._processItemTemplate(t.content,i.dataSource[n])}return a.classList.add("smart-indicator"),a.setAttribute("indicator-id",n),a}_generateIndicators(){const t=this,a=t.dataSource.length;let n=[],o=document.createDocumentFragment();for(let l=0;l<a;l++){const i=t._generateIndicator(l);n.push(i),o.appendChild(i)}t._indicators=n,t.$.indicatorsContainer.innerHTML="",t.$.indicatorsContainer.appendChild(o)}_generateItem(t){const i=this,a=document.createElement("div"),n=t?t:0;if(i.itemTemplate){const t=i._validateTemplate(i.itemTemplate);a.innerHTML=i._processItemTemplate(t.content,i.dataSource[n])}else{const t=i.dataSource[n];a.innerHTML=`<div class="smart-carousel-item-container" style="background-image:url('${t.image||""}')">
                        <h2 class="smart-carousel-item-label">${t.label||""}</h2>
                        <p class="smart-carousel-item-content">${t.content||""}</p>
                    </div>
                    <div class="smart-carousel-html-content">${t.HTMLcontent||""}</div>
                </div>`}return a.classList.add("smart-carousel-item"),a.setAttribute("item-id",n),a}_processItemTemplate(t,i){const a=/{{\w+}}/g,n=t.match(a);let o=t;return n&&0!==n.length?(n.forEach(function(t){const a=t.replace("{{","").replace("}}","");o=o.replace(t,i[a]||"")}),o):o}_generateItems(){const t=this,a=t.dataSource.length;let n=[],o=document.createDocumentFragment();for(let l=0;l<a;l++){const i=t._generateItem(l);n.push(i),o.appendChild(i)}t._items=n,t.$.itemsContainer.innerHTML="",t.$.itemsContainer.appendChild(o)}_goToItem(t,i){const a=this,n=a.dataSource.length,o=a._currentIndex;let l=t;0>t?l=0:t>n-1&&(l=n-1),a._removeFadeOut(),a._animationTrigger(),a._handleIndicatorsState(o,l),a._handleItemsState(o,l),a._currentIndex=l,i&&a._changeEvent(o,l),a._handle3dMode(l),a._handleMultipleMode(l),a._handleArrowsActiveState(l,o)}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);let i=0<t.tabIndex?t.tabIndex:0;t.setAttribute("tabindex",i),t.tabIndex=i}_setInitialState(){const t=this;t._currentIndex=0,t._indicators=[],t._items=[],t._rotate=!1,t._handleDefaultInnerHTML()}_validateTemplate(t){const i=this;let a="",n=!1,o=/{{\w+}}/g;return("function"==typeof t&&(a=t()),!("content"in document.createElement("template")))?(i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})),void(i.itemTemplate=null)):(t instanceof HTMLElement?a=t.innerHTML:(t=document.getElementById(t),a=t?t.innerHTML:""),o.exec(a)&&(n=!0),{content:a,hasBindings:n})}_handleTransitionEnd(t){if(t.target.classList.contains("smart-carousel-item")&&!t.target.getAttribute("position")){const i=this,a=t.target.getAttribute("item-id");i._lastTransitionEndId===a||(i._removeFadeOut(),this.$.fireEvent("change",{index:a,previousIndex:i._lastTransitionEndId}),i._lastTransitionEndId=a)}}_removeFadeOut(){const t=this,a=t.$.itemsContainer.getElementsByClassName("smart-out");if(a.length)for(let t=0;t<a.length;t++)a[t].classList.remove("smart-out")}}),Smart("smart-chip",class extends Smart.ContentElement{static get properties(){return{avatar:{value:null,type:"string?"},closeButton:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},value:{value:"",type:"string"}}}static get listeners(){return{click:"_clickHandler",keydown:"_keyDownHandler"}}static get styleUrls(){return["smart.chip.css"]}template(){return`<div id="container">
                    <span id="avatar" class ="smart-avatar">[[avatar]]</span><!--
                --><span id="value" class ="smart-value" inner-h-t-m-l="[[innerHTML]]"><content></content></span><!--
                --><span id="closeButton" class ="smart-close-button"></span>
            </div>`}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;"disabled"===t||"unfocusable"===t?n._setFocusable():"avatar"===t?n.itemTemplate?n._setAvatar(n._customAvatar):n._setAvatar(n.$.avatar):"itemTemplate"===t?n._applyTemplate():"value"===t?n.itemTemplate?n._applyTemplate():n.$.value.innerHTML=a||"":void 0}ready(){super.ready();const t=this;t.value=t.value?t.value:t.innerHTML,t._applyTemplate(),t._setFocusable()}close(){const t=this;t.$.fireEvent("close",{value:t.value}),t.parentElement.removeChild(t)}_applyTemplate(){const t=this;let i=t.itemTemplate;if(!i)return t.$.value.innerHTML=t.value,void t._setAvatar(t.$.avatar);if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(i instanceof HTMLTemplateElement||(i=document.getElementById(i)),null===i||!("content"in i))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase()}));let a=i.innerHTML;t.$.container.innerHTML=a.replace(/{{\s*value\s*}}/g,t.value),t._customAvatar=t.$.container.querySelector(".smart-avatar"),t._setAvatar(t._customAvatar)}_clickHandler(t){const i=this;if(!i.disabled){const a=i.enableShadowDOM?i.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.target;a.closest&&a.closest(".smart-close-button")&&i.close()}}_keyDownHandler(t){const i=this;let a=t.key;i.disabled||i.readonly||"Delete"!==a||i.close()}_setAvatar(t){if(t){const i=this,a=/\.(gif|jpg|jpeg|tiff|png)$/i.test(i.avatar);t.innerHTML=a?"<img src=\""+i.avatar+"\" />":i.avatar||""}}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}}),Smart("smart-date-time-picker",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarButton:{value:!1,type:"boolean"},calendarButtonPosition:{value:"right",allowedValues:["left","right"],type:"string"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},disableAutoNavigation:{value:!1,type:"boolean"},displayKind:{value:"unspecified",allowedValues:["UTC","local","unspecified"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownDisplayMode:{value:"default",allowedValues:["default","classic","calendar","timePicker","auto"],type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["auto","bottom","overlay-top","overlay-center","overlay-bottom","top","center-bottom","center-top"],type:"string"},editMode:{value:"default",allowedValues:["default","full","partial"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},firstDayOfWeek:{value:0,type:"number"},footerTemplate:{value:null,type:"any"},formatString:{value:"dd-MMM-yy HH:mm:ss.fff",type:"string"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},hint:{value:"",type:"string"},importantDates:{value:[],type:"array"},importantDatesTemplate:{value:null,type:"any"},interval:{value:new Smart.Utilities.TimeSpan(0,0,1),type:"any"},label:{value:"",type:"string"},max:{value:new Smart.Utilities.DateTime(3001,1,1),type:"any"},messages:{value:{en:{now:"Now",dateTabLabel:"DATE",timeTabLabel:"TIME"}},type:"object",extend:!0},min:{value:new Smart.Utilities.DateTime(1600,1,1),type:"any"},name:{value:"",type:"string"},nullable:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},placeholder:{value:"Enter date",type:"string"},renderMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},restrictedDates:{value:[],type:"array"},spinButtons:{value:!1,type:"boolean"},spinButtonsDelay:{value:75,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},spinButtonsPosition:{value:"right",allowedValues:["left","right"],type:"string"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},value:{defaultReflectToAttribute:!0,value:new Smart.Utilities.DateTime,type:"any"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number"},yearCutoff:{value:1926,type:"number"}}}static get listeners(){return{"container.mouseout":"_mouseoutHandler","container.mouseover":"_mouseoverHandler","calendarButton.click":"_calendarButtonClickHandler","calendarDropDown.change":"_calendarDropDownChangeHandler","downButton.click":"_spinButtonsClickHandler","input.blur":"_inputBlurHandler","input.change":"_inputChangeHandler","input.dragstart":"_inputDragstartHandler","input.focus":"_inputFocusHandler","input.keydown":"_inputKeydownHandler","input.down":"_inputMousedownHandler","input.paste":"_inputPasteHandler","input.select":"_inputSelectHandler","input.wheel":"_inputWheelHandler","dropDownContainer.keydown":"_dropDownKeydownHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","dropDownHeader.click":"_dropDownHeaderClickHandler","upButton.click":"_spinButtonsClickHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.DateTime":"smart.date.js","Smart.Utilities.Draw":"smart.draw.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.RepeatButton":"smart.button.js","Smart.Calendar":"smart.calendar.js","Smart.TimePicker":"smart.timepicker.js"}}static get styleUrls(){return["smart.button.css","smart.timepicker.css","smart.dropdown.css","smart.calendar.css","smart.datetimepicker.css"]}template(){return`<div id="container">
                    <span id="label" class="smart-label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <input id="input" class="smart-input smart-date-time-input" type="text" readonly="[[readonly]]" disabled="[[disabled]]" placeholder="[[placeholder]]" name="[[name]]">
                        <div id="spinButtonsContainer" class="smart-spin-buttons-container">
                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]" unfocusable id="upButton" class="smart-spin-button">
                                <div class="smart-arrow smart-arrow-up"></div>
                            </smart-repeat-button>
                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]" unfocusable id="downButton" class="smart-spin-button">
                                <div class="smart-arrow smart-arrow-down"></div>
                            </smart-repeat-button>
                        </div>
                        <div id="calendarButton" class="smart-drop-down-button smart-calendar-button"></div>
                        <div id="dropDownContainer" class="smart-drop-down smart-date-time-drop-down smart-visibility-hidden">
                            <div id="dropDownHeader" class="smart-drop-down-header smart-hidden">
                                <div id="selectDate" class="smart-selected"></div>
                                <div id="selectTime"></div>
                            </div>
                            <div id="dropDownContent" class="smart-drop-down-content">
                                <smart-calendar id="calendarDropDown" class="smart-hidden"
                                              animation="[[animation]]"
                                              animation-settings="[[animationSettings]]"
                                              calendar-mode="[[calendarMode]]"
                                              day-name-format="[[dayNameFormat]]"
                                              disable-auto-navigation="[[disableAutoNavigation]]"
                                              display-mode-view="[[displayModeView]]"
                                              first-day-of-week="[[firstDayOfWeek]]"
                                              header-template="[[headerTemplate]]"
                                              hide-day-names="[[hideDayNames]]"
                                              hide-other-month-days="[[hideOtherMonthDays]]"
                                              hide-tooltip-arrow="[[hideTooltipArrow]]"
                                              important-dates="[[importantDates]]"
                                              important-dates-template="[[importantDatesTemplate]]"
                                              locale="[[locale]]"
                                              selection-mode="one"
                                              spin-buttons-delay="[[spinButtonsDelay]]"
                                              spin-buttons-initial-delay="[[spinButtonsInitialDelay]]"
                                              theme="[[theme]]"
                                              tooltip="[[tooltip]]"
                                              tooltip-delay="[[tooltipDelay]]"
                                              tooltip-position="[[tooltipPosition]]"
                                              tooltip-template="[[tooltipTemplate]]"
                                              unfocusable="[[unfocusable]]"
                                              view-sections='["header", "footer"]'
                                              week-numbers="[[weekNumbers]]"
                                              weeks="[[weeks]]"></smart-calendar>
                            </div>
                        </div>
                    </div>
                    <span id="hint" class="smart-hint">[[hint]]</span>
                </div>`}attached(){const t=this;super.attached();t.isCompleted&&(t._defaultFooterTemplateApplied&&t._addCalendarFooterListeners(),t.$.timePickerDropDown&&t._addTimePickerListener(),t._positionDetection.dropDownAttached())}detached(){const t=this;if(super.detached(),t.close(),t._defaultFooterTemplateApplied){const i=t.$.calendarDropDown.$footer;i.unlisten("change"),i.unlisten("click"),i.unlisten("wheel")}t.$.timePickerDropDown&&t.$.timePickerDropDown.$.unlisten("change"),t._positionDetection.dropDownDetached()}ready(){super.ready();const t=this;t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t._edgeMacFF&&t.$dropDownContainer.addClass("not-in-view"),t._defaultFooterTemplate=document.createElement("template"),t._defaultFooterTemplate.innerHTML=`<div class="smart-date-time-picker-footer">
                <div class="smart-footer-component smart-footer-component-hour">
                    <input type="text" class="smart-hour-element" />
                    <span>
                        <smart-repeat-button initial-delay="0" delay="75">
                            <span class="smart-arrow smart-arrow-up"></span>
                        </smart-repeat-button>
                        <smart-repeat-button  initial-delay="0" delay="75">
                            <span class="smart-arrow smart-arrow-down"></span>
                        </smart-repeat-button>
                    </span>
                </div>
                <div class="smart-footer-component smart-footer-component-minute">
                    <input class="smart-minute-element" />
                    <span>
                        <smart-repeat-button initial-delay="0" delay="75">
                            <span class="smart-arrow smart-arrow-up"></span>
                        </smart-repeat-button>
                        <smart-repeat-button initial-delay="0" delay="75">
                            <span class="smart-arrow smart-arrow-down"></span>
                        </smart-repeat-button>
                    </span>
                </div>
                <div class="smart-footer-component smart-footer-component-ampm">
                    <input type="text" class="smart-am-pm-element" />
                </div>
                <div class="smart-footer-component smart-footer-component-today">
                    <div tabindex="-1" class="smart-today-element" title="Now"></div>
                </div>
            </div>`,t._codeToMethod={y:"addYears",yy:"addYears",yyyy:"addYears",yyyyy:"addYears",M:"addMonths",MM:"addMonths",MMM:"addMonths",MMMM:"addMonths",d:"addDays",dd:"addDays",ddd:"addDays",dddd:"addDays",H:"addHours",HH:"addHours",h:"addHours",hh:"addHours",m:"addMinutes",mm:"addMinutes",s:"addSeconds",ss:"addSeconds",f:"addDeciseconds",ff:"addCentiseconds",fff:"addMilliseconds",u:"addMicroseconds",uu:"addMicroseconds",n:"addNanoseconds",nn:"addNanoseconds",p:"addPicoseconds",pp:"addPicoseconds",e:"addFemtoseconds",ee:"addFemtoseconds",a:"addAttoseconds",aa:"addAttoseconds",x:"addZeptoseconds",xx:"addZeptoseconds",o:"addYoctoseconds",oo:"addYoctoseconds"},t._codeToIndex={y:0,yy:0,yyyy:0,yyyyy:0,M:1,MM:1,MMM:1,MMMM:1,d:2,dd:2,ddd:2,dddd:2,H:3,HH:3,h:3,hh:3,m:4,mm:4,s:5,ss:5,f:6,ff:6,fff:6,u:7,uu:7,n:8,nn:8,p:9,pp:9,e:10,ee:10,a:11,aa:11,x:12,xx:12,o:13,oo:13},t._getLocalizedNames(),t._validateInitialPropertyValues(),t._setFocusable(),t._positionDetection=new Smart.Utilities.PositionDetection(t,t.$.dropDownContainer,t.$.content,"close"),t._positionDetection.customPositionDropDown=t._positionExternalDropDown,t._positionDetection.getDropDownParent(!0),t._positionDetection.setDropDownPosition(),t._positionDetection.handleAutoPositioning(),t.$.dropDownContainer.setAttribute("animation",t.animation),t.$.dropDownContainer.setAttribute("drop-down-display-mode",t.dropDownDisplayMode)}close(){const t=this;t.opened&&t._close()}focus(){this.$.input.focus()}open(){const t=this;t.opened||t._open()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"animation":case"theme":n.$.timePickerDropDown&&(n.$.timePickerDropDown[t]=a),"animation"===t&&(n.$.dropDownContainer.setAttribute("animation",n.animation),n._defaultFooterTemplateApplied&&Array.from(n.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(t){t.animation=a}));break;case"calendarButton":n.$.dropDownContainer.style.transition="none",a||n.close();break;case"calendarButtonPosition":n.$.dropDownContainer.style.transition="none",n.close(),"left"===a?n.$.content.insertBefore(n.$.calendarButton,n.$.content.firstElementChild):null===n._dropDownParent?n.$.content.insertBefore(n.$.calendarButton,n.$.dropDownContainer):n.$.content.appendChild(n.$.calendarButton);break;case"disabled":a?(n.close(),n.$.upButton.disabled=!0,n.$.downButton.disabled=!0):n._disableSpinButtons(),n._setFocusable(),n._positionDetection.handleAutoPositioning();break;case"displayKind":{const t=n._outputTimeZone;if("unspecified"===a?n._outputTimeZone=n._inputTimeZone:"UTC"===a?n._outputTimeZone="UTC":"local"===a?n._outputTimeZone="Local":void 0,n._outputTimeZone===t)return;null!==n._value&&(n.close(),n._toSync=!0,n._value=n._value.toTimeZone(n._outputTimeZone),n._applyFormatString()),n.min=n.min.toTimeZone(n._outputTimeZone),n.max=n.max.toTimeZone(n._outputTimeZone);for(let t=0,i;t<n.restrictedDates.length;t++)i=n.restrictedDates[t],i=i.toTimeZone(n._outputTimeZone);break}case"dropDownAppendTo":n._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownDisplayMode":n._changeDropDownDisplayMode();break;case"dropDownOverlay":a||n._positionDetection.removeOverlay();break;case"dropDownPosition":n._positionDetection.dropDownPositionChangedHandler();break;case"footerTemplate":if(null!==a){n._defaultFooterTemplateApplied=!1;const t=n.$.calendarDropDown.$footer;t.unlisten("change"),t.unlisten("click"),t.unlisten("wheel"),n.$.calendarDropDown.footerTemplate=a}else{n._setDefaultFooterTemplate();const t=n._value;n._hourElement.value=t.toString("hh"),n._minuteElement.value=t.toString("mm"),n._ampmElement.value=t.toString("tt")}break;case"formatString":""===a&&(n.formatString="dd-MMM-yy HH:mm:ss.fff"),n._getFormatStringRegExp(),n._applyFormatString(),"auto"===n.dropDownDisplayMode&&n._changeDropDownDisplayMode();break;case"interval":n._validateInterval(i);break;case"locale":case"messages":if(n.$.selectDate.innerHTML=n.localize("dateTabLabel"),n.$.selectTime.innerHTML=n.localize("timeTabLabel"),n._defaultFooterTemplateApplied&&(n._todayElement.title=n.localize("now")),"messages"===t)return;n._getLocalizedNames(),n.min.calendar.days=n._localizedDays,n.min.calendar.months=n._localizedMonths,n.min.calendar.locale=n.locale,n.max.calendar.days=n._localizedDays,n.max.calendar.months=n._localizedMonths,n.max.calendar.locale=n.locale,null!==n.value&&(n._value.calendar.days=n._localizedDays,n._value.calendar.months=n._localizedMonths,n._value.calendar.locale=n.locale,n.value.calendar.days=n._localizedDays,n.value.calendar.months=n._localizedMonths,n.value.calendar.locale=n.locale),Smart.Utilities.DateTime.cache=[],n._applyFormatString();break;case"max":case"min":n._validateMinMax(t,i),n._validateValue();break;case"nullable":!0===i&&null===n._value&&n._validateValue(n._now(),null);break;case"opened":a?n._open():n._close();break;case"readonly":case"unfocusable":a&&n.close(),"unfocusable"===t&&n._setFocusable();break;case"restrictedDates":n._validateRestrictedDates(),n._validateValue();break;case"spinButtonsPosition":"right"===a?n.$.content.insertBefore(n.$.spinButtonsContainer,n.$.input.nextElementSibling):n.$.content.insertBefore(n.$.spinButtonsContainer,n.$.input);break;case"value":{let t;null===a?t=null:(t=Smart.Utilities.DateTime.validateDate(a,n._now(),n.formatString),t=t.toTimeZone(n._outputTimeZone)),n._validateValue(t,n._value);break}}}_addCalendarFooterListeners(){const t=this,i=t.$.calendarDropDown.$footer;i.listen("change",t._footerChangeHandler.bind(t)),i.listen("click",t._footerClickHandler.bind(t)),i.listen("wheel",t._footerWheelHandler.bind(t))}_addTimePickerListener(){const t=this;t.$.timePickerDropDown.$.listen("change",function(i){const a=t.context,n=i.detail.value,o=Smart.Utilities.DateTime.getConstructorParameters(null===t._value?t._now():t._value);t.context=t,o[3]=n.getHours(),o[4]=n.getMinutes(),t._timePickerInitiatedChange=!0,o.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,o))),t._timePickerInitiatedChange=!1,t.context=a})}_applyFormatString(){const t=this;null!==t.value&&(t.$.input.value=t._value.toString(t.formatString))}_calendarButtonMouseEnterHandler(){const t=this;t.$.calendarButton.setAttribute("hover","")}_calendarButtonMouseLeaveHandler(){const t=this;t.$.calendarButton.removeAttribute("hover")}_calendarButtonClickHandler(t){const i=this;i._highlightedTimePart=void 0;i.disabled||i.readonly||(i.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(i.$.calendarButton,t.pageX,t.pageY),i.opened?i._close():i._open())}_calendarDropDownChangeHandler(t){const i=this;if(t.stopPropagation(),i._disregardCalendarChangeEvent)return void(i._disregardCalendarChangeEvent=!1);if(0<this.$.calendarDropDown.selectedDates.length){const a=t.detail.value[0],n=null===i._value?i._now():i._value,o=Smart.Utilities.DateTime.getConstructorParameters(n);if(o[0]=a.getFullYear(),o[1]=a.getMonth()+1,o[2]=a.getDate(),i._calendarInitiatedChange=!0,o.unshift(null),i._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,o))),i._defaultFooterTemplateApplied){const t=i._value;""===i._hourElement.value&&(i._hourElement.value=t.toString("hh")),""===i._ampmElement.value&&(i._ampmElement.value=t.toString("tt")),""===i._minuteElement.value&&(i._minuteElement.value=t.toString("mm"))}i._calendarInitiatedChange=!1}else i._setNullValue()}_changeDropDownDisplayMode(){function t(t,a,n,o){i.$dropDownHeader[t]("smart-hidden"),i.$calendarDropDown[a]("smart-hidden"),i._timePickerInitialized&&i.$.timePickerDropDown.$[n]("smart-hidden"),o&&(i.opened?i.$.calendarDropDown._refreshTitle():i._toSync=!0)}const i=this,a=i._dropDownDisplayMode;i._detectDisplayMode();i._dropDownDisplayMode===a||("default"===i._dropDownDisplayMode?(i.$.calendarDropDown.viewSections=["title","header"],i.$selectDate.addClass("smart-selected"),i.$selectTime.removeClass("smart-selected"),t("removeClass","removeClass","addClass",!0)):"classic"===i._dropDownDisplayMode?(i.$.calendarDropDown.viewSections=["header","footer"],t("addClass","removeClass","addClass")):"calendar"===i._dropDownDisplayMode?(i.$.calendarDropDown.viewSections=["title","header"],t("addClass","removeClass","addClass",!0)):(t("addClass","addClass","removeClass"),!i._timePickerInitialized&&i._initializeTimePicker()),i.$.dropDownContainer.setAttribute("drop-down-display-mode",i.dropDownDisplayMode))}_cloneValue(){const t=this;return null===t._value?null:t._value.clone()}_close(){const t=this,i=t.$.fireEvent("closing");i.defaultPrevented?t.opened=!0:(t.$.calendarDropDown.disabled=!0,t.$calendarButton.removeClass("smart-calendar-button-pressed"),t.$.calendarButton.removeAttribute("active"),t.$dropDownContainer.addClass("smart-visibility-hidden"),t.opened=!1,t._positionDetection.removeOverlay(!0),t.$.fireEvent("close"),t._edgeMacFF&&!t.hasAnimation&&(t.$.dropDownContainer.style.top=null,t.$.dropDownContainer.style.left=null,t.$dropDownContainer.addClass("not-in-view")))}_detectDisplayMode(){const t=this;t._dropDownDisplayMode="auto"===t.dropDownDisplayMode?Smart.Utilities.DateTime.detectDisplayMode(t.value||t.min,t.formatString,t._formatStringRegExp):t.dropDownDisplayMode,"timePicker"===t._dropDownDisplayMode?(t.$calendarButton.addClass("time"),"Enter date"===t.placeholder&&(t.placeholder="Enter time")):(t.$calendarButton.removeClass("time"),"Enter time"===t.placeholder&&(t.placeholder="Enter date")),"default"===t._dropDownDisplayMode?t.$dropDownContent.removeClass("partial"):t.$dropDownContent.addClass("partial")}_disableSpinButtons(){const t=this;if(!t.disabled){const i=null===t._value;t.$.upButton.disabled=i,t.$.downButton.disabled=i}}_documentUpHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement||document.activeElement:document.activeElement,n=i.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;a===i.$.input&&"partial"===i.editMode&&null!==i._value&&(n!==i.$.input||i.$.input.selectionStart===i.$.input.selectionEnd)?(i._highlightedTimePartEdit=!1,i._validateValue(i.$.input.value,i._cloneValue(),!1),i._highlightTimePartBasedOnCursor()):n!==i.$.calendarButton&&!i.$.dropDownContainer.contains(n)&&!i.$.dropDownContainer.contains(i._getRootShadowHost(n))&&(i.close(),a!==i.$.input&&!i.contains(n)&&(i._highlightedTimePart=void 0)),i._mouseFocus=!1}_getRootShadowHost(t){const i=this;if(!i.enableShadowDOM)return;let a=t.getRootNode().host,n;for(;a&&a!==i&&a!==document;)n=a,a=a.getRootNode().host;return n}_dropDownHeaderClickHandler(t){const i=this;if(t.target===i.$.selectDate){if(i.$selectDate.hasClass("smart-selected"))return;i.$selectDate.addClass("smart-selected"),i.$selectTime.removeClass("smart-selected"),i.$.timePickerDropDown.$.addClass("smart-hidden"),i.$calendarDropDown.removeClass("smart-hidden")}else{if(i.$selectTime.hasClass("smart-selected"))return;i.$selectDate.removeClass("smart-selected"),i.$selectTime.addClass("smart-selected"),i.$calendarDropDown.addClass("smart-hidden"),i._timePickerInitialized?i.$.timePickerDropDown.$.removeClass("smart-hidden"):i._initializeTimePicker()}}_dropDownKeydownHandler(t){const i=this,a=t.key,n=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;i.$.dropDownHeader.contains(n)&&("Enter"===a||" "===a)?(t.preventDefault(),i._dropDownHeaderClickHandler({target:n})):"Escape"===a||t.altKey&&"ArrowUp"===a?(t.preventDefault(),i.close(),i.$.input.focus()):("Enter"===a||" "===a)&&n.classList.contains("smart-footer-component-today")&&(t.preventDefault(),i._validateValue(i._now()))}_dropDownTransitionendHandler(){const t=this;t._edgeMacFF&&!t.opened&&t.hasAnimation&&(t.$.dropDownContainer.style.top=null,t.$.dropDownContainer.style.left=null,t.$dropDownContainer.addClass("not-in-view"))}_footerChangeHandler(t){const i=this,a=i.context,n=t.target,o=null===i._value?i._now():i._value;let l=n.value,r;if(i.context=i,t.stopPropagation(),n.classList.contains("smart-hour-element")){if(l=parseInt(l,10),isNaN(l)||0>l||12<l)return void(n.value=o.toString("hh"));0<l&&12>l&&"PM"===o.toString("tt")&&(l+=12),r="hh"}else if(n.classList.contains("smart-minute-element")){if(l=parseInt(l,10),isNaN(l)||0>l||59<l)return void(n.value=o.toString("mm"));r="mm"}else{if(null===i._value)return void(n.value="");const t=o.toString("tt");return l=l.toLowerCase(),void("PM"===t&&("a"===l||"am"===l)||"AM"===t&&("p"===l||"pm"===l)?(i._incrementDecrement(void 0,"tt"),n.value=i._value.toString("tt")):n.value=t)}const s=Smart.Utilities.DateTime.getConstructorParameters(o);s[i._codeToIndex[r]]=l,s.unshift(null),i._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,s))),n.value=i._value.toString(r),i.context=a}_footerClickHandler(t){const i=this,a=i.context,n=t.target;if(i.context=i,n.classList.contains("smart-today-element"))i._validateValue(i._now());else{const t=n.closest("smart-repeat-button");if(null!==t){const a=t===t.parentElement.children[1],n=t.closest(".smart-footer-component").classList.contains("smart-footer-component-hour")?"hh":"mm";i._incrementDecrement(a,n)}}i.context=a}_footerWheelHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;if(i.enableMouseWheelAction&&t.target instanceof HTMLInputElement&&a===t.target){const a=i.context,n=t.target;i.context=i,n.classList.contains("smart-hour-element")?i._incrementDecrement(0<t.deltaY,"hh"):n.classList.contains("smart-minute-element")?i._incrementDecrement(0<t.deltaY,"mm"):i._incrementDecrement(void 0,"tt"),i.context=a,t.stopPropagation()}}_getAndHighlightTimePart(t,i,a){const n=this;n._programmaticSelection=!0,n.$.input.selectionStart!==t||n.$.input.selectionEnd!==i?n.$.input.setSelectionRange(t,i):setTimeout(function(){n.$.input.setSelectionRange(t,i)},200),n._highlightedTimePart={code:n._formatStringRegExp.groups[a],index:a,from:t,to:i}}_getFormatStringRegExp(){const t=this;t._formatStringRegExp=t.min.getParseRegExp(t.min.calendar,t.formatString.replace(/y+/g,"yyyyy")),t._formatStringRegExp.regExp=new RegExp(t._formatStringRegExp.regExp)}_getLocalizedNames(){const t=this,i=Smart.Utilities.DateTime.getLocalizedNames(t.locale);t._localizedDays=i.days,t._localizedMonths=i.months,t.$.selectDate.innerHTML=t.localize("dateTabLabel"),t.$.selectTime.innerHTML=t.localize("timeTabLabel")}_handleManualTimePartEdit(t){const i=this,a=Smart.Utilities.DateTime.getConstructorParameters(i._value);if(t=t[i._highlightedTimePart.index+1],!isNaN(t)){if("f"===i._highlightedTimePart.code)t=100*parseInt(t,10);else if("ff"===i._highlightedTimePart.code)t=10*parseInt(t,10);else if(-1!==i._highlightedTimePart.code.indexOf("y")&&3>t.length){const a=i.yearCutoff.toString(),n=parseInt(a.slice(2),10);let o=parseInt(a.slice(0,2),10);t=parseInt(t,10),t<n&&o++,t=t.toString(),t=o+""+"0".repeat(2-t.length)+t}else if(-1!==i._highlightedTimePart.code.indexOf("h")){const a=i._value.hour();t=parseInt(t,10),11<a&&11>=t&&(t+=12)}a[i._codeToIndex[i._highlightedTimePart.code]]=parseInt(t,10)}else if(1===i._codeToIndex[i._highlightedTimePart.code]){let n=-1;if(1<t.length&&i._localizedMonths.names.some(function(a,o){if(-1!==a.toLowerCase().indexOf(t.toLowerCase()))return n=o,!0}),-1!==n)a[1]=n+1;else return void i._applyFormatString()}try{a.unshift(null),i._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,a)))}catch(t){i._applyFormatString()}}_highlightTimePartBasedOnCursor(t){const a=this,n=a.$.input.value,o=a._formatStringRegExp.regExp.exec(n);if(null===o)return void(a._highlightedTimePart=void 0);let l=o.index,r;t===void 0&&(t=a.$.input.selectionStart);for(let s=1;s<o.length;s++){const i=o[s];if(r=n.indexOf(i,l),l=r+i.length,1==s&&t<r){a._getAndHighlightTimePart(r,l,0);break}if(t>=r&&t<=l){a._getAndHighlightTimePart(r,l,s-1);break}const d=o[s+1];if(d){const i=n.indexOf(d,l);if(t>l&&t<i){t-l<=i-t?a._getAndHighlightTimePart(r,l,s-1):(a._formatStringRegExp.groups[s],a._programmaticSelection=!0,a.$.input.setSelectionRange(i,i+d.length));break}}else{a._programmaticSelection=!0,a.$.input.setSelectionRange(r,l),a._highlightedTimePart={code:a._formatStringRegExp.groups[s-1],index:s-1,from:r,to:l};break}}}_highlightTimePartBasedOnIndex(t){const i=this,a=i.$.input.value,n=i._formatStringRegExp.regExp.exec(a);if(null===n)return i._validateValue(void 0,i._cloneValue(),!1),void i._highlightTimePartBasedOnIndex(t);let o=n.index,l;const r=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;if(!(0>t||t>=n.length)){i.$.input!==r&&i.$.input.focus();for(let r=1;r<n.length;r++){const s=n[r];if(l=a.indexOf(s,o),o=l+s.length,t===r-1){i._getAndHighlightTimePart(l,o,t);break}}}}_incrementDecrement(t,i){const a=this,n=a._cloneValue();if(void 0===i&&a._highlightedTimePart&&(i=a._highlightedTimePart.code),void 0!==i){if("z"===i||"zz"===i||"zzz"===i)return void a._highlightTimePartBasedOnIndex(a._highlightedTimePart.index);a._value="t"===i||"tt"===i?a._value.addHours(12>a._value.hour()?12:-12,!0):a._value[a._codeToMethod[i]](t?-1:1,!0),a._validateValue(void 0,n,!1),a._highlightedTimePart&&a._highlightTimePartBasedOnIndex(a._highlightedTimePart.index)}else a._value=a._value.add(t?a.interval.negate():a.interval,void 0,!0),a._validateValue(void 0,n,!1);0!==n.compare(a._value)&&a.$.fireEvent("change",{oldValue:n.toTimeZone(a._inputTimeZone),value:a.value})}_initializeTimePicker(){const t=this,i=document.createElement("smart-time-picker");i.animation=t.animation,i.theme=t.theme,i.value=null===t._value?t._now():t._value.toDate(),t.$.timePickerDropDown=i,i.$=Smart.Utilities.Extend(i),t.$.dropDownContent.appendChild(i),t._timePickerInitialized=!0,t._addTimePickerListener()}_inputBlurHandler(){const t=this;t.removeAttribute("focus"),t._fullEdit=!1,t._highlightedTimePartEdit=!1}_inputChangeHandler(t){const i=this;if(t&&t.stopPropagation(),""===i.$.input.value)return void i._setNullValue();if(i._fullEdit||null===i._value)i._fullEdit=!1,i._validateValue(i.$.input.value),i._highlightTimePartBasedOnCursor();else if(i._highlightedTimePartEdit){i._highlightedTimePartEdit=!1;let t=i._formatStringRegExp.regExp.exec(i.$.input.value);null===t?i._applyFormatString():i._handleManualTimePartEdit(t)}}_inputDragstartHandler(t){t.preventDefault()}_inputFocusHandler(){const t=this;t.setAttribute("focus",""),"full"!==t.editMode&&setTimeout(function(){!0!==t._mouseFocus&&(t._highlightedTimePart===void 0?t._highlightTimePartBasedOnCursor(0):t._highlightTimePartBasedOnIndex(t._highlightedTimePart.index))},0)}_inputKeydownHandler(t){const i=this,a=i.editMode,n=t.key;if("Tab"!==n){if(t.altKey&&"ArrowDown"===n)return t.preventDefault(),void i.open();if("Escape"===n||t.altKey&&"ArrowUp"===n)return t.preventDefault(),void i.close();if("full"===a)return void(i._fullEdit=!0);if("partial"===a){if("Delete"===n)return void(null!==i._value&&(i._setNullValue(),t.preventDefault()));if(null===i._value&&(i._validateValue(i._now(),null,!1),i._highlightTimePartBasedOnIndex(0)),-1!==["/",".","-",","," "].indexOf(n))return i._inputChangeHandler(),i._navigateToNextTimePart(),void t.preventDefault();if("Backspace"===n)return i._resetTimePart(),0<i._highlightedTimePart.index?i._navigateToPreviousTimePart():i._highlightTimePartBasedOnIndex(0),void t.preventDefault()}else if(i._fullEdit||i._highlightedTimePartEdit||i.readonly||-1!==["Alt","Control","Shift"].indexOf(n)||t.altKey||t.ctrlKey)return;if(-1===["End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].indexOf(n)){if(i._highlightedTimePart){if("partial"!==a&&i._highlightedTimePart.to-i._highlightedTimePart.from!=i.$.input.selectionEnd-i.$.input.selectionStart)return void(i._fullEdit=!0);const o=i._highlightedTimePart.code;if("ddd"===o||"dddd"===o||"z"===o||"zz"===o||"zzz"===o||"t"===o||"tt"===o)return void t.preventDefault();if("partial"===a&&"MMM"!==o&&"MMMM"!==o&&!1===new RegExp(/^\d+$/).test(n))return void((2>n.length||"F"!==n.charAt(0))&&t.preventDefault());i._highlightedTimePartEdit=!0}return}(t.preventDefault(),"partial"===a&&i._highlightedTimePartEdit&&i._inputChangeHandler(),null===i._value)||("End"===n?i._highlightTimePartBasedOnIndex(i._formatStringRegExp.groups.length-1):"Home"===n?i._highlightTimePartBasedOnIndex(0):"ArrowLeft"===n?i._navigateToPreviousTimePart():"ArrowUp"===n?i._incrementDecrement():"ArrowRight"===n?i._navigateToNextTimePart():"ArrowDown"===n?i._incrementDecrement(!0):void 0)}}_inputMousedownHandler(){const t=this;t._fullEdit||t._highlightedTimePartEdit||"full"===t.editMode||setTimeout(function(){t._mouseFocus=!0,t._highlightTimePartBasedOnCursor()},0)}_inputPasteHandler(t){const i=this;"partial"===i.editMode?t.preventDefault():this._fullEdit=!0}_inputSelectHandler(){const t=this,i=t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement;"partial"!==t.editMode||i!==t.$.input||(!0===t._programmaticSelection?t._programmaticSelection=!1:t._highlightedTimePart?t._highlightTimePartBasedOnIndex(t._highlightedTimePart.index):t._highlightTimePartBasedOnIndex(0))}_inputWheelHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;a!==i.$.input||!i.enableMouseWheelAction||i.disabled||i.readonly||(t.preventDefault(),i._incrementDecrement(0<t.deltaY))}_isRestricted(t){const a=this.restrictedDates;let i=!1;for(let n=0;n<a.length;n++)if(t.equalDateParts(a[n])){i=!0;break}return i}_mouseoutHandler(t){const i=this,a=t.target;i.disabled||a!==i.$.input&&a!==i.$.calendarButton||(a.removeAttribute("hover"),i.removeAttribute("hover"))}_mouseoverHandler(t){const i=this,a=t.target;i.disabled||a!==i.$.input&&a!==i.$.calendarButton||(a.setAttribute("hover",""),i.setAttribute("hover",""))}_navigateToNextTimePart(){const t=this;t._highlightTimePartBasedOnIndex(t._highlightedTimePart.index+1)}_navigateToPreviousTimePart(){const t=this;t._highlightTimePartBasedOnIndex(t._highlightedTimePart.index-1)}_now(){const t=this,i=new Smart.Utilities.DateTime("today","Local");return"Local"===t._outputTimeZone?i:i.toTimeZone(t._outputTimeZone)}_open(){const t=this;if(t.disabled||t.readonly)return void(t.opened=!1);const i=t.$.fireEvent("opening");if(i.defaultPrevented)return void(t.opened=!1);if(t._edgeMacFF&&t.$dropDownContainer.removeClass("not-in-view"),t.$.dropDownContainer.style.transition="",t.$.calendarDropDown.disabled=!1,t.$calendarButton.addClass("smart-calendar-button-pressed"),t.$.calendarButton.setAttribute("active",""),("default"!==t._dropDownDisplayMode&&"timePicker"!==t._dropDownDisplayMode||!t._timePickerInitialized||t._timePickerInitialized&&t.$.timePickerDropDown.$.hasClass("smart-hidden"))&&t.$calendarDropDown.removeClass("smart-hidden"),t.opened=!0,t._positionDetection.placeOverlay(),t._positionDetection.checkBrowserBounds("vertically"),t._positionDetection.positionDropDown(),t._positionDetection.checkBrowserBounds("horizontally"),t.$dropDownContainer.removeClass("smart-visibility-hidden"),t.$.fireEvent("open"),t._toSync){const i=t._value;if(null!==i)t._disregardCalendarChangeEvent=!0,t.$.calendarDropDown.selectedDates=[i.toDate()],t._defaultFooterTemplateApplied&&(t._hourElement.value=i.toString("hh"),t._minuteElement.value=i.toString("mm"),t._ampmElement.value=i.toString("tt")),t._timePickerInitialized&&(t.$.timePickerDropDown.value=i.toDate());else{const i=t.$.calendarDropDown.context;t.$.calendarDropDown.context=t.$.calendarDropDown,t.$.calendarDropDown._clearSelection(!0),t.$.calendarDropDown.context=i,t._defaultFooterTemplateApplied&&(t._hourElement.value="",t._minuteElement.value="",t._ampmElement.value="")}t._toSync=!1}switch(t._dropDownDisplayMode){case"default":t.$.selectDate.focus();break;case"classic":case"calendar":t.$.calendarDropDown.focus();break;case"timePicker":t.$.timePickerDropDown.$.picker.focus();}}_positionExternalDropDown(t){const i=this.context,a=!i.calendarButton||"right"===i.calendarButtonPosition,n=i._dropDownListPosition,o=i.$.dropDownContainer;let l=a?t.right-o.offsetWidth:t.left,r;return"bottom"===n?r=t.bottom:"overlay-top"===n?r=t.bottom-o.offsetHeight:"overlay-center"===n?r=t.top+t.height/2-o.offsetHeight/2:"overlay-bottom"===n?r=t.top:"top"===n?r=t.top-o.offsetHeight:"center-bottom"===n||"center-top"===n?(r="center-bottom"===n?t.bottom+5:t.top-5-o.offsetHeight,l=a?t.right-o.offsetWidth/2-i.$.calendarButton.offsetWidth/2:t.left-o.offsetWidth/2+i.$.calendarButton.offsetWidth/2):void 0,{left:l,top:r}}_rangeValidation(t){const i=this;return-1===t.compare(i.min)?i.min.clone():1===t.compare(i.max)?i.max.clone():t}_resetTimePart(){const t=this,i=t._highlightedTimePart.code,a=t._codeToIndex[i],n=Smart.Utilities.DateTime.getConstructorParameters(t._value);let o;o=2<a?0:0<a?1:t.min.year(),n[a]=o,n.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,n)))}_setDefaultFooterTemplate(t){const i=this;i.$.calendarDropDown.footerTemplate=i._defaultFooterTemplate,t&&i.$.calendarDropDown._handleLayoutTemplate(i.$.calendarDropDown.$.footer,i._defaultFooterTemplate),i._hourElement=i.$.calendarDropDown.getElementsByClassName("smart-hour-element")[0],i._minuteElement=i.$.calendarDropDown.getElementsByClassName("smart-minute-element")[0],i._ampmElement=i.$.calendarDropDown.getElementsByClassName("smart-am-pm-element")[0],i._todayElement=i.$.calendarDropDown.getElementsByClassName("smart-today-element")[0],i._todayElement.title=i.localize("now"),Array.from(i.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(t){t.animation=i.animation}),i._addCalendarFooterListeners(),i._defaultFooterTemplateApplied=!0}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.$.input.tabIndex=-1,t.$.selectDate.removeAttribute("tabindex"),t.$.selectTime.removeAttribute("tabindex"),void(t._defaultFooterTemplateApplied&&(t._hourElement.tabIndex=-1,t._ampmElement.tabIndex=-1,t._minuteElement.tabIndex=-1));const i=0<t.tabIndex?t.tabIndex:0;t.$.input.removeAttribute("tabindex"),t.$.selectDate.tabIndex=i,t.$.selectTime.tabIndex=i,t._defaultFooterTemplateApplied&&(t._hourElement.removeAttribute("tabindex"),t._ampmElement.removeAttribute("tabindex"),t._minuteElement.removeAttribute("tabindex"),t.$.calendarDropDown.getElementsByClassName("smart-footer-component-today")[0].tabIndex=i)}_setNullValue(t){const i=this;if(void 0===t&&(t=i._cloneValue()),i.nullable){if(i._value=null,i.value=null,i._highlightedTimePart=void 0,i.$.input.value="",null!==t){if(i.opened){if(!i._calendarInitiatedChange){const t=i.$.calendarDropDown.context;i.$.calendarDropDown.context=i.$.calendarDropDown,i.$.calendarDropDown._clearSelection(!0),i.$.calendarDropDown.context=t}i._defaultFooterTemplateApplied&&(i._hourElement.value="",i._ampmElement.value="",i._minuteElement.value=""),i._toSync=!1}else i._toSync=!0;i.$.fireEvent("change",{oldValue:t.toTimeZone(i._inputTimeZone),value:null})}i._disableSpinButtons()}else i._validateValue(i._now(),t)}_spinButtonsClickHandler(t){const i=this;null===i._value||i.disabled||i.readonly||i._incrementDecrement(!(t.target!==i.$.downButton))}_validateInitialPropertyValues(){const t=this,i=t.$.calendarDropDown;"left"===t.calendarButtonPosition&&t.$.content.insertBefore(t.$.calendarButton,t.$.input),"left"===t.spinButtonsPosition&&t.$.content.insertBefore(t.$.spinButtonsContainer,t.$.input),t.disabled&&(t.$.upButton.disabled=!0,t.$.downButton.disabled=!0),t.opened&&(t.disabled||t.readonly?t.opened=!1:(i.disabled=!1,t.$calendarButton.addClass("smart-calendar-button-pressed"),t.$.calendarButton.setAttribute("active",""),t.$calendarDropDown.removeClass("smart-hidden"),t.$dropDownContainer.removeClass("smart-visibility-hidden"))),null===t.footerTemplate?t._setDefaultFooterTemplate(!0):(i.footerTemplate=t.footerTemplate,i._handleLayoutTemplate(i.$.footer,t.footerTemplate)),""===t.formatString&&(t.formatString="dd-MMM-yy HH:mm:ss.fff");const a=t.displayKind;"UTC"===a?t._outputTimeZone="UTC":"local"===a&&(t._outputTimeZone="Local");let n;if(null===t.value?(n=null,t._inputTimeZone="Local"):(n=Smart.Utilities.DateTime.validateDate(t.value,new Smart.Utilities.DateTime,t.formatString),t._inputTimeZone=n.timeZone,"unspecified"!==a&&t._inputTimeZone!==t._outputTimeZone?n=n.toTimeZone(t._outputTimeZone):"unspecified"===a&&(t._outputTimeZone=t._inputTimeZone)),t._validateRestrictedDates(),t._validateMinMax("both"),t._validateValue(n,t._now(),!1),t._validateInterval(new Smart.Utilities.TimeSpan(0,0,1)),t._getFormatStringRegExp(),t._defaultFooterTemplateApplied&&""===t._hourElement.value&&null!==t.value){const i=t.value;t._hourElement.value=i.toString("hh"),t._ampmElement.value=i.toString("tt"),t._minuteElement.value=i.toString("mm")}t._detectDisplayMode();const o=t._dropDownDisplayMode;"default"===o||"calendar"===o?(i.viewSections=["title","header"],i.$title.hasClass("smart-hidden")&&i.propertyChangedHandler("viewSections",["header","footer"],["title","header"]),"default"===o&&t.$dropDownHeader.removeClass("smart-hidden")):"timePicker"===o&&(t.$calendarDropDown.addClass("smart-hidden"),t._initializeTimePicker())}_validateInterval(t){const i=this,a=i.interval;let n=a;if(a instanceof Smart.Utilities.TimeSpan)n=a;else if("string"==typeof a){const o=a.indexOf("TimeSpan("),l=a.indexOf(")");if(-1!==o&&-1!==l&&(n=a.slice(o+9,l),n=n.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),new RegExp(/(^(\d+)(,\s*\d+)*$)/g).test(n)&&(n=n.replace(/\s/g,""),n=n.split(","),n.map(function(t,i){n[i]=parseInt(t)}),n.unshift(null),n=new(Function.prototype.bind.apply(Smart.Utilities.TimeSpan,n)))),!1==n instanceof Smart.Utilities.TimeSpan){if(""===n.trim())return void(i.interval=t);isNaN(n)||(n=1e4*parseInt(n,10));try{n=new Smart.Utilities.TimeSpan(n)}catch(a){return void(i.interval=t)}}}else if("number"==typeof a)n=new Smart.Utilities.TimeSpan(a);else return void(i.interval=t);i.interval=0===n._ticks?t:n}_validateMinMax(t,i){const a=this;let n=!1;"max"!==t&&(a.min=Smart.Utilities.DateTime.validateDate(a.min,i||new Smart.Utilities.DateTime(1600,1,1),a.formatString),a.min=a.min.toTimeZone(a._outputTimeZone),n=!0),"min"!==t&&(a.max=Smart.Utilities.DateTime.validateDate(a.max,i||new Smart.Utilities.DateTime(3001,1,1),a.formatString),a.max=a.max.toTimeZone(a._outputTimeZone),a.max.calendar.days=a._localizedDays,a.max.calendar.months=a._localizedMonths,a.max.calendar.locale=a.locale,a.$.calendarDropDown.max=a.max.toDate()),0<a.min.compare(a.max)&&(a.min=a.max.clone(),n=!0),n&&(a.min.calendar.days=a._localizedDays,a.min.calendar.months=a._localizedMonths,a.min.calendar.locale=a.locale,a.$.calendarDropDown.min=a.min.toDate())}_validateRestrictedDates(){const t=this,a=[],n=[];for(let o=0;o<t.restrictedDates.length;o++){const i=t.restrictedDates[o];let l=Smart.Utilities.DateTime.validateDate(i,"invalid",t.formatString);"invalid"!==l&&(l=l.toTimeZone(t._outputTimeZone),a.push(l),n.push(l.toDate()))}t.restrictedDates=a,t.$.calendarDropDown.restrictedDates=n}_validateValue(t,i,a){const n=this,o=void 0===i?n._cloneValue():i;if(null===t||""===t)return void n._setNullValue(o);if(void 0!==t&&(n._value=Smart.Utilities.DateTime.validateDate(t,o,n.formatString)),null===n._value)return void n._setNullValue(o);let l=n._value;for(;!0===n._isRestricted(l);)l.addDays(1,!1);n._value=n._rangeValidation(l),n.value=n._value.toTimeZone(n._inputTimeZone);const r=n._value;if(r.calendar.days=n._localizedDays,r.calendar.months=n._localizedMonths,r.calendar.locale=n.locale,n._applyFormatString(),n._disableSpinButtons(),(null===o||null===r)&&o!==r||null!==o&&null!==r&&0!==o.compare(r)){if(!1!==a&&n.$.fireEvent("change",{oldValue:null===o?null:o.toTimeZone(n._inputTimeZone),value:n.value}),n._calendarInitiatedChange)return;n.opened?((null===o||0===n.$.calendarDropDown.selectedDates.length||o.year()!==r.year()||o.month()!==r.month()||o.day()!==r.day()||!n.$.calendarDropDown._isDateInView(r.toDate()))&&(n._disregardCalendarChangeEvent=!0,n.$.calendarDropDown.selectedDates=[r.toDate()]),n._defaultFooterTemplateApplied&&((null===o||o.hour()!==r.hour())&&(n._hourElement.value=r.toString("hh"),n._ampmElement.value=r.toString("tt")),(null===o||o.minute()!==r.minute())&&(n._minuteElement.value=r.toString("mm"))),n._timePickerInitialized&&!n._timePickerInitiatedChange&&(n.$.timePickerDropDown.value=r.toDate()),n._toSync=!1):n._toSync=!0}}}),Smart.Utilities.Assign("FilterGroup",class FilterGroup{constructor(){const t=this;t.stringConditions=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],t.numericConditions=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],t.dateConditions=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],t.booleanConditions=["EQUAL","NOT_EQUAL","NULL","NOT_NULL"],t.filters=[],t.logicalOperators=[]}evaluate(t){const a=this;let n=!0;for(let o=0,i;o<a.filters.length;o++)i=a.filters[o].evaluate(t),n=0==o?i:1===a.logicalOperators[o]||"or"===a.logicalOperators[o]?n||i:n&&i;return n}getFiltersCount(){return this.filters.length}setConditions(t,i){const a=this;"numeric"===t?a.numericConditions=i:"string"===t?a.stringConditions=i:"date"===t||"time"===t?a.dateConditions=i:"bool"===t||"boolean"===t?a.booleanConditions=i:void 0}getConditions(t){const i=this;let a=[];return"numeric"===t?a=i.numericConditions.slice(0):"string"===t?a=i.stringConditions.slice(0):"date"===t||"time"===t?a=i.dateConditions.slice(0):"bool"===t||"boolean"===t?a=i.booleanConditions.slice(0):void 0,a}generateFilterKey(){const t=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return t()+"-"+t()+"-"+t()}createFilter(t,i,a,n,o,l,r){if(null===t||t===void 0)return null;switch(t){case"int":case"float":case"int64":case"double":case"numeric":case"number":case"numericFilter":return new Smart.Utilities.NumericFilter(i,a.toUpperCase());case"string":case"stringFilter":return new Smart.Utilities.StringFilter(i,a.toUpperCase(),l);case"date":case"time":case"dateFilter":return new Smart.Utilities.DateFilter(i,a.toUpperCase(),o,l,r);case"bool":case"boolean":case"booleanFilter":return new Smart.Utilities.BooleanFilter(i,a.toUpperCase());case"custom":return new Smart.Utilities.CustomFilter(i,a.toUpperCase(),n);}throw new Error("smartGrid: There is no such filter type. The available filter types are: \"numericFilter\", \"stringFilter\", \"dateFilter\" and \"booleanFilter\"")}getFilters(){const t=this;let a=[];for(let n=0;n<t.filters.length;n++){const i=t.filters[n];if(i instanceof FilterGroup){let o=i.getFilters();a.push({value:o,logicalOperator:t.logicalOperators[n],type:"FilterGroup"})}else{const o={value:i.value,condition:i.condition,logicalOperator:t.logicalOperators[n],type:i.type};i.data&&(o.id=i.data),a.push(o)}}return a}addFilter(t,i){const a=this;a.filters[a.filters.length]=i,i.key=a.generateFilterKey(),a.logicalOperators[a.logicalOperators.length]=t}removeFilter(t){const a=this;for(let n=0;n<a.filters.length;n++)if(a.filters[n].key===t.key){a.filters.splice(n,1),a.logicalOperators.splice(n,1);break}}getOperatorAt(t){const i=this;return void 0===t||null===t?null:0>t||t>i.filters.length?null:i.logicalOperators[t]}setOperatorAt(t,i){const a=this;return void 0===t||null===t?null:0>t||t>a.filters.length?null:void(a.logicalOperators[i]=i)}getFilterAt(t){const i=this;return void 0===t||null===t?null:0>t||t>i.filters.length?null:i.filters[t]}setFilterAt(t,i){const a=this;return void 0===t||null===t?null:0>t||t>a.filters.length?null:void(i.key=a.generateFilterKey(),a.filters[t]=i)}clear(){const t=this;t.filters=[],t.logicalOperators=[]}getUniqueValues(t,i){const a=t.data,n=[],o=[],l="dateFilter"===t.filterType&&"timePicker"===t.displayMode;let r=!1,s;for(let s=0,d;s<a.length;s++){if(d=a[s][t.dataField],""===d||null===d||void 0===d){r=!0;continue}let i;i=l?new Smart.Utilities.DateTime(d).toString(t.formatString):d.toString(),-1===n.indexOf(i)&&(n.push(i),o.push({label:i,value:d,customAttribute:"default-item"}))}switch(t.filterType){case"numericFilter":case"booleanFilter":s=function(t,i){return t.value-i.value};break;case"stringFilter":s=function(t,i){return new Intl.Collator().compare(t.value,i.value)};break;case"dateFilter":s=l?function(t,i){try{const a=t.value.getHours(),n=i.value.getHours();if(a!==n)return a-n;const o=t.value.getMinutes(),l=i.value.getMinutes();if(o!==l)return o-l;const r=t.value.getSeconds(),s=i.value.getSeconds();return r===s?0:r-s}catch(t){return-1}}:function(t,i){try{return t.value.getTime()-i.value.getTime()}catch(t){return-1}};}return o.sort(s),"booleanFilter"===t.filterType&&o.map(function(t){t.label=t.label.toUpperCase()}),r&&o.push({label:i.localize("blanks"),value:"",customAttribute:"default-item"}),o}}),Smart.Utilities.Assign("StringFilter",class{constructor(t,i,a){const n=this;n.value=t,n.condition=i,n.locale=a||"en",n.type="stringFilter"}evaluate(t){const i=this,a=i.value,n=i.condition;if(null===t||t===void 0||""===t){if("NULL"===n)return!0;if("EQUAL"===n&&t===a)return!0;if("NOT_EQUAL"===n&&t!==a)return!0;if("EMPTY"!==n)return!1;if(""===t)return!0}let o="";try{o=t.toString()}catch(t){return!0}const l=function(t,a){const o=i.locale;return"EQUAL"===n?0===t.localeCompare(a,o,{sensitivity:"accent"}):"EQUAL_CASE_SENSITIVE"===n?0===t.localeCompare(a,o,{sensitivity:"variant"}):"NOT_EQUAL"===n?0!==t.localeCompare(a,o,{sensitivity:"accent"}):"NOT_EQUAL_CASE_SENSITIVE"===n?0!==t.localeCompare(a,o,{sensitivity:"variant"}):"CONTAINS"===n?-1!==t.toLowerCase().indexOf(a.toLowerCase()):"CONTAINS_CASE_SENSITIVE"===n?-1!==t.indexOf(a):"DOES_NOT_CONTAIN"===n?-1===t.toLowerCase().indexOf(a.toLowerCase()):"DOES_NOT_CONTAIN_CASE_SENSITIVE"===n?-1===t.indexOf(a):"EMPTY"===n?""===t:"NOT_EMPTY"===n?""!==t:"NOT_NULL"===n?null!==t:"STARTS_WITH"===n?(t=t.substring(0,a.length),0===t.localeCompare(a,o,{sensitivity:"accent"})):"ENDS_WITH"===n?(t=t.substring(t.length-a.length,t.length),0===t.localeCompare(a,o,{sensitivity:"accent"})):"ENDS_WITH_CASE_SENSITIVE"===n?(t=t.substring(t.length-a.length,t.length),0===t.localeCompare(a,o,{sensitivity:"variant"})):!("STARTS_WITH_CASE_SENSITIVE"!==n)&&(t=t.substring(0,a.length),0===t.localeCompare(a,o,{sensitivity:"variant"}))},r=[];if(a&&a.indexOf&&(0<=a.indexOf("|")||0<=a.indexOf(" AND ")||0<=a.indexOf(" OR ")||0<=a.indexOf(" and ")||0<=a.indexOf(" or "))){const t=l(o,a);if(t)return t;const i=0<=a.indexOf(" and ")?a.split(" and "):[],n=0<=a.indexOf(" or ")?a.split(" or "):[],s=0<=a.indexOf("|")?a.split("|"):[];let d=0<=a.indexOf(" AND ")?a.split(" AND "):[],m=0<=a.indexOf(" OR ")?a.split(" OR "):[];if(0<s.length)for(let t=0;t<s.length;t++)s[t]=s[t].trim;const c=0<=a.indexOf(" ")?a.split(" "):[];if(0<c.length)for(let t=0;t<c.length;t++)c[t]=c[t].trim;if(d=d.concat(c),d=d.concat(i),m=m.concat(s),m=m.concat(n),0<d.length)for(let t=0;t<d.length;t++)0<=!d[t].indexOf(" OR ")&&r.push(d[t]);if(0<m.length)for(let t=0;t<m.length;t++)0<=!m[t].indexOf(" AND ")&&r.push(m[t]);let u;for(let t=0;t<r.length;t++){const i=r[t],a=l(o,i),n=t<d.length?"and":"or";u=void 0===u?a:"or"==n?u||a:u&&a}return u}return l(o,a)}}),Smart.Utilities.Assign("BooleanFilter",class{constructor(t,i){const a=this;a.value=t,a.condition=i,a.type="booleanFilter"}evaluate(t){const i=this,a=i.value,n=i.condition,o=t;return"EQUAL"===n?o===a:"NOT_EQUAL"===n?o!==a:"NULL"===n?null===t||void 0===t||""===t:!("NOT_NULL"!==n)&&null!==t&&void 0!==t&&""!==t}}),Smart.Utilities.Assign("NumericFilter",class{constructor(t,i){const a=this;a.value=t,a.condition=i,a.type="numericFilter"}evaluate(t){const i=this;let a=i.value,n=i.condition;if(null===t||t===void 0||""===t)return"NOT_NULL"!==n&&("NULL"===n||("EQUAL"===n?t===a:"NOT_EQUAL"===n&&t!==a));if("NULL"===n)return!1;if("NOT_NULL"===n)return!0;let o=t;try{o=parseFloat(o)}catch(i){if(""!==t.toString())return!1}const l=function(t,i){return"number"==typeof t&&"number"!=typeof i&&(i=parseFloat(i)),"EQUAL"===n?t===i:"NOT_EQUAL"===n?t!==i:"GREATER_THAN"===n?t>i:"GREATER_THAN_OR_EQUAL"===n?t>=i:"LESS_THAN"===n?t<i:"LESS_THAN_OR_EQUAL"===n?t<=i:"STARTS_WITH"===n?(i=i.toString().toLowerCase(),t.toString().toLowerCase().substring(0,i.length)===i):"ENDS_WITH"===n?(t=t.toString().toLowerCase(),i=i.toString().toLowerCase(),t.substring(t.length-i.length,t.length)===i):"ENDS_WITH_CASE_SENSITIVE"===n?(t=t.toString(),i=i.toString(),t.substring(t.length-i.length,t.length)===i):"STARTS_WITH_CASE_SENSITIVE"===n?(i=i.toString(),t.toString().substring(0,i.length)===i):"CONTAINS"===n?-1!==t.toString().toLowerCase().indexOf(i.toString().toLowerCase()):"CONTAINS_CASE_SENSITIVE"===n?-1!==t.toString().indexOf(i.toString()):"DOES_NOT_CONTAIN"===n?-1===t.toString().toLowerCase().indexOf(i.toString().toLowerCase()):"DOES_NOT_CONTAIN_CASE_SENSITIVE"!==n||-1===t.toString().indexOf(i.toString())};let r=[];if(a&&a.indexOf&&(0<=a.indexOf("|")||0<=a.indexOf(" AND ")||0<=a.indexOf(" OR ")||0<=a.indexOf(" and ")||0<=a.indexOf(" or "))){let t=l(o,a);if(t)return t;a=a.toString();const i=0<=a.indexOf(" and ")?a.split(" and "):[],n=0<=a.indexOf(" or ")?a.split(" or "):[],s=0<=a.indexOf("|")?a.split("|"):[];let d=0<=a.indexOf(" AND ")?a.split(" AND "):[],m=0<=a.indexOf(" OR ")?a.split(" OR "):[];if(d=d.concat(i),m=m.concat(n),0<s.length)for(let t=0;t<s.length;t++)s[t]=s[t].trim;if(m=m.concat(s),0<d.length)for(let t=0;t<d.length;t++)0<=!d[t].indexOf(" OR ")&&r.push(d[t]);if(0<m.length)for(let t=0;t<m.length;t++)0<=!m[t].indexOf(" AND ")&&r.push(m[t]);let c;for(let i=0;i<r.length;i++){const a=r[i];if(a&&a.indexOf&&0<=a.indexOf("..")){const i=a.toString().split("..");2===i.length&&(t=o>=i[0]&&o<=i[1])}else t=l(o,a);const n=i<d.length?"and":"or";c=void 0===c?t:"or"==n?c||t:c&&t}return c}return a&&a.indexOf&&0<=a.indexOf("..")&&(r=a.toString().split(".."),2===r.length)?o>=r[0]&&o<=r[1]:l(o,a)}}),Smart.Utilities.Assign("DateFilter",class{constructor(t,i,a,n,o){const l=this,r=new Smart.Utilities.DateTime;if(l.value=t,l.type="dateFilter",void 0!==a){const i=r.parseDate(t,a);if(null!==i)l.filterdate=i;else{const i=r.tryparseDate(t);null!==i&&(l.filterdate=i)}}else{const i=new Date(t);l.filterdate="NaN"===i.toString()||"Invalid Date"===i.toString()?r.tryparseDate(t):i}if(!l.filterdate){const i=new Date(t);l.filterdate="NaN"===i.toString()||"Invalid Date"===i.toString()?r.tryparseDate(t):i}l.condition=i,l.formatString=a,l.timeOnly=o}evaluate(t){const i=this,a=i.condition,n=i.formatString;let o=i.value;if(i.timeOnly)return i.evaluateTimeOnly(t);if(null===t||void 0===t||""===t)return"NOT_NULL"!==a&&("NULL"===a||("EQUAL"===a?t===o:"NOT_EQUAL"===a&&t!==o));if("NULL"===a)return!1;if("NOT_NULL"===a)return!0;let l=new Date,r;l.setFullYear(1900,0,1),l.setHours(12,0,0,0);try{const a=new Smart.Utilities.DateTime,s=new Date(t);if(t="NaN"===s.toString()||"Invalid Date"===s.toString()?a.tryparseDate(t):s,l=t,r=!1,void 0!==n&&(0<=n.indexOf("t")||0<=n.indexOf("T")||0<=n.indexOf(":")||0<=n.indexOf("f"))&&(r=!0,o&&-1===o.toString().indexOf(":"))){const t=a.tryparseDate(o.toString()+":00");null!==t&&(i.filterdate=t)}r||(l.setHours(0),l.setMinutes(0),l.setSeconds(0))}catch(i){if(""!==t.toString())return!1}if(null!==i.filterdate)o=i.filterdate;else if(o&&o.indexOf&&(-1!==o.indexOf(":")||!isNaN(parseInt(o)))){const t=new Date(l);t.setHours(12,0,0,0);const a=o.split(":");for(let n=0;n<a.length;n++)0==n&&t.setHours(a[n]),1==n&&t.setMinutes(a[n]),2==n&&t.setSeconds(a[n]);o=t}r&&o&&o.setFullYear&&l&&l.getFullYear&&-1===n.indexOf("d")&&-1===n.indexOf("M")&&-1===n.indexOf("y")&&o.setFullYear(l.getFullYear(),l.getMonth(),l.getDate());const s=function(t,i){return null===t&&(t=""),"EQUAL"===a?t.toString()===i.toString():"NOT_EQUAL"===a?t.toString()!==i.toString():"GREATER_THAN"===a?t>i:"GREATER_THAN_OR_EQUAL"===a?t>=i:"LESS_THAN"===a?t<i:"LESS_THAN_OR_EQUAL"===a?t<=i:"STARTS_WITH"===a?(i=i.toString().toLowerCase(),t.toString().toLowerCase().substring(0,i.length)===i):"ENDS_WITH"===a?(t=t.toString().toLowerCase(),i=i.toString().toLowerCase(),t.substring(t.length-i.length,t.length)===i):"ENDS_WITH_CASE_SENSITIVE"===a?(t=t.toString(),i=i.toString(),t.substring(t.length-i.length,t.length)===i):"STARTS_WITH_CASE_SENSITIVE"===a?(i=i.toString(),t.toString().substring(0,i.length)===i):"CONTAINS"===a?-1!==t.toString().toLowerCase().indexOf(i.toString().toLowerCase()):"CONTAINS_CASE_SENSITIVE"===a?-1!==t.toString().indexOf(i.toString()):"DOES_NOT_CONTAIN"===a?-1===t.toString().toLowerCase().indexOf(i.toString().toLowerCase()):"DOES_NOT_CONTAIN_CASE_SENSITIVE"!==a||-1===t.toString().indexOf(i.toString())};let d=[];if(o&&o.indexOf&&(0<=o.indexOf("|")||0<=o.indexOf(" AND ")||0<=o.indexOf(" OR ")||0<=o.indexOf(" and ")||0<=o.indexOf(" or "))){let t=s(l,o);if(t)return t;const i=0<=o.indexOf(" and ")?o.split(" and "):[],a=0<=o.indexOf(" or ")?o.split(" or "):[],n=0<=o.indexOf("|")?o.split("|"):[];let r=0<=o.indexOf(" AND ")?o.split(" AND "):[],m=0<=o.indexOf(" OR ")?o.split(" OR "):[];if(r=r.concat(i),m=m.concat(a),0<n.length)for(let t=0;t<n.length;t++)n[t]=n[t].trim;if(m=m.concat(n),0<r.length)for(let t=0;t<r.length;t++)0<=!r[t].indexOf(" OR ")&&d.push(r[t]);if(0<m.length)for(let t=0;t<m.length;t++)0<=!m[t].indexOf(" AND ")&&d.push(m[t]);let c;for(let i=0;i<d.length;i++){const a=d[i];if(a&&a.indexOf&&0<=a.indexOf("..")){const i=a.toString().split("..");2===i.length&&(t=l>=i[0]&&l<=i[1])}else t=s(l,a);const n=i<r.length?"and":"or";c=void 0===c?t:"or"==n?c||t:c&&t}return c}return o&&o.indexOf&&0<=o.indexOf("..")&&(d=o.toString().split(".."),2===d.length)?l>=d[0]&&l<=d[1]:s(l,o)}evaluateTimeOnly(t){const i=this,a=i.value;if(!a)return!t;if(!t||!(t instanceof Date))return!1;const n=t.getHours(),o=a.getHours();if(n!==o)return!1;const l=t.getMinutes(),r=a.getMinutes();if(l!==r)return!1;const s=t.getSeconds(),d=a.getSeconds();return!(s!==d)}}),Smart.Utilities.Assign("CustomFilter",class{constructor(t,i,a){const n=this;n.value=t,n.condition=i,n.customfilter=a}evaluate(t){const i=this;return i.customfilter(i.value,t,i.condition)}}),Smart.FilterGroup=Smart.Utilities.FilterGroup,Smart.StringFilter=Smart.Utilities.StringFilter,Smart.NumericFilter=Smart.Utilities.NumericFilter,Smart.DateFilter=Smart.Utilities.DateFilter,Smart.CustomFilter=Smart.Utilities.CustomFilter,Smart("smart-file-upload",class extends Smart.BaseElement{static get properties(){return{accept:{value:null,type:"string?"},appendTo:{value:null,type:"any"},autoUpload:{value:!1,type:"boolean"},directory:{value:!1,type:"boolean"},dropZone:{value:null,type:"any"},hideFooter:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"any"},messages:{value:{en:{browse:"Browse",uploadFile:"Upload File",cancelFile:"Cancel File",pauseFile:"Pause File",uploadAll:"Upload All",cancelAll:"Cancel All",pauseAll:"Pause All",totalFiles:"Total files: ",connectionError:"{{elementType}}: File Upload requires connection to the server.",wrongItemIndex:"{{elementType}}: There is no file with such an index in the list of uploaded files.",tooLongFileName:"{{elementType}}: File name is too long."}},type:"object",extend:!0},multiple:{value:!1,type:"boolean"},name:{value:"",type:"string"},responseHandler:{value:null,type:"function?",reflectToAttribute:!1},setHeaders:{value:null,type:"function?",reflectToAttribute:!1},showProgress:{value:!1,type:"boolean"},validateFile:{value:null,type:"function?",reflectToAttribute:!1},uploadUrl:{value:"",type:"string",reflectToAttribute:!1}}}static get listeners(){return{"browseButton.click":"browse","browseInput.change":"_browseInputChangeHandler","selectedFiles.click":"_selectedFilesClickHandler","uploadAllButton.click":"uploadAll","cancelAllButton.click":"cancelAll","pauseAllButton.click":"pauseAll","dropZone.dragenter":"_dropZoneHandler","dropZone.dragleave":"_dropZoneHandler","dropZone.dragover":"_dropZoneHandler","dropZone.drop":"_dropZoneHandler",resize:"_handleComponentsByAvailableHeight"}}static get requires(){return{"Smart.ProgressBar":"smart.progressbar.js"}}template(){return`<div id="container">
                    <div id="fileUploadHeader" class ="smart-file-upload-header">
                        <smart-button class ="smart-browse-button" id="browseButton" disabled="[[disabled]]" theme="[[theme]]"></smart-button>
                        <input type="file" class ="smart-browse-input" id="browseInput" name="[[name]]" animation="[[animation]]" disabled="[[disabled]]" unfocusable="[[unfocusable]]" multiple="[[multiple]]" webkitdirectory="[[directory]]" mozdirectory="[[directory]]" />
                    </div>
                    <div id="fileUploadContainer" class ="smart-file-upload-container">
                        <div id="dropZone" class ="smart-drop-zone"></div>
                        <div id="selectedFiles" class ="smart-selected-files"></div>
                    </div>
                    <div id="totalFiles" class ="smart-total-files smart-hidden">Total flies: 0</div>
                    <div id="fileUploadFooter" class ="smart-file-upload-footer smart-hidden">
                        <smart-button class ="smart-upload-all-button success" id="uploadAllButton" animation="[[animation]]" disabled="[[disabled]]" unfocusable="[[unfocusable]]"" theme="[[theme]]"></smart-button>
                        <smart-button class ="smart-cancel-all-button error" id="cancelAllButton" animation="[[animation]]" disabled="[[disabled]]" unfocusable="[[unfocusable]]" theme="[[theme]]"></smart-button>
                        <smart-button class ="smart-pause-all-button primary" id="pauseAllButton" animation="[[animation]]" disabled="[[disabled]]" unfocusable="[[unfocusable]]" theme="[[theme]]"></smart-button>
                    </div>
                </div>`}propertyChangedHandler(t,i,a){const n=this;super.propertyChangedHandler(t,i,a);"accept"===t?n.$.browseInput.accept=a:"dropZone"===t||"appendTo"===t?n._handleContainers():"messages"===t||"locale"===t?n._updateTextValues():"multiple"===t?(n.$.browseButton.disabled=!!(!n.multiple&&0<n._selectedFiles.length||n.disabled),!a&&1<n._selectedFiles.length&&(n._selectedFiles.splice(1),n._renderSelectedFiles())):"itemTemplate"===t?0<n._items.length&&(n._renderSelectedFiles(),n._handleComponentsByAvailableHeight()):void 0}attached(){super.attached();const t=this;t._handleContainers()}detached(){super.detached();const t=this;t.$.fileUploadContainer.contains(t.$.dropZone)||t.$.fileUploadContainer.insertBefore(t.$.dropZone,t.$.fileUploadContainer.firstChild),t.$.fileUploadContainer.contains(t.$.selectedFiles)||t.$.fileUploadContainer.appendChild(t.$.selectedFiles)}ready(){super.ready();const t=this;t._setInitialValues(),t._updateTextValues(),t._handleContainers(),t._handleComponentsByAvailableHeight()}browse(){const t=this;t.disabled||!t.multiple&&0<t._selectedFiles.length||t.$.browseInput.click()}cancelAll(){const t=this;if(!(t.disabled||0===t._items.length)){for(let a=t._items.length-1;0<=a;a--)t.cancelFile(t._items[a].index);t.$.browseButton.disabled=!!(!t.multiple&&0<t._selectedFiles.length||t.disabled)}}cancelFile(t){const i=this;if(!("number"!=typeof t||i.disabled||0===i._selectedFiles.length)){const a=i._getFileItem(t,!0);if(!a)return void i.error(i.localize("wrongItemIndex",{elementType:i.nodeName.toLowerCase()}));const n=i._items.indexOf(a);i.$.selectedFiles.removeChild(a),a&&a.xhr&&a.xhr.abort(),i._selectedFiles.splice(n,1),i._items.splice(n,1),i.$.fireEvent("uploadCanceled",{filename:a.file.name,type:a.file.type,size:a.file.size,index:a.index}),i.$.browseButton.disabled=!!(!i.multiple&&0<i._selectedFiles.length||i.disabled),0===i._selectedFiles.length&&i.$.fileUploadFooter.classList.add("smart-hidden"),i._handleComponentsByAvailableHeight()}}pauseAll(){const t=this;if(!(t.disabled||0===t._items.length))for(let a=t._items.length-1,i;0<=a;a--)i=t._items[a],i.xhr&&i.xhr.abort()}pauseFile(t){const i=this;if(!("number"!=typeof t&&"string"!=typeof t||i.disabled||0===i._items.length)){const a=i._getFileItem(t,!0);return a?void(a.classList.remove("smart-uploading-start"),a&&a.xhr&&a.xhr.abort(),i.$.fireEvent("uploadPaused",{filename:a.file.name,type:a.file.type,size:a.file.size,index:a.index})):void i.error(i.localize("wrongItemIndex",{elementType:i.nodeName.toLowerCase()}))}}uploadAll(){const t=this;if(!(t.disabled||0===t._items.length))for(let a=t._items.length-1;0<=a;a--)t._items[a].uploading||t.uploadFile(t._items[a].index)}uploadFile(t){const i=this;let a=!1;if("number"!=typeof t||i.disabled||0===i._selectedFiles.length)return;const n=i._getFileItem(t,!0);if(!n)return;let o=new FormData,l=i.showProgress?n.getElementsByTagName("smart-progress-bar")[0]:null,r=n.file;n.classList.remove("smart-pause","smart-error"),n.classList.add("smart-uploading-start"),o.append("userfile[]",r);let s=new XMLHttpRequest;s.open("POST",i.uploadUrl),i.setHeaders&&"function"==typeof i.setHeaders&&i.setHeaders(s,r),i.$.fireEvent("uploadStarted",{filename:n.file.name,type:n.file.type,size:n.file.size,index:n.index}),s.upload.onprogress=function(t){a||(a=!0,n.classList.remove("smart-uploading-start"),n.classList.add("smart-uploading"),n.uploading=!0,n.xhr=s),l&&(l.value=Math.round(100*(t.loaded/t.total))),n.classList.remove("smart-pause","smart-error")},s.onabort=function(){n.classList.remove("smart-uploading-start","smart-uploading"),n.classList.add("smart-pause"),n.addEventListener("animationend",function(){n.classList.remove("smart-pause","smart-error")})},s.onerror=function(){n.classList.remove("smart-uploading-start","smart-uploading"),n.classList.add("smart-error"),n.addEventListener("animationend",function(){n.classList.remove("smart-pause","smart-error")})},s.onload=function(){if(a=!1,n.classList.remove("smart-uploading-start","smart-uploading"),200<=s.status&&299>=s.status){let t=i._items.indexOf(n);i.$.selectedFiles.removeChild(n),i._selectedFiles.splice(i._selectedFiles.indexOf(r),1),i._items.splice(t,1),i.$.browseButton.disabled=!!(!i.multiple&&0<i._selectedFiles.length||i.disabled),i.$.fireEvent("uploadCompleted",{filename:n.file.name,type:n.file.type,size:n.file.size,status:s.status,index:n.index}),0===i._selectedFiles.length&&i.$.fileUploadFooter.classList.add("smart-hidden")}else n.classList.add("smart-error"),n.classList.remove("smart-uploading"),i.$.fireEvent("uploadError",{filename:n.file.name,type:n.file.type,size:n.file.size,status:s.status,index:n.index})},s.onreadystatechange=function(){i.responseHandler&&"function"==typeof i.responseHandler&&i.responseHandler(s)},s.send(o)}_selectedFilesClickHandler(t){const i=this;if(!i.disabled){const a=t.target,n=a.closest(".smart-item-upload-button"),o=a.closest(".smart-item-cancel-button"),l=a.closest(".smart-item-pause-button"),r=a.closest(".smart-file");n?i.uploadFile(r.index):o?i.cancelFile(r.index):l&&i.pauseFile(r.index)}}_browseInputChangeHandler(){const t=this,i=t._filterNewFiles(Array.from(t.$.browseInput.files));let a=[];t.disabled||0===i.length||(a=t.validateFile&&"function"==typeof t.validateFile?i.filter(i=>!!t.validateFile(i)||(t.$.fireEvent("validationError",{filename:i.name,type:i.type,size:i.size}),!1)):i,t._selectedFiles=t._selectedFiles.concat(a),0===t._selectedFiles.length||(t._renderSelectedFiles(a),t.$.browseButton.disabled=!!(!t.multiple&&0<t._selectedFiles.length||t.disabled),t.$.browseInput.value="",t.autoUpload&&t.uploadAll()))}_defaultItemTemplate(t){const i=this,a=i.localize("uploadFile"),n=i.localize("cancelFile"),o=i.localize("pauseFile");return`<span class ="smart-item-name">${t}</span>
                <span class ="smart-item-upload-button" title="${a}"></span>
                <span class ="smart-item-cancel-button" title="${n}"></span>
                <span class ="smart-item-pause-button" title="${o}"></span>
                <smart-progress-bar></smart-progress-bar>`}_dropZoneHandler(t){const i=this;if(t.preventDefault(),t.stopPropagation(),!i.disabled){if("dragenter"===t.type||"dragleave"===t.type)return void("dragenter"===t.type?i.$.dropZone.classList.add("smart-drag-over"):i.$.dropZone.classList.remove("smart-drag-over"));if("drop"===t.type){if(i.$.dropZone.classList.remove("smart-drag-over"),!i.multiple&&0<i._selectedFiles.length)return;if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){const a=i._filterNewFiles(Array.from(t.dataTransfer.files));if(0===a.length)return;i.multiple||a.splice(1),i._selectedFiles=i._selectedFiles.concat(a),i._renderSelectedFiles(a)}i.$.browseButton.disabled=!!(!i.multiple&&0<i._selectedFiles.length||i.disabled)}}}_filterNewFiles(t){const a=this;let n=[];for(let o=0,i;o<t.length;o++){i=!0;for(let n=0;n<a._selectedFiles.length;n++){const l=a._selectedFiles[n],r=t[o];if(r.name===l.name&&r.size===l.size&&r.type===l.type&&r.lastModified===l.lastModified){i=!1;break}}i&&n.push(t[o])}return n}_getFileItem(t,a){const n=this;let o=null;if(t&&("string"==typeof t||"number"==typeof t)){if(!n._items||0===n._items.length)return null;for(let l=0;l<n._items.length;l++){const i=n._items[l];(a&&i.index===parseInt(t)||i.file.name===t)&&(o=i)}return o}}_handleContainers(){const t=this,i=t._validateDOMElement(t.dropZone),a=t._validateDOMElement(t.appendTo);i?i.appendChild(t.$.dropZone):t.$.fileUploadContainer.insertBefore(t.$.dropZone,t.$.fileUploadContainer.firstChild),a?a.appendChild(t.$.selectedFiles):t.$.fileUploadContainer.appendChild(t.$.selectedFiles)}_handleItemTemplate(t){const i=this;let a=i.itemTemplate;if(!("content"in document.createElement("template")))return void i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()}));if(!a)return i._defaultItemTemplate(t);if("string"==typeof a&&(a=document.getElementById(a)),null===a||!("content"in a))return void i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:"template"}));const n=a.innerHTML,o=/{{\w+}}/g;return n.replace(o,t)}_renderSelectedFiles(t){const a=this,n=document.createDocumentFragment(),o=t||a._selectedFiles;t||(a._items=[],a.$.selectedFiles.innerHTML="");for(let l=0;l<o.length;l++){const t=a.directory?o[l].webkitRelativePath:o[l].name,i=document.createElement("div");a._incrementIndex++,i.className="smart-file",i.index=a._incrementIndex,i.setAttribute("item-id",a._incrementIndex),i.innerHTML=a.itemTemplate?a._handleItemTemplate(t):a._defaultItemTemplate(t),i.file=o[l],i.uploading=!1,i.xhr=null,n.appendChild(i),a._items.push(i),a.$.fireEvent("fileSelected",{filename:o[l].name,type:o[l].type,size:o[l].size,index:i.index})}a.$.selectedFiles.appendChild(n),a.$.fileUploadFooter.classList.remove("smart-hidden"),a._handleComponentsByAvailableHeight()}_setInitialValues(){const t=this;t.$.browseInput.accept=t.accept,t._selectedFiles=[],t._items=[],t._incrementIndex=0}_updateTextValues(){const t=this,a=["browse","uploadAll","cancelAll","pauseAll"];for(let n=0;n<a.length;n++){const i=a[n];t.$[i+"Button"].innerHTML=t.localize(i)}for(let a=0;a<t._selectedFiles.length;a++){const i=t._items[a];i.querySelector(".smart-item-upload-button").title=t.localize("uploadFile"),i.querySelector(".smart-item-cancel-button").title=t.localize("cancelFile"),i.querySelector(".smart-item-pause-button").title=t.localize("pauseFile")}}_validateDOMElement(t){if(t)return"string"==typeof t?document.getElementById(t):t instanceof HTMLElement?t:void 0}_handleComponentsByAvailableHeight(){const t=this;if(t._calculateAvailableContainerHeight(),!(t._elementsAutoHeight>t.offsetHeight))""===t.dropZone&&t._elementsAutoHeight<t.offsetHeight&&(t.$.container.classList.remove("smart-overflow"),t._containerOverflows=!1);else if(t.$.container.classList.add("smart-overflow"),t._containerOverflows=!0,t._rowHeight){const a=parseInt(t._availableHeight/t._rowHeight);for(let n=0;n<t._items.length;n++){const i=t._items[n];n<a?i.classList.remove("smart-hidden"):i.classList.add("smart-hidden")}t._items.length>a?(t.$.totalFiles.innerHTML=t.localize("totalFiles")+t._items.length,t.$.totalFiles.classList.remove("smart-hidden")):t.$.totalFiles.classList.add("smart-hidden")}}_calculateAvailableContainerHeight(){const t=this,i=window.getComputedStyle(t.$.fileUploadContainer,null),a=parseInt(i.getPropertyValue("margin-top"))+parseInt(i.getPropertyValue("margin-bottom"))+parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom")),n=t.$.container.querySelector(".smart-file"),o=t.$.fileUploadHeader.offsetHeight,l=t.$.fileUploadFooter.offsetHeight,r=t.style.height;let s=0;n&&(t._rowHeight=n.offsetHeight),t.style.height="auto",t._containerOverflows&&t.$.container.classList.remove("smart-overflow"),t._elementsAutoHeight=t.offsetHeight,t.style.height=r,t._containerOverflows&&t.$.container.classList.add("smart-overflow"),-1<t.$.totalFiles.classList.contains("smart-hidden")&&(t.$.totalFiles.classList.remove("smart-hidden"),s=t.$.totalFiles.offsetHeight,t.$.totalFiles.classList.add("smart-hidden")),t._availableHeight=t.offsetHeight-(o+l)-a-s}}),Smart("smart-filter-builder",class extends Smart.BaseElement{static get properties(){return{customOperations:{value:[],type:"array",reflectToAttribute:!1},disableContextMenu:{value:!1,type:"boolean"},fields:{value:null,type:"array?",reflectToAttribute:!1},formatStringDate:{value:"dd-MMM-yy",type:"string"},formatStringDateTime:{value:"dd-MMM-yy HH:mm:ss",type:"string"},hint:{value:null,type:"string?"},icons:{value:{"=":"=","<>":"\u2260",">":">",">=":"\u2265","<":"<","<=":"\u2264",startswith:"a|bc",endswith:"ab|c",contains:"abc",notcontains:"!abc",isblank:"\u25CB",isnotblank:"\u25CF"},type:"object",reflectToAttribute:!1},maxConditions:{value:null,type:"number?"},maxConditionsPerGroup:{value:null,type:"number?"},messages:{value:{en:{addCondition:"Add Condition",addGroup:"Add Group",and:"And",notand:"Not And",or:"Or",notor:"Not Or","=":"Equals","<>":"Does not equal",">":"Greater than",">=":"Greater than or equal to","<":"Less than","<=":"Less than or equal to",startswith:"Starts with",endswith:"Ends with",contains:"Contains",notcontains:"Does not contain",isblank:"Is blank",isnotblank:"Is not blank",wrongParentGroupIndex:"{{elementType}}: Wrong parent group index in \"{{method}}\" method.",missingFields:"{{elementType}}: Fields are required for proper condition's adding. Set \"fields\" source and then conditions will be added as expected.",wrongElementNode:"{{elementType}}: Incorect node / node Id in \"{{method}}\" method.",invalidDataStructure:"{{elementType}}: Used invalid data structure in updateCondition/updateGroup method.",dateTabLabel:"DATE",timeTabLabel:"TIME"}},type:"object",extend:!0},restrictedMode:{value:!1,type:"boolean"},placeholder:{value:"&lt;enter a value&gt;",type:"string"},showIcons:{value:!1,type:"boolean"},value:{value:["or"],type:"array?",reflectToAttribute:!1},valueFormatFunction:{value:null,type:"function?",reflectToAttribute:!1}}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.CheckBox":"smart.checkbox.js","Smart.ToggleButton":"smart.togglebutton.js","Smart.ScrollBar":"smart.scrollbar.js","Smart.ListBox":"smart.listbox.js","Smart.DropDownList":"smart.dropdownlist.js","Smart.ComboBox":"smart.combobox.js","Smart.Calendar":"smart.calendar.js","Smart.TimePicker":"smart.timepicker.js","Smart.Tooltip":"smart.tooltip.js","Smart.Utilities.DateTime":"smart.date.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.Menu":"smart.menu.js"}}static get listeners(){return{click:"_clickHandler",down:"_downHandler","document.click":"_documentClickHandler","conditionsMenu.itemClick":"_menuItemClickHandler","scrollableContainer.wheel":"_scrollViewerWheelHandler","scrollableOuterContainer.resize":"_resizeHandler"}}template(){return`<div id="container" title="[[hint]]">
                    <div id="innerContainer" class ="smart-inner-container">
                            <div id="scrollableOuterContainer" class ="smart-scrollable-outer-container">
                                <smart-scroll-viewer id="scrollableContainer" class ="smart-scrollable-container" animation="[[animation]]">
                                    <div id="contentContainer" class ="smart-content-container"></div>
                                </smart-scroll-viewer>
                            </div>
                            <div id="editorsContainer" class ="smart-editors-container">
                                <div id="customEditor" class ="smart-custom-editor smart-hidden"></div>
                            </div>
                    </div>
                    <smart-menu id="conditionsMenu" mode="dropDown" class ="smart-conditions-menu" theme="[[theme]]" animation="[[animation]]"></smart-menu>
            </div>`}propertyChangedHandler(t,i,a){const n=this;super.propertyChangedHandler(t,i,a);"animation"===t||"theme"===t?["textBoxEditor","numericTextBoxEditor","comboBoxEditor","dateTimePickerEditor","checkBoxEditor"].forEach(i=>n.$[i]&&(n.$[i][t]=a)):"fields"===t?(n._mapFieldsToMenu(),n._refresh()):"formatStringDate"===t||"formatStringDateTime"===t?n._refresh():"placeholder"===t?n._updatePlaceholder():"value"===t?(n._emptyElementsStructure(!0),n._convertValueToFlat(a),n._getFieldsFromValue(),n._mapFieldsToMenu(),n._generateHTMLStructureFromFlatValue(),n.$.scrollableContainer.refresh()):"customOperations"===t?(n._handleCustomOperations(),n._refresh()):"valueFormatFunction"===t?n._refresh():"showIcons"===t?n._refresh():"locale"===t||"messages"===t?(n._localizeInitialValues(),n._refresh(),n._handleCustomOperations(),n.$.dateTimePickerEditor&&(!n.$.dateTimePickerEditor.messages[n.locale]&&(n.$.dateTimePickerEditor.messages[n.locale]={}),n.$.dateTimePickerEditor.messages[n.locale].dateTabLabel=n.localize("dateTabLabel"),n.$.dateTimePickerEditor.messages[n.locale].timeTabLabel=n.localize("timeTabLabel"),"locale"===t?n.$.dateTimePickerEditor.locale=n.locale:"messages"==t&&(n.$.dateTimePickerEditor.$.selectDate.innerHTML=n.$.dateTimePickerEditor.messages[n.locale].dateTabLabel,n.$.dateTimePickerEditor.$.selectTime.innerHTML=n.$.dateTimePickerEditor.messages[n.locale].timeTabLabel))):void 0}ready(){super.ready();const t=this;t._setInitialValues(),t._handleCustomOperations(),t._emptyElementsStructure(!0),t._totalConditions=0,t._convertValueToFlat(t.value),t._getFieldsFromValue(),t._generateHTMLStructureFromFlatValue(),t._oldValueAsString=JSON.stringify(t.value),t.$.conditionsMenu._noAutoFocus=!0,setTimeout(function(){t.$.scrollableContainer.refresh()},25)}addCondition(t,i){const a=this;a._checkFieldsExistence(),a._addElement("condition",t,i)}addGroup(t,i){const a=this;a._addElement("group",t,i)}detached(){const t=this,i=["change","keydown","blur"];super.detached(),["textBoxEditor","numericTextBoxEditor","comboBoxEditor","dateTimePickerEditor","checkBoxEditor"].forEach(a=>{t.$[a]&&i.forEach(i=>{t.$[a].$.unlisten(i)})})}removeCondition(t){const i=this;i._validateNode(t,"removeCondition"),i._deleteElement(t,"condition"),i._refresh()}removeGroup(t){const i=this;i._validateNode(t,"removeGroup"),i._deleteElement(t,"group"),i._refresh()}toString(t){const a=this;if(!t)return JSON.stringify(a.value);let n=[],o=[];for(let o=0;o<a._valueFlat.length;o++){const t=a._valueFlat[o];let i={};if("condition"===t.type){const n=a._getFieldByFieldName(t.data[0]),o=n.dataType,l="["+(n.label||n.value)+"]",r=a.localize(t.data[1]),s=-1===["boolean","number"].indexOf(o)?"'"+t.data[2]+"'":t.data[2]+"";i.data=l+" "+r+" "+s}else i.data=t.data;i.nodeId=t.nodeId,i.parentId=t.parentId,i.type=t.type,n.push(i)}for(let l=0;l<n.length;l++){const t=n[l];let i={};if("group"===t.type){const l=n.filter(i=>i.parentId===t.nodeId&&"condition"===i.type);if(0<l.length){let n=l.map(t=>t.data),r="",s="",d=t.data;-1!==["notand","notor"].indexOf(d)&&(r="Not (",s=")",d=d.substring(3)),i.nodeId=t.nodeId,i.parentId=t.parentId,i.data=t.data,i.structure=r+n.join(" "+a.localize(d)+" ")+s,o.push(i)}}}o=o.filter(t=>1<t.structure.length),o.sort(function(t,i){return i.nodeId.split(".").length-t.nodeId.split(".").length});for(let n=0;n<o.length;n++){const t=o[n],i=o.filter(i=>i.nodeId===t.parentId)[0];if(i&&i.structure){let n=i.data;-1===["notand","notor"].indexOf(n)?i.structure=i.structure+" "+a.localize(n)+" ("+t.structure+")":(n=n.substring(3),i.structure=i.structure.slice(0,i.structure.length-1)+" "+a.localize(n)+" ("+t.structure+"))")}}return o[o.length-1].structure}updateCondition(t,i){const a=this,n=a._validateNode(t,"updateCondition");a._validateUserData(i,!0),n.data=i,a._refresh()}updateGroup(t,i){const a=this,n=a._validateNode(t,"updateGroup");a._validateUserData(i),n.data=i,a._refresh()}_addElement(t,i,a){i=i||"0";const n=this,o=n._valueFlat.filter(t=>t.nodeId===i&&"group"===t.type),l=!!(0<o.length)&&o[0],r=n._valueFlat.filter(t=>t.parentId===i);let s=0,d="";if(l||n.error(n.localize("wrongParentGroupIndex",{elementType:n.nodeName.toLowerCase(),method:"addGroup/addCondition"})),"group"===t)a=a||"or";else{const t=n.fields&&0<n.fields.length?n.fields[0].dataField:n._valueFields[0].dataField;a=a||[],a[0]=a[0]||t,a[1]=a[1]||"=",a[2]=void 0===typeof a[2]?null:a[2]}if(r){let t=r.map(t=>{const i=t.nodeId.split(".");return parseInt(i[i.length-1])});t=0===t.length?[0]:t,s=t.reduce(function(t,i){return Math.max(t,i)})+1}i&&0<i.length&&(d=".");const m=i+d+s,c={nodeId:m,parentId:i,type:t,data:a,htmlNode:null};n._valueFlat.push(c),n._refresh()}_clearConditionsValue(t,a){const n=this,i=n.querySelector("[node-id=\""+(t||0)+"\"]"),o=i.querySelector(".smart-value-container");for(let o=0;o<n._valueFlat.length;o++)if(n._valueFlat[o].nodeId===t){const t=n._valueFlat[o],i=a?n.fields.find(t=>t.dataField===a).dataType:n.fields.find(i=>i.dataField===t.data[0]).dataType;t.data[2]=n._defaultValueByType(i)}o.innerHTML=n.placeholder}_convertValueToFlat(t,i){const a=this,n=/^(and|or|notAnd|notOr)$/i;if(!t)return;const o=t.filter(t=>"string"==typeof t&&t.match(n)),l=o?o[0]:null,r=t.filter(t=>Array.isArray(t)&&3===t.length&&0===t.filter(t=>"string"==typeof t&&t.match(n)).length),s=t.filter(t=>!r.includes(t)&&t!==l);if(o){const t=a._lastProcessedItemInCurrentGroup.parentId?".":"",n=(a._lastProcessedItemInCurrentGroup.parentId||"")+t+(i||0),o={nodeId:n,parentId:a._lastProcessedItemInCurrentGroup.parentId,type:"group",data:l,htmlNode:null},d=a.maxConditionsPerGroup?a.maxConditionsPerGroup:r.length;a._valueFlat.push(o),a._lastProcessedItemInCurrentGroup.position=0;for(let t=0;t<d&&!(a.maxConditions&&a._totalConditions>=a.maxConditions)&&!(0===r.length);t++){const i=n+"."+(a._lastProcessedItemInCurrentGroup.position||0),o={nodeId:i,parentId:n,type:"condition",data:r[t],htmlNode:null};a._totalConditions++,a._valueFlat.push(o),a._lastProcessedItemInCurrentGroup.position++}for(let t=0;t<s.length;t++)a._lastProcessedItemInCurrentGroup.parentId=n,a._convertValueToFlat(s[t],r.length+t),a._lastProcessedItemInCurrentGroup.position++}}_clickHandler(t){const i=this,a=t.target,n=a?a.closest(".smart-filter-group-condition"):null,o=n?n.getAttribute("node-id"):null,l=a?a.closest(".smart-filter-group"):null,r=l?l.getAttribute("node-id"):null,s=a.closest(".smart-filter-add-btn"),d=a.closest(".smart-filter-delete-btn"),m=a.closest(".filter-builder-item"),c=o||r,u=i._getItemById(c);let p;if(i.disabled)return;if((m||d||s)&&(p=m?m.classList.contains("smart-filter-field-name")?"fieldButton":m.classList.contains("smart-filter-operation")?"operationButton":m.classList.contains("smart-filter-value")?"valueButton":"groupOperationButton":s?"addButton":"deleteButton",i.$.fireEvent("itemClick",{id:u.nodeId,type:u.type,component:p,data:u.data})),d){const t=a.closest(".smart-filter-group-operator"),n=a.closest(".smart-filter-group-condition");return void i._clickHandlerDeleteButton(t,n,l)}if(s)return i._closeEditor(),i._contextMenuOptions=i._addOptions,void i._handleContextMenu(a);if(m){const t=m.classList;return void i._clickHandlerFilterButton(t,c,a)}i.$.conditionsMenu.opened&&(i.$.fireEvent("menuClosing"),i.$.conditionsMenu.close(),i.$.fireEvent("menuClose"));const g=i._editor&&a.closest(i._editor.tagName)&&a.closest(".smart-custom-editor"),h=i._editor&&i._editor.$.dropDown&&i._editor.$.dropDown.contains(a);return!i._editorIsOpen||!i._editor||g||h?void 0:i._scrollBarDown?void delete i._scrollBarDown:void i._closeEditor()}_clickHandlerDeleteButton(t,i,a){const n=this;n.$.conditionsMenu.opened&&(n.$.fireEvent("menuClosing"),n.$.conditionsMenu.close(),n.$.fireEvent("menuClose")),n._closeEditor(),t?(n._deleteElement(a,"group"),a.parentElement.removeChild(a),n._generateValue()):i&&(n._deleteElement(i),i.parentElement.removeChild(i),n._generateValue()),n.$.scrollableContainer.refresh()}_clickHandlerFilterButton(t,i,a){function n(){const t=l.$.conditionsMenu.querySelector(".smart-selected-menu-item");t&&t.classList.remove("smart-selected-menu-item")}function o(t,i,a){n(),l._contextMenuOptions=0===i.length?l._defaultFilterOperationDescriptions:i,l._handleContextMenu(t);const o=l.$.conditionsMenu.querySelector("smart-menu-item[value=\""+a+"\"]");l.$.conditionsMenu.opened&&o&&o.classList.add("smart-selected-menu-item")}const l=this;if(!a.closest(".smart-editors-container")){if(l._closeEditor(),l._editedItem=l._getItemById(i),t.contains("smart-filter-group-operation"))return void o(a,l._groupOperationDescriptions,l._editedItem.data);if(t.contains("smart-filter-field-name"))return l._fields||l._mapFieldsToMenu(),void o(a,l._fields,l._editedItem.data[0]);if(t.contains("smart-filter-operation")){const t=l._getFieldByFieldName(l._editedItem.data[0]);let i=l._filterOperationDescriptions.slice();if(t&&t.filterOperations)i=l._filterOperationDescriptions.filter(i=>-1<t.filterOperations.indexOf(i.value));else{let a;switch(t.dataType){case"number":a=["=","<>","<",">","<=",">=","isblank","isnotblank"];break;case"date":a=["=","<>","<",">","<=",">=","isblank","isnotblank"];break;case"datetime":a=["=","<>","<",">","<=",">=","isblank","isnotblank"];break;case"boolean":a=["=","<>","isblank","isnotblank"];break;case"object":a=["isblank","isnotblank"];break;case"string":a=["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"];break;default:a=["contains","notcontains","startswith","endswith","=","<>","<",">","<=",">=","isblank","isnotblank"];}i=l._filterOperationDescriptions.filter(t=>-1<a.indexOf(t.value))}return l.showIcons&&(i=i.map(t=>(t.label="<span class=\"smart-filter-builder-icon\">"+l.icons[t.value]+"</span><span class=\"smart-filter-builder-menu-item\">"+l.localize(t.value)+"</span>",t))),void o(a,i.slice(),l._editedItem.data[1])}l._openEditor(a)}}_closeEditor(t){const i=this;let a;if(i._editedItem&&i._editorIsOpen){if(i._editor===i.$.dateTimePickerEditor)a=i._editor.value,a&&(a=a.toDate());else if(i._editor===i.$.checkBoxEditor)a=i._editor.checked;else if(i._editor===i.$.customEditor)a=i._selectedCustomCondition.handleValue(i._editor);else{const t=i._getFieldByFieldName(i._editedItem.data[0]);a="array"===t.dataType?i._editor.value.split(","):"object"===t.dataType?JSON.parse(i._editor.value):i._editor.value}const n=i._editedItem,o=n.htmlNode,l=n.nodeId,r=i._getFieldByFieldName(n.data[0]).dataType,s=o.querySelector(".smart-filter-value"),d=o.querySelector(".smart-value-container"),m={value:a,valueType:r||"string",editedItem:n};if(i.$.fireEvent("editorClosing",m),i._updateValueInFlatArray(l,a,"value",r||"string"),i._generateValue(t),s.removeAttribute("edited"),i.$.editorsContainer.removeAttribute("open"),i._editor===i.$.checkBoxEditor)d.innerHTML=i._editor.checked?"true":"false";else if(i._editor===i.$.customEditor){const t=i._selectedCustomCondition.valueTemplate(i._editor);d.innerHTML=t}else d.innerHTML=i._formatValueStringRepresentation(i._editor.value,i._editedItem.data[0]);i._editor.classList.add("smart-hidden"),i._editorIsOpen=!1,i.$.fireEvent("editorClose",m),i.$.scrollableContainer.refresh()}}_defaultValueByType(t){let i;switch(t){case"number":i=0;break;case"date":case"datetime":{i=new Date,i.setHours(0,0,0);break}case"boolean":i=!1;break;case"object":i=null;break;default:i="";}return i}_deleteElement(t,i){function a(t){const i=o._valueFlat.filter(i=>t===i.nodeId);let a=i?i[0]:null;o._valueFlat.splice(o._valueFlat.indexOf(a),1),o._totalConditions--}function n(t){const i=o._valueFlat.filter(i=>t===i.nodeId),l=i?i[0]:null;for(let l=0;l<o._valueFlat.length;l++){const i=o._valueFlat[l],r=i.nodeId;i.parentId===t&&("group"===i.type?n(r):a(r),o._valueFlat.splice(o._valueFlat.indexOf(i),1))}-1<o._valueFlat.indexOf(l)&&o._valueFlat.splice(o._valueFlat.indexOf(l),1)}const o=this,l="string"==typeof t?t:t.getAttribute("node-id");if(l){"group"===i?n(l):a(l);for(let t=o._valueFlat.length-1;0<=t;t--){const i=o._valueFlat.filter(i=>o._valueFlat[t].parentId===i.nodeId);0===i.length&&"0"!==o._valueFlat[t].nodeId&&(o._valueFlat.splice(t,1),o._totalConditions--)}o._generateValue()}}_documentClickHandler(t){const i=this;t.target.closest("smart-filter-builder")||(i.$.conditionsMenu.opened&&(i.$.fireEvent("menuClosing"),i.$.conditionsMenu.close(),i.$.fireEvent("menuClose")),i._editorIsOpen&&!i._scrollBarDown&&i._closeEditor(),delete i._scrollBarDown)}_downHandler(t){const i=this;t.target.closest("smart-scroll-bar")?i._scrollBarDown=!0:delete i._scrollBarDown}_editorsChangeHandler(t){const i=this,a="smart-numeric-text-box"===t.target.nodeName.toLowerCase(),n="smart-check-box"===t.target.nodeName.toLowerCase(),o=t.originalEvent?t.originalEvent.target.closest("smart-date-time-picker"):null;return o?void 0:(a||n||o)===i._enterIsPressedInEditor?void(i._closeEditor(),i._enterIsPressedInEditor=!1):void(i._enterIsPressedInEditor=!1)}_emptyElementsStructure(t){const i=this;i.$.contentContainer.innerHTML="",i._valueFlat=t?[]:i._valueFlat,i._lastProcessedItemInCurrentGroup={parentId:null,id:null,position:null}}_filterGroupRow(t){const i=this;t=i.localize(t||"or");let a=document.createElement("div"),n=`<span class ="smart-filter-delete-btn"></span>
                <span class ="filter-builder-item smart-filter-group-operation">${t}</span>
                <span class ="smart-filter-add-btn"></span>`;return a.className="smart-filter-group-operator",a.innerHTML=n,a.data=t||"or",a}_formatValueStringRepresentation(t,i){function a(t){return 0===t||"number"==typeof t||"string"==typeof t||!0===t||""===t||"0"===t||Array.isArray(t)||"object"==typeof t&&t.constructor===Date?new Smart.Utilities.DateTime(t):t}const n=this,o=n._getFieldByFieldName(i);let l;if(!o)return t;if((!t||0===t.length)&&"boolean"!==o.dataType&&"number"===o.dataType&&null===t||"string"===o.dataType&&(!t||0===t.length))return n.placeholder;switch(o.dataType){case"date":case"datetime":t?(t=a(t),t.calendar.days=n._localizedDays,t.calendar.months=n._localizedMonths,t.calendar.locale=n.locale,Smart.Utilities.DateTime.cache=[],l=t.toString("date"===o.dataType?n.formatStringDate:n.formatStringDateTime)):l=n.placeholder;break;case"array":l="string"==typeof t?t.split(","):t;break;case"object":l="string"==typeof t?t:JSON.stringify(t);break;case"number":l=t;break;case"boolean":l=!1===t?"false":"true";break;default:l=t+"";}return n.valueFormatFunction?n.valueFormatFunction(l,i,o.dataType||"string"):l}_generateHTMLStructureFromFlatValue(){const t=this,a=document.createDocumentFragment();if(t._valueFlat&&0!==t._valueFlat.length)for(let n=0;n<t._valueFlat.length;n++){const i=t._valueFlat[n],o=!!t.customOperations&&t.customOperations.find(t=>t.name===i.data[1]),l=i.parentId?t.querySelector("[node-id=\""+i.parentId+"\"]").querySelector(".smart-filter-group-condition-container"):t.$.contentContainer;if("group"===i.type){const o=document.createElement("div"),l=t._filterGroupRow(i.data),r=document.createElement("div");o.className="smart-filter-group",r.className="smart-filter-group-condition-container",o.appendChild(l),o.appendChild(r),a.appendChild(o),o.setAttribute("node-id",i.nodeId),t._valueFlat[n].htmlNode=o}else{const l=t._newFilterConditionRow(i.data);l.setAttribute("node-id",i.nodeId),a.appendChild(l),t._valueFlat[n].htmlNode=l,(-1!==["isblank","isnotblank"].indexOf(i.data[1])||o&&o.hideValue)&&l.children[3].classList.add("smart-hidden")}l.appendChild(a)}}_generateValue(){function t(t){for(let n=0;n<t.length;n++){const i=t[n];let o={};"group"===i.type&&(o.nodeId=i.nodeId,o.parentId=i.parentId,o.structure=[i.data||"or"],a.push(o))}for(let n=0;n<a.length;n++){const o=a[n],l=t.filter(t=>t.parentId===o.nodeId&&"condition"===t.type);for(let t=0;t<l.length;t++)0==t?o.structure.unshift(l[t].data):o.structure.push(l[t].data)}a=a.filter(t=>1<t.structure.length),a.sort(function(t,i){return i.nodeId.split(".").length-t.nodeId.split(".").length});for(let n=0;n<a.length;n++){const t=a[n],i=a.filter(i=>i.nodeId===t.parentId)[0];i&&i.structure&&i.structure.push(t.structure)}}const i=this;let a=[],n=i._valueFlat.slice();t(n),i.value=0<a.length?1<i._valueFlat.length?a[a.length-1].structure:a:[i._getItemById("0").data];const o=JSON.stringify(i.value);i._oldValueAsString!==o&&(i._oldValueAsString=o,i.$.fireEvent("valueChanged",{value:JSON.parse(JSON.stringify(i.value))}))}_getFieldByFieldName(t){const i=this,a=i.fields?i.fields.filter(i=>i.dataField===t):i._valueFields.filter(i=>i.dataField===t);return a[0]||null}_getFieldsFromValue(){const t=this,a=t._valueFlat,n=[],i=[];for(let t=0;t<a.length;t++)if("condition"===a[t].type){const o=a[t].data[0];if(-1===n.indexOf(o)){n.push(o),i.push({label:o,dataField:o,dataType:"string",format:null})}}t._valueFields=i}_getItemById(t,i){const a=this,n=a._valueFlat.filter(a=>i?a.parentId===t:a.nodeId===t),o=0<n.length?n[0]:null;return o}_handleContextMenu(t){const i=this;if(i._selectedElement===t&&i.$.conditionsMenu.opened)return;const a=t.getBoundingClientRect(),n=i.getBoundingClientRect(),o=a.height,l=a.left+i.$.contentContainer.scrollLeft-n.left,r=a.top+i.$.contentContainer.scrollTop-n.top+o,s=t.closest("[node-id]").getAttribute("node-id"),d=i._getItemById(s);let m=null;if(t.closest(".smart-filter-delete-btn"))m="buttonDelete";else if(t.closest(".smart-filter-add-btn")){if(i.restrictedMode){if(i.maxConditions&&i._totalConditions<i.maxConditions||!i.maxConditions){i._checkFieldsExistence();const t=i.fields?i.fields[0]:i._valueFields[0],a=t.filterOperations&&0<t.filterOperations.length?t.filterOperations[0]:"=";i._addElement("condition",0,[t.dataField,a,i._defaultValueByType(t.dataType)]),i._totalConditions++}return}m="buttonAdd"}else t.closest(".smart-filter-group-operation")?m="groupOperation":t.closest(".smart-filter-field-name")?m="conditionField":t.closest(".smart-filter-operation")&&(m="conditionOperation");const c={target:t,targetX:a.left,targetY:a.top,parentGroupId:d.parentId,id:d.nodeId,type:d.type,data:d.data,targetType:m};return i.$.conditionsMenu.opened&&(i.$.fireEvent("menuClosing"),i.$.conditionsMenu.close(),i.$.fireEvent("menuClose")),i._closeEditor(),i.disableContextMenu?(i._selectedElement=t,i.$.fireEvent("menuOpening",c),void i.$.fireEvent("menuOpen",c)):void(i.$.fireEvent("menuOpening",c),i.$.conditionsMenu.dataSource=i._contextMenuOptions,i.$.conditionsMenu.open(l,r),i._selectedElement=t,i.$.fireEvent("menuOpen",c),i.$.scrollableContainer.refresh())}_handleCustomOperations(){const t=this;t._filterOperationDescriptions=t._defaultFilterOperationDescriptions;for(let a=0;a<t.customOperations.length;a++){const i=t.customOperations[a];t._filterOperationDescriptions.push({label:i.label,value:i.name,custom:!0,index:a,editorTemplate:i.editorTemplate,valueTemplate:i.valueTemplate,handleValue:i.handleValue})}}_initializeEditor(t){const i=this,a="smart-"+Smart.Utilities.Core.toDash(t),n=document.createElement(a);"numericTextBox"===t?(n.spinButtons=!0,n.inputFormat="floatingPoint"):"dateTimePicker"==t&&(n.calendarButton=!0,n.dropDownDisplayMode="auto",n.enableMouseWheelAction=!0,n.locale=i.locale,!n.messages[i.locale]&&(n.messages[i.locale]={}),n.messages[i.locale].dateTabLabel=i.localize("dateTabLabel"),n.messages[i.locale].timeTabLabel=i.localize("timeTabLabel")),n.tabIndex="1",n.theme=i.theme,n.animation=i.animation,i.$[t+"Editor"]=n,n.$=Smart.Utilities.Extend(n),n.className=a+"-editor smart-hidden",i.$.editorsContainer.appendChild(n),i["_"+t+"Initialized"]=!0,i._addEditorListener(i.$[t+"Editor"])}_addEditorListener(t){const i=this;t.$.listen("change",function(t){i._editorsChangeHandler(t)});const a=Array.from(t.getElementsByClassName("smart-input"));a.forEach(t=>{t.addEventListener("blur",function(){i._inputBlurHandler()})}),t.$.listen("blur",function(){i._inputBlurHandler()}),t.$.listen("keydown",function(t){i._keyDownHandler(t)})}_inputBlurHandler(){const t=this;let i;if(t._editor===t.$.dateTimePickerEditor)i=t._editor.value,i&&(i=i.toDate());else if(t._editor===t.$.checkBoxEditor)i=t._editor.checked;else if(t._editor===t.$.customEditor)i=t._selectedCustomCondition.handleValue(t._editor);else{const a=t._getFieldByFieldName(t._editedItem.data[0]);i="array"===a.dataType?t._editor.value.split(","):"object"===a.dataType?JSON.parse(t._editor.value):t._editor.value}const a=t._editedItem,n=a.nodeId,o=t._getFieldByFieldName(a.data[0]).dataType;t._updateValueInFlatArray(n,i,"value",o||"string"),t._generateValue()}_keyDownHandler(t){const i=this,a=t.key;return"Enter"===a&&i._editorIsOpen?void(i._enterIsPressedInEditor=!0):void(i._enterIsPressedInEditor=!1)}_localizeInitialValues(){const t=this,i=Smart.Utilities.DateTime.getLocalizedNames(t.locale);t._addOptions=[{label:t.localize("addCondition"),value:"addCondition"},{label:t.localize("addGroup"),value:"addGroup"}],t._groupOperationDescriptions=[{label:t.localize("and"),value:"and"},{label:t.localize("notand"),value:"notand"},{label:t.localize("or"),value:"or"},{label:t.localize("notor"),value:"notor"}],t._defaultFilterOperationDescriptions=t._filterOperationDescriptions=[{label:t.localize("="),value:"=",custom:!1},{label:t.localize("<>"),value:"<>",custom:!1},{label:t.localize(">"),value:">",custom:!1},{label:t.localize(">="),value:">=",custom:!1},{label:t.localize("<"),value:"<",custom:!1},{label:t.localize("<="),value:"<=",custom:!1},{label:t.localize("startswith"),value:"startswith",custom:!1},{label:t.localize("endswith"),value:"endswith",custom:!1},{label:t.localize("contains"),value:"contains",custom:!1},{label:t.localize("notcontains"),value:"notcontains",custom:!1},{label:t.localize("isblank"),value:"isblank",custom:!1},{label:t.localize("isnotblank"),value:"isnotblank",custom:!1}],t._localizedDays=i.days,t._localizedMonths=i.months}_mapFieldsToMenu(){const t=this;(t.fields||t._valueFields)&&(t._fields=t.fields?t.fields.map(t=>{let i={label:t.label,value:t.dataField};return i}):t._valueFields.map(t=>{let i={label:t.label,value:t.dataField};return i}))}_menuItemClickHandler(t){const a=this,n=a._selectedElement.closest(".filter-builder-item"),i=t.detail,o=i.value,l=a.localize(o)||i.label;if(n){const t=n.closest(".smart-filter-group-condition"),i=n.closest(".smart-filter-group"),r=t?t.getAttribute("node-id"):i.getAttribute("node-id");let s=2;if(n.innerHTML=l,n.value=o,a._editedItem&&n.classList.contains("smart-filter-field-name")&&a._editedItem.data[0]!==o){const t=n.parentNode.querySelector(".smart-filter-value"),i=a.customOperations.map(t=>{if(t.hideValue)return t.name}).filter(t=>t),l=i.concat(["isblank","isnotblank"]);a._clearConditionsValue(r,o),a._setInitialFilterOperation(r,o),-1<l.indexOf(o)?t.classList.add("smart-hidden"):t.classList.remove("smart-hidden")}if(n.classList.contains("smart-filter-field-name"))s=0;else if(n.classList.contains("smart-filter-operation")){const t=n.parentNode.querySelector(".smart-filter-value");let i;if(a.customOperations){const t=a.customOperations.filter(t=>t.name===o);0<t.length&&(i=t[0])}-1<["isblank","isnotblank"].indexOf(o)||i&&i.hideValue?(a._clearConditionsValue(r),t.classList.add("smart-hidden")):t.classList.remove("smart-hidden"),s=1}else if(n.classList.contains("smart-filter-group-operation")){for(let t=0;t<a._valueFlat.length;t++)a._valueFlat[t].nodeId===r&&(a._valueFlat[t].data=n.value);return a._generateValue(),void a.$.scrollableContainer.refresh()}for(let t=0;t<a._valueFlat.length;t++)a._valueFlat[t].nodeId===r&&(a._valueFlat[t].data[s]=n.value);return a._generateValue(),void a.$.scrollableContainer.refresh()}const r=a._selectedElement.closest(".smart-filter-group"),s=r.getAttribute("node-id");if("addCondition"===o&&(a.maxConditions&&a._totalConditions<a.maxConditions||!a.maxConditions)){a._checkFieldsExistence();const t=a.fields?a.fields[0]:a._valueFields[0],i=t.filterOperations&&0<t.filterOperations.length?t.filterOperations[0]:"=";a._addElement("condition",s,[t.dataField,i,a._defaultValueByType(t.dataType)]),a._totalConditions++}else"addGroup"===o&&a._addElement("group",s,"and");a.$.scrollableContainer.refresh()}_setInitialFilterOperation(t,i){const a=this,n=a.fields.find(t=>t.dataField===i),o=a._valueFlat.find(i=>i.nodeId===t),l=o.htmlNode.getElementsByClassName("smart-filter-operation")[0],r=n&&n.filterOperations&&0<n.filterOperations.length?n.filterOperations[0]:"=";let s=a.localize(r);s||(s=a.customOperations.find(t=>t.name===r).label),o.data[1]=r,l.innerHTML=s}_checkFieldsExistence(){const t=this;t.fields&&0!==t.fields.length||t._valueFields&&0!==t._valueFields.length||t.error(t.localize("missingFields",{elementType:t.nodeName.toLowerCase()}))}_newFilterConditionRow(t){t=t||[];const i=this,a=t[0]?t[0]:i.fields[0].dataField,n=i._formatValueStringRepresentation(t[2],t[0]),o=i.fields?i.fields.filter(t=>t.dataField===a):i._valueFields.filter(t=>t.dataField===a),l=0<o.length?o[0].label:t[0];let r=i.localize(t[1]);!r&&i.customOperations&&0<i.customOperations.length&&(r=i.customOperations.find(i=>i.name===t[1]).label);let s=document.createElement("div"),d=`<span class ="smart-filter-delete-btn"></span>
                <span class ="filter-builder-item smart-filter-field-name">${l}</span>
                <span class ="filter-builder-item smart-filter-operation">${r||""}</span>
                <span class ="filter-builder-item smart-filter-value"><span class ="smart-value-container">${n}</span></span>`;return s.className="smart-filter-group-condition",s.innerHTML=d,s}_openEditor(t){const i=this,a=t&&t.closest(".smart-filter-group-condition")?t.closest(".smart-filter-group-condition").getAttribute("node-id"):null,n=t.closest(".smart-filter-value"),o=i._getItemById(a),l=o.data[0]||i.fields[0].dataField||i._valueFields[0].dataField,r=i._getFieldByFieldName(l);let s;if(o?(s=o.data[2],void 0===s&&(s="")):s="",!r)return;i._editorIsOpen&&i._closeEditor(),i.$.conditionsMenu.opened&&(i.$.fireEvent("menuClosing"),i.$.conditionsMenu.close(),i.$.fireEvent("menuClose")),n.setAttribute("edited",""),i._editedItem=o;const d=i.fields||i._valueFields,m=d.filter(t=>t.dataField===l),c=i._filterOperationDescriptions.filter(t=>t.value===o.data[1]&&t.custom),u=0<m.length?m[0]:null,p=r.lookup&&r.lookup.dataSource?"lookup":u.dataType;0!==c.length&&c[0].editorTemplate?(i._selectedCustomCondition=c[0],i._openCustomEditor(p,s,r)):i._openEditorByFieldType(p,s,r),i.$.fireEvent("editorOpening",{value:s,type:p,editedItem:o}),setTimeout(function(){(i._editor===i.$.numericTextBoxEditor||i._editor===i.$.textBoxEditor)&&(i._editor.$.input.focus(),i.$.scrollableContainer.scrollLeft=i.$.scrollableContainer.$.scrollViewerContainer.scrollLeft,i.$.scrollableContainer.scrollTop=i.$.scrollableContainer.$.scrollViewerContainer.oldTop,i.$.scrollableContainer.$.scrollViewerContainer.scrollLeft=0,i.$.scrollableContainer.$.scrollViewerContainer.scrollTop=0,i._editor.$.input.selectionStart=i._editor.$.input.selectionEnd=i._editor.$.input.value.length),i.$.scrollableContainer.refresh(),i.$.fireEvent("editorOpen",{value:s,type:p,editedItem:o})},0),i._editor.classList.remove("smart-hidden"),i._editorIsOpen=!0,i.$.editorsContainer.setAttribute("open",""),n.appendChild(i.$.editorsContainer),i.$.scrollableContainer.refresh()}_openEditorByFieldType(t,i,a){const n=this;"lookup"===t?(n._comboBoxInitialized||n._initializeEditor("comboBox"),n._editor=n.$.comboBoxEditor,n._editor.dataSource=a.lookup.dataSource,n._editor.dropDownAppendTo=n.$.container,n._editor.selectedValues=[i]):"boolean"===t?(n._checkBoxInitialized||n._initializeEditor("checkBox"),n._editor=n.$.checkBoxEditor,n._editor.checked=!!i):"datetime"===t?(n._dateTimePickerInitialized||n._initializeEditor("dateTimePicker"),n._editor=n.$.dateTimePickerEditor,n._editor.formatString=n.formatStringDateTime,n._editor.dropDownAppendTo=n.$.container,n._editor.value=i):"date"===t?(n._dateTimePickerInitialized||n._initializeEditor("dateTimePicker"),n._editor=n.$.dateTimePickerEditor,n._editor.formatString=n.formatStringDate,n._editor.dropDownAppendTo=n.$.container,n._editor.value=i):"number"===t?(n._numericTextBoxInitialized||n._initializeEditor("numericTextBox"),i=i?i:0,n._editor=n.$.numericTextBoxEditor,n._editor.value=i):"array"===t?(n._textBoxInitialized||n._initializeEditor("textBox"),n._editor=n.$.textBoxEditor,n._editor.value=i.toString()):"object"===t?(n._textBoxInitialized||n._initializeEditor("textBox"),i=i?i:{},n._editor=n.$.textBoxEditor,n._editor.value=JSON.stringify(i)):(n._textBoxInitialized||n._initializeEditor("textBox"),n._editor=n.$.textBoxEditor,n._editor.value=i+"")}_openCustomEditor(t,i,a){const n=this,o=n.customOperations[n._selectedCustomCondition.index].editorTemplate(t,i,a);n.$.customEditor.innerHTML="",o&&n.$.customEditor.appendChild(o),n._editor=n.$.customEditor}_refresh(){const t=this;t._generateValue(),t._emptyElementsStructure(),t._generateHTMLStructureFromFlatValue(),t.$.scrollableContainer.refresh()}_resizeHandler(){const t=this;t.$.scrollableContainer.refresh()}_scrollViewerWheelHandler(t){const i=this;"wheel"===t.type&&i.$.scrollableContainer.scrollHeight&&(t.stopPropagation(),t.preventDefault())}_setInitialValues(){const t=this;t._mapFieldsToMenu(),t._localizeInitialValues(),t.$.conditionsMenu.dropDownAppendTo=t.$.container,t.$.conditionsMenu.dataSource=t._groupOperationDescriptions,t._valueFlat=[],t._lastProcessedItemInCurrentGroup={parentId:null,id:null,position:null}}_updatePlaceholder(){const t=this;for(let a=0;a<t._valueFlat.length;a++){const i=t._valueFlat[a];"condition"===i.type&&(null===i.data[2]||""===i.data[2])&&(i.htmlNode.querySelector(".smart-value-container").innerHTML=t.placeholder)}t.$.textBoxEditor&&(t.$.textBoxEditor.placeholder=t.placeholder)}_updateValueInFlatArray(t,a,n,i){const o=this;if(t&&!o.disabled){i=i||"string",n=n||"value",null!==a&&("number"===i?a=parseFloat(a):"boolean"===i?a=!!a:"string"===i?a+="":void 0);for(let l=0;l<o._valueFlat.length;l++)o._valueFlat[l].nodeId===t&&("column"===n?o._valueFlat[l].data[0]=a:"filterCondition"===n?o._valueFlat[l].data[1]=a:"value"===n?o._valueFlat[l].data[2]=a:"groupCondition"===n?o._valueFlat[l].data=a:void 0)}}_validateNode(t,i){const a=this;let n;return t instanceof HTMLElement?n=a._getItemById(t.getAttribute("node-id")):"string"==typeof t?n=a._getItemById(t):a.error(a.localize("wrongElementNode",{elementType:a.nodeName.toLowerCase(),method:i})),n||a.error(a.localize("wrongElementNode",{elementType:a.nodeName.toLowerCase(),method:i})),n}_validateUserData(t,i){const a=this;if(i)(!Array.isArray(t)||3>t.length)&&a.error(a.localize("invalidDataStructure",{elementType:a.nodeName.toLowerCase()}));else{const i=/^(and|or|notAnd|notOr)$/i;"string"==typeof t&&t.match(i)||a.error(a.localize("invalidDataStructure",{elementType:a.nodeName.toLowerCase()}))}}}),Smart("smart-filter-panel",class extends Smart.BaseElement{static get properties(){return{buttons:{value:["clear","filter"],type:"array"},data:{value:null,type:"array?",reflectToAttribute:!1},dataField:{value:null,type:"string?"},dataSource:{value:null,type:"any",reflectToAttribute:!1},evaluateFilterExpression:{value:null,type:"function?",reflectToAttribute:!1},filterType:{value:"string",allowedValues:["numeric","string","date","boolean"],type:"string"},formatString:{value:"d",type:"string"},messages:{value:{en:{addCondition:"Add Condition",addGroup:"Add Group",and:"and",blanks:"(Blanks)",cancel:"Cancel",clear:"Clear",contains:"contains",containsCaseSensitive:"contains (case sensitive)",dateTabLabel:"DATE",doesNotContain:"does not contain",doesNotContainCaseSensitive:"does not contain (case sensitive)",empty:"empty",endsWith:"ends with",endsWithCaseSensitive:"ends with (case sensitive)",equal:"equal",equalCaseSensitive:"equal (case sensitive)",filter:"Filter",filterBuilderPlaceholder:"&lt;enter a value&gt;",greaterThan:"greater than",greaterThanOrEqual:"greater than or equal",lessThan:"less than",lessThanOrEqual:"less than or equal",mismatchedProperties:"smartFilterPanel: The \"filterType\" and the data type of the selected \"dataField\" are mismatched.",missingProperty:"smartFilterPanel: When mode is 'excel', either \"data\" and \"dataField\" or \"dataSource\" of type Array have to be set.",notEmpty:"not empty",notEqual:"not equal",notNull:"not null",null:"null ",or:"or",placeholderDate:"Enter date",placeholderTime:"Enter time",selectAll:"(Select All)",showRows:"Show rows where:",startsWith:"starts with",startsWithCaseSensitive:"starts with (case sensitive)",timeTabLabel:"TIME"}},type:"object",extend:!0},mode:{value:"default",allowedValues:["default","excel","filterBuilder"],type:"string"}}}static get listeners(){return{"cancelButton.click":"cancel","clearButton.click":"clear","filterButton.click":"filter"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.DropDownList":"smart.dropdownlist.js","Smart.FilterBuilder":"smart.filterbuilder.js","Smart.NumericTextBox":"smart.numerictextbox.js","Smart.Tree":"smart.tree.js","Smart.FilterGroup":"smart.filter.js"}}template(){return"<div id=\"container\" class=\"smart-container\">\n                <div id=\"label\" class=\"smart-filter-panel-label\"></div>\n                <div id=\"mainContainer\"></div>\n                <div id=\"buttonContainer\" class=\"smart-filter-panel-button-container\">\n                    <smart-button id=\"filterButton\" class=\"primary\" animation=\"[[animation]]\" disabled=\"[[disabled]]\" unfocusable=\"[[unfocusable]]\"></smart-button>\n                    <smart-button id=\"clearButton\" animation=\"[[animation]]\" disabled=\"[[disabled]]\" unfocusable=\"[[unfocusable]]\"></smart-button>\n                    <smart-button id=\"cancelButton\" animation=\"[[animation]]\" disabled=\"[[disabled]]\" unfocusable=\"[[unfocusable]]\"></smart-button>\n                </div>\n            </div>"}ready(){super.ready();const t=this,i=t.filterType;t._localize(),t._setButtonsVisibility(),t._filterType=i+"Filter",t._filterHandler=new Smart.Utilities[i.slice(0,1).toUpperCase()+i.slice(1)+"FilterHandler"](t)}cancel(){const t=this;t._filterHandler[t.mode+"Cancel"](),t.$.fireEvent("cancel")}clear(){const t=this;t._filterHandler[t.mode+"Clear"](),t.$.fireEvent("clear")}reset(){const t=this;t.$.clearButton.removeAttribute("hover"),t.$.filterButton.removeAttribute("hover"),t.$.cancelButton.removeAttribute("hover"),t._filterHandler[t.mode+"Clear"](),t._filterHandler.filterObject=new Smart.Utilities.FilterGroup}getFilter(){if(this._filterHandler){const t=new Smart.Utilities.FilterGroup;for(let i in this._filterHandler.filterObject)t[i]=this._filterHandler.filterObject[i];return t}return null}evaluate(t){try{return this._filterHandler.evaluate(t)}catch(t){return!1}}filter(){const t=this;t._filterHandler[t.mode+"Filter"](),t.$.fireEvent("filter")}getState(){return this._filterHandler.cachedFilter}loadState(t){try{const i=this;i._filterHandler.cachedFilter=t,i._filterHandler[i.mode+"Cancel"]()}catch(t){}}propertyChangedHandler(t,i,a){function n(){const t=["cachedFilter","caseSensitive","customExcelFilterObjects","customItems","dataSource","defaultListSelection","defaultListSource","displayMode","filterBuilder","filterBuilderObject","filterBuilderOperations","filterObject","firstInput","firstList","operationsMapping","operatorList","secondInput","secondList","timeOnly","tree"];t.forEach(function(i){delete r[t[i]]}),delete l._filterHandler}function o(){l.$.mainContainer.innerHTML="",n(),l._filterHandler=new Smart.Utilities[l.filterType.slice(0,1).toUpperCase()+l.filterType.slice(1)+"FilterHandler"](l)}super.propertyChangedHandler(t,i,a);const l=this,r=l._filterHandler;switch(t){case"animation":case"disabled":case"unfocusable":switch(l.mode){case"default":[r.firstList,r.firstInput,r.logicalOperatorList,r.secondList,r.secondInput].forEach(function(i){i[t]=a});break;case"excel":r.tree[t]=a;break;case"filterBuilder":r.filterBuilder[t]=a,r.caseSensitive&&(r.caseSensitive[t]=a);}break;case"buttons":l._setButtonsVisibility();break;case"data":case"dataField":"excel"!==l.mode||Array.isArray(l.dataSource)||o();break;case"dataSource":"excel"===l.mode&&o();break;case"filterType":l._filterType=a+"Filter",o();break;case"mode":o();break;case"formatString":if("date"!==l.filterType)return;switch(l.mode){case"default":r.firstInput.formatString=a,r.secondInput.formatString=a;break;case"excel":o();break;case"filterBuilder":r.filterBuilder.formatStringDate=a,r.filterBuilder.formatStringDateTime=a;}break;case"locale":case"messages":{switch(l._localize(),l.mode){case"default":{const i=r.firstList.selectedIndexes,a=r.logicalOperatorList.selectedIndexes,n=r.secondList.selectedIndexes;if(r.setDefaults(),r.firstList.dataSource=r.defaultListSource,r.logicalOperatorList.dataSource=[{value:0,label:l.localize("and")},{value:1,label:l.localize("or")}],r.secondList.dataSource=r.defaultListSource,"date"===l.filterType){const i=[r.firstInput,r.secondInput];i.forEach(function(i){i.messages[l.locale]||(i.messages[l.locale]={}),i.messages[l.locale].dateTabLabel=l.localize("dateTabLabel"),i.messages[l.locale].timeTabLabel=l.localize("timeTabLabel"),"locale"===t?i.locale=l.locale:(i.$.selectDate.innerHTML=i.messages[l.locale].dateTabLabel,i.$.selectTime.innerHTML=i.messages[l.locale].timeTabLabel),"timePicker"===i._dropDownDisplayMode?(i.placeholder=l.localize("placeholderTime"),i.placeholder=l.localize("placeholderTime")):(i.placeholder=l.localize("placeholderDate"),i.placeholder=l.localize("placeholderDate"))})}r.firstList.selectedIndexes=i,r.logicalOperatorList.selectedIndexes=a,r.secondList.selectedIndexes=n;break}case"excel":r.tree.selectAll.label=l.localize("selectAll"),r.tree.blanks&&(r.tree.blanks.label=l.localize("blanks"));break;case"filterBuilder":r.localizeFilterBuilder(),"messages"===t&&(r.filterBuilder._localizeInitialValues(),r.filterBuilder._refresh()),r.filterBuilder.$.scrollableContainer.refresh();}break}}}_localize(){const t=this;t.$.label.innerHTML=t.localize("showRows"),t.$.filterButton.innerHTML=t.localize("filter"),t.$.clearButton.innerHTML=t.localize("clear"),t.$.cancelButton.innerHTML=t.localize("cancel")}_setButtonsVisibility(){const t=this,i=t.buttons;["cancel","clear","filter"].forEach(function(a){-1===i.indexOf(a)?t["$"+a+"Button"].addClass("smart-hidden"):t["$"+a+"Button"].removeClass("smart-hidden")})}}),Smart.Utilities.Assign("BaseFilterHandler",class{constructor(t){const i=this;if(i.context=t,i.filterObject=new Smart.Utilities.FilterGroup,i.setDefaults(),"date"===t.filterType){const a=new Smart.Utilities.DateTime,n=t.formatString,o=a.getParseRegExp(a.calendar,n.replace(/y+/g,"yyyyy"));i.displayMode=Smart.Utilities.DateTime.detectDisplayMode(a,n,o),i.timeOnly="timePicker"===i.displayMode}return"default"===t.mode?void i.createDefaultHTMLStructure():void(i.operationsMapping={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"},"excel"===t.mode?i.createExcelHTMLStructure():"filterBuilder"===t.mode&&i.createBuilderHTMLStructure())}setDefaults(){const t=this,i=t.context;t.defaultListSource=[{value:"EQUAL",label:i.localize("equal")},{value:"NOT_EQUAL",label:i.localize("notEqual")},{value:"LESS_THAN",label:i.localize("lessThan")},{value:"LESS_THAN_OR_EQUAL",label:i.localize("lessThanOrEqual")},{value:"GREATER_THAN",label:i.localize("greaterThan")},{value:"GREATER_THAN_OR_EQUAL",label:i.localize("greaterThanOrEqual")},{value:"NULL",label:i.localize("null")},{value:"NOT_NULL",label:i.localize("notNull")}],t.filterBuilderOperations=["<","=","<>","<=",">",">=","NULL","NOT_NULL"],t.defaultListSelection=2}createDefaultHTMLStructure(){const t=this,i=t.context,a=document.createElement("smart-drop-down-list"),n=document.createElement("smart-drop-down-list"),o=document.createElement("smart-drop-down-list"),l=document.createDocumentFragment();a.classList.add("smart-filter-panel-list"),a.dataSource=t.defaultListSource,a.selectedIndexes=[t.defaultListSelection],n.classList.add("smart-filter-panel-operator-list"),n.dataSource=[{value:0,label:i.localize("and")},{value:1,label:i.localize("or")}],o.classList.add("smart-filter-panel-list"),o.dataSource=t.defaultListSource,o.selectedIndexes=[t.defaultListSelection],t.firstList=a,t.logicalOperatorList=n,t.secondList=o,t.appendInputs(),t.firstInput.classList.add("smart-filter-panel-input"),t.secondInput.classList.add("smart-filter-panel-input"),n.dropDownHeight="auto",n.selectedIndexes=[0],[a,t.firstInput,n,o,t.secondInput].forEach(function(t){t.animation=i.animation,t.disabled=i.disabled,t.unfocusable=i.unfocusable,t.dropDownPosition="bottom",t.dropDownAppendTo="body",t.dropDownMaxHeight=200,t.dropDownWidth="auto",l.appendChild(t)}),t.context.$.mainContainer.appendChild(l),t.cacheFilter(t.defaultListSelection,0,t.defaultListSelection)}cacheFilter(t,i,a){const n=this;n.cachedFilter={firstFilterComparison:t,firstFilterValue:n.firstInput.value,logicalOperator:i,secondFilterComparison:a,secondFilterValue:n.secondInput.value}}defaultFilter(){const t=this,i=t.context,a=t.firstList.selectedValues[0],n=t.getFilterInputValue(t.firstInput),o=parseFloat(t.logicalOperatorList.selectedValues[0]),l=t.secondList.selectedValues[0],r=t.getFilterInputValue(t.secondInput),s=t.filterObject;if(s.clear(),""!==n||-1!==["NULL","NOT_NULL","EMPTY","NOT_EMPTY"].indexOf(a)){const l=s.createFilter(i._filterType,n,a,void 0,i.formatString,i.locale,"timePicker"===t.firstInput._dropDownDisplayMode);s.addFilter(o,l)}if(""!==r||-1!==["NULL","NOT_NULL","EMPTY","NOT_EMPTY"].indexOf(l)){const a=s.createFilter(i._filterType,r,l,void 0,i.formatString,i.locale,"timePicker"===t.secondInput._dropDownDisplayMode);s.addFilter(o,a)}t.cacheFilter(t.firstList.selectedIndexes[0],t.logicalOperatorList.selectedIndexes[0],t.secondList.selectedIndexes[0])}getFilterInputValue(t){return t.value}excelFilter(){const t=this,i=t.context;if(Array.isArray(i.dataSource))return void t.customExcelFilter();const a=t.tree,n=t.filterObject;if(n.clear(),t.customItems=[],!a._menuItems[0].selected){const o=a.selectedIndexes;o.forEach(function(o){const l=a._menuItems[o];if(l instanceof Smart.TreeItem){const a=l.value;if(l.hasAttribute("default-item")){const o=t.getExcelComparison(a),l=n.createFilter(i._filterType,a,o,void 0,i.formatString,i.locale,t.timeOnly);n.addFilter("or",l)}else t.customItems.push(l)}}),t.cachedFilter=o.slice(0)}}customExcelFilter(){const t=this,i=t.tree;if(delete t.customExcelFilterObjects,i._menuItems[0].selected)return;const a=t.context,n=[],o=i.selectedIndexes;o.forEach(function(o){const l=i._menuItems[o];if(l instanceof Smart.TreeItem){let o=l.value;if(!Array.isArray(o))return;Array.isArray(o[0])||(o=[o]);const r=new Smart.Utilities.FilterGroup;for(let n=0;n<o.length;n++){const i=o[n],l=t.operationsMapping[i[1]],s=r.createFilter(a._filterType,i[2],l,void 0,a.formatString,a.locale,t.timeOnly);r.addFilter("and",s)}n.push(r)}}),t.customExcelFilterObjects=n,t.cachedFilter=o.slice(0)}getExcelComparison(t){return""===t?"NULL":"EQUAL"}filterBuilderFilter(){function t(o,i){const l=new Smart.Utilities.FilterGroup,r=o[1];i.logicalOperator=r;for(let s=0;s<o.length;s++){if(1==s)continue;const d=o[s];if(Array.isArray(d))if(Array.isArray(d[0])){const a={filters:[]};i.filters.push(a),t(d,a)}else l.addFilter(r,a.createFilterBuilderFilter(l,d,n))}0<l.filters.length&&i.filters.push(l)}const a=this,i=a.filterBuilder.value,n=!("string"!==a.context.filterType)&&a.caseSensitive.checked,o={filters:[]};t(i,o),a.filterBuilderObject=o,a.cachedFilter={filterBuilder:JSON.parse(JSON.stringify(a.filterBuilder.value),function(t,i){return /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.test(i)?new Date(i):i}),caseSensitive:n}}createFilterBuilderFilter(t,i,a){const n=this,o=n.context;let l=n.operationsMapping[i[1]];return a&&-1!==["CONTAINS","DOES_NOT_CONTAIN","STARTS_WITH","ENDS_WITH","EQUAL"].indexOf(l)&&(l+="_CASE_SENSITIVE"),t.createFilter(o._filterType,i[2],l,void 0,o.formatString,o.locale,!1)}defaultClear(){const t=this;t.firstList.selectedIndexes=[t.defaultListSelection],t.firstInput.value="",t.logicalOperatorList.selectedIndexes=[0],t.secondList.selectedIndexes=[t.defaultListSelection],t.secondInput.value="",t.filterObject.clear(),t.cacheFilter(t.defaultListSelection,0,t.defaultListSelection)}excelClear(){const t=this;t.tree.select("0"),t.filterObject.clear(),t.cachedFilter=t.tree.selectedIndexes.slice(0)}filterBuilderClear(){const t=this;t.filterBuilder.value=["and"],"string"===t.context.filterType&&(t.caseSensitive.checked=!1),t.cachedFilter={filterBuilder:["and"],caseSensitive:!1}}defaultCancel(){const t=this;t.firstList.selectedIndexes=[t.cachedFilter.firstFilterComparison],t.firstInput.value=t.cachedFilter.firstFilterValue,t.logicalOperatorList.selectedIndexes=[t.cachedFilter.logicalOperator],t.secondList.selectedIndexes=[t.cachedFilter.secondFilterComparison],t.secondInput.value=t.cachedFilter.secondFilterValue}excelCancel(){const t=this;t.tree.selectedIndexes=t.cachedFilter.slice(0)}filterBuilderCancel(){const t=this;t.filterBuilder.value=t.cachedFilter.filterBuilder,"string"===t.context.filterType&&(t.caseSensitive.checked=t.cachedFilter.caseSensitive)}createExcelHTMLStructure(){const t=this,i=t.context,a=document.createElement("smart-tree"),n={data:i.data,dataField:i.dataField,filterType:i._filterType};if(!i.dataSource||!Array.isArray(i.dataSource)){if(i.data&&i.dataField||i.error(i.localize("missingProperty")),"date"===i.filterType){n.formatString=i.formatString,n.displayMode=t.displayMode,t.dataSource=t.filterObject.getUniqueValues(n,i);try{t.getHierarchicalDataSource(t.displayMode)}catch(t){i.error(i.localize("mismatchedProperties"))}t.timeOnly?a.classList.add("standard-excel"):a.classList.add("date-excel")}else t.dataSource=t.filterObject.getUniqueValues(n,i),a.classList.add("standard-excel");"function"==typeof i.dataSource&&(t.dataSource=i.dataSource(t.dataSource)||t.dataSource)}else t.processCustomDataSource(a);a.animation=i.animation,a.disabled=i.disabled,a.unfocusable=i.unfocusable,a.dataSource=[{label:i.localize("selectAll"),value:"",items:t.dataSource,expanded:!0,selected:!0}],a.selectionMode="checkBox",a.hasThreeStates=!0,a.toggleMode="arrow",a.addEventListener("collapsing",function(t){1===t.detail.item.level&&t.preventDefault()}),a._onCompleted=function(){if(t.cachedFilter=a.selectedIndexes.slice(0),a.classList.contains("date-excel"))for(let t in a._menuItems){if("0"==t)continue;const i=a._menuItems[t];i.firstElementChild.style.paddingLeft=20*(i.level-1)-10+"px"}else a._menuItems[0].firstElementChild.style.paddingLeft=0;a.selectAll=a._menuItems[0],a.blanks=a.querySelector("[label=\""+i.localize("blanks")+"\"]")},t.tree=a,i.$.mainContainer.appendChild(a)}processCustomDataSource(t){const i=this,a=i.context,n=a.dataSource;t.classList.add("standard-excel"),i.dataSource=n}createBuilderHTMLStructure(){const t=this,i=t.context,a=document.createElement("smart-filter-builder"),n=i.dataField,o="numeric"===i.filterType?"number":i.filterType;if(t.filterBuilder=a,a.animation=i.animation,a.disabled=i.disabled,a.unfocusable=i.unfocusable,a.value=["and"],a.fields=[{label:n,dataField:n,dataType:o,filterOperations:t.filterBuilderOperations}],t.localizeFilterBuilder(),i.$.mainContainer.appendChild(a),"string"===o){const a=document.createElement("smart-check-box");a.classList.add("case-sensitive"),a.innerHTML="Case sensitive",a.animation=i.animation,a.disabled=i.disabled,a.unfocusable=i.unfocusable,a.checked=!1,t.caseSensitive=a,i.$.mainContainer.appendChild(a)}t.filterBuilderObject={filters:[]},t.cachedFilter={filterBuilder:["and"],caseSensitive:!1}}localizeFilterBuilder(){const t=this,i=t.context,a=t.filterBuilder;let n=a.messages[i.locale];n||(n={},a.messages[i.locale]=n),a.customOperations=[{name:"NULL",label:i.localize("null"),hideValue:!0},{name:"NOT_NULL",label:i.localize("notNull"),hideValue:!0}],n.addCondition=i.localize("addCondition"),n.addGroup=i.localize("addGroup"),n["<"]=i.localize("lessThan"),n["<="]=i.localize("lessThanOrEqual"),n["<>"]=i.localize("notEqual"),n["="]=i.localize("equal"),n[">"]=i.localize("greaterThan"),n[">="]=i.localize("greaterThanOrEqual"),n.and=i.localize("and"),n.contains=i.localize("contains"),n.endswith=i.localize("endsWith"),n.isblank=i.localize("empty"),n.isnotblank=i.localize("notEmpty"),n.notcontains=i.localize("doesNotContain"),n.or=i.localize("or"),n.startswith=i.localize("startsWith"),n.dateTabLabel=i.localize("dateTabLabel"),n.timeTabLabel=i.localize("timeTabLabel"),a.formatStringDate=i.formatString,a.formatStringDateTime=i.formatString,a.locale=i.locale,a.placeholder=i.localize("filterBuilderPlaceholder")}evaluate(t){function a(n){let o=!("and"!==n.logicalOperator);for(let l=0;l<n.filters.length;l++){let i;i=n.filters[l]instanceof Smart.Utilities.FilterGroup?n.filters[l].evaluate(t):a(n.filters[l]),o="and"===n.logicalOperator?o&&i:o||i}return o}const n=this,o=n.context;if("default"===o.mode)return n.filterObject.evaluate(t);if("excel"===o.mode){let a=!1;if(Array.isArray(o.dataSource)){if(!n.customExcelFilterObjects||0===n.customExcelFilterObjects.length)return!0;for(let o=0;o<n.customExcelFilterObjects.length;o++)a=a||n.customExcelFilterObjects[o].evaluate(t);return a}if(!(n.customItems&&0<n.customItems.length))a=n.filterObject.evaluate(t);else if(0<n.filterObject.filters.length&&(a=n.filterObject.evaluate(t)),n.customItems&&o.evaluateFilterExpression)for(let l=0;l<n.customItems.length;l++){const i=o.evaluateFilterExpression(t,n.customItems[l].value);void 0!==i&&(a=a||i)}return a}return!n.filterBuilderObject.logicalOperator||a(n.filterBuilderObject)}}),Smart.Utilities.Assign("NumericFilterHandler",class extends Smart.Utilities.BaseFilterHandler{appendInputs(){const t=this,i=document.createElement("smart-numeric-text-box"),a=document.createElement("smart-numeric-text-box");i.inputFormat="floatingPoint",i.nullable=!0,i.spinButtons=!0,i.value=null,a.inputFormat="floatingPoint",a.nullable=!0,a.spinButtons=!0,a.value=null,t.firstInput=i,t.secondInput=a}getFilterInputValue(t){return null===t.value||""===t.value?"":parseFloat(t.value)}}),Smart.Utilities.Assign("StringFilterHandler",class extends Smart.Utilities.BaseFilterHandler{setDefaults(){const t=this,i=t.context;t.defaultListSource=[{value:"EMPTY",label:i.localize("empty")},{value:"NOT_EMPTY",label:i.localize("notEmpty")},{value:"CONTAINS",label:i.localize("contains")},{value:"CONTAINS_CASE_SENSITIVE",label:i.localize("containsCaseSensitive")},{value:"DOES_NOT_CONTAIN",label:i.localize("doesNotContain")},{value:"DOES_NOT_CONTAIN_CASE_SENSITIVE",label:i.localize("doesNotContainCaseSensitive")},{value:"STARTS_WITH",label:i.localize("startsWith")},{value:"STARTS_WITH_CASE_SENSITIVE",label:i.localize("startsWithCaseSensitive")},{value:"ENDS_WITH",label:i.localize("endsWith")},{value:"ENDS_WITH_CASE_SENSITIVE",label:i.localize("endsWithCaseSensitive")},{value:"EQUAL",label:i.localize("equal")},{value:"EQUAL_CASE_SENSITIVE",label:i.localize("equalCaseSensitive")},{value:"NULL",label:i.localize("null")},{value:"NOT_NULL",label:i.localize("notNull")}],t.filterBuilderOperations=["contains","isblank","isnotblank","notcontains","startswith","endswith","=","NULL","NOT_NULL"],t.defaultListSelection=2}appendInputs(){const t=this,i=document.createElement("input"),a=document.createElement("input");i.classList.add("smart-input"),a.classList.add("smart-input"),t.firstInput=i,t.secondInput=a}getExcelComparison(t){return""===t?"EMPTY":"EQUAL_CASE_SENSITIVE"}}),Smart.Utilities.Assign("DateFilterHandler",class extends Smart.Utilities.BaseFilterHandler{appendInputs(){const t=this,i=t.context,a=document.createElement("smart-date-time-picker"),n=document.createElement("smart-date-time-picker");a.calendarButton=!0,a.editMode="partial",a.formatString=i.formatString,a.dropDownDisplayMode="auto",a.locale=i.locale,a.messages[i.locale]||(a.messages[i.locale]={}),a.messages[i.locale].dateTabLabel=i.localize("dateTabLabel"),a.messages[i.locale].timeTabLabel=i.localize("timeTabLabel"),a.nullable=!0,a.value=null,n.calendarButton=!0,n.editMode="partial",n.formatString=i.formatString,n.dropDownDisplayMode="auto",n.locale=i.locale,n.messages[i.locale]||(n.messages[i.locale]={}),n.messages[i.locale].dateTabLabel=i.localize("dateTabLabel"),n.messages[i.locale].timeTabLabel=i.localize("timeTabLabel"),n.nullable=!0,n.value=null,n._onCompleted=function(){"timePicker"===n._dropDownDisplayMode?(a.placeholder=i.localize("placeholderTime"),a.placeholder=i.localize("placeholderTime")):(a.placeholder=i.localize("placeholderDate"),a.placeholder=i.localize("placeholderDate"))},t.firstInput=a,t.secondInput=n}getFilterInputValue(t){if(null===t.value)return"";const i=t.value.toDate();return"calendar"===this.displayMode&&i.setHours(0,0,0),i}defaultClear(){const t=this;t.firstList.selectedIndexes=[t.defaultListSelection],t.firstInput.value=null,t.logicalOperatorList.selectedIndexes=[0],t.secondList.selectedIndexes=[t.defaultListSelection],t.secondInput.value=null,t.filterObject.clear(),t.cacheFilter(t.defaultListSelection,0,t.defaultListSelection)}getHierarchicalDataSource(t){const i=this,a=i.dataSource,n={},o=[];let l;if("timePicker"!==t){for(let r in""===a[a.length-1].value&&(l=a[a.length-1],a.pop()),a.forEach(function(a){const o=a.value,l=o.getFullYear(),r=new Intl.DateTimeFormat(i.context.locale,{month:"long"}).format(o),s=o.getDate();if(n[l]||(n[l]={}),n[l][r]||(n[l][r]={}),!n[l][r][s]){if("calendar"===t)return void(n[l][r][s]=o);n[l][r][s]={}}if("calendar"!==t){const t=o.getHours(),i=o.getMinutes(),a=o.getSeconds();n[l][r][s][t]||(n[l][r][s][t]={}),n[l][r][s][t][i]||(n[l][r][s][t][i]={}),n[l][r][s][t][i][a]||(n[l][r][s][t][i][a]=o)}}),n){const i={label:r,items:[],customAttribute:"default-item"};for(let a in o.push(i),n[r]){const o={label:a,items:[],customAttribute:"default-item"};for(let l in i.items.push(o),n[r][a]){const i={label:l,customAttribute:"default-item"};if(o.items.push(i),"calendar"===t){i.value=n[r][a][l];continue}for(let t in i.items=[],n[r][a][l]){const o={label:"0".repeat(2-t.length)+t,items:[],customAttribute:"default-item"};for(let s in i.items.push(o),n[r][a][l][t]){const i={label:":"+"0".repeat(2-s.length)+s,items:[],customAttribute:"default-item"};for(let d in o.items.push(i),n[r][a][l][t][s]){const o={label:":"+"0".repeat(2-d.length)+d,value:n[r][a][l][t][s][d],customAttribute:"default-item"};i.items.push(o)}}}}}}l&&o.push(l),i.dataSource=o}}}),Smart.Utilities.Assign("BooleanFilterHandler",class extends Smart.Utilities.BaseFilterHandler{cacheFilter(t,i,a){const n=this;n.cachedFilter={firstFilterComparison:t,firstFilterValue:n.firstInput.selectedIndexes.slice(0),logicalOperator:i,secondFilterComparison:a,secondFilterValue:n.secondInput.selectedIndexes.slice(0)}}setDefaults(){const t=this,i=t.context;t.defaultListSource=[{value:"EQUAL",label:i.localize("equal")},{value:"NOT_EQUAL",label:i.localize("notEqual")},{value:"NULL",label:i.localize("null")},{value:"NOT_NULL",label:i.localize("notNull")}],t.filterBuilderOperations=["=","<>","NULL","NOT_NULL"],t.defaultListSelection=0}appendInputs(){const t=this,i=document.createElement("smart-drop-down-list"),a=document.createElement("smart-drop-down-list");i.dataSource=[{value:!0,label:"true"},{value:!1,label:"false"}],i.selectedIndexes=[],i.selectionMode="zeroOrOne",a.dataSource=[{value:!0,label:"true"},{value:!1,label:"false"}],a.selectedIndexes=[],a.selectionMode="zeroOrOne",t.firstInput=i,t.secondInput=a}getFilterInputValue(t){return 0===t.selectedValues.length?"":"true"===t.selectedValues[0]}defaultClear(){const t=this;t.firstList.selectedIndexes=[t.defaultListSelection],t.firstInput.selectedIndexes=[],t.logicalOperatorList.selectedIndexes=[0],t.secondList.selectedIndexes=[t.defaultListSelection],t.secondInput.selectedIndexes=[],t.filterObject.clear(),t.cacheFilter(t.defaultListSelection,0,t.defaultListSelection)}defaultCancel(){const t=this;t.firstList.selectedIndexes=[t.cachedFilter.firstFilterComparison],t.firstInput.selectedIndexes=t.cachedFilter.firstFilterValue,t.logicalOperatorList.selectedIndexes=[t.cachedFilter.logicalOperator],t.secondList.selectedIndexes=[t.cachedFilter.secondFilterComparison],t.secondInput.selectedIndexes=t.cachedFilter.secondFilterValue}}),Smart("smart-color-panel",class extends Smart.BaseElement{static get properties(){return{applyValueMode:{value:"instantly",allowedValues:["instantly","useButtons"],type:"string"},columnCount:{value:8,type:"number"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},displayMode:{value:"default",allowedValues:["default","grid","palette","radial","hexagonal","spectrumGrid","materialGrid"],type:"string"},editAlphaChannel:{value:!1,type:"boolean"},enableCustomColors:{value:!1,type:"boolean"},disableUndo:{value:!1,type:"boolean"},hideAlphaEditor:{value:!1,type:"boolean"},hideContentToFit:{value:["RGB","HEX","alpha","previewContainer"],type:"array"},hideHEXEditor:{value:!1,type:"boolean"},hidePreviewContainer:{value:!1,type:"boolean"},hideRGBEditor:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},messages:{value:{en:{redPrefix:"R:",greenPrefix:"G:",bluePrefix:"B:",hexPrefix:"#:",alphaPrefix:"Alpha:",ok:"OK",cancel:"CANCEL",customColor:"CUSTOM COLOR ..."}},type:"object",extend:!0},name:{value:"",type:"string"},palette:{value:"default",allowedValues:["default","gray","red","green","blue","custom"],type:"string"},tooltipDisplayMode:{value:"hex",allowedValues:["none","rgba","rgb","hex"],type:"string"},value:{value:null,type:"string?"},valueMember:{value:"value",type:"string?"}}}static get listeners(){return{"gridModeContainer.click":"_handleSampleClick","colorPaletteHexagonal.click":"_handleSampleClick","gridModeContainer.mouseover":"_handleGridModeCellHover","colorPaletteHexagonal.mouseover":"_handleGridModeCellHover","colorPalette.down":"_handleColorPaletteDown","hueScale.down":"_handleScalesDown","colorPaletteRadial.down":"_handleColorPaletteDown","brightnessScale.down":"_handleScalesDown","alphaChannelScale.down":"_handleScalesDown",change:"_handleInputChange","document.move":"_moveThumbHandler","document.up":"_releaseThumbUpHandler","buttonOk.click":"_handleButtonClick","buttonCancel.click":"_handleButtonClick","buttonCustom.click":"_handleButtonClick","rChannelInput.wheel":"_inputWheelHandler","gChannelInput.wheel":"_inputWheelHandler","bChannelInput.wheel":"_inputWheelHandler","aChannelInput.wheel":"_inputWheelHandler","previewContainerTop.click":"_undo",resize:"_hideControlsByPriority","hexModeResizeTrigger.resize":"_resizeHoneycombItems"}}static get requires(){return{"Smart.Utilities.Draw":"smart.draw.js","Smart.Button":"smart.button.js","Smart.Tooltip":"smart.tooltip.js"}}template(){return`<div id="container">
                    <div id="gridModeContainer" class ="grid-mode-container">
                        <div id="defaultSamplesContainer" class ="default-samples-container"></div>
                        <div id="gridSamplesContainer" class ="grid-samples-container"></div>
                        <div id="materialGridSamplesContainer" class ="material-grid-samples-container"></div>
                        <div id="spectrumGridSamplesContainer" class ="spectrum-grid-samples-container"></div>
                        <smart-button id="buttonCustom" class ="button-custom-color primary" disabled="[[disabled]]" theme="[[theme]]" animation="[[animation]]"></smart-button>
                        <div id="userSamplesContainer" class ="user-samples-container"></div>
                        <smart-tooltip id="tooltip" arrow></smart-tooltip>
                    </div>
                    <div id="paletteModeContainer" class ="palette-mode-container">
                        <div id="colorPaletteContainer" class ="color-palette-container">
                            <div id="colorPalette" class ="color-palette">
                                <div id="colorPaletteThumb" class ="color-palette-thumb"></div>
                            </div>
                            <div id="hueScale" class ="hue-scale">
                                <div id="hueScaleThumb" class ="hue-scale-thumb"></div>
                            </div>
                            <div id="colorPaletteRadial" class ="color-palette-radial">
                                <div id="colorPaletteRadialThumb" class ="color-palette-radial-thumb"></div>
                            </div>
                            <div id="colorPaletteHexagonal" class ="color-palette-hexagonal"></div>
                            <div id="brightnessScale" class ="brightness-scale">
                                <div id="brightnessScaleThumb" class ="brightness-scale-thumb"></div>
                            </div>
                            <div id="colorControlsContainer" class ="color-controls-container">
                                <div id="previewContainer" class ="preview-container gradient-background">
                                       <span id="previewContainerTop" class ="preview-container-top"></span>
                                       <span id="previewContainerBottom" class ="preview-container-bottom"></span>
                                </div>
                                <label for="rChannelInput" id="rChannelLabel" class ="r-channel"></label><input type="number" min="0" max="255" id="rChannelInput" class ="color-input r-channel" value="255" disabled="[[disabled]]" theme="[[theme]]">
                                <label for="gChannelInput" id="gChannelLabel" class ="g-channel"></label><input type="number" min="0" max="255" id="gChannelInput" class ="color-input g-channel" value="255" disabled="[[disabled]]" theme="[[theme]]">
                                <label for="bChannelInput" id="bChannelLabel" class ="b-channel"></label><input type="number" min="0" max="255" id="bChannelInput" class ="color-input b-channel" value="255" disabled="[[disabled]]" theme="[[theme]]">
                                <label for="hexInput" id="hexLabel" class ="hex"></label><input type="text" id="hexInput" class ="color-input hex" value="FFFFFF" disabled="[[disabled]]" theme="[[theme]]" maxlength="6">
                            </div>
                        <span id="hexModeResizeTrigger" class ="color-sample hex-mode-resize-trigger"></span>
                        </div>
                        <div id="alphaChannelContainer" class ="alpha-channel-container">
                            <div id="alphaChannelScale" class ="alpha-channel-scale">
                                <div id="alphaChannelThumb" class ="alpha-channel-thumb"></div>
                            </div>
                            <label for="aChannelInput" id="alphaChannelLabel" class ="a-channel"></label><input type="text" id="aChannelInput" class ="color-input a-channel" value="1" disabled="[[disabled]]" theme="[[theme]]" maxlength="3">
                        </div>
                    </div>
                    <div id="buttonsContainer" class ="buttons-container">
                        <smart-button id="buttonOk" class ="button-ok primary" disabled="[[disabled]]" theme="[[theme]]" animation="[[animation]]"></smart-button>
                        <smart-button id="buttonCancel" class ="button-cancel primary outlined" disabled="[[disabled]]" theme="[[theme]]" animation="[[animation]]"></smart-button>
                    </div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}propertyChangedHandler(t,i,a){function n(){o._generateGridStructures(),o._applyValue(o.value)}const o=this;switch(t){case"dataSource":o._customPalette=o._mapDataSourceToPalette(),n(o.displayMode);break;case"inverted":case"palette":case"displayMode":n(o.displayMode);break;case"locale":case"messages":o._localizeLabels();break;case"editAlphaChannel":a||(o._RGBA.a=1);break;case"value":if(!o._isValidColor(a)){o.value=i;break}o._applyValue(a);break;case"columnCount":{const t=o.$.container.style;a&&8!==a?t.setProperty("--smart-color-panel-grid-mode-column-count",a):t.removeProperty("--smart-color-panel-grid-mode-column-count"),o._generatePaletteUserColorGrid(),o._generateSpectrumGrid(parseInt(a)),"hexagonal"===o.displayMode&&o._generateHoneycomb(a,o._HSV)}break;default:super.propertyChangedHandler(t,i,a);}}ready(){super.ready();const t=this;t._initializeBaseVars(),t._localizeLabels(),t._generateGridStructures(),t.value&&t._applyValue(t.value),t._hideControlsByPriority()}_handleColorPaletteDown(t){const i=this,a="palette"===i.displayMode?i.$.colorPaletteThumb:i.$.colorPaletteRadialThumb,n=i._getXYcoordinates(t);if(!(i.disabled||i.readonly||!n)){if(i._activeComponent=n.container,"palette"===i.displayMode)a.s=i._HSV.s=n.x/n.container.offsetWidth,a.v=i._HSV.v=1-n.y/n.container.offsetHeight;else if("radial"===i.displayMode){const t=i.$.colorPaletteRadial.offsetWidth,o=n.x-t/2,l=n.y-t/2;a.h=i._HSV.h=0>i._calcHueAngle(o,l)?360+i._calcHueAngle(o,l):i._calcHueAngle(o,l),a.s=i._HSV.s=i._validateInRange(2*i._calcSatDistance(o,l)/t,0,1)}i._applyValue(i._HSVtoRGBA(i._HSV),t),i._instantUpdate()}}_handleScalesDown(t){const i=this,a=i._getXYcoordinates(t);let n,o;if(!(i.disabled||i.readonly||!a)){if(i._activeComponent=a.container,a.container===i.$.hueScale){const t=i.$.hueScale.offsetHeight;n=a.y-i.$.hueScaleThumb.offsetHeight/2,o=t-i.$.hueScaleThumb.offsetHeight,i.$.hueScaleThumb.style.top=100*i._validateInRange(n,0,o)/t+"%",i.$.hueScaleThumb.h=i._HSV.h=360*(t-a.y)/t}else if(a.container===i.$.brightnessScale){n=a.y-i.$.brightnessScaleThumb.offsetHeight/2,o=i.$.brightnessScale.offsetHeight-i.$.brightnessScaleThumb.offsetHeight;const t=i._validateInRange(n,0,o)/i.$.brightnessScale.offsetHeight;i.$.brightnessScaleThumb.style.top=100*i._validateInRange(n,0,o)/i.$.brightnessScale.offsetHeight+"%",i.$.brightnessScaleThumb.style.top=100*t+"%",i.$.brightnessScaleThumb.v=i._HSV.v=1-t,i.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",t)}else n=a.x-i.$.alphaChannelThumb.offsetWidth/2,o=i.$.alphaChannelScale.offsetWidth-i.$.alphaChannelThumb.offsetWidth,i.$.alphaChannelThumb.style.left=100*i._validateInRange(n,0,o)/i.$.alphaChannelScale.offsetWidth+"%",i.$.alphaChannelThumb.a=i._RGBA.a=(a.container.offsetWidth-a.x)/a.container.offsetWidth,i._applyAlphaValue(i._RGBA.a,"alphaScale");i._applyValue(i._HSVtoRGBA(i._HSV),t),i._instantUpdate()}}_moveThumbHandler(t){const i=this,a=i._getXYcoordinates(t);if(!i.disabled&&!i.readonly&&i._activeComponent&&a){const n=i._activeComponent.offsetWidth,o=i._activeComponent.offsetHeight;switch(i._activeComponent){case i.$.colorPalette:{i.$.colorPaletteThumb.style.left=100*a.x/n+"%",i.$.colorPaletteThumb.style.top=100*a.y/o+"%",i.$.colorPaletteThumb.s=i._HSV.s=a.x/n,i.$.colorPaletteThumb.v=i._HSV.v=1-a.y/o;break}case i.$.colorPaletteRadial:{const t=n,o=a.x-t/2,l=a.y-t/2;i.$.colorPaletteRadialThumb.h=i._HSV.h=0>i._calcHueAngle(o,l)?360+i._calcHueAngle(o,l):i._calcHueAngle(o,l),i.inverted?i.$.colorPaletteRadialThumb.v=i._HSV.v=i._validateInRange(2*i._calcSatDistance(o,l)/t,0,1):i.$.colorPaletteRadialThumb.s=i._HSV.s=i._validateInRange(2*i._calcSatDistance(o,l)/t,0,1),i.$.previewContainerBottom.style.backgroundColor=i._HSVtoRGBA();break}case i.$.hueScale:{const t=a.y-i.$.hueScaleThumb.offsetHeight/2,n=o-i.$.hueScaleThumb.offsetHeight,l=100*i._validateInRange(t,0,n)/o;i.$.hueScaleThumb.h=i._HSV.h=360*(o-a.y)/o,i.$.hueScaleThumb.style.top=l+"%";break}case i.$.brightnessScale:{const t=a.y-i.$.brightnessScaleThumb.offsetHeight/2,n=o-i.$.brightnessScaleThumb.offsetHeight,l=i._validateInRange(t,0,n)/o;if(i.inverted?i.$.brightnessScaleThumb.s=i._HSV.s=1-l:i.$.brightnessScaleThumb.v=i._HSV.v=1-l,i.$.brightnessScaleThumb.style.top=100*l+"%","radial"===i.displayMode)i.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",l);else if("hexagonal"===i.displayMode){const t=i.inverted?{s:i._HSV.s}:{v:i._HSV.v};i._generateHoneycomb(i.columnCount,t)}break}case i.$.alphaChannelScale:{const t=a.x-i.$.alphaChannelThumb.offsetWidth/2,o=n-i.$.alphaChannelThumb.offsetWidth;i.$.alphaChannelThumb.a=i._RGBA.a=(n-a.x)/n,i.$.alphaChannelThumb.style.left=100*i._validateInRange(t,0,o)/n+"%";break}}i._applyValue(i._HSVtoRGBA(i._HSV),t),i._instantUpdate()}}_releaseThumbUpHandler(){const t=this,i=!!t._activeComponent;t._activeComponent=null;t.disabled||t.readonly||!i||t._instantUpdate()}_handleButtonClick(t){const i=this,a=i.value,n=t.target.closest("smart-button");return i.disabled||i.readonly?void 0:n===i.$.buttonCustom?(i.$container.addClass("custom-color-selection"),void(i._customColorSelection=!0)):i._customColorSelection?(i._userPalette.unshift(i.value),i._generatePaletteUserColorGrid(),i.$container.removeClass("custom-color-selection"),void(i._customColorSelection=!1)):"useButtons"!==i.applyValueMode||i._equalValues(i.value,i._HSVtoRGBA())?void 0:n===i.$.buttonCancel?(i._applyValue(i.value),void i.$.fireEvent("cancelButtonClick",{})):void(i.$.fireEvent("okButtonClick",{}),i._updatePreviewContainerValues(i._getValue("rgba"),!0),i.value=i._getValue(),i.$.fireEvent("valueChanged",{oldValue:a,newValue:i.value}))}_handleInputChange(t){const i=this,a=i.value,n=t.target;if(!(i.disabled||i.readonly)){if(-1<[i.$.rChannelInput,i.$.gChannelInput,i.$.bChannelInput,i.$.aChannelInput].indexOf(n))i._RGBA=i._getRGBAFromInputs(),i._HSV=i._getValue("hsv","rgba("+i._RGBA.r+", "+i._RGBA.g+", "+i._RGBA.b+", "+i._RGBA.a+")");else if(n===i.$.hexInput){const t=i.value?i._getValue("hex"):null,a="#"+n.value;i._isHEX(a)?(i.value=i.editAlphaChannel?i._toRGBA(a):i._toHEX(a),i._RGBA.a=1,i._applyValue(i.value)):n.value=t?t.substring(1):"ffffff"}const t=i.editAlphaChannel?i._getValue("rgba"):i._getValue("hex");i._applyValue(t),"useButtons"===i.applyValueMode||(i.value=i.editAlphaChannel?i._getValue("rgba"):i._getValue("hex"),i.$.fireEvent("valueChanged",{oldValue:a,newValue:i.value}))}}_applyValue(t,i){const a=this;t&&(a._HSVRGBArefresh(t),"palette"===a.displayMode?a._applyValueInPaletteMode(i):"radial"===a.displayMode?a._applyValueInRadialMode(i):"hexagonal"===a.displayMode?(a._applyValueInHexagonalMode(i),a._applyValueInAnyGridMode(t,a.$.colorPaletteHexagonal)):a._applyValueInAnyGridMode(t),a._applyAlphaValue(a._RGBA.a),a.$.hiddenInput.value=a.value)}_applyAlphaValue(t,i){const a=this;if(t=a._toFixed(t),"alphaScale"!==i){const i=a.$.alphaChannelThumb.offsetWidth,n=a.$.alphaChannelScale.offsetWidth,o=(1-t)*n>i?(1-t)*i:0;a.$.alphaChannelThumb.style.left="calc("+100*(1-t)+"% - "+o+"px)"}"alphaInput"!==i&&(a.$.aChannelInput.value=t),a._RGBA.a=t,a._updatePreviewContainerValues(a._getValue("rgba"))}_applyValueInPaletteMode(t){const i=this,a=i._getValue("hex"),n=i.$.hueScale.offsetHeight,o=i.$.hueScaleThumb.offsetHeight,l=i.$.hueScale.offsetHeight*(360-i._HSV.h)/360,r=0<l-o?l/n*o:0;i._setRGBAToInputs(),i.$.hexInput.value=a.substring(1),i.$.alphaChannelScale.style.setProperty("--smart-color-panel-alpha-channel-color",a),i._activeComponent||(i.$.alphaChannelThumb.style.left="calc("+100*(1-i._RGBA.a)+"% - 3px)",i.$.hueScaleThumb.style.top="calc("+100*l/n+"% - "+r+"px)",i._setPalettePointerXYPosition()),i._activeComponent===i.$.hueScale&&(i.$.colorPalette.style.backgroundColor=i._rgbaToRGB(i._HSVtoRGBA({h:i.$.hueScaleThumb.h,s:1,v:1}))),i._activeComponent&&i._activeComponent!==i.$.colorPalette||i._setPalettePointerXYPosition(t),i.event?i._HSV.h=i.$.hueScaleThumb.h:(i.$.hueScaleThumb.h=i._HSV.h,i.$.colorPalette.style.backgroundColor=i._rgbaToRGB(i._HSVtoRGBA({h:i._HSV.h,s:1,v:1}))),i._updatePreviewContainerValues(i._getValue("rgba"))}_applyValueInRadialMode(){const t=this,i=t._getValue("hex");if(t._setRGBAToInputs(),t.$.hexInput.value=i.substring(1),t.$.alphaChannelScale.style.setProperty("--smart-color-panel-alpha-channel-color",i),t._activeComponent||(t.$.alphaChannelThumb.style.left="calc("+100*(1-t._RGBA.a)+"% - 3px)",t.$.brightnessScaleThumb.style.top="calc("+100*(1-t._HSV.v)+"% - 3px)"),t._activeComponent&&t._activeComponent!==t.$.colorPaletteRadial||t._setPalettePointerXYPosition(),t._updatePreviewContainerValues(t._getValue("rgba")),t.inverted){const i=null===t.value?"black":t._HSVtoRGBA({h:t._HSV.h,s:1,v:t._HSV.v});t.$.brightnessScale.style.backgroundImage="linear-gradient("+i+", white)"}else{const i=null===t.value?"white":t._HSVtoRGBA({h:t._HSV.h,s:t._HSV.s,v:1});t.$.brightnessScale.style.backgroundImage="linear-gradient("+i+", black)"}}_applyValueInHexagonalMode(){const t=this,i=t._getValue("hex");if(t._setRGBAToInputs(),t.$.hexInput.value=i.substring(1),t.$.alphaChannelScale.style.setProperty("--smart-color-panel-alpha-channel-color",i),t._activeComponent||(t.$.alphaChannelThumb.style.left="calc("+100*(1-t._RGBA.a)+"% - 3px)",t.$.brightnessScaleThumb.style.top="calc("+100*(1-t._HSV.v)+"% - 3px)"),t._updatePreviewContainerValues(t._getValue("rgba")),t.inverted){const i=t._HSVtoRGBA({h:t._HSV.h,s:1,v:t._HSV.v},1);t.$.brightnessScale.style.backgroundImage="linear-gradient("+i+", white)"}else{const i=t._HSVtoRGBA({h:t._HSV.h,s:t._HSV.s,v:1},1);t.$.brightnessScale.style.backgroundImage="linear-gradient("+i+", black)"}t._applyValueInAnyGridMode(i,t.$.colorPaletteHexagonal)}_radialThumbPoint(t,i,a,n){var o=Math.round,l=Math.PI;const r={x:o(Math.cos(a*l/180)*n*t+t),y:o(Math.sin(a*l/180)*n*t+i)};return r}_updatePreviewContainerValues(t,i){const a=this;("instantly"===a.applyValueMode||i)&&(a.$.previewContainerTop.style.backgroundColor=t),a.$.previewContainerBottom.style.backgroundColor=t}_applyValueInAnyGridMode(t,i){const a=this;if(!t&&null!==t)return;i=i||a.$.gridModeContainer;const n=Array.from(i.getElementsByClassName("color-sample"));let o=null;for(let l=0;l<n.length;l++){const i=n[l];if(a._equalValues(i.colorCode,t)){o=n[l];break}}a._changeSampleSelection(o)}_generatePaletteGrid(){const t=this,a=t["_"+t.palette+"Palette"];let n=document.createDocumentFragment();for(let t=0;t<a.length;t++){const i=document.createElement("span"),o=a[t];i.className="color-sample",i.colorCode=o,i.style.backgroundColor=o,n.appendChild(i)}t.$.gridSamplesContainer.innerHTML="",t.$.gridSamplesContainer.appendChild(n)}_generatePaletteUserColorGrid(){const t=this,a=t._userPalette.slice(0,t.columnCount||1);let n=document.createDocumentFragment();if(0===a.length){const t=document.createElement("span");t.className="color-sample user-color empty",t.colorCode=null,n.appendChild(t)}else for(let o=0;o<a.length;o++){const i=t._createColorSample(a[o],"user-color");n.appendChild(i)}t.$.userSamplesContainer.innerHTML="",t.$.userSamplesContainer.appendChild(n)}_initializeBaseVars(){const t=this;t._draw=new Smart.Utilities.Draw(t.$.colorPaletteHexagonal),t._renderer=new Smart.Utilities.Renderer(t._draw),t._RGBA={r:255,g:255,b:255,a:1},t._HSV={h:0,s:0,v:1},t.$.hueScaleThumb.h=0,t.$.colorPaletteThumb.s=0,t.$.colorPaletteThumb.v=1,t.$.colorPaletteRadialThumb.h=0,t.$.colorPaletteRadialThumb.s=0,t.$.brightnessScaleThumb.v=1,t.$.alphaChannelThumb.a=1,t._defaultPalette=["rgb(0, 0, 0)","rgb(153, 51, 0)","rgb(51, 51, 0)","rgb(0, 51, 0)","rgb(0, 51, 102)","rgb(0, 0, 128)","rgb(51, 51, 153)","rgb(51, 51, 51)","rgb(128, 0, 0)","rgb(255, 102, 0)","rgb(128, 128, 0)","rgb(0, 128, 0)","rgb(0, 128, 128)","rgb(0, 0, 255)","rgb(102, 102, 153)","rgb(128, 128, 128)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(153, 204, 0)","rgb(51, 153, 102)","rgb(51, 204, 204)","rgb(51, 102, 255)","rgb(128, 0, 128)","rgb(153, 153, 153)","rgb(255, 0, 255)","rgb(255, 204, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 204, 255)","rgb(153, 51, 102)","rgb(192, 192, 192)","rgb(255, 153, 204)","rgb(255, 204, 153)","rgb(255, 255, 153)","rgb(204, 255, 204)","rgb(204, 255, 255)","rgb(153, 204, 255)","rgb(204, 153, 255)","rgb(255, 255, 255)"],t._grayPalette=t._generateShades(40,"gray"),t._redPalette=t._generateShades(40,"red"),t._greenPalette=t._generateShades(40,"green"),t._bluePalette=t._generateShades(40,"blue"),t._customPalette=t._mapDataSourceToPalette(),t._userPalette=[],t._colorPalette={},t._cssColorNamesHEX={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},t._defaultModeThemeColors=["#FFFFFF","#000000","#E6E6E6","#495469","#5671C2","#D48439","#A5A5A5","#EEC328","#7399D3","#85AA4C"],t._defaultModeShadesColors=["#F2F2F2","#808080","#D0CECE","#D6DCE4","#DDEBF7","#FCE4D6","#EBEBEB","#FFF2CC","#DDE5F7","#E2EFDA","#D8D8D8","#595959","#AEAAAA","#ACB9CA","#BDD7EE","#F6CAAD","#DBDBDB","#FFE699","#B4C6E7","#C6E0B4","#BFBFBF","#404040","#757171","#8497B0","#9BC2E6","#F4B084","#C0C0C0","#FFD966","#8EA9DB","#A9D08E","#A6A6A6","#262626","#312F2F","#333F4F","#2F75B5","#C65911","#7B7B7B","#BF8F00","#305496","#548235","#808080","#0D0D0D","#161616","#222B35","#1F4E78","#833C0C","#525252","#806000","#203764","#375623"],t._defaultModeStandardColors=["#A52A0D","#DB3A15","#EEC328","#FEFE33","#A6CD57","#62AC54","#65ADEE","#3F6FBE","#10205F","#64379E"],t._materialColors={Red:{50:"rgb(255, 235, 238)",100:"rgb(255, 205, 210)",200:"rgb(239, 154, 154)",300:"rgb(229, 115, 115)",400:"rgb(239, 83, 80)",500:"rgb(244, 67, 54)",600:"rgb(229, 57, 53)",700:"rgb(211, 47, 47)",800:"rgb(198, 40, 40)",900:"rgb(183, 28, 28)","A 100":"rgb(255, 138, 128)","A 200":"rgb(255, 82, 82)","A 400":"rgb(255, 23, 68)","A 700":"rgb(213, 0, 0)"},Pink:{50:"rgb(252, 228, 236)",100:"rgb(248, 187, 208)",200:"rgb(244, 143, 177)",300:"rgb(240, 98, 146)",400:"rgb(236, 64, 122)",500:"rgb(233, 30, 99)",600:"rgb(216, 27, 96)",700:"rgb(194, 24, 91)",800:"rgb(173, 20, 87)",900:"rgb(136, 14, 79)","A 100":"rgb(255, 128, 171)","A 200":"rgb(255, 64, 129)","A 400":"rgb(245, 0, 87)","A 700":"rgb(197, 17, 98)"},Purple:{50:"rgb(243, 229, 245)",100:"rgb(225, 190, 231)",200:"rgb(206, 147, 216)",300:"rgb(186, 104, 200)",400:"rgb(171, 71, 188)",500:"rgb(156, 39, 176)",600:"rgb(142, 36, 170)",700:"rgb(123, 31, 162)",800:"rgb(106, 27, 154)",900:"rgb(74, 20, 140)","A 100":"rgb(234, 128, 252)","A 200":"rgb(224, 64, 251)","A 400":"rgb(213, 0, 249)","A 700":"rgb(170, 0, 255)"},"Deep Purple":{50:"rgb(237, 231, 246)",100:"rgb(209, 196, 233)",200:"rgb(179, 157, 219)",300:"rgb(149, 117, 205)",400:"rgb(126, 87, 194)",500:"rgb(103, 58, 183)",600:"rgb(94, 53, 177)",700:"rgb(81, 45, 168)",800:"rgb(69, 39, 160)",900:"rgb(49, 27, 146)","A 100":"rgb(179, 136, 255)","A 200":"rgb(124, 77, 255)","A 400":"rgb(101, 31, 255)","A 700":"rgb(98, 0, 234)"},Indigo:{50:"rgb(232, 234, 246)",100:"rgb(197, 202, 233)",200:"rgb(159, 168, 218)",300:"rgb(121, 134, 203)",400:"rgb(92, 107, 192)",500:"rgb(63, 81, 181)",600:"rgb(57, 73, 171)",700:"rgb(48, 63, 159)",800:"rgb(40, 53, 147)",900:"rgb(26, 35, 126)","A 100":"rgb(140, 158, 255)","A 200":"rgb(83, 109, 254)","A 400":"rgb(61, 90, 254)","A 700":"rgb(48, 79, 254)"},Blue:{50:"rgb(227, 242, 253)",100:"rgb(187, 222, 251)",200:"rgb(144, 202, 249)",300:"rgb(100, 181, 246)",400:"rgb(66, 165, 245)",500:"rgb(33, 150, 243)",600:"rgb(30, 136, 229)",700:"rgb(25, 118, 210)",800:"rgb(21, 101, 192)",900:"rgb(13, 71, 161)","A 100":"rgb(130, 177, 255)","A 200":"rgb(68, 138, 255)","A 400":"rgb(41, 121, 255)","A 700":"rgb(41, 98, 255)"},"Light Blue":{50:"rgb(225, 245, 254)",100:"rgb(179, 229, 252)",200:"rgb(129, 212, 250)",300:"rgb(79, 195, 247)",400:"rgb(41, 182, 246)",500:"rgb(3, 169, 244)",600:"rgb(3, 155, 229)",700:"rgb(2, 136, 209)",800:"rgb(2, 119, 189)",900:"rgb(1, 87, 155)","A 100":"rgb(128, 216, 255)","A 200":"rgb(64, 196, 255)","A 400":"rgb(0, 176, 255)","A 700":"rgb(0, 145, 234)"},Cyan:{50:"rgb(224, 247, 250)",100:"rgb(178, 235, 242)",200:"rgb(128, 222, 234)",300:"rgb(77, 208, 225)",400:"rgb(38, 198, 218)",500:"rgb(0, 188, 212)",600:"rgb(0, 172, 193)",700:"rgb(0, 151, 167)",800:"rgb(0, 131, 143)",900:"rgb(0, 96, 100)","A 100":"rgb(132, 255, 255)","A 200":"rgb(24, 255, 255)","A 400":"rgb(0, 229, 255)","A 700":"rgb(0, 184, 212)"},Teal:{50:"rgb(224, 242, 241)",100:"rgb(178, 223, 219)",200:"rgb(128, 203, 196)",300:"rgb(77, 182, 172)",400:"rgb(38, 166, 154)",500:"rgb(0, 150, 136)",600:"rgb(0, 137, 123)",700:"rgb(0, 121, 107)",800:"rgb(0, 105, 92)",900:"rgb(0, 77, 64)","A 100":"rgb(167, 255, 235)","A 200":"rgb(100, 255, 218)","A 400":"rgb(29, 233, 182)","A 700":"rgb(0, 191, 165)"},Green:{50:"rgb(232, 245, 233)",100:"rgb(200, 230, 201)",200:"rgb(165, 214, 167)",300:"rgb(129, 199, 132)",400:"rgb(102, 187, 106)",500:"rgb(76, 175, 80)",600:"rgb(67, 160, 71)",700:"rgb(56, 142, 60)",800:"rgb(46, 125, 50)",900:"rgb(27, 94, 32)","A 100":"rgb(185, 246, 202)","A 200":"rgb(105, 240, 174)","A 400":"rgb(0, 230, 118)","A 700":"rgb(0, 200, 83)"},"Light Green":{50:"rgb(241, 248, 233)",100:"rgb(220, 237, 200)",200:"rgb(197, 225, 165)",300:"rgb(174, 213, 129)",400:"rgb(156, 204, 101)",500:"rgb(139, 195, 74)",600:"rgb(124, 179, 66)",700:"rgb(104, 159, 56)",800:"rgb(85,139,47)",900:"rgb(51,105,30)","A 100":"rgb(204,255,144)","A 200":"rgb(178,255,89)","A 400":"rgb(118,255,3)","A 700":"rgb(100, 221, 23)"},Lime:{50:"rgb(249, 251, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(244, 255, 129)","A 200":"rgb(238, 255, 65)","A 400":"rgb(198, 255, 0)","A 700":"rgb(174, 234, 0)"},Yellow:{50:"rgb(255, 253, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(255, 255, 141)","A 200":"rgb(255, 255, 0)","A 400":"rgb(255, 234, 0)","A 700":"rgb(255, 214, 0)"},Amber:{50:"rgb(255, 248, 225)",100:"rgb(255, 236, 179)",200:"rgb(255, 224, 130)",300:"rgb(255, 213, 79)",400:"rgb(255, 202, 40)",500:"rgb(255, 193, 7)",600:"rgb(255, 179, 0)",700:"rgb(255, 160, 0)",800:"rgb(255, 143, 0)",900:"rgb(255, 111, 0)","A 100":"rgb(255, 229, 127)","A 200":"rgb(255, 215, 64)","A 400":"rgb(255, 196, 0)","A 700":"rgb(255, 171, 0)"},Orange:{50:"rgb(255, 243, 224)",100:"rgb(255, 224, 178)",200:"rgb(255, 204, 128)",300:"rgb(255, 183, 77)",400:"rgb(255, 167, 38)",500:"rgb(255, 152, 0)",600:"rgb(251, 140, 0)",700:"rgb(245, 124, 0)",800:"rgb(239, 108, 0)",900:"rgb(230, 81, 0)","A 100":"rgb(255, 209, 128)","A 200":"rgb(255, 171, 64)","A 400":"rgb(255, 145, 0)","A 700":"rgb(255, 109, 0)"},"Deep Orange":{50:"rgb(251, 233, 231)",100:"rgb(255, 204, 188)",200:"rgb(255, 171, 145)",300:"rgb(255, 138, 101)",400:"rgb(255, 112, 67)",500:"rgb(255, 87, 34)",600:"rgb(244, 81, 30)",700:"rgb(230, 74, 25)",800:"rgb(216, 67, 21)",900:"rgb(191, 54, 12)","A 100":"rgb(255, 158, 128)","A 200":"rgb(255, 110, 64)","A 400":"rgb(255, 61, 0)","A 700":"rgb(221, 44, 0)"},Brown:{50:"rgb(239, 235, 233)",100:"rgb(215, 204, 200)",200:"rgb(188, 170, 164)",300:"rgb(161, 136, 127)",400:"rgb(141, 110, 99)",500:"rgb(121, 85, 72)",600:"rgb(109, 76, 65)",700:"rgb(93, 64, 55)",800:"rgb(78, 52, 46)",900:"rgb(62, 39, 35)","A 100":"","A 200":"","A 400":"","A 700":""},Grey:{50:"rgb(250, 250, 250)",100:"rgb(245, 245, 245)",200:"rgb(238, 238, 238)",300:"rgb(224, 224, 224)",400:"rgb(189, 189, 189)",500:"rgb(158, 158, 158)",600:"rgb(117, 117, 117)",700:"rgb(97, 97, 97)",800:"rgb(66, 66, 66)",900:"rgb(33, 33, 33)","A 100":"","A 200":"","A 400":"","A 700":""},"Blue Grey":{50:"rgb(236, 239, 241)",100:"rgb(207, 216, 220)",200:"rgb(176, 190, 197)",300:"rgb(144, 164, 174)",400:"rgb(120, 144, 156)",500:"rgb(96, 125, 139)",600:"rgb(84, 110, 122)",700:"rgb(69, 90, 100)",800:"rgb(55, 71, 79)",900:"rgb(38, 50, 56)","A 100":"","A 200":"","A 400":"","A 700":""}}}_mapDataSourceToPalette(){const t=this;let a=[];if(!t.dataSource||!Array.isArray(t.dataSource)||0===t.dataSource.length)return[];for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n];"string"==typeof i?a.push(t.dataSource[n]):"object"==typeof i&&(i.value&&"string"==typeof i||i[t.valueMember]&&"string"==typeof i[t.valueMember])?a.push(t.dataSource[n]):a.push(t.dataSource[n])}return a}_handleSampleClick(t){const i=this;if(!i.disabled&&!i.readonly&&t.target&&t.target.classList.contains("color-sample")){const a=t.target,n=i.value;i._changeSampleSelection(a),"hexagonal"===i.displayMode&&-1<i._hexagonItems.indexOf(a)&&(i._HSV.h=a.h,i.inverted?(i._HSV.s=i.$.brightnessScaleThumb.s,i._HSV.v=a.v):(i._HSV.s=a.s,i._HSV.v=i.$.brightnessScaleThumb.v),i._applyValue(i._HSVtoRGBA(i._HSV),t),i._instantUpdate()),i._HSVRGBArefresh(a.colorCode),"instantly"!==i.applyValueMode||(i.$.hiddenInput.value=i.value=a.colorCode,i.$.fireEvent("valueChanged",{oldValue:n,newValue:i.value}))}}_changeSampleSelection(t){const i=this;if(!t||t.classList.contains("selected"))return void(i._selectedItem&&"hexagonal"!==i.displayMode&&i._selectedItem.classList.remove("selected"));const a=i._renderer._getContrastColor(i._rgbaToHEX(i._toRGBA(t.colorCode))),n=t.closest("svg");Array.from(i.getElementsByClassName("selected")).forEach(t=>{t.classList.remove("selected"),t.style.stroke=null}),t.classList.add("selected"),i._selectedItem=t,t.style.stroke=a,n&&n.appendChild(t)}_getXYcoordinates(t){if(!t)return;const i=this,a=i._activeComponent||t.originalEvent.target,n=a.closest(".color-palette")||a.closest(".color-palette-radial")||a.closest(".hue-scale")||a.closest(".brightness-scale")||a.closest(".alpha-channel-scale");if(!n||i.disabled||i.readonly)return;const o=n.getBoundingClientRect();let l=t.x-o.left,r=t.y-o.top;return 0>l?l=0:l>n.offsetWidth&&(l=n.offsetWidth),0>r?r=0:r>n.offsetHeight&&(r=n.offsetHeight),{x:l,y:r,container:n}}_inputWheelHandler(t){const i=this,a=i.value,n=t.target,o=n===i.$.aChannelInput;let l=o?parseFloat(n.value)||0:parseInt(n.value)||0;if(o)return l=0>t.deltaY?l+.1:l-.1,n.value=i._toFixed(i._validateInRange(l,0,1)),i._RGBA=i._getRGBAFromInputs(),i._applyAlphaValue(i._RGBA.a,"alphaInput"),i.value=i.editAlphaChannel?i._getValue("rgba"):i._getValue("hex"),void i._updateValue();l=0>t.deltaY?l+1:l-1,n.value=i._validateInRange(l,0,255),i._RGBA=i._getRGBAFromInputs();const r="rgba("+i._RGBA.r+", "+i._RGBA.g+", "+i._RGBA.b+", "+i._RGBA.a+")";i._HSV=i._getValue("hsv",r),i._applyValue(r,t);"useButtons"===i.applyValueMode||(i.value=i.editAlphaChannel?i._getValue("rgba"):i._getValue("hex"),i.$.fireEvent("valueChanged",{oldValue:a,newValue:i.value}))}_updateValue(){const t=this,i=t.value;t._RGBA=t._getRGBAFromInputs(),t.value=t.editAlphaChannel?t._getValue("rgba"):t._getValue("hex"),t._updatePreviewContainerValues(t.value),t._setPalettePointerXYPosition(),t.$.fireEvent("valueChanged",{oldValue:i,newValue:t.value})}_setPalettePointerXYPosition(t){const i=this;if(-1!==["palette","radial"].indexOf(i.displayMode))if("palette"===i.displayMode){const a=i._getXYcoordinates(t);i.$.colorPaletteThumb.style.left=t&&a&&a.x?100*a.x/t.target.offsetWidth+"%":100*i._HSV.s+"%",i.$.colorPaletteThumb.style.top=t&&a&&a.y?100*a.y/t.target.offsetHeight+"%":100*(1-i._HSV.v)+"%"}else{const t=i._radialThumbPoint(i.$.colorPaletteRadial.offsetWidth/2,i.$.colorPaletteRadial.offsetHeight/2,i._HSV.h,i._HSV.s);i.$.colorPaletteRadialThumb.style.left=100*t.x/i.$.colorPaletteRadial.offsetWidth+"%",i.$.colorPaletteRadialThumb.style.top=100*t.y/i.$.colorPaletteRadial.offsetHeight+"%"}}_handleGridModeCellHover(t){const i=this,a=t.target.closest(".color-sample");if(!i.disabled&&a&&"none"!==i.tooltipDisplayMode){if(i.$.tooltip.arrow="hexagonal"!==i.displayMode,!i._isValidColor(a.colorCode))return void(i.$.tooltip.disabled=!0);switch(i.$.tooltip.disabled=!1,i.$.tooltip.selector=a,i.tooltipDisplayMode){case"rgba":i.$.tooltip.value=i._toRGBA(a.colorCode)||"";break;case"rgb":i.$.tooltip.value=i._rgbaToRGB(i._toRGBA(a.colorCode))||"";break;case"hex":i.$.tooltip.value=i._rgbaToHEX(i._toRGBA(a.colorCode))||"";}}}_localizeLabels(){const t=this;t.$.rChannelLabel.innerHTML=t.localize("redPrefix"),t.$.gChannelLabel.innerHTML=t.localize("greenPrefix"),t.$.bChannelLabel.innerHTML=t.localize("bluePrefix"),t.$.hexLabel.innerHTML=t.localize("hexPrefix"),t.$.alphaChannelLabel.innerHTML=t.localize("alphaPrefix"),t.$.buttonCustom.content=t.localize("customColor"),t.$.buttonOk.content=t.localize("ok"),t.$.buttonCancel.content=t.localize("cancel")}_generateHoneycomb(t,i){const a=this,n=parseInt(getComputedStyle(a).getPropertyValue("--smart-color-panel-grid-mode-item-size"))/4,o=Math.sqrt(5*Math.pow(n,2)),l=0==t%2?parseInt(t)+1:parseInt(t),r=i&&i.s?i.s:1,s=i&&i.v?i.v:1,d=a._calculateHexagonCoords(l,o,1),m=d[Math.floor(d.length/2)],c=a._getHoneycomb30degDimmensions(d.length,o,1);a._draw&&a._draw.clear(),a._hexagonItems=[],a.$materialGridSamplesContainer.addClass("smart-hidden");for(let n=0;n<d.length;n++){const t=d[n].x-m.x,i=d[n].y-m.y,l=a._validateInRange(a._calcSatDistance(t,i)/m.x,0,1);let c=0>a._calcHueAngle(t,i)?360+a._calcHueAngle(t,i):a._calcHueAngle(t,i),u;switch(a.palette){case"red":c=0,u=a.inverted?a._HSVtoRGBA({h:c,s:r,v:l}):a._HSVtoRGBA({h:0,s:l,v:s});break;case"green":c=120,u=a.inverted?a._HSVtoRGBA({h:c,s:r,v:l}):a._HSVtoRGBA({h:120,s:l,v:s});break;case"blue":c=240,u=a.inverted?a._HSVtoRGBA({h:c,s:r,v:l}):a._HSVtoRGBA({h:240,s:l,v:s});break;case"gray":u=a.inverted?a._HSVtoRGBA({h:0,s:0,v:l}):a._HSVtoRGBA({h:0,s:0,v:1-l});break;default:u=a.inverted?a._HSVtoRGBA({h:c,s:r,v:l}):a._HSVtoRGBA({h:c,s:l,v:s});}const p={offsetX:d[n].x,offsetY:d[n].y,style:{fill:u,class:"color-sample"}};let g=a._hexagon(o,p);g.colorCode=u,g.h=c,a.inverted?(g.s=1,g.v=l):(g.v=1,g.s=l),a._hexagonItems.push(g)}a._draw.host.style.width=c.width+"px",a._draw.host.style.height=c.height+"px",a.$.container.style.setProperty("--smart-color-panel-palette-width",c.width+"px"),a.$.container.style.setProperty("--smart-color-panel-palette-height",c.height+"px"),a._applyValueInHexagonalMode(),a._hideControlsByPriority()}_hexagon(t,i){const a=this,n=a._shortStepHexagon(t),o=2*n,l=o+(i.offsetX||0),r=i.offsetY||0,s=l+o,d=r+n,m=s,c=d+t,u=m-o,p=c+n,g=u-o,h=p-n,_=a._draw.path("M "+l+","+r+" L "+s+","+d+" L "+m+","+c+" L "+u+","+p+" L "+g+","+h+" L "+g+","+(h-t)+" Z",i.style||{class:"color-sample"});return _}_shortStepHexagon(t){return Math.sqrt(Math.pow(t,2)/5)}_getHoneycomb30degDimmensions(t,i,a){const n=this,o=.5*(1+Math.sqrt(1-4*((1-t)/3))),l=n._shortStepHexagon(i);return{width:(2*o-1)*(4*l)+2*(2*o)*a,height:(2*o-1)*i+2*o*l+2*o*a}}_generateShades(t,i){var a=Math.max;const n=this,o=i||"gray";let l=[],r;t=a(parseInt(t),2);const s=255/(t-1);for(let d=0,m;d<t;d++)m=a(parseInt(255-d*s),0),n.inverted&&(m=255-m),r="red"===o?"rgb("+m+", 0, 0)":"green"===o?"rgb(0, "+m+", 0)":"blue"===o?"rgb(0, 0, "+m+")":"rgb("+m+", "+m+", "+m+")",l.push(r);return l}_generateColorSpectrum(t){var a=Math.min,n=Math.max;const o=this;let i=[];t=n(parseInt(t),2);const l=360/(t-1),r=2/t;let s=0,d=1,m=1;for(let c=0;c<t;c++){o.inverted?0==c?d=1:c<t/2?d=n(d-r,r/2):c<t-1?(m=n(m-r,r/2),d=a(d+r,1)):(m=n(m-r,r/2),d=a(d+r/4,1)):0==c?m=1:c<t/2?m=n(m-r,r/2):c<t-1?(d=n(d-r,r/2),m=a(m+r,1)):(d=n(d-r,r/2),m=a(m+r/4,1));for(let a=0;a<t;a++){s=parseInt(l*a),s=360===s?360-l/2:s;const t=o._HSVtoRGBA({h:s,s:d,v:m});i.push(t)}}return i}_generateSpectrumGrid(t){const a=this,n=Math.pow(t,2),i=document.createDocumentFragment(),o={},l=a._generateShades(t,"gray"),r=a._customPalette;let s;["grayShadesBox","spectrumBox","customColorsBox"].forEach(t=>{o[t]=document.createElement("div"),o[t].className=Smart.Utilities.Core.toDash(t),i.appendChild(o[t])}),s="default"===a.palette?a._generateColorSpectrum(t):-1<["gray","red","green","blue"].indexOf(a.palette)?a._generateShades(n,a.palette):a._generateColorSpectrum(t);for(let n=0;n<t;n++){const t=a._createColorSample(l[n],"gray-shade");o.grayShadesBox.appendChild(t)}for(let l=0;l<n;l++){const t=a._createColorSample(s[l],"spectrum");o.spectrumBox.appendChild(t)}for(let n=0;n<t;n++){const t=r[n];if(!t)break;const i=a._createColorSample(t,"custom-color");o.customColorsBox.appendChild(i)}a.$.spectrumGridSamplesContainer.innerHTML="",a.$.spectrumGridSamplesContainer.appendChild(i)}_generateDefaultGrid(){const t=this,a={},i=document.createDocumentFragment();["themeColorsLabel","themeColorsBox","themeShadesBox","standardColorsLabel","standardColorsBox"].forEach(t=>{a[t]=document.createElement("div"),a[t].className=Smart.Utilities.Core.toDash(t),i.appendChild(a[t])}),a.themeColorsLabel.innerText="Theme colors",a.standardColorsLabel.innerText="Standard colors";for(let n=0;n<t._defaultModeShadesColors.length;n++){const i=t._createColorSample(t._defaultModeShadesColors[n],"shades-color");a.themeShadesBox.appendChild(i)}for(let n=0;n<10;n++){const i=t._createColorSample(t._defaultModeThemeColors[n],"theme-color"),o=t._createColorSample(t._defaultModeStandardColors[n],"standard-color");a.themeColorsBox.appendChild(i),a.standardColorsBox.appendChild(o)}t.$.defaultSamplesContainer.innerHTML="",t.$.defaultSamplesContainer.appendChild(i)}_generateMaterialGrid(){const t=this,i=document.createDocumentFragment();t.$materialGridSamplesContainer.removeClass("smart-hidden");const a=t._createColorSample("rgb(255, 255, 255, 0)","material-color label-column");i.appendChild(a),Object.entries(t._materialColors.Red).forEach(a=>{const n=t._createColorSample("rgb(255, 255, 255, 0)","material-color header");n.innerText=a[0],i.appendChild(n)}),Object.entries(t._materialColors).forEach(a=>{const n=t._createColorSample("rgb(255, 255, 255, 0)","material-color label-column");n.innerText=a[0],i.appendChild(n),Object.entries(a[1]).forEach(a=>{const n=t._createColorSample(a[1],"material-color");i.appendChild(n)})}),t.$.materialGridSamplesContainer.innerHTML="",t.$.materialGridSamplesContainer.appendChild(i)}_createColorSample(t,i){const a=document.createElement("span"),n=t?"":" empty";return a.className="color-sample "+i+n,a.colorCode=t,a.style.backgroundColor=t,a}_undo(){const t=this;t.disabled||t.readonly||"useButtons"!==t.applyValueMode||t.disableUndo||t._applyValue(t.value)}_calculateHexagonCoords(t,a,n){const i=this,o=t,l=function(t){return t=0==t%2?t+1:t,(t+1)/2}(t),r=i._shortStepHexagon(a),s=2*r+n,d=s*(o-1)/2;let m=[];for(let c=0;c<o;c++){const i=c<l?l+c:t-1-(c-l),o=c<l?d-c*s:d-(t-c-1)*s,u=c*(a+r+n);for(let t=0;t<i;t++){const i=o+t*(4*r+2*n);m.push({x:i,y:u})}}return m}_generateGridStructures(){const t=this;switch(t.displayMode){case"spectrumGrid":t._generateSpectrumGrid(t.columnCount);break;case"materialGrid":t._generateMaterialGrid();break;case"default":t._generateDefaultGrid();break;case"hexagonal":t._generateHoneycomb(t.columnCount,t._HSV);break;case"grid":t._generatePaletteGrid(),t._generatePaletteUserColorGrid();}}_hideControlsByPriority(){const t=this,a=t.hideContentToFit.slice().reverse(),n=["hexLabel","hexInput","rChannelLabel","rChannelInput","gChannelLabel","gChannelInput","bChannelLabel","bChannelInput","previewContainer","alphaChannelLabel","aChannelInput"];let o=a.length;for(n.forEach(i=>t["$"+i].removeClass("smart-hidden"));t.$.colorControlsContainer.scrollHeight>t.$.colorControlsContainer.offsetHeight&&0<o;)switch(o--,a[o]){case"HEX":n.slice(0,2).forEach(i=>t["$"+i].addClass("smart-hidden"));break;case"RGB":n.slice(2,8).forEach(i=>t["$"+i].addClass("smart-hidden"));break;case"previewContainer":t.$previewContainer.addClass("smart-hidden");break;case"alpha":n.slice(9,11).forEach(i=>t["$"+i].addClass("smart-hidden"));}}_resizeHoneycombItems(){const t=this;"hexagonal"!==t.displayMode||t._generateHoneycomb(t.columnCount,t._HSV)}_getValue(t,i){const a=this,n=a._RGBA;let o=null,l;return t?("hex"===t?o=a._rgbArrayToHEX([n.r,n.g,n.b]):"rgb"===t?o="rgb("+n.r+", "+n.g+", "+n.b+")":"rgba"===t?o="rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")":"HSVtoRGBAarray"===t?(o=a._HSVtoRGBA(a._HSV),l=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(o.replace(/\s/g,"")),o={r:parseInt(l[1]),g:parseInt(l[2]),b:parseInt(l[3]),a:a._toFixed(l[4])}):"hsv"===t?i&&a._isValidColor(i)&&(o=a._colorToHSV(i)):void 0,o||null):(o=a.editAlphaChannel?"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")":a._rgbArrayToHEX([n.r,n.g,n.b]),o||null)}_instantUpdate(){const t=this,i=t.value;"instantly"!==t.applyValueMode||(t.value=t._getValue(),t.$.fireEvent("valueChanged",{oldValue:i,newValue:t.value}))}_equalValues(t,i){const a=this;if(t===i)return!0;return!!(t&&i)&&a._toRGBA(t)===a._toRGBA(i)}_toHEX(t){const i=this;if(!i._isHEX(t))return!1;const a=/^#(.)(.)(.)$/gi.exec(t),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(a||n)return t}_toRGBA(t){const i=this;let a=i.value;if(i._isRGBA(t))return t;if(i._isValidColorName(t))a=i._cssColorNamesHEX[t.toLowerCase()];else if(i._isHEX(t))a=function(t){const i=/^#(.)(.)(.)$/gi.exec(t),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),n=i?parseInt(i[1]+i[1],16):parseInt(a[1],16),o=i?parseInt(i[2]+i[2],16):parseInt(a[2],16),l=i?parseInt(i[3]+i[3],16):parseInt(a[3],16);return"rgba("+n+", "+o+", "+l+", 1)"}(t);else if(i._isRGB(t))a=t.toLowerCase(),a=a.replace("rgb","rgba"),a=i.editAlphaChannel?a.replace(")",", "+(i._RGBA.a||1)+")"):a.replace(")",", 1)");else return!1;return a}_rgbaToRGB(t){const i=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,""));return"rgb("+i[1].trim()+", "+i[2].trim()+", "+i[3].trim()+")"}_rgbaToHEX(t){const i=this,a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,""));return i._rgbArrayToHEX([a[1],a[2],a[3]])}_rgbArrayToHEX(t){let a="#";for(let n=0,i;3>n;n++)i=parseInt(t[n]).toString(16).toUpperCase(),i=1===i.length?0+i:i,a+=i;return a}_colorToHSV(t){const i=this;if(!i._isValidColor(t))return;t=i._toRGBA(t).replace(/\s/g,"");const a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(t),n=a[1]/255,o=a[2]/255,l=a[3]/255;let r={h:0,s:0,v:0},s=0,d=0;if(n>=o&&n>=l?(d=n,s=o>l?l:o):o>=l&&o>=n?(d=o,s=n>l?l:n):(d=l,s=o>n?n:o),r.v=d,r.s=d?(d-s)/d:0,!r.s)r.h=i._HSV.h?i._HSV.h:0;else{const t=d-s;r.h=n==d?(o-l)/t:o==d?2+(l-n)/t:4+(n-o)/t,r.h=Math.round(60*r.h),0>r.h&&(r.h+=360)}return r.s=parseFloat(r.s),r.v=parseFloat(r.v),r}_HSVtoRGBA(t,i){var a=Math.round;t=t||{h:0,s:0,v:0};const n=this,o=t&&0<=t.h?t.h:n._HSV.h,l=t&&0<=t.s?t.s:n._HSV.s,s=t&&0<=t.v?t.v:n._HSV.v;let d=s*l,c=o/60,u=d*(1-Math.abs(c%2-1)),p,h,_;0<=c&&1>=c?[p,h,_]=[d,u,0]:1<=c&&2>=c?[p,h,_]=[u,d,0]:2<=c&&3>=c?[p,h,_]=[0,d,u]:3<=c&&4>=c?[p,h,_]=[0,u,d]:4<=c&&5>=c?[p,h,_]=[u,0,d]:5<=c&&6>=c&&([p,h,_]=[d,0,u]);const f=s-d,m=a(255*(p+f)),r=a(255*(h+f)),g=a(255*(_+f));return"rgba("+m+", "+r+", "+g+", "+(i||n._RGBA.a||0)+")"}_HSVRGBArefresh(t){const i=this;t&&(i._HSV=i._getValue("hsv",t)||{h:1,s:0,v:1},i._RGBA=i._getValue("HSVtoRGBAarray"))}_toFixed(t,i){return parseFloat(parseFloat(t).toFixed(i||2))}_validateInRange(t,i,a){return Math.min(Math.max(parseFloat(t),parseFloat(i)),parseFloat(a))}_isHEX(t){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}_isRGB(t){return /rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/i.test(t)}_isRGBA(t){return /rgba\((\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\)/i.test(t)}_isValidColorName(t){return!!(t&&"undefined"!=typeof this._cssColorNamesHEX[t.toLowerCase()])}_isValidColor(t){return this._isHEX(t)||this._isRGB(t)||this._isRGBA(t)||this._isValidColorName(t)}_getRGBAFromInputs(){return{r:parseInt(this.$.rChannelInput.value),g:parseInt(this.$.gChannelInput.value),b:parseInt(this.$.bChannelInput.value),a:this.$.aChannelInput.value}}_setRGBAToInputs(){const t=this;Object.entries(t._RGBA).forEach(i=>t.$[i[0]+"ChannelInput"].value=t._RGBA[i[0]])}_calcHueAngle(t,i){return 180*Math.atan2(i,t)/Math.PI}_calcSatDistance(t,i){var a=Math.pow;return Math.sqrt(a(t,2)+a(i,2))}}),Smart("smart-color-picker",class extends Smart.DropDownButton{static get properties(){return{acceptCustomValue:{value:!1,type:"boolean"},applyValueMode:{value:"instantly",allowedValues:["instantly","useButtons"],type:"string"},columnCount:{value:8,type:"number"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},disableUndo:{value:!1,type:"boolean"},displayMode:{value:"default",allowedValues:["default","grid","palette","radial","hexagonal","spectrumGrid","materialGrid"],type:"string"},dropDownAppendTo:{value:"body",type:"string"},dropDownHeight:{value:"auto",type:"string"},dropDownWidth:{value:"auto",type:"string"},editAlphaChannel:{value:!1,type:"boolean"},enableCustomColors:{value:!1,type:"boolean"},hidePreviewContainer:{value:!1,type:"boolean"},hideRGBEditor:{value:!1,type:"boolean"},hideHEXEditor:{value:!1,type:"boolean"},hideAlphaEditor:{value:!1,type:"boolean"},messages:{value:{en:{redPrefix:"R:",greenPrefix:"G:",bluePrefix:"B:",hexPrefix:"#:",alphaPrefix:"Alpha:",ok:"OK",cancel:"CANCEL",customColor:"CUSTOM COLOR ..."}},type:"object",extend:!0},name:{value:"",type:"string"},palette:{value:"default",allowedValues:["default","gray","red","green","blue","custom"],type:"string"},tooltipDisplayMode:{value:"hex",allowedValues:["none","rgba","rgb","hex"],type:"string"},value:{value:null,type:"string?"},valueDisplayMode:{value:"default",allowedValues:["default","colorBox","text","none"],type:"string"},valueDisplayFormat:{value:"default",allowedValues:["default","rgb","rgba","hex"],type:"string"},inverted:{value:!1,type:"boolean"},hideContentToFit:{value:["RGB","HEX","alpha","previewContainer"],type:"array"}}}static get listeners(){return{"actionInput.change":"_actionInputChangeHandler","colorPanel.cancelButtonClick":"close","colorPanel.okButtonClick":"_okButtonClickHandler","colorPanel.valueChanged":"_colorPanelChangeHandler"}}static get requires(){return{"Smart.ColorPanel":"smart.colorpanel.js"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div id="buttonsContainer" class ="smart-buttons-container">
                            <span id="actionButton" class ="smart-input smart-action-button">
                                <span id="colorSample" class="color-picker-sample"></span>
                                <input type="text" id="actionInput" class ="color-picker-action-input" placeholder="[[placeholder]]"/>
                                <span id="colorPickerPlaceholder" class ="color-picker-placeholder">[[placeholder]]</span>
                            </span>
                            <span id="dropDownButton" class ="smart-drop-down-button">
                                <span id="arrow"></span>
                            </span>
                        </div>
                        <div id="dropDownContainer" class ="smart-drop-down smart-drop-down-color-picker smart-drop-down-container smart-visibility-hidden">
                            <smart-scroll-viewer id="scrollViewer"
                                right-to-left="[[right-to-left]]" 
                                horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]">
                                    <smart-color-panel id="colorPanel"></smart-color-panel>
                            </smart-scroll-viewer>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(n._bindProperties(t),t){case"acceptCustomValue":case"disabled":case"readonly":n._handleActionInput();break;case"value":n.$.colorPanel._isValidColor(n.value)&&n._applyValue(n.value);break;default:super.propertyChangedHandler(t,i,a);}}ready(){super.ready();const t=this;t._bindProperties(),t._handleActionInput()}_colorPanelChangeHandler(t){const i=this,a=i.value,n=t.detail.newValue;i._applyValue(n),i.$.fireEvent("valueChanged",{newValue:n,oldValue:a})}_okButtonClickHandler(){const t=this,i=t.$.colorPanel.value;t._applyValue(i),t.close()}_bindProperties(t){const i=this,a=["columnCount","name","hideContentToFit","applyValueMode","disabled","inverted","dataSource","displayMode","tooltipDisplayMode","editAlphaChannel","enableCustomColors","hidePreviewContainer","hideRGBEditor","hideHEXEditor","hideAlphaEditor","messages","theme","animation","theme","locale","palette","valueMember","disabled"];return t&&(-1<a.indexOf(t)||"value"===t)?void(i.$.colorPanel[t]=i[t]):void(a.forEach(t=>i.$.colorPanel[t]=i[t]),i.$.colorPanel._isValidColor(i.value)&&i._applyValue(i.value))}_handleActionInput(){this.$.actionInput.readOnly=!!(this.disabled||this.readonly||!this.acceptCustomValue)}_actionInputChangeHandler(){const t=this,i=t.$.actionInput.value;if(t.$.colorPanel._isValidColor(i)){const a=t.value;t._applyValue(i),t.$.fireEvent("valueChanged",{newValue:i,oldValue:a})}else t.$.actionInput.value=t.value}_applyValue(t){const i=this,a=i.$.colorPanel;switch(a.value=t,i.$.colorSample.style.backgroundColor=t,i.value=t,i.valueDisplayFormat){case"rgba":t=a._toRGBA(t)||"";break;case"rgb":t=a._rgbaToRGB(a._toRGBA(t))||"";break;case"hex":t=a._rgbaToHEX(a._toRGBA(t))||"";}i.$.actionInput.value=t}}),Smart.Utilities.Assign("Grid.Column",class{constructor(t){const i=this;"string"==typeof t?(i.label=t,i.dataField=t):Object.assign(i,t),i.dataType||(i.dataType="string"),i.canNotify=!0;let a="left";switch(i.dataType){case"string":case"date":a="left";break;case"number":a="right";break;case"boolean":a="center";}i.index===void 0&&(i.index=-1),i.visibleIndex===void 0&&(i.visibleIndex=-1),i.selected===void 0&&(i.selected=!1),i.label||(i.label=""),i.menuItems||(i.menuItems=null),i.icon||(i.icon="smart-icon-picture"),i.displayField||(i.displayField=i.dataField),i.template||(i.template=""),i.editor||(i.editor="input"),"string"==typeof i.editor?i.editor={template:i.editor,autoFocus:!0}:void 0===i.editor.autoFocus&&(i.editor.autoFocus=!0),i.menu=null,i.allowActionButtonAnimation===void 0&&(i.grid?i.allowActionButtonAnimation=i.grid.appearance.allowColumnActionButtonAnimation:i.allowActionButtonAnimation=!1),i.allowSortButtonAnimation===void 0&&(i.grid?i.allowSortButtonAnimation=i.grid.appearance.allowColumnSortButtonAnimation:i.allowSortButtonAnimation=!1),i.autoShowActionButton===void 0&&(i.grid?i.autoShowActionButton=i.grid.appearance.autoShowColumnActionButton:i.autoShowActionButton=!1),i.autoShowSortButton===void 0&&(i.grid?i.autoShowSortButton=i.grid.appearance.autoShowColumnSortButton:i.autoShowSortButton=!0),i.showSortButton===void 0&&(i.grid?i.showSortButton=i.grid.appearance.showColumnSortButton:i.showSortButton=!1),i.showIcon===void 0&&(i.grid?i.showIcon=i.grid.appearance.showColumnIcon:i.showIcon=!1),i.showDescriptionButton===void 0&&(i.grid?i.showDescriptionButton=i.grid.appearance.showColumnDescriptionButton:i.showDescriptionButton=!1),i.showCustomButton===void 0&&(i.grid?i.showCustomButton=i.grid.appearance.showColumnCustomButton:i.showCustomButton=!1),i.showActionButton===void 0&&(i.grid?i.showActionButton=i.grid.appearance.showColumnActionButton:i.showActionButton=!1),i.allowLabelAnimation===void 0&&(i.grid?i.allowLabelAnimation=i.grid.appearance.allowColumnLabelAnimation:i.allowLabelAnimation=!1),i.autoShowFilterButton===void 0&&(i.grid?i.autoShowFilterButton=i.grid.appearance.autoShowColumnFilterButton:i.autoShowFilterButton=!1),i.showFilterButton===void 0&&(i.grid?i.showFilterButton=i.grid.appearance.showColumnFilterButton:i.showFilterButton=!1),i.autoCloseMenu===void 0&&(i.grid?i.autoCloseMenu=i.grid.columnMenu.autoClose:i.autoCloseMenu=!0),i.sortOrder||(i.sortOrder=null),i.sortIndex||(i.sortIndex=null),i.filter||(i.filter=null),i.filterMenuMode||(i.filterMenuMode="default"),i.align||(i.align=a),i.cellsAlign||(i.cellsAlign=a),i.minWidth||(i.minWidth=30),i.width||(i.width="auto"),i.grid&&i.grid.columnWidth&&(i.width=i.grid.columnWidth),i.visible===void 0&&(i.visible=!0),i.allowResize===void 0&&(i.allowResize=!0),i.allowReorder===void 0&&(i.allowReorder=!0),i.allowSort===void 0&&(i.allowSort=!0),i.allowSortToggleOnClick===void 0&&(i.allowSortToggleOnClick=!0),i.allowGroup===void 0&&(i.allowGroup=!0),i.allowFilter===void 0&&(i.allowFilter=!0),i.allowEdit===void 0&&(i.allowEdit=!0),i.allowExport===void 0&&(i.allowExport=!0),i.description===void 0&&(i.description=""),i.summary||(i.summary=[]),i.sorted=!1,i.filtered=!1}refresh(){const t=this;t.element&&t.element._refresh()}render(){const t=this;t.element.column=t,t.element&&t.element._render()}setProperty(t,i){const a=this,n=a[t];a[t]=i,n!==i&&(a.canNotify=!1,a.propertyChanged(t,n,i),a.canNotify=!0)}getProperty(t){const i=this;return i[t]}get properties(){return["allowExport","allowGroup","autoCloseMenu","autoShowActionButton","autoShowSortButton","autoShowFilterButton","allowLabelAnimation","allowActionButtonAnimation","allowSortButtonAnimation","allowEdit","allowFilter","allowSort","allowSortToggleOnClick","allowResize","allowReorder","canNotify","description","grid","icon","menuItems","menu","summary","cellsFormat","index","sortIndex","sortOrder","sorted","filtered","filter","filterMenuMode","selected","dataField","displayField","label","dataType","align","cellsAlign","minWidth","width","visible","freeze","showActionButton","showIcon","showDescriptionButton","adaptiveVisible","treeColumn","computedWidth","element","computedHeight","overflowWidth","onAction","left","top","showCustomButton","showFilterButton","showSortButton","editor","template","visibleIndex"]}propertyChanged(t,i,a){const n=this;if("allowSort"===t||"allowFilter"===t)return void n.element._refresh();if("showIcon"===t)return void n.element._refresh();if("showCustomButton"===t&&(a?n.element._showCustomButton():n.element._hideCustomButton()),"showDescriptionButton"===t&&(a?n.element._showDescriptionButton():n.element._hideDescriptionButton()),"filter"===t&&(n.filter?(n.grid.addFilter(n.dataField,n.filter),n.filtered=!0):(n.grid.removeFilter(n.dataField),n.filtered=!1),(n.autoShowFilterButton||n.showFilterButton)&&(a?n.element._showFilterButton():n.element._hideFilterButton())),"sortIndex"===t)return void("many"===n.grid.sorting.sortMode&&n.grid.context===document&&n.grid.sortBy(n.dataField,n.sortOrder));if("sortOrder"===t)return n.sorted=!1,null===a?n.element._hideSortButton():(n.element._showSortButton(),n.sorted=!0),void(n.grid.context===document&&n.grid.sortBy(n.dataField,n.sortOrder));if("autoShowActionButton"===t&&(n.element.allowAnimations=!1,a?n.element._hideActionButton():n.element._showActionButton(),n.element.allowAnimations=!0),"autoShowSortButton"===t&&(n.element.allowAnimations=!1,a?n.element._hideSortButton():n.element._showSortButton(),n.element.allowAnimations=!0),"menu"===t&&(a?n.element.setAttribute("aria-controls",n.menu.id):(n.element.removeAttribute("aria-controls"),n.autoShowActionButton&&n.element._hideActionButton())),"selected"===t)return!0===a?n.grid.selectAllRows():!1==a&&n.grid.unselectAllRows(),void(!0===a?n.element.setAttribute("selected",""):"indeterminate"===a?n.element.setAttribute("selected","indeterminate"):n.element.removeAttribute("selected"));if(("label"===t||"width"===t||"minWidth"===t)&&n.grid.refresh(),"freeze"===t)if(!a){if(!0===n.freeze||"near"===n.freeze){n.element.removeAttribute("freeze");const t=n.grid._frozenNearColumns.indexOf(n);0<=t&&n.grid._frozenNearColumns.splice(t,0,0)}else if("far"===n.freeze){const t=n.grid._frozenFarColumns.indexOf(n);0<=t&&n.grid._frozenFarColumns.splice(t,0,0)}n.grid.refresh()}else n.element.setAttribute("freeze",""),n.freeze&&(!0===n.freeze||"near"===n.freeze?n.grid._frozenNearColumns.push(n):n.grid._frozenFarColumns.push(n)),n.grid.refresh()}createElement(){const t=this,i=document.createElement("smart-grid-column");return i._initialize(t),t.element=i,t.grid.notify(function(i,a,n){"appearance_allowColumnLabelAnimation"===i?t.setProperty("allowLabelAnimation",n):"appearance_allowColumnSortAnimation"===i?t.setProperty("allowSortAnimation",n):"appearance_allowColumnActionButtonAnimation"===i?t.setProperty("allowActionButtonAnimation",n):"appearance_allowColumnFilterButtonAnimation"===i?t.setProperty("allowFilterButtonAnimation",n):"appearance_autoShowColumnActionButton"===i?t.setProperty("autoShowActionButton",n):"appearance_autoShowColumnSortButton"===i?t.setProperty("autoShowSortButton",n):"appearance_autoShowColumnFilterButton"===i?t.setProperty("autoShowFilterButton",n):"appearance_showColumnActionButton"===i?t.setProperty("showActionButton",n):"appearance_showColumnFilterButton"===i?t.setProperty("showFilterButton",n):"appearance_showColumnCustomButton"===i?t.setProperty("showCustomButton",n):"appearance_showColumnDescriptionButton"===i?t.setProperty("showDescriptionButton",n):"appearance_showColumnSortButton"===i?t.setProperty("showSortButton",n):void 0}),i}}),Smart("smart-grid-column",class extends Smart.BaseElement{_showSortButton(){const t=this;t.column&&(t.sortButton.classList.remove("asc"),t.sortButton.classList.remove("desc"),!t.column.autoShowSortButton&&null===t.column.sortOrder&&t.column.allowSort&&t.sortButton.classList.add("smart-icon-sort","smart-grid-icon"),"asc"===t.column.sortOrder?t.sortButton.classList.add("asc"):"desc"===t.column.sortOrder&&t.sortButton.classList.add("desc"),t.column.showSortButton&&(t.sortButton.classList.add("show"),t._refresh()))}_hideSortButton(){const t=this;t.column&&(t.sortButton.classList.remove("asc"),t.sortButton.classList.remove("desc"),(!t.column.showSortButton||t.column.autoShowSortButton)&&(t.sortButton.classList.remove("show"),t.sortButton.classList.remove("smart-icon-sort"),t._refresh()))}_showFilterButton(){const t=this;t.column&&(t.filterButton.classList.add("show"),t._refresh())}_hideFilterButton(){const t=this;t.column&&(t.filterButton.classList.remove("show"),t._refresh())}_showDescriptionButton(){const t=this;t.column&&(t.descriptionButton.setAttribute("title",t.column.description),t.descriptionButton.classList.add("show"),t._refresh())}_hideDescriptionButton(){const t=this;t.column&&(t.descriptionButton.classList.remove("show"),t._refresh())}_showIcon(){const t=this;t.icon.classList.add("show"),t._refresh()}_hideIcon(){const t=this;t.icon.classList.remove("show"),t._refresh()}_showCustomButton(){const t=this;t.column&&(t.customButton.classList.add("show"),t._refresh())}_hideCustomButton(){const t=this;t.column&&(t.customButton.classList.remove("show"),t._refresh())}_showActionButton(){const t=this;!t.column||t.column.showActionButton&&t.column.grid.hasColumnMenu(t.column)&&t.actionButton&&(t.actionButton.classList.add("show"),t._refresh())}_hideActionButton(){const t=this;!t.column||t.column.showActionButton&&t.actionButton&&!t.hasAttribute("aria-controls")&&(t.actionButton.classList.remove("show"),t._refresh())}_rotate(){const t=this,i=document.createElement("span");return t.label.innerHTML="",i.innerHTML=t.column.label,t.label.appendChild(i),i.className="rotate",i.style.transform="rotate("+t.column.rotationAngle+"deg)",t.column.grid._recycleRotate(t.label,i,t.column.align,t.column.verticalAlign,t.column.label)}_align(){const t=this;switch(t.column.align){case"left":t.label.classList.add("align-left");break;case"center":t.label.classList.add("align-center");break;case"right":t.label.classList.add("align-right");}switch(t.column.verticalAlign){case"top":t.label.classList.add("align-top");break;case"middle":t.label.classList.add("align-middle");break;case"bottom":t.label.classList.add("align-bottom");}}_refresh(){const t=this;if("_checkBox"===t.column.dataField){const i=t.column.grid.getVisibleRows(),a=t.column.grid.getSelectedRows();a.length===i.length?t.setAttribute("selected",""):0<a.length&&a.length<i.length?t.setAttribute("selected","indeterminate"):(0===a.length||0===i.length)&&t.removeAttribute("selected")}t.sortButton.classList.remove("filter"),t.sortButton.classList.remove("action"),t.label.className="smart-label","_checkBox"===t.column.dataField&&(t.setAttribute("checkbox",""),t.label.classList.add("smart-input")),t.column.allowSortButtonAnimation?t.sortButton.classList.add("animation"):t.sortButton.classList.remove("animation"),t.column.allowFilterButtonAnimation?t.filterButton.classList.add("animation"):t.filterButton.classList.remove("animation"),t.column.allowActionButtonAnimation&&!1!==t.allowAnimations?t.buttonsGroup.classList.add("animation"):t.buttonsGroup.classList.remove("animation"),t.column.allowLabelAnimation&&!1!==t.allowAnimations?t.label.classList.add("animation"):t.label.classList.remove("animation"),t.buttonsGroup.classList.remove("action"),t.actionButton.classList.contains("show")&&t.buttonsGroup.classList.add("action"),t.icon.classList.contains("show")&&t.icon.classList.add(t.column.icon);let a=t.column.showIcon?1:0;for(let n=0;n<t.buttonsGroup.children.length;n++)t.buttonsGroup.children[n].classList.contains("show")&&a++;if(1==a?t.label.classList.add("one"):2==a?t.label.classList.add("two"):3==a?t.label.classList.add("three"):4==a?t.label.classList.add("four"):5==a?t.label.classList.add("five"):void 0,t.classList.remove("smart-visibility-hidden"),(t.column.adaptiveVisible||!t.column.visible)&&t.classList.add("smart-visibility-hidden"),0<t.column.grid._columnGap?t.classList.add("smart-grid-column-border"):t.classList.remove("smart-grid-column-border"),t.column.rotationAngle){const i=t._rotate();if(!i)return}t._align()}_render(){const t=this,i=t.column.dataField?t.column.dataField:"",a=t.column===t.column.grid._lastVisibleColumn;t.label.firstChild?t.label.firstChild.textContent!==t.column.label&&(t.label.firstChild.textContent=t.column.label):t.label.innerHTML="<span>"+t.column.label+"</span>",t._refresh(),t.style.width=t.column.reservedColumn||a?t.column.computedWidth+"px":t.column.computedWidth-t.column.grid._columnGap+"px",t.style.height!==t.column.computedHeight+"px"&&(t.style.height=t.column.computedHeight+"px"),t.style.lineHeight!==t.column.computedHeight+"px"&&(t.style.lineHeight=t.column.computedHeight+"px"),t.style.left!==t.column.left+"px"&&(t.style.left=t.column.left+"px"),t.style.top!==t.column.top+"px"&&(t.style.top=t.column.top+"px"),t.getAttribute("data-field")!==i&&t.setAttribute("data-field",i),t.column.rowNumbersColumn&&t.setAttribute("header",""),t.column.freeze&&t.setAttribute("freeze",""),0<t.column.level&&(t.style.top=t.column.top+"px")}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}addThemeClass(){}addDefaultClass(){}get isUtilityElement(){return!0}_initialize(t){const i=this,a=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div");i.column=t,i.classList.add("smart-visibility-hidden"),d.classList.add("smart-icon","smart-grid-icon"),a.classList.add("smart-label"),n.classList.add("smart-sort-button","smart-grid-icon"),o.classList.add("smart-filter-button","smart-icon-filter","smart-grid-icon"),l.classList.add("smart-action-button","smart-grid-icon"),l.setAttribute("aria-haspopup",""),r.classList.add("description-button","smart-icon-description","smart-grid-icon"),s.classList.add("smart-custom-button",t.customButtonIcon?t.customButtonIcon:"smart-icon-person","smart-grid-icon"),m.classList.add("smart-buttons-group"),l.innerHTML="<div></div>",i.style.width=i.column.computedWidth+"px",i.appendChild(d),i.appendChild(a),i.appendChild(m),m.appendChild(n),m.appendChild(o),m.appendChild(r),m.appendChild(s),m.appendChild(l),i.icon=d,i.label=a,i.sortButton=n,i.filterButton=o,i.actionButton=l,i.descriptionButton=r,i.customButton=s,i.buttonsGroup=m,i.filterButton.addEventListener("pointerdown",function(t){t.preventDefault(),t.stopPropagation(),i.column.onAction&&i.column.onAction(t)}.bind(i)),i.filterButton.addEventListener("pointerup",function(t){t.preventDefault(),t.stopPropagation()}),i.actionButton.addEventListener("pointerup",function(t){t.preventDefault(),t.stopPropagation()}),i.actionButton.addEventListener("pointerdown",function(t){t.preventDefault(),t.stopPropagation(),i.column.onAction&&i.column.onAction(t)}.bind(i)),!i.column.autoShowActionButton&&i.column.showActionButton&&i._showActionButton(),!i.column.autoShowSortButton&&i.column.showSortButton&&i._showSortButton(),!i.column.autoShowFilterButton&&i.column.showFilterButton&&i._showFilterButton(),i.column.showDescriptionButton&&i._showDescriptionButton(),i.column.showCustomButton&&i._showCustomButton(),i.column.showIcon&&i._showIcon(),i.customButton.onclick=function(t){i.column.onCustomButtonClick&&i.column.onCustomButtonClick(t)}.bind(i)}template(){return""}}),Smart.Utilities.Assign("Grid.Row",class{constructor(t){const i=this;t||(t={}),Object.assign(i,t);t&&(i.data===void 0&&(i.data={$:{}}),(void 0===t.$||t.$&&void 0===t.$.id)&&(t.data?(t.data.$&&t.data.$.id&&(i.id=t.data.$.id),!i.id&&(i.id=t.index)):i.id=t.index,i.id===void 0&&(i.id=Smart.Utilities.Core.createGUID())),void 0===i.detailHeight&&(i.detailHeight=200),void 0===i.height&&i.grid&&(i.height=i.grid.rowMinHeight),void 0===i.cellHeight&&(i.cellHeight=i.height),void 0===i.adaptiveHeight&&(i.adaptiveHeight=0),void 0===i.adaptiveDetailHeight&&(i.adaptiveDetailHeight=200),void 0===i.detailExpanded&&(i.detailExpanded=!1),void 0===i.index&&(i.index=-1),void 0===i.visibleIndex&&(i.visibleIndex=i.index),void 0===i.freeze&&(i.freeze=!1),void 0===i.height&&(i.height=null),void 0===i.minHeight&&(i.minHeight=25),void 0===i.selected&&(i.selected=!1),void 0===i.enabled&&(i.enabled=!0),void 0===i.visible&&(i.visible=!0),void 0===i.filtered&&(i.filtered=!0),void 0===i.allowResize&&(i.allowResize=!0),void 0===i.allowToggle&&(i.allowToggle=!0),void 0===i.expanded&&(i.expanded=!1),i.headerCell=null,i._cells=[])}get properties(){return["allowToggle","allowResize","cells","detailExpanded","detailHeight","adaptiveDetailHeight","adaptiveHeight","cellHeight","expandHeight","data","enabled","expanded","filtered","freeze","grid","headerCell","height","index","id","canNotify","minHeight","selected","visible","visibleIndex"]}createElement(){const t=this,i=document.createElement("smart-grid-row");return t.element=i,i._initialize(t),i}getCell(t){const i=this,a=i.grid;if("string"==typeof t&&(t=a.columnByDataField[t]),!i["column_"+t.dataField]){const n=new Smart.Grid.Cell(i,t,a);return i["column_"+t.dataField]=n,n}else{const a=i["column_"+t.dataField];return a.column=t,a}}get cells(){const t=this;return t.createCells(),t._cells}createCells(){const t=this,a=t.grid;t._cells=[];for(let n=0;n<a.viewColumns.length;n++){const i=a.viewColumns[n];if(!t["column_"+i.dataField]){const n=new Smart.Grid.Cell(t,i,a);t["column_"+i.dataField]=n,t._cells.push(n)}else{const a=t["column_"+i.dataField];t._cells.push(a)}}}toggle(){const t=this;t.element._handleExpandCollapse(!t.expanded)}expand(){const t=this;t.element._handleExpandCollapse(!0)}collapse(){const t=this;t.element._handleExpandCollapse(!1)}render(){const t=this;t.element.row=t,t.element._render()}setProperty(t,i){const a=this,n=a[t];a[t]=i,n!==i&&(a.canNotify=!1,a.propertyChanged(t,n,i),a.canNotify=!0)}getProperty(t){const i=this;return i[t]}propertyChanged(t,i,a){const n=this;if("selected"===t){if(!n.element)return;a?n.element.setAttribute("selected",""):n.element.removeAttribute("selected","");n._cells||n.cells;for(let t=0;t<n._cells.length;t++){const i=n._cells[t];i.element&&(n.selected?i.element.setAttribute("selected",""):i.element.removeAttribute("selected"))}if(!n.grid.viewColumns[0]._selecting){let t=[];for(let a=0;a<n.grid.rows.length;a++){const i=n.grid.rows[a];i.selected&&t.push(i)}n.grid.viewColumns[0].selected=0!==t.length&&(!(t.length!==n.grid.rows.length)||"indeterminate"),n.grid.$.fireEvent("change",{row:n})}}("visible"===t||"collapsed"===t)&&n.grid.refresh(),"freeze"===t&&(!0===a||"near"===a?n.grid._frozenNearRows.push(n):"far"===a?n.grid._frozenFarRows.push(n):(n.grid._frozenNearRows.splice(n.grid._frozenNearRows.indexOf(n),1),n.grid._frozenFarRows.splice(n.grid._frozenFarRows.indexOf(n),1)),n.grid._recycle())}}),Smart("smart-grid-row",class extends Smart.BaseElement{static get properties(){return{}}get isUtilityElement(){return!0}get hasStyleObserver(){return!1}addThemeClass(){}addDefaultClass(){}_initialize(t){const a=this,i=t.grid,n=i._columnElements,o=i._frozenNearColumns,l=i._frozenFarColumns,r=document.createElement("div"),s=document.createElement("div"),d=document.createElement("div"),m=document.createDocumentFragment(),c=document.createDocumentFragment(),u=document.createDocumentFragment();s.classList.add("near","smart-grid-cell-container"),r.classList.add("center","smart-grid-cell-container"),d.classList.add("far","smart-grid-cell-container"),a.row=t,t.createCells();for(let a=0;a<o.length;a++){const i=o[a],n=t.getCell(i),l=n.createElement();c.appendChild(l)}for(let a=0;a<l.length;a++){const i=l[a],n=t.getCell(i),o=n.createElement();u.appendChild(o)}for(let o=0;o<n.length;o++){const i=n[o],l=i.column;if(!i.parentNode||!l)break;const r=t.getCell(l),s=r.createElement();l&&l.treeColumn&&(a.toggleButton=s.toggleButton),m.appendChild(s)}s.appendChild(c),r.appendChild(m),d.appendChild(u);const p=document.createElement("div");p.classList.add("smart-grid-row-detail","smart-hidden","smart-grid-row-adaptive-detail");const g=document.createElement("div");g.classList.add("smart-grid-row-detail","smart-hidden");const h=document.createElement("div");h.classList.add("smart-grid-row-sub-container","smart-hidden"),0<i._adaptiveLayout&&(s.classList.add("smart-visibility-hidden"),r.classList.add("smart-visibility-hidden"),d.classList.add("smart-visibility-hidden")),a._rowFragment=document.createDocumentFragment(),a._rowFragment.appendChild(s),a._rowFragment.appendChild(r),a._rowFragment.appendChild(d),a._rowFragment.appendChild(p),a._rowFragment.appendChild(g),a._rowFragment.appendChild(h),a.appendChild(a._rowFragment),a.cellsNearContainerElement=a.children[0],a.cellsContainerElement=a.children[1],a.cellsFarContainerElement=a.children[2],a.adaptiveDetail=a.children[3],a.detail=a.children[4],a.rowContainer=a.children[5],i.rowHeight&&"auto"!==i.rowHeight&&(a.style.height=i.rowHeight+"px")}get enableShadowDOM(){return!1}_handleExpandCollapse(t){const i=this,a=i.row,n=a.grid,o=function(t){const i=n._scrollView.scrollLeft;n._refreshLayout(),n._refreshColumnsResponsiveVisibility(),n._recycle(),n._scrollView.scrollLeft=i,t&&t()};return a.allowToggle?new Promise(()=>{n._toggledRow=a,n.appearance.allowRowToggleAnimation&&i.toggleButton.classList.add("animation");const l=function(){const t=n._toggledRow;n._refreshRowHierarchy(),o();let i=0;for(let t=0;t<n.rowHierarchy.length;t++){const a=n.rowHierarchy[t];for(let t=a.parent;t;)t.id===n._toggledRow.id&&(i+=a.height),t=t.parent}t.expandHeight=i,t.height=t.cellHeight+t.expandHeight};if(!n.appearance.allowRowToggleAnimation)a.expanded=t,o();else{const r=function(t){const i=n._toggledRow;i&&"height"===t.propertyName&&(i.element.classList.remove("animation"),i.element.rowContainer.innerHTML="",i.element.rowContainer.classList.add("smart-hidden"),i.element.removeEventListener("transitionend",r),i.element.removeEventListener("transitioncancel",r),i.height=i.cellHeight,n._toggledRow=null,o())};if(i.classList.remove("animation"),i.addEventListener("transitionend",r),i.addEventListener("transitioncancel",r),t)i.classList.add("animation"),a.expanded=t,l(),o();else{l(),o(function(){i.toggleButton.classList.remove("smart-arrow-down"),i.toggleButton.classList.add("smart-arrow-right"),a.expanded=t,a.height=a.cellHeight,o()}),i.classList.add("animation")}}}):null}_renderEmpty(){const t=this;t.classList.add("smart-hidden")}_renderAdaptive(){var t=Math.min;const a=this,n=a.row,o=n.grid;let i=!1;if(o._toggledRow&&o.appearance.allowRowToggleAnimation&&o._toggledRow.expanded)for(let t=n.parent;t;){if(t.id===o._toggledRow.id){const n=t.element.adaptiveDetail;a.classList.add("smart-hidden"),a.toggleButton.classList.add("smart-hidden"),i=!0,n.appendChild(a);break}t=t.parent}const l=a.adaptiveDetail;if(a.row=n,a.visible=n.visible,a.style.height!==n.height+"px"&&(a.style.height=n.height+"px"),a.style.lineHeight!==n.height+"px"&&(a.style.lineHeight=n.height+"px"),l.classList.remove("smart-hidden"),l.style.height!==n.adaptiveHeight+"px"&&(l.style.height=n.adaptiveHeight+"px"),l.style.lineHeight!==n.adaptiveHeight+"px"&&(l.style.lineHeight=n.adaptiveHeight+"px"),n.expandHeight){if(n.expanded){const i=t(o._clientSize.height,n.height+n.expandHeight)+"px";a.style.height=i,a.style.lineHeight=i}const i=t(o._clientSize.height,n.height+n.expandHeight)+"px";l.style.height=i,l.style.lineHeight=i}else l.innerHTML="";l.style.top=i?n.cellHeight+"px":"0px";const r=document.createDocumentFragment();let s=0,d=0;for(let t=0;t<o.viewColumns.length;t++){const i=o.viewColumns[t];if(i.autoGenerated)continue;const l=i.createElement(),m=n.getCell(i),c=m.createElement();if(n.label){r.appendChild(c),c.classList.add("smart-grid-adaptive-cell"),c.style.height=n.cellHeight+"px",c.style.lineHeight=n.cellHeight+"px",c.style.left="0px",c.style.top="0px",m.render(),c.style.width="100%";break}c.classList.add("smart-grid-adaptive-cell"),l.classList.add("smart-grid-adaptive-column"),i.render(),a._renderCell(n,i,c);const u=1===o._adaptiveLayout?"100%":"50%";l.style.width=u,l.style.height=n.cellHeight+"px",l.style.lineHeight=n.cellHeight+"px",l.style.top=s+"px",l.classList.remove("smart-visibility-hidden"),c.style.width=u,c.style.height=n.cellHeight+"px",c.style.lineHeight=n.cellHeight+"px",c.style.top=s+n.cellHeight+"px","100%"==u?(l.style.left="0px",c.style.left="0px"):0===d?(l.style.left="0px",c.style.left="0px",d="50%"):(l.style.left="50%",c.style.left="50%"),0==(t+1)%o._adaptiveLayout&&(d=0,s+=2*n.cellHeight),r.appendChild(l),r.appendChild(c)}l.appendChild(r),a.visible?a.classList.remove("smart-hidden"):a.classList.add("smart-hidden")}_renderCell(t,i,a){if(!i)return void a.classList.add("smart-hidden");let n=t.getCell(i);n.element=a,a.cell=n,n.render()}_render(){const t=this,a=t.row,n=a.grid;if(!a.selected&&t.getAttribute("selected")&&t.removeAttribute("selected"),!t._toggledRow&&t.classList.contains("animation"))return t.classList.remove("animation"),n.rowContainer.innerHTML="",n.rowContainer.classList.add("smart-hidden"),n._refreshLayout(),void n._recycle();if(a.adaptiveHeight&&!n._responsiveLayout)return void t._renderAdaptive();if(0===n.columns.length)return void t._renderEmpty();const i=parseFloat(n.$.columnNearContainer.style.width),o=parseFloat(n.$.columnContainer.style.width),l=parseFloat(n.$.columnFarContainer.style.width),r=t.children[1],s=t.children[0],d=t.children[2];if(d.classList.remove("vscroll"),n.computedVerticalScrollBarVisibility&&d.classList.add("vscroll"),n._toggledRow&&n.appearance.allowRowToggleAnimation){let i=a.parent;if(!n._toggledRow.expanded&&n._toggledRow.id===a.id){const a=t.rowContainer;for(let t=0;t<a.children.length;t++){const i=a.children[t],o=i.getAttribute("data-id"),l=n.rowById[o];i.getAttribute("data-rendered")||(i.setAttribute("data-rendered",!0),l.element=i,l.render())}}for(;i;){if(i.id===n._toggledRow.id){const o=i.element.rowContainer;if(n._toggledRow.expanded){t.classList.add("smart-hidden");let l=a.createElement(n);for(let t=0;t<o.children.length;t++){const i=o.children[t];if(i.getAttribute("data-id")===a.id.toString())return void(l=i)}o.appendChild(l),o.classList.remove("smart-hidden")}break}i=i.parent}}if(t.setAttribute("data-id",a.id),t.visible=a.visible,t.cellsNearContainerElement.classList.remove("smart-visibility-hidden"),t.cellsContainerElement.classList.remove("smart-visibility-hidden"),t.cellsFarContainerElement.classList.remove("smart-visibility-hidden"),t.removeAttribute("rowspan"),0<n._rowGap&&a!==n.rows[n.rows.length-1]?(t.style.marginBottom=n._rowGap+"px",parseInt(t.style.height)-n._rowGap!==a.height&&(t.style.height=a.height-n._rowGap+"px"),parseInt(t.style.lineHeight)-n._rowGap!==a.height&&(t.style.lineHeight=a.height-n._rowGap+"px")):(t.style.marginBottom="",parseInt(t.style.height)!==a.height&&(t.style.height=a.height+"px"),parseInt(t.style.lineHeight)!==a.height&&(t.style.lineHeight=a.height+"px")),r.style.left!==-n._scrollView.scrollLeft+"px"&&(r.style.left=-n._scrollView.scrollLeft+"px"),a.expanded&&0<a.expandHeight){const i=t.rowContainer;i.style.height!==a.expandHeight+"px"&&(i.style.height=a.expandHeight+"px"),i.style.lineHeight!==a.expandHeight+"px"&&(i.style.lineHeight=a.expandHeight+"px"),i.style.top!==a.cellHeight+"px"&&(i.style.top=a.cellHeight+"px")}if(n.adaptivityMode.adaptiveLayout.enabled){const i=t.adaptiveDetail;i.classList.add("smart-hidden")}if(n.adaptivityMode.responsiveLayout.enabled&&!a.label){const i=t.adaptiveDetail;if(a.adaptiveDetailExpanded||n.adaptivityMode.responsiveLayout.autoShowHiddenCells&&a.adaptiveHeight){i.classList.remove("smart-hidden"),i.style.height!==a.adaptiveHeight+"px"&&(i.style.height=a.adaptiveHeight+"px"),i.style.lineHeight!==a.adaptiveHeight+"px"&&(i.style.lineHeight=a.adaptiveHeight+"px"),i.style.top!==a.cellHeight+"px"&&(i.style.top=a.cellHeight+"px");let t=0,o=25,l=0;const r=document.createDocumentFragment();for(let i=0;i<n.viewColumns.length;i++){const s=n.viewColumns[i];if(!s.autoGenerated&&s.adaptiveVisible){0===l&&(l=i);const d=a.data;let m=s.displayField?d[s.displayField]:d[s.dataField];void 0===m&&(m="");const c=document.createElement("div"),u=n.viewColumns[t].computedWidth,p=n.viewColumns[t].left;c.classList.add("smart-grid-responsive-cell"),c.style.width=u+"px",c.style.height=a.cellHeight+"px",c.style.lineHeight=a.cellHeight+"px",c.style.top=o+"px",c.style.left=p+"px",c.innerHTML=s.label+": "+m,t++,t===l&&(o+=a.cellHeight,t=0),r.appendChild(c)}}i.innerHTML="",i.appendChild(r)}else i.classList.add("smart-hidden")}if(n.rowDetail.enabled){const i=t.detail;a.detailExpanded?(i.classList.remove("smart-hidden"),i.style.height!==a.detailHeight+"px"&&(i.style.height=a.detailHeight+"px"),i.style.lineHeight!==a.detailHeight+"px"&&(i.style.lineHeight=a.detailHeight+"px"),i.style.top!==a.cellHeight+"px"&&(i.style.top=a.cellHeight+"px"),a.adaptiveHeight&&(i.style.top=a.adaptiveHeight+"px"),i.innerHTML=n.rowDetail.template):i.classList.add("smart-hidden")}s.classList.remove("smart-hidden"),d.classList.remove("smart-hidden"),s.style.width!==i+"px"&&(s.style.width=i+"px"),r.style.width!==o+"px"&&(r.style.width=o+"px"),d.style.width!==l+"px"&&(d.style.width=l+"px"),0===l&&d.classList.add("smart-hidden"),0===i&&s.classList.add("smart-hidden"),0<i&&i===n._autoGeneratedColumnsNearWidth&&s.classList.add("border-collapse"),0<l&&l===n._autoGeneratedColumnsFarWidth&&d.classList.add("border-collapse");for(let i=0;i<n._frozenNearColumns.length;i++){const o=n._frozenNearColumns[i],l=t.children[0].children[i];t._renderCell(a,o,l)}for(let i=0;i<n._frozenFarColumns.length;i++){const o=n._frozenFarColumns[i],l=t.children[2].children[i];t._renderCell(a,o,l)}for(let i=0;i<r.children.length;i++){const o=n._columnElements[i+n._frozenNearColumns.length];if(!o){let n=t.children[1].children[i];t._renderCell(a,null,n)}}for(let i=0;i<n._columnElements.length;i++){const o=n._columnElements[i],l=o.column;if(!o.parentNode||!l)break;let r=t.children[1].children[i];if(!r){o.column||(o.column=l);const i=a.getCell(l);r=i.createElement(),t.children[1].appendChild(r)}o.classList.contains("smart-visibility-hidden")||t._renderCell(a,l,r)}t.visible?t.classList.remove("smart-hidden"):t.classList.add("smart-hidden")}template(){return""}}),Smart.Utilities.Assign("Grid.Cell",class{constructor(t,i){const a=this;a.row=t,a.column=i,a.grid=t.grid,a.rowSpan=1,a.colSpan=1,a.value=void 0,a.fontSize=null,a.fontWeight=null,a.fontFamily=null,a.color=null,a.background=null,a.borderColor=null,a.tooltip=null,a.align=null,a.verticalAlign=null,a.readonly=!1,a.oldValue=void 0,a._updating=!1,a.styleChanged=!0,a.editor=null,a.template=null;const n=new Proxy(a,{deleteProperty:function(t,i){return delete t[i],!0},get:function(t,i){if("value"===i){const t=a.column.displayField?a.row.data[a.column.displayField]:a.row.data[a.column.dataField];return t}if("editor"===i||"template"===i)return t[i]||a.column[i];if("modifiedValue"===i){const i=a.grid._cellsModifiedValues[a.row.index+"_"+a.column.dataField];return void 0===i?t.value:i}return t[i]},set:function(t,i,n){const o=t[i];return!(o!==n)||!(t[i]=n,!("element"===i||"oldValue"===i||"_updating"===i||"notifyFn"===i||i.startsWith("_")||"canNotify"===i))||!("row"!==i&&"column"!==i&&"grid"!==i&&"styleChanged"!==i)||!(("background"===i||"fontSize"===i||"fontWeight"===i||"fontFamily"===i||"color"===i||"borderColor"===i||"fontStyle"===i)&&(a._styleChanged=!0),"value"===i&&(void 0===a.oldValue&&(a.oldValue=o),n.label&&n.value?(a.row.data[a.column.displayField]=n.label,a.row.data[a.column.dataField]=n.value):a.row.data[a.column.dataField]=n),!a._updating)||(a.grid._recycle(),a.propertyChanged&&a.propertyChanged(name.substring(1),o,newValue),!0)}});return n}setStyle(t){const i=this;i._styleChanged&&(t.style.background=i.background,t.style.borderColor=i.borderColor,t.style.color=i.color,t.style.fontSize=i.fontSize,t.style.fontFamily=i.fontFamily,t.style.fontWeight=i.fontWeight,t.style.fontStyle=i.fontStyle,t.style.paddingBottom="",i._styleChanged=!1)}setProperties(t){const i=this;for(let a in i._updating=!0,t)i[a]=t[a];i._updating=!1,i.grid._recycle()}createElement(){const t=this,i=document.createElement("smart-grid-cell");return t.element=i,i._initialize(t),i}render(){const t=this;t.element&&t.element._render()}}),Smart("smart-grid-cell",class extends Smart.BaseElement{static get properties(){return{}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}addThemeClass(){}addDefaultClass(){}get isUtilityElement(){return!0}_initialize(t){const i=this,a=document.createElement("div"),n=t.column,o=t.row;if(i.cell=t,i.appendChild(a),n&&n._treeColumn&&t.grid.dataSource.itemHierarchy){i.classList.add("smart-grid-tree-column-cell");const t=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div");o.expanded?n.classList.add("smart-arrow-down"):n.classList.add("smart-arrow-right"),i.toggleButton=n,a.appendChild(t),a.appendChild(n),a.appendChild(l)}else{const t=document.createElement("div");a.appendChild(t)}i.content=a}_render(){const t=this,i=t.cell.grid,a=t.cell.column,n=t.cell.row,o=n.data;i.appearance.showSortColumnBackground&&(a.sorted?t.setAttribute("sort",""):t.removeAttribute("sort")),i.appearance.showFilterColumnBackground&&(a.filtered?t.setAttribute("filter",""):t.removeAttribute("filter"));let l=a.displayField?o[a.displayField]:o[a.dataField];if(i.editing.batch&&i._cellsModifiedValues){t.removeAttribute("modified");const o=i._cellsModifiedValues[n.index+"_"+a.dataField];void 0!==o&&(t.setAttribute("modified",""),l=o)}if(i.onCellValue&&(t.cell._updating=!0,i.onCellValue(t.cell),t.cell._updating=!1,l=t.cell.value),void 0===l&&(l=""),i.onCellRender&&requestAnimationFrame(function(){if(a._cellsCachedValues[n.index]){const t=a._cellsCachedValues[n.index];r.firstChild&&r.removeChild(r.firstChild),r.appendChild(t)}else if(i.onCellRender(t.cell),cell.template!==a.template){const t=document.createElement("div");return r.firstChild&&r.removeChild(r.firstChild),cell.template instanceof HTMLTemplateElement?t.appendChild(cell.template.cloneNode(!0)):t.appendChild(cell.template),r.appendChild(t),void(a._cellsCachedValues[n.index]=t)}}),n.selected?t.setAttribute("selected",""):t.removeAttribute("selected"),n.label&&a._treeColumn&&(l=n.label,i.appearance.showRowGroupLabel)){let a=n.boundSource.length;t.hierarchySummaryRow.visible&&a--,l="<span>"+i.columnByDataField[n.groupDataField].label+"</span>: <span>"+n.label+"</span>",i.appearance.showRowGroupCount&&(l+="<span class='count'> ("+a+")</span>")}const r=t.firstChild;i.rowDetail.enabled&&n.detailExpanded&&(t.style.height=n.cellHeight+"px",t.style.lineHeight=n.cellHeight+"px"),(n.adaptiveDetailExpanded||i.adaptivityMode.responsiveLayout.autoShowHiddenCells&&n.adaptiveHeight)&&(t.style.height=n.cellHeight+"px",t.style.lineHeight=n.cellHeight+"px"),n.expanded&&0<n.expandHeight&&(t.style.height=n.cellHeight+"px",t.style.lineHeight=n.cellHeight+"px");const s=t._getCellAlignment(n,a),d=t.cell.template&&("checkBox"===t.cell.template||"radioButton"===t.cell.template||"switchButton"===t.cell.template);let m="";if(s.align&&!d&&(m+=s.align+" "),s.verticalAlign&&!d&&(m+=s.verticalAlign+" "),m+="smart-label",t.style.width!==a.computedWidth+"px"){const n=i._isLastVisibleColumn(a);t.style.width=a.reservedColumn||n?a.computedWidth+"px":a.computedWidth-i._columnGap+"px"}if(a===i._firstVisibleColumn&&t.classList.add("smart-grid-column-border-collapse"),0<i._columnGap&&t.classList.add("smart-grid-column-border"),0<i._rowGap&&t.classList.add("smart-grid-row-border"),t.style.left!==a.left+"px"&&(t.style.left=a.left+"px"),t.classList.contains("smart-hidden")&&t.classList.remove("smart-hidden"),n.label&&(a._treeColumn?t.style.width="100%":t.classList.add("smart-hidden")),t.getAttribute("freeze")&&t.removeAttribute("freeze"),i.dataSource.groupBy&&(t.classList.remove("smart-grid-group-row-cell"),t.classList.remove("smart-grid-group-header-row-cell"),n.label&&t.classList.add("smart-grid-group-header-row-cell"),t.classList.add("smart-grid-group-row-cell")),n.filterRow?t.classList.add("smart-grid-filter-row-cell"):n.summaryRow?t.classList.add("smart-grid-summary-row-cell"):(a.freeze||n.freeze)&&(i.rowDetail.enabled&&i.rowDetail.visible&&a.toggleColumn&&(r.classList.remove("animation"),m+=n.detailExpanded?" smart-arrow-down":" smart-arrow-right",300>new Date-i._lastPointerDownTime&&(m+=" animation")),a.selectionColumn&&(t.setAttribute("checkbox",""),m+=" smart-input"),(a.rowNumbersColumn||a.selectionColumn)&&(t.setAttribute("header",""),t.setAttribute("bound-index",n.index),t.setAttribute("visible-index",n.visibleIndex)),a.toggleColumn&&t.classList.add("smart-grid-row-detail-cell"),a.adaptiveColumn?t.classList.add("smart-grid-row-adaptive-detail-cell"):t.setAttribute("freeze","")),a.cellsRotationAngle){const i=t._rotateCellContent(r,a,l);if(!i)return}else if(n.filterRow)a.adaptiveColumn||a.toggleColumn||a.rowNumbersColumn?r.innerHTML="":!a.filterEditorInitialized&&(a.filterEditorInitialized=!0);else if(n.summaryRow){if(a.adaptiveColumn||a.toggleColumn||a.rowNumbersColumn)r.innerHTML="";else if(0<a.summary.length&&i._summaryItems){const t=i._summaryItems[a.dataField];let o=0;for(let a in t)o===n.summaryRowIndex&&(r.innerHTML=i.localize(a,{value:t[a]})),o++}}else if(i.rowDetail.enabled&&a.toggleColumn)""!==r.innerHTML&&(r.innerHTML="");else if(a.adaptiveColumn)t.removeAttribute("expanded"),n.adaptiveDetailExpanded&&t.setAttribute("expanded",!0),300>new Date-i._lastPointerDownTime&&(m+=" animation"),t.classList.add("smart-grid-cell-adaptive");else if(i.appearance.showRowNumber&&a.rowNumbersColumn)r.textContent=n.index+1;else if(d)switch(""!==r.textContent&&(r.textContent=""),a.grid.editing.enabled&&a.allowEdit&&!t.cell.readonly||t.setAttribute("readonly",""),t.cell.template){case"checkBox":case"switchButton":case"radioButton":"<span class=\"smart-input\"></span>"!==r.innerHTML&&(r.innerHTML="<span class=\"smart-input\"></span>"),l?r.firstChild.setAttribute("checked",""):null==l?r.firstChild.setAttribute("checked","indeterminate"):r.firstChild.removeAttribute("checked"),t.setAttribute("template",t.cell.template);}else if(a._treeColumn&&i.dataSource.itemHierarchy){const t=r.children[0],a=r.children[1],o=r.children[2];t.classList.add("smart-indent-container"),300<new Date-i._lastPointerDownTime&&a.classList.remove("animation"),n.leaf?(a.classList.remove("smart-arrow-down"),a.classList.add("smart-arrow-right"),a.classList.add("smart-visibility-hidden")):(a.classList.remove("smart-visibility-hidden"),n.expanded?(a.classList.remove("smart-arrow-right"),a.classList.add("smart-arrow-down")):(a.classList.remove("smart-arrow-down"),a.classList.add("smart-arrow-right")));let s="";for(let t=0;t<n.level;t++)s+="<div class='smart-indent'></div>";0<i._adaptiveLayout&&(a.classList.add("smart-hidden"),s=""),t.innerHTML=s,o.innerHTML=l,i.appearance.showTooltips&&o.setAttribute("title",n.label?n.label:l)}else if(a.selectionColumn)"checkBox"===i.selectionMode&&(n.selected?t.setAttribute("selected",""):t.getAttribute("selected")&&t.removeAttribute("selected"));else{const o=r.firstChild;if(o&&o.classList&&o.classList.contains("smart-indent-container")){const t=r.children[0],a=r.children[1],n=r.children[2];t.innerHTML="",a.classList.add("smart-visibility-hidden"),n.innerHTML=l,i.appearance.showTooltips&&n.setAttribute("title",l)}else{const o=n["column_"+a.dataField];if(t.getAttribute("rowspan")&&(t.removeAttribute("rowspan"),t.style.height=""),t.getAttribute("colspan")&&t.removeAttribute("colspan"),o){if(o&&1<o.colSpan){const n=i.viewColumns.indexOf(a);let l=a.computedWidth;for(let t=n;t<n+o.colSpan-1;t++){const a=i.viewColumns[t];a&&a.visible&&(l+=a.computedWidth)}t.style.width=l+"px",t.setAttribute("colspan","")}if(o&&1<o.rowSpan){const a=i.rows.indexOf(n);let l=n.cellHeight;n.element.setAttribute("rowspan","");for(let t=a;t<a+o.rowSpan-1;t++){const a=i.rows[t];a&&a.visible&&a.filtered&&(l+=a.cellHeight)}t.style.height=l+"px",t.setAttribute("rowspan","")}r.textContent!==l&&(r.textContent=l),o.setStyle(r),i.appearance.showTooltips&&r.setAttribute("title",o.tooltip||l)}else r.textContent=l}}if(r.className!==m&&(r.className=m),a.formatFunction){const t=a.formatFunction(n,a,l);void 0!==t&&(r.innerHTML=t)}}_rotateCellContent(t,i,a){const n=this,o=document.createElement("span");return t.innerHTML="",o.innerHTML=a,t.appendChild(o),o.className="rotate",o.style.transform="rotate("+i.cellsRotationAngle+"deg)",n.grid._recycleRotate(t,o,i.cellsAlign,i.cellsVerticalAlign,a)}_getCellAlignment(t,i){const a=t["column_"+i.dataField],n=a?a.align||i.cellsAlign:i.cellsAlign,o=a?a.verticalAlign||i.cellsVerticalAlign:i.cellsVerticalAlign,l={align:"",verticalAlign:""};return"left"===n?l.align="align-left":"center"===n||"middle"===n?l.align="align-center":"right"===n?l.align="align-right":void 0,"top"===o?l.verticalAlign="align-top":"center"===o||"middle"===o?l.verticalAlign="align-middle":"bottom"===o?l.verticalAlign="align-bottom":void 0,l}template(){return""}}),Smart.Utilities.Assign("Grid.Menu",class{openMenu(t){const i=this;if(!t||i.menu&&i.menu.column===t&&t.element.hasAttribute("aria-controls"))return void i.closeMenu();i.menu||(i.menu=document.createElement("div"),i.menu.classList.add("smart-grid-column-menu"),i.menu.id=i.id+"_"+i.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),i.appearance.allowColumnMenuAnimation?i.menu.classList.add("smart-animate"):i.menu.classList.remove("smart-animate"),i._createMenuItems(t),i._createFilterPanel(t),i._filterMenuItemsVisibility(t),i.menu.style.height=i.columnMenu.height?i.columnMenu.height+"px":"auto",i.menu.column&&i.menu.column!==t&&(i.menu.column.setProperty("menu",null),i.menu.column=null),document.body.appendChild(i.menu),t.setProperty("menu",i.menu);const a=t.element.getBoundingClientRect();i.menu.column=t,i.menu.style.left=a.right-t.element.actionButton.getBoundingClientRect().width+document.body.scrollLeft+"px",i.menu.style.top=a.bottom+document.body.scrollTop+"px",i.hasColumnMenu(t)?i.menu.classList.remove("smart-hidden"):i.closeMenu(),i.menu.classList.add("open")}_menuItemClick(t){const i=this,a=t.detail,n=a.value;if(n&&n.properties){const t=n.properties.command;"function"==typeof t?t.apply(i,[n.column]):i[t]&&i[t].apply(i,[n.column]),n.column.autoCloseMenu&&i.closeMenu()}}sortAscCommand(t){const i=this;i.sortBy(t.dataField,"asc")}sortDescCommand(t){const i=this;i.sortBy(t.dataField,"desc")}removeSortCommand(t){const i=this;i.sortBy(t.dataField,null)}_removeMenu(){const t=this,i=t.menu.querySelector("smart-menu");i&&t.menu.removeChild(i)}_createMenuItems(t){const i=this;i._removeMenu();const a=document.createElement("smart-menu"),n=document.createDocumentFragment(),o=t.menuItems||i.columnMenu.dataSource;a.mode="vertical",a.dropDownAppendTo="body";for(let a=0;a<o.length;a++){const l=o[a],r=document.createElement("smart-menu-item");for(let a in l){r.label=i.localize(a),r.value={column:t,properties:l[a]};const n=i=>{if(i){if("string"===t.dataType)return"A \u2192 Z";if("number"===t.dataType||"date"===t.dataType||"time"===t.dataType)return"1 \u2192 9";if("bool"===t.dataType||"boolean"===t.dataType)return"0 \u2192 1"}else{if("string"===t.dataType)return"Z \u2192 A";if("number"===t.dataType||"date"===t.dataType||"time"===t.dataType)return"9 \u2192 1";if("bool"===t.dataType||"boolean"===t.dataType)return"1 \u2192 0"}};"columnMenuItemSortAsc"==a?r.label=i.localize(a,{mode:n(!0)}):"columnMenuItemSortDesc"==a&&(r.label=i.localize(a,{mode:n(!1)})),l[a].icon&&(r.label="<span class=\"smart-grid-icon "+l[a].icon+"\"></span>"+r.label)}n.appendChild(r)}a.appendChild(n),i._filterContainer?i.menu.insertBefore(a,i._filterContainer):i.menu.appendChild(a),i.menu.itemClick=i._menuItemClick.bind(i),i.menu.addEventListener("itemClick",i.menu.itemClick)}_getFilterType(t){const i=t.dataType.endsWith("?")?t.dataType.substring(0,t.dataType.length-1):t.dataType;let a="string";return"number"===i||"int"===i||"float"===i||"int64"===i?a="numeric":"bool"===i||"boolean"===i?a="bool":"date"===i||"time"===i||"datetime"===i?a="date":"any"===i?a="any":void 0,a}_createFilterPanel(t){const i=this;if(Smart.FilterPanel)if(i.filtering.enabled&&i.filtering.filterMenu.visible&&t.allowFilter){const a=i._getFilterType(t);if(i._filterPanel&&i._filterPanel.parentNode.removeChild(i._filterPanel),i._filterPanel=i._filterPanels[a],i._filterPanel.dataField=t.dataField,!i._filterContainer){const t=document.createElement("div");t.classList.add("smart-filter-container"),i._filterContainer=t,requestAnimationFrame(function(){i.menu.appendChild(t)}),i._applyFilterHandler=function(){i.addFilter(i._filterPanel.dataField,i._filterPanel.getFilter());const t=i.columnByDataField[i._filterPanel.dataField];t._filterState=i._filterPanel.getState()},i._clearFilterHandler=function(){i.removeFilter(i._filterPanel.dataField);const t=i.columnByDataField[i._filterPanel.dataField];t._filterState=null}}if(i._filterContainer.appendChild(i._filterPanel),i._filterPanel.classList.remove("smart-hidden"),i._filterPanel.removeEventListener("filter",i._applyFilterHandler),i._filterPanel.removeEventListener("clear",i._clearFilterHandler),i._filterPanel.addEventListener("filter",i._applyFilterHandler),i._filterPanel.addEventListener("clear",i._clearFilterHandler),"none"!==t.filterMenuMode&&i.filtering.filterMenu.visible&&Smart.FilterPanel?i._filterContainer.classList.remove("smart-hidden"):i._filterContainer.classList.add("smart-hidden"),i._filterPanel.reset(),t._filterState)i._filterPanel.loadState(t._filterState);else if(t.filter){const a=t.filter,n=i._getFilterType(t);let o=a.getFilters();for(;0<o.length&&"FilterGroup"===o[0].type;)o=o[0].value;const l=a.getConditions(n),r=0<o.length?l.indexOf(o[0].condition):-1,s=1<o.length?l.indexOf(o[1].condition):-1,d=0<o.length?o[0].value:"",m=1<o.length?o[1].value:"",c=1<o.length?["and","or"].indexOf(o[1].logicalOperator):0;t._filterState={firstFilterComparison:r,firstFilterValue:d,logicalOperator:c,secondFilterComparison:s,secondFilterValue:m},i._filterPanel.loadState(t._filterState)}}else i._filterPanel&&(i._filterPanel.parentNode.removeChild(i._filterPanel),t._filterState=null)}hasColumnMenu(t){const i=this,a=t.menuItems||i.columnMenu.dataSource;let n=0;for(let o=0;o<a.length;o++){const l=a[o];for(let a in l){let o=l[a];!1===o.visible?n++:"auto"===o.visible&&(("columnMenuItemFilter"==a||"columnMenuItemRemoveFilter"==a)&&(i.filtering.filterMenu.visible||i.filtering.filterBuilder.visible)&&n++,"columnMenuItemGroupBy"==a&&!(i.grouping.dataSource&&0<i.grouping.dataSource.length&&t.allowGroup)&&n++,"columnMenuItemFilter"==a&&!t.allowFilter&&n++,"columnMenuItemRemoveFilter"==a&&!t.allowFilter&&n++,"columnMenuItemGroupBy"==a&&!t.allowGroup&&n++,("columnMenuItemSortAsc"==a||"columnMenuItemSortDesc"==a||"columnMenuItemRemoveSort"==a)&&(!t.allowSort||"none"===i.sorting.sortMode||!i.sorting.enabled)&&n++)}}const o=i.filtering.enabled&&i.filtering.filterMenu.visible&&"none"!==t.filterMenuMode;return!!(o&&Smart.FilterPanel||Smart.Menu&&n!==a.length)}_filterMenuItemsVisibility(t){const i=this,a=i.menu.querySelectorAll("smart-menu-item"),n=t.menuItems||i.columnMenu.dataSource;for(let o=0;o<n.length;o++){const l=a[o],r=n[o];for(let a in r){let n=r[a];l.disabled=!n.enabled,l.classList.remove("smart-hidden"),"columnMenuItemRemoveSort"==a&&(t.sortOrder?l.disabled=!1:l.disabled=!0),"columnMenuItemSortAsc"==a&&"asc"===t.sortOrder?l.disabled=!0:"columnMenuItemSortDesc"==a&&"desc"===t.sortOrder&&(l.disabled=!0),!0===n.visible?l.classList.remove("smart-hidden"):!1===n.visible?l.classList.add("smart-hidden"):"auto"===n.visible&&(("columnMenuItemFilter"==a||"columnMenuItemRemoveFilter"==a)&&(!1===i.filtering.enabled?l.classList.add("smart-hidden"):i.filtering.filterMenu.visible||i.filtering.filterBuilder.visible?l.classList.add("smart-hidden"):i.filtering.filterBuilder.visible&&l.classList.remove("smart-hidden")),"columnMenuItemGroupBy"==a&&(i.grouping.dataSource&&0<i.grouping.dataSource.length&&t.allowGroup?l.classList.remove("smart-hidden"):l.classList.add("smart-hidden")),"columnMenuItemFilter"==a&&!t.allowFilter&&l.classList.add("smart-hidden"),"columnMenuItemRemoveFilter"==a&&!t.allowFilter&&l.classList.add("smart-hidden"),"columnMenuItemGroupBy"==a&&!t.allowGroup&&l.classList.add("smart-hidden"),("columnMenuItemSortAsc"==a||"columnMenuItemSortDesc"==a||"columnMenuItemRemoveSort"==a)&&(t.allowSort&&"none"!==i.sorting.sortMode&&i.sorting.enabled?l.classList.remove("smart-hidden"):l.classList.add("smart-hidden")))}}}closeMenu(){const t=this;t.menu&&t.menu.column&&(t.menu.column&&(t.menu.column.setProperty("menu",null),t.menu.column=null),t.menu.parentNode&&(t.menu.classList.remove("open"),!t.appearance.allowColumnMenuAnimation&&t.menu.parentNode.removeChild(t.menu)),t.menu.removeEventListener("itemClick",t.menu.itemClick))}}),Smart.Utilities.Assign("Grid.Filter",class{addFilter(t,i,a){const n=this,o=n.columnByDataField[t];o&&o.canNotify&&(o.setProperty("filter",i),!1!==a&&n.refreshFilters())}removeFilter(t,i){const a=this,n=a.columnByDataField[t];n&&n.canNotify&&(n.setProperty("filter",null),!1!==i&&a.refreshFilters())}clearFilter(){const t=this;for(let a=0;a<t.columns.length;a++){const i=t.columns[a];i.setProperty("filter",null)}t.refreshFilters()}getFilteredColumns(){const t=this;if(t._filters){const a=[];for(let n=0;n<t._filters.length;n++){const i=t._filters[n];a[i[0]]=i[1],a.length++}return a}return[]}getVisibleRows(){const t=this,a=[];for(let n=0;n<t.rows.length;n++){const i=t.rows[n];i.visible&&(i.filtered||i.filtered===void 0)&&a.push(i)}return a}refreshFilters(){const t=this,a=[];for(let n=0;n<t.columns.length;n++){const i=t.columns[n];i.filter&&a.push([i.dataField,i.filter])}t.dataSource&&!t.dataSource.onFilter&&(t.dataSource.onFilter=function(){for(let a=0;a<t.rows.length;a++){const i=t.rows[a];i.data&&(i.filtered=!(i.data.$.filtered!==void 0)||i.data.$.filtered)}t.refresh(),t.closeMenu()}),t._filters=a,t.dataSource&&t.dataSource.virtualDataSource?(t.closeMenu(),t._virtualDataRequest("filter")):t.dataSource._filter(a),t.$.fireEvent("filter",{data:t.getFilteredColumns()})}}),Smart.Utilities.Assign("Grid.Sort",class{clearSort(){const t=this;if(!t._isSorting){t._isSorting=!0,t.dataSource.clearSort();for(let a=0;a<t._sortedColumns.length;a++){const i=t._sortedColumns[a],n=t.columnByDataField[i.dataField];n.setProperty("sortOrder",null),n.setProperty("sortIndex",null)}t._sortedColumns=[];for(let a=0;a<t.dataSource.length;a++){const i=t.rows[a],n=t.dataSource[a];i.data=n,i.boundIndex=n.boundIndex}t._recycle(),t._isSorting=!1}}getSortedColumns(){const t=this,a=[];if(t._sortedColumns)for(let n=0;n<t._sortedColumns.length;n++){const i=t._sortedColumns[n];a[i.dataField]={sortOrder:i.sortOrder,sortIndex:i.sortIndex},a.length++}return a}sortBy(t,a){var n=Math.floor;const o=this,l=o.columnByDataField[t],r=[],s=[],d=[],m=!(a!==void 0);if(o._isSorting)return;o._isSorting=!0,void 0===a&&(a="asc");const c=function(t){t.setProperty("sortOrder",null)},i=function(){if(0<o._sortedColumns.length)for(let t=0;t<o._sortedColumns.length;t++){const i=o._sortedColumns[t],a=o.columnByDataField[i.dataField];c(a)}o._sortedColumns=[]};if(null===l)return i(),void(o._isSorting=!1);if("none"===o.sorting.sortMode||!o.dataSource||!l.allowSort||o._sortAnimation)return void(o._isSorting=!1);c(l),o._sortedColumns||(o._sortedColumns=[]);let u="string";for(let n=0;n<o.dataSource.dataFields.length;n++){const i=o.dataSource.dataFields[n];if(i.name===t){u=i.dataType;break}}let p=!0;for(let n=0;n<o._sortedColumns.length;n++){const i=o._sortedColumns[n];if(i.dataField===t)if(p=!1,i.sortIndex=l.sortIndex,!m)i.sortOrder=a,null===a&&(o._sortedColumns.splice(n,1),c(l));else if("asc"===i.sortOrder)i.sortOrder="desc",a="desc";else if("desc"===i.sortOrder){o.sorting.sortToggleThreeStates?(o._sortedColumns.splice(n,1),c(l),a=null):(i.sortOrder="asc",a="asc");break}}p&&("one"===o.sorting.sortMode&&i(),null!==a&&o._sortedColumns.push({dataField:t,sortOrder:a,sortIndex:l.sortIndex,dataType:u})),l.setProperty("sortOrder",a),o._sortedColumns.sort((t,i)=>"string"==typeof t.sortIndex&&"string"==typeof i.sortIndex?0:"number"==typeof t.sortIndex&&"string"==typeof i.sortIndex?-1:"string"==typeof t.sortIndex&&"number"==typeof i.sortIndex?1:"number"==typeof t.sortIndex&&"number"==typeof i.sortIndex?t.sortIndex-i.sortIndex:void 0);for(let n=0;n<o._sortedColumns.length;n++){const t=o._sortedColumns[n];r.push(t.dataField),s.push(t.sortOrder),d.push(t.dataType)}const g=function(){if(o.dataSource&&o.dataSource.virtualDataSource)o._virtualDataRequest("sort");else{o.dataSource.sortBy(r,d,s);for(let t=0;t<o.dataSource.length;t++){const i=o.rows[t],a=o.dataSource[t];i.data=a,i.boundIndex=a.boundIndex}o._recycle()}o.$.fireEvent("sort",{data:o.getSortedColumns()})};if(o.appearance.allowSortAnimation){let t=[],a=[];o.rows.canNotify=!1,o._sortAnimation=!0;const i=function(){for(let a=0;a<o._rowElements.length;a++){const i=o._rowElements[a];i.classList.remove("smart-grid-sort-animation"),o.removeTransformMoveStyle(i),0<i.offsetHeight&&t.push(i.offsetTop)}};i(),o._sortTimer=setTimeout(function(){i(),o._sortAnimation=!1,o.rows.canNotify=!0},o.appearance.sortAnimationDuration),o._sortTimer2=setTimeout(function(){g()},o.appearance.sortAnimationDuration/2);for(let l=0;l<t.length;l++){const i=o._rowElements[l];i.classList.remove("smart-grid-sort-animation"),o.removeTransformMoveStyle(i);let r=n(Math.random()*t.length-1+1);for(;a[r];)r=n(Math.random()*t.length-1+1);a[r]=!0,o.addTransformMoveStyle(i,"0ms",0,-i.offsetTop+t[r],0,.5),i.classList.add("smart-grid-sort-animation"),setTimeout(function(){o.addTransformMoveStyle(i,o.appearance.sortAnimationDuration+"ms",0,0,0,1)}),setTimeout(function(){i.classList.remove("smart-grid-sort-animation")},o.appearance.sortAnimationDuration)}}else g();o._isSorting=!1}}),Smart.Utilities.Assign("Grid.Edit",class{editCommand(){const t=this;t.beginCellEdit()}cancelCommand(){const t=this;t.cancelCellEdit()}saveCommand(){const t=this;t.endCellEdit()}commitCommand(){const t=this;t._applyCellModifiedValues()}discardCommand(){const t=this;t._clearCellModifiedValues()}endEdit(){const t=this;t.endCellEdit()}commit(){const t=this;t._applyCellModifiedValues()}discard(){const t=this;t._clearCellModifiedValues()}beginCellEdit(t,i){const a=this,n=a.rows[t];if(!n)return!1;const o=n.getCell(i);o&&a._beginCellEdit(o)}endCellEdit(){const t=this,i=t._editCell;if(!i||i&&!i._editing)return null;const a=t._getEditorValue();if("invalid value"===a)return i.setAttribute("error",""),!1;const n=t._getEditorId(i),o=t._cellEditors[n];return o.detach(),i.element.removeAttribute("editor"),i.element.removeAttribute("error"),i._editing=!1,i.element.content.innerHTML="",a===i.value?t._recycle(!1):t.editing.batch?(t._setCellModifiedValue(i.row,i.column,a),t._recycle(!1)):i.value=a,t._editCell=null,t.editing.active=!1,!0}cancelCellEdit(){const t=this;t._editCell&&(t._editCell.element.removeAttribute("editor"),t._editCell.element.removeAttribute("error"),t._editCell._editing=!1,t._editCell.element.content.innerHTML="",t._editCell=null),t.editing.active=!1,t._recycle(!1)}beginRowEdit(){this}endRowEdit(){this}cancelRowEdit(){this}_setCellModifiedValue(t,i,a){const n=this;n._cellsModifiedValues||(n._cellsModifiedValues=[]),n._cellsModifiedValues[t.index+"_"+i.dataField]=a,n._cellsModifiedValues.length++}_applyCellModifiedValues(){const t=this;for(let i in t._cellsModifiedValues){const a=t._cellsModifiedValues[i],n=i.substring(0,i.indexOf("_")),o=i.substring(i.indexOf("_")+1),l=t.rows[n],r=l.getCell(o);r._updating=!0,r.value=a,r._updating=!1}t._clearCellModifiedValues()}_clearCellModifiedValues(){const t=this;t._cellsModifiedValues=[],t._recycle(!1)}_getEditorId(t){return t.editor===t.column.editor?t.editor.template+"_"+t.column.dataField:t.editor.template+"_"+t.column.dataField+"_"+t.row.id}_applyCommand(t){const i=this;"function"==typeof t?t.apply(i,[]):i[t]&&i[t].apply(i,[])}_handleEditKeyDown(t){const i=this,a=t.key;for(let n in i.editing.commandKeys){const t=i.editing.commandKeys[n];for(let n in t){const o=t[n];if(a===o.key){i._applyCommand(o.command);break}}}}_getInputCellEditor(t){const i=this,a=i._getEditorId(t);if(!i._cellEditors[a]){const n=document.createElement("input");i._applyCellEditorUserSettings(n,t),n.classList.add("smart-input"),n.classList.add("smart-grid-cell-editor"),n.classList.add("smart-grid-input-cell-editor");const o=function(t){t.key;return"keydown"===t.type?void i._handleEditKeyDown(t):void i.endCellEdit()};i._cellEditors[a]={element:n,getValue:function(){return n.value},setValue:function(t){n.value=t,setTimeout(function(){n.autoFocus&&n.select()},50)},attach:function(){n.addEventListener("change",o),n.addEventListener("keydown",o)},detach:function(){n.removeEventListener("change",o),n.removeEventListener("keydown",o)}}}return i._cellEditors[a]}_applyCellEditorUserSettings(t,i){this;for(let a in i.editor)if("template"!=a){if("list"==a){t.setAttribute(a,i.editor[a]);continue}t[a]=i.editor[a]}}_getAutoCompleteCellEditor(t){const a=this,i=a._getEditorId(t);if(!a._cellEditors[i]){const n=document.createElement("smart-input");a._applyCellEditorUserSettings(n,t);const o=function(t){t.key;return n.opened?void 0:"keydown"===t.type?void a._handleEditKeyDown(t):void a.endCellEdit()};n.classList.add("smart-grid-cell-editor"),n.classList.add("smart-grid-auto-complete-cell-editor");a._cellEditors[i]={element:n,setValue:function(t){n.value=t,n.autoFocus&&setTimeout(()=>{n.select()},50)},getValue:function(){return n.value},attach:function(){n.addEventListener("change",o),n.addEventListener("keydown",o)},detach:function(){n.value="",n.close(),n.removeEventListener("change",o),n.removeEventListener("keydown",o)}}}const n=a.getVisibleRows(),o=[];for(let l=0,i;l<n.length;l++)i=a.dataSource[n[l].index],i&&(i=i[t.column.dataField],-1===o.indexOf(i)&&o.push(i));return a._cellEditors[i].element.dataSource=o,a._cellEditors[i]}_getNumberInputCellEditor(t){const i=this,a=i._getEditorId(t);if(!i._cellEditors[a]){const n=document.createElement("div"),o=document.createElement("input"),l=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");i._applyCellEditorUserSettings(n,t),r.tabIndex=s.tabIndex=0,o.classList.add("smart-input"),n.classList.add("smart-grid-cell-editor"),n.classList.add("smart-grid-number-input-cell-editor"),l.classList.add("nav"),r.classList.add("up"),s.classList.add("down");const d=function(t){t.key;return"keydown"===t.type?void i._handleEditKeyDown(t):void i.endCellEdit()};o.type="number",l.appendChild(r),l.appendChild(s),n.appendChild(o),n.appendChild(l);i._cellEditors[a]={element:n,setValue:function(t){o.value=t,setTimeout(function(){n.autoFocus&&o.select()},50)},getValue:function(){const t=parseFloat(o.value);return isNaN(t)||t===1/0||t===-Infinity?0:t},attach:function(){o.addEventListener("change",d),o.addEventListener("keydown",d),r.onkeydown=d,s.onkeydown=d,r.onclick=function(){const t=parseFloat(o.value);(t<o.max||""===o.max)&&(o.value=t+1)},s.onclick=function(){const t=parseFloat(o.value);(t>o.min||""===o.min)&&(o.value=t-1)}},detach:function(){o.removeEventListener("change",d),o.removeEventListener("keydown",d),r.onclick=s.onclick=null,r.onkeydown=s.onkeydown=null}}}return i._cellEditors[a]}_getCheckBoxCellEditor(t){const i=this,a=i._getEditorId(t);if(!i._cellEditors[a]){const t=document.createElement("div");t.classList.add("smart-input"),t.classList.add("smart-grid-cell-editor"),t.classList.add("smart-grid-check-box-cell-editor"),t.tabIndex=0;const n=function(){!0!==t.value&&!1!==t.value&&null!==t.value&&(t.value=!1),t.value=null!==t.value&&!t.value,!1===t.value?t.removeAttribute("checked"):t.setAttribute("checked",t.value?"":"indeterminate"),t.focus(),setTimeout(function(){t.focus()},25)},o=function(t){"Escape"===t.key&&i.cancelCellEdit()};i._cellEditors[a]={getValue:function(){return t.value},setValue:function(i){t.value=i,!1===t.value?t.removeAttribute("checked"):t.setAttribute("checked",t.value?"":"indeterminate")},element:t,detach:function(){t.value=!1,t.removeEventListener("click",o),t.removeEventListener("keydown",o)},attach:function(){t.addEventListener("keydown",o),t.addEventListener("click",n)}}}return i._cellEditors[a]}_getEditorValue(){const t=this;if(!t._editCell)return;const i=t._editCell,a=t._getEditorId(i),n=t._cellEditors[a];if(n)switch(i.editor.template){case"input":case"autoComplete":case"numberInput":case"checkBox":default:let t=n.getValue();switch(i.column.dataType){case"float":case"int":case"number":t="int"===i.column.dataType?parseInt(t):parseFloat(t);break;case"bool":case"boolean":("true"===t||"1"===t)&&(t=!0),("false"===t||"0"===t)&&(t=!1);break;case"date":t=new new Smart.Utilities.DateTime(t);}if(i.editor.getValue){const a=i.editor.getValue(i,t);void 0!==a&&(t=a)}let a=!0;return i.column.validator&&(a=i.column.validator.evaluate(t)),a?t:"invalid value";}}_beginCellEdit(t,i){const a=this;if(t._editing)return!1;if(a._editCell){const t=a.endCellEdit();if(!1===t)return!1}a._cellEditors||(a._cellEditors=[]),a._editCell=t,a.editing.active=!0;const n=i=>{const a=i.element;t.element.setAttribute("editor","string"==typeof t.editor.template?t.editor.template:"template"),t.element.content.innerHTML="",t.element.content.appendChild(a),i.attach(),t._editing=!0},o=a._cellsModifiedValues?a._cellsModifiedValues[t.row.index+"_"+t.column.dataField]:void 0,l=o===void 0?t.value:o;switch(t.editor.template){case"checkBox":{const o=a._getCheckBoxCellEditor(t);n(o);const r=!(!0!==l&&1!==l);if("checkBox"===t.template&&i){const t=document.elementsFromPoint(i.clientX,i.clientY);t[0].classList.contains("smart-input")?o.setValue(!r):o.setValue(r)}else o.setValue(r);break}case"autoComplete":{const i=a._getAutoCompleteCellEditor(t);n(i),i.setValue(l),t.editor.autoOpen&&i.element.open();break}case"numberInput":case"input":default:{const i="numberInput"===t.editor.template?a._getNumberInputCellEditor(t):a._getInputCellEditor(t);n(i),i.setValue(l);break}}t.editor.isReady||(t.editor.isReady=!0,t.editor.onInit&&t.editor.onInit(t,editor)),t.editor.onRender&&t.editor.onRender(t,editor)}_onCellClick(t,i){const a=this;a.editing.enabled&&t.column.allowEdit&&!t.readonly&&a._beginCellEdit(t,i)}_onCellDoubleClick(){this}_onRowClick(){this}_onRowDoubleClick(){this}}),Smart.Utilities.Assign("Grid.Selection",class{selectRow(t){const i=this;i._toggleRowSelection(t,!0)}unselectRow(t){const i=this;i._toggleRowSelection(t,!1)}_refreshSelection(){const t=this;if("checkBox"===t.selectionMode){const i=t.viewColumns[0];i.refresh()}}_toggleColumnSelection(t){const i=this,a=t.element,n=a.querySelector(".smart-input");i._inputOverlay&&i._inputOverlay.parentNode.removeChild(i._inputOverlay),i._inputOverlay=document.createElement("div"),i.$.columnHeader.appendChild(i._inputOverlay),i._inputOverlay.classList.add("smart-input-overlay"),i._inputOverlay.style.top=(a.offsetHeight-n.offsetHeight)/4+1+"px",i._inputOverlay.style.left="0px",i._inputOverlay.style.height=a.offsetWidth+"px",i._inputOverlay.style.width=a.offsetWidth+"px",i._inputOverlay.onmousedown=null,i._inputOverlay.classList.add("smart-input-overlay-on")}_toggleRowSelection(t,i,a){const n=this,o=n.getVisibleRows(),l=o.find(i=>i.index===t);l.selected=void 0===i||null===i?!l.selected:i,"user"===a&&(n._inputOverlay&&n._inputOverlay.parentNode.removeChild(n._inputOverlay),n._inputOverlay=document.createElement("div"),n.$.scrollView.appendChild(n._inputOverlay),n._inputOverlay.classList.add("smart-input-overlay"),n._inputOverlay.style.top=l.top-n.scrollTop+"px",n._inputOverlay.style.left=l.cells[0].column.left-n.scrollLeft+"px",n._inputOverlay.style.height=l.cellHeight+"px",n._inputOverlay.style.width=l.cells[0].column.computedWidth+"px",n._inputOverlay.row=l,n._inputOverlay.onmousedown=function(){l.selected=!l.selected,n._inputOverlay.classList.add("smart-input-overlay-on")},n._inputOverlay.classList.add("smart-input-overlay-on"))}_toggleAllRows(t){const i=this;i.viewColumns[0]._selecting=!0;const a=i.getVisibleRows();for(let n=0;n<a.length;n++){const i=a[n];i.setProperty("selected",t)}i.viewColumns[0]._selecting=!1}selectAllRows(){const t=this;t._toggleAllRows(!0)}unselectAllRows(){const t=this;t._toggleAllRows(!1)}getSelectedRows(){const t=this,a=[];for(let n=0;n<t.rows.length;n++){const i=t.rows[n];i.selected&&a.push(i)}return a}}),Smart("smart-grid",class extends Smart.ScrollViewer{static get properties(){return{adaptivityMode:{value:{responsiveLayout:{value:{enabled:{value:!1,type:"boolean"},autoShowHiddenCells:{value:!0,type:"boolean"},width:{value:900,type:"number"}},type:"object"},adaptiveLayout:{value:{enabled:{value:!1,type:"boolean"},width:{value:450,type:"number"}},type:"object"}},type:"object"},allowColumnReorder:{value:!1,type:"boolean"},allowRowReorder:{value:!1,type:"boolean"},allowColumnFixing:{value:!1,type:"boolean"},appearance:{value:{alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},allowHover:{value:!1,type:"boolean",defaultReflectToAttribute:!0},allowRowToggleAnimation:{value:!0,type:"boolean"},allowSortAnimation:{value:!1,type:"boolean"},allowColumnLabelAnimation:{value:!0,type:"boolean"},allowColumnMenuAnimation:{value:!0,type:"boolean"},allowColumnSortButtonAnimation:{value:!0,type:"boolean"},allowColumnActionButtonAnimation:{value:!0,type:"boolean"},allowColumnFilterButtonAnimation:{value:!0,type:"boolean"},autoShowColumnSortButton:{value:!0,type:"boolean"},autoShowColumnActionButton:{value:!0,type:"boolean"},autoShowColumnFilterButton:{value:!0,type:"boolean"},sortAnimationDuration:{value:500,type:"number"},showRowHeader:{value:!1,type:"boolean"},showRowNumber:{value:!1,type:"boolean"},showRowGroupLabel:{value:!0,type:"boolean"},showRowGroupCount:{value:!0,type:"boolean"},showColumnHeaderLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showColumnLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showRowLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showFilterColumnBackground:{value:!0,type:"boolean"},showSortColumnBackground:{value:!0,type:"boolean"},showColumnSortButton:{value:!0,type:"boolean"},showColumnFilterButton:{value:!0,type:"boolean"},showColumnDescriptionButton:{value:!1,type:"boolean"},showColumnIcon:{value:!1,type:"boolean"},showColumnCustomButton:{value:!1,type:"boolean"},showColumnActionButton:{value:!0,type:"boolean"},showTooltips:{value:!1,type:"boolean"},showHorizontalScrollBarOnFixedColumns:{value:!1,type:"boolean"},showVerticalScrollBarOnFixedColumns:{value:!1,type:"boolean"}},type:"object"},columns:{value:[],type:"object",reflectToAttribute:!1},columnWidth:{value:null,type:"any",reflectToAttribute:!1},columnChooser:{value:{allowSearch:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"},label:{value:"Column Chooser",type:"string"},mode:{value:"dragAndDrop",type:"string",allowedValues:["select","dragAndDrop"]},placeholder:{value:"Drag a column here to hide it",type:"string"},width:{value:250,type:"number"},height:{value:200,type:"number"}},type:"object"},columnMenu:{value:{autoClose:{value:!0,type:"boolean"},dataSource:{value:[{columnMenuCustomizeType:{command:"customizeTypeCommand",enabled:!0,visible:!1,icon:"smart-icon-customize",label:"{{messages}}"}},{columnMenuItemRename:{command:"renameCommand",enabled:!0,visible:!1,icon:"smart-icon-rename",label:"{{messages}}"}},{columnMenuItemEditDescription:{command:"editDescriptionCommand",enabled:!0,visible:!1,icon:"smart-icon-description",label:"{{messages}}"}},{columnMenuItemDuplicate:{command:"duplicateCommand",visible:!1,enabled:!0,icon:"smart-icon-duplicate",label:"{{messages}}"}},{columnMenuItemInsertLeft:{command:"insertLeftCommand",visible:!1,enabled:!0,icon:"smart-icon-insert-left",label:"{{messages}}"}},{columnMenuItemInsertRight:{command:"insertRightCommand",visible:!1,enabled:!0,icon:"smart-icon-insert-right",label:"{{messages}}"}},{columnMenuItemSortAsc:{command:"sortAscCommand",visible:"auto",enabled:!0,icon:"smart-icon-sort-a-z",label:"{{messages}}"}},{columnMenuItemSortDesc:{command:"sortDescCommand",visible:"auto",enabled:!0,icon:"smart-icon-sort-z-a",label:"{{messages}}"}},{columnMenuItemRemoveSort:{command:"removeSortCommand",visible:"auto",enabled:!0,icon:"smart-icon-cancel-circled",label:"{{messages}}"}},{columnMenuItemFilter:{command:"addFilterCommand",visible:"auto",enabled:!0,icon:"smart-icon-add-filter",label:"{{messages}}"}},{columnMenuItemRemoveFilter:{command:"removeFilterCommand",enabled:!0,visible:"auto",icon:"smart-icon-cancel-circled-outline",label:"{{messages}}"}},{columnMenuItemGroupBy:{command:"groupByCommand",enabled:!0,visible:"auto",icon:"smart-icon-group-by",label:"{{messages}}"}},{columnMenuItemHide:{command:"hideColumnCommand",enabled:!0,visible:!1,icon:"smart-icon-hide",label:"{{messages}}"}},{columnMenuItemDelete:{command:"deleteColumnCommand",enabled:!0,visible:!1,icon:"smart-icon-delete",label:"{{messages}}"}}],type:"array"},visible:{value:!1,type:"boolean"},width:{value:250,type:"number"},height:{value:null,type:"number?"}},type:"object"},columnGroups:{value:[],type:"array",reflectToAttribute:!1},columnHeight:{value:null,type:"any",reflectToAttribute:!1},columnResizeMode:{value:"none",type:"string",allowedValues:["none","nextColumn","currentColumn"]},dataSource:{value:null,type:"object",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},grouping:{value:{dataSource:{value:[],type:"array",reflectToAttribute:!1}},type:"object"},messages:{extend:!0,value:{en:{invalidColumnProperty:"{{elementType}}: Invalid property name \"{{propertyName}}\" set for Column: \"{{type}}\"",invalidRowProperty:"{{elementType}}: Invalid property name \"{{propertyName}}\" set for Row\"",frozenColumns:"{{elementType}}: To Pin/Freeze a column group, all columns within it should be frozen.",frozenRows:"{{elementType}}: To Pin/Freeze a special cell, all rows within it should be frozen.",columnGroups:"{{elementType}}: Please, check the initialization of the smartGrid's columns array. The columns in a column group are expected to be siblings in the columns array.",min:"Min: {{value}}",max:"Max: {{value}} ",sum:"Sum: {{value}} ",avg:"Avg: {{value}} ",count:"Count: {{value}} ",pagerFirstButton:"First",pagerLastButton:"Last",pagerPreviousButton:"Previous",pagerNextButton:"Next",pagerNavigateToLabel:"Go to:",pagerPageSizeLabel:"Show:",pagerNavigateToInputPlaceholder:"",pagerEllipsis:"...",pagerSummaryString:"of",pagerSummaryPrefix:"of",pagerSummarySuffix:"",columnMenuCustomizeType:"Customize type",columnMenuItemRename:"Rename",columnMenuItemEditDescription:"Edit description",columnMenuItemDuplicate:"Duplicate",columnMenuItemInsertLeft:"Insert left",columnMenuItemInsertRight:"Insert right",columnMenuItemSortAsc:"Sort {{mode}}",columnMenuItemSortDesc:"Sort {{mode}}",columnMenuItemRemoveSort:"Remove Sort",columnMenuItemFilter:"Filter",columnMenuItemRemoveFilter:"Remove Filter",columnMenuItemGroupBy:"Group by this column",columnMenuItemHide:"Hide",columnMenuItemDelete:"Delete"}},type:"object"},onCellValue:{value:null,type:"any"},onRowInit:{value:null,type:"any"},onRowInserted:{value:null,type:"any"},onRowRemoved:{value:null,type:"any"},onRowUpdated:{value:null,type:"any"},onColumnInit:{value:null,type:"any"},onColumnInserted:{value:null,type:"any"},onColumnRemoved:{value:null,type:"any"},onColumnUpdated:{value:null,type:"any"},filtering:{value:{enabled:{value:!1,type:"boolean"},filter:{value:[],type:"array",reflectToAttribute:!1},filterRow:{value:{visible:{value:!1,type:"boolean"},menuVisible:{value:!1,type:"boolean"},applyMode:{value:"auto",type:"string",allowedValues:["auto","click"]},autoApplyModeDelay:{value:300,type:"number"}},type:"object"},filterMenu:{value:{visible:{value:!0,type:"boolean"},buttons:{value:["cancel","clear","filter"],type:"array"},dataSource:{value:null,type:"any"},width:{value:250,type:"number"},height:{value:200,type:"number"}},type:"object"},filterBuilder:{value:{visible:{value:!1,type:"boolean"},height:{value:null,type:"number?"}},type:"object"}},type:"object"},editing:{value:{active:{value:!1,readonly:!0,type:"boolean"},enabled:{value:!1,type:"boolean"},batch:{value:!1,type:"boolean"},action:{value:"click",type:"string",allowedValues:["none","click","dblClick"]},commandKeys:{value:[{edit:{command:"editCommand",key:"F2"}},{cancel:{command:"cancelCommand",key:"Escape"}},{save:{command:"saveCommand",key:"Enter"}}],type:"array"},commandBar:{visible:{value:!1,type:"boolean"},position:{value:"far",allowedValues:["near","far"],type:"string"},commands:{value:[{add:{command:"addCommand",useIcon:!0,visible:!0,icon:"smart-icon-description",label:"{{messages}}"}},{discard:{command:"discardCommand",useIcon:!0,visible:!0,icon:"smart-icon-cancel",label:"{{messages}}"}},{commit:{command:"commitCommand",useIcon:!0,visible:!0,icon:"smart-icon-save",label:"{{messages}}"}}],type:"array"},type:"object"},commandColumn:{visible:{value:!1,type:"boolean"},position:{value:"far",allowedValues:["near","far"],type:"string"},commands:{value:[{edit:{command:"editCommand",useIcon:!0,visible:!0,icon:"smart-icon-rename",label:"{{messages}}"}},{delete:{command:"deleteCommand",useIcon:!0,visible:!0,icon:"smart-icon-description",label:"{{messages}}"}},{cancel:{command:"cancelCommand",useIcon:!0,visible:!0,icon:"smart-icon-cancel",label:"{{messages}}"}},{save:{command:"saveCommand",useIcon:!0,visible:!0,icon:"smart-icon-save",label:"{{messages}}"}}],type:"array"},type:"object"},mode:{value:{value:"cell",allowedValues:["cell","row","form","popup"]},type:"object"},popup:{value:{header:{value:"",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:0,type:"any"},top:{value:0,type:"any"},model:{value:!0,type:"bool"}},type:"object"}},type:"object"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},paging:{value:{enabled:{value:!1,type:"boolean"},spinner:{value:{enabled:{value:!1,type:"boolean"},step:{value:1,type:"number"}},type:"object"},pageSize:{value:10,type:"int",validator:"pageSizeValidator"},pageIndex:{value:0,type:"int",validator:"pageIndexValidator"}},type:"object"},pager:{value:{autoEllipsis:{value:"both",allowedValues:["none","before","after","both"],type:"string"},position:{value:"far",allowedValues:["near","far","both"],type:"string"},template:{value:"",type:"string"},pageSizeSelector:{value:{visible:{value:!1,type:"boolean"},dataSource:{value:[10,20,50],type:"object"},position:{value:"far",allowedValues:["near","far"],type:"string"}},type:"object"},summary:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},navigationButtons:{value:{position:{value:"both",allowedValues:["near","far","both"],type:"string"},prevNextButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},firstLastButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},labels:{value:{visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},navigationInput:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},pageIndexSelectors:{value:{visible:{value:!0,type:"boolean"},dataSource:{value:10,type:"any"}},type:"object"},visible:{value:!1,type:"boolean"}},type:"object",reflectToAttribute:!1},placeholder:{value:"No Rows",type:"string"},rowDetail:{value:{autoExpandAll:{value:!1,type:"boolean"},allowToggleAnimation:{value:!0,type:"boolean"},enabled:{value:!1,type:"boolean"},visible:{value:!0,type:"boolean"},template:{value:"",type:"any"},height:{value:200,type:"number"}},type:"object"},rowAdaptiveDetail:{value:{autoExpandAll:{value:!1,type:"boolean"},allowToggleAnimation:{value:!0,type:"boolean"},enabled:{value:!1,type:"boolean"},visible:{value:!0,type:"boolean"},template:{value:"",type:"any"},height:{value:200,type:"number"}},type:"object"},rowMinHeight:{value:30,type:"number"},rowHeight:{value:null,type:"any",reflectToAttribute:!1},rowResizeMode:{value:"nextRow",type:"string",allowedValues:["none","nextRow","currentRow"]},hierarchySummaryRow:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},summaryRow:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},scrollMode:{value:"physical",allowedValues:["physical","virtual","infinite","deferred"],type:"string"},newRow:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"},label:{value:"Click here to add a new row",type:"string"},template:{value:"",type:"string"}},type:"object"},columnHeader:{value:{visible:{value:!0,type:"boolean"}},type:"object"},groupHeader:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},header:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},footer:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},selectionMode:{value:"default",allowedValues:["none","default","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},sorting:{value:{enabled:{value:!1,type:"boolean"},sort:{value:[],type:"array"},sortMode:{value:"one",allowedValues:["none","one","many"],type:"string"},sortToggleThreeStates:{value:!0,type:"boolean"}},type:"object"}}}static get requires(){return{}}static get styleUrls(){return["smart.grid.css"]}template(){return`<div class=\'smart-container\'id=\'container\' disabled=\'[[disabled]]\' role=\'grid\'>
                <div id=\'header\' class=\'smart-grid-header smart-hidden\' ></div>
                <div id=\'groupHeader\' class=\'smart-grid-group-header smart-hidden\'></div>
                <div id=\'headerPager\' top class=\'smart-grid-pager smart-hidden\'></div>
                 <div id=\'content\' class=\'smart-grid-content\'>
                    <div id=\'placeholder\' class =\'smart-hidden smart-placeholder smart-grid-placeholder\'>[[placeholder]]</div>
                    <div id=\'columnHeader\' class=\'smart-grid-column-header\'>
                        <div id=\'columnNearContainer\' class=\'near smart-hidden smart-grid-column-header-cell-container\'>
                       </div>
                       <div id=\'columnContainer\' class=\'center smart-grid-column-header-cell-container\'>
                       </div>
                        <div id=\'columnFarContainer\' class=\'far smart-hidden smart-grid-column-header-cell-container\'>
                       </div>
                    </div>
                    <div id=\'scrollView' class =\'smart-grid-scroll-view\'>
                        <div id=\'rowNearContainer\' class=\'near smart-hidden smart-grid-row-container\'>
                        </div>
                         <div id=\'rowContainer\' class=\'center smart-grid-row-container\'>
                        </div>
                        <div id=\'rowFarContainer\' class=\'far smart-hidden smart-grid-row-container\'>
                        </div>
                        <smart-scroll-bar id=\'verticalScrollBar\' class=\'smart-grid-scroll-bar\' wait disabled=\'[[disabled]]\' orientation=\'vertical\'></smart-scroll-bar>
                        <smart-scroll-bar id=\'horizontalScrollBar\' class=\'smart-grid-scroll-bar\' wait disabled=\'[[disabled]]\'></smart-scroll-bar>
                    </div>
                  <div id=\'filterFooter\' class=\'smart-grid-filter-footer smart-hidden\'></div>
                </div>
                <div id=\'loadingIndicatorContainer\' class=\'smart-loader-container\'>
                    <span id=\'loadingIndicator\' class=\'smart-grid-loader smart-loader\'></span>
                    <span id=\'loadingIndicatorPlaceHolder\' class =\'smart-loader-label smart-hidden\'>[[loadingIndicatorPlaceholder]]</span>
                </div>
                <div id=\'footerPager\' class=\'smart-grid-pager smart-hidden\'></div>
                <div id=\'footer\' class=\'smart-grid-footer smart-hidden\'></div>
            </div>`}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler","document.move":"_moveHandler","document.down":"_downHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler","columnHeader.down":"_columnDownHandler","columnHeader.move":"_columnMoveHandler","columnHeader.mouseleave":"_columnMouseLeaveHandler","rowNearContainer.down":"_rowDownHandler","rowContainer.down":"_rowDownHandler","rowFarContainer.down":"_rowDownHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler"}}pageSizeValidator(t,i){const a=this;return 0>i?0:a.dataSource&&i>a.dataSource.length?a.dataSource.length:void 0}pageIndexValidator(t,i){const a=this;if(0>i)return 0;if(a.dataSource){const t=Math.ceil(a.dataSource.length/a.paging.pageSize);if(i>t)return t}}offsetTop(t){const i=this;return t?t.offsetTop+i.offsetTop(t.offsetParent):0}offsetLeft(t){const i=this;return t?t.offsetLeft+i.offsetLeft(t.offsetParent):0}offset(t){return{left:this.offsetLeft(t),top:this.offsetTop(t)}}getBoundingRect(t){let i=window.pageXOffset,a=window.pageYOffset,n=t.getBoundingClientRect();if(t!==document.body)for(let n=t.parentNode;n!==document.body;)i+=n.scrollLeft,a+=n.scrollTop,n=n.parentNode;return{bottom:n.bottom+a,height:n.height,left:n.left+i,right:n.right+i,top:n.top+a,width:n.width}}_downHandler(){}_upHandler(t){const i=this,a=i.getBoundingRect(i);if((t.pageX<a.left||t.pageX>a.right||t.pageY<a.top||t.pageY>a.bottom)&&(i._inputOverlay&&(i._inputOverlay.parentNode.removeChild(i._inputOverlay),i._inputOverlay=null),i.editing.active&&setTimeout(()=>{t.defaultPrevented||i.endEdit()},50),i.menu)){const a=t.originalEvent.target;if(!i.contains(a)&&!i.menu.contains(a)){const t=i.menu.querySelectorAll("smart-drop-down-list"),n=i.menu.querySelectorAll("smart-date-time-picker");for(let n=0;n<t.length;n++){const i=t[n],o=i.$.dropDownContainer;if(o.contains(a))return}for(let t=0;t<n.length;t++){const i=n[t],o=i.$.dropDownContainer;if(o.contains(a))return}return void i.closeMenu()}}if(i.classList.remove("smart-grid-resize-mode"),i.$.root.classList.remove("smart-grid-resize-mode"),i._rowToResize){const t=i.rows[i._rowToResizeVisibleIndex],a=i._rowToResizeRect,n=parseFloat(i._rowResizeLine.style.top)-a.top;return t.height=n,i._rowResizeLine.parentNode.removeChild(i._rowResizeLine),i._rowResizeLine=null,i._rowToResize=null,i._rowToResizeRect=null,i._rowToResizeBoundIndex=null,i._rowToResizeVisibleIndex=null,void i.refresh()}if(!i._columnToResizeElement)return;const n=i.columnByDataField[i._columnToResizeDataField],o=i._columnToResizeRect,l=a.left+parseInt(i._columnResizeLine.style.left)-o.left+i.scrollLeft;if(i.columns.canNotify=!1,"nextColumn"===i.columnResizeMode){const t=i._nextColumn(n),a=parseInt(n.computedWidth-l);n.width=l,t.width=parseInt(t.computedWidth)+a}else n.width=l;i.columns.canNotify=!0,i._columnResizeLine.parentNode.removeChild(i._columnResizeLine),i._columnResizeLine=null,i._columnResizeStartLine.parentNode.removeChild(i._columnResizeStartLine),i._columnResizeTooltip.parentNode.removeChild(i._columnResizeTooltip),i._columnResizeStartLine=null,i._columnToResizeElement=null,i._columnToResizeRect=null,i._columnToResizeDataField=null,i._columnResizeTooltip=null,i.refresh()}_nextColumn(t){const a=this;for(let n=0;n<a.viewColumns.length;n++){const i=a.viewColumns[n];if(i.visibleIndex===t.visibleIndex+1)return i}return null}_columnMoveResizeHandler(t){const i=this,a=5,n=i.getBoundingRect(i),o=function(){const t=i._columnToResizeRect,a=n.left+parseFloat(i._columnResizeLine.style.left)-t.left+i.scrollLeft;i._columnResizeTooltip.innerHTML="w: "+parseInt(a)+"px"};if(i._columnResizeLine){const a=i.columnByDataField[i._columnToResizeDataField],l=i._columnToResizeRect,r=a.minWidth,s=a.maxWidth,d=i._nextColumn(a);if(t.pageX<n.left)return;if("nextColumn"===i.columnResizeMode&&d&&t.pageX>=n.left+d.left+d.width-d.minWidth-i.scrollLeft)return i._columnResizeLine.style.left=-n.left+n.left+d.width+d.left-d.minWidth-i.scrollLeft+"px",void o();if(l.left+r-i.scrollLeft>=t.pageX)return i._columnResizeLine.style.left=-n.left+l.left+r-i.scrollLeft+"px",void o();if(l.left+s-i.scrollLeft<=t.pageX)return i._columnResizeLine.style.left=-n.left+l.left+s-i.scrollLeft+"px",void o();i._columnResizeLine.style.left=-n.left+t.pageX+"px",o()}else{const i=this,n=document.elementsFromPoint(t.clientX,t.clientY);let o=null,l=null;if(i._columnResizeLine)return;for(let t=0;t<n.length;t++){const i=n[t];if(i.getAttribute("data-field")){o=i.getAttribute("data-field"),l=i;break}}if(i._columnToResizeElement&&(i._columnToResizeElement.style.cursor="",i._columnToResizeElement=null),o){const n=l.getBoundingClientRect().right;if(l.style.cursor="",n-a<=t.clientX&&t.clientX<=n+a){const t=i.columnByDataField[o];if(!t||t&&!t.allowResize)return;const a=i._isLastVisibleColumn(t);if("nextColumn"===i.columnResizeMode&&a)return;l.style.cursor="col-resize",i._columnToResizeRect=i.getBoundingRect(l),i._columnToResizeElement=l,i._columnToResizeDataField=o}}}}_moveHandler(t){const i=this;"none"!==i.columnResizeMode&&i._columnMoveResizeHandler(t),i.allowRowResize&&i._rowMoveResizeHandler(t)}_rowMoveResizeHandler(t){const i=this,a=document.elementsFromPoint(t.clientX,t.clientY),n=5;let o=null,l=null,r=null;if(i._rowResizeLine){const a=i.getBoundingRect(i.$.scrollView);if(t.pageY<=a.top)return;if(t.pageY>=a.bottom)return;const o=i.rows[i._rowToResizeVisibleIndex],l=i._rowToResizeRect,r=o.minHeight,s=o.maxHeight;return l.top+r+n>=t.pageY?void(i._rowResizeLine.style.top=l.top+r-a.top+n+"px"):l.top+s<=t.pageY?void(i._rowResizeLine.style.top=-a.top+l.top+s+"px"):void(i._rowResizeLine.style.top=-a.top+t.pageY-1+"px")}for(let n=0;n<a.length;n++){const t=a[n];if(t.getAttribute("header")){r=t,o=t.getAttribute("bound-index"),l=t.getAttribute("visible-index");break}}if(i._rowToResize&&(i._rowToResize.style.cursor="",i._rowToResize=null),null!==o&&0<=o){const a=r.getBoundingClientRect().bottom;if(r.style.cursor="",a-n<=t.clientY&&t.clientY<=a+n){const t=i.rows[l];if(!t||t&&!t.allowResize)return;r.style.cursor="row-resize",i._rowToResizeRect=i.getBoundingRect(r),i._rowToResize=r,i._rowToResizeBoundIndex=o,i._rowToResizeVisibleIndex=l}}}_rowDownResizeHandler(){const t=this,i=t._rowToResizeRect,a=function(){const a=document.createElement("div");return a.classList.add("smart-grid-resize-line","row"),a.style.width=t.$.scrollView.offsetWidth-t._rowToResize.offsetLeft+"px",a.style.left="0px",a.style.top=-t.getBoundingRect(t.$.scrollView).top+i.bottom+"px",a};t._rowResizeLine=a(),t._rowResizeStartLine=a(),t.$.scrollView.appendChild(t._rowResizeLine),t.$.scrollView.appendChild(t._rowResizeStartLine)}_rowDownSelectHandler(t){const i=this,a=document.elementsFromPoint(t.clientX,t.clientY);let n=null;for(let o=0;o<a.length;o++){const t=a[o];t.getAttribute("bound-index")&&(n=t.getAttribute("bound-index"))}if(null!==n){if(i._rowToResize&&!i._rowResizeLine)return void i._rowDownResizeHandler(t);"excel"!==i.selectionMode&&i._toggleRowSelection(parseInt(n),null,"user")}}_columnMouseLeaveHandler(){const t=this;for(let a=0;a<t._columnElements.length;a++){const i=t._columnElements[a],n=i.column;n&&n.autoShowActionButton&&i._hideActionButton()}}_columnMoveHandler(t){const a=this;if(!(a._columnResizeStartLine||a._rowResizeStartLine))for(let n=0;n<a._columnElements.length;n++){const i=a._columnElements[n],o=i.column;if(o&&o.autoShowActionButton){const n=i.getBoundingClientRect(),l=a.offset(i);if(!(l.left<=t.pageX&&l.left+n.width-3>=t.pageX))i._hideActionButton();else if(l.top<=t.pageY&&l.top+n.height>=t.pageY){if(!a.hasColumnMenu(o))continue;i._showActionButton()}else i._hideActionButton()}}}_columnDownResizeHandler(){const t=this,i=t._columnToResizeRect,a=t.getBoundingRect(t.$.columnHeader),n=function(){const t=document.createElement("div");return t.classList.add("smart-grid-resize-line"),t.style.height="100%",t.style.left=-a.left+i.right+"px",t.style.top=-a.top+i.top+"px",t},o=document.createElement("div");o.classList.add("smart-grid-resize-tooltip"),t._columnResizeTooltip=o,t._columnResizeTooltip.style.left=-a.left+i.right+"px",t._columnResizeTooltip.innerHTML="w: "+parseInt(i.width)+"px",t._columnResizeLine=n(),t._columnResizeStartLine=n(),"currentColumn"===t.columnResizeMode&&(t.classList.add("smart-grid-resize-mode"),t.$.root.classList.add("smart-grid-resize-mode")),t.$.root.appendChild(t._columnResizeTooltip),t.$.root.appendChild(t._columnResizeLine),t.$.root.appendChild(t._columnResizeStartLine)}_columnDownHandler(t){const i=this,a=document.elementsFromPoint(t.clientX,t.clientY);i.closeMenu();let n=null,o=null;for(let l=0;l<a.length;l++){const t=a[l];if(t.getAttribute("data-field")){n=t.getAttribute("data-field"),o=t;break}}if(n){const a=o.column;if("_checkBox"===n)return a.selected="indeterminate"===a.selected||!a.selected,void i._toggleColumnSelection(a,a.selected,"user");if(i._columnToResizeElement&&!i._columnResizeLine)return void i._columnDownResizeHandler(t);a.allowSortToggleOnClick&&i.sorting.enabled&&i.sortBy(n)}}addTransformMoveStyle(t,i,a,n,o,l){t.style.opacity=l,t.style["transition-duration"]=i,t.style.transform="translate3d("+a+"px,"+n+"px,"+o+"px)"}removeTransformMoveStyle(t){t.style.opacity="",t.style["transition-duration"]="",t.style.transform=""}_rowDownHandler(t){const i=this;if(i._inputOverlay&&i._inputOverlay.classList.remove("smart-input-overlay-on"),i.closeMenu(),i._rowDownSelectHandler(t),i._toggledRow&&i.appearance.allowRowToggleAnimation)return;const a=document.elementsFromPoint(t.pageX,t.pageY);let n=null,o=null,l=null,r=null,s=null;const d=function(){const t=i._scrollView.scrollLeft;i._refreshLayout(),i._recycle(),i._scrollView.scrollLeft=t};i._lastPointerDownTime=new Date;for(let d=0;d<a.length;d++){const t=a[d];if(t.classList.contains("smart-arrow-down")&&(r=t),t.classList.contains("smart-arrow-right")&&(r=t),t.classList.contains("smart-arrow-left")&&(r=t),t.classList.contains("smart-grid-tree-column-cell")&&(l=!0),t.classList.contains("smart-grid-row-detail-cell")&&(o=!0),"smart-grid-cell"===t.nodeName.toLowerCase()&&(s=t),"smart-grid-row"===t.nodeName.toLowerCase()){n=t;break}}if(n)if(l&&r||0<i._adaptiveLayout&&!1===n.row.leaf){const t=n.row;t.toggle()}else if(i.rowDetail.enabled&&i.rowDetail.visible&&o){const t=n.row;n.classList.add("animation"),t.detailExpanded=!t.detailExpanded,t.height=n.row.detailExpanded?t.cellHeight+t.detailHeight:t.cellHeight,(t.adaptiveDetailExpanded||i.adaptivityMode.responsiveLayout.autoShowHiddenCells&&t.adaptiveHeight)&&!t.label&&(t.height+=t.adaptiveHeight),d()}else{const a=n.row,o=s.cell;i.$.fireEvent("rowClick",{index:a.index,row:a}),i.$.fireEvent("cellClick",{cell:o}),i._onRowClick(a.index,a,t),i._onCellClick(o,t),300>new Date-i._clickTime&&(i._clickedRow===n&&(i._onRowDoubleClick(a.index,a,t),i.$.fireEvent("rowDoubleClick",{index:a.index,row:a})),i._clickedCell===s&&(i._onCellDoubleClick(o,t),i.$.fireEvent("cellDoubleClick",{cell:o}))),i._clickedRow=n,i._clickedCell=s,i._clickTime=new Date}}_focusHandler(){const t=this;t._focused=!0}_blurHandler(){const t=this;t._focused=!1}_refreshPaging(t){const i=this;requestAnimationFrame(()=>{i._refreshLayout(),t||(i._initializeRowElements(),i._refreshLayout()),i.dataSource&&i.dataSource.virtualDataSource?i._virtualDataRequest(t?"pageIndexChange":"pageSizeChange"):i._recycle(!1);const a=i.paging.pageIndex*i.paging.pageSize,n=a+i.paging.pageSize;i.$.fireEvent("page",{data:{first:a,last:n,size:n-a}})})}_notify(t,a,n){const o=this;if(o.notifyFn)for(let l=0;l<o.notifyFn.length;l++)o.notifyFn[l](t,a,n)}notify(t){const i=this;t&&(!i.notifyFn&&(i.notifyFn=[]),i.notifyFn.push(t))}propertyChangedHandler(t,i,a){const n=this;if(n.isInitialized)switch(super.propertyChangedHandler(t,i,a),n._notify(t,i,a),t){case"filtering_enabled":a&&n._createFilterPanels();break;case"paging_pageIndex":case"pager_position":case"pager_visible":n._refreshPaging(!0);break;case"paging_pageSize":n._refreshPaging(!1);break;case"columns":{n._renderColumns();break}case"dataSource":{n._renderRows();break}case"displayLoadingIndicator":{n._setLoadingIndicatorVisibility();break}case"filterable":{n._refreshLayout();break}case"selectionMode":{const t="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"default";0===n.selectedIndexes.length&&0<n.dataSource.length&&("oneOrMany"===n.selectionMode||"one"===n.selectionMode||"default"===n.selectionMode)&&n.select(n.dataSource[0]);const a=n.selectedValues;n.selectedValues=[],n._refreshSelection();for(let t=0;t<a.length;t++){const i=a[t],o=n.getRow(i);o&&("default"===n.selectionMode?n._select(o):n.select(o))}n.dataSource.forEach(i=>i.displayMode=t),n._recycle();break}}}clearSelection(){const t=this;t.dataSource&&0!==t.dataSource.length&&t._recycle()}ensureVisible(t){const i=this;return!("string"==typeof t&&(t=i.getRow(t),!t))&&(t.top+t.height>=i._scrollView.scrollTop+i._clientSize.height&&(i._scrollView.scrollTop+=t.height),(t.top<=i._scrollView.scrollTop||t.top>=i._scrollView.scrollTop+i.$.rowContainer.offsetHeight)&&(i._scrollView.scrollTop=t.top),0===i._indexOf(t)||1===i._indexOf(t)&&1<i.dataSource.length&&i.dataSource[0].grouped?i._scrollView.scrollTop=0:i._indexOf(t)===i.dataSource.length-1&&(i._scrollView.scrollTop=i._scrollView.scrollHeight),!0)}ready(){super.ready();const t=this,i=t._scrollView.vScrollBar,a=t._scrollView.hScrollBar;i.hasStyleObserver=!1,a.hasStyleObserver=!1,i.hasResizeObserver=!1,a.hasResizeObserver=!1,i.wait=!1,a.wait=!1,i.onChange=t._verticalScrollbarHandler.bind(t),a.onChange=t._horizontalScrollbarHandler.bind(t),t.setFocusable(!0),t._setLoadingIndicatorVisibility(),t._render()}_createFilterPanels(){const t=this;if(!t._filterPanels)t._filterPanels=[];else return;t.filtering.enabled&&0===t._filterPanels.length&&requestAnimationFrame(()=>{const i=document.createElement("smart-filter-panel"),a=document.createElement("smart-filter-panel"),n=document.createElement("smart-filter-panel"),o=document.createElement("smart-filter-panel");for(let l in a.filterType="boolean",n.filterType="numeric",o.filterType="date",t._filterPanels.bool=a,t._filterPanels.date=o,t._filterPanels.numeric=n,t._filterPanels.string=i,t._filterPanels){const i=t._filterPanels[l];i.classList.add("smart-hidden","smart-async"),t.$.content.appendChild(i),i.parentNode.removeChild(i)}})}_applyScrollMode(){const t=this,i=t._scrollView.vScrollBar;requestAnimationFrame(()=>{switch(i.largeStep=t.$.scrollView.offsetHeight,t.scrollMode){case"physical":case"infinite":case"virtual":i.step=10,i.mechanicalAction="switchWhileDragging";break;case"deferred":i.step=10,i.mechanicalAction="switchWhenReleased";break;case"logical":i.step=t.rowMinHeight,i.mechanicalAction="switchWhileDragging";}})}suspendLayout(){const t=this;t._layoutSuspended=!0}resumeLayout(t){const i=this;i._layoutSuspended=!1,t?i.refresh():i._recycle(!1)}get _autoRowHeight(){const t=this;if(t.__autoRowHeight)return t.__autoRowHeight;const i=new Smart.Grid.Row({adaptiveHeight:0,index:0,grid:t}),a=i.createElement();let n=t.rowMinHeight;t.$.scrollView.appendChild(a);const o={};for(let a=0;a<t.dataSource.dataFields.length;a++){const i=t.dataSource.dataFields[a];o[i.name]="ABCDEFHIJLMNOPQRSTUVWXYZ1234567910|"}i.data=o,i.render();for(let o=0;o<a.children[1].children.length;o++){a.children[1].children[o].style.height="auto",n=Math.max(t.rowMinHeight,a.children[1].children[o].offsetHeight);break}return t.$.scrollView.removeChild(a),t.__autoRowHeight=n,n}get _scrollHeight(){var t=Math.ceil;const a=this;let n=a.rowHierarchy?a.rowHierarchy:a.rows,o=0,l=a._autoRowHeight,r=0,s=0;if(a.__scrollHeight)return a.__scrollHeight;if(0===n.length||0===a.columns.length)return 0;n.canNotify=!1,a.paging.enabled&&(n=n.slice(a.paging.pageIndex*a.paging.pageSize,(a.paging.pageIndex+1)*a.paging.pageSize));let d=0,m=0;if(a._responsiveLayout)for(let t=0;t<a.viewColumns.length;t++){const i=a.viewColumns[t];i.autoGenerated||(i.adaptiveVisible?d++:m++)}else if(0<a._adaptiveLayout)for(let t=0;t<a.viewColumns.length;t++){const i=a.viewColumns[t];i.autoGenerated||d++}const c=2===a._adaptiveLayout?"50%":1===a._adaptiveLayout?"100%":0,u=n.length;for(let p=0;p<u;p++){const i=n[p];if(!i.visible||!i.filtered){i.height=0,i.cellHeight=0,i.top=o;continue}let u=!i.height||!i.cellHeight||c||i.adaptiveHeight||a._responsiveLayout;if(u&&!i.expandHeight){if(i.detailHeight||(i.detailHeight=200),i.adaptiveDetailHeight||(i.adaptiveDetailHeight=200),!a.rowHeight){if(i.height=l,i.adaptiveHeight=0,c){const a="50%"===c?t(d/2):d;i.adaptiveHeight=i.label?i.height:2*a*l}if(i.cellHeight=i.height,a._responsiveLayout){const a=t(d/m);i.adaptiveHeight=i.label?i.height:a*l,i.adaptiveHeight+=50}a.rowDetail.enabled&&i.detailExpanded&&(i.height+=i.detailHeight),c&&0<a._adaptiveLayout?i.height=i.adaptiveHeight:a._responsiveLayout&&(a.adaptivityMode.responsiveLayout.autoShowHiddenCells||i.adaptiveDetailExpanded)&&!i.label&&(i.height+=i.adaptiveHeight)}else a.rowHeight&&("number"==typeof a.rowHeight?(a.rowHeight<a.rowMinHeight&&(a.rowHeight=a.rowMinHeight),i.height=a.rowHeight,i.cellHeight=i.height,a.rowDetail.enabled&&i.detailExpanded&&(i.height+=i.detailHeight)):(a.rowHeight(p,i),!i.height&&(i.height=l),i.cellHeight=i.height,a.rowDetail.enabled&&i.detailExpanded&&(i.height+=i.detailHeight)));a._rowGap&&p<a.rows.length-1&&(i.height+=a._rowGap)}!0===i.freeze||"near"===i.freeze?r+=i.height:"far"===i.freeze&&(s+=i.height),i.top!==o&&(i.top=o),o+=i.expandHeight?i.cellHeight:i.height}return a.__scrollHeight=o,a.__frozenNearHeight=r,a.__frozenFarHeight=s,a._scrollView.scrollHeight=o-a.$.scrollView.offsetHeight+r+s,o=a.__scrollHeight+r,n.canNotify=!0,o}_measureColumnHeight(){const t=this;if(t.__measuredColumnHeight)return t.__measuredColumnHeight;const i=document.createElement("smart-grid-column");i.style.height="auto",i.style.position="static";const a=document.createElement("div");a.classList.add("smart-label"),a.innerHTML="aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRwWxXyYzZ1234567890",i.appendChild(a),t.$.columnHeader.appendChild(i);const n=t.$.columnHeader.offsetHeight;return t.$.columnHeader.removeChild(i),t.__measuredColumnHeight=n,n}_initializeColumnGroupsHierarchy(){const t=this;let i=0;if(t.$.columnContainer.innerHTML="",0<t.columnGroups.length){for(let a=0;a<t.columnGroups.length;a++)t.columnGroups[a].parent=null,t.columnGroups[a].groups=null;for(let a=0;a<t.viewColumns.length;a++)t.viewColumns[a].parent=null,t.viewColumns[a].groups=null;const a=function(a){for(let n=0,i;n<t.columnGroups.length;n++)if(i=t.columnGroups[n],i.name===a)return i;return null},n=function(t){let a=[];if(t.columnGroup&&a.push(t),t.groups)for(let o=0;o<t.groups.length;o++)if(t.groups[o].columnGroup)a.push(t.groups[o]);else if(t.groups[o].groups){let i=n(t.groups[o]);for(let t=0;t<i.length;t++)a.push(i[t])}return a};for(let n=0,i;n<t.columnGroups.length;n++)if(i=t.columnGroups[n],i.groups||(i.groups=null),i.parentGroup){let t=a(i.parentGroup);t&&(i.parent=t,!t.groups&&(t.groups=[]),-1===t.groups.indexOf(i)&&t.groups.push(i))}for(let n=0,i;n<t.viewColumns.length;n++)if(i=t.viewColumns[n],i.columnGroup){let t=a(i.columnGroup);t&&(!t.groups&&(t.groups=[]),i.parent=t,-1===t.groups.indexOf(i)&&t.groups.push(i))}for(let a=0;a<t.viewColumns.length;a++){const n=t.viewColumns[a];let o=n;for(n.level=0;o.parent;)o=o.parent,n.level++;o=n;let l=n.level;for(i=Math.max(i,n.level);o.parent;)o=o.parent,o&&(o.level=--l)}for(let a=0;a<t.columnGroups.length;a++){const i=t.columnGroups[a],o=n(i);i.columns=o;let l=[],r=0,s="near";for(let i=0;i<o.length;i++)l.push(t.viewColumns.indexOf(o[i])),o[i].freeze&&("far"===o[i].freeze&&(s="far"),r++);r===o.length?i.freeze=s:0<r&&r<o.length&&t.error(t.localize("frozenColumns",{elementType:"Grid"})),l.sort(function(t,i){return t=parseInt(t),i=parseInt(i),t<i?-1:t>i?1:0});for(let i=1;i<l.length;i++)l[i]!==l[i-1]+1&&t.error(t.localize("columnGroups",{elementType:"Grid"}))}}t._columnGroupsLevel=1+i}_refreshColumnHeights(){const t=this;t._viewColumnsHeight=t._measureColumnHeight(),t._columnHeights=[];let a=0;for(let n=0,i;n<t._columnGroupsLevel;n++)i=t._viewColumnsHeight,t.columnHeight&&("number"==typeof t.columnHeight?i=t.columnHeight?t.columnHeight:t._viewColumnsHeight:i=t.columnHeight?t.columnHeight(n):t._viewColumnsHeight),i?(t._columnHeights.push(i),a+=i):(a+=t._viewColumnsHeight,t._columnHeights.push(t._viewColumnsHeight));t._columnHeaderHeight=t._columnGroupsLevel*t._viewColumnsHeight,t._columnHeaderHeight=a,t.$.columnHeader.style.height=t._columnHeaderHeight+"px";const n=function(a){let n=0;for(let o=0;o<a.level;o++)n+=t._columnHeights[o];return n},o=function(a){let i=n(a),o=t._columnHeaderHeight-i;for(let n=a.level+1;n<t._columnHeights.length;n++){const i=n;for(let n=0;n<t.viewColumns.length;n++){const l=t.viewColumns[n];let r=!1;if(l.level===i){for(let n=l;n.parent;){if(n.parent===a){o-=t._columnHeights[i],r=!0;break}n=n.parent}if(r)break}}}return o};for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a],l=o(i);i.computedHeight=l,i.top=n(i)}for(let a=0;a<t._columnGroupsLevel-1;a++)for(let n=0;n<t.columnGroups.length;n++){const i=t.columnGroups[n],l=i.level;if(l===a&&i.groups){const t=o(i);i.top=top,i.computedHeight=t}}}_refreshColumnWidths(){const t=this;t.__clientSize=null;const i=0<t.$.verticalScrollBar.offsetWidth?t.$.verticalScrollBar.offsetWidth:0,a=t._clientSize.width-i,n=t.adaptivityMode.adaptiveLayout.width,o=t.adaptivityMode.responsiveLayout.width,l=t.adaptivityMode.adaptiveLayout.enabled&&a<=n?a>=375?"50%":"100%":null;let r=0,s=[],d=0,m=0,c=0;t._adaptiveLayout=0,l&&("50%"===l?t._adaptiveLayout=2:t._adaptiveLayout=1),t._responsiveLayout=!1;for(let n=t.viewColumns.length-1;0<=n;n--){const i=t.viewColumns[n];if(i.adaptiveVisible){t._responsiveLayout=t.adaptivityMode.responsiveLayout.enabled&&a<=o&&0===t._adaptiveLayout;break}}for(let n=0;n<t.viewColumns.length;n++){const i=t.viewColumns[n];let o;if(l){o=parseFloat(l)/100,o*=a,i.computedWidth=o;continue}"number"==typeof i.width?o=i.width:i.width&&0<=i.width.toString().indexOf("%")?(o=parseFloat(i.width)/100,o*=a):(s.push(i),o=0),i.overflowWidth&&(o-=i.overflowWidth),i.visible&&!i.adaptiveVisible&&(r+=o),o<i.minWidth&&(o=i.minWidth),i.computedWidth=o}if(s){let t=a-r,n=0;0>t&&(t=60*s.length);for(let a=0;a<s.length;a++){const i=s[a];let o;o=t/s.length,a==s.length-1&&(o=t-n),i.overflowWidth&&(o-=i.overflowWidth),o<i.minWidth&&(o=i.minWidth),i.computedWidth=o,n+=o}}for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.visible&&!i.adaptiveVisible&&(i.freeze?!0===i.freeze||"near"===i.freeze?(i.left=d,c+=i.computedWidth,d+=i.computedWidth):"far"===i.freeze&&(i.left=m,m+=i.computedWidth):(i.left=c,c+=i.computedWidth))}for(let a=0;a<t._columnGroupsLevel-1;a++)for(let n=0;n<t.columnGroups.length;n++){const i=t.columnGroups[n],o=i.level;if(o!==a)continue;let l=99999;if(i.groups){const t=function(i){let a=0;for(let n=0,o;n<i.groups.length;n++)o=i.groups[n],o.groups?a+=t(o):!o.hidden&&(l=Math.min(o.left,l),a+=o.computedWidth);return a};i.computedWidth=t(i),i.left=l}}}_createColumnHeaderCellElements(){const t=this,i=t.$.columnContainer,a=document.createDocumentFragment();let n=0;t._columnElements=[],t.$.columnContainer.innerHTML="",t.$.columnNearContainer.innerHTML="",t.$.columnFarContainer.innerHTML="";for(let a=0;a<t._frozenNearColumns.length;a++){const i=t._frozenNearColumns[a];i.createElement()}for(let a=0;a<t._frozenFarColumns.length;a++){const i=t._frozenFarColumns[a];i.createElement()}for(let o=0;o<t.viewColumns.length;o++){const i=t.viewColumns[o];if(i.freeze)continue;const l=i.createElement();n+=i.computedWidth,t._columnElements.push(l),n<2*t._clientSize.width&&a.appendChild(l)}for(let n=0;n<t.columnGroups.length;n++){const i=t.columnGroups[n],o=document.createElement("div"),l=document.createElement("div");o.classList.add("smart-grid-column-header-group-cell"),l.classList.add("smart-label"),l.innerHTML=i.label,o.style.width=i.computedWidth+"px",o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=i.computedHeight+"px",o.style.lineHeight=i.computedHeight+"px",o.appendChild(l),a.appendChild(o),i.element=o,i.grid=this}t.htmlColumnLastChild||(t.htmlColumnLastChild=document.createElement("smart-grid-column"),t.htmlColumnLastChild.classList.add("top-corner"),t.$.columnHeader.appendChild(t.htmlColumnLastChild)),i.appendChild(a),i.style.width=t._computedColumnsWidth+"px",t.$.columnNearContainer.style.width=t._frozenColumnsNearWidth+"px",t.$.columnFarContainer.style.width=t._frozenColumnsFarWidth+"px";for(let a=0;a<t.columnGroups.length;a++){const i=t.columnGroups[a];i.freeze&&(!0===i.freeze||"near"===i.freeze?t.$.columnNearContainer.appendChild(i.header):"far"===i.freeze&&t.$.columnFarContainer.appendChild(i.header))}for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.freeze&&(!0===i.freeze||"near"===i.freeze?t.$.columnNearContainer.appendChild(i.element):"far"===i.freeze&&t.$.columnFarContainer.appendChild(i.element))}}get _clientSize(){const t=this;if(t.__clientSize)return t.__clientSize;const i=getComputedStyle(t.$.container),a=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),n=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),o=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),l=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth);return t.__clientSize={width:t.$.container.offsetWidth-a-o,height:t.$.container.offsetHeight-n-l},t.__clientSize}_initializeRowElements(){const t=this;if(!t.rows||t.rows&&0===t.rows.length)return;t.rows.canNotify=!1;let a=0,n=t._clientSize.height;t.$.rowContainer.innerHTML="",t._rowElements=[],t._overflowOffset=Math.max(n,300);const i=t.offsetHeight;t.$.container.classList.add("smart-hidden");const o=t.offsetHeight;t.$.container.classList.remove("smart-hidden"),("hidden"===t.verticalScrollBarVisibility||i!==o)&&(n=t._scrollHeight);const l=function(){const o=document.createDocumentFragment();for(let l=0;l<t.rows.length;l++){const i=t.rows[l];if(i.freeze)continue;const r=i.createElement();if(o.appendChild(r),a+=t.rowMinHeight,a>t._overflowOffset+n)break}t.$.rowContainer.appendChild(o);const l=t.$.rowContainer.children;for(let a=0;a<l.length;a++){const i=l[a];t.rows[a]&&(t.rows[a].element=i),t._rowElements[a]=i}};for(let a=0;a<t._frozenNearRows.length;a++){const i=t._frozenNearRows[a],n=i.createElement();i.element=n,t.$.rowNearContainer.appendChild(n)}for(let a=0;a<t._frozenFarRows.length;a++){const i=t._frozenFarRows[a],n=i.createElement();i.element=n,t.$.rowFarContainer.appendChild(n)}l();for(let t=0;a<1.5*n&&5>++t;)l();t.rows.canNotify=!0}_initializeRows(){const t=this;let i=0;t.viewRows=[],t.rows=[],t.rowById=[],t._frozenFarRows=[],t._frozenNearRows=[];const a=function(){let a=[],n=!1;for(let o=0;o<t.columns.length;o++){const i=t.columns[o];let l={};i.summary&&0<i.summary.length&&(n=!0),l[i.dataField]=i.summary,a.push(l)}return n?void(t._summaryItems=t.dataSource.summarize(a)):void(t._summaryItems=[])},n=function(a,n){const o=new Smart.Grid.Row({data:a,index:n,grid:t});if(t.onRowInit)for(let i in t.onRowInit(n,o),o)-1!==o.properties.indexOf(i)||i.startsWith("_")||t.error(t.localize("invalidRowProperty",{elementType:"Grid",propertyName:i}));o.freeze?!0===o.freeze||"near"===o.freeze?(t.rows.splice(i++,0,o),t.viewRows.splice(i++,0,o),t._frozenNearRows.push(o),t.rowById[o.id]=t.rows[i]):"far"===o.freeze&&(t._frozenFarRows.push(o),t.rows.push(o),t.viewRows.push(o),t.rowById[o.id]=t.rows[t.rows.length-1]):(t.rows.push(o),t.viewRows.push(o),t.rowById[o.id]=t.rows[t.rows.length-1]),"virtual"===t.scrollMode||t.paging.enabled&&t.dataSource&&t.dataSource.virtualDataSource||t.onRowInserted&&t.onRowInserted(n,o)},o=function(){const i=t.rows[t.rows.length-1];delete t.rowById[i.id],t.rows.pop(),t.viewRows.pop(),t.onRowRemoved&&t.onRowRemoved(t.rows.length,i)},l=function(i){const a=t.rows[i];delete t.rowById[a.id],t.rows.splice(i,1),t.viewRows.splice(i,1),t.onRowRemoved&&t.onRowRemoved(i,a)};for(let a=0;a<t.dataSource.length;a++){const i=t.dataSource[a];n(i,a)}if(a(),t.dataSource.notify(function(r){if(!t.dataSource._updating){const s=r.data;switch(t.rows.canNotify=!1,r.action){case"add":if(s.length)for(let a=0;a<s.length;a++)n(s[a],t.dataSource.length-s.length+a);else n(s,t.dataSource.length-1);break;case"update":if(s.length)for(let a=0;a<s.length;a++){const i=r.index[a];t.rows[i].data=s[a]}else{const i=r.index;t.rows[i].data=s}t.onRowUpdated&&t.onRowUpdated(index,t.rows[index]);break;case"insert":n(s,r.index);for(let a=0;a<t.rows.length;a++){const i=t.rows[a];i.dataIndex=a}break;case"remove":l(r.index);break;case"removeLast":o();break;case"bindingComplete":}a(),t._refreshLayout(),t._recycle(),t.rows.canNotify=!0}}),t.newRow.visible){const i=new Smart.Grid.Row({freeze:"near",visible:"near"===t.newRow.position,newRow:!0}),a=new Smart.Grid.Row({freeze:"far",visible:"far"===t.newRow.position,newRow:!0});t._frozenNearRows.splice(0,0,i),t._frozenFarRows.push(a),t.viewRows.splice(0,0,i),t.viewRows.push(a)}if(t.summaryRow.visible)for(let a=0;a<t._summaryRowCount;a++){const i=new Smart.Grid.Row({freeze:"near",visible:"near"===t.summaryRow.position,summaryRowIndex:a,summaryRow:!0}),n=new Smart.Grid.Row({freeze:"far",visible:"far"===t.summaryRow.position,summaryRowIndex:a,summaryRow:!0});t._frozenNearRows.splice(0,0,i),t._frozenFarRows.push(n),t.viewRows.splice(0,0,i),t.viewRows.push(n)}if(t.filtering.enabled&&t.filtering.filterRow.visible){const i=new Smart.Grid.Row({freeze:"near",filterRow:!0});t._frozenNearRows.splice(0,0,i),t.viewRows.splice(0,0,i)}t._observeRows()}_observeRows(){const t=this;t.rows=new Smart.ObservableArray(t.rows,null,{allowToggle:!0,allowResize:!0,expanded:!0,selected:!0,visible:!0,enabled:!0,minHeight:!0,height:!0,freeze:!0,detailExpanded:!0,data:!0,visibleIndex:!0,index:!0});const i=function(t,i,a,n){t.propertyChanged(i,a,n)};t.rows.notify(function(a){if(t.rows.canNotify){if(a.path)return t.rows.canNotify=!1,i(a.target,a.propertyName,a.oldValue,a.newValue),void(t.rows.canNotify=!0);t.rows.canNotify=!1;const n=a.action;t.dataSource&&(t.dataSource.canNotify=!1,"add"===n?t.dataSource.add(t.rows[a.index]):"update"===n?t.dataSource.update(a.index,t.rows[a.index]):"remove"===n?t.dataSource.remove(a.index):void 0,t.dataSource.canNotify=!0,t.rows.canNotify=!0,t.refresh())}})}render(){const t=this;t._render()}_renderColumns(t){const i=this;i._initializeColumns(),i._initializeColumnGroupsHierarchy(),i._refreshColumnsResponsiveVisibility(),i._createColumnHeaderCellElements(),i._renderColumnGroupHeaders(),!1!==t&&i._refresh()}_renderRows(t){const i=this;i._initializeRows(),i._initializeRowElements(),!1!==t&&i._refresh()}_render(){const t=this;if(null===t.dataSource&&(t.dataSource=new Smart.DataAdapter),t._renderColumns(!1),t._renderRows(!1),t._renderPagers(),!t.isInitialized){for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];if(!i.allowSort||!i.sortOrder)continue;const n=t.appearance.allowSortAnimation;t.appearance.allowSortAnimation=!1,t.sortBy(i.dataField,i.sortOrder),t.appearance.allowSortAnimation=n}if(0<t.filtering.filter.length){for(let i=0;i<t.filtering.filter.length;i++){const a=t.filtering.filter[i];if(a){const i=a[0],n=a.splice(1);let o=null;if(n instanceof Smart.FilterGroup)o=n;else{const a=t.columnByDataField[i];a&&(o=t.dataSource._createFilter(a.dataType,n))}if(o){t.columnByDataField[i];t.addFilter(i,o,!1)}}}t.refreshFilters()}}else t.refreshFilters();t.viewColumns.canNotify=!0,t.isInitialized=!0,"virtual"===t.scrollMode||t.paging.enabled&&t.dataSource&&t.dataSource.virtualDataSource?t._virtualDataRequest("dataBind"):t.dataSource&&t.dataSource.virtualDataSource&&t._virtualDataRequest("dataBind"),t._createFilterPanels(),t._refresh(),t._applyScrollMode()}_renderPagers(){var t=Math.ceil;const i=this;i.pager.visible&&requestAnimationFrame(()=>{const a=document.createElement("smart-pager"),n=document.createElement("smart-pager");i.$.headerPager.appendChild(a),i.$.footerPager.appendChild(n);const o=function(t){const a=t.messages[i.locale];a||(t.messages[i.locale]={}),Object.assign(t.messages[i.locale],{firstButton:i.localize("pagerFirstButton"),lastButton:i.localize("pagerLastButton"),previousButton:i.localize("pagerPreviousButton"),nextButton:i.localize("pagerNextButton"),navigateToLabel:i.localize("pagerNavigateToLabel"),pageSizeLabel:i.localize("pagerPageSizeLabel"),navigateToInputPlaceholder:i.localize("pagerNavigateToInputPlaceholder"),ellipsis:i.localize("pagerEllipsis"),summaryString:i.localize("pagerSummaryString"),summaryPrefix:i.localize("pagerSummaryPrefix"),summarySuffix:i.localize("pagerSummarySuffix")})},l=function(a,n){const o=n+"GridPager";a.setAttribute("smart-id",o),i.$[o]=a,i["$"+o]=Smart.Utilities.Extend(a),a.beginUpdate(),i.addPropertyBinding("[[pager_navigationButtons_position]]","navigationButtonsPosition",a),i.addPropertyBinding("[[pager_navigationButtons_firstLastButtons_visible]]","showFirstLastNavigationButtons",a),i.addPropertyBinding("[[pager_navigationButtons_prevNextButtons_visible]]","showPrevNextNavigationButtons",a),i.addPropertyBinding("[[pager_navigationButtons_labels_visible]]","showNavigationButtonLabels",a),i.addPropertyBinding("[[pager_pageIndexSelectors_visible]]","showPageIndexSelectors",a),i.addPropertyBinding("[[pager_pageIndexSelectors_dataSource]]","pageIndexSelectors",a),i.addPropertyBinding("[[pager_summary_visible]]","showSummary",a),i.addPropertyBinding("[[pager_summary_position]]","summaryPosition",a),i.addPropertyBinding("[[pager_navigationInput_visible]]","showNavigationInput",a),i.addPropertyBinding("[[pager_navigationInput_position]]","navigationInputPosition",a),i.addPropertyBinding("[[pager_pageSizeSelector_visible]]","showPageSizeSelector",a),i.addPropertyBinding("[[pager_pageSizeSelector_dataSource]]","pageSizeSelectorDataSource",a),i.addPropertyBinding("[[pager_pageSizeSelector_position]]","pageSizeSelectorPosition",a),i.addPropertyBinding("[[pager_autoEllipsis]]","autoEllipsis",a),i.addPropertyBinding("[[!paging_enabled]]","disabled",a),i.addPropertyBinding("{{paging_pageIndex}}","pageIndex",a),i.addPropertyBinding("{{paging_pageSize}}","pageSize",a),a.pagesCount=t(i.dataSource.length/i.paging.pageSize),a.$.pageSizeSelector.dropDownAppendTo="body",a.$.pageSizeSelector.selectedIndexes=[0],i["$"+o].listen("change",function(n){a.pagesCount=t(i.dataSource.length/i.paging.pageSize),i.paging.pageIndex>a.pagesCount&&(i.paging.pageIndex=a.pagesCount-1),i._refreshPaging(n.detail.index!==void 0)}),a.endUpdate()};l(a,"header"),l(n,"footer"),o(a),o(n)})}_initializeColumns(){const t=this;t._boundColumns=Array.isArray(t.columns)?t.columns.splice(0):t.columns.toArray().splice(0),t.columnByDataField=[],t.viewColumns=[],t.columns=new Smart.ObservableArray,t._frozenFarColumns=[],t._frozenNearColumns=[],t._summaryRowCount=0;let a=0;const n=function(i){if(t.dataSource.dataFields){const a=t.dataSource.dataFields.find(t=>{if(t.name===i.dataField)return t}),n=a?a.dataType||"string":"string";i.dataType=n}};if(0===t._boundColumns.length&&t.dataSource&&t.dataSource[0]){const i=t.dataSource[0];for(let a in i){if(a.startsWith("_")||"$"==a)continue;const i=t._boundColumns.length,o={index:i,visibleIndex:i,label:a,dataField:a};n(o),t._boundColumns.push(o),t.columnByDataField[o.dataField]=t._boundColumns[t._boundColumns.length-1]}}for(let o=0,i;o<t._boundColumns.length;o++){if(i=t._boundColumns[o],"string"!=typeof i)n(i);else if(t.dataSource.dataFields){const a=t.dataSource.dataFields.find(t=>{if(t.name===i)return t});i={label:i,dataField:i,dataType:a?a.dataType||"string":"string"}}i.visibleIndex=o,i.index=o,i.grid=t;const l=new Smart.Grid.Column(i);for(let i in t.onColumnInit&&t.onColumnInit(o,l),l)-1!==l.properties.indexOf(i)||i.startsWith("_")||t.error(t.localize("invalidColumnProperty",{elementType:"Grid",propertyName:i,type:l.dataField||"Column"}));l.grid=t,t.columns.push(l),0==o&&(l.treeColumn=!0),t._summaryRowCount=Math.max(t._summaryRowCount,l.summary.length),l.freeze?!0===l.freeze||"near"===l.freeze?(t.viewColumns.splice(a++,0,l),t._frozenNearColumns.push(l)):"far"===l.freeze&&t._frozenFarColumns.push(l):t.viewColumns.push(l),t.columnByDataField[l.dataField]=l,t.onColumnInserted&&t.onColumnInserted(o,l)}if(t.viewColumns=t.viewColumns.concat(t._frozenFarColumns),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode){const i=new Smart.Grid.Column({visible:!0,dataField:"_"+t.selectionMode,label:"",freeze:!0,grid:t,selectionColumn:!0,reservedColumn:!0,autoGenerated:!0,cellsAlign:"center",width:32}),a=new Smart.Observable(i,i.observables);t.viewColumns.splice(0,0,a),t._frozenNearColumns.splice(0,0,a)}if(t.appearance.showRowNumber||t.appearance.showRowHeader){const i=t.appearance.showRowNumber?function(){const i=document.createElement("div"),a=document.createElement("div"),n=t.rows?t.rows.length:t.dataSource?t.dataSource.length:0;let o=0;return a.classList.add("smart-label"),a.innerHTML="<span>"+n+"</span>",i.appendChild(a),i.style.width="auto",i.style.position="static",t.$.columnHeader.appendChild(i),o=20+a.firstChild.offsetWidth,t.$.columnHeader.removeChild(i),o}():30,a=new Smart.Grid.Column({label:"",freeze:!0,visible:!0,grid:t,autoGenerated:!0,reservedColumn:!0,rowNumbersColumn:!0,cellsAlign:"center",width:i}),n=new Smart.Observable(a,a.observables);t.viewColumns.splice(0,0,n),t._frozenNearColumns.splice(0,0,n)}if(t.rowDetail.enabled){const i=new Smart.Grid.Column({visible:t.rowDetail.visible,label:"",grid:t,freeze:!0,toggleColumn:!0,reservedColumn:!0,autoGenerated:!0,cellsAlign:"center",width:30}),a=new Smart.Observable(i,i.observables);t.viewColumns.splice(0,0,a),t._frozenNearColumns.splice(0,0,a)}const i=new Smart.Grid.Column({visible:!t.adaptivityMode.responsiveLayout.autoShowHiddenCells,label:"",grid:t,freeze:"far",adaptiveColumn:!0,reservedColumn:!0,autoGenerated:!0,cellsAlign:"center",width:30}),o=new Smart.Observable(i,i.observables);t.viewColumns.push(o),t._frozenFarColumns.splice(0,0,o),t._observeColumns(),t._templateColumns()}get styleProperties(){return["grid-template-columns"]}_templateColumns(){const t=this,i=getComputedStyle(t),a=i.getPropertyValue("--smart-grid-template-columns").trim(),n=i.getPropertyValue("--smart-grid-column-gap").trim(),o=i.getPropertyValue("--smart-grid-row-gap").trim();if(t._rowGap=parseInt(o),t._columnGap=parseInt(n),"none"!==a){let n=0;for(let a=0;a<t.viewColumns.length;a++)t.viewColumns[a].dataField||(n+=t.viewColumns[a].visible?t.viewColumns[a].width:0);let o=[];const l=document.createElement("div");l.style.display="grid",l.style.gridTemplateColumns=a;for(let a=0;a<t.columns.length;a++)l.innerHTML+="<div></div>";l.style.width=t.clientWidth-n+"px",t.$.root.appendChild(l);const r=a.split(" ");for(let a=0;a<t.columns.length;a++)o[a]=l.children[a].offsetWidth,"auto"===r[a]&&(o[a]="auto");l.parentNode.removeChild(l);let s=0;for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.dataField&&o[s]&&(i.width=i.templateWidth=o[s++])}}else for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.dataField&&i.templateWidth&&(i.width=i.templateWidth="auto")}}_observeColumns(){const t=this,i=function(t,i,a,n){t.propertyChanged(i,a,n)};for(let a=0;a<t.viewColumns.length;a++){const n=t.viewColumns[a];n.onAction=function(){t.openMenu(this)},n.autoGenerated&&n.notify(function(t){n.canNotify=!1,i(n,t.propertyName,t.oldValue,t.newValue),n.canNotify=!0})}t.columns.notify(function(a){let n=null;if(a.path)return t.columns.canNotify=!1,i(a.target,a.propertyName,a.oldValue,a.newValue),void(t.columns.canNotify=!0);t.columns.canNotify=!1;const o=a.action;let l=0;switch(o){case"length":return;case"add":{n=a.object[a.index],n.grid=t,n.freeze?t._frozenNearColumns.push(n):"far"===n.freeze&&t._frozenFarColumns.push(n),t.viewColumns.splice(t.viewColumns.length-t._frozenFarColumns.length,0,n),t.columnByDataField[n.dataField]=n,t.onColumnInserted&&t.onColumnInserted(a.index,n);break}case"update":{n=a.object[a.index],n.grid=t;for(let n=0;n<a.index;n++)t.viewColumns[n].dataField||l++;t.viewColumns[l+a.index]=n,t.columnByDataField[n.dataField]=n,t.onColumnUpdated&&t.onColumnUpdated(a.index,n);break}case"remove":{n=a.removed[0];let o=a.index;for(let a=0;a<=o;a++)t.viewColumns[a].dataField||l++;t.viewColumns.splice(l+o,1),delete t.columnByDataField[n.dataField],t.onColumnRemoved&&t.onColumnRemoved(a.index,n);break}}t._initializeColumnGroupsHierarchy(),t._createColumnHeaderCellElements(),t._templateColumns(),t.refresh(),t.columns.canNotify=!0})}get _scrollWidth(){const t=this;if(t.__scrollWidth)return t.__scrollWidth;let a=0;for(let n=0;n<t.viewColumns.length;n++){const i=t.viewColumns[n];i.visible&&!i.adaptiveVisible&&(a+=i.computedWidth)}if(t.adaptivityMode.responsiveLayout.enabled){const i=t.adaptivityMode.responsiveLayout.width,a=1+t.$.scrollView.offsetWidth;if(a<=i)return 0}if(t.adaptivityMode.adaptiveLayout.enabled){const i=t.adaptivityMode.adaptiveLayout.width,a=1+t.$.scrollView.offsetWidth;if(a<=i)return 0}return t.__scrollWidth=a,t._scrollView.scrollWidth=a-t._clientSize.width,t.__scrollWidth}_horizontalScrollbarHandler(){const t=this;t.closeMenu(),t.isScrolling=!0,requestAnimationFrame(()=>{t._recycle(),t.isScrolling=!1})}_focus(t){const i=this;!t||"none"===i.selectionMode||i.disabled||i.readonly||(i._focusedRow&&(i._focusedRow.focused=!1),i._focusedRow=t,i._focusedRow.focused=!0)}_keyDownHandler(){}_mouseWheelHandler(t){const i=this;i._scrollView.hScrollBar.$.hasClass("smart-hidden")&&i._scrollView.vScrollBar.$.hasClass("smart-hidden")||!i.disabled&&!i._scrollView.vScrollBar.$.hasClass("smart-hidden")&&(t.stopPropagation(),t.preventDefault(),i._scrollView.scrollTo(i._scrollView.scrollTop+(0>t.deltaY?-i._clientSize.height:i._clientSize.height)))}clearRows(){const t=this;t.dataSource=[],t.clearSelection()}refresh(){const t=this;t.isInitialized&&t._refresh()}_refresh(){const t=this,i=t.$.verticalScrollBar.offsetWidth;t.isInitialized&&t._refreshColumnsResponsiveVisibility(),t._refreshLayout(),i!==t.$.verticalScrollBar.offsetWidth&&(t._refreshColumnsResponsiveVisibility(),t._refreshScrollBars()),t._refreshSelection(),t._recycle(),requestAnimationFrame(()=>{t._width=t.offsetWidth,t._height=t.offsetHeight})}_resizeHandler(t){const i=this;t.target!==i||i._isUpdatingScrollBars||(i._isUpdatingScrollBars=!0,i.refresh(),i._isUpdatingScrollBars=!1)}_refreshColumnsResponsiveVisibility(){const t=this,i=t.adaptivityMode.responsiveLayout.width,a=t.adaptivityMode.adaptiveLayout.width,n=1+t.$.scrollView.offsetWidth,o=t.$.columnContainer,l=t.$.columnNearContainer,r=t.$.columnFarContainer,s=t.adaptivityMode.responsiveLayout.enabled&&!t.adaptivityMode.responsiveLayout.autoShowHiddenCells;let d=0,m=0,c=0;for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.overflowWidth=void 0,i.adaptiveVisible=!1}s&&(t.adaptivityMode.responsiveLayout.enabled?n>i&&(t.viewColumns[t.viewColumns.length-1].adaptiveVisible=!0):!t.adaptivityMode.adaptiveLayout.enabled&&(t.viewColumns[t.viewColumns.length-1].adaptiveVisible=!0)),t._refreshColumnWidths();let u=0,p=0;for(let a=0;a<t.viewColumns.length;a++){const i=t.viewColumns[a];i.visible&&!i.adaptiveVisible&&(i.freeze&&(!0===i.freeze||"near"===i.freeze?(d+=i.computedWidth,i.autoGenerated&&(u+=i.computedWidth)):"far"===i.freeze&&(m+=i.computedWidth,i.autoGenerated&&(p+=i.computedWidth))),c+=i.computedWidth)}if(o.style.width=c+"px",l.style.width=d+"px",r.style.width=m+"px",r.classList.remove("smart-hidden"),l.classList.remove("smart-hidden"),0===m&&r.classList.add("smart-hidden"),0===d&&l.classList.add("smart-hidden"),d===u&&l.classList.add("border-collapse"),t._autoGeneratedColumnsNearWidth=u,t._autoGeneratedColumnsFarWidth=p,t.adaptivityMode.responsiveLayout.enabled||t.adaptivityMode.adaptiveLayout.enabled){const o=n<=i&&t.adaptivityMode.responsiveLayout.enabled,l=n<=a&&t.adaptivityMode.adaptiveLayout.enabled;if(o||l){for(let a=t.viewColumns.length-1;0<=a;a--){const i=t.viewColumns[a];if(i.visible&&!i.freeze){if(c-i.computedWidth<=n)break;c-=i.computedWidth,i.adaptiveVisible=!0}}if(c>n){let i=c-n,a=-1;const o=function(n){for(let o=t.viewColumns.length-1;0<=o;o--){const i=t.viewColumns[o];if(!i.visible||i.freeze)continue;if(i.adaptiveVisible)continue;-1===a&&(a=o);const l=i.computedWidth-n;if(l<i.minWidth){const t=i.computedWidth-i.minWidth;i.overflowWidth=t,n-=t}else return i.overflowWidth=n,0}return n};if(i=o(i),0<i&&-1!==a){const l=t.viewColumns[a];c-=l.computedWidth,l.adaptiveVisible=!0,i=c-n,o(i)}t._refreshColumnWidths(),c=n}}}t._computedColumnsWidth=c,t._frozenColumnsNearWidth=d,t._frozenColumnsFarWidth=m}_selectStartHandler(t){const i=this;i.isScrolling||i.editing.active||t.preventDefault()}setFocusable(t){const i=this;return i.disabled||!t?void i.removeAttribute("tabindex"):void(i.tabIndex=0)}_setLoadingIndicatorVisibility(){const t=this;return t.displayLoadingIndicator?void t.$.loadingIndicatorContainer.classList.remove("smart-visibility-hidden"):void t.$.loadingIndicatorContainer.classList.add("smart-visibility-hidden")}_refreshElementsVisibility(){const t=this,i=function(t,i){i?t.classList.remove("smart-hidden"):t.classList.add("smart-hidden")};if(i(t.$.placeholder,!t.rows||t.rows&&0===t.rows.length||0===t.columns.length),i(t.$.footer,t.footer.visible),i(t.$.header,t.header.visible),i(t.$.groupHeader,t.groupHeader.visible),i(t.$.columnHeader,t.columnHeader.visible&&!t._adaptiveLayout&&0<t.columns.length),t.htmlColumnLastChild.classList.add("smart-visibility-hidden"),t.pager&&t.pager.visible&&t.paging.enabled)switch(t.pager.position){case"near":i(t.$.headerPager,!0),i(t.$.footerPager,!1);break;case"far":i(t.$.headerPager,!1),i(t.$.footerPager,!0);break;case"both":i(t.$.headerPager,!0),i(t.$.footerPager,!0);}else i(t.$.footerPager,!1),i(t.$.headerPager,!1);t._refreshRowHierarchy()}prevPage(){}nextPage(){}_refreshRowHierarchy(){const t=this;if(t.dataSource.itemHierarchy){const a=t.dataSource.reservedNames,n=function(i){const a=new Smart.Grid.Row({data:i,index:t.rows.length});return t.rowById[a.id]=a,a},i=function(o,l){for(let r=0;r<o.length;r++){const s=o[r];let d=t.rowById[s.id];d||(d=n(s)),d.leaf=s[a.leaf],d.level=s[a.level],d.groupDataField=s.groupDataField,(null===t._toggledRow||t._toggledRow&&t._toggledRow.id!==d.id)&&(d.expandHeight=0),s.parent?(d.parent=t.rowById[s.parent.id],d.parentId=s.parent.id):(d.parent=null,d.parentId=null);const m=d.expanded;if(!0===d.visible&&!0===d.filtered)if(!(m||s[a.leaf]))l.push(d);else if(l.push(d),s.boundSource&&0<s.boundSource.length){const a=i(s.boundSource,[]);for(let i=0;i<a.length;i++)l.push(a[i])}}return l};if(t.rowHierarchy=i(t.dataSource.itemHierarchy,[]),t.hierarchySummaryRow.visible){const a=function(t,o,i,l){if(0!==t&&0<o.length&&o[o.length-1]&&!o[o.length-1].summaryRow){let a={summaryRow:!0,leaf:!0,level:t,expandHeight:0,siblings:o};i&&(a.parentId=i.id,a.parent=i),a.id="SubRow"+l+"_"+i.id,a=n(a),o.push(a)}for(let n=0;n<o.length;n++)o[n]&&o[n].boundSource&&a(t+1,o[n].boundSource,o[n],n)};a(0,t.rowHierarchy,null,0)}}}applyContent(){}_refreshContentHeight(){const t=this;let i=t._clientSize.height;const a=t.offsetHeight;t.$.container.classList.add("smart-hidden");const n=t.offsetHeight;return t.$.container.classList.remove("smart-hidden"),"hidden"===t.verticalScrollBarVisibility||a!==n?(i=t._scrollHeight+t.$.columnHeader.offsetHeight+t.$.filterFooter.offsetHeight,void(t.$.content.style.height=i+"px")):void(t.header.visible&&(i-=t.$.header.offsetHeight),t.groupHeader.visible&&(i-=t.$.groupHeader.offsetHeight),t.footer.visible&&(i-=t.$.footer.offsetHeight),t.pager.visible&&(i-=t.$.headerPager.offsetHeight,i-=t.$.footerPager.offsetHeight),t.$.content.style.height=i+"px",t._contentHeight=i)}get enableShadowDOM(){return!0}get _contentBorder(){const t=this;if(t.__contentBorder)return t.__contentBorder;const i=getComputedStyle(t.$.content),a=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),n=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),o={left:a,top:n};return t.__contentBorder=o,o}_refreshLayout(){const t=this,i=t.rows;if(!t._layoutSuspended){if(t.__clientSize=null,t.__scrollHeight=null,t.__scrollWidth=null,t.$.columnFarContainer.classList.remove("vscroll"),t.$.scrollView.classList.remove("hscroll"),t.$.scrollView.classList.remove("vscroll"),t._refreshElementsVisibility(),t._refreshContentHeight(),t._refreshColumnHeights(),!i||null===i||0===i.length||0===t.columns.length)return t.$.placeholder.classList.remove("smart-hidden"),t.scrollWidth=0,void(t.scrollHeight=0);t.__columnHeaderHeight||(t.__columnHeaderHeight=t.$.columnHeader.offsetHeight),t.__filterFooterOffsetHeight||(t.__filterFooterOffsetHeight=t.$.filterFooter.classList.contains("smart-hidden")?0:t.$.filterFooter.offsetHeight);const a=t._contentHeight-t.__filterFooterOffsetHeight-t.__columnHeaderHeight;if(t.$.scrollView.style.height=a+"px",t.htmlColumnLastChild.style.height=t.__columnHeaderHeight+"px",t.paging.spinner.enabled&&t.paging.enabled){if(!t.pageScroll){const i=document.createElement("smart-scroll-bar");i.orientation="vertical",i.style.height="100%",i.style.width="100%",i.max=Math.ceil(t.dataSource.length/t.paging.pageSize),i.step=t.paging.spinner.step,i.largeStep=t.paging.spinner.step,i.setAttribute("spinner",""),i.addEventListener("change",function(i){t.paging.pageIndex=i.detail.value}),t.pageScroll=i}t.htmlColumnLastChild.appendChild(t.pageScroll)}else t.htmlColumnLastChild.innerHTML="";t._refreshScrollBars()}}_refreshScrollBars(){const t=this,i=t._scrollView.vScrollBar,a=t._scrollView.hScrollBar,n=t._contentHeight-t.__filterFooterOffsetHeight-t.__columnHeaderHeight,o=t.$.scrollView.offsetWidth,l=t._scrollWidth-o-t._contentBorder.left,r=t._scrollHeight-n-t._contentBorder.top,s=t._columnNearContainerComputedStyle?t._columnNearContainerComputedStyle:getComputedStyle(t.$.columnNearContainer),d=t._columnFarContainerComputedStyle?t._columnFarContainerComputedStyle:getComputedStyle(t.$.columnFarContainer),m=parseInt(t.$.columnNearContainer.style.width)+parseInt(s.borderRightWidth),c=parseInt(t.$.columnFarContainer.style.width)+parseInt(d.borderLeftWidth);if(t._columnNearContainerComputedStyle=s,t._columnFarContainerComputedStyle=d,t._refreshHorizontalScrollBarVisibility(l),t._refreshVerticalScrollBarVisibility(r),i.style.height=n+"px",t.computedVerticalScrollBarVisibility&&(!t.__scrollBarSize&&(t.__scrollBarSize=i.offsetWidth),t.__scrollWidth+=t.__scrollBarSize,t._refreshHorizontalScrollBarVisibility(t._scrollWidth-o-1),t.$.columnFarContainer.classList.add("vscroll"),t.htmlColumnLastChild.classList.remove("smart-visibility-hidden")),a.style.width=o+"px",a.style.left="0px",t.computedVerticalScrollBarVisibility&&t.computedHorizontalScrollBarVisibility&&(a.style.width=o-i.offsetWidth+"px",i.style.height=n-a.offsetHeight+"px"),t.computedHorizontalScrollBarVisibility&&t.$.scrollView.classList.add("hscroll"),0<t.__frozenNearHeight&&!t.appearance.showVerticalScrollBarOnFixedColumns){const a=getComputedStyle(t.$.rowNearContainer),n=t.__frozenNearHeight+parseInt(a.borderBottomWidth);i.style.height=parseInt(i.style.height)-n+"px",i.style.top=n+"px",i.style.setProperty("--smart-scroll-bar-near-size",n+"px")}if(0<t.__frozenFarHeight&&!t.appearance.showVerticalScrollBarOnFixedColumns){const a=getComputedStyle(t.$.rowFarContainer),n=t.__frozenFarHeight+parseInt(a.borderTopWidth);i.style.height=parseInt(i.style.height)-n+"px",i.style.setProperty("--smart-scroll-bar-far-size",n+"px")}(0<m||0<c)&&!t.appearance.showHorizontalScrollBarOnFixedColumns&&(a.style.width=parseInt(a.style.width)-m-c+"px",a.style.left=m+"px",a.style.setProperty("--smart-scroll-bar-near-size",m+parseInt(s.borderRightWidth)+"px"),a.style.setProperty("--smart-scroll-bar-far-size",c+parseInt(s.borderLeftWidth)+"px"),t.computedVerticalScrollBarVisibility&&(!t.__scrollBarSize&&(t.__scrollBarSize=i.offsetWidth),a.style.setProperty("--smart-scroll-bar-far-size",c+t.__scrollBarSize+"px"))),i.refresh(),a.refresh()}_refreshHorizontalScrollBarVisibility(t){const i=this;i.scrollWidth=t,i.computedHorizontalScrollBarVisibility||(i.scrollLeft=0)}_refreshVerticalScrollBarVisibility(t){const i=this;i.computedHorizontalScrollBarVisibility&&(t+=i.$.horizontalScrollBar.offsetHeight),i.scrollHeight=t,i.paging.enabled&&i.paging.spinner.visible&&i.$.verticalScrollBarVisibility.classList.remove("smart-hidden"),i.computedVerticalScrollBarVisibility||(i.scrollTop=0)}_styleChangedHandler(t){const i=this;return t.detail.styleProperties.overflow||i.classList.contains("smart-grid-resize-mode")?void 0:t.detail.styleProperties["grid-template-columns"]?(i._templateColumns(),void i.refresh()):void(i._resetCachedLayout(),i._refreshLayout(),i._recycle())}_resetCachedLayout(){const t=this;t.__autoRowHeight=null,t.__measuredColumnHeight=null,t.__columnHeaderHeight=null,t.__filterFooterOffsetHeight=null}_swipeLeftHandler(){}_swipeRightHandler(){}_getRowIndexByPosition(t){const i=this,a=a=>{let n=0,o=a.length-1;if(0>=t)return 0;const l=a[a.length-1];if(l.top<=t)return a.length-1;for(;!0;){const l=Math.floor((n+o)/2),r=a[l];if(i._isRowInPosition(r,t))return l;r.top<t?n=l+1:r.top>t?o=l-1:n=l+1}};let n=i.rowHierarchy?i.rowHierarchy:i.rows;i.paging.enabled&&(n=n.slice(i.paging.pageIndex*i.paging.pageSize,(i.paging.pageIndex+1)*i.paging.pageSize));const o=a(n);return o}_isRowInPosition(t,i){const a=t.top,n=t.top+t.height;return 0!==t.height&&a<=i&&n>i}_renderColumnGroupHeaders(){const t=this;for(let a=0;a<t.columnGroups.length;a++){const i=t.columnGroups[a],n=i.header.firstChild;if(n.innerHTML="<span>"+i.label+"</span>",n.className="smart-label",i.rotationAngle){const a=t._rotateColumnHeader(n,i,i.label);if(!a)continue}t._alignColumnHeader(n,i)}}_isLastVisibleColumn(t){const a=this;for(let n=a.viewColumns.length-1;0<=n;n--){const i=a.viewColumns[n];if(i.visible)return i===t}return!1}_recycle(t,i){const a=this;if(a._layoutSuspended)return;if(!a._rowElements)return;a.editing.active&&a.endEdit(),a._inputOverlay&&(a._inputOverlay.parentNode.removeChild(a._inputOverlay),a._inputOverlay=null);let n=a._height;a._height||(n=a._height=a.$.scrollView.offsetHeight);const o=a._scrollView.scrollTop,l=a._getRowIndexByPosition(o);let r=a.rowHierarchy?a.rowHierarchy:a.rows;a.paging.enabled&&(r=r.slice(a.paging.pageIndex*a.paging.pageSize,(a.paging.pageIndex+1)*a.paging.pageSize));const s=r[l];let d=s?s.top:0,m=0,c=0,u;if(!1!==t){for(let t=0;t<a._columnElements.length;t++){const i=a._columnElements[t];if(!i.parentNode)break;i.set("column",null,!1),i.classList.add("smart-visibility-hidden")}for(let t=0;t<a.columnGroups.length;t++){const i=a.columnGroups[t],n=i.element;n.style.left=i.left+"px",n.style.width=i.computedWidth+"px"}a._firstVisibleColumn=null,a._lastVisibleColumn=null;for(let t=0;t<a.viewColumns.length;t++){const i=a.viewColumns[t];if((i.visible||i.adaptiveVisible)&&(!a._firstVisibleColumn&&(a._firstVisibleColumn=i),a._lastVisibleColumn=i),i===a._firstVisibleColumn&&i.element.classList.add("smart-grid-column-border-collapse"),i.freeze){(!0===i.freeze||"near"===i.freeze)&&(m+=i.computedWidth),!i.visible||i.adaptiveVisible?i.element.classList.add("smart-visibility-hidden"):(i.element.classList.remove("smart-visibility-hidden"),i.render());continue}if(i.visible&&!i.adaptiveVisible)if(0<a._adaptiveLayout)i.element.classList.add("smart-visibility-hidden");else if(i.left+i.computedWidth-a._scrollView.scrollLeft>=m&&i.left-i.computedWidth-a._scrollView.scrollLeft<a._clientSize.width){const t=a._columnElements[c++];t.set("column",i,!1),t.parentNode||a.$.columnContainer.appendChild(t),i.element=t,i.render(),void 0===u&&(u=i.left)}}}if(void 0===u&&(u=0),a.$.columnContainer.style.left=-a._scrollView.scrollLeft+"px",a.$.rowContainer.style.top=a.__frozenNearHeight-o+d+"px",!1!==i){if(0<=l){c=0;let t=Math.max(a._clientSize.height,a._overflowOffset);for(let n=l;n<r.length;n++){const i=r[n];if(0===i.height||!i.visible||!i.filtered||i.freeze)continue;const l=i.height;if(i.expandHeight&&(t+=i.expandHeight),d+l>=o&&d<=o+t){const t=a._rowElements[c++];if(!t)break;i.element=t,i.grid=a,i.render()}else break;d+=l}}if(a._renderFrozenRows(),c<a._rowElements.length)for(let t=c;t<a._rowElements.length;t++){const t=a._rowElements[c++];t.classList.add("smart-hidden")}}}_renderFrozenRows(){const t=this;0===t._frozenNearRows.length?t.$.rowNearContainer.classList.add("smart-hidden"):t.$.rowNearContainer.classList.remove("smart-hidden");for(let a=0;a<t._frozenNearRows.length;a++){const i=t._frozenNearRows[a];i.element=t.$.rowNearContainer.children[a],i.render()}0===t._frozenFarRows.length?t.$.rowFarContainer.classList.add("smart-hidden"):t.$.rowFarContainer.classList.remove("smart-hidden");for(let a=0;a<t._frozenFarRows.length;a++){const i=t._frozenFarRows[a];i.element=t.$.rowFarContainer.children[a],i.render()}}_recycleRotate(t,i,a,n,o){const l=i.getBoundingClientRect(),r=t.getBoundingClientRect(),s=4;let d=0,m=0;return 0===r.width?(t.innerHTML=o,!1):(l.left>r.left&&(d=r.left-l.left),l.top<r.top&&(m=r.top-l.top),("left"===a||""===a)&&(d=s),"center"===a&&(d+=r.width/2-l.width/2),"right"===a&&(d+=r.width-l.width-s),("top"===n||""===n)&&(m=s),("center"===n||"middle"===n)&&(m+=r.height/2-l.height/2),"bottom"===n&&(m+=r.height-l.height-s),i.style.left=d+"px",i.style.top=m+"px",!0)}_virtualDataRequest(t){var i=Math.ceil;const a=this;let n=-1,o=-1;if(!a._rowElements)return;if("virtual"===a.scrollMode)for(let t=0;t<a._rowElements.length;t++){const i=a._rowElements[t],l=i.row,r=l.visibleIndex;i.classList.contains("smart-hidden")||(-1===n&&(n=r),-1!==r)&&(o=1+r)}else"infinite"===a.scrollMode?(n=1/0,o=1/0):(n=0,o=a.dataSource.length);a.paging.enabled&&(n=a.paging.pageIndex*a.paging.pageSize,o=n+a.paging.pageSize),o!==1/0&&(o=Math.min(o,a.dataSource.length)),a.displayLoadingIndicator=!0,a._setLoadingIndicatorVisibility();const l={first:n,last:o,sorting:a.getSortedColumns(),filtering:a.getFilteredColumns(),grouping:[],action:t},r=a.dataSource.length;a.dataSource.onVirtualDataSourceRequested(function(){a.displayLoadingIndicator=!1,a._setLoadingIndicatorVisibility(),a.dataSource.length!==r&&(a.paging.enabled&&(a.$.headerGridPager.pagesCount=i(a.dataSource.length/a.paging.pageSize),a.$.footerGridPager.pagesCount=i(a.dataSource.length/a.paging.pageSize)),a._initializeRows(),a._initializeRowElements(),a.refresh()),a._recycle()},l)}_verticalScrollbarHandler(t){const i=this;return i.closeMenu(),i.isScrolling=!0,requestAnimationFrame(()=>{i._recycle(!1),i.isScrolling=!1}),t.max===t.value?(i.$.fireEvent("scrollBottomReached"),void("infinite"===i.scrollMode&&i._virtualDataRequest("scroll"))):void("virtual"===i.scrollMode&&(i._virtualDataRequestTimer&&clearTimeout(i._virtualDataRequestTimer),i._virtualDataRequestTimer=setTimeout(function(){i._virtualDataRequest("scroll")},300)),t.min===t.value&&i.$.fireEvent("scrollTopReached"))}}),function(){"use strict";Smart.Grid.Extend=function(t){const i=Object.getOwnPropertyNames(t.prototype);for(let a in i){const n=i[a];"constructor"!==n&&(Smart.Grid.prototype[n]=t.prototype[n])}},Smart.Grid.Extend(Smart.Utilities.Grid.Filter),Smart.Grid.Extend(Smart.Utilities.Grid.Sort),Smart.Grid.Extend(Smart.Utilities.Grid.Menu),Smart.Grid.Extend(Smart.Utilities.Grid.Selection),Smart.Grid.Extend(Smart.Utilities.Grid.Edit),Smart.Grid.Cell=Smart.Utilities.Grid.Cell,Smart.Grid.Row=Smart.Utilities.Grid.Row,Smart.Grid.Column=Smart.Utilities.Grid.Column}(),Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const t=this;return void 0===t.__focused&&(t.__focused=!1),t.__focused}set _focused(t){const i=this;i.__focused=t,t?i.setAttribute("focus",""):i.removeAttribute("focus")}template(){return`<div id="container">
                   <span id='itemInput' class ='smart-input smart-hidden'></span>
                    <span class ="smart-overlay" id="overlay"></span>
                    <div id="itemContainer" class ="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\'><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>
                </div>`}appendChild(t){const i=this;if(!i.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}i.$.itemContainer.innerHTML="",t instanceof HTMLElement&&i.$.itemContainer.appendChild(t)}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}i.parentNode.insertBefore(t,i)}removeChild(t){const i=this;if(!i.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&i.$.itemContainer.removeChild(t)}attached(){const t=this;super.attached(),t.ownerListBox=t.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const t=this;""===t.label?""!==t.innerHTML&&(t.label=t.innerHTML):t.innerHTML=t.label,t._setDisplayMode(t.displayMode),t.$.container.noRipple=!0}propertyChangedHandler(t,i,a){const n=this;if(super.propertyChangedHandler(t,i,a),"hidden"===t&&(a?n.$.addClass("smart-hidden"):n.$.removeClass("smart-hidden")),"displayMode"===t&&n._setDisplayMode(a),"label"===t){const t=n.context;n.context=document,n.innerHTML=a;const i=n.getListBox();i.onItemUpdated(n),n.context=t}if("details"===t){const t=n.context;n.context=document,n.$.details.innerHTML=a;const i=n.getListBox();i.onItemUpdated(n),n.context=t}if("innerHTML"===t){const t=n.getListBox();t.onItemUpdated(n)}}getListBox(){const t=this;let i=t.parentNode;for(;!1==i instanceof Smart.ListBox&&null!==i;)i=i.parentNode;return!i&&Smart.EnableShadowDOM?t.getRootNode().host:i}_itemOnMouseEnter(){const t=this;!t.disabled&&t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}),t.ownerListBox.$.verticalScrollBar.thumbCapture||t.ownerListBox.$.horizontalScrollBar.thumbCapture||t.setAttribute("hover",""))}_itemOnMouseMove(t){const i=this;if(i.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&i.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const a=[].slice.call(i.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<a.length;t++)a[t].$.removeClass("smart-list-item-line-feedback"),a[t].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:i,position:"top"},!i.ownerListBox._areCSSVarsSupported){if(i.ownerListBox._indexOf(i)===i.ownerListBox._items.length-1||i.parentNode.lastElementChild===i){const a=i.getBoundingClientRect();t.pageY-window.pageYOffset>a.top+a.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"})}return}if(i.$.removeClass("smart-list-item-line-feedback"),i.$.removeClass("smart-list-item-bottom-line-feedback"),i.ownerListBox.sorted&&i.ownerListBox.autoSort)return;const n=i.ownerListBox._items.filter(t=>!t.hidden);if(n.indexOf(i)===n.length-1||i.parentNode.lastElementChild===i){const a=i.getBoundingClientRect();t.pageY-window.pageYOffset>a.top+a.height/2-1?(i.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"}):!arguments[1]&&i.$.addClass("smart-list-item-line-feedback")}else arguments[1]||i.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const t=this;t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback")),t.removeAttribute("hover"))}_setDisplayMode(t){const i=this,a=i.getListBox();if(a){const n="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain";i.displayMode=t=n}return"plain"===t?void i.$itemInput.addClass("smart-hidden"):void i.$itemInput.removeClass("smart-hidden")}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return`<div id="container">
                 <span id="itemsLabel" class ="smart-list-items-group-label">[[label]]</span>
                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-group-container">
                    <content></content>
                 </div>
               </div>`}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&i.$.listItemsGroupContainer.appendChild(t)}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&i.$.listItemsGroupContainer.removeChild(t)}getListBox(){const t=this;let i=t.parentNode;for(;!1==i instanceof Smart.ListBox&&null!==i;)i=i.parentNode;return i}attached(){const t=this;super.attached(),t.ownerListBox||(t.ownerListBox=t.getListBox())}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number or an Array of numbers.",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidItem:"{{elementType}}: \"{{method}}\" method accepts an object or an array of objects as it's second parameter.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter."}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return`<div id="container" class="smart-container">
                 <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer">
                     <input id="filterInput" disabled="[[disabled]]" placeholder='[[filterInputPlaceholder]]'>
                 </div>
                 <div id="itemsContainer" class="smart-list-items-container">
                      <div id="placeholder" class ="smart-placeholder">[[placeholder]]</div>
                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-inner-container">
                          <content></content>
                      </div>
                      <input type="text" id="editInput" class= "smart-hidden"/>
                 </div>
                 <smart-scroll-bar wait id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                 <smart-scroll-bar wait id="horizontalScrollBar" disabled="[[disabled]]" ></smart-scroll-bar>
                 <div id="loadingIndicatorContainer" class ="smart-loader-container">
                    <span id="loadingIndicator" class="smart-loader"></span>
                    <span id="loadingIndicatorPlaceHolder" class ="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                 </div>
                <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}_mouseLeaveHandler(){const t=this,a=[].slice.call(t.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<a.length;t++)a[t].$.removeClass("smart-list-item-line-feedback"),a[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(t){const i=this;if(i.disabled||i.displayLoadingIndicator||i.readonly)return;let a=t.originalEvent.target,n=null;if(a instanceof Smart.ListItem&&!a.disabled&&!a.hidden&&!(a instanceof Smart.ListItemsGroup))n=a.dataItem;else for(;a.parentElement;){if(a instanceof Smart.ListItem&&!a.disabled&&!a.hidden&&!(a instanceof Smart.ListItemsGroup)){n=a.dataItem;break}a=a.parentElement}Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:t.pageX,top:t.pageY};n&&(t.stopPropagation(),i.hasRippleAnimation&&!n.readonly&&!n.disabled&&Smart.Utilities.Animation.Ripple.animate(a.$.overlay,t.pageX,t.pageY),!Smart.Utilities.Core.isMobile&&"press"===i.selectionChangeAction&&(i._focus(n),i.select(n)),!Smart.ListBox.DragDrop.Feedback&&i.allowDrag&&(Smart.ListBox.DragDrop.Feedback=document.createElement("span"),Smart.ListBox.DragDrop.Feedback.appendChild(n.offsetHeight?n.cloneNode(!0):i._createItem(n)),Smart.ListBox.DragDrop.Item=n,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(t){const i=this;if(i.editable){const a=t.target.closest("smart-list-item");return!(a instanceof Smart.ListItem)||a.disabled||a.readonly?void i.$editInput.addClass("smart-hidden"):void(i.$.editInput.owner=a,i.$.editInput.value=a.label,i.$.editInput.style.height=a.offsetHeight+"px",i.$.editInput.style.top=a.offsetTop+"px",i.$editInput.hasClass("smart-hidden")&&i.$editInput.removeClass("smart-hidden"),i.$.editInput.focus())}}_editInputEventHandler(t){const i=this;if("blur"===t.type||"keydown"===t.type&&"Escape"===t.key)return i.$editInput.hasClass("smart-hidden")?void 0:i.$editInput.addClass("smart-hidden"),void i.focus();if(!("keydown"===t.type||i.$editInput.hasClass("smart-hidden"))){const a=t.target;if(t.stopPropagation(),a.owner.label!==a.value&&(a.owner.label=a.value,i.itemTemplate&&i._applyTemplate(a.owner),i.dataSource)){const t=a.owner.dataIndex,n=i.dataSource[t];n&&(i.displayMember?n[i.displayMember]=a.value:n.label=a.value)}i.$editInput.addClass("smart-hidden"),i.$.fireEvent("itemLabelChange",{selected:a.owner.selected,disabled:a.owner.disabled,index:i._indexOf(a.owner),label:a.owner.label,value:a.owner.value})}}_pointerUpHandler(t){const i=this;let a=t.originalEvent,n=a.target;const o=a=>{const o=a.ownerListBox;o.disabled||o!==i||o.displayLoadingIndicator||"none"===o.selectionMode||a.grouped||a.readonly||(o._focus(a),o.select(a),t.preventDefault(),Smart.ListBox.DragDrop.StartPosition=null,i.$.fireEvent("itemClick",{selected:n.selected,disabled:n.disabled,index:i._indexOf(n),label:n.label,value:n.value}))};if(a.target instanceof Smart.ListItem&&!a.target.disabled&&!(a.target instanceof Smart.ListItemsGroup))return void o(n.dataItem);for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.disabled&&!(n instanceof Smart.ListItemsGroup)){o(n.dataItem);break}n=n.parentElement}if(this.enableShadowDOM&&"shadow"===this.shadowDomMode){const t=a.composedPath();for(let a=0;a<t.length;a++){const i=t[a];i instanceof Smart.ListItem&&!i.disabled&&o(i.dataItem)}}}_upHandler(t){var i=Math.abs;const a=this;if(!(a.disabled||a.readonly||!Smart.ListBox.DragDrop.StartPosition)){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const n=i(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),o=i(t.pageY-Smart.ListBox.DragDrop.StartPosition.top);let l=0<=n&&3>=n&&0<=o&&3>=o;if(Smart.Utilities.Core.isMobile&&300<=new Date-Smart.ListBox.DragDrop.StartTime&&(l=!1,Smart.ListBox.DragDrop.StartTime=null),l){const i=t.originalEvent.target.closest("smart-list-box");i?i._pointerUpHandler(t):a._pointerUpHandler(t),Smart.ListBox.DragDrop.StartPosition=null}else{let i=t.originalEvent.target;if(t.target instanceof Smart.ListItem&&!i.readonly&&!t.target.disabled&&!(t.target instanceof Smart.ListItemsGroup))t.preventDefault(),t.stopPropagation();else for(;i.parentElement;){if(i instanceof Smart.ListItem&&!i.readonly&&!i.disabled&&!(i instanceof Smart.ListItemsGroup)){t.preventDefault(),t.stopPropagation();break}i=i.parentElement}}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===a.selectionChangeAction){const i=t.originalEvent.target.closest("smart-list-box");i?i._pointerUpHandler(t):a._pointerUpHandler(t)}if(Smart.ListBox.DragDrop.Feedback){Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null;let i;if(Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const n=Smart.ListBox.DragDrop.ListBoxes[a],o=n.getBoundingClientRect();if(n.allowDrop&&!n.closest(".smart-visibility-hidden")&&o.left<=t.pageX&&t.pageX<=o.left+o.width&&o.top<=t.pageY&&t.pageY<=o.top+o.height){i=n;const a=n._items.filter(t=>!t.hidden);for(let l=0;l<a.length;l++){const i=a[l],r=i.getBoundingClientRect();if((a.indexOf(i)===a.length-1||i.parentNode.lastElementChild===i)&&t.pageY>=o.top+i.offsetTop-n.scrollTop+r.height/2&&t.pageY<=o.top-n.scrollTop+i.offsetTop+r.height){Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"};break}if(t.pageY>=o.top+i.offsetTop-n.scrollTop&&t.pageY<=o.top+i.offsetTop+r.height-n.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:i,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let a=Smart.ListBox.DragDrop.DropDetails.item,n=Smart.ListBox.DragDrop.Item;const o=n.ownerListBox;if(i=!i&&t.originalEvent.target.closest?t.originalEvent.target.closest("smart-list-box"):i,a.$.removeClass("smart-list-item-line-feedback"),a.$.removeClass("smart-list-item-bottom-line-feedback"),i&&a.ownerListBox!==i&&0<i.items.length&&(a=i.items[i.items.length-1]),!(Smart.ListBox.DragDrop.Item!==a&&(i===a.ownerListBox||Smart.Utilities.Core.isMobile)))i&&0===i._items.length&&"none"!==i.dropAction&&("move"===i.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===i.dropAction&&(n=n.cloneNode(!0)),i.appendChild(n));else if("none"!==n.ownerListBox.dropAction){a.ownerListBox!==n.ownerListBox&&"move"===n.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===n.ownerListBox.dropAction&&(n=n.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=a.group;const t=a.ownerListBox;"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&t.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?t.insertBefore(n,a):a.parentNode.lastElementChild===a?t.appendChild(n):t.appendChild(n,a),t.ensureVisible(n),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode?(t._focus(n),t._refreshSelection()):(t.clearSelection(),t.select(n))}n.selected&&i!==o&&o._refreshSelection();const l=Smart.ListBox.DragDrop.Item,r=l.ownerListBox;l.displayMode="checkBox"===r.selectionMode||"radioButton"===r.selectionMode?r.selectionMode:"plain",r.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:l.selected,disabled:l.disabled,index:r._indexOf(l),label:l.label,value:l.value}),r._focus(l)}else{const i=Smart.ListBox.DragDrop.Item,a=i.ownerListBox;i.displayMode="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",a.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:i.selected,disabled:i.disabled,index:a._indexOf(i),label:i.label,value:i.value}),a._focus(i)}t.preventDefault()}Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let t=0;t<Smart.ListBox.DragDrop.ListBoxes.length;t++){const i=Smart.ListBox.DragDrop.ListBoxes[t];i._dragInterval&&clearInterval(i._dragInterval)}}}_itemsContainerMoveHandler(t){const i=this;if(Smart.ListBox.DragDrop.Dragging)return i._applyItemFeedback(t),i._moveHandler(t),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_applyItemFeedback(t){const i=this,a=t.originalEvent.target,n=a.closest?a.closest("smart-list-item"):a;return Smart.Utilities.Core.isMobile?void(Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}):0===i.items.length?void 0:n?void n._itemOnMouseMove(t):void i.items[i.items.length-1]._itemOnMouseMove(t,!0)}_moveHandler(t){var i=Math.abs;if(Smart.ListBox.DragDrop.Feedback)if(!Smart.ListBox.DragDrop.Dragging){const a=i(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),n=i(t.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let l=5<=a&&15>=a||5<=n&&15>=n;if(Smart.Utilities.Core.isMobile&&(300>o||1e3<o)&&(l=!1),l){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px",document.body.appendChild(Smart.ListBox.DragDrop.Feedback),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();const i=Smart.ListBox.DragDrop.Item,a=i.ownerListBox;a.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:i.selected,disabled:i.disabled,index:a._indexOf(i),label:i.label,value:i.value})}}else{Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px";for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const i=Smart.ListBox.DragDrop.ListBoxes[a];i._dragInterval&&clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){const a=i.getBoundingClientRect();a.left<=t.clientX&&a.left+a.width>=t.clientX&&(t.clientY>=a.top&&t.clientY<=a.top+20?i.scrollTop-=2:t.clientY>=a.top+a.height-20&&t.clientY<=a.top+a.height&&(i.scrollTop+=2))},1)}return t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}}_focusHandler(){const t=this;t._focused=!0,t.setAttribute("focus","")}_blurHandler(){const t=this;t._focused=!1,t.removeAttribute("focus")}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}i.isVirtualized?(-1<i._items.indexOf(t)&&i._items.splice(i._items.indexOf(t),1),i._items.push(t)):(t.dataItem=t,i.enableShadowDOM&&"light"===i.shadowDomMode?i.appendChild(t):i.$.itemsInnerContainer.appendChild(t),-1<i._items.indexOf(t)&&i._items.splice(i._items.indexOf(t),1),i._items.push(t)),i._refreshItems(),i._refreshSelection()}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.isVirtualized?(-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.splice(a._indexOf(i),0,t)):(t.dataItem=t,i.parentNode.insertBefore(t,i),-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.splice(a._indexOf(i),0,t)),a._refreshItems(),a._refreshSelection()}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}if(i.isVirtualized)i._items.splice(i._indexOf(t),1);else if(t.parentNode){const a=i.selectedIndexes.slice(0),n=i.selectedValues.slice(0),o=a.indexOf(t.dataIndex);t.parentNode.removeChild(t),-1<o&&(a.splice(o,1),n.splice(o,1),i.selectedIndexes=a,i.selectedValues=n)}i._refreshItems()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"innerHTML":n.clearSelection(),n._dataBind(),n.innerHTML=n.content=Smart.Utilities.Core.html(n.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":{n.clearSelection(),n._dataBind();break}case"disabled":case"unfocusable":n._setFocusable();break;case"displayLoadingIndicator":{n._setLoadingIndicatorVisibility();break}case"filterable":{n._refreshFilter(),n._refreshLayout();break}case"grouped":{if(a?n._group():n._ungroup(),!("radioButton"===n.selectionMode))n._refreshSelection();else if(0<n.selectedValues.length){const t=n.selectedValues;n.clearSelection(),n.select(t[0])}n._refreshLayout();break}case"itemTemplate":{if(null===a||""===a)return n._items.map(t=>t.innerHTML=t.label),delete n._bindingDetails,void n._refreshLayout();const t=n.querySelectorAll("smart-list-item"),i=function(){n._handleItemTemplate(a)&&(n._items.map(t=>n._applyTemplate(t)),n._refreshLayout()),n.ownerElement&&n.ownerElement._setDropDownSize&&n.ownerElement._setDropDownSize(),n.$.fireEvent("bindingComplete")};0===t.length?i():n._ensureItemsReady(t,i);break}case"selectedIndexes":case"selectedValues":{let o=n.selectedIndexes.slice(0),l=n.selectedValues.slice(0);if(!n._items||0===n._items.length)return n.selectedIndexes=[],n.selectedValues=[],void(n.$.hiddenInput.value=n.selectedValues.toString());if(n._propertyChanging=!0,"selectedIndexes"===t){o=i.slice(0),n.clearSelection();for(let t=0;t<a.length;t++){const i=a[t],o=n._items[i];o&&("oneOrManyExtended"===n.selectionMode||"oneOrMany"===n.selectionMode?(0<n.selectedIndexes.length&&0==t&&n.clearSelection(),n._select(o)):n.select(o))}}else{l=i.slice(0),n.selectedValues=[],n.clearSelection();for(let t=0;t<a.length;t++){const i=a[t],o=n.getItem(i);o&&("oneOrManyExtended"===n.selectionMode?n._select(o):n.select(o))}}if(0<n.selectedIndexes.length&&n._focus(n._items[n.selectedIndexes[0]]),n._propertyChanging=!1,JSON.stringify(l)!==JSON.stringify(n.selectedValues.slice(0))){let t=[],a=[];for(let t=0;t<o.length;t++)0>n.selectedIndexes.indexOf(o[t])&&a.push(n._items[o[t]]);for(let a=0;a<n.selectedIndexes.length;a++)0>o.indexOf(n.selectedIndexes[a])&&t.push(n._items[n.selectedIndexes[a]]);let i={addedItems:t,removedItems:a};if(0<n.selectedIndexes.length){const t=n._items[n.selectedIndexes[n.selectedIndexes.length-1]];t!==void 0&&(i.selected=t.selected,i.disabled=t.disabled,i.index=n._indexOf(t),i.label=t.label,i.value=t.value)}else i.selected=!1,i.disabled=!1,i.index=-1,i.label="",i.value="";n.$.fireEvent("change",i)}break}case"selectionMode":{const t="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain",a=n.selectedIndexes.slice(0),i=n.selectedValues.slice(0);n._propertyChanging=!0;const o=n.selectedValues;n.selectedValues=[],n.clearSelection();for(let t=0;t<o.length;t++){const i=o[t],a=n.getItem(i);a&&("oneOrManyExtended"===n.selectionMode?n._select(a):n.select(a))}if(n._items.forEach(i=>i.displayMode=t),n._recycle(),n._propertyChanging=!1,JSON.stringify(i)!==JSON.stringify(n.selectedValues.slice(0))){let t=[],o=[];for(let t=0;t<a.length;t++)0>n.selectedIndexes.indexOf(a[t])&&o.push(n._items[a[t]]);for(let o=0;o<n.selectedIndexes.length;o++)0>a.indexOf(n.selectedIndexes[o])&&t.push(n._items[n.selectedIndexes[o]]);let i={addedItems:t,removedItems:o};if(0<a.length){const t=n._items[a[a.length-1]];t&&(i.selected=t.selected,i.disabled=t.disabled,i.index=n._indexOf(t),i.label=t.label,i.value=t.value)}n.$.fireEvent("change",i)}break}case"topVisibleIndex":n._setTopVisibleIndex(a);break;case"autoSort":n._canSort=a;break;case"sortDirection":case"sorted":{n._canSort=!0,a?n._sort():n._unsort();const t=n.selectedValues;n.selectedValues=[],n._refreshSelection();for(let a=0;a<t.length;a++){const i=t[a],o=n.getItem(i);o&&("oneOrManyExtended"===n.selectionMode?n._select(o):n.select(o))}n._refreshLayout(),n._canSort=n.autoSort;break}}}_refreshSelection(){const t=this;if(t._items&&0!==t._items.length){const a=t.selectedValues;t.selectedIndexes=[],t.selectedValues=[];for(let n=0;n<t._items.length;n++){const i=t._items[n];i.selected=!1,-1<a.indexOf(i.value)&&t.select(i)}t._recycle()}}clearSelection(){const t=this;if(!t._items||0===t._items.length)return;let a=[];for(let n=0;n<t._items.length;n++)t._items[n].selected&&a.push(t._items[n]);t._items.map(t=>t.selected=!1);const i=t.selectedValues.slice(0),n=t.selectedIndexes.slice(0);if(t.selectedIndexes=[],t.selectedValues=[],t.$.hiddenInput.value=t.selectedValues.toString(),t._recycle(),t.context!==t){let i={addedItems:[],removedItems:a};if(0<n.length){const a=t._items[n[n.length-1]];a&&(i.selected=a.selected,i.disabled=a.disabled,i.index=t._indexOf(a),i.label=a.label,i.value=a.value)}t.$.fireEvent("change",i)}}ensureVisible(t){const i=this;if(t)return!("string"==typeof t&&(t=i.getItem(t),!t))&&(i.isVirtualized||i.$.itemsContainer.scrollTop===i.scrollTop||(i.scrollTop=i.$.itemsContainer.scrollTop),t.top+t.height>=i.scrollTop+i.offsetHeight&&(i.scrollTop+=t.height,!i.isVirtualized&&(i.$.itemsContainer.scrollTop=i.scrollTop)),(t.top<=i.scrollTop||t.top>=i.scrollTop+i.$.itemsContainer.offsetHeight)&&(i.scrollTop=t.top,!i.isVirtualized&&(i.$.itemsContainer.scrollTop=i.scrollTop)),0===i._indexOf(t)||1===i._indexOf(t)&&1<i._items.length&&i._items[0].grouped?(i.scrollTop=0,!i.isVirtualized&&(i.$.itemsContainer.scrollTop=i.scrollTop)):i._indexOf(t)===i._items.length-1&&(i.scrollTop=i.scrollHeight,!i.isVirtualized&&(i.$.itemsContainer.scrollTop=i.scrollTop)),!0)}get items(){const t=this;return t._filteredItems?t._filteredItems:t._items}ready(){super.ready();const t=this;if(t.enableShadowDOM&&"light"===t.shadowDomMode){const i=document.createDocumentFragment();[].slice.call(t.$.itemsInnerContainer.children).map(t=>i.appendChild(t)),t.appendChild(i),t.$.itemsInnerContainer.appendChild(document.createElement("slot"))}t._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),t._keysPressed={},t._incrementalSearchQuery="",t._incrementalSearchItems=[],t._canSort=!0,t._previousEntry="",t.isUpdating=0,t._scrollView&&(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t._scrollView.hScrollBar.$.addClass("smart-hidden"),t._scrollView.vScrollBar.$.addClass("smart-hidden"));const i=t._scrollView.vScrollBar,a=t._scrollView.hScrollBar;i.hasStyleObserver=!1,a.hasStyleObserver=!1,i.hasResizeObserver=!1,a.hasResizeObserver=!1,i.wait=!1,a.wait=!1,t._setFocusable(),t._setLoadingIndicatorVisibility(),t._refreshFilter(),t._initializeInnerHTML(),t._dataBind()}attached(){const t=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(t),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),0<t.selectedIndexes.length&&t.ensureVisible(t._items[t.selectedIndexes[0]])}detached(){const t=this;if(super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const i=Smart.ListBox.DragDrop.ListBoxes.indexOf(t);Smart.ListBox.DragDrop.ListBoxes.splice(i,1)}}_createItem(t,i,a){const n=this,o="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain",l=a?{}:document.createElement("smart-list-item");l.ownerListBox=n,"number"==typeof t&&(t=""+t);const r=function(i,a){return void 0===t[i]?t[a]:""+t[i]};let s="string"==typeof t?t:r(n.displayMember,"label"),d="string"==typeof t?t:r(n.valueMember,"value"),m=r(n.groupMember,"group");return void 0===s&&(void 0===i?s="":s=""+i),l.label=l.innerHTML=""+s,void 0===d&&(void 0===i?d=s:d=""+i),l.value=""+d,l.displayMode=o,l.selected=!!t.selected&&t.selected,l.disabled=!!t.disabled&&t.disabled,l.dataItem=l,void 0!==i&&(l.dataIndex=i),n._alternateItem(l),t.title&&(l.title=t.title),m&&(l.group=""+m),l}_alternateItem(t){const i=this,a=i.alternationStart,n=0<i.alternationEnd?i.alternationEnd:1/0;0>=i.alternationCount||(i._alternationIndexCounter===void 0&&(i._alternationIndexCounter=0),t.dataIndex>=a&&t.dataIndex<=n&&(t.alternationIndex=i._alternationIndexCounter++,i._alternationIndexCounter===i.alternationCount&&(i._alternationIndexCounter=0)))}_beginUpdate(){const t=this;t.isUpdating++}_isUpdating(){const t=this;return 0<t.isUpdating}_endUpdate(){const t=this;t.isUpdating--}get _scrollHeight(){const t=this;let a=0;if(t.isVirtualized){if(t.__scrollHeight)return t.__scrollHeight;if(0===t._items.length)return 0;t.isUpdating++;const n=t._createItem(t.dataSource[0]);t.$.itemsInnerContainer.appendChild(n);for(let o=0;o<t._items.length;o++){const i=t._items[o];if(i.hidden){i.height=0,i.top=a;continue}t.itemHeight?(32>t.itemHeight&&(t.itemHeight=32),i.height=t.itemHeight):(n.label=i.label,i.height=n.offsetHeight),i.top=a,a+=i.height}t.$.itemsInnerContainer.removeChild(n),t.__scrollHeight=a-t.$.itemsInnerContainer.offsetHeight,t.filterable&&(t.__scrollHeight+=t.$.filterInput.offsetHeight),a=t.__scrollHeight,t.isUpdating--}else{for(let n=0;n<t._items.length;n++){const i=t._items[n];if(i.hidden){i.height=0,i.top=a;continue}t.itemHeight?"auto"!==t.itemHeight&&(i.height=t.itemHeight,i.style.height=i.height+"px"):i.height=i.offsetHeight,i.top=i.offsetTop,a+=i.height}a=t.$.itemsInnerContainer.scrollHeight-t.$.itemsInnerContainer.offsetHeight,t.filterable&&0<a&&(a+=t.$.filterInput.offsetHeight),t.__scrollHeight=a}return 0+a}_initializeRecyclingItems(){const t=this;if(!t.dataSource||t.dataSource&&0===t.dataSource.length||!t.isVirtualized)return;let a=0,n=t.offsetHeight;t.$.itemsInnerContainer.innerHTML="",t._recyclingItems=[];const i=function(){for(let o=0;o<t.dataSource.length;o++){const i=t.dataSource[o],l=t._createItem(i);if(t.itemHeight&&"auto"!==t.itemHeight&&(l.style.height=t.itemHeight+"px"),t.$.itemsInnerContainer.appendChild(l),a+=l.offsetHeight,l.dataItem=t._items[o],t._recyclingItems.push(l),a>1.5*n)break}};i();for(let t=0;a<1.5*n&&5>++t;)i()}_dataBind(){const t=this;if(t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),"function"==typeof t.dataSource&&(t._items=[]),"string"==typeof t.dataSource&&(t.dataSource=JSON.parse(t.dataSource)),null!==t.dataSource&&Array.isArray(t.dataSource)){t.isUpdating++;const i=a=>{t._items=[],t._groups=[];for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n],o=a?t._createItem(i,n):t._createItem(i,n,!0);t._items[n]=o,a&&a.appendChild(o)}};if(t.isVirtualized)i(),t._initializeRecyclingItems();else{const a=document.createDocumentFragment();t.$.itemsInnerContainer.innerHTML="",i(a),t.$.itemsInnerContainer.appendChild(a)}t.isUpdating--}const i=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),a=function(){t.isUpdating++,t.dataSource||(t._initializeHtmlListItems(),t._initializeHtmlListGroups()),t.grouped&&t._group(),t.sorted&&t._sort(),t._refreshLayout(),t._initializeSelection(),t.isInitialized=!0,t._canSort=t.autoSort,t.isUpdating--,t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&(t._items.map(i=>t._applyTemplate(i)),t._refreshLayout()),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted()),-1<t.topVisibleIndex&&t._setTopVisibleIndex(t.topVisibleIndex),t.$.fireEvent("bindingComplete"),t._updateTopVisibleIndex(),0===t._items.length&&t.clearItems()};0===i.length?a():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(i,a))}_ensureItemsReady(t,i){const a=this,n=function(){const a=function(a){for(let n=0;n<t.length;n++)t[n].context="node"===a?t[n]:document};a("node"),i(),a()};if(0===t.length)n();else{a._nodesReadyListeners=0;for(let o=0;o<t.length;o++){const i=t[o],l=function(){a._nodesReadyListeners--,0===a._nodesReadyListeners&&(n(),delete a._nodesReadyListeners)}.bind(a);i.isCompleted||(a._nodesReadyListeners++,i._onCompleted=l)}0===a._nodesReadyListeners&&n()}}_initializeInnerHTML(){const t=this;0<=t.$.itemsInnerContainer.innerHTML.indexOf("<option")?t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<optgroup/ig,"<smart-list-items-group").replace(/<\/optgroup/ig,"</smart-list-items-group").replace(/<option/ig,"<smart-list-item").replace(/<\/option/ig,"</smart-list-item"):0<=t.$.itemsInnerContainer.innerHTML.indexOf("<ul")&&(t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<ul/ig,"<smart-list-items-group").replace(/<\/ul/ig,"</smart-list-items-group").replace(/<li/ig,"<smart-list-item").replace(/<\/li/ig,"</smart-list-item"))}_initializeHtmlListItems(){const t=this,a=t.enableShadowDOM&&"shadow"===t.shadowDomMode?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),n="checkBox"===t.selectionMode||"radioButton"===t.selectionMode?t.selectionMode:"plain",o=function(t,i,a){return void 0===t[i]?t[a]:""+t[i]};t._items=[];let l=0;for(let r=0;r<a.length;r++){const i=a[r];i.dataIndex=r,i.label=i.innerHTML,i.dataItem=i,i.top||(i.top=l),i.height||(i.height=i.offsetHeight),l+=i.height,i.value||(i.value=""+r);const s=o(i,t.displayMember,"label"),d=o(i,t.valueMember,"value"),m=o(i,t.groupMember,"group");i.label!==s&&(i.label=s),i.value!==d&&(i.value=d),i.group!==m&&(i.group=m);const c=i.context;i.context=document,i.displayMode=n,i.context=c,t._alternateItem(i),i.selected&&(t.selectedIndexes.push(r),t.selectedValues.push(i.value)),t._items.push(i)}t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._items.map(i=>t._applyTemplate(i))}_group(){const t=this;t.isUpdating++;let a=[],n=[];t._canSort&&t._unsort();for(let n=0;n<t._items.length;n++){const i=t._items[n];let o=i.group?i.group.trim():i.innerHTML.toUpperCase().charAt(0)||i.label.toUpperCase().charAt(0);o+=" ",a[o]?a[o].items.push(i):a[a.length++]=a[o]={items:[i],label:o}}if(!t.isVirtualized){for(;t.$.itemsInnerContainer.firstChild;)t.$.itemsInnerContainer.removeChild(t.$.itemsInnerContainer.firstChild);const o=document.createDocumentFragment();t._groups=[];for(let l=0;l<a.length;l++){const i=a[l],r=document.createElement("smart-list-items-group");r.label=i.label,r.dataIndex=l;for(let t=0;t<a[l].items.length;t++){const a=i.items[t];n.push(a),a.group=i.label,r.appendChild(a)}t._groups.push(r),o.appendChild(r)}t._items=n;const i=/Trident|Edge/.test(navigator.userAgent);i?setTimeout(function(){t.$.itemsInnerContainer.appendChild(o)},50):t.$.itemsInnerContainer.appendChild(o)}else{t._groups=[];for(let t=0;t<a.length;t++){const i=a[t];i.dataIndex=t,i.grouped=!0,i.hidden=!1,i.displayMode="plain",n.push(i);for(let o=0;o<a[t].items.length;o++){const t=i.items[o];t.group=i,n.push(t)}}t._groups=a,t._items=n}t.sorted&&t._sort(),t.isUpdating--}_ungroup(){const t=this;t.isUpdating++,t._groups=[],t._canSort&&t._unsort();let a=[];if(!t.isVirtualized){const n=document.createDocumentFragment();for(let o=0;o<t._items.length;o++){const i=t._items[o];n.appendChild(i),a.push(i)}0<a.length&&(t.$.itemsInnerContainer.innerHTML="",t.$.itemsInnerContainer.appendChild(n))}else for(let n=0;n<t._items.length;n++){const i=t._items[n];i.grouped||a.push(i)}t._items=a,t.sorted&&t._sort(),t.isUpdating--}_initializeHtmlListGroups(){const t=this,a=t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");t._groups=[];for(let n=0;n<a.length;n++){const i=a[n];i.dataIndex=n,t._groups.push(i)}}_initializeSelection(){const t=this,a=t.selectedIndexes.slice(0),n=t.selectedValues.slice(0);t.clearSelection(),"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!0);for(let o=0;o<t._items.length;o++){const i=t._items[o];(0<=a.indexOf(o)||0<=n.indexOf(i.value||i.label))&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=null,t.select(i))}"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!1)}onItemUpdated(){const t=this;!t.isInitialized||t._isUpdating()||(t.isUpdating++,t._refreshLayout(),t.isUpdating--)}_refreshItems(){const t=this;if(t.isInitialized&&!t._isUpdating()){if(t.isUpdating++,t.grouped?t._ungroup():t.sorted&&t._canSort&&t._unsort(),!t.isVirtualized){t._items=[];const a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item");for(let n=0;n<a.length;n++)a[n].dataIndex=n,t._alternateItem(a[n]),t._items.push(a[n])}t.grouped?t._group():t.sorted&&t._sort(),t._refreshLayout(),t.isUpdating--}}_applyIncrementalSearch(t){const i=this;if(!(null===i.incrementalSearchDelay||isNaN(i.incrementalSearchDelay)))return-1<["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(t)?void 0:(0!==i._incrementalSearchQuery.indexOf(t)&&(i._incrementalSearchQuery+=t),i._incrementalSearchTimer&&clearTimeout(i._incrementalSearchTimer),i._incrementalSearch(),void(i._incrementalSearchTimer=setTimeout(function(){i._incrementalSearchQuery=""},i.incrementalSearchDelay)))}select(t){const a=this;if(!("string"==typeof t&&(t=a.getItem(t),!t))&&!("number"==typeof t&&(t=a.getItem(t),!t))&&!(t.grouped||t.readonly)){if("none"===a.selectionMode)return a.selectedIndexes=[],void(a.selectedValues=[]);switch(a._focusedItem||"none"===a.selectionMode||(a._focusedItem=t,t._focused=!0),a.selectionMode){case"one":return(1!==a.selectedIndexes.length||a.selectedIndexes[0]!==a._indexOf(t))&&(a._previouslySelectedIndexes=a.selectedIndexes,1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t),delete a._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===a.selectedIndexes.length&&a.selectedIndexes[0]===a._indexOf(t)?(a.unselect(t),!0):(a._previouslySelectedIndexes=a.selectedIndexes,1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t),delete a._previouslySelectedIndexes,!0);case"radioButton":if(a._previouslySelectedIndexes=a.selectedIndexes,0<a.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length){const i=t.parentNode;if(!t.selected){for(let t in i.children){const n=i.children[t];n.selected&&a.unselect(n)}a._select(t)}return delete a._previouslySelectedIndexes,!0}if(a.isVirtualized&&0<a._groups.length){const i=t.group;if(!t.selected){for(let t in i.items){const n=i.items[t];n.selected&&a.unselect(n)}a._select(t)}return delete a._previouslySelectedIndexes,!0}return t.selected||(1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t)),delete a._previouslySelectedIndexes,!0;case"oneOrMany":return t.selected?1<a.selectedIndexes.length&&a.unselect(t):a._select(t),!0;case"zeroOrMany":case"checkBox":return t.selected?a.unselect(t):a._select(t),!0;case"oneOrManyExtended":{const n=a.selectedValues;if(a._keysPressed.Control)return 1<a.selectedIndexes.length?t.selected?(a.unselect(t),a._focus(a._items[a.selectedIndexes[0]])):a._select(t):a._select(t),!0;if(a._keysPressed.Shift){const i=a._items[a.selectedIndexes[0]];let o;a.clearSelection();const l=0<=n.indexOf(i.value)||i.selected;if(a._select(i,l),a._indexOf(i)>a._indexOf(t))for(o=a._indexOf(i)-1;o>=a._indexOf(t);){const t=a._items[o],i=0<=n.indexOf(t.value)||t.selected;a._select(t,i),o--}else for(o=a._indexOf(i)+1;o<=a._indexOf(t);){const t=a._items[o],i=0<=n.indexOf(t.value)||t.selected;a._select(t,i),o++}const r=[];for(let t=0;t<n.length;t++)r.push(a.getItem(n[t]));if(0<r.length&&!a._propertyChanging){let o=[];for(let t=0;t<a.selectedValues.length;t++){const i=a.selectedValues[t];0>n.indexOf(i)&&o.push(a.getItem(i))}a.$.fireEvent("change",{addedItems:o,removedItems:r,selected:t.selected,disabled:t.disabled,index:a._indexOf(t),label:t.label,value:t.value})}return!0}for(let o=0;o<n.length;o++){const i=n[o],l=a.getItem(i);t!==l&&a.unselect(l)}return a.clearSelection(),a._select(t,0<=n.indexOf(t.value)),!0}}return!1}}_applyTemplate(t,i){const a=this;if(null===a.itemTemplate)return;if("function"==typeof a.itemTemplate)return void a.itemTemplate(t,{label:t.label,value:t.value,index:a._items.indexOf(t)});if(!a._bindingDetails||0===a._bindingDetails.length)return;const n=a._bindingDetails.length;let o=document.importNode(a._template.content,!0),l,r;for(let s=0;s<n;s++){l=o.childNodes[a._bindingDetails[s].childNodeIndex],r=a._bindingDetails[s].bindingString.length;for(let n=0;n<r;n++){const i=a._bindingDetails[s].bindingString[n],o=0<=i.indexOf("label")?t.label:t.value;l.innerHTML=l.innerHTML.replace(i,o)}}t.innerHTML="";for(let a=0;a<o.childNodes.length;a++)o.childNodes[a].outerHTML&&(t.innerHTML+=o.childNodes[a].outerHTML);!1===i||(a._scrollHeightTimer&&(clearInterval(a._scrollHeightTimer),a._scrollHeightCounter=0),a._scrollHeightTimer=setInterval(function(){(a._lastScrollHeight!==a.$.itemsInnerContainer.scrollHeight||10===a._scrollHeightCounter)&&(a._refreshLayout(),clearInterval(a._scrollHeightTimer)),a._lastScrollHeight=a.$.itemsInnerContainer.scrollHeight,a._scrollHeightCounter++},50))}_filterItems(t,i){const a=this,n=a.$.filterInput.value;let o,l;const r=function(){if(0===l.length)return a._filteredItems=[],void(i&&i());o=a._queryItems(n,a.filterMode);for(let t=0;t<l.length;t++)l[t].hidden=!0,l[t].$.addClass("smart-hidden");for(let t=0;t<o.length;t++){const i=o[t];i.hidden=!1,i.$.removeClass("smart-hidden")}if(a.grouped&&a.isVirtualized)for(let t=0;t<a._groups.length;t++){const i=a._groups[t],n=i.items;let o=!0;for(let t=0;t<n.length;t++)n[t].hidden||(o=!1);o&&(i.hidden=!0)}if(a.grouped&&!a.isVirtualized)for(let t=0;t<a._groups.length;t++){const i=a._groups[t],n=[].concat(...i.querySelectorAll("smart-list-item"));let o=!0;for(let t=0;t<n.length;t++)n[t].$.hasClass("smart-hidden")||(o=!1);o?i.$.addClass("smart-hidden"):i.$.removeClass("smart-hidden")}a._filteredItems=o,a._refreshLayout(),i&&i();t||a._refreshSelection()};if("function"!=typeof a.dataSource){if(l=a._items,0===l.length)return;r()}else if(n){const t=a.dataSource(n,function(t){n&&a.isAttached&&(a._updateListBoxAfterQuery=function(){o=l=a._items,r()},a.clearItems(),a.insert(0,t))});if(t){if(!n)return;a._updateListBoxAfterQuery=function(){o=l=a._items,r()},a.clearItems(),a.insert(0,t)}}else a.clearItems(),o=l=a._items,r()}_getNextItem(t){const i=this,a=i._items,n=i._items.length;for(let i=Math.max(t+1,0);i<n;){const t=a[i];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;i++}return a[t]}_getPreviousItem(t){const i=this,a=i._items;for(let i=Math.max(t-1,0);-1<i;){const t=a[i];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;i--}return a[t]}get _scrollWidth(){const t=this,a=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=(()=>{const t=this;let n="",i;for(let t=0;t<a.length;t++){if(a[t].hidden)continue;const i=a[t].label;i.length>n.length&&(n=i)}const o=t._createItem({label:n});t.$.itemsContainer.appendChild(o),o.label=n,o.$.itemContainer.style.width="auto",o.$.container.style.width="auto",o.style.width="auto";const l=getComputedStyle(o),r=parseInt(l.paddingLeft)+parseInt(l.paddingRight);return i=o.$.itemContainer.offsetWidth+r,o.parentNode.removeChild(o),i})(),t.__scrollWidth)}update(t,i){const a=this,n=a._items[t];if(n){if("string"==typeof i)n.label=i,void 0===n.value&&(n.value=i);else for(let t in i)"selected"==t&&n[t]!==i[t]?a.select(n):n[t]=i[t],"group"==t&&a._refreshItems();(a.sorted||a.grouped||a.isVirtualized)&&(a._refreshItems(),a._refreshSelection())}else a.error(a.localize("indexOutOfBound",{elementType:a.nodeName.toLowerCase(),method:"update"}))}insert(t,a){const n=this;let o=[];if(t||(t=0),Array.isArray(a)){n.isUpdating++;for(let l=0;l<a.length;l++){const i=a[l],r=n._createItem(i);o.push(r),t>=n._items.length||0===n._items.length?n.appendChild(r):n.insertBefore(r,n._items[t])}n.isUpdating--}else{const i=n._createItem(a);o.push(i),t>=n._items.length||0===n._items.length?n.appendChild(i):n.insertBefore(i,n._items[t])}0<o.length&&n._ensureItemsReady(o,function(){n._refreshItems(),0===n._items.length||(n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery),n._refreshSelection(),n.$.fireEvent("bindingComplete"))})}remove(t){const i=this,a=i._items[t];a?(i.isVirtualized?i._items.splice(t,1):a.parentNode.removeChild(a),a.selected&&i.unselect(a),i._refreshItems(),i._refreshSelection(),0===i.selectedIndexes.length&&0<i._items.length&&("oneOrMany"===i.selectionMode||"one"===i.selectionMode||"oneOrManyExtended"===i.selectionMode)&&i.select(i._items[0])):i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"remove"}))}_queryItems(t,i){const a=this,n=[],o=function(n,o){if(n.grouped)return n;switch(i){case"startsWith":if(0===n.label.indexOf(o))return n;break;case"startsWithIgnoreCase":if(0===n.label.toLowerCase().indexOf(o.toLowerCase()))return n;break;case"doesNotContain":if(0>n.label.indexOf(o))return n;break;case"doesNotContainIgnoreCase":if(0>n.label.toLowerCase().indexOf(o.toLowerCase()))return n;break;case"contains":if(-1<n.label.indexOf(o))return n;break;case"containsIgnoreCase":if(-1<n.label.toLowerCase().indexOf(o.toLowerCase()))return n;break;case"equals":if(0===n.label.localeCompare(o))return n;break;case"equalsIgnoreCase":if(0===n.label.toLowerCase().localeCompare(o.toLowerCase()))return n;break;case"endsWith":if(n.label.endsWith(o))return n;break;case"endsWithIgnoreCase":if(n.label.toLowerCase().endsWith(o.toLowerCase()))return n;break;case"custom":if(a.filterCallback(n,t))return n;}return null};if(0===t.length)return a._items;for(let l=0;l<a._items.length;l++){const i=o(a._items[l],t);i&&n.push(i)}return n}_select(t,i){const a=this,n=a.selectedIndexes.indexOf(a._indexOf(t)),o=a.selectedIndexes.slice(0),l=a.selectedValues.slice(0);if(t.selected=!0,-1===n)o.push(a._indexOf(t)),l.push(t.value||t.label);else return a._recycle(),!1;if(a.selectedIndexes=o,a.selectedValues=l,a._recycle(),a.$.hiddenInput.value=l.toString(),a.isCompleted&&!i&&a.isInitialized&&!a._propertyChanging){let n=[];if(a._previouslySelectedIndexes){for(let t=0;t<a._previouslySelectedIndexes.length;t++)0>a.selectedIndexes.indexOf(a._previouslySelectedIndexes[t])&&n.push(a._items[a._previouslySelectedIndexes[t]]);delete a._previouslySelectedIndexes}return a.$.fireEvent("change",{addedItems:[t],removedItems:n,selected:t.selected,disabled:t.disabled,index:a._indexOf(t),label:t.label,value:t.value}),!0}}_setTopVisibleIndex(t){const i=this;return"number"==typeof t&&(i.topVisibleIndex=Math.max(0,t),t=i._items[i.topVisibleIndex]),!!t&&void(t.top!==i.scrollTop&&(i.scrollTop=t.top,!i.isVirtualized&&(i.$.itemsContainer.scrollTop=i.scrollTop),i.scrollHeight===i.scrollTop&&i._updateTopVisibleIndex()))}_updateTopVisibleIndex(){const t=this,a=t.scrollTop+t._scrollView.verticalScrollBar.offsetHeight-t.offsetHeight;let n;if(t.scrollTop<t.scrollHeight/2){for(let o=0;o<t._items.length;o++)if(t._items[o].top>a){n=t._items[o];break}}else for(let o=t._items.length-1;0<=o&&!(t._items[o].top<a);o--)n=t._items[o];n&&(t.topVisibleIndex=n.dataIndex)}unselect(t){const i=this;if(!t)return;if("string"==typeof t&&(t=i.getItem(t),!t))return;if("none"===i.selectionMode)return void i.clearSelection();const a=i.selectedIndexes.indexOf(i._indexOf(t)),n=i.selectedIndexes.slice(0),o=i.selectedValues.slice(0);if(t.selected=!1,0<=a)n.splice(a,1),o.splice(a,1);else return!1;return(i.selectedIndexes=n,i.selectedValues=o,i.$.hiddenInput.value=o.toString(),i.isCompleted&&!i._propertyChanging)?(i.$.fireEvent("change",{addedItems:[],removedItems:[t],selected:t.selected,disabled:t.disabled,index:i._indexOf(t),label:t.label,value:t.value}),i._recycle(),!0):void 0}_handleItemTemplate(t){if(null===t||!t)return;if("function"==typeof t)return t;const a=this;if(!("content"in document.createElement("template")))return a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a.itemTemplate=null);if(t=document.getElementById(t),null===t||!("content"in t))return a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"itemTemplate"})),void(a.itemTemplate=null);const n=t.content,o=n.childNodes.length,l=/{{\w+}}/g;let r,s;a._bindingDetails=[],a._template=t;for(let d=0;d<o;d++){for(s=[];r=l.exec(n.childNodes[d].innerHTML);)s.push(r[0]);0<s.length&&a._bindingDetails.push({childNodeIndex:d,bindingString:s})}return!0}_handleKeyStrokes(t){const i=this,a="radioButton"===i.selectionMode||"checkBox"===i.selectionMode||"zeroOrMany"===i.selectionMode||"oneOrMany"===i.selectionMode||"zeroOrOne"===i.selectionMode;let n=i._items;if(i.filterable&&0<i.$.filterInput.value.length&&(n=i._filteredItems),!(i.disabled||i.readonly)){switch(t){case"ArrowLeft":case"ArrowUp":i._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":i._handleArrowKeys(!1);break;case" ":{if(1>i.selectedIndexes.length&&!i._focusedItem)return;const t=i._focusedItem?i._focusedItem:i._items[i.selectedIndexes[i.selectedIndexes.length-1]],a=t=>{t.selected&&"radioButton"!==i.selectionMode?i.unselect(t):i.select(t)};if("oneOrMany"===i.selectionMode)return void(t.selected&&1<i.selectedIndexes.length?a(t):!t.selected&&a(t));a(t);break}case"Home":{if(0===n.length)return;a?i._focus(n[0]):(!i._keysPressed.Shift&&i.clearSelection(),i.select(n[0]),i._focus(n[0])),i.scrollTop=0;break}case"End":{if(0===n.length)return;a?i._focus(n[n.length-1]):(!i._keysPressed.Shift&&i.clearSelection(),i.select(n[n.length-1]),i._focus(n[n.length-1])),i.scrollTop=i.scrollHeight;break}case"PageUp":{i._pageUpKeyHandler(n);break}case"PageDown":{i._pageDownKeyHandler(n);break}}i._recycle()}}_horizontalScrollbarHandler(t){const i=this;t.stopPropagation(),i.isVirtualized?i._recycle():i.$.itemsContainer.scrollLeft=t.detail.value}_unsort(){const t=this;t.isUpdating++;const a=function(t,i){let a=t.dataIndex,n=i.dataIndex;return a<n?-1:a>n?1:0};if(!t.isVirtualized){if(0<t._groups.length){t._groups.sort(a);let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],l=[].concat(...i.querySelectorAll("smart-list-item"));l.sort(a),n=n.concat(l)}t._items=n}else t._items.sort(a);t._applySortOrder()}else if(0<t._groups.length){t._groups.sort(a);let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],l=[].concat(...i.items);l.sort(a),n.push(i),n=n.concat(l)}t._items=n}else t._items.sort(a);t.isUpdating--}_applySortOrder(){const t=this,i=function(t){for(let a=0;a<t.length;a++){const i=t[a],n=i.parentNode;n&&n.appendChild(i)}};i(t._items),i(t._groups)}_sort(){const t=this;if(t._canSort){t.isUpdating++;const a=function(i,a){let n=i.label,o=a.label;if("asc"===t.sortDirection){if(n<o)return-1;if(n>o)return 1}else{if(n<o)return 1;if(n>o)return-1}return 0};if(t._groups.sort(a),!t.isVirtualized){if(0<t._groups.length){let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],l=[].concat(...i.querySelectorAll("smart-list-item"));l.sort(a),n=n.concat(l)}t._items=n}else t._items.sort(a);t._applySortOrder()}else if(0<t._groups.length){let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],l=[].concat(...i.items);n.push(i),l.sort(a),n=n.concat(l)}t._items=n}else t._items.sort(a);t.isUpdating--}}getItem(t){const a=this;for(let n=0;n<a._items.length;n++)if(a._items[n].value===t)return a._items[n];return null}_focus(t){const i=this;!t||"none"===i.selectionMode||i.disabled||i.readonly||(i._focusedItem&&(i._focusedItem._focused=!1),i._focusedItem=t,i._focusedItem._focused=!0)}_keyDownHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;let n=t.key;if(!(i.disabled||i.readonly)&&!(i.filterable&&i.$.filterInput===a)&&i._focused&&!(0===i._items.length||i.disabled||i.displayLoadingIndicator)){if(i.editable){if("F2"===n)return void i._dblclickEventHandler({target:i._focusedItem});if(i.$.editInput===a)return}if("none"!==i.selectionMode){if(t.stopPropagation(),"Down"===n||"Right"===n||"Left"===n||"Up"===n?n="Arrow"+n:void 0,i.filterable)switch(n){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":t.preventDefault();}if(i._applyIncrementalSearch(n),!(0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(n))){if(t.preventDefault(),!i._focusedItem&&0<i._items.length)return void("one"===i.selectionMode||"oneOrMany"===i.selectionMode||"oneOrManyExtended"===i.selectionMode?i.select(i._items[0]):i._focus(i._items[0]));switch(i.selectionMode){case"one":if("Shift"===n||"Control"===n||" "===n)return;i._handleKeyStrokes(n);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===n||"Control"===n)return;i._handleKeyStrokes(n);break;case"oneOrManyExtended":if(" "===n)return;i._keysPressed[n]="keydown"===t.type,i._handleKeyStrokes(n);}}}}}_keyUpHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;if(!(i.editable&&i.$.editInput===a)){if(i.filterable&&i.$.filterInput===a)return i._filterTimer&&clearTimeout(i._filterTimer),void(i._filterTimer=setTimeout(function(){const t=i.context;i.context=i,i._filterItems(),i.scrollTop=i.$.itemsContainer.scrollTop=0,i.scrollLeft=i.$.itemsContainer.scrollLeft=0,i.context=t},300));if(i._focused){if(i._focusedItem&&i._focusedItem.hidden&&0<i._filteredItems.length){let t=i._filteredItems[0];t.grouped&&1<i._filteredItems.length&&(t=i._filteredItems[1]),i._focus(t),i._recycle()}t.stopPropagation(),t.preventDefault(),i.disabled||0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(t.key)||(i._keysPressed[t.key]=!1)}}}_mouseWheelHandler(t){const i=this;(i.computedHorizontalScrollBarVisibility||i.computedVerticalScrollBarVisibility)&&(i.disabled||!i.computedVerticalScrollBarVisibility||(t.stopPropagation(),t.preventDefault(),i.scrollTo(i.scrollTop+(0>t.deltaY?-i.offsetHeight:i.offsetHeight))))}_pageDownKeyHandler(t){const i=this;if(0===t.length)return;let a=i._items[i.selectedIndexes[i.selectedIndexes.length-1]];("checkBox"===i.selectionMode||"radioButton"===i.selectionMode||"zeroOrMany"===i.selectionMode||"oneOrMany"===i.selectionMode||"zeroOrOne"===i.selectionMode)&&i._focusedItem&&(a=i._focusedItem);let n;const o=i._indexOf(a);let l=a.top+i.$.itemsContainer.offsetHeight-a.height;for(let a=o;a<t.length;a++)if(t[a].top>=l){n=t[a];break}n||(n=t[t.length-1]),"checkBox"===i.selectionMode||"radioButton"===i.selectionMode||"zeroOrMany"===i.selectionMode||"oneOrMany"===i.selectionMode||"zeroOrOne"===i.selectionMode?i._focus(n):!n.selected&&(!i._keysPressed.Shift&&i.clearSelection(),i.select(n),i._focus(n)),(n.height+n.top>i.$.itemsContainer.scrollTop+i.$.itemsContainer.offsetHeight||n.top<i.$.itemsContainer.scrollTop)&&(i.scrollTop=n.top-i.$.itemsContainer.offsetHeight+n.height)}_pageUpKeyHandler(t){const i=this;if(0===t.length)return;let a=i._items[i.selectedIndexes[i.selectedIndexes.length-1]];("checkBox"===i.selectionMode||"radioButton"===i.selectionMode||"zeroOrMany"===i.selectionMode||"oneOrMany"===i.selectionMode||"zeroOrOne"===i.selectionMode)&&i._focusedItem&&(a=i._focusedItem);const n=a.top-i.$.itemsContainer.offsetHeight,o=i._indexOf(a);let l;for(let a=o;0<a;a--)if(t[a].top<=n){l=t[a];break}l||(l=t[0]),"checkBox"===i.selectionMode||"radioButton"===i.selectionMode||"zeroOrMany"===i.selectionMode||"oneOrMany"===i.selectionMode||"zeroOrOne"===i.selectionMode?i._focus(l):!l.selected&&(!i._keysPressed.Shift&&i.clearSelection(),i.select(l),i._focus(l)),i.scrollTop=l.top;const r=i._indexOf(l);0===r&&(i.scrollTop=0)}clearItems(){const t=this;t.$.itemsInnerContainer.innerHTML="",t.clearSelection(),t._items=[],t.$placeholder.removeClass("smart-hidden")}_resizeHandler(t){const i=this;t.target!==i||i._isUpdatingScrollBars||(i._isUpdatingScrollBars=!0,i._initializeRecyclingItems(),i._refreshLayout(),i._isUpdatingScrollBars=!1)}_indexOf(t){const i=this;if(!t)return-1;let a=i._items.indexOf(t);return-1===a&&(a=i._items.indexOf(i.getItem(t.value))),a}_incrementalSearch(){const t=this,a="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;let n=0,o;switch(t.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":o=t._incrementalSearchQuery.toLowerCase();break;default:o=t._incrementalSearchQuery;}const l=function(i){i.grouped||i.readonly||(a?(0<t.selectedIndexes.length&&t.clearSelection(),t._focus(i),t.select(i)):t._focus(i),(i.height+i.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||i.top<t.scrollTop)&&(t.scrollTop=i.top),0===t._indexOf(i)&&(t.scrollTop=0),t._indexOf(i)===t._items.length-1&&(t.scrollTop=t.scrollHeight))};0!==t._previousEntry.localeCompare(o)&&(t._incrementalSearchItems=t._queryItems(t._incrementalSearchQuery,t.incrementalSearchMode),delete t._itemPosition),t._previousEntry=o;const r=t._incrementalSearchItems.length;if(0!==r){if(1===r)return void l(t._incrementalSearchItems[0]);for(void 0===t._itemPosition?a&&t.clearSelection():t._itemPosition<r-1?n=t._itemPosition:(n=0,a?(t._incrementalSearchItems[t._itemPosition].selected=!1,t.selectedIndexes=[],t.selectedValues=[]):t._incrementalSearchItems[t._itemPosition]._focused=!1),n;n<r;n++){if(t._incrementalSearchItems[n].selected&&a){t._incrementalSearchItems[n].selected=!1,t.selectedIndexes=[],t.selectedValues=[];continue}if(!a&&t._incrementalSearchItems[n]._focused){t._incrementalSearchItems[n]._focused=!1;continue}return l(t._incrementalSearchItems[n]),void(t._itemPosition=n)}}}_selectStartHandler(t){const i=this,a=i.enableShadowDOM?i.shadowRoot.activeElement:document.activeElement;i.$.filterInput===a||i.$.editInput===a||t.preventDefault()}_handleArrowKeys(t){const i=this,a="radioButton"!==i.selectionMode&&"checkBox"!==i.selectionMode&&"zeroOrMany"!==i.selectionMode&&"oneOrMany"!==i.selectionMode&&"zeroOrOne"!==i.selectionMode;if(i.disabled||i.readonly)return;let n;if(i._focusedItem&&!i._keysPressed.Shift)n=i._indexOf(i._focusedItem),i._focusedItem._focused=!1;else if(0!==i.selectedIndexes.length)n=i.selectedIndexes[i.selectedIndexes.length-1];else return;const o=t?i._getPreviousItem(n):i._getNextItem(n);i._focus(o),a&&(i._keysPressed.Shift?i.select(o):i._items[n]!==o&&(i.clearSelection(),i.select(o))),i.ensureVisible(o)}_refreshFilter(){const t=this;return t.filterable?(t.$.filterInput.disabled=!!(t.disabled||t.displayLoadingIndicator),t.$filterInputContainer.removeClass("smart-hidden"),void t.$itemsContainer.addClass("filter")):void(t.$.filterInput.disabled=!0,t.$filterInputContainer.addClass("smart-hidden"),t.$itemsContainer.removeClass("filter"))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_setLoadingIndicatorVisibility(){const t=this;return t.displayLoadingIndicator?void(t.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?t.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):t.$loadingIndicatorContainer.removeClass("smart-hidden")):void(t._areCSSVarsSupported?t.$loadingIndicatorContainer.addClass("smart-hidden"):t.$loadingIndicatorContainer.addClass("smart-visibility-hidden"))}_refreshLayout(){var t=Math.max;const i=this,a=i._items;if(i.__scrollHeight=null,i.__scrollWidth=null,i._height=null,i._scrollView||(i._scrollView=new Smart.Utilities.Scroll(i,i.$.horizontalScrollBar,i.$.verticalScrollBar)),i.$itemsContainer.removeClass("hscroll"),i.$itemsContainer.removeClass("vscroll"),!a||null===a||0===a.length)return i.scrollWidth=0,i.scrollHeight=0,i.$filterInputContainer.removeClass("vscroll"),i.$placeholder.removeClass("smart-hidden"),void(i.isVirtualized&&i._recycle());i.$placeholder.addClass("smart-hidden");const n=2*(parseInt(getComputedStyle(i.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let o=i._scrollWidth-i.$.itemsContainer.offsetWidth-n,l=i._scrollHeight;if(i._refreshHorizontalScrollBarVisibility(o),i._refreshVerticalScrollBarVisibility(l),i.$.itemsInnerContainer.style.width="hidden"===i.horizontalScrollBarVisibility?i.$.itemsContainer.offsetWidth-n:t(i.$.itemsContainer.offsetWidth-n,-n+i.__scrollWidth)+"px",i.computedVerticalScrollBarVisibility)return o=i._scrollWidth-i.$.itemsContainer.offsetWidth-i._scrollView.vScrollBar.offsetWidth,i._refreshHorizontalScrollBarVisibility(o),"hidden"!==i.horizontalScrollBarVisibility&&(i.$.itemsInnerContainer.style.width=t(i.$.itemsContainer.offsetWidth-n,-n+i.__scrollWidth-i._scrollView.vScrollBar.offsetWidth)+"px"),i.computedHorizontalScrollBarVisibility&&("visible"===i.horizontalScrollBarVisibility&&0===i.scrollWidth?"visible"===i.horizontalScrollBarVisibility&&(i.__scrollHeight+=i._scrollView.hScrollBar.offsetHeight):i.__scrollHeight+=i._scrollView.hScrollBar.offsetHeight,i.scrollHeight=i.__scrollHeight),void(i.isVirtualized&&i._recycle());o=i._scrollWidth-i.$.itemsContainer.offsetWidth-n,i._refreshHorizontalScrollBarVisibility(o),i.computedHorizontalScrollBarVisibility&&(i.scrollHeight=i._scrollHeight,i._refreshVerticalScrollBarVisibility(i.scrollHeight)),i.isVirtualized&&i._recycle();const r=/Trident|Edge/.test(navigator.userAgent);!i.isRefreshing&&r&&setTimeout(function(){i.isRefreshing=!0,i._refreshLayout(),i.isRefreshing=!1},50)}_styleChangedHandler(){const t=this;t._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(t){const i=this;i.scrollWidth=t,i.computedHorizontalScrollBarVisibility?(i.scrollLeft=i.$.itemsContainer.scrollLeft,i.$itemsContainer.addClass("hscroll")):i.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(t){const i=this;i.scrollHeight=t,i.computedVerticalScrollBarVisibility?(i.$itemsContainer.addClass("vscroll"),i.$filterInputContainer.addClass("vscroll")):(i.$itemsContainer.removeClass("vscroll"),i.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(t,i){if(null!==i&&i){const a=this;return"content"in document.createElement("template")?(i=document.getElementById(i),null!==i&&"content"in i?i:(a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:t})),void(a[t]=null))):(a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a[t]=null))}}_getItemIndexByPosition(t){const i=this,a=i.filterable&&0<i.$.filterInput.value.length?i._filteredItems:i._items,n=(a=>{let n=0,o=a.length-1;if(0>=t)return 0;const l=a[a.length-1];if(l.top<=t)return a.length-1;for(;!0;){const l=Math.floor((n+o)/2),r=a[l];if(i._isItemInPosition(r,t))return l;r.top<t?n=l+1:r.top>t&&(o=l-1)}})(a);return n}_isItemInPosition(t,i){const a=t.top,n=t.top+t.height;return a<=i&&n>i}get isVirtualized(){const t=this;return t.virtualized&&t.dataSource&&0<t.dataSource.length}_recycle(){const t=this;if(!t._recyclingItems)return;let i=t._height;t._height||(i=t._height=t.$.itemsContainer.offsetHeight);let a=0;const n=t.scrollTop,o=t._getItemIndexByPosition(n),l=t.filterable&&0<t.$.filterInput.value.length?t._filteredItems:t._items,r=l[o];let s=r?r.top:0;if(t.$.itemsInnerContainer.style.left=-t.scrollLeft+"px",t.$.itemsInnerContainer.style.top=-n+s+"px",t.isUpdating++,0<=o)for(let r=o;r<l.length;r++){const o=l[r];if(0!==o.height){if(s+o.height>=n&&s<=n+i){const i=t._recyclingItems[a++];if(!i)break;i.context=document,i.dataItem=o,i.label=o.label,i.value=o.value,i.selected=o.selected,i._focused=o._focused,i.hidden=o.hidden,i.grouped=o.grouped,i.readonly=o.readonly,i.style.height=o.height+"px",t._alternateItem(i),i.title=o.title?o.title:"",i.displayMode=o.grouped?"plain":o.displayMode,0<t.scrollWidth&&(i.style.width=t.$.itemsInnerContainer.offsetWidth+t.scrollWidth+"px"),t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._applyTemplate(i,!1)}else break;s+=o.height}}if(a<t._recyclingItems.length)for(let n=a;n<t._recyclingItems.length;n++){const i=t._recyclingItems[a++],n=i.context;i.context=document,i.hidden=!0,i.context=n}t.isUpdating--}_verticalScrollbarHandler(t){const i=this,a=t.detail.value;return t.stopPropagation(),i.isVirtualized?i._recycle():i.$.itemsContainer.scrollTop=a,i._updateTopVisibleIndex(),t.context.max===t.context.value?void i.$.fireEvent("scrollBottomReached"):void(t.context.min===t.context.value&&i.$.fireEvent("scrollTopReached"))}}),Smart("smart-numeric-text-box",class extends Smart.BaseElement{static get properties(){return{decimalSeparator:{value:".",type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},inputFormat:{value:"integer",allowedValues:["integer","floatingPoint","complex"],type:"string"},hint:{value:"",type:"string"},label:{value:"",type:"string"},max:{value:null,type:"any"},messages:{value:{en:{binary:"BIN",octal:"OCT",decimal:"DEC",hexadecimal:"HEX",integerOnly:"smartNumericTextBox: The property {{property}} can only be set when inputFormat is integer.",noInteger:"smartNumericTextBox: the property {{property}} cannot be set when inputFormat is integer.",significantPrecisionDigits:"smartNumericTextBox: the properties significantDigits and precisionDigits cannot be set at the same time."}},type:"object",extend:!0},min:{value:null,type:"any"},name:{value:"",type:"string"},nullable:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},outputFormatString:{value:null,type:"string?"},placeholder:{value:"",type:"string"},dropDownEnabled:{value:!1,type:"boolean"},precisionDigits:{value:null,type:"number?"},radix:{value:10,allowedValues:[2,8,10,16,"binary","octal","decimal","hexadecimal"],type:"any"},radixDisplay:{value:!1,type:"boolean"},radixDisplayPosition:{value:"left",allowedValues:["left","right"],type:"string"},scientificNotation:{value:!1,type:"boolean"},showUnit:{value:!1,type:"boolean"},significantDigits:{value:null,type:"number?"},spinButtons:{value:!1,type:"boolean"},spinButtonsDelay:{value:75,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},spinButtonsPosition:{value:"right",allowedValues:["left","right"],type:"string"},spinButtonsStep:{value:"1",type:"any"},strictValidation:{value:!1,type:"boolean"},type:{value:"numeric",type:"string",defaultReflectToAttribute:!0,readonly:!0},unit:{value:"kg",type:"string"},value:{value:"0",type:"any?"},wordLength:{value:"int32",allowedValues:["int8","uint8","int16","uint16","int32","uint32","int64","uint64"],type:"string"}}}static get listeners(){return{"input.focus":"_inputFocusHandler","input.blur":"_inputBlurHandler",mouseenter:"_mouseenterMouseleaveHandler",mouseleave:"_mouseenterMouseleaveHandler","input.keydown":"_inputKeydownHandler","input.keyup":"_inputKeyupHandler","input.change":"_inputChangeHandler","input.wheel":"_inputWheelHandler","upButton.click":"_upButtonClickHandler","upButton.mouseenter":"_mouseenterMouseleaveHandler","upButton.mouseleave":"_mouseenterMouseleaveHandler","downButton.click":"_downButtonClickHandler","downButton.mouseenter":"_mouseenterMouseleaveHandler","downButton.mouseleave":"_mouseenterMouseleaveHandler","document.down":"_documentMousedownHandler","document.up":"_documentMouseupHandler","dropDown.click":"_dropDownItemClickHandler","dropDown.mouseover":"_mouseenterMouseleaveHandler","dropDown.mouseout":"_mouseenterMouseleaveHandler","radixDisplayButton.click":"_radixDisplayButtonClickHandler","radixDisplayButton.mouseenter":"_mouseenterMouseleaveHandler","radixDisplayButton.mouseleave":"_mouseenterMouseleaveHandler"}}static get requires(){return window.NIComplex?{"Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js"}:{"Smart.Utilities.Complex":"smart.complex.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js"}}template(){return"<div id=\"container\" class=\"smart-container\"><span id=\"label\" inner-h-t-m-l=\"[[label]]\" class=\"smart-label\"></span><div id=\"radixDisplayButton\" class=\"smart-unselectable smart-input-addon smart-numeric-text-box-component smart-numeric-text-box-radix-display\"></div><input id=\"input\" type=\"text\" spellcheck=\"false\" class=\"smart-input smart-numeric-text-box-component\" placeholder=\"[[placeholder]]\" readonly=\"[[readonly]]\" disabled=\"[[disabled]]\" name=\"[[name]]\" /><div id=\"unitDisplay\" class=\"smart-unselectable smart-input-addon smart-numeric-text-box-component smart-numeric-text-box-unit-display\"></div><div id=\"spinButtonsContainer\" class=\"smart-input-addon smart-numeric-text-box-component smart-spin-buttons-container\"><smart-repeat-button initial-delay=\"[[spinButtonsInitialDelay]]\" delay=\"[[spinButtonsDelay]]\" animation=\"[[animation]]\" unfocusable id=\"upButton\" class=\"smart-spin-button\"><div class=\"smart-arrow smart-arrow-up\"></div></smart-repeat-button><smart-repeat-button initial-delay=\"[[spinButtonsInitialDelay]]\" delay=\"[[spinButtonsDelay]]\" animation=\"[[animation]]\" unfocusable id=\"downButton\" class=\"smart-spin-button\"><div class=\"smart-arrow smart-arrow-down\"></div></smart-repeat-button></div><ul id=\"dropDown\" class=\"smart-visibility-hidden smart-drop-down\"><li id=\"dropDownItem2\" class=\"smart-list-item\" data-value=\"2\"></li><li id=\"dropDownItem8\" class=\"smart-list-item\" data-value=\"8\"></li><li id=\"dropDownItem10\" class=\"smart-list-item\" data-value=\"10\"></li><li id=\"dropDownItem16\" class=\"smart-list-item\" data-value=\"16\"></li></ul><span id=\"hint\" class =\"smart-hint\"  inner-h-t-m-l=\"[[hint]]\"></span></div>"}ready(){super.ready();const t=this;t._numericProcessor=new Smart.Utilities.NumericProcessor(t,"inputFormat"),t._numberRenderer=new Smart.Utilities.NumberRenderer,t._numberRenderer.localizationObject.decimalseparator=t.decimalSeparator,t._radixPrefixes={10:"d",2:"b",8:"o",16:"x"},t._regex={2:new RegExp(/^[0-1]+$/),8:new RegExp(/^[0-7]+$/),10:new RegExp(/^[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?$/),16:new RegExp(/^[0-9a-f]+$/i)},t._regexSpecial={nan:new RegExp(/^(nan)$/i),inf:new RegExp(/^((-?inf(inity)?)|([+\-]?∞))$/i),nonNumericValue:new RegExp(/^$|(^((nan)|((-?inf(inity)?)|([+\-]?∞))|(null))$)/i),exaValue:new RegExp(/^[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[E][+\-]\d*)?i$/)},t._initialDropDownOptionsSet=!1,"left"===t.spinButtonsPosition&&t.$.container.insertBefore(t.$.spinButtonsContainer,t.$.label.nextElementSibling),"right"===t.radixDisplayPosition&&t.$.container.insertBefore(t.$.radixDisplayButton,t.$.unitDisplay.nextElementSibling),t._setInitialComponentDisplay(),t._initialAdjustments(),t._refreshShape(),t._initialized=!0}_refreshShape(){const t=this,i=t.querySelectorAll(".smart-numeric-text-box-component:not(.smart-hidden)");0<i.length&&(i[0].classList.add("smart-numeric-text-box-component-border-left"),i[i.length-1].classList.add("smart-numeric-text-box-component-border-right"))}val(t,i){const a=this,n=null!==t&&"object"==typeof t&&0===Object.keys(t).length;if(void 0!==t&&!1==n){const n=a.value;if((""===t||null===t)&&null===n)return null;if(null===t)return a._validate(!1,null),void(a._programmaticValueIsSet=!0);if(t=t.toString(),t.toUpperCase()!==n.toString().toUpperCase())void 0===i?a._validate(!1,t):a._setValue(t),a._programmaticValueIsSet=!0;else return t}else return a.value}focus(){this.$.input.focus()}_updateSpinButtonsStepObject(){const t=this;t._spinButtonsStepObject=t._numericProcessor.createDescriptor(t.spinButtonsStep,!0)}_setInitialComponentDisplay(){const t=this;!1===t.spinButtons&&t.$spinButtonsContainer.addClass("smart-hidden"),!1===t.radixDisplay&&t.$radixDisplayButton.addClass("smart-hidden"),!1===t.showUnit&&t.$unitDisplay.addClass("smart-hidden")}_initialAdjustments(){const t=this;t._radixNumber=t._getRadix(t.radix),t._wordLengthNumber=t._numericProcessor.getWordLength(t.wordLength),t._validatePropertyCompatibility(),t._numericProcessor.validateMinMax(!0,!0),t._updateSpinButtonsStepObject(),t._validate(!0),t._programmaticValueIsSet=!0,t._cachedInputValue=t.$.input.value,t._editableValue===void 0&&(t._editableValue=t._cachedInputValue),t.$.radixDisplayButton.innerHTML=t._radixPrefixes[t._radixNumber],t.$.unitDisplay.innerHTML=t.unit,t.disabled&&(t.$.upButton.disabled=!0,t.$.downButton.disabled=!0),t.opened&&(t.dropDownEnabled&&!t.disabled&&null!==t.value?t._openRadix():t.opened=!1),t._setFocusable()}_validatePropertyCompatibility(){const t=this;"integer"===t.inputFormat?null!==t.precisionDigits&&t.error(t.localize("noInteger",{property:"precisionDigits"})):(10!==t._radixNumber&&t.error(t.localize("integerOnly",{property:"radix"})),t.radixDisplay&&t.error(t.localize("integerOnly",{property:"radixDisplay"})),t.dropDownEnabled&&t.error(t.localize("integerOnly",{property:"dropDownEnabled"})),"int32"!==t.wordLength&&t.error(t.localize("integerOnly",{property:"wordLength"}))),null===t.significantDigits&&null===t.precisionDigits?t.significantDigits=8:null!==t.significantDigits&&null!==t.precisionDigits&&t.error(t.localize("significantPrecisionDigits"))}_validate(t,i){const a=this;let n;if(t)n=a.value,void 0===n&&(a.nullable?n=null:n="0");else if(void 0!==i&&(null!==i||a.nullable))n=i;else if(n=a.$.input.value,n===a.value&&!0!==a._programmaticValueIsSet)return void(a.$.input.value=a._cachedInputValue);if(a.nullable&&(null===n||""===n))return a.value=null,a._number=null,a.$.input.value="",a._cachedInputValue="",a._editableValue="",void a._disableComponents();const o=a._numericProcessor.prepareForValidation(t,i,n);if(void 0===o)return void a._disableComponents();const l=a._numericProcessor.createDescriptor(o.value,!0,!0,!t&&i===void 0||a.strictValidation,t||i!==void 0,o.enteredComplexNumber);if(t){a._number=l;let t=a._renderValue(l);a.value=l.toString(),a.$.input.value=t}else a._updateValue(l);a._programmaticValueIsSet=!1,a._disableComponents()}_handleNonNumericValue(t,i,a){const n=this;if("integer"!==n.inputFormat){if(n._regexSpecial.nan.test(a))return void n._handleNaN(t);if(n._regexSpecial.inf.test(a))return void n._handleInfinity(t,i,a)}if(t){let t=n._numericProcessor.createDescriptor(0);n._number=n._validateRange(t);const i=n._renderValue(n._number);n.value=n._number.toString(),n.$.input.value=i}else if(void 0===i)n.$.input.value=n._cachedInputValue;else{const t=n._number.toString();n.value!==t&&(n.value=t)}}_handleNaN(t){const i=this;if(i.$.input.value="NaN",t)i.value=NaN,i._number=NaN;else{const t=i.value;(null===t||"NaN"!==t.toString())&&(i.value=NaN,i._number=NaN,i._cachedInputValue="NaN",i._editableValue="NaN",i._triggerChangeEvent&&i.$.fireEvent("change",{value:NaN,oldValue:t,radix:i._radixNumber}))}}_handleInfinity(t,i,a){const n=this;let o,l;if("-"===a.charAt(0)?(o="\u221E"===a.charAt(1)?"-\u221E":"-Inf",l=-Infinity):(o=-1===a.indexOf("\u221E")?"Inf":"\u221E",l=1/0),(l!==-Infinity||n.min!==-Infinity)&&(l!==1/0||n.max!==1/0)&&void 0===i)l===-Infinity?n._validate(!1,n.min):n._validate(!1,n.max);else if(t)n.value=l,n._number=l,n.$.input.value=o;else{const t=n.value;a!==o&&(n.$.input.value=o),t!==l&&(n.value=l,n._number=l,n._cachedInputValue=o,n._editableValue=o,n._triggerChangeEvent&&n.$.fireEvent("change",{value:l,oldValue:t,radix:n._radixNumber}))}}_validateRange(t){const i=this;return t=i._numericProcessor.validate(t,i._minObject,i._maxObject),t}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this,o=n.$.input;if(a!=i)switch(t){case"disabled":n._setFocusable(),!0===a?(n.$.upButton.disabled=!0,n.$.downButton.disabled=!0):n._disableComponents();break;case"unfocusable":n._setFocusable();break;case"enableMouseWheelAction":case"placeholder":case"readonly":case"spinButtonsDelay":case"spinButtonsInitialDelay":break;case"value":{if(""===a&&null===i)return;if(null===a||""===a||null===i)return n._validate(!1,a),void(n._programmaticValueIsSet=!0);const t=a.toString(),o=i.toString();o!==t&&(o.toUpperCase()===t.toUpperCase()&&(n.value=i),n._validate(!1,t),n._programmaticValueIsSet=!0);break}case"radix":"integer"===n.inputFormat?n._changeRadix(a):n.error(n.localize("integerOnly",{property:"radix"}));break;case"min":case"max":{if(null!==a&&(n[`_${t}IsNull`]=!1),n._numericProcessor.validateMinMax("min"===t,"max"===t),!1===n._regexSpecial.nonNumericValue.test(n.value)){const t=n._numericProcessor.createDescriptor(n._number),i=n._validateRange(t);!0===n._numericProcessor.compare(n.value,i)&&(n._programmaticValueIsSet=!0)}break}case"opened":a?n.dropDownEnabled&&!n.disabled&&null!==n.value?n._openRadix():n.opened=!1:n._closeRadix();break;case"outputFormatString":a?(n._cachedInputValue=n._numberRenderer.formatNumber(n._number,a),n.$.input.value=n._cachedInputValue):(n._cachedInputValue=n._editableValue,n.$.input.value=n._editableValue);break;case"dropDownEnabled":a?("integer"!==n.inputFormat&&n.error(n.localize("integerOnly",{property:"dropDownEnabled"})),!0===n._initialDropDownOptionsSet&&n._setDropDownOptions()):n.opened&&n._closeRadix();break;case"spinButtons":a?n.$spinButtonsContainer.removeClass("smart-hidden"):n.$spinButtonsContainer.addClass("smart-hidden"),n._refreshShape();break;case"spinButtonsStep":n._updateSpinButtonsStepObject();break;case"significantDigits":case"precisionDigits":{if("precisionDigits"===t&&"integer"===n.inputFormat&&n.error(n.localize("noInteger",{property:t})),"significantDigits"===t&&null!==n.precisionDigits?n.precisionDigits=null:"precisionDigits"==t&&null!==n.significantDigits&&(n.significantDigits=null),!1===n._regexSpecial.nonNumericValue.test(n.value)){const t=n._renderValue(n._number);o.value=t}break}case"decimalSeparator":{n._numberRenderer.localizationObject.decimalseparator=n.decimalSeparator;const t=n._discardDecimalSeparator(o.value,i),a=n._applyDecimalSeparator(t),l=n._applyDecimalSeparator(n._discardDecimalSeparator(n._editableValue,i));o.value=a,n._editableValue=l;break}case"spinButtonsPosition":"left"===a?n.$.container.insertBefore(n.$.spinButtonsContainer,n.$.label.nextElementSibling):n.$.container.insertBefore(n.$.spinButtonsContainer,n.$.dropDown);break;case"wordLength":if(n._wordLengthNumber=n._numericProcessor.getWordLength(a),"integer"===n.inputFormat&&(n._numericProcessor.validateMinMax(!0,!0),!1===n._regexSpecial.nonNumericValue.test(n.value))){let t=n._validateRange(new Smart.Utilities.BigNumber(n._number));n._updateValue(t)}break;case"radixDisplay":a?("integer"!==n.inputFormat&&n.error(n.localize("integerOnly",{property:"radixDisplay"})),n.$radixDisplayButton.removeClass("smart-hidden")):n.$radixDisplayButton.addClass("smart-hidden"),n._refreshShape();break;case"radixDisplayPosition":"left"===a?n.$.container.insertBefore(n.$.radixDisplayButton,n.$.input):n.$.container.insertBefore(n.$.radixDisplayButton,n.$.unitDisplay.nextElementSibling),n._refreshShape();break;case"inputFormat":n._changeInputFormat(i,a);break;case"showUnit":a?n.$unitDisplay.removeClass("smart-hidden"):n.$unitDisplay.addClass("smart-hidden"),n._refreshShape();break;case"unit":n.$.unitDisplay.innerHTML=a;break;case"scientificNotation":{if(!1===n._regexSpecial.nonNumericValue.test(n.value)){const t=n._renderValue(n._number);o.value=t}break}case"locale":case"messages":n._initialDropDownOptionsSet=!1;break;case"nullable":!0===i&&null===n.value&&n._validate(!1,"0");}else"string"!=typeof a&&"string"==typeof i&&(n[t]=i);n._cachedInputValue=o.value}_changeInputFormat(t,i){const a=this;return a._numericProcessor=new Smart.Utilities.NumericProcessor(a,"inputFormat"),"complex"===t?void a._changeFromComplexInputFormat(i):void("integer"===i&&"floatingPoint"==t&&a._changeFromFloatingPointToIntegerInputFormat(),"floatingPoint"===i&&"integer"==t&&a._changeFromIntegerToFloatingPointInputFormat(),"complex"===i&&a._changeToComplexInputFormat(t),a._updateSpinButtonsStepObject(),null!==a.value&&(a._inputFormatChangedFlag=!0,a._validate(void 0,a._number.toString()),a._inputFormatChangedFlag=!1))}_changeFromComplexInputFormat(t){const i=this;i.spinButtonsStep=i._spinButtonsStepObject.realPart,i._updateSpinButtonsStepObject(),"integer"===t?(i.min=i.min===-Infinity?null:i._minObject.realPart,i.max=i.max===1/0?null:i._maxObject.realPart):(i.min!==-Infinity&&(i.min=i._minObject.realPart),i.max!==1/0&&(i.max=i._maxObject.realPart)),i._numericProcessor.validateMinMax(!0,!0),null!==i.value&&(i._inputFormatChangedFlag=!0,i._validate(void 0,i._number.realPart.toString()),i._inputFormatChangedFlag=!1)}_changeFromFloatingPointToIntegerInputFormat(){const t=this;t.min===-Infinity&&(t.min=null),t.max===1/0&&(t.max=null),t._numericProcessor.validateMinMax(!0,!0)}_changeFromIntegerToFloatingPointInputFormat(){const t=this;t.radixDisplay&&(t.radixDisplay=!1,t.$radixDisplayButton.addClass("smart-hidden")),10!==t._radixNumber&&(t.radix=10,t._radixNumber=10),t._minIsNull?(t.min=-Infinity,t._minObject=-Infinity):t._minObject=parseFloat(t._minObject.toString()),t._maxIsNull?(t.max=1/0,t._maxObject=1/0):t._maxObject=parseFloat(t._maxObject.toString()),t.dropDownEnabled&&(t.dropDownEnabled=!1)}_changeToComplexInputFormat(t){const i=this;"integer"===t&&(i.radixDisplay&&(i.radixDisplay=!1,i.$radixDisplayButton.addClass("smart-hidden")),i._minIsNull&&(i.min=null),i._maxIsNull&&(i.max=null),i.dropDownEnabled&&(i.dropDownEnabled=!1)),i._numericProcessor.validateMinMax(i.min!==-Infinity,i.max!==1/0)}_updateValue(t){const i=this,a=i.$.input.value,n=t.toString(i._radixNumber,i._wordLengthNumber);if(a!==n||a!==i._cachedInputValue){const a=i._renderValue(t),o=i.value,l=i._regexSpecial.nonNumericValue.test(n);if(i.$.input.value=a,i._cachedInputValue=a,i._inputFormatChangedFlag||l&&a!==o||!1===l&&i._numericProcessor.compare(t,i._number)){i._number=i._numericProcessor.createDescriptor(t);const a=i._number.toString();i.value=a,i._setDropDownOptions(),i._triggerChangeEvent&&i.$.fireEvent("change",{value:a,oldValue:o,radix:i._radixNumber})}}else i.value=i._number.toString()}_setValue(t){const i=this;i.value=t,i.$.input.value=t,i._number=i._numericProcessor.createDescriptor(t,!0),i._setDropDownOptions()}_changeRadix(t){const i=this,a=i._getRadix(t),n=i.radix;if(a===i._radixNumber)return;i.radix=t,i._radixNumber=a;const o=i.$.input,l=o.value;let r,s;null===i.value?s="":(r=i._number.toString(a,i._wordLengthNumber),s=i._renderValue(r)),o.value=s,i._cachedInputValue=s,i.$.radixDisplayButton.innerHTML=i._radixPrefixes[a],i.$.fireEvent("radixChange",{radix:t,oldRadix:n,displayedValue:s,oldDisplayedValue:l})}_openRadix(){const t=this;!1===t._initialDropDownOptionsSet&&(t._setDropDownOptions(),t._initialDropDownOptionsSet=!0),t.$radixDisplayButton.addClass("smart-numeric-text-box-pressed-component"),t.$dropDown.removeClass("smart-visibility-hidden"),t.opened=!0,t.$.fireEvent("open",{dropDown:t.$.dropDown})}_closeRadix(){const t=this;t.$radixDisplayButton.removeClass("smart-numeric-text-box-pressed-component"),t.$dropDown.addClass("smart-visibility-hidden"),t.opened=!1,t.$.fireEvent("close",{dropDown:t.$.dropDown})}_isLeftButtonPressed(t){const i=0===t.buttons||1===t.which;return 1===t.detail.buttons||i}_isIncrementOrDecrementAllowed(){const t=this;return!t.disabled&&!t.readonly&&!1===t._regexSpecial.nonNumericValue.test(t.$.input.value)}_upButtonClickHandler(t){const i=this,a=i._isLeftButtonPressed(t);a&&i._isIncrementOrDecrementAllowed()&&(!i._up&&i.$upButton.addClass("smart-numeric-text-box-pressed-component"),i._incrementOrDecrement("add"))}_downButtonClickHandler(t){const i=this,a=i._isLeftButtonPressed(t);a&&i._isIncrementOrDecrementAllowed()&&(!i._up&&i.$downButton.addClass("smart-numeric-text-box-pressed-component"),i._incrementOrDecrement("subtract"))}_documentMousedownHandler(t){const i=this;i._up=!1,i.opened&&!i.contains(t.originalEvent.target)&&i._closeRadix()}_documentMouseupHandler(){const t=this;t._up=!0,t.$upButton.removeClass("smart-numeric-text-box-pressed-component"),t.$downButton.removeClass("smart-numeric-text-box-pressed-component")}_radixDisplayButtonClickHandler(){const t=this;t.dropDownEnabled&&!t.disabled&&null!==t.value&&(t.opened?t._closeRadix():t._openRadix())}_dropDownItemClickHandler(t){if(t.target.$.hasClass("smart-list-item")){const i=this;let a=t.target.getAttribute("data-value");i._changeRadix(parseInt(a,10)),i._closeRadix()}}_mouseenterMouseleaveHandler(t){const i=this;t.target===i.$.dropDown||i.disabled||i.readonly||("mouseenter"===t.type?t.target.setAttribute("hover",""):t.target.removeAttribute("hover"))}_inputKeydownHandler(t){const i=this,a=t.charCode?t.charCode:t.which;40===a&&i._isIncrementOrDecrementAllowed()?i._incrementOrDecrement("subtract"):38===a&&i._isIncrementOrDecrementAllowed()&&i._incrementOrDecrement("add")}_inputKeyupHandler(t){const i=this;if(13===t.keyCode)i._suppressBlurEvent=!0,i.$.input.value!==i._cachedInputValue&&(i._triggerChangeEvent=!0,i._validate(),i._triggerChangeEvent=!1,i.$.input.blur());else if(27===t.keyCode)i.$.input.value=i._editableValue;else{const t=i.$.input.value;""!==t&&i._regex[i._radixNumber].test(t)?(i.$.upButton.disabled=!1,i.$.downButton.disabled=!1):""===t&&(i.$.upButton.disabled=!0,i.$.downButton.disabled=!0)}t.stopPropagation(),t.preventDefault()}_inputBlurHandler(){const t=this;!0===t._suppressBlurEvent?(t._suppressBlurEvent=!1,t._formattedValue&&(t._cachedInputValue=t._formattedValue,t.$.input.value=t._formattedValue,delete t._formattedValue)):t.$.input.value===t._editableValue?t.$.input.value=t._cachedInputValue:(t._triggerChangeEvent=!0,t._validate(),t._triggerChangeEvent=!1),t.radixDisplay&&t.$.radixDisplayButton.removeAttribute("focus"),t.opened&&t._closeRadix(),t.spinButtons&&t.$.spinButtonsContainer.removeAttribute("focus"),t.showUnit&&t.$.unitDisplay.removeAttribute("focus"),t.removeAttribute("focus")}_inputFocusHandler(){const t=this;t.spinButtons&&t.$.spinButtonsContainer.setAttribute("focus",""),t.radixDisplay&&t.$.radixDisplayButton.setAttribute("focus",""),t.showUnit&&t.$.unitDisplay.setAttribute("focus",""),t.opened&&t._closeRadix(),t.setAttribute("focus",""),t.outputFormatString&&(t.$.input.value=t._editableValue)}_inputChangeHandler(t){t.stopPropagation(),t.preventDefault()}_inputWheelHandler(t){const i=this;i.$.input===document.activeElement&&i.enableMouseWheelAction&&i._isIncrementOrDecrementAllowed()&&(t.stopPropagation(),t.preventDefault(),0<t.wheelDelta?i._incrementOrDecrement("add"):i._incrementOrDecrement("subtract"))}_getRadix(t){switch(t.toString()){case"10":case"decimal":return 10;case"2":case"binary":return 2;case"8":case"octal":return 8;case"16":case"hexadecimal":return 16;}}_setDropDownOptions(){const t=this;if(!1!==t.dropDownEnabled){const i=t._wordLengthNumber;t.$.dropDownItem2.innerHTML=`${t._number.toString(2,i)} (${t.localize("binary")})`,t.$.dropDownItem8.innerHTML=`${t._number.toString(8,i)} (${t.localize("octal")})`,t.$.dropDownItem10.innerHTML=`${t._renderValue(t._number.toString(10,i),!0)} (${t.localize("decimal")})`,t.$.dropDownItem16.innerHTML=`${t._number.toString(16,i)} (${t.localize("hexadecimal")})`}}_incrementOrDecrement(t){const i=this;let a=i._cachedInputValue;if(i.$.input===document.activeElement&&(a=i._editableValue,i._suppressBlurEvent=!0),!((i.$.input.value!==a||i._programmaticValueIsSet)&&(i._triggerChangeEvent=!0,i._validate(),i._triggerChangeEvent=!1,!1===i._isIncrementOrDecrementAllowed()))){const a=i._numericProcessor.incrementDecrement(i._number,t,i._spinButtonsStepObject),n=i._validateRange(a);i._triggerChangeEvent=!0,i._updateValue(n),i._triggerChangeEvent=!1}}_toBigNumberDecimal(t,i){const a=this;let n;return 10===i?n=new Smart.Utilities.BigNumber(t):a._unsigned||!1===a._isNegative(t,i)?64>a._wordLengthNumber?(n=parseInt(t,i),n=new Smart.Utilities.BigNumber(n)):n=a._getBigNumberFrom64BitBinOctHex(t,i):(n=a._getNegativeDecimal(t,i),n=new Smart.Utilities.BigNumber(n)),n}_isNegative(t,i){const a=this,n=t.length,o=t.charAt(0).toLowerCase();if(2===i)return n===a._wordLengthNumber&&"1"===o;if(8===i)switch(a._wordLengthNumber){case 8:return 3===n&&("2"===o||"3"===o);case 16:return 5===n&&"1"===o;case 32:return 11===n&&("2"===o||"3"===o);case 64:return 22===n&&"1"===o;}else return n===a._wordLengthNumber/4&&-1!==["8","9","a","b","c","d","e","f"].indexOf(o)}_getBigNumberFrom64BitBinOctHex(t,a){let n=new Smart.Utilities.BigNumber(0);for(let o=t.length-1,i;0<=o;o--)i=new Smart.Utilities.BigNumber(parseInt(t.charAt(o),a)),n=n.add(i.multiply(new Smart.Utilities.BigNumber(a).pow(t.length-1-o)));return n}_getNegativeDecimal(t,i){const a=this;let n=t;if(8===i){let a=[];for(let n=0,i;n<t.length;n++){for(i=parseInt(t.charAt(n),8).toString(2);3!==i.length;)i=`0${i}`;a.push(i)}for(n=a.join("");"0"===n.charAt(0);)n=n.slice(1)}else if(16===i){let i=[];for(let a=0,n;a<t.length;a++){for(n=parseInt(t.charAt(a),16).toString(2);4!==n.length;)n=`0${n}`;i.push(n)}n=i.join("")}let o=n.replace(/0/g,"a");return o=o.replace(/1/g,"b"),o=o.replace(/a/g,"1"),o=o.replace(/b/g,"0"),64>this._wordLengthNumber?o=-1*(parseInt(o,2)+1):(o=a._getBigNumberFrom64BitBinOctHex(o,i),o=o.add(1).negate()),o}_discardDecimalSeparator(t,i){const a=this;if(void 0===i&&(i=a.decimalSeparator),"."!==i&&t!==1/0&&t!==-Infinity){let a=new RegExp(i,"g");return t.replace(a,".")}return t}_applyDecimalSeparator(t){const i=this;return"string"!=typeof t&&(t=t.toString()),"."!==i.decimalSeparator&&(t=t.replace(/\./g,i.decimalSeparator)),t}_renderValue(t,i){const a=this,n=t,o=10===a._radixNumber||!0===i;if(t=a._numericProcessor.render(t,o),"."!==a.decimalSeparator&&o&&(t=a._applyDecimalSeparator(t)),!0!==i&&(a._editableValue=t,a.outputFormatString&&10===a._radixNumber)){const t=a._numberRenderer.formatNumber(n,a.outputFormatString);if(document.activeElement!==a.$.input)return t;a._formattedValue=t}return t}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void(t.$.input.tabIndex=-1):void t.$.input.removeAttribute("tabindex")}_disableComponents(){const t=this;if(!t.disabled){const i=t.value;null===i||"NaN"===i.toString()||Math.abs(i)===1/0?(t.$.upButton.disabled=!0,t.$.downButton.disabled=!0):(t.$.upButton.disabled=!1,t.$.downButton.disabled=!1)}}}),Smart("smart-pager",class extends Smart.BaseElement{static get properties(){return{autoEllipsis:{value:"none",type:"string",allowedValues:["none","before","after","both"]},messages:{value:{en:{firstButton:"First",lastButton:"Last",previousButton:"Previous",nextButton:"Next",navigateToLabel:"Go to:",pageSizeLabel:"Show:",navigateToInputPlaceholder:"",ellipsis:"...",summaryString:"of",summaryPrefix:"of",summarySuffix:""}},type:"object",extend:!0},navigationButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},navigationInputPosition:{value:"far",allowedValues:["near","far"],type:"string"},pageIndex:{value:0,type:"number"},pageIndexSelectors:{value:0,type:"any"},pagesCount:{value:100,type:"number"},pageSize:{value:10,type:"number"},pageSizeSelectorPosition:{value:"far",allowedValues:["near","far"],type:"string"},pageSizeSelectorDataSource:{value:[10,25,50],type:"array"},showPrevNextNavigationButtons:{value:!1,type:"boolean"},showFirstLastNavigationButtons:{value:!1,type:"boolean"},showNavigationButtonLabels:{value:!1,type:"boolean"},showNavigationInput:{value:!1,type:"boolean"},showSummary:{value:!1,type:"boolean"},showPageSizeSelector:{value:!1,type:"boolean"},showPageIndexSelectors:{value:!1,type:"boolean"},summaryPosition:{value:"far",allowedValues:["near","far"],type:"string"}}}static get listeners(){return{click:"_navigationButtonsClickHandler","nextEllipsisButton.click":"_nextEllipsisButtonClickHandler","previousEllipsisButton.click":"_previousEllipsisButtonClickHandler",down:"_navigationButtonsDownHandler","navigateToInput.change":"_navigateToInputChangeHandler","nextButton.mouseenter":"_updateInBoundsFlag","nextButton.mouseleave":"_updateInBoundsFlag","pageIndexSelectorsContainer.click":"_pageIndexSelectorsContainerClickHandler","pageSizeSelector.change":"_pageSizeSelectorChangeHandler","previousButton.mouseenter":"_updateInBoundsFlag","previousButton.mouseleave":"_updateInBoundsFlag",keydown:"_keyDownHandler",resize:"_resizeHandler","document.up":"_stopRepeat"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.DropDownList":"smart.dropdownlist.js"}}template(){return`<div id="container">
                    <div id="nearButtonsContainer" class="smart-pager-near-buttons-container">
                        <div id="firstButton" class="smart-first-button smart-pager-button smart-unselectable"></div>
                        <div id="previousButton" class="smart-previous-page-button smart-pager-button smart-unselectable"></div>
                    </div>
                    <div id="middleButtonsContainer" class="smart-pager-middle-buttons-container">
                           <span id="previousEllipsisButton" class="smart-previous-ellipsis-button smart-pager-page-index-selector"></span>
                           <div id="pageIndexSelectorsContainer" tabindex="0" class="smart-pager-page-index-selectors-container"></div>
                           <span id="nextEllipsisButton" class="smart-next-ellipsis-button smart-pager-page-index-selector"></span>
                    </div>
                    <div id="farButtonsContainer" class="smart-pager-far-buttons-container">
                        <div id="nextButton" class="smart-next-page-button smart-pager-button smart-unselectable"></div>
                        <div id="lastButton" class="smart-last-button smart-pager-button smart-unselectable"></div>
                    </div>
                    <div id="pagerInputAndLabelContainer" class="smart-pager-input-and-label-container">
                        <span id="navigateToLabel" class="smart-pager-label"></span>
                        <input type="text" id="navigateToInput" class="smart-pager-input smart-input" />
                   </div>
                 <div id="pagerSizeSelectorAndLabelContainer" class="smart-pager-size-selector-and-label-container">
                        <span id="pageSizeLabel" class="smart-pager-label"></span>
                        <smart-drop-down-list id="pageSizeSelector" class="smart-page-size-selector"
                                data-source="[[pageSizeSelectorDataSource]]"
                                drop-down-height="auto"
                                selection-mode="one"
                                selected-indexes=[0]
                                disabled="[[disabled]]">
                        </smart-drop-down-list>
                    </div>
                  <span id="pagerSummaryContainer" class="smart-pager-summary-container smart-pager-label"></span>
                </div>`}ready(){super.ready();const t=this;t._render()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"navigationButtonsPosition":return void n._renderButtons();case"navigationInputPosition":case"pageSizeSelectorPosition":case"summaryPosition":return void n._renderSettings();}n._render()}next(){const t=this;t.navigateTo(t.pageIndex+1)}prev(){const t=this;t.navigateTo(t.pageIndex-1)}beginUpdate(){const t=this;t._updating=!0}endUpdate(){const t=this;t._updating=!1,t._render()}_render(){const t=this;t._updating||(t.$.navigateToInput.value=(1+t.pageIndex).toString(),t._renderButtons(),t._renderPageIndexSelectors(),t._renderSettings(),t._renderVisibility(),t._localize())}_resizeHandler(){const t=this;t._renderVisibility()}_renderVisibility(){const t=this,a=t.offsetWidth-20;t.showSummary?t.$pagerSummaryContainer.removeClass("smart-hidden"):t.$pagerSummaryContainer.addClass("smart-hidden"),t.showPageIndexSelectors?t.$middleButtonsContainer.removeClass("smart-hidden"):t.$middleButtonsContainer.addClass("smart-hidden"),t.showNavigationInput?(t.$navigateToLabel.removeClass("smart-hidden"),t.$navigateToInput.removeClass("smart-hidden")):(t.$navigateToLabel.addClass("smart-hidden"),t.$navigateToInput.addClass("smart-hidden")),t.showPageSizeSelector?(t.$pageSizeLabel.removeClass("smart-hidden"),t.$pageSizeSelector.removeClass("smart-hidden")):(t.$pageSizeLabel.addClass("smart-hidden"),t.$pageSizeSelector.addClass("smart-hidden")),t.showFirstLastNavigationButtons?(t.$firstButton.removeClass("smart-hidden"),t.$lastButton.removeClass("smart-hidden")):(t.$firstButton.addClass("smart-hidden"),t.$lastButton.addClass("smart-hidden")),t.showPrevNextNavigationButtons?(t.$previousButton.removeClass("smart-hidden"),t.$nextButton.removeClass("smart-hidden")):(t.$previousButton.addClass("smart-hidden"),t.$nextButton.addClass("smart-hidden")),t.$previousEllipsisButton.addClass("smart-hidden"),t.$nextEllipsisButton.addClass("smart-hidden"),"after"!==t.autoEllipsis&&"none"!==t.autoEllipsis&&t.pageIndex>=t._pageIndexSelectorsCount&&t.$previousEllipsisButton.removeClass("smart-hidden"),"before"!==t.autoEllipsis&&"none"!==t.autoEllipsis&&t.pageIndex<t.pagesCount-t._pageIndexSelectorsCount&&t.$nextEllipsisButton.removeClass("smart-hidden");for(let a=0;a<t._pageIndexSelectorsCount&&!!t.$.pageIndexSelectorsContainer.children[a];a++)t.$.pageIndexSelectorsContainer.children[a].classList.remove("smart-hidden");const i=t.$.pagerSummaryContainer.offsetWidth?Math.max(100,t.$.pagerSummaryContainer.offsetWidth):0;let n=t.$.nearButtonsContainer.offsetWidth+t.$.middleButtonsContainer.offsetWidth+t.$.farButtonsContainer.offsetWidth+i+t.$.pagerInputAndLabelContainer.offsetWidth+t.$.pagerSizeSelectorAndLabelContainer.offsetWidth;if(0<n&&n>a&&(n-=t.$.pagerSummaryContainer.offsetWidth,t.$pagerSummaryContainer.addClass("smart-hidden"),n>a&&(n-=t.$.navigateToLabel.offsetWidth,n-=t.$.navigateToInput.offsetWidth,t.$navigateToLabel.addClass("smart-hidden"),t.$navigateToInput.addClass("smart-hidden"),n>a))){if(n-=t.$.pageSizeLabel.offsetWidth,n-=t.$.pageSizeSelector.offsetWidth,t.$pageSizeLabel.addClass("smart-hidden"),t.$pageSizeSelector.addClass("smart-hidden"),n>a){t.$previousEllipsisButton.addClass("smart-hidden"),t.$nextEllipsisButton.addClass("smart-hidden"),n-=t.$.previousEllipsisButton.offsetWidth,n-=t.$.nextEllipsisButton.offsetWidth;for(let o=t._pageIndexSelectorsCount-1;0<=o;o--){const i=t.$.pageIndexSelectorsContainer.children[o];if(n<a||!i)break;n-=i.offsetWidth,i.classList.add("smart-hidden")}}n>a&&t.showFirstLastNavigationButtons&&(t.$firstButton.addClass("smart-hidden"),t.$lastButton.addClass("smart-hidden"))}}_renderSettings(){const t=this,i=t.pageIndex*t.pageSize,a=(t.pageIndex+1)*t.pageSize,n=t.pagesCount*t.pageSize;t.$pagerSummaryContainer.removeClass("near"),t.$pagerSizeSelectorAndLabelContainer.removeClass("near"),t.$pagerInputAndLabelContainer.removeClass("near"),"near"===t.summaryPosition&&t.$pagerSummaryContainer.addClass("near"),"near"===t.pageSizeSelectorPosition&&t.$pagerSizeSelectorAndLabelContainer.addClass("near"),"near"===t.navigationInputPosition&&t.$pagerInputAndLabelContainer.addClass("near"),t.$.pagerSummaryContainer.innerHTML="<span class=\"smart-summary-start\">"+(1+i)+"</span> <span class=\"smart-summary-hyphen\">-</span> <span class=\"smart-summary-end\">"+a+"</span><span class=\"smart-summary-prefix\">"+t.localize("summaryPrefix")+"</span> <span class=\"smart-summary-total-end\">"+n+"</span> <span class=\"smart-summary-suffix\">"+t.localize("summarySuffix")+"</span>"}get _pageIndexSelectorsCount(){const t=this;let i=parseInt(t.pageIndexSelectors);return Array.isArray(t.pageIndexSelectors)&&(i=t.pageIndexSelectors.length),i}_renderPageIndexSelectors(){const t=this;if(0>t.pageIndex||t.pageIndex>=t.pagesCount)return;t.$.pageIndexSelectorsContainer.innerHTML="";let a=!1;Array.isArray(t.pageIndexSelectors)&&(a=!0);let n=Math.floor(t.pageIndex/t._pageIndexSelectorsCount)*t._pageIndexSelectorsCount,o=Math.min(t.pagesCount,n+t._pageIndexSelectorsCount),l=0;for(let r=n;r<o;r++){const i=document.createElement("span");let n=r+1;if(i.className="smart-pager-page-index-selector",a){const a=t.pageIndexSelectors[l++];a&&(a.label?n=t.pageIndexSelectors[r].label:"string"==typeof a&&(n=a),a.value&&i.setAttribute("value",t.pageIndexSelectors[r].value))}i.index=r,i.innerHTML=n,t.$.pageIndexSelectorsContainer.appendChild(i),r===t.pageIndex&&(i.classList.add("smart-selected"),i.setAttribute("selected",""))}}_lastButtonClickHandler(){const t=this;t.last()}last(){const t=this;t.navigateTo(t.pagesCount-1)}_firstButtonClickHandler(){const t=this;t.first()}first(){const t=this;t.navigateTo(0)}_renderButtons(){const t=this;switch(0===t.pageIndex?(t.$.firstButton.setAttribute("disabled",""),t.$.previousButton.setAttribute("disabled","")):(t.$.firstButton.removeAttribute("disabled"),t.$.previousButton.removeAttribute("disabled")),t.pageIndex===t.pagesCount-1?(t.$.nextButton.setAttribute("disabled",""),t.$.lastButton.setAttribute("disabled","")):(t.$.nextButton.removeAttribute("disabled"),t.$.lastButton.removeAttribute("disabled")),t.$nearButtonsContainer.removeClass("far"),t.$farButtonsContainer.removeClass("far"),t.$nearButtonsContainer.removeClass("near"),t.$farButtonsContainer.removeClass("near"),t.navigationButtonsPosition){case"near":t.$nearButtonsContainer.addClass("near"),t.$farButtonsContainer.addClass("near");break;case"far":t.$nearButtonsContainer.addClass("far"),t.$farButtonsContainer.addClass("far");break;case"both":t.$nearButtonsContainer.addClass("near"),t.$farButtonsContainer.addClass("far");}}_navigateToInputChangeHandler(){const t=this;let i=parseInt(t.$.navigateToInput.value)-1;isNaN(i)&&(t.$.navigateToInput.value="1",i=parseInt(t.$.navigateToInput.value-1)),t.navigateTo(i)}_pageIndexSelectorsContainerClickHandler(t){const i=this,a=t.target.closest(".smart-pager-page-index-selector");!a||a.classList.contains("smart-selected")||i.navigateTo(a.index)}_pageSizeSelectorChangeHandler(t){const i=this;!i.showPageSizeSelector||i.disabled||i._updating||(i.pageSize=parseInt(t.detail.value),i.$.fireEvent("pageSizeChanged",{value:parseInt(t.detail.value)}))}_keyDownHandler(t){const i=this;if(!i.disabled&&document.activeElement!==i.$.navigateToInput&&null===i.$.pageSizeSelector.getAttribute("focus"))switch(t.key){case"End":i.last(),t.preventDefault();break;case"Home":i.first(),t.preventDefault();break;case"PageDown":case"ArrowDown":case"ArrowLeft":i.prev(),t.preventDefault();break;case"PageUp":case"ArrowUp":case"ArrowRight":i.next(),t.preventDefault();}}_nextButtonClickHandler(){const t=this;t.next()}_previousButtonClickHandler(){const t=this;t.prev()}navigateTo(t){const i=this,a=i.pageIndex;i.disabled||i.pageIndex===t||0>t||t>=i.pagesCount||(i.pageIndex=t,i._render(),i.$.fireEvent("change",{oldIndex:a,index:t}))}_localize(){const t=this,a=["firstButton","lastButton","previousButton","nextButton"];for(let n=0;n<a.length;n++){const i=t.$[a[n]];!t.showNavigationButtonLabels&&2>n?(i.innerHTML="",0==n?i.classList.add("smart-arrow-left-first"):i.classList.add("smart-arrow-right-last")):!t.showNavigationButtonLabels&&2<=n?(i.innerHTML="",2==n?i.classList.add("smart-arrow-left"):i.classList.add("smart-arrow-right")):(i.classList.remove("smart-arrow-left"),i.classList.remove("smart-arrow-right"),i.classList.remove("smart-arrow-left-first"),i.classList.remove("smart-arrow-right-last"),i.innerHTML=t.localize(a[n]))}t.$.pageSizeLabel.innerHTML=t.localize("pageSizeLabel"),t.$.navigateToLabel.innerHTML=t.localize("navigateToLabel"),t.$.previousEllipsisButton.innerHTML=t.localize("ellipsis"),t.$.nextEllipsisButton.innerHTML=t.localize("ellipsis"),t.$.navigateToInput.placeholder=t.localize("navigateToInputPlaceholder")}_nextEllipsisButtonClickHandler(){const t=this;t.navigateTo(t._pageIndexSelectorsCount+t.pageIndex)}_previousEllipsisButtonClickHandler(){const t=this;t.navigateTo(-t._pageIndexSelectorsCount+t.pageIndex)}_navigationButtonsClickHandler(t){const i=this;if(!i.disabled){const a=t.target.closest(".smart-pager-button");a===i.$.firstButton?i._firstButtonClickHandler(t):a===i.$.lastButton?i._lastButtonClickHandler(t):a===i.$.previousButton?i._previousButtonClickHandler(t):a===i.$.nextButton?i._nextButtonClickHandler(t):void 0}}_navigationButtonsDownHandler(t){const i=this,a=t.originalEvent.target.closest(".smart-pager-button")||t.originalEvent.target.closest(".smart-pager-page-index-selector");i.disabled||!a||(i.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),(a===i.$.previousButton||a===i.$.nextButton)&&i._startRepeat(t,a))}_updateInBoundsFlag(t){const i=this,a=t.target;a._isPointerInBounds=!0,"mouseleave"===t.type&&(a._isPointerInBounds=!1);const n="buttons"in t?t.buttons:t.which;1!==n&&i._stopRepeat(t)}_startRepeat(t,i){const a=this;a._initialTimer||(a._initialTimer=setTimeout(function(){a._repeatTimer=setInterval(()=>{i._isPointerInBounds&&(i===a.$.previousButton?a._previousButtonClickHandler(t):a._nextButtonClickHandler(t))},50)},150))}_stopRepeat(){const t=this;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}}),Smart("smart-base-progress-bar",class extends Smart.BaseElement{static get properties(){return{indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}ready(){super.ready();const t=this;t._updateProgress()}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;n._updateProgress(),"value"===t&&n.$.fireEvent("change",{value:a,oldValue:i,changeType:"api"})}_updateProgress(){}get _percentageValue(){var t=Math.min,i=Math.max;const a=this,n=i(a.min,a.max),o=t(a.min,a.max),l=t(n,i(o,a.value));return(l-o)/(n-o)}}),Smart("smart-circular-progress-bar",class extends Smart.BaseProgressBar{template(){return`<div id="container">
                    <svg width="100%" height="100%" viewPort="0 0 100 100" viewBox="0 0 100 100">
                       <circle id="value" class ="smart-value-path" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                       <circle id="value" class ="smart-value" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                    </svg>
                    <div class ="smart-label-container">
                        <content></content>
                        <span id="label" class ="smart-label"></span>
                    </div>
                </div>`}static get listeners(){return{resize:"_resizeHandler"}}ready(){super.ready();const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px",t.$.hasClass("echo-animation")&&(t.value=t.max,t._updateProgress())}_resizeHandler(){const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px"}_updateProgress(){var t=Math.PI;super._updateProgress();const i=this,a=i.indeterminate?100*t:100*t-100*(i._percentageValue*t),n=!!document.documentMode,o=!n&&!!window.StyleMedia;if(i.showProgressValue){const t=parseInt(100*i._percentageValue);i.$.label.innerHTML=i.formatFunction?i.formatFunction(t):t+"%"}else i.$.label.innerHTML="";return n||o?null===i.value||i.indeterminate?(i.$.value.style.strokeDashoffset="",void i.$.value.setAttribute("class","smart-value smart-value-animation-ms")):(i.$.value.setAttribute("class","smart-value"),void(i.$.value.style.strokeDashoffset=i.inverted?-a:a)):(i.$.value.style.strokeDashoffset=i.inverted?-a:a,null===i.value||i.indeterminate?void i.$value.addClass("smart-value-animation"):void i.$value.removeClass("smart-value-animation"))}}),Smart("smart-progress-bar",class extends Smart.BaseProgressBar{static get properties(){return{orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}template(){return`<div>
                    <div id="value" class="smart-value"></div>
                    <div id="label" class ="smart-label"></div>
                </div>`}_updateProgress(){super._updateProgress();const t=this;if(t.showProgressValue){const i=parseInt(100*t._percentageValue);t.$.label.innerHTML=t.formatFunction?t.formatFunction(i):i+"%"}else t.$.label.innerHTML="";null===t.value||t.indeterminate?t.$value.addClass("smart-value-animation"):t.$value.removeClass("smart-value-animation"),t.$.value.style.transform="horizontal"===t.orientation?"scaleX("+t._percentageValue+")":"scaleY("+t._percentageValue+")"}}),Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return"<div id=\"container\" class=\"smart-container\">\n                    <div id=\"nearButton\" class =\"smart-scroll-button smart-arrow-left\"></div>\n                    <div  id=\"track\" class =\"smart-track\">\n                        <div id=\"thumb\" class=\"smart-thumb\"></div>\n                    </div>\n                    <div id=\"farButton\" class =\"smart-scroll-button smart-arrow-right\"></div>\n            </div>"}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.mousedown":"_startRepeat","nearButton.mouseup":"_stopRepeat","nearButton.mouseenter":"_updateInBoundsFlag","nearButton.mouseleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.mousedown":"_startRepeat","farButton.mouseup":"_stopRepeat","farButton.mouseenter":"_updateInBoundsFlag","farButton.mouseleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(t){const i=this,a=t.target;a._isPointerInBounds=!0,"mouseleave"===t.type&&(a._isPointerInBounds=!1);const n="buttons"in t?t.buttons:t.which;1!==n&&i._stopRepeat(t)}_startRepeat(t){const i=this;if(i.disabled)return;const a=t.target;a._initialTimer||(a._initialTimer=setTimeout(function(){a._repeatTimer=setInterval(()=>{if(a._isPointerInBounds){const i="buttons"in t?t.buttons:t.which;a.$.fireEvent("click",{buttons:i,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}},i.clickRepeatDelay)},3*i.clickRepeatDelay))}_stopRepeat(t){const i=this;if(!i.disabled){const i=t.target;i._repeatTimer&&(clearInterval(i._repeatTimer),i._repeatTimer=null),i._initialTimer&&(clearTimeout(i._initialTimer),i._initialTimer=null)}}_calculateThumbSize(t){const i=this,a=i.max-i.min,n="horizontal"===i.orientation?10<i.$.track.offsetWidth:10<i.$.track.offsetHeight;let o=0;return 1<=a&&n?(o=t/(a+t)*t,0<=i.$.thumb.className.indexOf("smart-hidden")&&i.$thumb.removeClass("smart-hidden")):i.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(o,t))}_dragStartHandler(t){const i=this;i.disabled||(i.thumbCapture=!0,i.dragStartX=t.clientX,i.dragStartY=t.clientY,i.dragStartValue=i.value,t.stopPropagation(),t.preventDefault())}_dragHandler(t){const i=this;if(!0!==i.thumbCapture)return;i._isThumbDragged=!0;const a=(i.max-i.min)/(i.scrollBarSize-i.thumbSize),n="horizontal"===i.orientation?(t.clientX-i.dragStartX)*a:(t.clientY-i.dragStartY)*a;let o=n;i.rightToLeft&&"horizontal"===i.orientation&&(o=-n),i._updateValue(i.dragStartValue+o),t.stopPropagation(),t.preventDefault(),t.originalEvent&&(t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}_dragEndHandler(t){const i=this;i._trackDownTimer&&(clearInterval(i._trackDownTimer),i._trackDownTimer=null);i.thumbCapture&&(i.thumbCapture=!1,i._isThumbDragged=!1,"switchWhenReleased"===i.mechanicalAction?i._updateValue(i.dragStartValue,i.value):"switchUntilReleased"===this.mechanicalAction&&i._updateValue(i.dragStartValue),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation())}_farButtonClickHandler(){const t=this;if(!t.disabled){const i=t.value;t._updateValue(t.value+t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(i)}}_nearButtonClickHandler(){const t=this;if(!t.disabled){const i=t.value;t._updateValue(t.value-t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(i)}}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"min":case"max":case"orientation":case"showButtons":{n._layout();break}case"value":n._updateValue(i,a);}}ready(){super.ready();const t=this;t._layout()}_resizeHandler(){const t=this;t._layout()}refresh(){const t=this;t._layout()}_layout(){const t=this;t.scrollBarSize="horizontal"===t.orientation?t.$.track.offsetWidth:t.$.track.offsetHeight,t.thumbSize=t._calculateThumbSize(t.scrollBarSize),"horizontal"===t.orientation&&t.$.thumb.style.width!==t.thumbSize+"px"?t.$.thumb.style.width=t.thumbSize+"px":"vertical"===t.orientation&&t.$.thumb.style.height!==t.thumbSize+"px"&&(t.$.thumb.style.height=t.thumbSize+"px"),"horizontal"===t.orientation?(t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.remove("smart-arrow-up"),t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.remove("smart-arrow-down"),!t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.add("smart-arrow-left"),!t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.add("smart-arrow-right")):(t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.remove("smart-arrow-left"),t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.remove("smart-arrow-right"),!t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.add("smart-arrow-up"),!t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.add("smart-arrow-down")),t._updateThumbPosition(),(t.value>t.max||t.value<t.min)&&t._updateValue(t.value,t.value>t.max?t.max:t.min)}_selectStartHandler(t){const i=this;i.thumbCapture&&t.preventDefault()}_trackDownHandler(t){const i=this;t.target!==i.$.track||(i._trackDownTimer=setInterval(function(){i._trackClickHandler(t)},i.clickRepeatDelay))}_trackClickHandler(t){const i=this;if(i.disabled)return;if(i._isThumbDragged)return clearInterval(i._trackDownTimer),void(i._trackDownTimer=null);const a=i.$.thumb.getBoundingClientRect(),n=t.pageX-window.pageXOffset,o=t.pageY-window.pageYOffset,l=i.value;"horizontal"===i.orientation?n>(i._isThumbDragged?i.dragStartX:a.right)?i._updateValue(i.value+i.largeStep):n<(i._isThumbDragged?i.dragStartX:a.left)&&i._updateValue(i.value-i.largeStep):o>(i._isThumbDragged?i.dragStartY:a.bottom)?i._updateValue(i.value+i.largeStep):o<(i._isThumbDragged?i.dragStartY:a.top)&&i._updateValue(i.value-i.largeStep),"switchUntilReleased"===i.mechanicalAction&&i._updateValue(l)}_updateValue(t,i){const a=this;if(1===arguments.length&&(i=t,t=a.value),(void 0===i||isNaN(i))&&(i=a.min),i>a.max&&(i=a.max),i<a.min&&(i=a.min),a.value=i,t!==i){if(a._updateThumbPosition(),a.thumbCapture&&"switchWhenReleased"===a.mechanicalAction)return;if(a.onChange)return void a.onChange({value:a.value,oldValue:t,min:a.min,max:a.max});a.$.fireEvent("change",{value:a.value,oldValue:t,min:a.min,max:a.max})}}_updateThumbPosition(){const t=this,i=t.$.track.offsetHeight,a=t.$.track.offsetWidth,n="horizontal"===t.orientation?a:i,o=t._calculateThumbSize(n),l="horizontal"===t.orientation?a-o:i-o;let r=(n-o)/(t.max-t.min)*(t.value-t.min);t.rightToLeft&&"horizontal"===t.orientation&&(r=(n-o)/(t.max-t.min)*(t.max-t.value-t.min)),r=Math.min(l,Math.max(0,r)),"vertical"===t.orientation&&t.$.thumb.style.top!==r+"px"?t.$.thumb.style.top=r+"px":"horizontal"===t.orientation&&t.$.thumb.style.left!==r+"px"&&(t.$.thumb.style.left=r+"px")}}),Smart("smart-splitter-item",class extends Smart.ContentElement{static get properties(){return{collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any",validator:"_propertyValidator"},min:{value:"",type:"any",validator:"_propertyValidator"},size:{value:"",type:"any",validator:"_propertyValidator"}}}template(){return`<div id="container">
                    <div class="smart-header" id="header"></div>
                    <div class="smart-content" id="content" inner-H-T-M-L="[[innerHTML]]">
                        <content></content>
                    </div>
                </div>`}static get listeners(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",styleChanged:"_styleChangedEventHandler"}}propertyChangedHandler(t,i,a){const n=this;switch(t){case"collapsed":n._ignorePropertyValue=!0,a?n.collapse():n.expand();break;case"collapsible":n._updateNearSplitterBars();break;case"size":case"min":case"max":n._setSize(t,a);break;default:super.propertyChangedHandler(t,i,a);}}attached(){super.attached();const t=this;t._sizeLimits||(t._sizeLimits={});const i=getComputedStyle(t);t.min||(t._sizeLimits.minWidth=parseFloat(i.getPropertyValue("min-width"))||0,t._sizeLimits.minHeight=parseFloat(i.getPropertyValue("min-height"))||0),t.max||(t._sizeLimits.maxWidth=parseFloat(i.getPropertyValue("max-width"))||0,t._sizeLimits.maxHeight=parseFloat(i.getPropertyValue("max-height"))||0)}detached(){super.detached();const t=this;t.$.removeClass("animate")}appendChild(t){const i=this;if(!t)return void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}));if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}i.$.content.appendChild(t)}collapse(t){const i=this;if(!i.collapsible)return void(i.collapsed=!1);if(i._ignorePropertyValue||!i.collapsed){const a=i.closest("smart-splitter");if(!a)return;i._sizeBeforeCollapse||(i._sizeBeforeCollapse=i[a._measurements.size]);const n=a._items.indexOf(i);n===a._items.length-1?t=!0:0===n&&(t=!1);const o=t?-1:1;let l=n+o,r=a._items[l];for(;r&&!!r.collapsed;)l+=o,r=a._items[l];if(!r)return void(i.collapsed=!1);delete i._ignorePropertyValue,r._sizeBeforeCollapse||(r._sizeBeforeCollapse=r[a._measurements.size]);let s;i.previousElementSibling instanceof Smart.SplitterBar?s=i.previousElementSibling:i.nextElementSibling instanceof Smart.SplitterBar&&(s=i.nextElementSibling);const d=r[a._measurements.size]+i[a._measurements.size],m=s?s[a._measurements.size]:i._sizeLimits[a._measurements.minDimension];if(d&&d-m<m)return void(i.collapsed=!1);if(i.hasAnimation&&!a._isInitializing&&(i.$.addClass("animate"),r.$.addClass("animate"),i.addEventListener("transitionend",i._transitionEndHandler,{once:!0}),i.addEventListener("transitioncancel",i._transitionEndHandler,{once:!0}),r.addEventListener("transitionend",i._transitionEndHandler,{once:!0}),r.addEventListener("transitioncancel",i._transitionEndHandler,{once:!0})),!i._paddings){const t=getComputedStyle(i);i._paddings=(parseFloat(t.getPropertyValue("padding-"+a._measurements.position))||0)+(parseFloat(t.getPropertyValue("padding-"+a._measurements.position2))||0)}r._sizeBeforeCollapse+=i._sizeBeforeCollapse,r._sizeLimits&&r._sizeLimits[a._measurements.maxDimension]&&d>r._sizeLimits[a._measurements.maxDimension]&&(r._sizeLimits.ignoreUpdate=!0,r.style[a._measurements.maxDimension]=r._sizeBeforeCollapse+"px"),r.style[a._measurements.dimension]=r._sizeBeforeCollapse+"px",i.style[a._measurements.dimension]=i.style[a._measurements.minDimension]="0",i.style.padding="0",i._neighbourItem=r,i.collapsed=!0,i.$.fireEvent("collapse",{itemIndex:a._items.indexOf(i)}),t?(i.previousElementSibling.itemCollapsed=!0,i.previousElementSibling.showFarButton=!(i.previousElementSibling.showNearButton=!1)):(i.nextElementSibling.itemCollapsed=!0,i.nextElementSibling.showNearButton=!(i.nextElementSibling.showFarButton=!1))}}expand(){const t=this;if(t._ignorePropertyValue||t.collapsed){const i=t.closest("smart-splitter");if(!i)return void(t.collapsed=!0);if(!t._neighbourItem)return void(t.collapsed=!0);if(delete t._ignorePropertyValue,!t._neighbourItem._ignorePropertyValue&&t._neighbourItem.collapsed){let a=i._items.indexOf(t._neighbourItem);const n=i._items.indexOf(t)>i._items.indexOf(t._neighbourItem)?-1:1;for(t._neighbourItem=i._items[a];t._neighbourItem&&!!t._neighbourItem.collapsed;)a+=n,t._neighbourItem=i._items[a]}if(!t._neighbourItem)return void(t.collapsed=!0);const a=t._neighbourItem._sizeBeforeCollapse,n=t._sizeLimits[i._measurements.minDimension],o=t._neighbourItem._sizeLimits[i._measurements.minDimension];if(a&&a-n<o)return void(t.collapsed=!0);if(!t._neighbourItem._paddings){const a=getComputedStyle(t._neighbourItem);t._neighbourItem._paddings=(parseFloat(a.getPropertyValue("padding-"+i._measurements.position))||0)+(parseFloat(a.getPropertyValue("padding-"+i._measurements.position2))||0)}if(!t._paddings){const a=getComputedStyle(t);t._paddings=(parseFloat(a.getPropertyValue("padding-"+i._measurements.position))||0)+(parseFloat(a.getPropertyValue("padding-"+i._measurements.position2))||0)}const l=Math.min(t._sizeBeforeCollapse,a-t._neighbourItem._paddings-t._paddings-o);if(0>l)return void(t.collapsed=!0);t.hasAnimation&&!i._isInitializing&&(t.$.addClass("animate"),t._neighbourItem.$.addClass("animate"),t.addEventListener("transitionend",t._transitionEndHandler,{once:!0}),t.addEventListener("transitioncancel",t._transitionEndHandler,{once:!0}),t._neighbourItem.addEventListener("transitionend",t._transitionEndHandler,{once:!0}),t._neighbourItem.addEventListener("transitioncancel",t._transitionEndHandler,{once:!0})),t.style.padding="",t.style[i._measurements.minDimension]=t.min?t._sizeLimits[i._measurements.minDimension]+"px":"",t.style[i._measurements.dimension]=(t._sizeBeforeCollapse=l)+"px",t._neighbourItem.style[i._measurements.dimension]=(t._neighbourItem._sizeBeforeCollapse=Math.max(t._neighbourItem._sizeLimits[i._measurements.minDimension],a-l))+"px",t._neighbourItem._sizeLimits[i._measurements.maxDimension]&&(t._neighbourItem.style[i._measurements.maxDimension]=t._neighbourItem._sizeLimits[i._measurements.maxDimension]+"px"),t.collapsed=!1,t.$.fireEvent("expand",{itemIndex:i._items.indexOf(t)}),i._items.indexOf(t)>i._items.indexOf(t._neighbourItem)?(t.previousElementSibling.itemCollapsed=!1,t.previousElementSibling.showNearButton=t._neighbourItem.collapsible):(t.nextElementSibling.itemCollapsed=!1,t.nextElementSibling.showFarButton=t._neighbourItem.collapsible);const r=i._items[i._items.indexOf(t)-1],s=i._items[i._items.indexOf(t)+1];if(r){const i=r.nextElementSibling;i&&i instanceof Smart.SplitterBar&&(r.collapsed?i.showNearButton=t.collapsible:(i.itemCollapsed=!1,i.showNearButton=r.collapsible,i.showFarButton=t.collapsible))}if(s){const i=s.previousElementSibling;i&&i instanceof Smart.SplitterBar&&(s.collapsed?i.showFarButton=s.collapsed:(i.itemCollapsed=!1,i.showNearButton=t.collapsible,i.showFarButton=s.collapsible))}delete t._neighbourItem}}insertBefore(t,i){const a=this;if(!t)return void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"insertBefore",node:"node"}));if(!a.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.$.content.insertBefore(t,i||null)}lock(){const t=this;t.locked=!0}unlock(){const t=this;t.locked=!1}ready(){super.ready();const t=this,i=t.closest("smart-splitter"),a=i&&i.isCompleted;t._sizeLimits={};let n="string"==typeof t.min&&-1<t.min.indexOf("%");const o=isNaN(parseFloat(t.min))?0:parseFloat(t.min),l=isNaN(parseFloat(t.max))?0:parseFloat(t.max);if(t._sizeLimits.minWidth=t._sizeLimits.minHeight=n&&a?o*i[i._measurements.size]/100:o,n="string"==typeof t.max&&-1<t.max.indexOf("%"),t._sizeLimits.maxWidth=t._sizeLimits.maxHeight=n&&a?l*i[i._measurements.size]/100:l,t.size){n="string"==typeof t.size&&-1<t.size.indexOf("%");const o="auto"===t.size?t.size:isNaN(parseFloat(t.size))?0:parseFloat(t.size)+(n?"%":"px");a?t.style[i._measurements.dimension]=o:t.style.width=t.style.height=o}t._updateNearSplitterBars()}removeChild(t){const i=this;if(!t)return void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}));if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}i.$.content.removeChild(t)}_expand(){const t=this;if(t._neighbourItem&&t._neighbourItem.parentElement)return void t.expand();const i=t.closest("smart-splitter");i&&(delete t._neighbourItem,t.collapsed=!1,t.$.fireEvent("expand",{itemIndex:i._items.indexOf(t)}),t.style[i._measurements.minDimension]=t.min?t._sizeLimits[i._measurements.minDimension]+"px":"",t.style[i._measurements.dimension]=t._sizeBeforeCollapse+"px",2>i._items.length||t.previousElementSibling instanceof Smart.SplitterBar&&(t.previousElementSibling.itemCollapsed=!1,t.previousElementSibling.showNearButton=i._items[i._items.indexOf(t)-1].collapsible))}_mouseEventsHandler(t){const i=this,a=i.closest("smart-splitter");(a&&!a.disabled||Smart.Utilities.Core.isMobile)&&("mouseenter"===t.type?this.setAttribute("hover",""):this.removeAttribute("hover"))}_propertyValidator(t,i){return"number"!=typeof i&&"string"!=typeof i?t:i}_setSize(t,i){var a=Math.max;const n=this;if(!n.locked){const o=n.closest("smart-splitter");if(o){if(!o.isCompleted)return void o.whenReady(()=>n._setSize(t,i));const l="string"==typeof i&&-1<i.indexOf("%");switch(i=isNaN(parseFloat(i))?"":parseFloat(i),t){case"size":{const t=n[o._measurements.size];"auto"!==arguments[1]&&arguments[1]?l?(n.style[o._measurements.dimension]=i+"%",n._sizeBeforeCollapse=i*o[o._measurements.size]/100):n.style[o._measurements.dimension]=(n._sizeBeforeCollapse=i||0)+"px":(n.style[o._measurements.dimension]=arguments[1],n._sizeBeforeCollapse=n[o._measurements.size]);const r=t-n._sizeBeforeCollapse;n._originalSize&&(n._originalSize=n._sizeBeforeCollapse);const s=o._items[o._items.length-1];if(n===s){let t;for(let l=a(0,o._items.length-2);0<=l;l--)if(!o._items[l].collapsed&&!o._items[l].locked&&o._items[l]!==n){t=o._items[l];break}t&&(t.style[o._measurements.dimension]=(t._sizeBeforeCollapse=a(0,t[o._measurements.size]+r))+"px")}break}case"min":n.style[o._measurements.minDimension]=n.collapsed||!i?"":i+(l?"%":"px"),n._sizeLimits.minWidth=n._sizeLimits.minHeight=l?i*n[o._measurements.size]/100:i,n.style["min"+o._measurements.restricredDimension]="";break;case"max":n.style[o._measurements.maxDimension]=i?i+(l?"%":"px"):"",n._sizeLimits.maxWidth=n._sizeLimits.maxHeight=l?i*n[o._measurements.size]/100:i,n.style["max"+o._measurements.restricredDimension]="";}o._validateItemSize(!0)}}}_styleChangedEventHandler(t){const i=this;if(i.locked)return;if(i._sizeLimits.ignoreUpdate)return void delete i._sizeLimits.ignoreUpdate;if(i.collapsed)return;const a=i.closest("smart-splitter");let n;t.detail.styleProperties["min-width"]?(n=t.detail.styleProperties["min-width"][a&&"horizontal"===a.orientation?"oldValue":"value"],i._sizeLimits.minWidth=(parseFloat(n)||0)*(n&&-1<n.indexOf("%")?a[a._measurements.size]/100:1)):t.detail.styleProperties["max-width"]?(n=t.detail.styleProperties["max-width"][a&&"horizontal"===a.orientation?"oldValue":"value"],i._sizeLimits.maxWidth=(parseFloat(n)||0)*(n&&-1<n.indexOf("%")?a[a._measurements.size]/100:1)):t.detail.styleProperties["min-height"]?(n=t.detail.styleProperties["min-height"][a&&"horizontal"===a.orientation?"value":"oldValue"],i._sizeLimits.minHeight=(parseFloat(n)||0)*(n&&-1<n.indexOf("%")?a[a._measurements.size]/100:1)):t.detail.styleProperties["max-height"]&&(n=t.detail.styleProperties["max-height"][a&&"horizontal"===a.orientation?"value":"oldValue"],i._sizeLimits.maxHeight=(parseFloat(n)||0)*(n&&-1<n.indexOf("%")?a[a._measurements.size]/100:1))}_transitionEndHandler(){const t=this;!t.isCompleted&&t.$.hasClass("animate")||(t.$.removeClass("animate"),t._neighbourItem&&t._neighbourItem.$.hasClass("animate")&&t._neighbourItem.$.removeClass("animate"))}_updateNearSplitterBars(){const t=this;t.previousElementSibling instanceof Smart.SplitterBar&&(t.previousElementSibling.showFarButton=t.collapsible),t.nextElementSibling instanceof Smart.SplitterBar&&(t.nextElementSibling.showNearButton=t.collapsible)}}),Smart("smart-splitter-bar",class extends Smart.BaseElement{static get properties(){return{showNearButton:{value:!1,type:"boolean"},showFarButton:{value:!1,type:"boolean"},itemCollapsed:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"}}}template(){return`<div id="container" >
                    <div class="smart-splitter-far-collapse-button" id="farCollapseButton">
                        <span id="arrowNear" class="smart-arrow"></span>
                    </div>
                    <div class="smart-splitter-resize-button" id="resizeButton">
                        <span></span>
                    </div>
                    <div class="smart-splitter-near-collapse-button" id="nearCollapseButton">
                        <span id="arrowFar" class="smart-arrow"></span>
                    </div>
                </div>`}static get listeners(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",mouseover:"_mouseEventsHandler",mouseout:"_mouseEventsHandler",focus:"_focusEventHandler",blur:"_focusEventHandler"}}propertyChangedHandler(t,i,a){const n=this;switch(t){case"unfocusable":n._setFocusable();break;default:super.propertyChangedHandler(t,i,a);}}ready(){super.ready();const t=this;t._setFocusable()}hide(){const t=this,i=t.closest("smart-splitter");if(t.$.addClass("smart-hidden"),i){const a=i.items;if(i.hasAnimation){let n;for(let o=0;o<a.length;o++)a[o].$.hasClass("animate")&&(n=!0,a[o].addEventListener("transitionend",function(){t.closest("smart-splitter")._autoFitItems()},{once:!0}));if(n)return}i._autoFitItems()}}show(){const t=this,i=t.closest("smart-splitter");if(t.$.removeClass("smart-hidden"),i){const a=i.items;if(i.hasAnimation){let n;for(let o=0;o<a.length;o++)a[o].$.hasClass("animate")&&(n=!0,a[o].addEventListener("transitionend",function(){t.closest("smart-splitter")._autoFitItems()},{once:!0}));if(n)return}i._autoFitItems()}}lock(){const t=this;t.locked=t.unfocusable=!0;t.showNearButton||t.showFarButton||t._setFocusable()}unlock(){const t=this;t.locked=t.unfocusable=!1,t._setFocusable()}_focusEventHandler(t){const i=this,a=i.closest("smart-splitter");a&&!a.disabled&&("focus"===t.type?this.setAttribute("focus",""):this.removeAttribute("focus"))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_handleHoveredState(t,i){const a=this;switch(i){case"mouseenter":if(!t._getTargetItem(a,"previousElementSibling")||("adjacent"===t.resizeMode?!t._getTargetItem(a,"nextElementSibling"):!t._getTargetItem(a,"previousElementSibling",!0)))return;a.setAttribute("hover","");break;case"mouseleave":{a.removeAttribute("hover");break}}}_mouseEventsHandler(t){const i=this,a=i.closest("smart-splitter");return a&&a.disabled||Smart.Utilities.Core.isMobile?void 0:"mouseenter"===t.type||"mouseleave"===t.type?void i._handleHoveredState(a,t.type):t.target.closest(".smart-splitter-far-collapse-button")===i.$.farCollapseButton?void("mouseover"===t.type?i.$.farCollapseButton.setAttribute("hover",""):i.$.farCollapseButton.removeAttribute("hover")):t.target.closest(".smart-splitter-near-collapse-button")===i.$.nearCollapseButton?void("mouseover"===t.type?i.$.nearCollapseButton.setAttribute("hover",""):i.$.nearCollapseButton.removeAttribute("hover")):void(t.target.closest(".smart-splitter-resize-button")===i.$.resizeButton&&("mouseover"===t.type?i.$.resizeButton.setAttribute("hover",""):i.$.resizeButton.removeAttribute("hover")))}}),Smart("smart-splitter",class extends Smart.ContentElement{static get properties(){return{autoFitMode:{allowedValues:["end","proportional","overflow"],value:"proportional",type:"string"},dataSource:{value:null,type:"object?",reflectToAttribute:!1},orientation:{allowedValues:["horizontal","vertical"],value:"vertical",type:"string"},keepProportionsOnResize:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","adjacent","end","proportional"],value:"adjacent",type:"string"},resizeStep:{value:5,type:"number"},liveResize:{value:!1,type:"boolean"},messages:{extend:!0,value:{en:{invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number.",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidNode:"{{elementType}}: \"{{method}}\" method accepts an object or an array of objects as it's second parameter.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter.",invalidType:"{{elementType}}: \"{{propertyName}}\" must be of type string or number."}},type:"object"}}}static get listeners(){return{focus:"_focusHandler",blur:"_focusHandler",down:"_downHandler",move:"_moveHandler","document.dragstart":"_dragStartHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler",keydown:"_keyDownHandler",resize:"_resizeEventHandler"}}template(){return`<div id="container">
                    <content></content>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"dataSource":n._createLayout();break;case"resizeMode":delete n._dragDetails;break;case"orientation":{n._setMeasurements(),n.setAttribute("orientation-change","");for(let t=0;t<n._items.length;t++)n._items[t].style[n._measurements.dimension]=n._items[t]["offset"+n._measurements.restricredDimension]+"px",n._items[t].style[n._measurements.restricredDimension.toLowerCase()]="100%",n._items[t].style["max"+n._measurements.restricredDimension]="none",n._items[t].style["min"+n._measurements.restricredDimension]="none",n._items[t].style[n._measurements.maxDimension]=n._items[t].max?n._items[t]._sizeLimits[n._measurements.maxDimension]+"px":"",n._items[t].collapsed?(n._items[t].style.minWidth=n._items[t].style.minHeight="",n._items[t].style[n._measurements.minDimension]="0"):n._items[t].style[n._measurements.minDimension]=n._items[t].min?n._items[t]._sizeLimits[n._measurements.minDimension]+"px":"";n._validateItemSize(),n.removeAttribute("orientation-change");break}case"unfocusable":n._setFocusable();break;default:super.propertyChangedHandler(t,i,a);}}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t&&t instanceof Smart.SplitterItem?void i.insertBefore(t,null):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){super.attached();const t=this;t.isCompleted&&t._validateItemSize()}collapse(t,i){const a=this;return t instanceof Smart.SplitterItem&&t.closest("smart-splitter")===a?void t.collapse(i):"number"==typeof t&&a._items[t]?void(t=a._items[t],t.collapse(i)):void a.error(a.localize("invalidIndex",{elementType:a.nodeName.toLowerCase(),method:"collapse"}))}expand(t){const i=this;return t instanceof Smart.SplitterItem&&t.closest("smart-splitter")===i?void t.expand():"number"==typeof t&&i._items[t]?void(t=i._items[t],t.expand()):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"expand"}))}hideBar(t){const i=this;return"number"==typeof t&&(t=i.bars[t]),t instanceof Smart.SplitterBar?void(t instanceof Smart.SplitterBar&&t.closest("smart-splitter")===i&&t.hide()):void i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"hideBar"}))}get items(){const t=this;if(t.isReady){const a=t.$.container.children;let n=[];for(let t=0;t<a.length;t++)(a[t]instanceof Smart.SplitterItem||"Smart-SPLITTER-ITEM"===a[t].tagName)&&n.push(a[t]);return n}}insert(t,i){const a=this;if("string"==typeof i&&(i={content:i}),!i||"object"!=typeof i)return void a.error(a.localize("invalidSettings",{elementType:a.nodeName.toLowerCase(),method:"insert"}));if("number"!=typeof t)return void a.error(a.localize("invalidIndex",{elementType:a.nodeName.toLowerCase(),method:"insert"}));const n=i instanceof Smart.SplitterItem?i:a._createItem(i);t>=a._items.length||0===a._items.length?a.appendChild(n):a.insertBefore(n,a._items[t])}insertBefore(t,i){function a(){n._resizeHostItemOnInsert(o,t,l),n._items&&n._items.splice(i?n._items.indexOf(i):n._items.length,0,t),n._validateItemSize()}const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}if(!t||!(t instanceof Smart.SplitterItem))return void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));if(i&&!(i instanceof Smart.SplitterItem))return void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));if(t.style[n._measurements.restricredDimension.toLowerCase()]="100%",t.size){const i="string"==typeof t.size&&-1<t.size.indexOf("%")?"%":"px";t.style[n._measurements.dimension]="auto"===t.size?t.size:isNaN(parseFloat(t.size))?"":parseFloat(t.size)+i,1===n._items.length&&(n._items[0].size="")}else t.style[n._measurements.dimension]="";if(t._sizeBeforeCollapse)if(t.size){const i="string"==typeof t.size&&-1<t.size.indexOf("%")?"%":"px";t.style[n._measurements.dimension]="auto"===t.size?t.size:isNaN(parseFloat(t.size))?0:parseFloat(t.size)+i,t._sizeBeforeCollapse=t[n._measurements.size]}else delete t._sizeBeforeCollapse;t.style["max"+n._measurements.restricredDimension]="none",t.style[n._measurements.maxDimension]=t._sizeLimits&&t.max?t._sizeLimits[n._measurements.maxDimension]+"px":"",t.collapsed?(t.style.minWidth=t.style.minHeight="",t.style[n._measurements.minDimension]=t.style[n._measurements.dimension]="0"):t.style[n._measurements.minDimension]=t._sizeLimits&&t.min?t._sizeLimits[n._measurements.minDimension]+"px":"";for(let a=0;a<n._items.length;a++)n._items[a]._sizeBeforeCollapse||(n._items[a]._sizeBeforeCollapse=n._items[a][n._measurements.size]);n.$.container.insertBefore(t,i||null);const o=function(){for(let i=t.previousElementSibling;i;){if(i instanceof Smart.SplitterItem)return i;i=i.previousElementSibling}}();let l;const r=n.bars;t.previousElementSibling instanceof Smart.SplitterItem?(l=n._createBar(t,t.previousElementSibling),n.$.container.insertBefore(l,t)):t.nextElementSibling instanceof Smart.SplitterItem&&(l=n._createBar(t,t.nextElementSibling),n.$.container.insertBefore(l,t.nextElementSibling)),l&&0<r.length&&(l.style[n._measurements.restricredDimension.toLowerCase()]=r[0].style[n._measurements.restricredDimension.toLowerCase()]),t.isCompleted?a():(t.__onCompleted=t._onCompleted,t._onCompleted=function(){t.__onCompleted&&(t.__onCompleted(),delete t.__onCompleted),a()})}lockItem(t){const i=this;return t instanceof Smart.SplitterItem?void t.lock():"number"==typeof t&&i._items[t]?void(t=i._items[t],t&&t.lock()):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"lockItem"}))}lockBar(t){const i=this;return t instanceof Smart.SplitterBar?void t.lock():"number"==typeof t?void(t=i.bars[t],t&&t.lock()):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"lockBar"}))}get hasStyleObserver(){return"resize"}ready(){super.ready();const t=this;t._isInitializing=!0,t._createLayout(),t._setFocusable(),delete t._isInitializing}remove(t){const i=this;return t instanceof Smart.SplitterItem&&t.closest("smart-splitter")===i?void i.removeChild(t):"number"==typeof t?t>i._items.length||0>t?void i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"remove"})):void i.removeChild(i._items[t]):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"remove"}))}removeAll(){const t=this;t._items=[],t.$.container.innerHTML=""}removeChild(t){function a(t,i,a){let n=t,l=o._items[n];for(;l&&!!l.collapsed;)l=o._items[n+=a];return l}var n=Math.max;const o=this;if(!o.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(o,t.concat(Array.prototype.slice.call(arguments)))}if(!t||!(t instanceof Smart.SplitterItem))return void o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"removeChild",node:"node"}));if(!o._items)return;let l=o._items.indexOf(t);t.collapsed?o.$.container.removeChild(o._items.indexOf(t._neighbourItem)>l?t.nextElementSibling:t.previousElementSibling):t.previousElementSibling instanceof Smart.SplitterBar?o.$.container.removeChild(t.previousElementSibling):t.nextElementSibling instanceof Smart.SplitterBar&&o.$.container.removeChild(t.nextElementSibling),o._items.splice(l,1),l=n(0,l-1);let r=0;const s=o._items.filter(t=>!t.collapsed&&!t.locked),d=t._sizeBeforeCollapse||t[o._measurements.size];if(s.map(t=>r+=(t.style[o._measurements.dimension]?t._sizeBeforeCollapse:0)||t[o._measurements.size]),o.$.content.removeChild(t),1===o._items.length&&o._items[0].collapsed||0<o._items.length&&0>o._items.map(t=>t.collapsed).indexOf(!1)){const t=o._items[o._items.length-1];let i=t.context;t.context=t,t._expand(),t.context=i}for(let n=0;n<o._items.length;n++)if(o._items[n].collapsed&&o._items[n]._neighbourItem===t){let t,i;o._items[n]._neighbourItem=a(l,o._items[n],1),o._items[n]._neighbourItem?(t=o._items[n].nextElementSibling,t&&(i=t.context,t.context=t,t.itemCollapsed=!0,t.showNearButton=!(t.showFarButton=!1),t.context=i)):(o._items[n]._neighbourItem=a(l,o._items[n],-1),t=o._items[n].previousElementSibling,t&&(i=t.context,t.context=t,t.itemCollapsed=!0,t.showFarButton=!(t.showNearButton=!1),t.context=i))}if("proportional"===o.autoFitMode){let t,a,l;for(let m=0;m<s.length;m++)t=s[m]._sizeBeforeCollapse||s[m][o._measurements.size],a=t+d*(t/r),l=s[m]._sizeLimits[o._measurements.minDimension]||0,s[m].style[o._measurements.dimension]=(s[m]._sizeBeforeCollapse=n(0,a))+"px",l>t&&(s[m][o._measurements.minDimension]=a+"px")}o._autoFitItems()}showBar(t){const i=this;return t instanceof Smart.SplitterBar?void t.show():"number"==typeof t?(t=i.bars[t],t instanceof Smart.SplitterBar?void t.show():void i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"showBar"}))):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"showBar"}))}get bars(){const t=this;if(t.isReady){const a=t.$.container.children;let n=[];for(let t=0;t<a.length;t++)(a[t]instanceof Smart.SplitterBar||"Smart-SPLITTER-BAR"===a[t].tagName)&&n.push(a[t]);return n}}unlockItem(t){const i=this;return t instanceof Smart.SplitterItem?void t.unlock():"number"==typeof t&&i._items[t]?void(t=i._items[t],t&&t.unlock()):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"unlockItem"}))}unlockBar(t){const i=this;return t instanceof Smart.SplitterBar?void t.unlock():"number"==typeof t?void(t=i.bars[t],t&&t.unlock()):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"unlockBar"}))}update(t,i){const a=this;if("number"==typeof t&&(t=a._items[t],!t))return void a.error(a.localize("invalidIndex",{elementType:a.nodeName.toLowerCase(),method:"update"}));if(t instanceof Smart.SplitterItem&&i&&a.contains(t))for(let a in i)void 0!==t[a]&&(t[a]=i[a])}_autoFitItems(){const t=this,a=t._items.length;if(0===a||"overflow"===t.autoFitMode)return;let n=[],o=[],l=[],r;for(let s=a-1;0<=s;s--)t._items[s].collapsed?o.push(t._items[s]):t._items[s].locked?n.push(t._items[s]):r?t._items[s].size||l.push(t._items[s]):r=t._items[s];r&&r.size&&0<l.length&&(r=l.filter(i=>!i.max&&!i._sizeLimits[t._measurements.maxDimension])[0]||r),o.length===a&&(r=o[0],r.expand(),r.unlock()),t._autoFitLastItem(r,o,n)}_autoFitLastItem(t,i,a){const n=this,o=n._items.length;1===o&&n._items[0].locked&&(n._items[0].locked=!1),a.length===o&&a[0].unlock(),t||(t=a[0],t.unlock());let l=0,r=0;n._items.map(t=>l+=t.collapsed?0:t.style[n._measurements.dimension]&&-1>t.style[n._measurements.dimension].indexOf("%")&&t._sizeBeforeCollapse?t._sizeBeforeCollapse:t.getBoundingClientRect()[n._measurements.dimension]),n.bars.map(t=>r+=t[n._measurements.size]);const s=l+r,d=n.$.container.getBoundingClientRect()[n._measurements.dimension];if(s!==d){let i=-1>t.style[n._measurements.dimension].indexOf("%")?t._sizeBeforeCollapse?t._sizeBeforeCollapse:t.getBoundingClientRect()[n._measurements.dimension]:t.getBoundingClientRect()[n._measurements.dimension];let a=Math.abs(d-s),o=s<d?1:-1;t.style[n._measurements.dimension]=(t._sizeBeforeCollapse=Math.max(0,i+o*a))+"px",t._sizeLimits[n._measurements.maxDimension]&&t._sizeBeforeCollapse>t._sizeLimits[n._measurements.maxDimension]&&(t.style[n._measurements.maxDimension]=(t._sizeLimits[n._measurements.maxDimension]=t._sizeBeforeCollapse)+"px")}}_autoFitItemsProportionally(t,i){const a=this,n=a._items.filter(t=>!t.collapsed);let o=t[a._measurements.size],l=0;n.map(t=>l+=t._sizeBeforeCollapse||t[a._measurements.size]),i&&(l-=i[a._measurements.size]),t.size&&!t.isCompleted&&(t._setSize("size",o),o=t._sizeBeforeCollapse),o=Math.min(a.$.container[a._measurements.size]/2,t[a._measurements.size]),t.style[a._measurements.dimension]=o+"px";let r,s,d;for(let m=0;m<n.length;m++)r=n[m]._sizeBeforeCollapse||n[m][a._measurements.size],s=(l-o)*(r/l),d=n[m]._sizeLimits[a._measurements.minDimension]||0,n[m].style[a._measurements.dimension]=(n[m]._sizeBeforeCollapse=Math.max(d,s))+"px"}_createLayout(){const t=this;if(t._items=[],"string"==typeof t.dataSource&&(t.dataSource=JSON.parse(t.dataSource)),null!==t.dataSource&&Array.isArray(t.dataSource)){t.$.container.innerHTML="";let a=document.createDocumentFragment(),n;for(let o=0;o<t.dataSource.length;o++)n=t._createItem(t.dataSource[o]),a.appendChild(n);return void t._handleSplitterBars(a)}t._handleSplitterBars(t.$.container)}_createBar(t,i){const a=this,n=document.createElement("smart-splitter-bar");return t.collapsed?(n.itemCollapsed=!0,a._items.indexOf(t)===a._items.length-1?n.showNearButton=!0:n.showFarButton=!0):(t.collapsible&&(n.showNearButton=!0),i&&i instanceof Smart.SplitterItem&&i.collapsible&&(i===t.nextElementSibling?n.showFarButton=!0:n.showNearButton=!0)),n}_createItem(t){const i=document.createElement("smart-splitter-item");return t.id&&(i.id=t.id),i.innerHTML=t.content||"",i.collapsible=t.collapsible||!1,i.collapsed=t.collapsed||!1,i.locked=t.locked||!1,t.max&&(i.max=t.max),t.min&&(i.min=t.min),t.size&&(i.size=t.size),i}_completeResizing(t){const i=this;if(i._dragDetails){if(i._splitBarDummy&&i._splitBarDummy.parentElement){if(!t){if(i._dragDetails.firstItem.style[i._measurements.dimension]=(i._dragDetails.firstItem._sizeBeforeCollapse=i._dragDetails.firstItem.currentSize+i._dragDetails.firstItem._paddings)+"px",delete i._dragDetails.firstItem._originalSize,"proportional"!==i.resizeMode)i._dragDetails.secondItem.style[i._measurements.dimension]=(i._dragDetails.secondItem._sizeBeforeCollapse=i._dragDetails.splitAreaSize-i._dragDetails.firstItem.currentSize+i._dragDetails.secondItem._paddings)+"px",delete i._dragDetails.secondItem._originalSize;else{const t=i._dragDetails.itemProportions.length;if(1<t)for(let a=0;a<t;a++)i._dragDetails.itemProportions[a].item.style[i._measurements.dimension]=(i._dragDetails.itemProportions[a].item._sizeBeforeCollapse=i._dragDetails.itemProportions[a].currentSize+i._dragDetails.itemProportions[a].item._paddings)+"px",delete i._dragDetails.itemProportions[a]._originalSize;else i._dragDetails.secondItem[0].style[i._measurements.dimension]=(i._dragDetails.secondItem[0]._sizeBeforeCollapse=Math.floor(i._dragDetails.splitAreaSize-i._dragDetails.firstItem.currentSize+i._dragDetails.firstItem._paddings))+"px",delete i._dragDetails.secondItem[0]._originalSize}i.$.fireEvent("resizeEnd",{firstItem:{index:i._items.indexOf(i._dragDetails.firstItem),oldSize:i._dragDetails.firstItem.originalSize,newSize:i._dragDetails.firstItem[i._measurements.size]},secondItem:Array.isArray(i._dragDetails.secondItem)?{index:i._dragDetails.secondItem.map(t=>i._items.indexOf(t)),oldSize:i._dragDetails.secondItem.map(t=>t.originalSize),newSize:i._dragDetails.secondItem.map(t=>t[i._measurements.size])}:{index:i._items.indexOf(i._dragDetails.secondItem),oldSize:i._dragDetails.secondItem.originalSize,newSize:i._dragDetails.secondItem[i._measurements.size]}})}i._splitBarDummy.classList.remove("limit-reached"),i._splitBarDummy.parentElement.removeChild(i._splitBarDummy)}i.removeAttribute("dragged"),delete i._dragDetails,delete i._keyboardResizing}}_dragStartHandler(t){const i=this;i._dragDetails&&t.preventDefault()}_downHandler(t){const i=this;if(t.stopPropagation(),!i.disabled){if(i._keyboardResizing)return void i._completeResizing();const a=t.originalEvent.target.closest("smart-splitter-bar");if(a&&a.closest("smart-splitter")===i){if(t.originalEvent.target.closest(".smart-splitter-near-collapse-button")===a.$.nearCollapseButton)return void(i._collapseButtonPressed={splitBar:a,item:a.previousElementSibling,target:a.$.nearCollapseButton,farCollapse:!1});if(t.originalEvent.target.closest(".smart-splitter-far-collapse-button")===a.$.farCollapseButton)return void(i._collapseButtonPressed={splitBar:a,item:a.nextElementSibling,target:a.$.farCollapseButton,farCollapse:!0});a.itemCollapsed||a.locked||"none"===i.resizeMode||i._setDragDetails(a,t)}}}_moveHandler(){this.hasAttribute("dragged")&&"touchmove"===event.originalEvent.type&&event.originalEvent.preventDefault()}_documentMoveHandler(t){const i=this;i._keyboardResizing||i._resize(t)}_documentUpHandler(t){const i=this;return(i.removeAttribute("dragging-not-allowed"),i.removeAttribute("show-locked-items"),i.disabled)?(delete i._dragDetails,void delete i._collapseButtonPressed):(i._completeResizing(),i._collapseButtonPressed&&t.originalEvent.target.closest("."+i._collapseButtonPressed.target.classList[0])===i._collapseButtonPressed.target)?(i._collapseButtonPressed.item.collapsed?i.expand(i._collapseButtonPressed.item):i.collapse(i._collapseButtonPressed.item,i._collapseButtonPressed.farCollapse),void delete i._collapseButtonPressed):void 0}_ensureItemsReady(t,i){const a=this,n=function(){const a=function(a){for(let n=0;n<t.length;n++)t[n].context="node"===a?t[n]:document};a("node"),i(),a()};if(0===t.length)n();else{a._nodesReadyListeners=0;for(let o=0;o<t.length;o++){const i=t[o],l=function(){a._nodesReadyListeners--,0===a._nodesReadyListeners&&(n(),delete a._nodesReadyListeners)}.bind(a);i.isCompleted||(a._nodesReadyListeners++,i._onCompleted=l)}0===a._nodesReadyListeners&&n()}}_focusHandler(t){const i=this;"focus"===t.type?i.setAttribute("focus",""):i.removeAttribute("focus")}_getTargetItem(t,i,a){const n=this;for(let o=a?n._items[n._items.length-1]:t[i];o;){if(o instanceof Smart.SplitterItem&&!o.collapsed){if(!o.locked)return o;n._dragDetails&&!n._dragDetails.firstItem&&(n._dragDetails.lockedItemsSize+=o[n._measurements.size]+(o.previousElementSibling instanceof Smart.SplitterBar?o.previousElementSibling[n._measurements.size]:0))}o=o[i]}}_handleSplitterBars(t){const a=this;if(1>a._items.length&&(a._items=t.parentElement?a.items:Array.from(t.children)),a._measurements||a._setMeasurements(),2>a._items.length){const n=a.bars;for(let a=0;a<n.length;a++)t.removeChild(n[a])}for(let n=0;n<a._items.length;n++)if(a._items[n].style[a._measurements.restricredDimension.toLowerCase()]="100%",a._items[n].style["max"+a._measurements.restricredDimension]="none",a._items[n].size||(a._items[n].style[a._measurements.dimension]=a._items[n]._sizeBeforeCollapse?a._items[n]._sizeBeforeCollapse+"px":""),a._items[n].style[a._measurements.maxDimension]=a._items[n].max?a._items[n]._sizeLimits[a._measurements.maxDimension]+"px":"",a._items[n].nextElementSibling&&(a._items[n].nextElementSibling instanceof Smart.SplitterItem?a._items[n].parentNode.insertBefore(a._createBar(a._items[n],a._items[n].nextElementSibling),a._items[n].nextElementSibling):a._items[n].parentNode.removeChild(a._items[n].nextElementSibling)),a._items[n].collapsed){const t=a._items[n].collapsible;a._items[n].style.minWidth=a._items[n].style.minHeight="",a._items[n].style[a._measurements.minDimension]="0",a._items[n]._ignorePropertyValue=!0,a._items[n].collapsible=!0,a._items[n].collapse(),a._items[n].collapsible=t}else a._items[n].style[a._measurements.minDimension]=a._items[n]._sizeLimits&&a._items[n].min?a._items[n]._sizeLimits[a._measurements.minDimension]+"px":"";t.parentElement||a.$.container.appendChild(t),a._ensureItemsReady(a._items,a._validateItemSize.bind(a))}_keyDownHandler(t){const i=this;if(i.disabled)return;if("w"===t.key&&t.altKey){const t=i.querySelector("smart-splitter-bar");return document.activeElement!==t&&i._completeResizing(!0),void i.querySelector("smart-splitter-bar").focus()}let a=document.activeElement;if(!t.ctrlKey&&i._splitBarDummy&&i._splitBarDummy.parentElement)a=i._splitBarDummy;else if(!(a instanceof Smart.SplitterBar))return;if(a.closest("smart-splitter")===i)switch(t.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(("ArrowUp"===t.key||"ArrowDown"===t.key)&&"vertical"===i.orientation)return;if(("ArrowLeft"===t.key||"ArrowRight"===t.key)&&"horizontal"===i.orientation)return;t.preventDefault();const n="ArrowLeft"===t.key||"ArrowUp"===t.key?-1:1;if(t.ctrlKey){i._completeResizing(!0);let t,o;return 0>n?(o=a.previousElementSibling,t=a.nextElementSibling):(t=a.previousElementSibling,o=a.nextElementSibling),void(t.collapsed?t.expand():o.collapse(0<n))}if(a.locked)return;if("none"===i.resizeMode)return;i._keyboardResizing=!0;let o;i._dragDetails?o=i._dragDetails.position+n*i.resizeStep:(i._setDragDetails(a),o=a[i._measurements.offset]+n*i.resizeStep),i._resize({pageX:o,pageY:o});break}case"Enter":i._completeResizing();break;case"Escape":case"Tab":i._completeResizing(!0);}}_mouseEventsHandler(t){"mouseenter"!==t.type||Smart.Utilities.Core.isMobile?this.removeAttribute("hover"):this.setAttribute("hover","")}_recalcItemSize(t,i,a){var n=Math.min,o=Math.max;const l=this;let r,s;if(a||(a=i),0<t)for(let n=0;n<i;n++)s=l._dragDetails.itemProportions[n].item._sizeLimits[l._measurements.minDimension],l._dragDetails.itemProportions[n].currentSize>s&&(r=l._dragDetails.itemProportions[n].currentSize-s<t/a?l._dragDetails.itemProportions[n].currentSize-s:t/a,t-=r,l._dragDetails.itemProportions[n].currentSize=o(s,l._dragDetails.itemProportions[n].currentSize-r),delete l._dragDetails.itemProportions[n]._originalSize),a=o(1,a-1);else{const s=l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize-(1<i?l._dragDetails.secondItemTotalMinSize-l._dragDetails.itemProportions[0].item._sizeLimits[l._measurements.minDimension]:0);let d;for(let m=0;m<i;m++)d=l._dragDetails.itemProportions[m].item._sizeLimits[l._measurements.maxDimension]?n(l._dragDetails.itemProportions[m].item._sizeLimits[l._measurements.maxDimension],s):s,l._dragDetails.itemProportions[m].currentSize<d&&(r=l._dragDetails.itemProportions[m].currentSize-t/a>d?-1*(d-l._dragDetails.itemProportions[m].currentSize):t/a,t-=r,l._dragDetails.itemProportions[m].currentSize=n(d,l._dragDetails.itemProportions[m].currentSize-r),delete l._dragDetails.itemProportions[m]._originalSize),a=o(1,a-1)}.1<Math.abs(t)&&l._recalcItemSize(t,i,a)}_resize(t){var i=Math.min,a=Math.floor,n=Math.abs,o=Math.max;const l=this;if(!l._dragDetails)return;let r=t[l._measurements.pagePosition]-l._dragDetails.position,s;const d=Math.sign(r),m=l._dragDetails.firstItem._sizeLimits[l._measurements.minDimension],c=l._dragDetails.firstItem._sizeLimits[l._measurements.maxDimension];let u,p;if(l.hasAttribute("dragged")||l.$.fireEvent("resizeStart",{firstItem:{index:l._items.indexOf(l._dragDetails.firstItem),size:l._dragDetails.firstItem[l._measurements.size]},secondItem:Array.isArray(l._dragDetails.secondItem)?{index:l._dragDetails.secondItem.map(t=>l._items.indexOf(t)),size:l._dragDetails.secondItem.map(t=>t[l._measurements.size])}:{index:l._items.indexOf(l._dragDetails.secondItem),size:l._dragDetails.secondItem[l._measurements.size]}}),l.setAttribute("dragged",""),n(r)<l.resizeStep)return;let g=o(l.resizeStep,a(n(r)/l.resizeStep)*l.resizeStep);const h=r-d*g;switch(l.resizeMode){case"adjacent":case"end":for(0<d?(u=l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize,p=()=>u-l._dragDetails.secondItemTotalMinSize>=g||c&&l._dragDetails.firstItem.currentSize+l.resizeStep<=c,s=()=>c&&l._dragDetails.firstItem.currentSize===c||u-l.resizeStep<=l._dragDetails.secondItemTotalMinSize):(u=l._dragDetails.firstItem.currentSize,p=()=>u-m>=g||l._dragDetails.secondItemTotalMaxSize&&l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize+l.resizeStep<=l._dragDetails.secondItemTotalMaxSize,s=()=>l._dragDetails.secondItemTotalMaxSize&&l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize===l._dragDetails.secondItemTotalMaxSize||u-l.resizeStep<=m),r=0;0<g;)p()&&(r+=d*l.resizeStep),g-=l.resizeStep;l._resizeItem(t,r,h);break;case"proportional":{const r=l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize;0<d?(u=n(r-l._dragDetails.secondItemTotalMinSize),p=()=>u>=g||c&&l._dragDetails.firstItem.currentSize+l.resizeStep<=c,s=()=>c&&l._dragDetails.firstItem.currentSize===c||l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize-l.resizeStep<l._dragDetails.secondItemTotalMinSize):(u=l._dragDetails.firstItem.currentSize,p=()=>u-m>=g&&(!l._dragDetails.secondItemTotalMaxSize||l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize+l.resizeStep<=l._dragDetails.secondItemTotalMaxSize),s=()=>l._dragDetails.secondItemTotalMaxSize&&l._dragDetails.splitAreaSize+l.resizeStep-l._dragDetails.firstItem.currentSize>=l._dragDetails.secondItemTotalMaxSize||l._dragDetails.firstItem.currentSize-l.resizeStep<m);let _,f;for(;0<g;)p()&&(f=!0,_=i(c?i(c,l._dragDetails.splitAreaSize-l._dragDetails.secondItemTotalMinSize):l._dragDetails.splitAreaSize-l._dragDetails.secondItemTotalMinSize,o(m,l._dragDetails.firstItem.currentSize+d*l.resizeStep)),l._dragDetails.firstItem.currentSize=l._dragDetails.firstItem._sizeBeforeCollapse=a(_)),g-=l.resizeStep;if(!f)break;const b=l._dragDetails.splitAreaSize-l._dragDetails.firstItem.currentSize,y=l._dragDetails.itemProportions.length;if(l._recalcItemSize(r-b,y),!l.liveResize)l._splitBarDummy.style[l._measurements.position]=l._dragDetails.firstItem[l._measurements.offset]+l._dragDetails.firstItem.currentSize+l._dragDetails.lockedItemsSize+l._dragDetails.firstItem._paddings+"px";else if(l._dragDetails.firstItem.style[l._measurements.dimension]=l._dragDetails.firstItem.currentSize+l._dragDetails.firstItem._paddings+"px",1<y)for(let t=0;t<y;t++)l._dragDetails.itemProportions[t].item.style[l._measurements.dimension]=l._dragDetails.itemProportions[t].item._sizeBeforeCollapse=l._dragDetails.itemProportions[t].currentSize+l._dragDetails.itemProportions[t].item._paddings+"px";else l._dragDetails.secondItem[0].style[l._measurements.dimension]=(l._dragDetails.secondItem[0]._sizeBeforeCollapse=a(b+l._dragDetails.itemProportions[0].item._paddings))+"px";const v=l._dragDetails.firstItem.getBoundingClientRect()["vertical"===l.orientation?"left":"top"]+l._dragDetails.splitBarOffset,w=c&&l._dragDetails.splitAreaSize-c>l._dragDetails.secondItemTotalMinSize?c:l._dragDetails.splitAreaSize-l._dragDetails.secondItemTotalMinSize;l._dragDetails.position=o(v+(l._dragDetails.secondItemTotalMaxSize?o(l._dragDetails.splitAreaSize-l._dragDetails.secondItemTotalMaxSize,m):m)+l._dragDetails.lockedItemsSize+l._dragDetails.firstItem._paddings,i(v+w+l._dragDetails.lockedItemsSize+l._dragDetails.firstItem._paddings,t[l._measurements.pagePosition]-h));break}}l.liveResize||(s()?l._splitBarDummy.classList.add("limit-reached"):l._splitBarDummy.classList.remove("limit-reached")),l._validateBarsSize()}_resizeEventHandler(){const t=this;t._resizeEventFired=!0,t._validateItemSize(),t._resizeEventFired=!1}_resizeHostItemOnInsert(t,i,a){const n=this;if("proportional"===n.autoFitMode)return void n._autoFitItemsProportionally(i,a);if(t&&!t.locked){if(i.size){const a=function(){for(let t=i.previousElementSibling;t;){if(t instanceof Smart.SplitterItem&&!t.size)return t;t=t.previousElementSibling}}();t=a||t}const o=t[n._measurements.size]-i[n._measurements.size]-a[n._measurements.size],l=Math.max(t._sizeLimits[n._measurements.minDimension],o);t.style[n._measurements.maxDimension]=t.max?isNaN(parseFloat(t.max))?"":"string"==parseFloat(t.max)+typeof t.max&&-1<t.max.indexOf("%")?"%":"px":"";const r=t.style[n._measurements.maxDimension]?parseFloat(t.style[n._measurements.maxDimension]):0;i.size?t.style[n._measurements.dimension]=(t._sizeBeforeCollapse=r?Math.min(r,l):l)+"px":(t.style[n._measurements.dimension]=t.size?"auto"===t.size?t.size:isNaN(parseFloat(t.size))?0:parseFloat(t.size)+("string"==typeof t.size&&-1<t.size.indexOf("%")?"%":"px"):"",t._sizeBeforeCollapse=t[n._measurements.size])}}_resizeItem(t,i,a){var n=Math.min,o=Math.max;const l=this;let r=o(l._dragDetails.firstItem._sizeLimits[l._measurements.minDimension],n(l._dragDetails.splitAreaSize-l._dragDetails.secondItem._sizeLimits[l._measurements.minDimension],l._dragDetails.firstItem._sizeLimits[l._measurements.maxDimension]?n(l._dragDetails.firstItem._sizeLimits[l._measurements.maxDimension],l._dragDetails.firstItem.currentSize+i):l._dragDetails.firstItem.currentSize+i)),s=l._dragDetails.firstItem._sizeLimits[l._measurements.minDimension];l._dragDetails.secondItem._sizeLimits[l._measurements.maxDimension]&&l._dragDetails.splitAreaSize-r>l._dragDetails.secondItem._sizeLimits[l._measurements.maxDimension]&&(s=r=l._dragDetails.splitAreaSize-l._dragDetails.secondItem._sizeLimits[l._measurements.maxDimension]),l._dragDetails.firstItem.currentSize=r,l.liveResize?(l._dragDetails.firstItem.style[l._measurements.dimension]=(l._dragDetails.firstItem._sizeBeforeCollapse=r+l._dragDetails.firstItem._paddings)+"px",l._dragDetails.secondItem.style[l._measurements.dimension]=(l._dragDetails.secondItem._sizeBeforeCollapse=l._dragDetails.splitAreaSize-r+l._dragDetails.firstItem._paddings)+"px",delete l._dragDetails.firstItem._originalSize,delete l._dragDetails._originalSize):l._splitBarDummy.style[l._measurements.position]=l._dragDetails.firstItem[l._measurements.offset]+r+l._dragDetails.lockedItemsSize+l._dragDetails.firstItem._paddings+"px";const d=l._dragDetails.firstItem.getBoundingClientRect()["vertical"===l.orientation?"left":"top"]+l._dragDetails.splitBarOffset;l._dragDetails.position=o(d+s+l._dragDetails.firstItem._paddings,n(d+l._dragDetails.splitAreaSize-l._dragDetails.secondItem._sizeLimits[l._measurements.minDimension]+l._dragDetails.lockedItemsSize+l._dragDetails.firstItem._paddings,t[l._measurements.pagePosition]-a)),l._dragDetails.firstItem._sizeLimits[l._measurements.maxDimension]&&(l._dragDetails.position=n(d+l._dragDetails.firstItem._sizeLimits[l._measurements.maxDimension],l._dragDetails.position))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_setDragDetails(t,i){const a=this;if(a._dragDetails={},a._measurements||a._setMeasurements(),a._dragDetails.scrollAmount=t.parentElement[a._measurements.scroll],a._dragDetails.lockedItemsSize=0,a.setAttribute("show-locked-items",""),!(a._dragDetails.firstItem=a._getTargetItem(t,"previousElementSibling")))return delete a._dragDetails,void a.setAttribute("dragging-not-allowed","");a._dragDetails.firstItem.currentSize=a._dragDetails.firstItem[a._measurements.size],a._dragDetails.firstItem.originalSize=a._dragDetails.firstItem.currentSize;let n=getComputedStyle(a._dragDetails.firstItem);if(a._dragDetails.firstItem._paddings=(parseFloat(n.getPropertyValue("padding-"+a._measurements.position))||0)+(parseFloat(n.getPropertyValue("padding-"+a._measurements.position2))||0),a._dragDetails.firstItem.currentSize<a._dragDetails.firstItem._sizeLimits[a._measurements.minDimension])return void delete a._dragDetails;if(a._dragDetails.firstItem.currentSize-=a._dragDetails.firstItem._paddings,a._dragDetails.splitAreaSize=0,a._dragDetails.secondItemTotalMaxSize=0,a._dragDetails.secondItemTotalMinSize=0,"proportional"===a.resizeMode){if(a._setProportionalDetails())return;}else if(a._setAdjacentOrEndDetails(t))return;let o;i&&"object"==typeof i?o=t.getBoundingClientRect()[a._measurements.position]:(i={pageX:t[a._measurements.offset],pageY:t[a._measurements.offset]},o=t[a._measurements.offset]),a._dragDetails.position=i[a._measurements.pagePosition],a._dragDetails.splitBarOffset=a._dragDetails.position-o,a.liveResize||(!a._splitBarDummy&&(a._splitBarDummy=document.createElement("div"),a._splitBarDummy.classList.add("smart-splitter-bar-feedback")),a._splitBarDummy.style.width=t.offsetWidth+"px",a._splitBarDummy.style.height=t.offsetHeight+"px",a._splitBarDummy.style.top=t.offsetTop+"px",a._splitBarDummy.style.left=t.offsetLeft+"px",t.parentElement.appendChild(a._splitBarDummy))}_setAdjacentOrEndDetails(t){const i=this;if(!(i._dragDetails.secondItem="adjacent"===i.resizeMode?i._getTargetItem(t,"nextElementSibling"):i._getTargetItem(t,"previousElementSibling",!0)))return delete i._dragDetails,i.setAttribute("dragging-not-allowed",""),!0;i._dragDetails.secondItem.currentSize=i._dragDetails.secondItem[i._measurements.size],i._dragDetails.secondItem.originalSize=i._dragDetails.secondItem.currentSize;const a=getComputedStyle(i._dragDetails.secondItem);i._dragDetails.secondItem._paddings=(parseFloat(a.getPropertyValue("padding-"+i._measurements.position))||0)+(parseFloat(a.getPropertyValue("padding-"+i._measurements.position2))||0),i._dragDetails.secondItem.currentSize-=i._dragDetails.secondItem._paddings,i._dragDetails.splitAreaSize=i._dragDetails.firstItem.currentSize+i._dragDetails.secondItem.currentSize,i._dragDetails.secondItemTotalMaxSize=i._dragDetails.secondItem._sizeLimits[i._measurements.maxDimension],i._dragDetails.secondItemTotalMinSize=i._dragDetails.secondItem._sizeLimits[i._measurements.minDimension]}_setMeasurements(){const t=this;t._measurements={},"horizontal"===t.orientation?(t._measurements.dimension="height",t._measurements.minDimension="minHeight",t._measurements.maxDimension="maxHeight",t._measurements.restricredDimension="Width",t._measurements.size="offsetHeight",t._measurements.offset="offsetTop",t._measurements.position="top",t._measurements.position2="bottom",t._measurements.pagePosition="pageY",t._measurements.scroll="scrollTop"):(t._measurements.dimension="width",t._measurements.minDimension="minWidth",t._measurements.maxDimension="maxWidth",t._measurements.restricredDimension="Height",t._measurements.size="offsetWidth",t._measurements.offset="offsetLeft",t._measurements.position="left",t._measurements.position2="right",t._measurements.pagePosition="pageX",t._measurements.scroll="scrollLeft"),t._measurements.overflow=getComputedStyle(t).getPropertyValue("overflow")}_setProportionalDetails(){const t=this;if(t._dragDetails.secondItem=t._items.slice(t._items.indexOf(t._dragDetails.firstItem)+1).filter(t=>!t.collapsed&&!t.locked),0===t._dragDetails.secondItem.length)return delete t._dragDetails,!0;t._dragDetails.splitAreaSize+=t._dragDetails.firstItem.currentSize,t._dragDetails.itemProportions=[];let a;for(let n=0;n<t._dragDetails.secondItem.length;n++){t._dragDetails.secondItem[n].currentSize=t._dragDetails.secondItem[n][t._measurements.size],t._dragDetails.secondItem[n].originalSize=t._dragDetails.secondItem[n].currentSize;const i=getComputedStyle(t._dragDetails.secondItem[n]);t._dragDetails.secondItem[n]._paddings=(parseFloat(i.getPropertyValue("padding-"+t._measurements.position))||0)+(parseFloat(i.getPropertyValue("padding-"+t._measurements.position2))||0),t._dragDetails.secondItem[n].currentSize-=t._dragDetails.secondItem[n]._paddings,t._dragDetails.splitAreaSize+=t._dragDetails.secondItem[n].currentSize,t._dragDetails.itemProportions.push({item:t._dragDetails.secondItem[n],currentSize:t._dragDetails.secondItem[n].currentSize}),t._dragDetails.secondItem[n]._sizeLimits[t._measurements.maxDimension]||(a=!0),t._dragDetails.secondItemTotalMinSize+=t._dragDetails.secondItem[n]._sizeLimits[t._measurements.minDimension],t._dragDetails.secondItemTotalMaxSize+=t._dragDetails.secondItem[n]._sizeLimits[t._measurements.maxDimension]}a&&(t._dragDetails.secondItemTotalMaxSize=0)}_validateBarsSize(){const t=this;let a=t._items[0];const n="offset"+t._measurements.restricredDimension,i=t.bars;if(0!==i.length){for(let o=0;o<t._items.length;o++)t._items[o][n]>a[n]&&(a=t._items[o]);a[n]!==i[0][n]&&i.map(i=>i.style[t._measurements.restricredDimension.toLowerCase()]=a[n]+"px")}}_validateItemSize(t){const i=this;if("overflow"!==i.autoFitMode){if(i.keepProportionsOnResize&&i._resizeEventFired)i._keepItemProportionsOnResize();else{let a=0,n=0;i._items.map(t=>a+=t.collapsed?0:t.style[i._measurements.dimension]&&-1>t.style[i._measurements.dimension].indexOf("%")&&t._sizeBeforeCollapse?t._sizeBeforeCollapse:t.getBoundingClientRect()[i._measurements.dimension]),i.bars.map(t=>n+=t[i._measurements.size]);let o=a+n-i.$.container.getBoundingClientRect()[i._measurements.dimension];0<o?i._validateItemsSizeOverflowing(o,t):i._validateItemsSizeUnderflowing(o,t)}i._autoFitItems(),i._validateBarsSize(),i._splitterSize=i[i._measurements.size]}}_keepItemProportionsOnResize(){const t=this;let i=0,a=0,n=[];t.bars.map(a=>i+=a[t._measurements.size]);for(let o=0;o<t._items.length;o++)t._items[o].collapsed||(n.push(t._items[o]),a+=t._items[o]._sizeBeforeCollapse||t._items[o][t._measurements.size]);t._splitterSize&&(a=t._splitterSize);const o=t[t._measurements.size];for(let l=0;l<n.length;l++)-1<n[l].style[t._measurements.dimension].indexOf("%")||(n[l].style[t._measurements.dimension]=(n[l]._sizeBeforeCollapse=(n[l]._sizeBeforeCollapse||n[l][t._measurements.size])/a*o)+"px")}_validateItemsSizeOverflowing(t,a){var n=Math.max;const o=this,l=o._items.length;let r=0,s=[],d=o.$.container.getBoundingClientRect(),m,c,u;for(let n=0;n<o._items.length;n++)u=o._items[n].style[o._measurements.dimension],c=-1<u.indexOf("%")?u:o._items[n][o._measurements.size],o._items[n]._originalSize=o._items[n]._originalSize?o._items[n]._originalSize:c,s.push(o._items[n].locked);0>s.indexOf(!1)&&(o._items[o._items.length-1].locked=!1);for(let s=l-1;0<=s;s--)if(!(o._items[s].collapsed||o._items[s].locked)){if(-1<(o._items[s]._originalSize+"").indexOf("%")){o._items[s].style[o._measurements.dimension]=o._items[s]._originalSize,o._items[s]._sizeBeforeCollapse=d[o._measurements.dimension]*parseFloat(o._items[s]._originalSize)/100;continue}0!==t&&(m=o._items[s].getBoundingClientRect()[o._measurements.dimension],r=m-t,o._items[s].style[o._measurements.dimension]=(o._items[s]._sizeBeforeCollapse=n(o._items[s]._sizeLimits?o._items[s]._sizeLimits[o._measurements.minDimension]:0,r))+"px",t-=m-o._items[s]._sizeBeforeCollapse)}if(0<t)for(let s=l-1;0<=s;s--){if(o._items[s].collapsed)continue;m=o._items[s].getBoundingClientRect()[o._measurements.dimension],r=m-t;let i=o._items[s]._sizeLimits[o._measurements.minDimension]||o._items[s].min;(i&&(i=-1<(i+"").indexOf("%")?parseFloat(i)/100*o._items[s].parentElement[o._measurements.size]:parseFloat(i),i>r&&(o._items[s]._sizeLimits.ignoreUpdate=!a,o._items[s].style[o._measurements.minDimension]=n(0,r)+"px")),!(o._items[s]._originalSize&&-1<(o._items[s]._originalSize+"").indexOf("%")))&&(o._items[s]._sizeLimits.ignoreUpdate=!a,o._items[s].style[o._measurements.dimension]=(o._items[s]._sizeBeforeCollapse=n(0,r))+"px",t-=m-o._items[s]._sizeBeforeCollapse)}}_validateItemsSizeUnderflowing(t,a){var n=Math.min,o=Math.max;const l=this,r=l._items.length;let s=0,d;t=Math.abs(t),0<l._items.length&&0>l._items.map(t=>t.locked).indexOf(!1)&&(l._items[l._items.length-1].locked=!1);for(let m=0;m<r&&!(!(l._items[m].collapsed||l._items[m][l._measurements.size]>=(l._items[m]._sizeLimits?l._items[m]._sizeLimits[l._measurements.minDimension]:0))&&(d=l._items[m][l._measurements.size],s=l._items[m][l._measurements.size]+t,l._items[m][l._measurements.size]<l._items[m]._sizeLimits[l._measurements.minDimension]&&(l._items[m]._sizeLimits.ignoreUpdate=!a,l._items[m].style[l._measurements.minDimension]=(l._items[m]._sizeBeforeCollapse=o(0,n(l._items[m]._sizeLimits[l._measurements.minDimension],s)))+"px"),t-=(l._items[m]._sizeBeforeCollapse||l._items[m][l._measurements.size])-d,0>=t));m++);const m=l.$.container.getBoundingClientRect()[l._measurements.dimension];if(0<t)for(let a=0;a<r;a++)if(!(l._items[a].collapsed||l._items[a].locked)&&void 0!==l._items[a]._originalSize){if(-1<(l._items[a]._originalSize+"").indexOf("%"))l._items[a].style[l._measurements.dimension]=l._items[a]._originalSize,l._items[a]._sizeBeforeCollapse=parseFloat(l._items[a]._originalSize)*m/100;else if(l._items[a][l._measurements.size]>=l._items[a]._originalSize)t+=l._items[a][l._measurements.size]-l._items[a]._originalSize,l._items[a].style[l._measurements.dimension]=(l._items[a]._sizeBeforeCollapse=l._items[a]._originalSize)+"px";else{s=n(l._items[a]._originalSize,l._items[a][l._measurements.size]+t);const i=s-l._items[a][l._measurements.size];l._items[a][l._measurements.minDimension]<l._items[a]._sizeLimits[l._measurements.minDimension]&&(l._items[a].style[l._measurements.minDimension]=n(l._items[a]._sizeLimits[l._measurements.minDimension],s)+"px"),l._items[a].style[l._measurements.dimension]=(l._items[a]._sizeBeforeCollapse=o(0,n(s,l._items[a]._originalSize)))+"px",t-=i}if(0>=t)break}}}),Smart("smart-table",class extends Smart.ContentElement{static get properties(){return{columns:{value:null,type:"any?",reflectToAttribute:!1},dataSource:{value:null,type:"any?",reflectToAttribute:!1},sortMode:{value:"none",type:"string",allowedValues:["none","one","many"]}}}static get listeners(){return{"tableContainer.down":"downHandler"}}template(){return`<div id="container" class="smart-container">
					   <table id="tableContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-table-container">
							<content></content>
                       </table>              
                </div>`}ready(){const t=this;t.dataBind()}_initColumns(){const t=this;t._columns=[],t.columnByDataField=[];for(let a=0,i;a<t.columns.length;a++){if(i=t.columns[a],"string"==typeof i&&t.dataSource.dataFields){const a=t.dataSource.dataFields.find(t=>{if(t.name===i)return t});i={label:i,dataField:i,dataType:a?a.dataType||"string":"string"}}t._columns.push(i),t.columnByDataField[i.dataField]=i}}_initRows(){const t=this;t.rows=[],t.rowById=[];const a=function(i,a){const n={data:i,boundIndex:a};t.rowById[n.uid]=n,t.rows.push(n)},i=function(){const i=t.rows[t.rows.length-1];delete t.rowById[i.uid],t.rows.pop()},n=function(i){const a=t.rows[t.rows.length-1];delete t.rowById[a.uid],t.rows.splice(i,1)};for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n];a(i,n)}t.dataSource.notify(function(o){if(!t.dataSource._updating){const l=o.data;switch(t.rows.canNotify=!1,o.action){case"add":if(l.length)for(let n=0;n<l.length;n++)a(l[n],t.dataSource.length-l.length+n);else a(l,t.dataSource.length-1);break;case"update":if(l.length)for(let a=0;a<l.length;a++){const i=o.index[a];t.rows[i].data=l[a]}else{const i=o.index;t.rows[i].data=l}break;case"insert":a(l,o.index);for(let a=0;a<t.rows.length;a++){const i=t.rows[a];i.dataIndex=a}break;case"remove":n(o.index);break;case"removeLast":i();}t.rows.canNotify=!0,t.refresh()}}),t.rows=new Smart.ObservableArray(t.rows);for(let a=0;a<t.rows.length;a++){const i=t.rows[a];i.propertyChanged=function(){}}t.rows.notify(function(i){if(t.rows.canNotify&&!i.path){t.rows.canNotify=!1;const a=i.action;t.dataSource&&(t.dataSource.canNotify=!1,"add"===a?t.dataSource.add(t.rows[i.index]):"update"===a?t.dataSource.update(i.index,t.rows[i.index]):"remove"===a?t.dataSource.remove(i.index):void 0,t.dataSource.canNotify=!0,t.rows.canNotify=!0,t.refresh())}})}downHandler(){}refresh(){const t=this;let a="<thead><tr>",n="<tbody>";for(let n=0;n<t._columns.length;n++){const i=t._columns[n];a+="<th scope=\"col\">"+i.label+"</th>"}a+="</tr></thead>";for(let a=0;a<t.rows.length;a++){const i=t.rows[a];n+="<tr>";for(let a=0;a<t._columns.length;a++){const o=t._columns[a];n+="<td>"+i.data[o.dataField]+"</td>"}n+="</tr>"}n+="</tbody>",t.innerHTML=a+n;const o=t.querySelectorAll("th");for(let a=0;a<t._columns.length;a++){const i=t._columns[a];i.headerCellElement=o[a],i.headerCellElement.onclick=function(){"none"===t.sortMode||(!this.headerCellElement.sortIconContainerElement&&(this.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",this.headerCellElement.sortIconContainerElement=this.headerCellElement.lastChild),this.headerCellElement.sortIconContainerElement.classList.contains("asc")?t.sortBy(this.dataField,"desc"):this.headerCellElement.sortIconContainerElement.classList.contains("desc")?t.sortBy(this.dataField,null):t.sortBy(this.dataField,"asc"))}.bind(i)}if(t._sortColumns&&0<t._sortColumns.length)for(let a=0;a<t._sortColumns.length;a++){const i=t._sortColumns[a],n=t.columnByDataField[i.dataField];n.headerCellElement.sortIconContainerElement||(n.headerCellElement.innerHTML+="<span class=\"sort-by "+i.direction+"\"></span>",n.headerCellElement.sortIconContainerElement=n.headerCellElement.lastChild)}}dataBind(){const t=this;if(!t.dataSource){if(!t.columns){t.columns=[],t.dataFields=[];const a=document.querySelectorAll("th");for(let n=0;n<a.length;n++){const i=a[n].innerHTML.trim();t.columns.push({label:i,dataField:i,dataType:"string"}),t.dataFields.push(i)}}let i=[];if(!t.rows){const a=document.querySelectorAll("tr");for(let n=0;n<a.length;n++){const o=a[n],l={},r=o.querySelectorAll("td");if(0<r.length){for(let i=0;i<t.columns.length;i++){const a=t.columns[i];l[a.dataField]=r[i].innerHTML.trim()}i.push(l)}}t.dataSource=new Smart.DataAdapter({dataSource:i,dataFields:t.dataFields})}const a=t.querySelectorAll("table");1<a.length&&a[a.length-1].parentNode.removeChild(a[a.length-1])}t._initColumns(),t._initRows(),t.refresh()}sortBy(t,i){const a=this,n=a.columnByDataField[t],o=[],l=[],r=[];if("none"===a.sortMode)return;let s=i||"asc";const d=function(t){t.headerCellElement.sortIconContainerElement||(t.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",t.headerCellElement.sortIconContainerElement=t.headerCellElement.lastChild)},m=function(t){d(t),t.headerCellElement.sortIconContainerElement.classList.remove("desc"),t.headerCellElement.sortIconContainerElement.classList.remove("asc"),t.sortOrder=null},c=function(){if(0<a._sortColumns.length)for(let t=0;t<a._sortColumns.length;t++){const i=a._sortColumns[t],n=a.columnByDataField[i.dataField];m(n)}a._sortColumns=[]};if(null===n)return void c();if("none"===a.sortMode||!a.dataSource)return;m(n),a._sortColumns||(a._sortColumns=[]);let u="string";for(let n=0;n<a.dataSource.dataFields.length;n++){const i=a.dataSource.dataFields[n];if(i.name===t){u=i.dataType;break}}let p=!0;for(let o=0;o<a._sortColumns.length;o++){const i=a._sortColumns[o];if(i.dataField===t)if(p=!1,"asc"===i.direction)i.direction="desc",s="desc";else if("desc"===i.direction){a._sortColumns.splice(o,1),m(n),s=null;break}}p&&("one"===a.sortMode&&c(),a._sortColumns.push({dataField:t,direction:s,dataType:u})),d(n),null===s?(n.headerCellElement.sortIconContainerElement.classList.remove("asc"),n.headerCellElement.sortIconContainerElement.classList.remove("desc")):(n.headerCellElement.sortIconContainerElement.classList.remove("asc"),n.headerCellElement.sortIconContainerElement.classList.remove("desc"),n.sortOrder=s,"desc"===s?n.headerCellElement.sortIconContainerElement.classList.add("desc"):n.headerCellElement.sortIconContainerElement.classList.add("asc"));for(let n=0;n<a._sortColumns.length;n++){const t=a._sortColumns[n];o.push(t.dataField),l.push(t.direction),r.push(t.dataType)}(function(){a.dataSource._sort(a.dataSource.boundSource,o,l,r);for(let t=0;t<a.dataSource.length;t++){const i=a.rows[t],n=a.dataSource[t];i.data=n,i.boundIndex=n.boundIndex}a.refresh()})()}}),Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}attached(){const t=this;super.attached();t.isCompleted&&(t.$.removeClass("right"),t.$.removeClass("left"),t.$.removeClass("top"),t.$.removeClass("bottom"),t.$.removeClass("animate"))}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;if(n._preventPropertyChangedHandler)return void delete n._preventPropertyChangedHandler;switch(t){case"closeButtonHidden":n.$.fireEvent("closeButtonVisibilityChange",{hidden:a});break;case"index":n.$.fireEvent("indexChange",{newIndex:a,oldIndex:i,tabItem:n});break;case"label":break;case"labelSize":n.$.fireEvent("labelSizeChange",{size:a});}}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}i.firstElementChild.appendChild(t)}_setIndex(t){const i=this,a=i.context;i.context=i,i.index=t,i.context=a}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}template(){return""}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;if(n._preventPropertyChangedHandler)return void delete n._preventPropertyChangedHandler;switch(t){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:a});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},scrollMode:{value:"paging",allowedValues:["paging","continuous"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropDown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonClickHandler","scrollButtonNear.click":"_scrollButtonClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.tabs.css"]}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-header smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-drop-down-button-arrow smart-unselectable"></div>
                            </div>
                            <span id="tabSelectionBar" class="smart-tabs-selection-bar"></span>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section">
                       <content></content>
                    </div>
                    <div id="dropDownButtonDropDown" class="smart-drop-down-button-drop-down smart-hidden"></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}attached(){const t=this;super.attached();t.isCompleted&&t._applyTabOverflow()}ready(){super.ready();const t=this;t._flexWritingModeNoFullSupport=!0,t._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},t._createElement()}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||i.error(i.localize("tabItemRequired",{method:"appendChild"})),i.insert(i._tabs.length,{node:t})}collapse(){const t=this;!t.collapsible||t.collapsed||(t.collapsed=!0)}ensureVisible(t){var i=Math.round;const a=this;if(null!==t&&"wrap"!==a.tabLayout&&"shrink"!==a.tabLayout&&"hidden"!==a.tabPosition){a._validateIndex(t,"ensureVisible"),t=Math.max(0,Math.min(t,a._tabs.length-1));const n=a._tabs[t].group,o=a.$.tabStrip,l=o.getBoundingClientRect(),r=null===n?a._tabLabelContainers[t]:a._groupLabels[a._groups.indexOf(n)],s=r.getBoundingClientRect();("top"===a.tabPosition||"bottom"===a.tabPosition)&&(l.left>s.left||l.right<s.right)?o.scrollLeft+=i(s.right-o.offsetWidth-l.left):("left"===a.tabPosition||"right"===a.tabPosition)&&(l.top>s.top||l.bottom<s.bottom)&&(o.scrollTop+=i(s.bottom-o.offsetHeight-l.top)),a._updateScrollButtonVisibility(),a.resize&&a._getTabCoordinates()}}expand(){const t=this;t.collapsible&&t.collapsed&&(t.collapsed=!1)}getOffsetFromEdgeOfElement(t){const i=this;i._validateIndex(t,"getOffsetFromEdgeOfElement"),t=Math.max(0,Math.min(t,i._tabs.length-1));const a=i._tabs[t],n=i.tabPosition;return"hidden"===n?a.getBoundingClientRect().top-i.getBoundingClientRect().top:Math.abs(a.getBoundingClientRect()[n]-i.getBoundingClientRect()[n])}insert(t,i){const a=this;let n,o;if(a._validateIndex(t,"insert"),(void 0===i||void 0===i.label&&void 0===i.content&&void 0===i.node)&&a.error(a.localize("detailsObjectRequired")),void 0===i.node)n=i.group,o=document.createElement("smart-tab-item"),o.label=void 0===i.label?"":i.label,o.labelSize=void 0===i.labelSize?null:i.labelSize,o.content=i.content;else if(o=i.node,void 0!==o.index&&null!==o.index){const t=o.context;o.context=o,o.index=null,o.context=t}o.$.addClass("smart-visibility-hidden"),o.group=null;const l=a._addTabLabelContainer(o),r=l.tabLabelContainer,s=l.dropDownLabelContainer;r.tab=o,o.tabLabelContainer=r;const d={index:t,tab:o,tabLabelContainer:r,dropDownLabelContainer:s};if(0===a._groups.length&&void 0===n)a._insertNoGrouping(d);else if(void 0!==n&&null!==n){d.group=n;const t=a.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+n+"\"]");null===t?a._insertIntoNewGroup(d):(d.smartTabItemsGroup=t,a._insertIntoExistingGroup(d))}else a._insertNearAGroup(d);a._getReorderItems(),null===a.selectedIndex&&!a.allowToggle&&a._tabs.length&&a._select(0,!0),null!==o.group&&null!==o.labelSize&&"shrink"!==a.tabLayout&&r.style.removeProperty([a._orientationSettings.dimension]),a._applyTabOverflow()}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem&&(i===void 0||null===i||i instanceof Smart.TabItem)||a.error(a.localize("tabItemRequired",{method:"insertBefore"}));let n;a.contains(t)&&(t.selected&&(n=!0),a.remove(t.index)),i!==void 0&&null!==i?(!a.contains(i)&&a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(i.index,{node:t})):a.insert(a._tabs.length,{node:t}),n&&a._select(t.index,!1)}remove(t){const i=this,a=i._tabs.length;if(0!==a){i._validateIndex(t,"remove"),t=Math.max(0,Math.min(t,a-1));const n=i._tabs[t],o=i._tabLabelContainers[t];if(o.parentElement.removeChild(o),n.parentElement.removeChild(n),null!==n.group){const t=i.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+n.group+"\"]");if(0===t.childElementCount){const a=i._groups.indexOf(n.group);i.$.tabStrip.removeChild(i._groupLabels[a]),i._groups.splice(a,1),i.$.container.removeChild(i._groupLabels[0].dropDown),i._groupLabels.splice(a,1),i.$.tabContentSection.removeChild(t)}}1<a?t<i.selectedIndex?i.selectedIndex--:t===i.selectedIndex&&(t===a-1?i._select(t-1,!1):(i._select(t+1,!1),i.selectedIndex--)):(i.selectedIndex=null,i.$.tabContentSection.innerHTML=""),i._tabLabelContainers.splice(t,1),i.$.dropDownButtonDropDown.removeChild(i.$.dropDownButtonDropDown.children[t]),i._tabs.splice(t,1),i._focusedItem===n&&(i._focusedItem=i._tabs[i._focusedItem.index]),i._updateTabIndexes(),i._getReorderItems(),i._applyTabOverflow(),i.ensureVisible(i.selectedIndex)}}removeChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||i.error(i.localize("tabItemRequired",{method:"removeChild"})),i.contains(t)||i.error(i.localize("referenceNodeNotChild",{argument:"node"})),i.remove(t.index)}select(t){const i=this;0===i._tabs.length||(i._validateIndex(t,"select"),t=Math.max(0,Math.min(t,i._tabs.length-1)),i.ensureVisible(t),i._select(t,!0))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void((null===t.getAttribute("tabindex")||0>t.getAttribute("tabindex"))&&t.setAttribute("tabindex",0))}update(t,i,a){const n=this;if(0!==n._tabs.length){n._validateIndex(t,"update"),t=Math.max(0,Math.min(t,n._tabs.length-1));const o=n._tabs[t];if(void 0!==i&&o.label!==i){const a=n._tabLabelContainers[t].firstElementChild.children[0],l=n.$.dropDownButtonDropDown.children[t];o.label=i,a.innerHTML="",l.innerHTML="",n._setLabel(i,a,l),n._applyTabOverflow()}void 0!==a&&(o.content=a)}}_createElement(){const t=this;t.disabled&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0),t._handlePosition(t.tabPosition),t._handleScrollButtonsPosition(t.scrollButtonsPosition,"both"),null!==t.dataSource&&t._processDataSource(),t._setFocusable(),t.collapsed&&!t.collapsible&&(t.collapsed=!1),t.collapsible&&t.allowToggle&&(t.allowToggle=!1),t._processHTML(),null===t.selectedIndex&&t.$.tabContentSection.setAttribute("show-placeholder","")}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"addNewTab":a?n._insertAddNewTab():(n.$.tabStrip.removeChild(n._addNewTab),delete n._addNewTab),n._applyTabOverflow();break;case"allowToggle":a&&n.collapsible?(n.collapsed&&n._toggleCollapsedState(),n.collapsible=!1):!a&&null===n.selectedIndex&&(n.ensureVisible(n.selectedIndex=0),n._select(n.selectedIndex,!0,null));break;case"closeButtonMode":if("selected"===a){for(let t=0;t<n._tabs.length;t++)n._disableCloseButton(t);n._enableCloseButton(n.selectedIndex)}else{n._disableCloseButton(n.selectedIndex);const t=n._tabLabelContainers;for(let a=0;a<t.length;a++){const i=t[a];i.closeButtonEnabled=!0!==n._tabs[a].closeButtonHidden,n._showCloseButton(i)}}n._applyTabOverflow();break;case"closeButtons":{const t=n._tabLabelContainers,o=a?n._showCloseButton:n._hideCloseButton;for(let a=0;a<t.length;a++){const i=t[a];o(i)}n._applyTabOverflow();break}case"collapsed":if(!n.collapsible&&a)return void(n.collapsed=!1);break;case"collapsible":!a&&n.collapsed&&(n.collapsed=!1),n.allowToggle=!1,n.selectedIndex===void 0&&n.select(n._focusedItem.index);break;case"dataSource":n.selectedIndex=null;for(let t=0;t<n._groupLabels.length;t++)n.$.container.removeChild(n._groupLabels[t].dropDown);n.$.tabStrip.innerHTML="",n._processDataSource(),n._processHTML();break;case"disabled":n._setFocusable(),n.$.scrollButtonNear.disabled=a,n.$.scrollButtonFar.disabled=a,a||n._updateScrollButtonVisibility(),n._closeDropDownButtonDropDown();break;case"messages":case"scrollMode":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==n.tabLayout)return;n.$.tabStrip.scrollLeft=0,n.$.tabStrip.scrollTop=0,"hidden"===a?(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")):n._checkOverflowScroll(),n._getTabCoordinates();break;case"tabPosition":{if(n.$.tabSelectionBar.style.transition="none",n._tabPositionChanging=!0,n._closeGroupDropDown(),n._handlePosition(a,i),"shrink"!==n.tabLayout&&n._applyLabelSizes("tabPosition"),n._applyTabOverflow(),"hidden"!==a){const t=n.getElementsByClassName("smart-tab-group-arrow");for(let a=0;a<t.length;a++)t[a].innerHTML=n._arrowCodes[n.tabPosition]}delete n._tabPositionChanging,requestAnimationFrame(function(){n.$.tabSelectionBar.style.transition=null});break}case"resize":a&&n._getTabCoordinates();break;case"scrollButtonsPosition":n._handleScrollButtonsPosition(a,i);break;case"selectedIndex":{if(isNaN(a)&&(n.selectedIndex=a=i),!n.allowToggle&&null===a)return void(n.selectedIndex=i);let t=a;null!==a&&(t=Math.max(0,Math.min(a,n._tabs.length-1)),n.ensureVisible(t)),n._select(t,!0,i);break}case"tabLayout":"scroll"===i&&(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")),"shrink"===a?n._applyLabelSizes("shrink",!0):"shrink"===i&&n._applyLabelSizes("shrink",!1),n._applyTabOverflow(),"scroll"===a&&n.disabled&&(n.$.scrollButtonNear.disabled=!0,n.$.scrollButtonFar.disabled=!0),n.ensureVisible(n.selectedIndex);break;case"tabTextOrientation":n._applyTabOverflow(),n.ensureVisible(n.selectedIndex);break;case"unfocusable":n._setFocusable();}}_addGroupContainer(t,i){const a=this,n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");return n.className="smart-tab-group-container smart-unselectable",n.$=Smart.Utilities.Extend(n),o.className="smart-tab-label-text-wrapper",null!==i&&"shrink"!==a.tabLayout&&(n.style[a._orientationSettings.dimension]=parseInt(i,10)+"px"),l.className="smart-tab-label-text-container",l.innerHTML=t,r.className="smart-tab-group-arrow",r.innerHTML=a._arrowCodes[a.tabPosition],s.className="smart-tab-group-drop-down smart-hidden",s.$=Smart.Utilities.Extend(s),o.appendChild(l),o.appendChild(r),n.appendChild(o),a.$.container.appendChild(s),n.group=t,n.dropDown=s,s.groupContainer=n,{label:n,dropDown:s}}_addGroupElements(t){const i=this,a=t.groups,n=t.groupLabels,o=t.group,l=a.indexOf(o),r=t.tabLabelContainer;let s;if(-1!==l)s=n[l],s.dropDown.appendChild(r);else{a.push(o);const l=i._addGroupContainer(o,t.smartTabItemsGroup.labelSize),d=l.dropDown;s=l.label,d.appendChild(r),d.groupContainer=l.label,t.documentFragment.appendChild(s),n.push(s)}i.selectedIndex===t.i&&(i._selectedGroup=s,s.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(t,i,a){const n=this;n._swiping||(a?(t.removeAttribute("hover"),n.insert(n._tabs.length,{label:"New Tab",content:""}),n._select(n._tabs.length-1,!0)):!n._reordering&&!n._swiping&&("mouseover"===i?t.setAttribute("hover",""):"mouseout"==i&&t.removeAttribute("hover")))}_addTabLabelContainer(t,i){const a=this,n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div");let s;return n.className="smart-tab-label-container smart-unselectable",o.className="smart-tab-label-text-wrapper",l.className="smart-tab-label-text-container",r.className="smart-tab-close-button",r.innerHTML="&#xe81f",void 0===i?(a.closeButtons?"default"===a.closeButtonMode&&t.closeButtonHidden||"selected"===a.closeButtonMode&&!t.selected?(r.classList.add("smart-hidden"),n.closeButtonEnabled=!1):(l.classList.add("smart-close-button-enabled"),n.closeButtonEnabled=!0):(r.classList.add("smart-hidden"),n.closeButtonEnabled=!0),s=document.createElement("div"),s.className="smart-tab-label-container smart-unselectable",null===t.group&&null!==t.labelSize&&"shrink"!==a.tabLayout&&(n.style[a._orientationSettings.dimension]=parseInt(t.labelSize,10)+"px")):(r.classList.add("smart-hidden"),n.closeButtonEnabled=!1),a._setLabel(t?t.label:"+",l,s),l.$=Smart.Utilities.Extend(l),r.$=Smart.Utilities.Extend(r),o.appendChild(l),o.appendChild(r),n.appendChild(o),n.$=Smart.Utilities.Extend(n),{tabLabelContainer:n,dropDownLabelContainer:s}}_animateSelection(t,i,a){const n=this;let o="right",l="left";if(n._animatedTab=t,n._animatedOldTab=i,n._animatedTab&&n._animatedOldTab){("left"===n.tabPosition||"right"===n.tabPosition)&&(o="top",l="bottom");for(let t=0;t<n._tabs.length;t++)n._tabs[t].$.removeClass(o),n._tabs[t].$.removeClass(l),n._tabs[t].$.removeClass("animate");return t===i?(t.$.hasClass("smart-visibility-hidden")?t.$.removeClass("smart-visibility-hidden"):t.$.addClass("smart-visibility-hidden"),void(n._animatedOldTab.classToRemove=o)):void(a?(t.$.addClass(o),t.$.removeClass("smart-visibility-hidden"),i.$.addClass("animate"),t.$.addClass("animate"),i.$.addClass(l),i.$.addClass("smart-visibility-hidden"),t.$.removeClass(o),n._animatedOldTab.classToRemove=l):(t.$.addClass(l),t.$.removeClass("smart-visibility-hidden"),i.$.addClass("animate"),t.$.addClass("animate"),i.$.addClass(o),i.$.addClass("smart-visibility-hidden"),t.$.removeClass(l),n._animatedOldTab.classToRemove=o))}}_applyConditionalTabOverflow(){const t=this,i="left"===t.tabPosition||"right"===t.tabPosition,a=t.$.tabStrip;if("scroll"===t.tabLayout)return void t._checkOverflowScroll();if(t._flexWritingModeNoFullSupport&&"shrink"===t.tabLayout&&i&&a.scrollHeight>a.offsetHeight){const n=a.children,o=100/n.length+"%";a.$.addClass("shrink-tabs-vertical");for(let t=0;t<n.length;t++)n[t].style.height=o,n[t].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");t._inlineStyleTabStripChildren=!0}}_applyLabelSizes(t,a){const n=this,o=n._orientationSettings.dimension,l="width"===o?"height":"width";for(let r=0;r<n._reorderItems.length;r++){const i=n._reorderItems[r],s=n._getCorrespondingCustomElement(i);null!==s.labelSize&&("tabPosition"===t&&i.style.removeProperty(l),a?i.style.removeProperty(o):i.style[o]=parseInt(s.labelSize,10)+"px")}}_applyTabOverflow(){var t=Math.max;const i=this;if(i._removeInlineStyle(),0===i._tabs.length)return void i._toggleNavigationElementsVisibility();const a=i.tabLayout,n=i.tabPosition,o="left"===n||"right"===n,l=i.$.tabStrip;switch(i._closeDropDownButtonDropDown(),a){case"scroll":case"dropDown":i._flexWritingModeNoFullSupport&&"vertical"===i.tabTextOrientation&&o&&i._fixTabStripNotChrome(l);break;case"wrap":if("vertical"!==i.tabTextOrientation)o&&l.scrollWidth>l.offsetWidth&&(l.style.width=l.scrollWidth+"px","right"===n&&(l.style.flexWrap="wrap-reverse"),i._inlineStyleTabStrip=!0);else if(!i._flexWritingModeNoFullSupport)o||l.scrollHeight>l.offsetHeight&&(l.style.height=l.scrollHeight+"px",i._inlineStyleTabStrip=!0);else if(o)i._fixTabStripNotChrome(l);else{const a=l.children;let n=a[0].offsetHeight;for(let o=1;o<a.length;o++)n=t(n,a[o].offsetHeight);for(let t=1;t<a.length;t++)a[t].style.height=n+"px";i._inlineStyleTabStripChildren=!0}break;case"shrink":if(!o)l.scrollWidth>l.offsetWidth&&l.$.addClass("shrink-tabs");else if(i._flexWritingModeNoFullSupport&&"vertical"===i.tabTextOrientation){const a=l.children,n=window.getComputedStyle(a[0].firstElementChild),o=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10);let r=0;for(let n=0;n<a.length;n++)r=t(r,a[n].firstElementChild.firstElementChild.offsetWidth);l.style.width=o+r+"px",i._inlineStyleTabStrip=!0;break}}i._applyConditionalTabOverflow(),i._getTabCoordinates(),i._fixTabStripFlex(a),i._toggleNavigationElementsVisibility(),i._positionTabSelectionBar(i._tabLabelContainers[i.selectedIndex],!0)}_checkOverflowScroll(){var t=Math.round;const i=this,a=i.$tabsHeaderSection,n=i.$.tabStrip,o=i.overflow;if("hidden"===o)return;let l,r,s;"left"===i.tabPosition||"right"===i.tabPosition?(l=t(n.scrollHeight)>t(n.offsetHeight),r=0<t(n.scrollTop),s=t(n.offsetHeight+n.scrollTop)<t(n.scrollHeight)):(l=t(n.scrollWidth)>t(n.offsetWidth),r=0<t(n.scrollLeft),s=t(n.offsetWidth+n.scrollLeft)<t(n.scrollWidth)),"scroll"===o&&(a.addClass("scroll-buttons-shown"),i.$scrollButtonNear.removeClass("smart-hidden"),i.$scrollButtonFar.removeClass("smart-hidden")),l?"auto"===o?(!a.hasClass("scroll-buttons-shown")&&a.addClass("scroll-buttons-shown"),r?i.$scrollButtonNear.removeClass("smart-hidden"):i.$scrollButtonNear.addClass("smart-hidden"),s?i.$scrollButtonFar.removeClass("smart-hidden"):i.$scrollButtonFar.addClass("smart-hidden"),!1===(r&&s)?a.addClass("one-button-shown"):a.removeClass("one-button-shown"),!i.disabled&&(i.$.scrollButtonNear.disabled=!1,i.$.scrollButtonFar.disabled=!1)):(a.removeClass("one-button-shown"),i.disabled?(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0):(i.$.scrollButtonNear.disabled=!r,i.$.scrollButtonFar.disabled=!s)):!l&&"auto"===o&&a.hasClass("scroll-buttons-shown")?(a.removeClass("scroll-buttons-shown"),a.removeClass("one-button-shown"),i.$scrollButtonNear.addClass("smart-hidden"),i.$scrollButtonFar.addClass("smart-hidden")):!l&&"scroll"===o&&(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(t){const i=this,a=t.target.index;return"selected"===i.closeButtonMode?void(i._tabLabelContainers[a].closeButtonEnabled=t.detail.hidden):void(t.detail.hidden?i._disableCloseButton(a):i._enableCloseButton(a))}_closeDropDownButtonDropDown(){const t=this;t._dropDownButtonDropDownOpened&&(t.$dropDownButtonDropDown.addClass("smart-hidden"),t._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const t=this;t._openDropDown&&(t._openDropDown.rippleInProgress?setTimeout(function(){t._openDropDown&&(t._openDropDown.$.addClass("smart-hidden"),delete t._openDropDown.rippleInProgress,t._openDropDown=void 0)},450):(t._openDropDown.$.addClass("smart-hidden"),t._openDropDown=void 0))}_containerHandler(t){const i=this,a=t.type;if(!(i.disabled||i.readonly||i._resizing&&"mouseout"!==a||("down"===a||"up"===a)&&1!==t.which&&!Smart.Utilities.Core.isMobile)){"up"===a&&t.stopPropagation();const n=t.originalEvent?t.originalEvent.target:t.target;return i.$.tabContentSection.contains(n)?void 0:i.$.dropDownButton.contains(n)?void i._dropDownButtonHandler(n,t):i.$.dropDownButtonDropDown.contains(n)?void i._dropDownButtonHandler(n,t,!0):void i._tabStripHandler(n,t)}}_disableCloseButton(t){const i=this,a=i._tabLabelContainers[t];a.closeButtonEnabled=!1,i.closeButtons&&i._hideCloseButton(a)}_documentMoveHandler(t){const a=this,i=a._orientationSettings;if(a._reordering){a._reorderStartThrown||(a._fireDragEvent(t,"dragStart"),a._reorderStartThrown=!0);const n=t[i.coordinate],o="wrap"===a.tabLayout?function(i){return t.pageX>=i.fromX&&t.pageX<=i.toX&&t.pageY>=i.fromY&&t.pageY<=i.toY}:function(t){return n>=t[i.from]&&n<=t[i.to]};let l=!1;for(let t=0;t<a._tabCoordinates.length;t++){const i=a._tabCoordinates[t];if(o(i)){l=t;break}}!0!==a._preventReorder&&!1!==l&&l!==a._draggedIndex&&(a._reorderTabs(a._draggedIndex,l),a._closeGroupDropDown(),a._draggedIndex=l,a._getReorderItems(),a._getTabCoordinates());const r=a._tabCoordinates[a._draggedIndex];a._preventReorder=!!("wrap"!==a.tabLayout&&(n<r[i.from]||n>r[i.to])||"wrap"===a.tabLayout&&(null!==t.originalEvent.target.closest(".smart-tab-label-container")||null!==t.originalEvent.target.closest(".smart-tab-group-container"))&&!(t.pageX>=r.fromX&&t.pageX<=r.toX&&t.pageY>=r.fromY&&t.pageY<=r.toY))}else a._resizing&&(a.$.resizeToken.style[i.edge]=t[i.coordinate]-a._tabsHeaderSectionCoordinate+"px",a.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(t){const i=this;let a=t.originalEvent.target;i._endSwiping(t,Date.now()),i._openDropDown&&!i._openDropDown.rippleInProgress&&(a===document||a.closest(".smart-tab-group-container")!==i._openDropDown.groupContainer)&&i._closeGroupDropDown(),i.$.dropDownButton.contains(a)||i._closeDropDownButtonDropDown(),i._endReordering(t,a),i._resize(t),i._tabToResize!==void 0&&(i._tabToResize=void 0)}_dropDownButtonHandler(t,i,a){const n=this,o=i.type;if(a)return void(t.classList.contains("smart-tab-label-container")&&("down"===o?n._downTarget=t:"mouseout"===o?t.removeAttribute("hover"):"mouseover"===o?t.setAttribute("hover",""):"up"===o?t===n._downTarget&&(n.select(Array.from(n.$.dropDownButtonDropDown.children).indexOf(t)),n._closeDropDownButtonDropDown()):void 0));if("down"===o)n._downTarget=n.$.dropDownButton;else if("up"===o&&n._downTarget===n.$.dropDownButton)if(!n._dropDownButtonDropDownOpened){const t=n.tabPosition;let i,a;"top"===t?(i=n.$.dropDownButton.offsetLeft,a=n.$.tabsHeaderSection.offsetTop+n.$.dropDownButton.offsetHeight):"bottom"===t?(i=n.$.dropDownButton.offsetLeft,a=n.$.tabsHeaderSection.offsetTop):"left"===t?(i=n.$.dropDownButton.offsetWidth,a=n.$.dropDownButton.offsetTop):"right"===t?(i=n.$.tabsHeaderSection.offsetLeft,a=n.$.dropDownButton.offsetTop):void 0,n.$.dropDownButtonDropDown.style.left=i+"px",n.$.dropDownButtonDropDown.style.top=a+"px",n.$dropDownButtonDropDown.removeClass("smart-hidden"),n._dropDownButtonDropDownOpened=!0}else n._closeDropDownButtonDropDown()}_enableCloseButton(t){const i=this,a=i._tabLabelContainers[t];a.closeButtonEnabled=!0,i.closeButtons&&i._showCloseButton(a)}_endReordering(t,i){const a=this;a._reordering&&(a._draggedHoveredTab&&(!a._draggedHoveredTab.contains(i)&&a._draggedHoveredTab.removeAttribute("hover"),delete a._draggedHoveredTab),a._reorderedIndex=void 0,a._reordering=!1,a._reorderStartThrown=!1,a.removeAttribute("dragged"),t&&a._fireDragEvent(t,"dragEnd"))}_endSwiping(t,i){var a=Math.abs;const n=this;if(!n._dragStartDetails)return;const o=n._orientationSettings,l=n.$.tabStrip,r=a(n._dragStartDetails.startTime-i),s=200/r,d=(n._dragStartDetails[o.startCoordinate]-t[o.coordinate])*s;let m=a(d);const c=function(){return!(0<d&&l[o.scrollDirection]===l[o.scrollSize]-l[o.size]||0>d&&0===l[o.scrollDirection])};let u=.03*a(d)*s;const p=function(){if(5<u){const t=(m-u)/a(d);.1>t?u/=1.25:.15>t?u/=1.2:.2>t?u/=1.15:.25>t?u/=1.1:.3>t&&(u/=1.05)}u=Math.round(u);const t=l[o.scrollDirection];l[o.scrollDirection]=0<d?Math.min(t+u,l[o.scrollSize]-l[o.size]):Math.max(t-u,0),m-=u,n._updateScrollButtonVisibility(!0);const i=c();0<m&&i?n._scrollingAnimationFrame=window.requestAnimationFrame(p):n._wheelInProgress=!1};n._scrollingAnimationFrame&&cancelAnimationFrame(n._scrollingAnimationFrame),500>r&&c()?n._scrollingAnimationFrame=window.requestAnimationFrame(p):n._wheelInProgress=!1,delete n._dragStartDetails,n._swiping&&delete n._swiping}_fireDragEvent(t,i){const a=this,n=a.$.tabStrip.children[a._draggedIndex],o=n.tab;let l,r,s;o?(l=o.selected,r=o.index,s=o.label):s=n.group,a.$.fireEvent(i,{position:{left:t.pageX,top:t.pageY},target:n,selected:l,index:r,label:s})}_fixTabStripNotChrome(t){function i(){const n=t.children;let o=n[0].getBoundingClientRect(),l=o.left,r=l+n[0].offsetWidth;for(let t=1;t<n.length;t++)o=n[t].getBoundingClientRect(),l=Math.min(l,o.left),r=Math.max(r,o.left+n[t].offsetWidth);t.style.width=r-l+"px",a._inlineStyleTabStrip=!0}const a=this;0===a._tabs.length||(i(),Smart.Utilities.Core.Browser.Safari&&setTimeout(function(){t.parentElement.classList.add("smart-hidden"),setTimeout(function(){t.parentElement.classList.remove("smart-hidden"),i()},10)},10),a.$.fireEvent("tabStripResize"))}_fixTabStripFlex(t){const i=this;i._flexWritingModeNoFullSupport||"vertical"!==i.tabTextOrientation||"left"!==i.tabPosition&&"right"!==i.tabPosition||setTimeout(function(){i.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){i.$tabsHeaderSection.removeClass("smart-hidden"),i._getTabCoordinates(),"scroll"===t&&i._checkOverflowScroll()},10)},10)}_getCorrespondingCustomElement(t){return t.$.hasClass("smart-tab-label-container")?t.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+t.group+"\"]")}_getReorderItems(){const t=this;let i;0===t._groups.length?i=t._tabLabelContainers:(i=Array.from(t.$.tabStrip.children),t.addNewTab&&i.pop()),t._reorderItems=i}_getTabCoordinates(){const t=this;if((t.reorder||t.resize)&&"hidden"!==t.tabPosition){const a=[],n=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;for(let l=0;l<t._reorderItems.length;l++){const i=t._reorderItems[l],r=i.getBoundingClientRect(),s=window.getComputedStyle(i),d=parseFloat(s.marginLeft),m=parseFloat(s.marginRight),c=parseFloat(s.marginTop),u=parseFloat(s.marginBottom);a.push({fromX:r.left-d+n,toX:r.right+m+n,fromY:r.top-c+o,toY:r.bottom+u+o})}t._tabCoordinates=a}}_getTabs(){const t=this;let i=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-tab-item"):t.getElementsByTagName("smart-tab-item");null!==t.selectedIndex&&(0===i.length?t.selectedIndex=null:t.selectedIndex=Math.max(0,Math.min(t.selectedIndex,i.length-1))),t._tabs=Array.from(i)}_groupContainerHandler(t,i){const a=this,n=t.dropDown;if("down"===i)return a._downTarget=t,void(a.reorder&&1<a._reorderItems.length&&(a._getTabCoordinates(),a._reordering=!0,a.setAttribute("dragged",""),a._draggedIndex=Array.from(a.$.tabStrip.children).indexOf(t)));a._reordering||a._swiping||(n===a._openDropDown||"mouseover"!==i||t.classList.contains("smart-tab-group-selected")?"mouseout"===i&&t.removeAttribute("hover"):t.setAttribute("hover",""));"up"!==i||a._downTarget!==t||void 0!==a._reorderedIndex||a._swiping||(n===a._openDropDown?(a._closeGroupDropDown(),!t.classList.contains("smart-tab-group-selected")&&t.setAttribute("hover","")):a._openGroupDropDown(t))}_handlePosition(t,i){const a=this;return-1!==[void 0,"top","left","hidden"].indexOf(i)&&("bottom"===t||"right"===t)?a.$.container.insertBefore(a.$.tabContentSection,a.$.tabsHeaderSection):("bottom"===i||"right"===i)&&-1!==["top","left","hidden"].indexOf(t)&&a.$.container.insertBefore(a.$.tabsHeaderSection,a.$.tabContentSection),"hidden"===t?(a._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},a.removeAttribute("horizontal"),void a.removeAttribute("vertical")):void("top"===t||"bottom"===t?(a._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},a.removeAttribute("vertical"),a.setAttribute("horizontal",""),a.$arrowNear.removeClass("smart-arrow-up"),a.$arrowNear.addClass("smart-arrow-left"),a.$arrowFar.removeClass("smart-arrow-down"),a.$arrowFar.addClass("smart-arrow-right")):(a._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},a.removeAttribute("horizontal"),a.setAttribute("vertical",""),a.$arrowNear.removeClass("smart-arrow-left"),a.$arrowNear.addClass("smart-arrow-up"),a.$arrowFar.removeClass("smart-arrow-right"),a.$arrowFar.addClass("smart-arrow-down")),a.$.dropDownButtonArrow.innerHTML=a._arrowCodes[a.tabPosition])}_handleScrollButtonsPosition(t,i){const a=this,n=a.$.tabsHeaderItems;t===i||("both"===t?"near"===i?n.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton):n.insertBefore(a.$.scrollButtonNear,a.$.tabStrip):"near"===t?("far"===i&&n.insertBefore(a.$.scrollButtonNear,a.$.tabStrip),n.insertBefore(a.$.scrollButtonFar,a.$.tabStrip)):("near"===i&&n.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton),n.insertBefore(a.$.scrollButtonNear,a.$.scrollButtonFar)))}_hideCloseButton(t){t.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(t){const i=this,a=t.detail.oldIndex,n=Math.max(0,Math.min(t.detail.newIndex,i._tabs.length-1));if(a!==n){if(0===i._groups.length)i._reorderTabs(a,n);else{const o=t.detail.tabItem;o._setIndex(a),i.remove(a),i.insert(n,{node:o}),i.selectedIndex===a&&i._select(n,!1)}i._reorderedIndex=void 0}}_insertAddNewTab(){const t=this,i=t._addTabLabelContainer(void 0,!0).tabLabelContainer;i.$.addClass("smart-add-new-tab"),t.$.tabStrip.appendChild(i),t._addNewTab=i}_insertIntoExistingGroup(t){const i=this,a=t.smartTabItemsGroup,n=t.tab,o=t.tabLabelContainer,l=t.group,r=i._groupLabels[i._groups.indexOf(l)],s=r.dropDown;let d=t.index;d=Math.max(0,Math.min(d,a.childElementCount)),s.insertBefore(o,s.children[d]);const m=a.children[d];let c;c=m?m.index:a.children[d-1].index+1,a.insertBefore(n,m),i._tabLabelContainers.splice(c,0,o),i.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,i.$.dropDownButtonDropDown.children[c]||null),i._tabs.splice(c,0,n),d=c,n.group=l,i._updateIndexes(d)}_insertIntoNewGroup(t){const i=this,a=t.tab,n=t.tabLabelContainer,o=t.group,l=i._addGroupContainer(o),r=l.label,s=l.dropDown;s.appendChild(n),i._groups.push(o);let d=Math.max(0,Math.min(t.index,i.$.tabStrip.childElementCount)),m=d;i._addNewTab&&m===i.$.tabStrip.childElementCount&&m--,i.$.tabStrip.insertBefore(r,i.$.tabStrip.children[m]||null),i._groupLabels.push(r);const c=document.createElement("smart-tab-items-group");c.appendChild(a),i.$.tabContentSection.insertBefore(c,i.$.tabContentSection.children[d]),c.label=o;const u=c.previousElementSibling;let p=0;u&&(u instanceof Smart.TabItem?p=u.index+1:u&&(p=u.lastElementChild.index+1)),i._tabLabelContainers.splice(p,0,n),i.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,i.$.dropDownButtonDropDown.children[p]||null),i._tabs.splice(p,0,a),d=p,a.group=o,i._updateIndexes(d)}_insertNearAGroup(t){const i=this,a=t.tab,n=t.tabLabelContainer;let o=t.index;o=Math.max(0,Math.min(o,i._tabs.length));const l=i._tabs[o-1],r=i._tabs[o],s=r?r.group:void 0;l&&null!==l.group&&r&&null!==s?(r.tabLabelContainer.parentElement.insertBefore(n,r.tabLabelContainer),r.parentElement.insertBefore(a,r),a.group=s):r?null===s?(i.$.tabStrip.insertBefore(n,r.tabLabelContainer),i.$.tabContentSection.insertBefore(a,r)):(i.$.tabStrip.insertBefore(n,i._groupLabels[i._groups.indexOf(s)]),i.$.tabContentSection.insertBefore(a,i.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+s+"\"]"))):(i.$.tabStrip.insertBefore(n,i._addNewTab||null),i.$.tabContentSection.appendChild(a)),i._tabLabelContainers.splice(o,0,n),i.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,i.$.dropDownButtonDropDown.children[o]||null),i._tabs.splice(o,0,a),i._updateIndexes(o)}_insertNoGrouping(t){const i=this,a=Math.max(0,Math.min(t.index,i._tabs.length)),n=t.tab,o=t.tabLabelContainer;i.$.tabStrip.insertBefore(o,i._tabLabelContainers[a]||i._addNewTab||null),i.$.tabContentSection.insertBefore(n,i._tabs[a]||null),i._tabLabelContainers.splice(a,0,o),i.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,i.$.dropDownButtonDropDown.children[a]||null),i._tabs.splice(a,0,n),i._updateIndexes(a)}_keydownHandler(t){const i=this,a=t.key;if(document.activeElement!==i||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home","Enter"," ","Escape"].indexOf(a)||i.disabled||i.readonly||"none"===i.selectionMode||!i.allowToggle&&null===i.selectedIndex||i._reordering||i._swiping)return;t.preventDefault();const n=i._tabs.length-1;let o=0,l,r;switch(a){case"ArrowLeft":case"ArrowUp":if(i.collapsible&&t.ctrlKey)return void("ArrowLeft"===a?"right"===i.tabPosition?i.expand():"left"===i.tabPosition&&i.collapse():"ArrowUp"===a&&("bottom"===i.tabPosition?i.expand():"top"===i.tabPosition&&i.collapse()));if(o=-1,0===i.selectedIndex){r=!0;break}l=i.selectedIndex+o;break;case"ArrowRight":case"ArrowDown":if(i.collapsible&&t.ctrlKey)return void("ArrowRight"===a?"right"===i.tabPosition?i.collapse():"left"===i.tabPosition&&i.expand():"ArrowDown"===a&&("bottom"===i.tabPosition?i.collapse():"top"===i.tabPosition&&i.expand()));if(o=1,i.selectedIndex===n){r=!0;break}l=i.selectedIndex+o;break;case"End":if(i.selectedIndex===n){r=!0;break}l=n;break;case"Home":if(0===i.selectedIndex){r=!0;break}l=0;break;case"Enter":case" ":if(!i.allowToggle)return;if(i._focusedItem){i.select(i._focusedItem.index);const t=i._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");t&&i._openGroupDropDown(t.groupContainer)}return;case"Escape":return void(i._openDropDown&&i._closeGroupDropDown());}if(i.allowToggle&&0<i._tabs.length){i._focusedItem?i._focusedItem.tabLabelContainer.removeAttribute("focus"):i._focusedItem=i._focusedItem||i._tabs[i.selectedIndex]||i._tabs[0],i._focusedItem=i._tabs[Math.min(Math.max(0,i._focusedItem.index+o),n)],i._focusedItem.tabLabelContainer.setAttribute("focus",""),i.ensureVisible(i._focusedItem.index);const t=i._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");return void(t&&t.groupContainer?(i._openDropDown&&i._openDropDown!==t.dropDown&&i._closeGroupDropDown(),i._openGroupDropDown(t.groupContainer)):i._openDropDown&&i._closeGroupDropDown())}r||i.select(l)}_labelContainerHandler(t,i,a){const n=this,o="up"===a&&n._downTarget===t;if("down"===a&&(n._downTarget=t,"click"===n.selectionMode&&t!==n._addNewTab))if(Smart.Utilities.Core.isMobile&&null===t.tab.group){const a=n.$.tabStrip[n._orientationSettings.scrollDirection];setTimeout(function(){if(a===n.$.tabStrip[n._orientationSettings.scrollDirection]){const a=n._ripple(i,t);a&&n._openDropDown&&n._openDropDown.contains(t)&&(n._openDropDown.rippleInProgress=!0)}},100)}else{const a=n._ripple(i,t);a&&n._openDropDown&&n._openDropDown.contains(t)&&(n._openDropDown.rippleInProgress=!0)}if(t===n._addNewTab)return void n._addNewTabHandler(t,a,o);const l=t.tab.index,r=!(n._reordering&&n._reorderedIndex!==void 0);o&&l===n.selectedIndex&&(n._closeGroupDropDown(),r&&null===t.tab.group&&n._toggleCollapsedState()),!n._swiping&&(r&&"click"===n.selectionMode&&o||!n._reordering&&(n.selectionMode===a||"mouseenter"===n.selectionMode&&"mouseover"===a))&&n._select(l,!0),n._reordering||n._swiping||"click"!==n.selectionMode&&"dblclick"!==n.selectionMode||("mouseover"!==a||t.hasAttribute("selected")?"mouseout"===a&&t.removeAttribute("hover"):t.setAttribute("hover","")),n.reorder&&"down"===a&&null===t.tab.group&&1<n._reorderItems.length&&(n._getTabCoordinates(),n._reordering=!0,n.setAttribute("dragged",""),t.hasAttribute("hover")&&(n._draggedHoveredTab=t),n._draggedIndex=0===n._groups.length?t.tab.index:Array.from(n.$.tabStrip.children).indexOf(t))}_labelSizeChangeHandler(t){const i=this,a=t.detail.size;let n;"shrink"===i.tabLayout||(n=t.target instanceof Smart.TabItem?t.target.tabLabelContainer:i._groupLabels[i._groups.indexOf(t.target.label)],null===a?n.style.removeProperty(i._orientationSettings.dimension):n.style[i._orientationSettings.dimension]=parseInt(a,10)+"px",i._applyTabOverflow())}_openGroupDropDown(t){const i=this;t&&(i._openDropDown&&i._openDropDown.$.addClass("smart-hidden"),t.dropDown.$.removeClass("smart-hidden"),i._positionGroupDropDown(t),i._openDropDown=t.dropDown,t.removeAttribute("hover"))}_orderTabs(){const t=this,i=t.getElementsByTagName("smart-tab-items-group"),a=[],n=[];let o=!0,l=!1;if(0===i.length)for(let r=0;r<t._tabs.length;r++){const i=t._tabs[r],s=i.index;if(o&&null!==s&&(o=!1),-1!==a.indexOf(s||0)&&(l=!0,null!==s))break;a.push(s||0),n.push({tab:i,index:s})}if(!l){const t=a.slice(0).sort(function(t,i){return t-i});JSON.stringify(a)===JSON.stringify(t)&&(o=!0)}if(!o&&!l){n.sort(function(t,i){return t.index-i.index});for(let a=0;a<n.length;a++){const i=n[a].tab;i._setIndex(a),t.$.tabContentSection.removeChild(i)}for(let a=0;a<n.length;a++){const i=n[a].tab;t.$.tabContentSection.appendChild(i),t._tabs[a]=i}}else{o||t.warn(t.localize("ambiguousIndexes"));for(let a=0;a<t._tabs.length;a++)t._tabs[a]._setIndex(a)}}_populateTabStrip(){const t=this,a=document.createDocumentFragment(),n=[],o=[],l=[];let r=null;for(let s=0;s<t._tabs.length;s++){const i=t._tabs[s],d=i.parentElement,m=d instanceof Smart.TabItemsGroup?d.label:null;i.group=m;const c=t._addTabLabelContainer(i),u=c.tabLabelContainer,p=c.dropDownLabelContainer;t.selectedIndex===s&&(u.$.addClass("smart-tab-selected"),u.setAttribute("selected",""),r=u),i.tabLabelContainer=u,u.tab=i,n.push(u),null===m?a.appendChild(u):t._addGroupElements({documentFragment:a,groups:o,groupLabels:l,i:s,group:m,tabLabelContainer:u,smartTabItemsGroup:d}),t.$.dropDownButtonDropDown.appendChild(p)}t.$.tabStrip.appendChild(a),t._tabLabelContainers=n,t._groups=o,t._groupLabels=l,t._positionTabSelectionBar(r,!0)}_positionTabSelectionBar(t,i){function a(){n.$.tabSelectionBar.style.top=r,n.$.tabSelectionBar.style.height=d,n.$.tabSelectionBar.style.left=l,n.$.tabSelectionBar.style.width=s}const n=this;if(!t)return;const o=n.tabPosition;let l,r,s,d;i&&(n.$.tabSelectionBar.style.transition="none"),t.tab.group&&(t=n._groupLabels[n._groups.indexOf(t.tab.group)]),"top"===o||"bottom"===o?("wrap"===n.tabLayout?(r=t.offsetTop,"top"===o&&(r+=t.offsetHeight-n.$.tabSelectionBar.offsetHeight),r+="px"):r=null,d=null,l=-n.$.tabStrip.scrollLeft+t.offsetLeft+"px",s=t.offsetWidth+"px"):("left"===o||"right"===o)&&("wrap"===n.tabLayout?(l=t.offsetLeft,"left"===o&&(l+=t.offsetWidth-n.$.tabSelectionBar.offsetWidth),l+="px"):l=null,s=null,r=-n.$.tabStrip.scrollTop+t.offsetTop+"px",d=t.offsetHeight+"px"),Smart.Utilities.Core.isMobile&&n.hasAnimation&&!i?requestAnimationFrame(function(){requestAnimationFrame(a)}):a(),i&&!n._tabPositionChanging&&(n.$.tabSelectionBar.style.transition=null)}_positionGroupDropDown(t){const i=this,a=i.tabPosition,n=t.dropDown,o=window.getComputedStyle(i.$.tabsHeaderSection),l=parseFloat(o.paddingLeft),r=parseFloat(o.paddingTop);if("top"===a||"bottom"===a){if(n.style.left=t.offsetLeft-i.$.tabStrip.scrollLeft+l+"px","top"===a)n.style.top=t.offsetTop+t.offsetHeight+r+"px";else{let a=t.getBoundingClientRect().top-i.$.container.getBoundingClientRect().top+r;!1,n.style.top=a+"px"}}else n.style.top=t.offsetTop-i.$.tabStrip.scrollTop+r+"px",n.style.left="left"===a?t.offsetLeft+t.offsetWidth+l+"px":t.getBoundingClientRect().left-i.$.container.getBoundingClientRect().left+l+"px"}_processDataSource(){function t(a,i){let n;if(Array.isArray(a.items)&&0<a.items.length){n=document.createElement("smart-tab-items-group");for(let o=0;o<a.items.length;o++)a.items[o].items||t(a.items[o],n)}else n=document.createElement("smart-tab-item"),!0===a.closeButtonHidden&&(n.closeButtonHidden=!0),void 0!==a.content&&(n.innerHTML=a.content),void 0!==a.index&&(n.index=a.index),!0===a.selected&&(n.selected=a.selected);void 0!==a.label&&(n.label=a.label),void 0!==a.labelSize&&(n.labelSize=a.labelSize),i.appendChild(n)}const a=this,n=a.dataSource;if(a.$.tabContentSection.innerHTML="",null!==n)for(let o=0;o<n.length;o++){const i=n[o];t(i,a.$.tabContentSection)}}_processHTML(){const t=this;t._getTabs(),t._orderTabs(),t._validateInitialSelection(),t._populateTabStrip(),t.addNewTab&&t._insertAddNewTab(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}_removeInlineStyle(){const t=this,i=t.$.tabStrip;if(t._inlineStyleTabStripChildren){const a=i.children;for(let t=0;t<a.length;t++)a[t].removeAttribute("style"),a[t].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete t._inlineStyleTabStripChildren}t._inlineStyleTabStrip&&(i.removeAttribute("style"),delete t._inlineStyleTabStrip),i.$.removeClass("shrink-tabs"),i.$.removeClass("shrink-tabs-vertical")}_reorderTabs(t,i){function a(t,i,a){const n=t[i];t.splice(i,1),t.splice(a,0,n)}const n=this;if(0===n._groups.length){const o=n._tabs,l=n._tabLabelContainers,r=t>i?i:i+1;n.selectedIndex===t?n.selectedIndex=i:n.selectedIndex<=i&&n.selectedIndex>t?n.selectedIndex--:n.selectedIndex>=i&&n.selectedIndex<t&&n.selectedIndex++;let s;s=l[r]?l[r]:n.addNewTab?n._addNewTab:null,n.$.tabStrip.insertBefore(l[t],s),n.$.dropDownButtonDropDown.insertBefore(n.$.dropDownButtonDropDown.children[t],n.$.dropDownButtonDropDown.children[r]||null),n.$.tabContentSection.insertBefore(o[t],o[r]||null),a(o,t,i),a(l,t,i),n._updateTabIndexes()}else n._reorderTabsGrouping(t,i);n.$.fireEvent("reorder",{newIndex:i,originalIndex:t}),n._reorderedIndex=i,n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],!0)}_reorderTabsGrouping(t,i){const a=this,n=a.$.tabStrip.children,o=a.$.tabContentSection.children,l=t>i?i:i+1,r=a._tabs[a.selectedIndex];a.$.tabStrip.insertBefore(n[t],n[l]||null),a.$.tabContentSection.insertBefore(o[t],o[l]||null),a._groupLabels=Array.from(a.$.tabStrip.getElementsByClassName("smart-tab-group-container")),a._groups=[];for(let n=0;n<a._groupLabels.length;n++)a._groups.push(a._groupLabels[n].group);a._tabs=Array.from(a.$.tabContentSection.getElementsByTagName("smart-tab-item"));const s=document.createDocumentFragment();let d=[];for(let n=0;n<a._tabs.length;n++)s.appendChild(a.$.dropDownButtonDropDown.children[a._tabs[n].index].cloneNode(!0));a.$.dropDownButtonDropDown.innerHTML="",a.$.dropDownButtonDropDown.appendChild(s);for(let n=0;n<a.$.tabStrip.childElementCount;n++){const t=a.$.tabStrip.children[n];t.$.hasClass("smart-tab-label-container")&&t!==a._addNewTab?d.push(t):t.$.hasClass("smart-tab-group-container")&&(d=d.concat(Array.from(t.dropDown.children)))}a._tabLabelContainers=d,a._updateTabIndexes(),r&&(a.selectedIndex=r.index)}_resize(t){const i=this;if(!i._resizing)return;const a=i._orientationSettings,n=t[a.coordinate]-i._resizeFrom,o=i._getCorrespondingCustomElement(i._tabToResize);let l=null===o.labelSize?i._tabToResize[a.size]:o.labelSize;const r=Math.max(10,l+n);r!==l&&(o._preventPropertyChangedHandler=!0,o.labelSize=r,i._tabToResize.style[a.dimension]=parseInt(r,10)+"px"),i.$resizeToken.addClass("smart-hidden"),i._applyTabOverflow(),i._resizing=!1,i.removeAttribute("resizing")}_ripple(t,i){const a=this;if(a.hasRippleAnimation){const a=document.createElement("div");return a.className="ripple-agent",i.firstElementChild.appendChild(a),setTimeout(function(){i.firstElementChild.removeChild(a)},1e3),Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),!0}}_scrollButtonClickHandler(t){const i=this,a=i.$.tabStrip;let n=t.target.closest("smart-repeat-button")===i.$.scrollButtonNear?-1:1;if("paging"===i.scrollMode){const o=i._orientationSettings,l={};return i._dragStartDetails={startX:0,startY:0,pageX:0,pageY:0,startTime:Date.now(),target:t.target},i._wheelInProgress=!0,l[o.coordinate]=-n*(a[o.size]/1.1428571428571428),void i._endSwiping(l,i._dragStartDetails.startTime+175)}i.hasAttribute("horizontal")?a.scrollLeft+=10*n:a.scrollTop+=10*n,i._updateScrollButtonVisibility(!0)}_select(t,i,a){const n=this,o=n.hasAnimation;if(void 0===a&&(a=n.selectedIndex),t!==a||n.allowToggle&&(!n.allowToggle||"mouseenter"!==n.selectionMode)){const l=n._tabs[t];if(n._focusedItem&&n._focusedItem.tabLabelContainer.removeAttribute("focus"),null!==a){const i=n._tabs[a];o?n._animateSelection(l,i,t>a):i.$.addClass("smart-visibility-hidden"),i.selected=!1,n._tabLabelContainers[a].$.removeClass("smart-tab-selected"),n._tabLabelContainers[a].removeAttribute("selected"),n.closeButtons&&"selected"===n.closeButtonMode&&n._disableCloseButton(a)}n.allowToggle&&(null===t||(void 0===arguments[2]?n.selectedIndex:a)===t)?(n.selectedIndex=null,n.$.tabContentSection.setAttribute("show-placeholder",""),n.allowToggle&&(n._focusedItem=n._tabs[null===t?a:t],n._focusedItem&&n._focusedItem.tabLabelContainer.setAttribute("focus",""))):(l.selected=!0,n.$.tabContentSection.removeAttribute("show-placeholder"),(null===a||!o)&&l.$.removeClass("smart-visibility-hidden"),n.selectedIndex=t,n._focusedItem=n._tabs[t],n._focusedItem.tabLabelContainer.$.addClass("smart-tab-selected"),n._focusedItem.tabLabelContainer.setAttribute("selected",""),n._positionTabSelectionBar(n._focusedItem.tabLabelContainer,null===a)),null!==t&&(n._tabLabelContainers[t].removeAttribute("hover"),n.closeButtons&&"selected"===n.closeButtonMode&&n._enableCloseButton(t)),i&&(n.$.hiddenInput.value=n.selectedIndex,n.$.fireEvent("change",{index:n.selectedIndex,oldIndex:a})),n._closeGroupDropDown(),l&&null!==l.group?(n._selectedGroup&&n._selectedGroup.$.removeClass("smart-tab-group-selected"),null!==n.selectedIndex&&(n._selectedGroup=n._groupLabels[n._groups.indexOf(l.group)],n._selectedGroup.$.addClass("smart-tab-group-selected"))):n._selectedGroup&&(n._selectedGroup.$.removeClass("smart-tab-group-selected"),delete n._selectedGroup)}}_selectStartHandler(t){const i=this;(i._reordering||i._resizing)&&t.preventDefault()}_setLabel(t,i,a){const n=t?document.getElementById(t):null;if(null!==n&&"template"===n.tagName.toLowerCase()){const t=document.importNode(n.content,!0);if(i.appendChild(t),a){const t=document.importNode(n.content,!0);a.appendChild(t)}}else""===t&&(t="&nbsp;"),i.innerHTML=t,a&&(a.innerHTML=t)}_showCloseButton(t){t.closeButtonEnabled&&(t.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(t){const i=this,a=t.target;a instanceof Smart.TabItem&&(a===i._animatedOldTab?(a.$.addClass("smart-hidden"),a.$.removeClass("animate"),a.$.removeClass(i._animatedOldTab.classToRemove),a.$.removeClass("smart-hidden"),delete i._animatedOldTab):a===i._animatedTab&&(a.$.removeClass("animate"),delete i._animatedTab),a.classList.remove("left"),a.classList.remove("right"),a.classList.remove("top"),a.classList.remove("bottom"))}_tabsHeaderItemsWheelHandler(t){const i=this,a=i._orientationSettings;if(!(!i.enableMouseWheelAction||i._wheelInProgress||i.disabled||i.$.tabStrip[a.size]===i.$.tabStrip[a.scrollSize])){t.preventDefault(),i._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),target:t.target},i._wheelInProgress=!0;const n={};n[a.coordinate]=t[a.coordinate]+(0<t.deltaY?-1:1)*a.wheelOffset,i._endSwiping(n,i._dragStartDetails.startTime+100)}}_tabStripHandler(t,i){const a=this,n=i.type;if("down"===n&&void 0!==a._tabToResize)return a._resizing=!0,void(a._tabsHeaderSectionCoordinate=a.$.tabsHeaderSection.getBoundingClientRect()[a._orientationSettings.edge]);"down"===n&&Smart.Utilities.Core.isMobile&&(a._dragStartDetails={startX:i.pageX,startY:i.pageY,pageX:i.pageX,pageY:i.pageY,startTime:Date.now(),originalTime:Date.now(),target:i.originalEvent.target});const o=t.closest("smart-repeat-button");if("up"===n&&o)return a.focus(),void(a.resize&&a._getTabCoordinates());if(t.classList.contains("smart-tab-close-button"))if("up"!==n){if("down"===n)return void(a._downTarget=t);a._reordering||a._swiping||("mouseover"===n?t.setAttribute("hover",""):"mouseout"===n&&t.removeAttribute("hover"))}else if(t===a._downTarget){const i=t.parentElement.parentElement.tab.index,n=a.$.fireEvent("closing",{index:i});return void(n.defaultPrevented||(a.remove(i),a.$.fireEvent("close",{index:i})))}const l=t.closest(".smart-tab-label-container");if(null!==l)return void a._labelContainerHandler(l,i,n);const r=t.closest(".smart-tab-group-container");null!==r&&a._groupContainerHandler(r,n)}_tabStripMouseleaveHandler(){const t=this;t.resize&&!t._resizing&&t.hasAttribute("resizing")&&t.removeAttribute("resizing")}_tabStripMoveHandler(t){const a=this;if(a._dragStartDetails&&!a._dragStartDetails.checked&&(a._dragStartDetails.pageX!==t.pageX||a._dragStartDetails.pageY!==t.pageY)&&(500>Date.now()-a._dragStartDetails.originalTime?(a._endReordering(void 0,void 0),a._dragStartDetails.checked=!0):delete a._dragStartDetails),a._dragStartDetails){const i=a._orientationSettings,n=a._dragStartDetails[i.coordinate]-t[i.coordinate],o=a.$.tabStrip[i.scrollDirection];return a.$.tabStrip[i.scrollDirection]+=n,o!==a.$.tabStrip[i.scrollDirection]&&a._updateScrollButtonVisibility(),a._dragStartDetails={startX:a._dragStartDetails.startX,startY:a._dragStartDetails.startY,pageX:t.pageX,pageY:t.pageY,startTime:a._dragStartDetails.startTime,originalTime:a._dragStartDetails.originalTime,target:t.originalEvent.target,checked:a._dragStartDetails.checked},void(a._swiping=!0)}if(!a.resize||a._resizing||a._reordering||"shrink"===a.tabLayout)return;const n=a._orientationSettings,o=t[n.coordinate],l=a._tabCoordinates;let r;for(let s=0;s<l.length;s++){const t=l[s][n.to];if(o>=t-4&&o<=t+4){r=a._reorderItems[s],a._resizeFrom=o;break}}void 0===r?(a._tabToResize=void 0,a.removeAttribute("resizing")):(a._tabToResize=r,a.setAttribute("resizing",""))}_toggleCollapsedState(){const t=this;t.collapsible&&(t.collapsed?t.expand():t.collapse())}_toggleNavigationElementsVisibility(){const t=this,i=t._tabs.length;let a;if(0===i)a="addClass";else if(1===i)a="removeClass";else return;"scroll"===t.tabLayout&&"scroll"===t.overflow?(t.$scrollButtonNear[a]("smart-hidden"),t.$scrollButtonFar[a]("smart-hidden")):"dropDown"===t.tabLayout&&t.$dropDownButton[a]("smart-hidden")}_updateIndexes(t){const i=this;null!==i.selectedIndex&&t<=i.selectedIndex&&i.selectedIndex++,i._updateTabIndexes()}_updateScrollButtonVisibility(t){var i=Math.round;const a=this;if("scroll"!==a.tabLayout||"hidden"===a.overflow)return void a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t);const n=a.$tabsHeaderSection,o=a.$.tabStrip,l=a._orientationSettings;let r=!0,s=!0;if(0===i(o[l.scrollDirection])&&(r=!1),i(o[l.size]+o[l.scrollDirection])>=i(o[l.scrollSize])-1&&(s=!1),"auto"===a.overflow){if(r&&s)return a.$scrollButtonNear.removeClass("smart-hidden"),a.$scrollButtonFar.removeClass("smart-hidden"),n.removeClass("one-button-shown"),void(a._tabLabelContainers[a.selectedIndex]&&a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t));r?a.$scrollButtonNear.removeClass("smart-hidden"):a.$scrollButtonNear.addClass("smart-hidden"),s?a.$scrollButtonFar.removeClass("smart-hidden"):a.$scrollButtonFar.addClass("smart-hidden"),n.addClass("one-button-shown"),a._getTabCoordinates()}else"scroll"!==a.overflow||a.disabled||(a.$.scrollButtonNear.disabled=!r,a.$.scrollButtonFar.disabled=!s);a._tabLabelContainers[a.selectedIndex]&&a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t)}_updateTabIndexes(){const t=this;if(0<t._tabs.length)for(let a=0;a<t._tabs.length;a++)t._tabs[a]._setIndex(a);else t.selectedIndex=null}_validateIndex(t,i){if(isNaN(parseInt(t,10))||"object"==typeof t){const t=this;t.error(t.localize("invalidIndex",{method:i}))}}_validateInitialSelection(){const t=this;let a=t.selectedIndex;for(let n=0;n<t._tabs.length;n++){const i=t._tabs[n];a===n?(i.selected=!0,i.$.removeClass("smart-visibility-hidden")):i.selected?null===a?(a=n,i.$.removeClass("smart-visibility-hidden")):(i.selected=!1,i.$.addClass("smart-visibility-hidden")):i.$.addClass("smart-visibility-hidden")}0<t._tabs.length&&null===a&&!t.allowToggle&&(a=0,t._tabs[0].selected=!0,t._tabs[0].$.removeClass("smart-visibility-hidden")),t.selectedIndex=a,null!==t.selectedIndex&&(t._focusedItem=t._tabs[t.selectedIndex])}}),Smart("smart-time-picker",class extends Smart.BaseElement{static get properties(){return{autoSwitchToMinutes:{value:!1,type:"boolean"},footer:{value:!1,type:"boolean"},footerTemplate:{value:null,type:"any?"},format:{value:"12-hour",allowedValues:["12-hour","24-hour"],type:"string"},minuteInterval:{value:1,type:"number"},name:{value:"",type:"string"},selection:{value:"hour",allowedValues:["hour","minute"],type:"string"},value:{value:new Date,type:"any",reflectToAttribute:!1},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"}}}static get listeners(){return{keydown:"_keydownHandler",resize:"_resizeHandler","header.click":"_headerClickHandler","picker.down":"_pickerDownHandler","picker.move":"_pickerMoveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.Draw":"smart.draw.js"}}static get styleUrls(){return["smart.timepicker.css"]}template(){return"<div id=\"container\">\n                <div id=\"header\" class=\"smart-header smart-unselectable\">\n                    <div id=\"hourMinuteContainer\" class=\"smart-hour-minute-container\">\n                        <div id=\"hourContainer\" class =\"smart-hour-container\"></div>\n                        <div>:</div>\n                        <div id=\"minuteContainer\" class=\"smart-minute-container\"></div>\n                    </div>\n                    <div id=\"ampmContainer\" class=\"smart-am-pm-container\">\n                        <div id=\"amContainer\" class=\"smart-am-container\">AM</div>\n                        <div id=\"pmContainer\" class=\"smart-pm-container\">PM</div>\n                    </div>\n                </div>\n                <div id=\"main\" class=\"smart-main-container\">\n                    <div id=\"svgContainer\" class=\"smart-svg-container\">\n                        <div id=\"picker\" class=\"smart-svg-picker\"></div>\n                    </div>\n                    <div id=\"footer\" class=\"smart-footer\"></div>\n                </div>\n                <input id=\"hiddenInput\" type=\"hidden\" name=\"[[name]]\">\n            </div>"}ready(){super.ready(),this._createElement()}setHours(t){const i=this;t=24===t?0:Math.max(0,Math.min(t,23)),12>t?i._selectAmPm("am"):i._selectAmPm("pm"),"12-hour"===i.format&&(0===t?t=12:12<t&&(t-=12)),i._updateHours(t,arguments[1]),"hour"===i.selection&&("24-hour"===i.format&&(0===t||12<t)&&(i._inInnerCircle=!0),i._drawArrow(!0,t,arguments[2]),!i.hasAnimation&&(i._inInnerCircle=!1))}setMinutes(t){const i=this;t=60===t?0:Math.max(0,Math.min(t,59)),i._updateMinutes(t),"minute"===i.selection&&i._drawArrow(!0,t,arguments[1])}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;switch(t){case"disabled":case"unfocusable":n._setFocusable();break;case"footer":case"view":n._resizeHandler();break;case"footerTemplate":n._validateFooterTemplate();break;case"format":{let t=n.value.getHours();"12-hour"===a?(n.$ampmContainer.removeClass("smart-hidden"),12>n.value.getHours()?n._selectAmPm("am"):n._selectAmPm("pm"),0===t?t=12:12<t&&(t-=12)):n.$ampmContainer.addClass("smart-hidden"),n.$.hourContainer.innerHTML=t,"hour"===n.selection&&(n._draw.clear(),n._renderSVG());break}case"minuteInterval":{const t=Math.max(1,Math.min(a,60));t!==a&&(n.minuteInterval=t),"minute"===n.selection&&(n.interval=t);break}case"selection":"hour"===a?n._changeToHourSelection():n._changeToMinuteSelection();break;case"value":{n._oldValue=i,n._validateValue();const t=n.value.getHours()===i.getHours(),a=n.value.getMinutes()===i.getMinutes();t&&a||(a?n.setHours(n.value.getHours()):(!t&&n.setHours(n.value.getHours(),!0),n.setMinutes(n.value.getMinutes()))),delete n._oldValue;break}}}_applyInitialSettings(){const t=this,i=t.value;let a,n;a=i.getHours(),n=i.getMinutes(),"12-hour"===t.format?12>a?(t._ampm="am",t.$amContainer.addClass("smart-selected"),0===a&&(a=12)):(t._ampm="pm",t.$pmContainer.addClass("smart-selected"),12<a&&(a-=12)):t.$ampmContainer.addClass("smart-hidden"),n=n.toString(),1===n.length&&(n="0"+n),t.$.hourContainer.innerHTML=a,t.$.minuteContainer.innerHTML=n,"hour"===t.selection?t.$hourContainer.addClass("smart-selected"):t.$minuteContainer.addClass("smart-selected")}_changeSelection(t,i){var a=Math.pow;const n=this,o=t.pageX,l=t.pageY,r=n._getCenterCoordinates(),s=Math.sqrt(a(r.x-o,2)+a(r.y-l,2));if(n._measurements.center=r,"down"===t.type){if(s>n._measurements.radius)return void t.stopPropagation();n._dragging=!0}n._inInnerCircle=!!("24-hour"===n.format&&"hour"===n.selection&&s<n._measurements.radius-50);const d=Math.atan2(l-r.y,o-r.x);let m=180*(-1*d)/Math.PI;0>m&&(m+=360),n._angle=m;let c=n._numericProcessor.getValueByAngle(n._angle);"hour"===n.selection?("24-hour"===n.format?n._inInnerCircle?0!==c&&12!==c?c+=12:c=0:0===c&&(c=12):0===c&&(c=12),n._updateHours(c)):(60===c&&(c=0),n._updateMinutes(c)),void 0===n._oldTimePart||(cancelAnimationFrame(n._animationFrameId),n._drawArrow(!0,c,i))}_changeToHourSelection(){const t=this,i=t._centralCircle.parentElement||t._centralCircle.parentNode;cancelAnimationFrame(t._animationFrameId),t.interval=1,t.$hourContainer.addClass("smart-selected"),t.$minuteContainer.removeClass("smart-selected"),i.removeChild(t._centralCircle),i.removeChild(t._arrow),i.removeChild(t._head),t._getMeasurements(),t._numericProcessor.getAngleRangeCoefficient(),t._draw.clear(),i.appendChild(t._centralCircle),i.appendChild(t._arrow),i.appendChild(t._head),t._renderHours(),"24-hour"===t.format&&(0===t.value.getHours()||12<t.value.getHours())&&(t._inInnerCircle=!0),t._drawArrow(!0,void 0,!0),t._inInnerCircle=!1}_changeToMinuteSelection(){const t=this,i=t._centralCircle.parentElement||t._centralCircle.parentNode;cancelAnimationFrame(t._animationFrameId),t.interval=t.minuteInterval,t.$hourContainer.removeClass("smart-selected"),t.$minuteContainer.addClass("smart-selected"),i.removeChild(t._centralCircle),i.removeChild(t._arrow),i.removeChild(t._head),t._getMeasurements(),t._numericProcessor.getAngleRangeCoefficient(),t._draw.clear(),i.appendChild(t._centralCircle),i.appendChild(t._arrow),i.appendChild(t._head),t._renderMinutes(),t._drawArrow(!0,void 0,!0)}_computeArrowBodyPoints(t,i,a,n){const o=this,l=Math.sin(i),r=Math.cos(i),s=t-a*r+n*l,d=t+a*l+n*r,m=t+a*r+n*l,c=t-a*l+n*r;return o._headCenter={x:(s+m)/2,y:(d+c)/2},"M "+(t+a*r)+","+(t-a*l)+" L "+(t-a*r)+","+(t+a*l)+" L "+s+","+d+" "+m+","+c}_createElement(){const t=this;return t.coerce=!0,t.min=0,t._drawMin="0",t.startAngle=-270,t.endAngle=90,t._angleDifference=t.endAngle-t.startAngle,t.ticksVisibility="none",t._tickIntervalHandler={},t._tickIntervalHandler.labelsSize={},t._distance={majorTickDistance:0,minorTickDistance:0,labelDistance:10},t._measurements={},t._validateInitialPropertyValues(),t._applyInitialSettings(),t._numericProcessor=new Smart.Utilities.DecimalNumericProcessor(t),t._draw=new Smart.Utilities.Draw(t.$.picker),t._isVisible()?void(t._setPickerSize(),t._getMeasurements(),t._numericProcessor.getAngleRangeCoefficient(),t._renderSVG(),t._setFocusable()):void(t._renderingSuspended=!0)}_documentMoveHandler(t){const i=this;i._dragging&&i._changeSelection(t,!0)}_documentUpHandler(){const t=this;t._dragging&&(t._inInnerCircle=!1,t._dragging=!1,t.autoSwitchToMinutes&&"hour"===t.selection&&(t.hasAnimation?(t.$picker.addClass("animate"),setTimeout(function(){t.selection="minute",t._changeToMinuteSelection()},250),setTimeout(function(){t.$picker.removeClass("animate")},550)):(t.selection="minute",t._changeToMinuteSelection())))}_drawArrow(t,i,a){function n(){s+=d,s=parseFloat((s%m).toFixed(1)),0>s&&(s+=m),o._drawArrowSVG(t,s),s!==i%m&&(o._animationFrameId=requestAnimationFrame(n))}const o=this,l="hour"===o.selection,r="12-hour"===o.format;let s=o._oldTimePart;if(delete o._oldTimePart,void 0===i&&(l?(i=o.value.getHours(),r&&12<i&&(i-=12)):i=o.value.getMinutes()),void 0===s||a||!o.hasAnimation)return void o._drawArrowSVG(t,i);if(l&&!r)return void o._animate24HourView(s,i);let d,m;l?(d=.2,m=12,i%=m,s%=m):(d=1,m=60);let c=i-s,u=s-i;0>c&&(c+=m),0>u&&(u+=m),u<c&&(d*=-1),o._animationFrameId=requestAnimationFrame(n)}_animate24HourView(t,i){function a(l){n._inInnerCircle=l,l?(t=parseFloat((t+o).toFixed(1)),0>t?t+=24:1>t&&(t+=12),(12===t||24===t)&&(t=0)):(t+=o,12!==t&&(t=parseFloat((t%12).toFixed(1))),0>=t&&(t+=12)),n._drawArrowSVG(!0,t),t===i?n._inInnerCircle=!1:n._animationFrameId=requestAnimationFrame(function(){a(l)})}const n=this;let o=.2;n._inInnerCircle=!1;const l=0===t||12<t,r=0===i||12<i;if(l==r)n._inInnerCircle=r;else if(t=l?Math.abs(t-12):(t+12)%24,n._inInnerCircle=r,n._drawArrowSVG(!0,t),t===i)return;let s=t,d=i;n._inInnerCircle&&(0===d&&18>s?d=12:0==s&&18>d&&(s=12));let m=d-s,c=s-d;0>m&&(m+=12),0>c&&(c+=12),c<m&&(o*=-1),n._animationFrameId=requestAnimationFrame(function(){a(n._inInnerCircle)})}_drawArrowSVG(t,i){const a=this,n=a._measurements,o=a._numericProcessor.getAngleByValue(i);let l;l=a._inInnerCircle?a._computeArrowBodyPoints(n.radius,o,1,n.innerRadius-a._largestLabelSize/2-45):a._computeArrowBodyPoints(n.radius,o,1,n.innerRadius-a._largestLabelSize/2),t?(a._arrow.setAttribute("d",l),a._head.setAttribute("cx",a._headCenter.x),a._head.setAttribute("cy",a._headCenter.y),a._head.setAttribute("r",a._largestLabelSize),a._headRect=a._head.getBoundingClientRect(),0==i%1&&a._highlightLabel(i)):(a._arrow=a._draw.path(l,{class:"smart-needle"}),a._head=a._draw.circle(a._headCenter.x,a._headCenter.y,a._largestLabelSize,{class:"smart-needle-central-circle"}),a._headRect=a._head.getBoundingClientRect())}_drawLabel(t,i,a){var n=Math.round;const o=this,l=o._measurements,s=l.radius,r={class:"smart-label smart-unselectable","font-size":l.fontSize,"font-family":l.fontFamily,"font-weight":l.fontWeight,"font-style":l.fontStyle};"hour"===o.selection?o._plotInnerCircle?0<i?i+=12:i="00":0===i&&(i=12):1===i.toString().length&&(i="0"+i);const d=o._draw.measureText(i,0,r),m=s-a-o._largestLabelSize/2,c=s+m*Math.sin(t),u=s+m*Math.cos(t),p=o._draw.text(i,n(c)-d.width/2,n(u)-d.height/2,d.width,d.height,0,r);p.setAttribute("value",parseFloat(i))}_getCenterCoordinates(){const t=this,i=t.$.picker.getBoundingClientRect(),a=t._measurements.radius,n=document.body.scrollLeft||document.documentElement.scrollLeft,o=document.body.scrollTop||document.documentElement.scrollTop;return{x:i.left+n+a,y:i.top+o+a}}_getMeasurements(){const t=this,i=t._measurements,a=document.createElement("div");let n,o,l,r,s,d;a.className="smart-label",a.style.position="absolute",a.style.visibility="hidden",t.$.svgContainer.appendChild(a),"hour"===t.selection?(n="1",o="23",t.max=12,t._drawMax="12",t._range=12):(n="00",o="55",t.max=60,t._drawMax="60",t._range=60),a.innerHTML=n,l=a.offsetWidth,s=a.offsetHeight,a.innerHTML=o,r=a.offsetWidth,d=a.offsetHeight,t._largestLabelSize=Math.max(l,s,r,d),t._tickIntervalHandler.labelsSize.minLabelSize=s,t._tickIntervalHandler.labelsSize.maxLabelSize=d;const m=window.getComputedStyle(a);i.fontSize=m.fontSize,i.fontFamily=m.fontFamily,i.fontWeight=m.fontWeight,i.fontStyle=m.fontStyle,t.$.svgContainer.removeChild(a)}_headerClickHandler(t){const i=this;if(!(i.disabled||i.readonly))switch(t.target){case i.$.hourContainer:"hour"!==i.selection&&(i.selection="hour",i._changeToHourSelection());break;case i.$.minuteContainer:"minute"!==i.selection&&(i.selection="minute",i._changeToMinuteSelection());break;case i.$.amContainer:if(!i.$amContainer.hasClass("smart-selected")){i._selectAmPm("am");const t=new Date(i.value.getTime());i.value.setHours(i.value.getHours()-12),i.$.hiddenInput.value=i.value,i.$.fireEvent("change",{value:i.value,oldValue:t})}break;case i.$.pmContainer:if(!i.$pmContainer.hasClass("smart-selected")){i._selectAmPm("pm");const t=new Date(i.value.getTime());i.value.setHours(i.value.getHours()+12),i.$.hiddenInput.value=i.value,i.$.fireEvent("change",{value:i.value,oldValue:t})}}}_highlightLabel(t){const i=this;if(i._highlightedLabel){if(parseFloat(i._highlightedLabel.getAttribute("value"))===t)return;i._highlightedLabel.classList.remove("smart-selected"),i._highlightedLabel=void 0}let a;"hour"===i.selection?(t===void 0&&(t=i.value.getHours()),"12-hour"===i.format&&(0===t?t=12:12<t&&(t-=12)),a=t):(t===void 0&&(t=i.value.getMinutes()),a=5*Math.round(t/5),60===a&&(a=0));const n=i.$.picker.querySelector(".smart-label[value=\""+a+"\"]");n&&(a===t||i._overlapsLabel(n))&&(i._highlightedLabel=n,n.classList.add("smart-selected"))}_isVisible(){const t=this;return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}_keydownHandler(t){const i=this;if(!i._dragging){const a=i.enableShadowDOM?i.shadowRoot.activeElement||document.activeElement:document.activeElement,n=t.key;if(i.$.header.contains(a)&&("Enter"===n||" "===n))t.preventDefault(),i._headerClickHandler({target:a});else if(a===i.$.picker&&!t.altKey){let a;if("ArrowRight"===n||"ArrowUp"===n?a=1:("ArrowLeft"===n||"ArrowDown"===n)&&(a=-1),a)if(t.preventDefault(),"hour"===i.selection){let t=i.value.getHours();0===t&&-1===a?t=23:23===t&&1===a?t=0:t+=a,"12-hour"===i.format&&(12<=t&&i.$amContainer.hasClass("smart-selected")?t-=12:12>t&&i.$pmContainer.hasClass("smart-selected")&&(t+=12)),i.setHours(t,void 0,!0)}else{let t=i.value.getMinutes();a*=i.minuteInterval,60<=t+a?t=0:t<-1*a?0==60%a?t=60+a:t=60-60%a:t+=a,i.setMinutes(t,!0)}}}}_overlapsLabel(t){const i=this,a=t.getBoundingClientRect(),n=i._headRect,o=!(a.right-10<n.left||a.left+10>n.right||a.bottom-10<n.top||a.top+10>n.bottom);return o}_parseDateString(t,i){const a=t.indexOf("Date("),n=t.indexOf(")");let o=t;if(-1!==a&&-1!==n){if(o=t.slice(a+5,n),o=o.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===o.trim())return new Date;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+$)/g).test(o))return o=o.replace(/\s/g,""),o=o.split(","),o.map(function(t,i){o[i]=parseInt(t)}),o.unshift(null),o=new(Function.prototype.bind.apply(Date,o)),o}if(""===o.trim())return i;if(!isNaN(o))return new Date(parseInt(o,10));try{o=new Date(o)}catch(t){o=i}return isNaN(o.getTime())?i:o}_pickerDownHandler(t){const i=this;i.disabled||i.readonly||!Smart.Utilities.Core.isMobile&&1!==t.which||i._changeSelection(t)}_pickerMoveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_renderHours(){const t=this;t._highlightedLabel=void 0,t._majorTicksInterval=1,t._numericProcessor.addGaugeTicksAndLabels(),"24-hour"===t.format&&(t._plotInnerCircle=!0,t._distance.labelDistance=55,t._numericProcessor.addGaugeTicksAndLabels(),t._plotInnerCircle=!1,t._distance.labelDistance=10)}_renderMinutes(){const t=this;t._highlightedLabel=void 0,t._majorTicksInterval=5,t._numericProcessor.addGaugeTicksAndLabels()}_renderSVG(){const t=this;if(!t._isVisible()||t._renderingSuspended)return void(t._renderingSuspended=!0);if(t._centralCircle=t._draw.circle(t._measurements.radius,t._measurements.radius,4,{class:"smart-needle-central-circle"}),"hour"===t.selection&&"24-hour"===t.format&&(0===t.value.getHours()||12<t.value.getHours())&&(t._inInnerCircle=!0),t._drawArrow(!1),t._inInnerCircle=!1,"hour"===t.selection){t.interval=1,t._renderHours();let i=t.value.getHours();"12-hour"===t.format&&12<i&&(i-=12),t._highlightLabel(i)}else t.interval=t.minuteInterval,t._renderMinutes(),t._highlightLabel(t.value.getMinutes())}_resizeHandler(){const t=this;let i=!1;if(!t._isVisible())return void(t._renderingSuspended=!0);t._renderingSuspended=!1,i=!0,t._getMeasurements(),t._numericProcessor.getAngleRangeCoefficient();t._setPickerSize(),t._sizeChanged||i?(t._draw.clear(),t._renderSVG(),t._sizeChanged=!1):(t._headRect=t._head.getBoundingClientRect(),t._highlightLabel())}_selectAmPm(t){const i=this;"am"===t?(i._ampm="am",i.$pmContainer.removeClass("smart-selected"),i.$amContainer.addClass("smart-selected")):(i._ampm="pm",i.$amContainer.removeClass("smart-selected"),i.$pmContainer.addClass("smart-selected"))}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.$.hourContainer.removeAttribute("tabindex"),t.$.minuteContainer.removeAttribute("tabindex"),t.$.amContainer.removeAttribute("tabindex"),t.$.pmContainer.removeAttribute("tabindex"),void t.$.picker.removeAttribute("tabindex");const i=0<t.tabIndex?t.tabIndex:0;t.$.hourContainer.tabIndex=i,t.$.minuteContainer.tabIndex=i,t.$.amContainer.tabIndex=i,t.$.pmContainer.tabIndex=i,t.$.picker.tabIndex=i}_setPickerSize(){const t=this,i=t.$.svgContainer.offsetWidth,a=t.$.svgContainer.offsetHeight;let n=.9*Math.min(i,a);t._sizeChanged=!(void 0===t._pickerSize||t._pickerSize===n),t._pickerSize=n,t._measurements.radius=n/2,t._measurements.innerRadius=t._measurements.radius-10,n+="px",t.$.picker.style.width=n,t.$.picker.style.height=n}_updateHours(t,i){const a=this;let n=t;"12-hour"===a.format?"am"===a._ampm?12===n&&(n=0):12>n&&(n+=12):n=t;const o=a._oldValue===void 0?new Date(a.value.getTime()):a._oldValue,l=o.getHours();return n===l?void delete a._oldTimePart:void(a._oldTimePart=l,a._oldValue===void 0&&a.value.setHours(n),a.$.hourContainer.innerHTML=t,!0!==i&&(a.$.hiddenInput.value=a.value,a.$.fireEvent("change",{value:a.value,oldValue:o})))}_updateMinutes(t){const i=this,a=i._oldValue===void 0?new Date(i.value.getTime()):i._oldValue,n=a.getMinutes();return t===n?void delete i._oldTimePart:void(i._oldTimePart=n,i._oldValue===void 0&&i.value.setMinutes(t),t=t.toString(),1===t.length&&(t="0"+t),i.$.minuteContainer.innerHTML=t,i.$.hiddenInput.value=i.value,i.$.fireEvent("change",{value:i.value,oldValue:a}))}_validateFooterTemplate(){const t=this,i=t.footerTemplate;if(null===i)return void(t.$.footer.innerHTML="");let a;if(i instanceof HTMLTemplateElement?a=i:"string"==typeof i&&(a=document.getElementById(i),!(a instanceof HTMLTemplateElement)&&(a=void 0)),void 0===a)return t.footerTemplate=null,void(t.$.footer.innerHTML="");const n=document.importNode(a.content,!0);return t.enableShadowDOM?(t.$.footer.innerHTML="<slot></slot>",void t.appendChild(n)):void t.$.footer.appendChild(n)}_validateInitialPropertyValues(){const t=this;t._validateFooterTemplate(),t.minuteInterval=Math.max(1,Math.min(t.minuteInterval,60)),t._validateValue()}_validateValue(){const t=this,i=t.value,a=t._oldValue===void 0?new Date:this._oldValue;if(!(i instanceof Date))if("string"==typeof i){if(/^\d{1,2}:\d{1,2}$/.test(i)){const n=i.split(":");return void(t.value=new Date(a.getFullYear(),a.getMonth(),a.getDate(),parseFloat(n[0]),parseFloat(n[1])))}t.value=t._parseDateString(i,a)}else t.value=a}}),Smart("smart-toast",class extends Smart.ContentElement{static get properties(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}static get listeners(){return{"toastContainerTopLeft.click":"_containerClickHandler","toastContainerTopLeft.swipeleft":"_swipeHandler","toastContainerTopLeft.swiperight":"_swipeHandler","toastContainerTopLeft.swipetop":"_swipeHandler","toastContainerTopLeft.swipebottom":"_swipeHandler","toastContainerTopRight.click":"_containerClickHandler","toastContainerTopRight.swipeleft":"_swipeHandler","toastContainerTopRight.swiperight":"_swipeHandler","toastContainerTopRight.swipetop":"_swipeHandler","toastContainerTopRight.swipebottom":"_swipeHandler","toastContainerBottomLeft.click":"_containerClickHandler","toastContainerBottomLeft.swipeleft":"_swipeHandler","toastContainerBottomLeft.swiperight":"_swipeHandler","toastContainerBottomLeft.swipetop":"_swipeHandler","toastContainerBottomLeft.swipebottom":"_swipeHandler","toastContainerBottomRight.click":"_containerClickHandler","toastContainerBottomRight.swipeleft":"_swipeHandler","toastContainerBottomRight.swiperight":"_swipeHandler","toastContainerBottomRight.swipetop":"_swipeHandler","toastContainerBottomRight.swipebottom":"_swipeHandler","toastContainerCustom.click":"_containerClickHandler","toastContainerCustom.swipeleft":"_swipeHandler","toastContainerCustom.swiperight":"_swipeHandler","toastContainerCustom.swipetop":"_swipeHandler","toastContainerCustom.swipebottom":"_swipeHandler","toastContainerModal.click":"_containerClickHandler","toastContainerModal.swipeleft":"_swipeHandler","toastContainerModal.swiperight":"_swipeHandler","toastContainerModal.swipetop":"_swipeHandler","toastContainerModal.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.toast.css"]}template(){return`<div id="container">
                    <div id="toastContainerTopLeft" class ="smart-toast-container-top-left"></div>
                    <div id="toastContainerTopRight" class ="smart-toast-container-top-right"></div>
                    <div id="toastContainerBottomLeft" class ="smart-toast-container-bottom-left"></div>
                    <div id="toastContainerBottomRight" class ="smart-toast-container-bottom-right"></div>
                    <div id="toastContainerCustom" class ="smart-toast-container-custom"></div>
                    <div id="toastContainerModal" class ="smart-toast-container-modal"></div>
                </div>`}propertyChangedHandler(t,i,a){const n=this;let o;switch(super.propertyChangedHandler(t,i,a),t){case"value":o=n._instances[n._instances.length-1],o&&(o.getElementsByClassName("smart-toast-item-content")[0].innerHTML=a);break;case"appendTo":null!==i&&null!==a?n.appendTo=i:null===a&&0===n.$.toastContainerCustom.childNodes.length&&n.$.container.appendChild(n.$.toastContainerCustom),n._handleContainers();break;case"modal":case"position":n._handleContainers();break;default:}}attached(){const t=this,a=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.attached();for(let n=0;n<a.length;n++){const i=t.$["toastContainer"+a[n]];i._parent=t,i.closest("smart-toast")&&0<i.childNodes.length&&("Custom"===a[n]?t._appendTo.appendChild(t._container):document.body.appendChild(i))}}detached(){const t=this,a=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.detached();for(let n=0;n<a.length;n++){const i=t.$["toastContainer"+a[n]],o=i.childNodes;i.closest("smart-toast")||t.$.container.appendChild(i);for(let t=0;t<o.length;t++)o[t]._parent._close(o[t]);t.closeAll()}}ready(){super.ready();const t=this;t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._instances=[],t._handleContainers(),t.autoOpen&&t.open()}closeAll(){const t=this;for(var a=t._instances.length-1;-1<a;a--)t._close(t._instances[a])}closeItem(t){const i=this;t&&0!==i._instances.length&&("string"==typeof t?t=document.getElementById(t):t instanceof HTMLElement&&(t=t.closest(".smart-toast-item")),t&&-1!==i._instances.indexOf(t)&&i._close(t))}closeLast(){const t=this;0<t._instances.length&&t._close(t._instances[t._instances.length-1])}open(){const t=this;if(t.disabled)return;-1===Array.from(document.body.childNodes).indexOf(t._container)&&t._handleContainers();let a=document.createElement("div");a.className="smart-toast-item",t.value instanceof HTMLElement?(a.innerHTML=t._defaultItemTemplate(""),a.getElementsByClassName("smart-toast-item-content")[0].appendChild(t.value)):a.innerHTML=t._handleItemTemplate()||t._defaultItemTemplate(t.value),t.showCloseButton&&a.setAttribute("show-close-button","");for(let n=0;n<t.classList.length;n++)a.classList.add(t.classList[n]);t.type&&a.classList.add("smart-"+t.type),a.setAttribute("animation",t.animation),a._parent=t,t._container.appendChild(a),t._instances.push(a),t.$.fireEvent("open",{instance:a}),setTimeout(function(){a.setAttribute("opened","")},10),t.autoClose&&(a._autoCloseTimeout=setTimeout(function(){t._close(a)},t.autoCloseDelay))}_containerClickHandler(t){const i=this,a=t.target.closest(".smart-toast-item-close-button"),n=t.target.closest(".smart-toast-item");a||n?(n._parent.$.fireEvent("click",{instance:n}),a&&n._parent._close(n)):i.modal&&i.closeAll()}_close(t){const i=this;if(-1<i._instances.indexOf(t)){const a=window.getComputedStyle(t,null).getPropertyValue("transition-duration"),n=-1<a.indexOf("ms")?parseInt(a):1e3*parseFloat(a);t.removeAttribute("opened"),i._instances.splice(i._instances.indexOf(t),1),setTimeout(function(){clearTimeout(t._autoCloseTimeout),i.$.fireEvent("close",{instance:t}),t.parentNode&&t.parentNode.removeChild(t)},n)}}_defaultItemTemplate(t){return`<div class ="smart-toast-item-header">
                    <span class ="smart-toast-item-close-button"></span>
                </div>
                <div class ="smart-toast-item-container">
                    <span class ="smart-toast-item-icon"></span><span class ="smart-toast-item-content">${t}</span>
                </div>`}_handleContainers(){const t=this,i=t._validateDOMElement(t.appendTo);if(t.modal)t._container=t.$.toastContainerModal,document.body.appendChild(t._container);else if(i)t._container=t.$.toastContainerCustom,t._appendTo=i,t._appendTo.appendChild(t._container);else{const i=document.querySelectorAll("body > .smart-toast-container-"+t.position)[0];if(!i){switch(t.position){case"top-left":t._container=t.$.toastContainerTopLeft;break;case"top-right":t._container=t.$.toastContainerTopRight;break;case"bottom-left":t._container=t.$.toastContainerBottomLeft;break;case"bottom-right":t._container=t.$.toastContainerBottomRight;}document.body.appendChild(t._container),t.appendTo=null,t._appendTo=null}else t._container=i}}_handleItemTemplate(){const t=this;let i=t.itemTemplate;if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(!i)return t._defaultItemTemplate(t.value);if(i=document.getElementById(i),null===i||!("content"in i))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const a=i.innerHTML,n=/{{\w+}}/g;return a.replace(n,t.value)}_swipeHandler(t){const i=this,a=t.originalEvent.target.closest(".smart-toast-item");a&&i.$.fireEvent(t.type,{instance:a})}_validateDOMElement(t){if(t)return"string"==typeof t?document.getElementById(t):t instanceof HTMLElement?t:void 0}}),Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:"{{elementType}}: \"{{property}}\" must be a String, an HTMLElement or null.",htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: \"{{property}}\" property accepts a string that must match the id of an HTMLTemplate element from the DOM.",invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},offset:{value:[0,0],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return`<div id="container">
                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]">
                        <content></content>
                    </div>
                </div>`}propertyChangedHandler(t,i,a){super.propertyChangedHandler(t,i,a);const n=this;let o;"openMode"===t?(n.close(),n._handleEventListeners(i),n._handleResize()):"selector"===t?(n._oldOwnerElement=n._ownerElement,n._handleSelector(a),n._handleEventListeners()):"tooltipTemplate"===t?n._handleTemplate(i):"value"===t?n.tooltipTemplate?n._handleTemplate():n.$.content.innerHTML=n.value:"visible"===t?(o=a?"open":"close",n.$.fireEvent(o,{owner:n._ownerElement})):void 0;n._applyPosition()}ready(){const t=this;super.ready(),t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement||document.querySelector("body")).position,t._handleSelector(t.selector),t._applyPosition(),t._handleEventListeners(),t._handleResize(),t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._handleTemplate()}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(i.$.content.appendChild(t),i._applyPosition()):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const t=this;t._isOpening&&clearTimeout(t._isOpening);t.visible&&(t.$.fireEvent("close",{owner:t._ownerElement}),t.visible=!1)}insertBefore(t,i){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t&&i?void(a.$.content.insertBefore(t,i),a._applyPosition()):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const t=this;t.disabled||t.readonly||t.visible||(t._isOpening=setTimeout(function(){t._applyPosition(),t.$.fireEvent("open",{owner:t._ownerElement});const i=t.context;t.context=t,t.visible=!0,t.context=i},t.delay))}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(i.$.content.removeChild(t),i._applyPosition()):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}toggle(){const t=this;t.visible?t.close():t.open()}_applyPosition(){function t(t){let a=[],n=t.parentElement;for(;n&&"BODY"!==n.nodeName;){if(a.push(n),i.enableShadowDOM&&!n.parentElement){n=n.getRootNode().host;continue}n=n.parentElement}return a}const i=this;if(!i._ownerElement)return;if(!i.parentElement)return;i._isParentPositionStatic="static"===window.getComputedStyle(i.parentElement).position;const a=i._ownerElement.getBoundingClientRect(),n=i.parentElement?i.parentElement.getBoundingClientRect():{top:0,left:0};let o,l;i.parentElement&&"BODY"===i.parentElement.nodeName.toUpperCase()?(o=a.top+window.scrollY+parseInt(i.offset[1]),l=a.left+window.scrollX+parseInt(i.offset[0])):(o=a.top-n.top+parseInt(i.offset[1]),l=a.left-n.left+parseInt(i.offset[0]));const r=function(){const a=t(i),n=a.length;let o=null,l=i._ownerElement.getBoundingClientRect();for(let t=0,i;t<n;t++)if(i=window.getComputedStyle(a[t]),"static"!==i.getPropertyValue("position")){o=a[t];break}return{top:l.top,left:l.left,nonStaticParent:o}}();switch(i.position){case"bottom":if(i.arrowDirection="top",null===r.nonStaticParent){i.style.top=r.top+window.scrollY+i._ownerElement.offsetHeight+"px",i.style.left=r.left+window.scrollX-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px";break}if(i._isParentPositionStatic){i.style.top=i._ownerElement.offsetTop+i._ownerElement.offsetHeight+"px",i.style.left=i._ownerElement.offsetLeft-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px";break}i.style.top=o+i._ownerElement.offsetHeight+"px",i.style.left=l-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px";break;case"top":if(i.arrowDirection="bottom",null===r.nonStaticParent){i.style.top=r.top+window.scrollY-i.offsetHeight+"px",i.style.left=r.left+window.scrollX-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px";break}if(i._isParentPositionStatic){if(i.style.top=i._ownerElement.offsetTop-i.offsetHeight+"px",i.style.left=i._ownerElement.offsetLeft-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px",i._ownerElement instanceof SVGElement){const t=i._ownerElement.getBoundingClientRect(),a=i._ownerElement.parentNode.getBoundingClientRect();i.style.top=t.top-a.top-i.offsetHeight/2+"px",i.style.left=t.left-i.offsetWidth/2+a.left/2+"px"}break}if(i._ownerElement instanceof SVGElement){const t=i._ownerElement.getBoundingClientRect(),a=i._ownerElement.parentNode.getBoundingClientRect();i.style.top=t.top-a.top-i.offsetHeight+"px",i.style.left=t.left-a.left-i.offsetWidth/2+t.width/2+"px";break}i.style.top=o-i.offsetHeight+"px",i.style.left=l-i.offsetWidth/2+i._ownerElement.offsetWidth/2+"px";break;case"left":if(i.arrowDirection="right",null===r.nonStaticParent){i.style.top=r.top+window.scrollY+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=r.left+window.scrollX-i.offsetWidth+"px";break}if(i._isParentPositionStatic){i.style.top=i._ownerElement.offsetTop+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=i._ownerElement.offsetLeft-i.offsetWidth+"px";break}i.style.top=o+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=l-i.offsetWidth+"px";break;case"right":if(i.arrowDirection="left",null===r.nonStaticParent){i.style.top=r.top+window.scrollY+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=r.left+window.scrollX+i._ownerElement.offsetWidth+"px";break}if(i._isParentPositionStatic){i.style.top=i._ownerElement.offsetTop+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=i._ownerElement.offsetLeft+i._ownerElement.offsetWidth+"px";break}i.style.top=o+i._ownerElement.offsetHeight/2-i.$.content.offsetHeight/2+"px",i.style.left=l+i._ownerElement.offsetWidth+"px";break;case"absolute":i.style.top=(parseInt(i.offset[1])||0)+"px",i.style.left=(parseInt(i.offset[0])||0)+"px";break;default:i.arrowDirection="bottom",i.style.top=i.style.left="";}}_eventsHandler(t){const i=this;return i.disabled||i.readonly?void 0:"click"===t.type?void(i.visible?this.close():this.open()):void("mouseenter"===t.type||"focus"===t.type?this.open():this.close())}_handleEventListeners(t){const i=this;if(i._ownerElement&&(i._oldOwnerElement&&"manual"!==i.openMode&&(i._oldOwnerElement.$.unlisten("mouseenter.tooltip"),i._oldOwnerElement.$.unlisten("mouseleave.tooltip"),i._oldOwnerElement.$.unlisten("focus.tooltip"),i._oldOwnerElement.$.unlisten("blur.tooltip"),i._oldOwnerElement.$.unlisten("click.tooltip"),i._oldOwnerElement=null),t&&("hover"===t?(i._ownerElement.$.unlisten("mouseenter.tooltip"),i._ownerElement.$.unlisten("mouseleave.tooltip")):"focus"===t?(i._ownerElement.$.unlisten("focus.tooltip"),i._ownerElement.$.unlisten("blur.tooltip")):"click"===t?i._ownerElement.$.unlisten("click.tooltip"):void 0),"manual"!==i.openMode))switch(i._ownerElement instanceof Smart.BaseElement||(i._ownerElement.$=Smart.Utilities.Extend(i._ownerElement)),i.openMode){case"hover":i._ownerElement.$.listen("mouseenter.tooltip",i._eventsHandler.bind(i)),i._ownerElement.$.listen("mouseleave.tooltip",i._eventsHandler.bind(i));break;case"focus":i._ownerElement.$.listen("focus.tooltip",i._eventsHandler.bind(i)),i._ownerElement.$.listen("blur.tooltip",i._eventsHandler.bind(i));break;case"click":i._ownerElement.$.listen("click.tooltip",i._eventsHandler.bind(i));break;default:}}_handleResize(){function t(){i._applyPosition()}const i=this;"click"===i.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(t){const i=this;return"string"==typeof t?void(i._ownerElement=0<t.length?document.getElementById(t):void 0):t instanceof HTMLElement||t instanceof SVGElement?void(i._ownerElement=t):null===t?void(i._ownerElement=void 0):void i.error(i.localize("invalidSelector",{elementType:i.nodeName.toLowerCase(),property:"selector"}))}_handleTemplate(t){const a=this;let i=a.tooltipTemplate;if(t&&(a.$.content.innerHTML=a.value?a.value:""),null===i||!i)return;if("function"==typeof a.tooltipTemplate)return void a.tooltipTemplate(a.$.content,{value:a.value});if(!("content"in document.createElement("template")))return void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}));if(i=document.getElementById(i),null===i||!("content"in i))return void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"template"}));const n=i.content,o=n.childNodes.length,l=/{{\w+}}/g;let r=[],s;for(let a=0;a<o;a++)for(s=l.exec(n.childNodes[a].innerHTML);s;)r.push({childNodeIndex:a,bindingString:s[0]}),s=l.exec(n.childNodes[a].innerHTML);const d=r.length;let m=document.importNode(i.content,!0),c,u;for(let n=0;n<d;n++){c=m.childNodes[r[n].childNodeIndex],u=r.length;for(let t=0;t<u;t++)c.innerHTML=c.innerHTML.replace(r[n].bindingString,a.value)}a.$.content.innerHTML="";for(let n=0;n<m.childNodes.length;n++)m.childNodes[n].outerHTML&&(a.$.content.innerHTML+=m.childNodes[n].outerHTML)}}),Smart("smart-tree-item",class extends Smart.MenuItem{static get properties(){return{selected:{value:!1,type:"boolean"}}}ready(){Object.defineProperty(this,"hasStyleObserver",{get:function(){return!1}}),super.ready()}propertyChangedHandler(t,i,a){const n=this,o=n.menu;if("level"===t)return void(n.level=i);if("disabled"!==t&&"separator"!==t&&o){const l=o.context;switch(o.context=o,t){case"label":{const t=o.sorted&&o.autoSort;n.firstElementChild.firstElementChild.firstElementChild.innerHTML=a,t&&(o._unsortItems(o.$.mainContainer),o._applyGrouping(o.$.mainContainer)),o._state.filter&&o._applyFilter(o._state.filter);break}case"selected":n.selected=i,a?o.select(n):o.unselect(n);break;case"shortcut":{let t=n.firstElementChild.children[1];t||(t=document.createElement("div"),t.className="smart-tree-item-shortcut",n.firstElementChild.appendChild(t)),t.innerHTML=a;break}case"value":o.sort&&o.sorted&&o.autoSort&&o._refreshSorting();}o.context=l}}}),Smart("smart-tree-items-group",class extends Smart.MenuItemsGroup{static get properties(){return{selected:{value:!1,type:"boolean"}}}ready(){Object.defineProperty(this,"hasStyleObserver",{get:function(){return!1}}),super.ready()}propertyChangedHandler(t,i,a){const n=this,o=n.menu;if("level"===t)return void(n.level=i);if("disabled"!==t&&"separator"!==t&&o){const l=o.context;switch(o.context=o,t){case"expanded":{n.expanded=i,a?o.expandItem(n):o.collapseItem(n);break}case"label":{const t=o.sorted&&o.autoSort;n.firstElementChild.firstElementChild.firstElementChild.innerHTML=a,t&&(o._unsortItems(o.$.mainContainer),o._applyGrouping(o.$.mainContainer)),o._state.filter&&o._applyFilter(o._state.filter);break}case"selected":n.selected=i,a?o.select(n):o.unselect(n);break;case"value":o.sort&&o.sorted&&o.autoSort&&o._refreshSorting();}o.context=l}}}),Smart("smart-tree",class extends Smart.Menu{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},autoHideToggleElement:{value:!1,type:"boolean"},autoLoadState:{value:!1,type:"boolean"},autoSaveState:{value:!1,type:"boolean"},autoSort:{value:!0,type:"boolean"},displayLoadingIndicator:{value:!1,type:"boolean"},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},hasThreeStates:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{value:{en:{noId:"smart-tree: Saving and loading the element's state are not available if the element has no id."}},type:"object",extend:!0},scrollMode:{value:"scrollbar",allowedValues:["scrollbar","scrollButtons"],type:"string"},selectedIndexes:{value:[],type:"array"},selectionDisplayMode:{value:"row",allowedValues:["row","label"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},showLines:{value:!1,type:"boolean"},showRootLines:{value:!1,type:"boolean"},sort:{value:null,type:"function?"},sortDirection:{value:"asc",allowedValues:["asc","desc"],type:"string"},sorted:{value:!1,type:"boolean"},toggleElementPosition:{value:"near",allowedValues:["near","far"],type:"string"},toggleMode:{value:"dblclick",allowedValues:["click","dblclick","arrow"],type:"string"}}}static get listeners(){return{blur:"_blurHandler",click:"_overriddenMenuHandler",focus:"_focusHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler",mouseout:"_overriddenMenuHandler",mouseover:"_overriddenMenuHandler",resize:"_checkOverflow",styleChanged:"_styleChangedHandler",transitionend:"_overriddenMenuHandler","editInput.blur":"_editInputBlurHandler","filterInput.keydown":"_filterInputKeydownHandler","filterInput.keyup":"_filterInputKeyupHandler","mainContainer.click":"_overriddenMenuHandler","mainContainer.mouseleave":"_overriddenMenuHandler","mainContainer.mouseout":"_overriddenMenuHandler","mainContainer.mouseover":"_overriddenMenuHandler","mainContainer.swipeleft":"_mainContainerSwipeHandler","mainContainer.swiperight":"_mainContainerSwipeHandler","scrollButtonFar.click":"_scrollButtonFarClickHandler","scrollButtonNear.click":"_scrollButtonNearClickHandler","scrollViewer.down":"_scrollViewerDownHandler","scrollViewer.kineticScroll":"_scrollViewerWheelHandler","mainContainer.wheel":"_scrollViewerWheelHandler","document.move":"_moveHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}template(){return`<div id="container">
                    <div class="smart-tree-filter-input-container">
                        <input id="filterInput" class="smart-filter-input" disabled="[[disabled]]" placeholder="[[filterInputPlaceholder]]" type="text" />
                    </div>
                    <smart-repeat-button id="scrollButtonNear" class="smart-tree-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable>
                        <div id="arrowNear" class="smart-arrow smart-arrow-up"></div>
                    </smart-repeat-button>
                    <smart-scroll-viewer id="scrollViewer" animation="[[animation]]" horizontal-scroll-bar-visibility="hidden" right-to-left="[[right-to-left]]">
                        <div id="mainContainer" class="smart-tree-main-container">
                            <content></content>
                        </div>
                        <input type="text" id="editInput" class="smart-tree-edit-input smart-hidden" />
                    </smart-scroll-viewer>
                    <smart-repeat-button id="scrollButtonFar" class="smart-tree-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable>
                        <div id="arrowFar" class="smart-arrow smart-arrow-down"></div>
                    </smart-repeat-button>
                    <div id="loadingIndicatorContainer" class="smart-loader-container smart-hidden">
                        <span id="loadingIndicator" class="smart-loader"></span>
                        <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                    </div>
                </div>`}addAfter(t,i){const a=this;i=a.getItem(i);void 0===i||a.addTo(t,i.parentItem,i,!0)}addBefore(t,i){const a=this;i=a.getItem(i);void 0===i||a.addTo(t,i.parentItem,i)}addTo(t,i){const a=this;if(!(t instanceof Smart.TreeItem||t instanceof Smart.TreeItemsGroup))return;let n,o;if(void 0===i)i=a.$.mainContainer,n=1,o=i;else{if(i=a.getItem(i),!1==i instanceof Smart.TreeItemsGroup)return;n=i.level+1,o=i.itemContainer}a._createItemHTMLStructure(t,n,i,o.childElementCount,0);const l=a.sorted&&a.autoSort,r=a._state.filter,s=a.selectedIndexes.slice(0);l&&a._unsortItems(a.$.mainContainer),t instanceof Smart.TreeItemsGroup&&a._processHTML(t,n+1,!1);let d=arguments[2];d&&arguments[3]&&(d=d.nextElementSibling),d?(o.insertBefore(t,d),a._menuItems={},a._refreshItemPaths(a.$.mainContainer,!0,void 0,a.sorted&&!a.autoSort)):o.appendChild(t),l&&a._applyGrouping(a.$.mainContainer),r&&a._applyFilter(r),a._checkOverflow(),a._expandItemsByDefault(),a.selectedIndexes=[],a._applySelection(!0,s)}clearSelection(){const t=this,i=t.selectedIndexes.slice(0);t.selectedIndexes=[],t._applySelection(!1,i)}collapseAll(t){const i=this,a=i.animation,n=!1===t&&i.hasAnimation;n&&(i.animation="none"),i._collapseAll(!0),n&&(i.animation=a)}ensureVisible(t){const i=this;if(t=i.getItem(t),void 0===t||t.hidden)return;let a=!1;1<t.level&&!i._isBranchExpanded(t)&&(super.expandItem(t.parentItem,void 0,!1),a=i.hasAnimation,a&&(i._ensureVisibleOnTransitionend=t)),a||i._ensureVisible(t)}expandAll(t){const a=this,i=a.animation,n=!1===t&&a.hasAnimation;let o=1,l=a.querySelectorAll("smart-tree-items-group[level=\"1\"]");for(n&&(a.animation="none");0<l.length;){for(let t=0;t<l.length;t++){const i=l[t];i.expanded||a._menuItemsGroupSelectionHandler(i,{target:i,type:"expand"})}o++,l=a.querySelectorAll("smart-tree-items-group[level=\""+o+"\"]")}n&&(a.animation=i)}expandItem(t,i){const a=this;if(t=a.getItem(t),!(void 0===t||!1==t instanceof Smart.TreeItemsGroup||a._isContainerOpened(t.container.level,t.container))){const n=!1===i&&a.hasAnimation,o=a.animation;n&&(a.animation="none"),a._discardKeyboardHover(),a._menuItemsGroupSelectionHandler(t,{target:t,type:"expand"},arguments[2]),n&&(a.animation=o)}}filter(t){const i=this;i.filterable&&(i._applyFilter(t),i.$.filterInput.value=t)}getState(){return JSON.parse(JSON.stringify(this._state))}loadState(t){const a=this,i=a.selectedIndexes.slice(0),n=[];if(!t){if(!a.id)return void a.warn(a.localize("noId"));t=window.localStorage.getItem("smartTree"+a.id)}"string"==typeof t&&(t=JSON.parse(t)),t.filter&&!a.filterable&&(t.filter="");let o=t.filter!==a._state.filter,l=t.sorted!==a.sorted;l?(a.sorted=t.sorted,a._updateState("sorted",a.sorted),t.sorted?a._applyGrouping(a.$.mainContainer):a._unsortItems(a.$.mainContainer),(t.filter||o)&&(a._applyFilter(t.filter),a.$.filterInput.value=t.filter)):o&&(a._applyFilter(t.filter),a.$.filterInput.value=t.filter),a._menuItemsGroupsToExpand=[];for(let n=0;n<t.expanded.length;n++){const i=a.getItem(t.expanded[n]);i&&a._menuItemsGroupsToExpand.push(i)}a._expandItemsByDefault(!0);for(let o=0;o<t.selected.length;o++){const i=a.getItem(t.selected[o]);i&&n.push(i.path)}a.selectedIndexes=n,a._applySelection(!1,i)}moveDown(t){const i=this;t=i.getItem(t);const a=t.nextElementSibling;void 0===t||!a||i.sorted||(i._moveTreeItem(t,a,2,[i]),i.filterable&&i._state.filter&&i._applyFilter(i._state.filter))}moveUp(t){const i=this;t=i.getItem(t);const a=t.previousElementSibling;void 0===t||!a||i.sorted||(i._moveTreeItem(t,a,0,[i]),i.filterable&&i._state.filter&&i._applyFilter(i._state.filter))}removeItem(t){const i=this;if(t=i.getItem(t),void 0!==t){if(t instanceof Smart.TreeItemsGroup){const a=t.container;i._isContainerOpened(a.level,a)&&i._closeSubContainersTreeMode(a.level,a)}const a=i.sorted&&i.autoSort;a&&i._unsortItems(i.$.mainContainer),t.parentElement.removeChild(t),i._menuItems={},i._refreshItemPaths(i.$.mainContainer,!0,void 0,i.sorted&&!i.autoSort),a&&i._applyGrouping(i.$.mainContainer);const n=i._state.filter,o=i.selectedIndexes.slice(0);n&&i._applyFilter(n),i._checkOverflow(),i.selectedIndexes=[],i._applySelection(!0,o)}}saveState(){const t=this;return t.id?window.localStorage.setItem("smartTree"+t.id,JSON.stringify(t._state)):t.warn(t.localize("noId")),JSON.parse(JSON.stringify(t._state))}select(t){const i=this;t=i.getItem(t);void 0===t||t.selected||t.templateApplied||i._handleSelection(t,{type:"programmatic"})}unselect(t){const i=this;t=i.getItem(t);void 0===t||!t.selected||t.templateApplied||i._handleSelection(t,{type:"programmatic"})}updateItem(t,i){const a=this;if(t=a.getItem(t),void 0!==t&&void 0!==i){const a=t instanceof Smart.TreeItem;for(let n in i)if(i.hasOwnProperty(n)){if(a){if(-1===["disabled","label","level","selected","separator","shortcut","value"].indexOf(n))continue;}else if(-1===["disabled","expanded","label","level","selected","separator","value"].indexOf(n))continue;t[n]=i[n]}}}propertyChangedHandler(t,i,a){const n=this;switch(t){case"allowDrag":case"allowDrop":case"autoLoadState":case"autoSort":case"editable":case"filterInputPlaceholder":case"loadingIndicatorPlaceholder":case"selectionDisplayMode":case"showLines":case"showRootLines":case"toggleElementPosition":case"toggleMode":break;case"autoHideToggleElement":a?n.$mainContainer.addClass("hidden-arrows"):n.$mainContainer.removeClass("hidden-arrows");break;case"autoSaveState":if(!a)return;if(!n.id)return n.warn(n.localize("noId")),void(n.autoSaveState=!1);window.localStorage.setItem("smartTree"+n.id,JSON.stringify(n._state));break;case"dataSource":{const t=n.selectedIndexes.slice(0);n.selectedIndexes=[],n._menuItems={},n._processDataSource(),n._checkOverflow(),n._expandItemsByDefault(),n._applySelection(!0,t);const i=n._state.filter;i&&n._applyFilter(i);break}case"disabled":n._setFocusable(),n.$.scrollButtonNear.disabled=a,n.$.scrollButtonFar.disabled=a,a||n._updateScrollButtonVisibility();break;case"displayLoadingIndicator":a?(n._discardKeyboardHover(!0),n.$loadingIndicatorContainer.removeClass("smart-hidden")):n.$loadingIndicatorContainer.addClass("smart-hidden");break;case"filterable":!1===a&&(n._applyFilter(""),n.$.filterInput.value=""),n._checkOverflow();break;case"filterMode":n.filterable&&n._state.filter&&n._applyFilter(n._state.filter);break;case"hasThreeStates":if("checkBox"!==n.selectionMode)return;if(a)n._applySelection(!1);else{const t=n.querySelectorAll("[indeterminate]");for(let a=0;a<t.length;a++)t[a].removeAttribute("indeterminate")}break;case"loadingIndicatorPosition":"center"===a?n.$loadingIndicatorPlaceHolder.addClass("smart-hidden"):n.$loadingIndicatorPlaceHolder.removeClass("smart-hidden");break;case"overflow":if("scrollbar"===n.scrollMode)return void(n.$.scrollViewer.verticalScrollBarVisibility="scroll"===a?"visible":"auto");n.$.scrollViewer.scrollTop=0,"hidden"===a?(n.$scrollViewer.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")):(n.$.scrollButtonNear.disabled=n.disabled,n.$.scrollButtonFar.disabled=n.disabled,"auto"===a?(n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden"),n._checkOverflow()):(n.$scrollViewer.addClass("scroll-buttons-shown"),n.$scrollViewer.removeClass("one-button-shown"),n.$scrollButtonNear.removeClass("smart-hidden"),n.$scrollButtonFar.removeClass("smart-hidden"),n._updateScrollButtonVisibility())),n.$.scrollViewer.refresh();break;case"rightToLeft":{let t,i;for(let o in a?(t="paddingLeft",i="paddingRight"):(t="paddingRight",i="paddingLeft"),n._menuItems)if(n._menuItems.hasOwnProperty(o)){const a=n._menuItems[o],l=a.firstElementChild;l.style[t]="",n._setIndentation(l,a.level,i)}break}case"scrollMode":if("hidden"===n.overflow)return;if(n.$.scrollViewer.scrollTop=0,"scrollButtons"===a)return"scroll"===n.overflow&&(n.$scrollViewer.addClass("scroll-buttons-shown"),n.$scrollButtonNear.removeClass("smart-hidden"),n.$scrollButtonFar.removeClass("smart-hidden")),n.$.scrollViewer.verticalScrollBarVisibility="auto",void n._checkOverflow();n.$scrollViewer.removeClass("scroll-buttons-shown"),n.$scrollViewer.removeClass("one-button-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden"),n.$.scrollViewer.verticalScrollBarVisibility="auto"===n.overflow?"auto":"visible";break;case"selectedIndexes":n._applySelection(!1,i);break;case"selectionMode":if(void 0===n._menuItems[0])return;if("one"===i&&"none"!==a&&"checkBox"!==a&&"radioButton"!==a||-1!==i.indexOf("oneOrMany")&&-1!==a.indexOf("oneOrMany")||"none"===i&&(-1!==a.indexOf("zero")||"checkBox"===a)||"zeroOrMany"===a&&"checkBox"!==i||"radioButton"===i&&-1!==a.indexOf("Many")||!n.hasThreeStates&&("checkBox"===a||"checkBox"===i&&"zeroOrMany"===a))return void(n._lastSelectedItem="one"===a||"oneOrManyExtended"===a?n._menuItems[n.selectedIndexes[n.selectedIndexes.length-1]]:void 0);if(n.hasThreeStates&&"checkBox"===i){const t=n.querySelectorAll("[indeterminate]");for(let a=0;a<t.length;a++)t[a].removeAttribute("indeterminate")}n._applySelection(!1);break;case"sort":{if(!n.sorted)return;n._refreshSorting();break}case"sortDirection":n.sorted&&!n.sort&&(n._unsortItems(n.$.mainContainer),n._applyGrouping(n.$.mainContainer));break;case"sorted":{if(!a&&!n.autoSort)return n._refreshItemPathsAndSelection(),void n._updateState("sorted",!1);a?n._applyGrouping(n.$.mainContainer):n._unsortItems(n.$.mainContainer);const t=n._state.filter;t&&n._applyFilter(t),n._updateState("sorted",a),n._checkOverflow();break}case"unfocusable":n._setFocusable();}}_addDragFeedback(){const t=this,i=document.createElement("div");return i.className="smart-tree-item-feedback",t.theme&&i.classList.add(t.theme),1===t._dragDetails.items.length?i.innerHTML=t._dragDetails.item.label:(i.classList.add("multiple"),i.innerHTML="&#xf0c5;"),document.body.appendChild(i),i}_applyFilter(t){function a(t,i){t?(i.hidden&&i.$.removeClass("smart-hidden"),i.hidden=!1):(!i.hidden&&i.$.addClass("smart-hidden"),i.hidden=!0)}function n(i,l){let r=!1,s=0,d;l=Array.from(l);for(let m=0;m<l.length;m++){const i=l[m];i instanceof Smart.TreeItem?a(o._findItem(i,t),i):n(i,i.itemContainer.children),i.hidden||(s++,d=i),r=r||!i.hidden}if(i!==o.$.mainContainer){const n=o._findItem(i,t);a(r||n,i),r&&null===n?i.$.addClass("filtered-child"):i.$.removeClass("filtered-child"),!r&&0<l.length?(i.hiddenChildren=!0,i.$.addClass("hidden-children"),o.collapseItem(i,void 0,!1)):(i.hiddenChildren=!1,i.$.removeClass("hidden-children"))}""!==t&&0<s&&d.$.addClass("last-filtered-child")}const o=this;if(""!==t||o.hasAttribute("filter-applied")){const a=Array.from(o.getElementsByClassName("last-filtered-child"));for(let t=0;t<a.length;t++)a[t].$.removeClass("last-filtered-child");n(o.$.mainContainer,o.$.mainContainer.children),""===t?o.removeAttribute("filter-applied"):o.setAttribute("filter-applied",""),o._updateState("filter",t),o._checkOverflow()}}_applyHierarchicalSelection(t,a){const n=this,o=t!==n.$.mainContainer,l=o?t.itemContainer.children:t.children;let r=0,s=0;for(let d=0;d<l.length;d++){const i=l[d];t.selected&&i.set("selected",!0),i instanceof Smart.TreeItemsGroup?n._applyHierarchicalSelection(i,a):i.selected&&a.push(i.path),o&&(i.selected?r++:i.hasAttribute("indeterminate")&&s++)}o&&(n._setThreeStateCheckbox(t,r,s),t.selected&&a.push(t.path))}_applyRadioButtonSelection(t,a,n){const o=this,l=t===o.$.mainContainer?t.children:t.itemContainer.children,r=[];let i;for(let s=0;s<l.length;s++){const t=l[s];t instanceof Smart.TreeItemsGroup&&o._applyRadioButtonSelection(t,a,n),t.set("selected",!1),-1!==a.indexOf(t.path)&&r.push(t)}i=0===r.length?l[0]:r[r.length-1],i.set("selected",!0),n.push(i.path)}_applySelection(t,i){const a=this;let n=a.selectedIndexes.slice(0);if(void 0===i&&(i=n.slice(0)),void 0===a._menuItems[0])return a.selectedIndexes=[],a._lastSelectedItem=void 0,void(a.isCompleted&&JSON.stringify(i)!==JSON.stringify([])&&a.$.fireEvent("change",{selectedIndexes:a.selectedIndexes,oldSelectedIndexes:i}));const o=a.selectionMode,l=Array.from(a.querySelectorAll("[selected]"));for(let o=n.length-1;0<=o;o--){const t=a._menuItems[n[o]];void 0===t&&n.splice(o,1)}if(t)for(let t=0;t<l.length;t++)-1===n.indexOf(l[t].path)&&n.push(l[t].path);else{for(let t=0;t<l.length;t++)l[t].set("selected",!1);l.length=0}switch(a._sortPathCollection(n),o){case"none":n.length=0;for(let t=0;t<l.length;t++)l[t].set("selected",!1);break;case"one":case"zeroOrOne":"zeroOrOne"!==o&&0===n.length&&n.push("0");for(let t=0;t<n.length;t++){const i=a._menuItems[n[t]];if(t==n.length-1){i.set("selected",!0),n=[n[t]];break}-1!==l.indexOf(i)&&i.set("selected",!1)}break;case"oneOrMany":case"oneOrManyExtended":0===n.length&&n.push("0");for(let t=0;t<n.length;t++)a._menuItems[n[t]].set("selected",!0);break;case"zeroOrMany":case"checkBox":for(let t=0;t<n.length;t++)a._menuItems[n[t]].set("selected",!0);if("checkBox"===o&&a.hasThreeStates){const t=[];a._applyHierarchicalSelection(a.$.mainContainer,t),a._sortPathCollection(t),n=t}break;case"radioButton":{const t=[];a._applyRadioButtonSelection(a.$.mainContainer,n,t),a._sortPathCollection(t),n=t;break}}a.selectedIndexes=n,a._updateState("selected"),a._lastSelectedItem="one"===o||"oneOrManyExtended"===o?a._menuItems[n[n.length-1]]:void 0,a.isCompleted&&!1!==arguments[2]&&JSON.stringify(i)!==JSON.stringify(n)&&a.$.fireEvent("change",{selectedIndexes:a.selectedIndexes,oldSelectedIndexes:i})}_autoLoadState(t){const a=this,n=[];for(let n=0;n<a._menuItemsGroupsToExpand.length;n++)a._menuItemsGroupsToExpand[n].set("expanded",!1);a._menuItemsGroupsToExpand=[];for(let n=0;n<t.expanded.length;n++){const i=a.getItem(t.expanded[n]);i&&a._menuItemsGroupsToExpand.push(i)}a.filterable&&t.filter&&(a._applyFilter(t.filter),a.$.filterInput.value=t.filter);for(let o=0;o<t.selected.length;o++){const i=a.getItem(t.selected[o]);i&&n.push(i.path)}a.selectedIndexes=n}_blurHandler(){this._discardKeyboardHover(!0)}_canItemBeHovered(t){const i=t.level;return!1===t.disabled&&!0!==t.templateApplied&&!0!==t.hidden&&(1===i||1<i&&this._isContainerOpened(i,t.parentElement.container)&&0<t.getBoundingClientRect().height)}_canItemBeSelected(t){return!1===t.disabled&&!0!==t.templateApplied}_checkOverflow(){var t=Math.round;const i=this,a=i.$.scrollViewer,n=i.overflow;if("scrollbar"===i.scrollMode||"hidden"===n)return void a.refresh();const o=a.scrollTop;"auto"===n&&(a.$.removeClass("scroll-buttons-shown"),a.$.removeClass("one-button-shown"),i.$scrollButtonNear.addClass("smart-hidden"),i.$scrollButtonFar.addClass("smart-hidden"));const l=t(a.$.scrollViewerContentContainer.offsetHeight)>t(a.$.scrollViewerContainer.offsetHeight),r=0<t(a.scrollTop),s=t(a.$.scrollViewerContainer.offsetHeight+a.scrollTop)<t(a.$.scrollViewerContentContainer.offsetHeight);l?"auto"===n?(a.$.addClass("scroll-buttons-shown"),r&&i.$scrollButtonNear.removeClass("smart-hidden"),s&&i.$scrollButtonFar.removeClass("smart-hidden"),!1==(r&&s)&&a.$.addClass("one-button-shown"),!i.disabled&&(i.$.scrollButtonNear.disabled=!1,i.$.scrollButtonFar.disabled=!1),a.scrollTop=o):(i.$scrollButtonNear.removeClass("smart-hidden"),i.$scrollButtonFar.removeClass("smart-hidden"),i.disabled?(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0):(i.$.scrollButtonNear.disabled=!r,i.$.scrollButtonFar.disabled=!s)):"scroll"===n&&(i.$.scrollButtonNear.disabled=!0,i.$.scrollButtonFar.disabled=!0),a.refresh()}_createElement(){const t=this,i=window.getComputedStyle(t.$.scrollViewer);Object.defineProperty(t,"dataSource",{get:function(){return t.context===t?t.properties.dataSource.value:t._getDataSource()},set(i){t.updateProperty(t,t._properties.dataSource,i)}}),!t.id&&(t.autoLoadState||t.autoSaveState)&&(t.warn(t.localize("noId")),t.autoLoadState=!1,t.autoSaveState=!1),t.mode="tree",t._element="tree",t._isMobile=Smart.Utilities.Core.isMobile,t._edgeMacFF=!1,t._autoScrollCoefficient=Smart.Utilities.Core.Browser.Firefox?4:Smart.Utilities.Core.Browser.Edge?8:2,t._scrollViewerPadding=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)||0,t._state={expanded:[],filter:""},t._dblclickObject={numberOfClicks:0},t.autoHideToggleElement&&t.$mainContainer.addClass("hidden-arrows"),t.disabled&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0),"scrollbar"===t.scrollMode&&"scroll"===t.overflow&&(t.$.scrollViewer.verticalScrollBarVisibility="visible"),null===t.dataSource&&t.$.mainContainer.firstElementChild instanceof HTMLUListElement&&t._processUList();const a=t.getElementsByTagName("smart-tree-item"),n=function(){let i;t.autoLoadState&&(i=window.localStorage.getItem("smartTree"+t.id),i&&(i=JSON.parse(i),t.sorted=i.sorted)),t._setFocusable(),t._menuItems={},null===t.dataSource?t._processHTML(t.$.mainContainer,1):t._processDataSource(),"scrollButtons"===t.scrollMode&&"scroll"===t.overflow&&(t.$scrollViewer.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden"),t._updateScrollButtonVisibility()),t._checkOverflow(),i&&t._autoLoadState(i),t._expandItemsByDefault(),t._applySelection(!0),t._updateState("sorted",t.sorted),t.displayLoadingIndicator&&t.$loadingIndicatorContainer.removeClass("smart-hidden"),"center"!==t.loadingIndicatorPosition&&t.$loadingIndicatorPlaceHolder.removeClass("smart-hidden"),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted())};0===a.length?n():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(a,n))}_dblclickHandler(t,i,a){const n=this;"dblclick"!==n.toggleMode||t instanceof Smart.TreeItem||i||n._menuItemsGroupSelectionHandler(t,a)}_discardKeyboardHover(t,i){const a=this;i||!a._hoveredViaKeyboard||!t&&a._hoveredViaKeyboard instanceof Smart.MenuItemsGroup&&a._isContainerOpened(a._hoveredViaKeyboard.level+1,a._hoveredViaKeyboard.container)||(a._hoveredViaKeyboard.removeAttribute("focus"),a._hoveredViaKeyboard=void 0)}_documentUpHandler(t){const a=this,i=a._downItem,n=t.originalEvent.target;if(delete a._downItem,a._editedItem&&!a._editInputDown&&(!a._isMobile&&n!==a.$.editInput||a._isMobile&&document.elementFromPoint(t.clientX,t.clientY)!==a.$.editInput))return void a._endEditing();if(delete a._editInputDown,i){const o=n.closest("smart-tree-item")||n.closest("smart-tree-items-group");!o||!o.selected||o!==i||a._dragDetails&&a._dragDetails.feedbackShown||o instanceof Smart.TreeItemsGroup&&(n.closest(".smart-tree-items-group-arrow")||n===o.container||n===o.container.firstElementChild)||a._handleSelection(o,t)}const o=a._dragDetails;if(!o)return;const l=Smart.Tree.hoveredTree,r=Smart.Tree.hoveredItem;if(delete a._dragDetails,delete Smart.Tree.treeItemDragged,delete Smart.Tree.hoveredTree,delete Smart.Tree.hoveredItem,a.$.scrollViewer._scrollView.disableSwipeScroll=!1,!o.feedbackShown)return;const s=l||document.elementFromPoint(t.clientX,t.clientY);let d;document.body.removeChild(o.feedback),l&&clearInterval(l._dragInterval);const m=o.item,c=o.items,u=o.validItems;if(s){if(!r||m.contains(r))return void a.$.fireEvent("dragEnd",{items:c,dropTarget:s,originalEvent:t});if(l&&l.allowDrop&&!l.disabled){r.classList.remove("drop-target"),r.classList.contains("top")?(r.classList.remove("top"),d=0):r.classList.contains("bottom")?(r.classList.remove("bottom"),d=2):d=1;const n=[l];if(l!==a)n.push(a);else if(o.validateOnDrop)for(let t=0;t<u.length;t++)if(u[t].contains(r))return;const i=a.$.fireEvent("dragEnd",{items:c,dropTarget:r,targetTree:l,originalEvent:t});if(!i.defaultPrevented){l.sorted&&l.autoSort&&l._unsortItems(l.$.mainContainer);for(let t=0;t<u.length;t++)a._moveTreeItem(u[t],r,d,n);l.sorted&&l.autoSort&&l._applyGrouping(l.$.mainContainer),l!==a&&l._state.filter&&l._applyFilter(l._state.filter)}}}}_editInputBlurHandler(){this._endEditing()}_endEditing(t){const i=this,a=i._editedItem;if(a&&(delete i._editedItem,i.$editInput.addClass("smart-hidden"),i.focus(),!t)){const t=i.$.editInput.value,n=i.sorted&&i.autoSort,o=i._state.filter;t===a.label||(a.set("label",t),a.firstElementChild.firstElementChild.firstElementChild.innerHTML=t,n&&(i._unsortItems(i.$.mainContainer),i._applyGrouping(i.$.mainContainer)),o&&i._applyFilter(o))}}_ensureVisible(t){const i=this;i._ensureVisibleTreeMode(t,t.getBoundingClientRect(),i.$.scrollViewer,i.$.scrollViewer.getBoundingClientRect(),i._scrollViewerPadding)}_filterInputKeydownHandler(t){if("PageDown"!==t.key)return void("PageUp"===t.key&&(t.preventDefault(),t.stopPropagation()));const i=this;let a;if(t.preventDefault(),t.stopPropagation(),0<i.selectedIndexes.length){const t=i.selectedIndexes.slice(0);a=i._lastSelectedItem||i._menuItems[i.selectedIndexes[i.selectedIndexes.length-1]],"checkBox"!==i.selectionMode&&"radioButton"!==i.selectionMode&&(i.selectedIndexes=[a.path],i._applySelection(!1,t)),i.focus()}else a=i._getFirstEnabledChild(i.$.mainContainer),i.focus(),a&&i._hoverViaKeyboard(a);i._ensureVisible(a)}_focusHandler(){const t=this;0<t.selectedIndexes.length&&!t._hoveredViaKeyboard&&(t._lastSelectedItem?t._hoverViaKeyboard(t._lastSelectedItem,!1,void 0,!1):t._hoverViaKeyboard(t._menuItems[t.selectedIndexes[t.selectedIndexes.length-1]],!1,void 0,!1))}_getDataSource(){function t(a,n){for(let o=0;o<a.length;o++){const i=a[o],l={label:i.label};i.disabled&&(l.disabled=!0),i.selected&&(l.selected=!0),i.separator&&(l.separator=!0),null!==i.value&&(l.value=i.value),i instanceof Smart.TreeItem?i.shortcut&&(l.shortcut=i.shortcut):(i.expanded&&(l.expanded=!0),l.items=[],t(i.itemContainer.children,l.items)),n.push(l)}}const i=this,a=[];return t(i.$.mainContainer.children,a),a}_handleHierarchicalSelection(t,a){function n(t,a){const o=t.itemContainer.children;for(let l=0;l<o.length;l++){const t=o[l];t.set("selected",a),t.removeAttribute("indeterminate"),t instanceof Smart.TreeItemsGroup&&n(t,a)}}const i=this;let o=t;for(t.selected?t.set("selected",!1):(t.set("selected",!0),t.removeAttribute("indeterminate"));o.parentItem;){const t=o.parentItem,a=t.itemContainer.children;let n=0,l=0;for(let t=0;t<a.length;t++)a[t].selected?n++:a[t].hasAttribute("indeterminate")&&l++;i._setThreeStateCheckbox(t,n,l),o=t}t instanceof Smart.TreeItemsGroup&&n(t,t.selected),a.length=0;const l=Array.from(i.querySelectorAll("[selected]"));for(let n=0;n<l.length;n++)a.push(l[n].path);i._sortPathCollection(a)}_handleSelection(t,i){const a=this,n=a.selectionMode;if("none"===n||"programmatic"!==i.type&&!a._canItemBeSelected(t))return;const o=t.selected;if(o&&"down"===i.type)return;const l=a.selectedIndexes.slice(0);let r=l.slice(0);switch(n){case"one":if(o)return;a._menuItems[r[0]].set("selected",!1),a.selectedIndexes=[t.path],t.set("selected",!0),a._lastSelectedItem=t;break;case"zeroOrOne":o?(a.selectedIndexes=[],t.set("selected",!1)):(r[0]!==void 0&&a._menuItems[r[0]].set("selected",!1),a.selectedIndexes=[t.path],t.set("selected",!0));break;case"oneOrMany":case"zeroOrMany":if(o){if(1===r.length&&"zeroOrMany"!==n)return;r.splice(r.indexOf(t.path),1),t.set("selected",!1)}else r.push(t.path),a._sortPathCollection(r),t.set("selected",!0);a.selectedIndexes=r;break;case"oneOrManyExtended":{const n=i.ctrlKey,o=i.shiftKey;if(!n&&!o||o&&t===a._lastSelectedItem){for(let t=0;t<r.length;t++)a._menuItems[r[t]].set("selected",!1);r=[t.path],t.set("selected",!0),a._lastSelectedItem=t}else if(n)t.selected&&1<r.length?(r.splice(r.indexOf(t.path),1),t.set("selected",!1)):!t.selected&&(r.push(t.path),a._sortPathCollection(r),t.set("selected",!0),a._lastSelectedItem=t);else if(o){for(let t=0;t<r.length;t++)a._menuItems[r[t]].set("selected",!1);r=a._selectItemRange(a._lastSelectedItem,t)}a.selectedIndexes=r;break}case"checkBox":a.hasThreeStates?a._handleHierarchicalSelection(t,r):o?(r.splice(r.indexOf(t.path),1),t.set("selected",!1)):(r.push(t.path),a._sortPathCollection(r),t.set("selected",!0)),a.selectedIndexes=r;break;case"radioButton":{if(t.selected)return;let i;for(let a=0;a<t.parentElement.children.length;a++){const n=t.parentElement.children[a];if(n.selected){i=n;break}}const n=r.indexOf(i.path);i.set("selected",!1),t.set("selected",!0),r.splice(n,1),r.push(t.path),a._sortPathCollection(r),a.selectedIndexes=r;break}}a._discardKeyboardHover(!0),"programmatic"!==i.type&&a._hoverViaKeyboard(t,!1,void 0,!a._treeAnimationInProgress),a._updateState("selected"),JSON.stringify(l)!==JSON.stringify(a.selectedIndexes)&&a.$.fireEvent("change",{item:t,selectedIndexes:a.selectedIndexes,oldSelectedIndexes:l})}_hoverViaKeyboard(t,i,a,n){if(t){const o=this;t.setAttribute("focus",""),o._hoveredViaKeyboard=t,!1!==n&&o._ensureVisible(t),i&&o._handleSelection(t,a)}}_keydownHandler(t){function i(a){for(let n=a;n<r.length;n++){const i=r[n];if(o._canItemBeHovered(i)){if(d){if(d===i)break;d.removeAttribute("focus")}o._hoverViaKeyboard(i,s,t);break}}}function a(a){for(let n=a;0<=n;n--){const i=r[n];if(o._canItemBeHovered(i)){if(d){if(d===i)break;d.removeAttribute("focus")}o._hoverViaKeyboard(i,s,t);break}}}function n(){1<d.level&&(d.removeAttribute("focus"),o._hoverViaKeyboard(d.parentItem,s,t))}const o=this,l=t.key;if(o._editedItem)return void("Enter"===l?o._endEditing():"Escape"===l&&o._endEditing(!0));if(document.activeElement!==o||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","F2","Home","PageDown","PageUp"," "].indexOf(l)||o.disabled||o.displayLoadingIndicator)return;t.preventDefault();const r=Array.from(o.$.mainContainer.querySelectorAll("smart-tree-item, smart-tree-items-group")),s="one"===o.selectionMode||"oneOrManyExtended"===o.selectionMode&&!t.ctrlKey,d=o.$.mainContainer.querySelector("[focus]");let m;switch(l){case"ArrowDown":m=d?r.indexOf(d)+1:0,i(m);break;case"ArrowLeft":if(!d)return;if(d instanceof Smart.TreeItem)n();else{if(o._isContainerOpened(d.level+1,d.container))return void o._closeSubContainersTreeMode(d.level+1,d.container,!0,!0);n()}break;case"ArrowRight":if(!d||d instanceof Smart.TreeItem)return;o._isContainerOpened(d.level+1,d.container)?(d.removeAttribute("focus"),o._hoverViaKeyboard(o._getFirstEnabledChild(d.itemContainer),s,t)):o._menuItemsGroupSelectionHandler(d,{target:d,type:"keydown"});break;case"ArrowUp":m=d?r.indexOf(d)-1:r.length-1,a(m);break;case"End":a(r.length-1);break;case"Enter":d&&d instanceof Smart.TreeItemsGroup&&o._menuItemsGroupSelectionHandler(d,{target:d,type:"keydown"});break;case"F2":o.editable&&o._startEditing(d);break;case"Home":i(0);break;case"PageDown":o._pageDownHandler(r,d,s,t);break;case"PageUp":o._pageUpHandler(r,d,s,t);break;case" ":d&&o._handleSelection(d,t);}}_mainContainerSwipeHandler(t){Smart.Tree.treeItemDragged&&t.stopPropagation()}_menuItemsGroupSelectionHandler(t,i,a){const n=this,o=n.toggleMode,l=!!i.originalEvent&&i.originalEvent.target.classList.contains("smart-tree-items-group-arrow"),r=t.container;if("down"!==i.type||l||"dblclick"===o&&1!==n._dblclickObject.numberOfClicks||n._handleSelection(t,i),!("down"===i.type&&!l&&("dblclick"===o&&2!==n._dblclickObject.numberOfClicks||"click"===o&&1<n._dblclickObject.numberOfClicks||"arrow"===o)||t.hiddenChildren)){const o=r.level;let l=n.hasAnimation;if("keydown"===i.type&&n._discardKeyboardHover(),n._treeAnimationInProgress&&(r.removeEventListener("transitionend",n._transitionendHandlerExpand),r.removeEventListener("transitionend",n._transitionendHandlerCollapse)),n._isContainerOpened(o,r))n._closeSubContainersTreeMode(o,r,!0,!1!==a);else{const s=n.$.fireEvent("expanding",{item:t,label:t.label,path:t.path,value:t.value,children:t.itemContainer.children});if(s.defaultPrevented)return;l&&("expand"!==i.type&&(n._ensureVisibleOnTransitionend=t),n._expandSection(r)),r.$.removeClass("smart-visibility-hidden"),"keydown"===i.type&&(t.setAttribute("focus",""),n._hoveredViaKeyboard=t),t.$.addClass("smart-tree-items-group-opened"),t.$.addClass("smart-tree-items-group-expanded"),n._addOpenedContainer(o,r),void 0===i.type&&n._hoverViaKeyboard(n._getFirstEnabledChild(t.itemContainer)),!1!==a&&n.$.fireEvent("expand",{item:t,label:t.label,path:t.path,value:t.value,children:t.itemContainer.children})}l||(n._checkOverflow(),"expand"!==i.type&&n._ensureVisible(t))}}_mouseenterHandler(){const t=this;t.autoHideToggleElement&&t.$mainContainer.removeClass("hidden-arrows"),Smart.Tree.treeItemDragged&&t.allowDrop&&!t.disabled&&(Smart.Tree.hoveredTree=t)}_mouseleaveHandler(){const t=this;if(t.autoHideToggleElement&&t.$mainContainer.addClass("hidden-arrows"),Smart.Tree.treeItemDragged){Smart.Tree.hoveredTree&&(clearInterval(Smart.Tree.hoveredTree._dragInterval),delete Smart.Tree.hoveredTree);const t=Smart.Tree.hoveredItem;t&&(t.classList.remove("drop-target"),t.classList.remove("top"),t.classList.remove("bottom"),delete Smart.Tree.hoveredItem)}}_moveHandler(t){var i=Math.abs;const a=this,n=a._dragDetails;if(!n)return;if(!n.feedbackShown)if(5<i(n.coords.x-t.pageX)||5<i(n.coords.y-t.pageY)){const t=a.$.fireEvent("dragStart",{items:n.items,originalEvent:n.originalEvent});if(t.defaultPrevented)return delete a._dragDetails,delete Smart.Tree.treeItemDragged,delete Smart.Tree.hoveredTree,delete Smart.Tree.hoveredItem,void(a.$.scrollViewer._scrollView.disableSwipeScroll=!1);n.feedback=a._addDragFeedback(),n.feedbackShown=!0}else return;let o,l,r;if(a.$.fireEvent("dragging",{items:n.items,originalEvent:t}),n.feedback.style.left=t.pageX+10+"px",n.feedback.style.top=t.pageY+10+"px",a._isMobile){const i=Smart.Tree.hoveredItem;i&&(i.classList.remove("drop-target"),i.classList.remove("top"),i.classList.remove("bottom"),delete Smart.Tree.hoveredItem);const a=document.elementFromPoint(t.clientX,t.clientY);Smart.Tree.hoveredTree&&(clearInterval(Smart.Tree.hoveredTree._dragInterval),delete Smart.Tree.hoveredTree),a&&(o=a.closest("smart-tree"),o&&o.allowDrop&&(Smart.Tree.hoveredTree=o,l=a.closest("smart-tree-item")||a.closest("smart-tree-items-group"),l?r=l:l=a))}if(o=Smart.Tree.hoveredTree,!o)return;const s=o.filterable?o.$.filterInput.offsetHeight+10:0;if(clearInterval(o._dragInterval),o._dragInterval=setInterval(function(){const i=o.getBoundingClientRect();0<o.$.scrollViewer.scrollHeight&&i.left<=t.clientX&&i.left+i.width>=t.clientX?t.clientY>=i.top+s&&t.clientY<=i.top+20+s?(o.$.scrollViewer.scrollTop-=a._autoScrollCoefficient,"scrollButtons"===o.scrollMode&&o._updateScrollButtonVisibility()):t.clientY>=i.top+i.height-20&&t.clientY<=i.top+i.height?(o.$.scrollViewer.scrollTop+=a._autoScrollCoefficient,"scrollButtons"===o.scrollMode&&o._updateScrollButtonVisibility()):clearInterval(o._dragInterval):clearInterval(o._dragInterval)},1),a._isMobile||(l=t.originalEvent.target,l.closest&&(r=l.closest("smart-tree-item")||l.closest("smart-tree-items-group"))),r){if(Smart.Tree.hoveredItem&&r!==Smart.Tree.hoveredItem&&(Smart.Tree.hoveredItem.classList.remove("drop-target"),Smart.Tree.hoveredItem.classList.remove("top"),Smart.Tree.hoveredItem.classList.remove("bottom")),Smart.Tree.hoveredItem=r,n.item.contains(r))return;const i=r.getBoundingClientRect();r instanceof Smart.TreeItem?t.clientY-i.top<=i.height/2?(r.classList.remove("bottom"),r.classList.add("top")):(r.classList.remove("top"),r.classList.add("bottom")):10>=t.clientY-i.top?(r.classList.remove("bottom"),r.classList.add("top")):!r.expanded&&10>=i.bottom-t.clientY?(r.classList.remove("top"),r.classList.add("bottom")):(r.classList.remove("top"),r.classList.remove("bottom")),r.classList.add("drop-target")}else if(Smart.Tree.hoveredItem&&(Smart.Tree.hoveredItem.classList.remove("drop-target"),Smart.Tree.hoveredItem.classList.remove("top"),Smart.Tree.hoveredItem.classList.remove("bottom")),l!==o.$.scrollViewer.$.scrollViewerContainer)delete Smart.Tree.hoveredItem;else if(o._menuItems[0]){let t=o.$.mainContainer.lastElementChild,a=o.$.mainContainer.childElementCount-1;for(;t.hidden&&(a--,t=o.$.mainContainer.children[a],!!t););t?(Smart.Tree.hoveredItem=t,Smart.Tree.hoveredItem.classList.add("bottom")):Smart.Tree.hoveredItem=o.$.container,Smart.Tree.hoveredItem.classList.add("drop-target")}else Smart.Tree.hoveredItem=o.$.container,Smart.Tree.hoveredItem.classList.add("drop-target")}_moveSubItems(t,a,n){const o=this;for(let l=0;l<t.length;l++){const i=t[l];i.menu=a,i.set("level",i.parentItem.level+1),i.firstElementChild.style.paddingLeft="",i.firstElementChild.style.paddingRight="",o._setIndentation(i.firstElementChild,i.level,n),i.hidden=!1,i.$.removeClass("smart-hidden"),i.$.removeClass("filtered-child"),i.$.removeClass("last-filtered-child"),i instanceof Smart.TreeItemsGroup&&(i.$.removeClass("hidden-children"),i.container.level=i.level+1,o._moveSubItems(i.itemContainer.children,a,n),a!==o&&i.expanded&&(a._menuItemsGroupsToExpand.push(i),o._updateState("expanded",i.id,!1)))}}_moveTreeItem(t,i,a,n){const o=this,l=t.level;if(0===a){if(i.previousElementSibling===t)return;i.parentElement.insertBefore(t,i),t.set("level",i.level)}else if(2===a){if(i.nextElementSibling===t)return;i.parentElement.insertBefore(t,i.nextElementSibling||null),t.set("level",i.level)}else if(i===n[0].$.container)n[0].$.mainContainer.appendChild(t),t.set("level",1);else{if(i.itemContainer.lastElementChild===t)return;i.itemContainer.appendChild(t),t.set("level",i.level+1)}const r=n[0].rightToLeft?"paddingRight":"paddingLeft";if(t.menu=n[0],t.parentItem=t.parentElement.menuItemsGroup,t.firstElementChild.style.paddingLeft="",t.firstElementChild.style.paddingRight="",o._setIndentation(t.firstElementChild,t.level,r),t.hidden=!1,t.$.removeClass("smart-hidden"),t.$.removeClass("filtered-child"),t.$.removeClass("last-filtered-child"),t instanceof Smart.TreeItemsGroup&&(t.$.removeClass("hidden-children"),t.container.level=t.level+1,o._moveSubItems(t.itemContainer.children,n[0],r),t.expanded)){const i=o._openedContainers[l+1].indexOf(t.container);-1!==i&&o._openedContainers[l+1].splice(i,1),n[0]._menuItemsGroupsToExpand.push(t),2===n.length&&o._updateState("expanded",t.id,!1)}for(let o=0;o<n.length;o++){const t=n[o],i=t.context,a=t.selectedIndexes.slice(0);t.context=t,t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0,void 0,t.sorted&&!t.autoSort),t.selectedIndexes=[],t._applySelection(!0,a,!1),t._checkOverflow(),t.context=i}n[0]._expandItemsByDefault()}_overriddenMenuHandler(){}_pageDownHandler(t,i,a,n){function o(){for(let a=t.length-1;0<=a;a--){const i=t[a];if(l._canItemBeHovered(i)&&l._getOffsetTop(i)+i.firstElementChild.offsetHeight<=r.scrollTop+r.$.container.offsetHeight)return i}}const l=this,r=l.$.scrollViewer;if(!i)return;let s=o();s&&(i===s?r.scrollTop+r.$.container.offsetHeight!==r.$.scrollViewerContentContainer.offsetHeight&&(l.$.scrollViewer.scrollTop+=r.$.container.offsetHeight,"scrollButtons"===l.scrollMode&&l._updateScrollButtonVisibility(),s=o(),i.removeAttribute("focus"),l._hoverViaKeyboard(s,a,n)):(i.removeAttribute("focus"),l._hoverViaKeyboard(s,a,n)))}_pageUpHandler(t,i,a,n){function o(){for(let a=0;a<t.length;a++){const i=t[a];if(l._canItemBeHovered(i)&&l._getOffsetTop(i)>=r.scrollTop)return i}}const l=this,r=l.$.scrollViewer;if(!i)return;let s=o();s&&(i===s?0===r.scrollTop?l.filterable&&l.$.filterInput.focus():(l.$.scrollViewer.scrollTop-=r.$.container.offsetHeight,"scrollButtons"===l.scrollMode&&l._updateScrollButtonVisibility(),s=o(),i.removeAttribute("focus"),l._hoverViaKeyboard(s,a,n)):(i.removeAttribute("focus"),l._hoverViaKeyboard(s,a,n)))}_refreshItemPathsAndSelection(){const t=this,i=t.selectedIndexes.slice(0);t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0),t.selectedIndexes=[],t._applySelection(!0,i)}_refreshSorting(){const t=this;t._unsortItems(t.$.mainContainer),t._applyGrouping(t.$.mainContainer);const i=t._state.filter;i&&t._applyFilter(i),t._checkOverflow()}_scroll(t){const i=this;i.$.scrollViewer.scrollTop+=10*t,i._updateScrollButtonVisibility(),i.focus()}_scrollButtonFarClickHandler(){const t=this;t.$.scrollButtonFar.disabled||t._scroll(1)}_scrollButtonNearClickHandler(){const t=this;t.$.scrollButtonNear.disabled||t._scroll(-1)}_scrollViewerDownHandler(t){function i(){const i=n.closest("smart-tree-item")||n.closest("smart-tree-items-group");if(!(i&&a._canItemBeSelected(i)))return;const o=n.closest(".smart-tree-items-group-arrow");let l;if(i instanceof Smart.TreeItem)l="_handleSelection";else{if(n===i.container||n===i.container.firstElementChild)return;l="_menuItemsGroupSelectionHandler"}if(clearTimeout(a._dblclickTimeout),i!==a._dblclickObject.target&&(a._dblclickObject.numberOfClicks=0),a._dblclickObject.target=i,a._dblclickObject.numberOfClicks++,a._dblclickTimeout=setTimeout(function(){a._dblclickObject.numberOfClicks=0},300),2===a._dblclickObject.numberOfClicks)if(!a.editable)a._dblclickHandler(i,o,t),a._dblclickObject.numberOfClicks=0;else return void a._startEditing(i);i.selected&&(a._downItem=i),a[l](i,t),a._discardKeyboardHover(!0),a._hoverViaKeyboard(i,!1,void 0,!1),o||a._startDragging(i,t)}const a=this;if(t.target!==a.$.scrollViewer||a.disabled||a.displayLoadingIndicator||!a._isMobile&&1!==t.which)return;const n=t.originalEvent.target;if(n===a.$.editInput)return void(a._editInputDown=!0);if(a._isMobile){const t=a.$.scrollViewer.scrollTop;setTimeout(function(){a.$.scrollViewer.scrollTop!==t||i()},250)}else i()}_scrollViewerWheelHandler(){const t=this;"scrollButtons"===t.scrollMode&&"hidden"!==t.overflow&&t._updateScrollButtonVisibility()}_selectItemRange(t,i){const a=this,n=Array.from(a.$.mainContainer.querySelectorAll("smart-tree-item, smart-tree-items-group")),o=n.indexOf(t),l=n.indexOf(i),r=[];for(let s=Math.min(o,l);s<=Math.max(o,l);s++){const t=n[s];a._canItemBeHovered(t)&&(r.push(t.path),t.set("selected",!0))}return r}_setFocusable(){super._setFocusable();const t=this;return t.disabled||t.unfocusable?void(t.$.filterInput.tabIndex=-1):void t.$.filterInput.removeAttribute("tabindex")}_setIndentation(t,i,a){t.style[a]=20*i-10+"px"}_setThreeStateCheckbox(t,i,a){i===t.itemContainer.childElementCount?(t.removeAttribute("indeterminate"),t.set("selected",!0)):0===i&&0===a?(t.removeAttribute("indeterminate"),t.set("selected",!1)):(t.setAttribute("indeterminate",""),t.set("selected",!1))}_sortItems(t){const i=this;if(!i.sorted)return;let a;t instanceof Smart.TreeItemsGroup?a=t.container.firstElementChild:t===i.$.mainContainer&&(a=t);let n=Array.from(a.children);if(i.sort){const a=i.sort(n,t);Array.isArray(a)&&(n=a)}else"asc"===i.sortDirection?n.sort(function(t,i){return t.label.localeCompare(i.label)}):n.sort(function(t,i){return i.label.localeCompare(t.label)});for(let o=n.length-1;0<=o;o--)a.insertBefore(n[o],a.firstElementChild)}_sortPathCollection(t){t.sort(function(t,i){const a=t.split("."),n=i.split("."),o=Math.max(a.length,n.length);for(let l=0;l<o;l++){const t=parseFloat(a[l]),i=parseFloat(n[l]);if(isNaN(t))return-1;if(isNaN(i))return 1;if(t<i)return-1;if(t>i)return 1}})}_startDragging(t,i){const a=this,n=a.selectionMode;if(!a.allowDrag||a._editedItem||"none"===n)return;const o=[],l=[];let r;if(-1!==["one","zeroOrOne","checkBox","radioButton"].indexOf(n))r=!1,o.push(t),l.push(t);else{r=!0;for(let t=0;t<a.selectedIndexes.length;t++)o.push(a._menuItems[a.selectedIndexes[t]]),l.push(o[t]);for(let t=0;t<o.length;t++){const i=o[t];if(-1!==l.indexOf(i))for(let t=l.length-1;0<=t;t--){const a=l[t];if(a===i)break;i.contains(a)&&l.splice(t,1)}}}a._dragDetails={coords:{x:i.pageX,y:i.pageY},items:o,validItems:l,item:t,feedbackShown:!1,validateOnDrop:r,originalEvent:i},Smart.Tree.treeItemDragged=!0,a.$.scrollViewer._scrollView.disableSwipeScroll=!0,a.allowDrop&&(Smart.Tree.hoveredTree=a,Smart.Tree.hoveredItem=t)}_startEditing(t){const i=this,a=i.$.editInput;let n,o;if(!i._canItemBeSelected(t))return;const l=t.firstElementChild,r=l.firstElementChild;i.rightToLeft?(n=function(){return l.offsetWidth-r.offsetLeft-r.offsetWidth},o="paddingRight"):(n=function(){return r.offsetLeft+parseFloat(window.getComputedStyle(l).borderLeftWidth)},o="paddingLeft"),t instanceof Smart.TreeItemsGroup?(a.style[o]=n()+(i.showLines?parseFloat(window.getComputedStyle(r.firstElementChild).paddingLeft):0)-1+"px",a.style.height=l.offsetHeight+"px"):(a.style[o]=t.offsetWidth+parseInt(l.style[o],10)-l.offsetWidth+parseFloat(window.getComputedStyle(r.firstElementChild).paddingLeft)-2+"px",a.style.height=t.offsetHeight+"px"),a.style.top=i._getOffsetTop(t)+"px",i.$editInput.removeClass("smart-hidden"),a.value=t.label,i._editedItem=t,setTimeout(function(){a.focus()},0)}_styleChangedHandler(t){t.detail.styleProperties&&t.detail.styleProperties["font-size"]&&this._checkOverflow()}_updateScrollButtonVisibility(){var t=Math.round;const i=this,a=i.overflow;if("hidden"===a)return;let n=!0,o=!0;if(0===t(i.$.scrollViewer.scrollTop)&&(n=!1),t(i.$.scrollViewer.$.scrollViewerContainer.offsetHeight+i.$.scrollViewer.scrollTop)>=t(i.$.scrollViewer.$.scrollViewerContentContainer.offsetHeight)&&(o=!1),"auto"===a){if(n&&o)return i.$scrollButtonNear.removeClass("smart-hidden"),i.$scrollButtonFar.removeClass("smart-hidden"),i.$scrollViewer.removeClass("one-button-shown"),void i.$.scrollViewer.refresh();n?i.$scrollButtonNear.removeClass("smart-hidden"):i.$scrollButtonNear.addClass("smart-hidden"),o?i.$scrollButtonFar.removeClass("smart-hidden"):i.$scrollButtonFar.addClass("smart-hidden"),i.$scrollViewer.addClass("one-button-shown"),i.$.scrollViewer.refresh()}else"scroll"!==a||i.disabled||(i.$.scrollButtonNear.disabled=!n,i.$.scrollButtonFar.disabled=!o)}_updateState(t,i,a){const n=this;switch(t){case"expanded":{const t=n._state.expanded.indexOf(i);if(a&&-1===t)n._state.expanded.push(i);else if(!a&&-1!==t)n._state.expanded.splice(t,1);else return;break}case"filter":n._state.filter=i===void 0?n.$.filterInput.value:i;break;case"selected":n._state.selected=[];for(let t=0;t<n.selectedIndexes.length;t++){const i=n._menuItems[n.selectedIndexes[t]];n._state.selected.push(i.id)}break;case"sorted":n._state.sorted=i;}n.autoSaveState&&window.localStorage.setItem("smartTree"+n.id,JSON.stringify(n._state))}}),Smart("smart-window",class extends Smart.ContentElement{static get properties(){return{collapsed:{value:!1,type:"boolean"},closeOnMaskClick:{value:!1,type:"boolean"},disableSnap:{value:!1,type:"boolean"},footerTemplate:{value:null,type:"any"},headerButtons:{value:["close","maximize","minimize"],type:"array"},headerPosition:{value:"top",allowedValues:["top","bottom","left","right","none"],type:"string"},headerTemplate:{value:null,type:"any"},label:{value:"",type:"string"},liveResize:{value:!1,type:"boolean"},maximized:{value:!1,type:"boolean"},modal:{value:!1,type:"boolean"},minimized:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},pinned:{value:!1,type:"boolean"},resizeIndicator:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","horizontal","vertical","both","top","bottom","left","right"],value:"none",type:"string"},windowParent:{value:null,type:"any"}}}static get listeners(){return{"document.dragstart":"_dragStartHandler","document.focusin":"_documentFocusInEventHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.wheel":"_mouseWheelHandler","document.selectstart":"_documentSelectStartHandler",down:"_downHandler",focus:"_focusHandler",blur:"_focusHandler",move:"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",stylechanged:"_styleChangedHandler"}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="pinButton" class="smart-pin-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="collapseButton" class="smart-collapse-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content" inner-h-t-m-l="[[innerHTML]]"><content></content></div>
                    <div id="footer" class="smart-footer"></div>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"collapsed":a?n.collapse(!0):n.expand(!0);break;case"disabled":case"unfocusable":n._setFocusable();break;case"headerTemplate":case"footerTemplate":n._applyLayoutTemplate(n.$[t.split(/[T]/)[0]],a);break;case"headerButtons":n._setHeaderButtons();break;case"headerPosition":n.style.width="",n.style.height="";break;case"label":n.$.header.innerHTML=n.label;break;case"maximized":a?n.maximize(!0):n.restore(t);break;case"modal":n._setModal();break;case"minimized":a?n.minimize(!0):n.restore(t);break;case"opened":a?n.open(!0):n.close(!0);break;case"resizeMode":n.$.container.className="smart-container";break;case"windowParent":n._setElementParent(a);break;default:super.propertyChangedHandler(t,i,a);}}get hasStyleObserver(){return!1}ready(){super.ready();const t=this,i=t.animation;t.opened||(t.animation="none"),t.$.addClass("smart-window"),t._createElement(),t._windowParent={initialParent:t.parentElement},t._setElementParent(t.windowParent),t._setHeaderButtons(),t.headerTemplate&&t._applyLayoutTemplate(t.$.header,t.headerTemplate),t.footerTemplate&&t._applyLayoutTemplate(t.$.footer,t.footerTemplate),t.opened?t.open():t.close(),t.maximized&&t.maximize(!0),t.minimized&&t.minimize(!0),t.collapsed&&t.collapse(!0),t.pinned?t.pin():t.unpin(),t._setFocusable(),t.animation=i}_styleChangedHandler(){const t=this;!t.maximized}static get requires(){return{"Smart.Button":"smart.button.js"}}_setFocusable(){const t=this;if(!t.disabled&&!t.unfocusable){let i=0<t.tabIndex?t.tabIndex:0;t.setAttribute("tabindex",i)}else t.removeAttribute("tabindex")}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void i.$.content.appendChild(t):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}collapse(t){const i=this;!t&&i.collapsed||(i.collapsed=!0,i.$.fireEvent("collapse"),"left"===i.headerPosition||"right"===i.headerPosition?i.style.width="":i.style.height="")}close(t){const i=this;if(t||!i.$.hasClass("smart-visibility-hidden")){if(i.isCompleted){const t=i.$.fireEvent("closing").defaultPrevented;if(t)return;i.$.addClass("smart-visibility-hidden"),i.opened=!1,i.$.fireEvent("close")}else i.$.addClass("smart-visibility-hidden"),i.opened=!1;i._setModal(),i.removeAttribute("ontop")}}attached(){super.attached();const t=this;t._windowParent.parent!==document.body&&t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(t._windowParent.parent.style.position="relative"),t.opened&&t._modal&&t.parentElement.insertBefore(t._modal,t)}bringToFront(){const t=this;if(t.parentElement){const i=t.parentElement.closest(".smart-window");if(i)return void i.bringToFront();const a=document.body.getElementsByClassName("smart-window");for(let t=0;t<a.length;t++)a[t].removeAttribute("ontop");t.setAttribute("ontop","")}}clear(){const t=this;t.isCompleted&&"Smart-WINDOW"===t.nodeName&&(t.$.content.innerHTML="")}detached(){super.detached();const t=this;t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")||(t._windowParent.parent.style.position=""),t._modal&&t._modal.parentElement&&t._modal.parentElement.removeChild(t._modal),t._resizeDummy&&t._resizeDummy.parentElement&&t._handleWindowResizeDummy()}expand(t){var i=Math.max;const a=this;(t||a.collapsed)&&(a.collapsed=!1,a.$.fireEvent("expand"),a.maximized?"left"===a.headerPosition||"right"===a.headerPosition?a.style.width=i(a._windowParent.scrollElement.scrollWidth,a._windowParent.element.clientWidth)-a._windowParent.borderWidth+"px":a.style.height=i(a._windowParent.scrollElement.scrollHeight,a._windowParent.element.clientHeight)-a._windowParent.borderWidth+"px":"left"===a.headerPosition||"right"===a.headerPosition?a.style.width=0>a.className.indexOf("smart-window-snapped-")&&a._dragDetails?a._dragDetails.width+"px":"":a.style.height=0>a.className.indexOf("smart-window-snapped-")&&a._dragDetails?a._dragDetails.height+"px":"")}maximize(t){function i(){if(n.maximized&&n.hasAnimation){const t=n._windowParent.scrollElement.scrollHeight,o=n._windowParent.element.clientHeight,l=a(t,o);"top"===n.headerPosition||"bottom"===n.headerPosition?!n.collapsed&&(n.style.height=t>o?l-n._windowParent.borderWidth+"px":"100%"):n.style.height=t>o?l-n._windowParent.borderWidth+"px":"100%",n.removeEventListener("transitionend",i)}}var a=Math.max;const n=this;if(t||!n.maximized){n.minimized&&n._restoreFromMinimization(t),n._setDragDetails(),"none"!==n.resizeMode&&(n.$.container.className="smart-container"),n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&n.classList.remove("smart-window-snapped-"+n._snapDummy._position),n.maximized=!0,n.$.fireEvent("maximize"),n.style.left=n.style.top="0px",n.style.maxWidth=n.style.maxHeight="none";const o=n._windowParent.scrollElement.scrollHeight,l=n._windowParent.scrollElement.scrollWidth,r=n._windowParent.element.clientHeight,s=n._windowParent.element.clientWidth,d=a(o,r),m=a(l,s);"top"===n.headerPosition||"bottom"===n.headerPosition?(n.style.width=l>s?m-n._windowParent.borderWidth+"px":"100%",!n.collapsed&&(n.style.height=o>r?d-n._windowParent.borderWidth+"px":"100%")):(!n.collapsed&&(n.style.width=l>s?m-n._windowParent.borderWidth+"px":"100%"),n.style.height=o>r?d-n._windowParent.borderWidth+"px":"100%"),"100%"!==n.style.height&&n.addEventListener("transitionend",i)}}minimize(t){const i=this;if(t||!i.minimized){i.maximized&&i.restore(),i._setDragDetails(),i.minimized=!0,i.$.fireEvent("minimize"),i._snapDummy&&i.$.hasClass("smart-window-snapped-"+i._snapDummy._position)&&(i.$.removeClass("smart-window-snapped-"+i._snapDummy._position),i.style.right=i.style.top=i.style.left="");const t=i._getAllMinimizedWindows(i._windowParent.element);if(0<t.length){const a=t[t.length-1];i.style.left=(a.offsetLeft+a.offsetWidth+i._dragDetails.minWidth+10>i._windowParent.element.clientWidth?a.offsetLeft:a.offsetLeft+a.offsetWidth+5)+"px",i.style.top=a.offsetTop+"px"}else i.style.left="5px",i.style.top=i._windowParent.element.clientHeight+i._windowParent.scrollElement.scrollTop-i.$.headerSection.offsetHeight-5+"px";i.style.width="",i.style.height=i.$.headerSection.offsetHeight+"px"}}_createElement(){}removeChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void i.$.content.removeChild(t):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}restore(t){var i=Math.min,a=Math.max;const n=this;if("maximized"===t||n.maximized?(n.maximized=!1,n.style.width=n.style.height=n.style.top=n.style.left=""):("minimized"===t||n.minimized)&&n._restoreFromMinimization(t),n.$.fireEvent("restore"),n.style.maxWidth=n.style.maxHeight="",n._dragDetails){if(n.style.left=a(0,i(n._dragDetails.windowX,n._windowParent.element.clientWidth-n._dragDetails.width))+"px",n.style.top=a(0,i(n._dragDetails.windowY,n._windowParent.scrollElement.scrollHeight-n._dragDetails.height))+"px",n.collapsed)return void("top"===n.headerPosition||"bottom"===n.headerPosition?n.style.width=n._dragDetails.width+"px":n.style.height=n._dragDetails.height+"px");n._dragDetails.resized&&(n.style.width=n._dragDetails.width+"px",n.style.height=n._dragDetails.height+"px")}}open(t){function i(){a.focus(),a.removeEventListener("transitionend",i)}const a=this;if(t||a.$.hasClass("smart-visibility-hidden")){if(a.isCompleted){const t=a.$.fireEvent("opening").defaultPrevented;if(t)return;a.$.removeClass("smart-visibility-hidden"),a.opened=!0,a.$.fireEvent("open")}else a.$.removeClass("smart-visibility-hidden"),a.opened=!0;a.bringToFront(),a._setModal(),a._handleActiveState(),a.hasAnimation?a.addEventListener("transitionend",i):i()}}pin(){this.pinned=!0}unpin(){this.pinned=!1}_applyLayoutTemplate(t,i){const a=this;return i?"content"in document.createElement("template")?(i instanceof HTMLTemplateElement||(i=document.getElementById(i)),null!==i&&"content"in i?void(t.innerHTML="",t.appendChild(document.importNode(i.content,!0))):void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:t===a.$.footer?"footerTemplate":"headerTemplate"}))):void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})):(t.innerHTML="",void(t===a.$.header&&a.label&&(t.innerHTML=a.label)))}_cancelDragging(t){const i=this;if(i._dragDetails&&i._dragDetails.started&&"drag"===i._dragDetails.type){if(!t){const a=i.getBoundingClientRect();t={pageX:a.left,pageY:a.top}}i.$.fireEvent("dragEnd",{x:t.pageX,y:t.pageY}),i.removeAttribute("dragged"),i._dragDetails.started=!1,delete i._mouseManipulation}}_documentFocusInEventHandler(t){const i=this;i._changingFocus&&(!i.contains(t.target)&&i.focus(),delete i._changingFocus)}_downHandler(t){const i=this;let a=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset):t.originalEvent.target;if((t.stopPropagation(),!i.disabled&&(Smart.Utilities.Core.isMobile||1===t.which))&&(i._tabsWindow&&(i._tabsWindow._isAutoHideWindowClicked=!0),i.hasAttribute("ontop")||i.bringToFront(),!(a.closest&&a.closest(".smart-buttons-container")===i.$.buttonsContainer&&(i._buttonPressed=a.closest("smart-button"),i._buttonPressed)))){i._isWindowContentClicked=t.originalEvent.target.closest(".smart-content")&&t.originalEvent.target.closest(".smart-window");const n=i.closest("smart-docking-layout");if(!(i instanceof Smart.TabsWindow&&n&&n.disabled))return i._handleActiveState(),i instanceof Smart.TabsWindow&&n?void(i.$.hasClass("smart-docking-layout-auto-hide-window")&&(Smart.Utilities.Core.isMobile&&i._moveHandler(t),"none"!==i.resizeMode&&-1<i.$.container.className.indexOf("smart-window-resizing")&&(i._mouseManipulation=!0,i._setDragDetails("resize",t)))):t.originalEvent.target.closest(".smart-header-section")===i.$.headerSection&&(void 0===i._dblClickDetails&&(i._dblClickDetails={clicks:0}),clearTimeout(i._dblClickDetails.timeOut),i._dblClickDetails.clicks++,i._dblClickDetails.timeOut=setTimeout(function(){i._dblClickDetails&&(i._dblClickDetails.clicks=0)},300),2===i._dblClickDetails.clicks)?(i._headerDblCickHandler(t),void(i._dblClickDetails.clicks=0)):void(i.maximized||(Smart.Utilities.Core.isMobile&&i._moveHandler(t),!i.pinned&&!i.minimized&&0>i.$.container.className.indexOf("smart-window-resizing")&&(a=a.closest(".smart-header-section"),a&&a===i.$.headerSection&&(i._mouseManipulation=!0,i._setDragDetails("drag",t))),"none"!==i.resizeMode&&-1<i.$.container.className.indexOf("smart-window-resizing")&&(i._mouseManipulation=!0,i._setDragDetails("resize",t))))}}_documentMoveHandler(t){var i=Math.min,a=Math.abs,n=Math.max;const o=this;!o._dragDetails||!o._dragDetails.started||o.minimized||!o._mouseManipulation||5>=a(t.pageX-o._dragDetails.x)&&5>=a(t.pageY-o._dragDetails.y)||(!o.hasAttribute("dragged")&&!o.hasAttribute("resized")&&o.$.fireEvent(o._dragDetails.type+"Start",{left:t.pageX,top:t.pageY,width:o.offsetWidth,height:o.offsetHeight}),t.stopPropagation(),"drag"!==o._dragDetails.type||o.pinned?(o._dragDetails.resized=!0,o._resize(o._dragDetails.side,t),o._dragDetails.x=n(o._windowParent.offsetLeft+o._dragDetails.left,i(o._windowParent.offsetLeft+o._dragDetails.left+(-1<o._dragDetails.side.toLowerCase().indexOf("left")?0:o._dragDetails.newWidth),t.pageX)),o._dragDetails.y=n(o._windowParent.offsetTop+o._dragDetails.top,i(o._windowParent.offsetTop+o._dragDetails.top+(-1<o._dragDetails.side.toLowerCase().indexOf("top")?0:o._dragDetails.newHeight),t.pageY))):(o.setAttribute("dragged",""),o._snapDummy&&o.$.hasClass("smart-window-snapped-"+o._snapDummy._position)&&(o.$.removeClass("smart-window-snapped-"+o._snapDummy._position),o.style.right=o.style.top=o.style.left="",!o.collapsed&&(o.style.height=o._dragDetails.height+"px",o.style.width=o._dragDetails.width+"px")),o._drag(t,"both"),o._dragDetails.x=n(o._windowParent.offsetLeft+o._dragDetails.offsetX-o._windowParent.scrollElement.scrollLeft,i(o._windowParent.offsetLeft+o._windowParent.element.offsetWidth-(o._windowParent.element.offsetWidth-o.offsetLeft)+o._dragDetails.offsetX,t.pageX)),o._dragDetails.y=n(o._windowParent.offsetTop+o._dragDetails.offsetY-o._windowParent.scrollElement.scrollTop,i(o._windowParent.offsetTop+o._windowParent.element.offsetHeight-(o._windowParent.element.offsetHeight-o.offsetTop)+o._dragDetails.offsetY,t.pageY)),t.pageX>=o._windowParent.offsetLeft+o._windowParent.scrollElement.scrollWidth-1?o._handleSnapping("right"):t.pageY<=o._windowParent.offsetTop?o._handleSnapping("top"):t.pageX<=o._windowParent.offsetLeft?o._handleSnapping("left"):o._handleSnapping()))}_documentUpHandler(t){const i=this,a=t.originalEvent.target;if(i.disabled)return i.removeAttribute("active"),delete i._buttonPressed,void delete i._isWindowContentClicked;if(i._dragDetails&&i._dragDetails.started&&(i.hasAttribute("resized")&&(i.$.fireEvent(i._dragDetails.type+"End",{x:t.pageX,y:t.pageY,width:i._dragDetails.newWidth,height:i._dragDetails.newHeight}),i.removeAttribute("resized"),i._handleWindowResizeDummy(),i.$.container.className="smart-container"),setTimeout(function(){i.$.removeClass("no-transition")},20),i.hasAttribute("dragged")&&(i.$.fireEvent(i._dragDetails.type+"End",{x:t.pageX,y:t.pageY}),i.removeAttribute("dragged")),i._dragDetails.started=!1,delete i._mouseManipulation),i._snapDummy&&!i._snapDummy.classList.contains("smart-visibility-hidden")){switch(i._snapDummy._position){case"left":case"top":i.style.left=i.style.top="0",i.style.right="auto";break;case"right":i.style.left="auto",i.style.top=i.style.right="0";}i.style.width="top"===i._snapDummy._position?"100%":"50%",i.style.height="100%",i.$.addClass("smart-window-snapped-"+i._snapDummy._position),i._handleSnapping()}if(i._modal&&t.originalEvent.target===i._modal&&!i._isWindowContentClicked&&(i.closeOnMaskClick?i.close():i.focus()),i._isWindowButton(t.originalEvent.target)&&i.focus(),delete i._isWindowContentClicked,delete i._buttonPressed,!i.hasAttribute("active")||document.activeElement===i)return;if(!a.closest)return;let n=a.closest(".smart-window");for(;n&&n!==i;)n=n.parentElement.closest(".smart-window");n!==i&&i.removeAttribute("active")}_documentSelectStartHandler(t){const i=this;i._dragDetails&&i._dragDetails.started&&t.preventDefault()}_drag(t,i){var a=Math.min,n=Math.max;const o=this;if(!t||o.pinned||o.maximized)return;let l,r;o._dragDetails&&o._dragDetails.started||o._setDragDetails("drag",t),o.$.addClass("no-transition"),"object"==typeof t?(l=t.pageX-o._dragDetails.x,r=t.pageY-o._dragDetails.y):l=r=t;const s=n(o._windowParent.element.clientHeight,o._windowParent.scrollElement.scrollHeight),d=n(o._windowParent.element.clientWidth,o._windowParent.scrollElement.scrollWidth);"horizontal"===i?(o._dragDetails.windowX=n(0,a(o._dragDetails.windowX+l,d-o.offsetWidth)),o.style.left=o._dragDetails.windowX+"px"):"vertical"===i?(o._dragDetails.windowY=n(0,a(o._dragDetails.windowY+r,s-o.offsetHeight)),o.style.top=o._dragDetails.windowY+"px"):"both"===i?(o._dragDetails.windowX=n(0,a(o._dragDetails.windowX+l,d-o.offsetWidth)),o._dragDetails.windowY=n(0,a(o._dragDetails.windowY+r,s-o.offsetHeight)),o.style.left=o._dragDetails.windowX+"px",o.style.top=o._dragDetails.windowY+"px"):void 0;o._dragDetails.top=o.offsetTop,o._dragDetails.left=o.offsetLeft}_dragStartHandler(t){const i=this;i._dragDetails&&i._dragDetails.started&&t.preventDefault()}_focusHandler(t){const i=this;"focus"===t.type?(i.setAttribute("focus",""),i.bringToFront()):!i._buttonPressed&&(i.removeAttribute("focus"),i._dragDetails&&i._dragDetails.started&&i._handleWindowResizeDummy())}_getAllMinimizedWindows(t){const a=this;let n=[];t||(t=a._windowParent.element);const o=t.getElementsByTagName("smart-window");for(let l=0;l<o.length;l++)o[l]!==a&&o[l].hasAttribute("minimized")&&n.push(o[l]);return n.sort(function(t,i){return t.offsetLeft+t.offsetWidth>i.offsetLeft+i.offsetWidth}),n}_handleSnapping(t){const i=this;return t?void(i.disableSnap||i.collapsed||(!i._snapDummy&&(i._snapDummy=document.createElement("div"),i._snapDummy.addEventListener("transitionend",function(){i._snapDummy.classList.contains("smart-visibility-hidden")&&i._snapDummy.parentElement&&i._snapDummy.parentElement.removeChild(i._snapDummy)})),i._snapDummy.className="smart-window-snap-"+t+"-feedback",i._snapDummy._position=t,!i._snapDummy.parentElement&&i._windowParent.element.appendChild(i._snapDummy))):void(i._snapDummy&&i._snapDummy.parentElement&&i._snapDummy.classList.add("smart-visibility-hidden"))}_headerDblCickHandler(t){const i=this,a=t.originalEvent.target;a!==i.$.headerSection&&a!==i.$.header||i.$.maximizeButton&&0===i.$.maximizeButton.offsetHeight||(i.maximized?i.restore():i.maximize())}_isWindowButton(t){const i=this;if(t.closest&&t.closest(".smart-buttons-container")===i.$.buttonsContainer){const a=/smart-(\w+[-]*\w*)-button/ig;if(t=t.closest("smart-button"),t&&t===i._buttonPressed)return t===i.$.closeButton?(i.close(),!0):t===i.$.collapseButton?(i.collapsed?i.expand():i.collapse(),!0):t===i.$.maximizeButton?(i.maximized?i.restore():i.maximize(),!0):t===i.$.minimizeButton?(i.minimized?i.restore():i.minimize(),!0):t===i.$.pinButton?(i.pinned?i.unpin():i.pin(),!0):a.test(t.className)?(i.$.fireEvent(Smart.Utilities.Core.toCamelCase(t.className.match(a).toString().replace("smart-","").replace("-button","")),{button:t}),!0):void 0}}_keyDownHandler(t){const i=this;if(delete i._changingFocus,!(i.disabled||(i.hasAttribute("dragged")||i.hasAttribute("resized"))&&i._mouseManipulation)){t.stopPropagation();const a="ArrowDown"===t.key||"ArrowRight"===t.key?10:-10;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(i.minimized||document.activeElement!==i)return;let n=-1<t.key.indexOf("Right")||-1<t.key.indexOf("Left");if(t.preventDefault(),!n&&t.altKey)return void("ArrowUp"===t.key?i.maximize():i.restore());if(i.maximized)return;if(i.$.addClass("no-transition"),t.ctrlKey&&"none"!==i.resizeMode&&!i.collapsed)return n=-1===["horizontal","vertical","both"].indexOf(i.resizeMode)?i.resizeMode:n?"right":"bottom",i.hasAttribute("dragged")&&i._cancelDragging(t),i.hasAttribute("resized")||i.$.fireEvent("resizeStart",{position:{x:t.pageX,y:t.pageY}}),void i._resize(n,a);i.pinned||(!i.hasAttribute("dragged")&&(i.setAttribute("dragged",""),i.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY}})),i._drag(a,n?"horizontal":"vertical")),i.$.removeClass("no-transition");break}case"Escape":-1<i.headerButtons.indexOf("close")&&document.activeElement===i&&i.close();break;case"p":t.altKey&&-1<i.headerButtons.indexOf("pin")&&(i.pinned?i.unpin():i.pin());break;case"c":t.altKey&&-1<i.headerButtons.indexOf("collapse")&&(i.collapsed?i.expand():i.collapse());break;case"m":t.altKey&&-1<i.headerButtons.indexOf("minimize")&&(i.minimized?i.restore():i.minimize());break;case"Tab":i.opened&&i.modal&&(i._changingFocus=!0);break;case"Enter":case" ":{const a=t.target.closest&&t.target.closest("smart-button");if(!a)return;i._isWindowButton(i._buttonPressed=a),delete i._buttonPressed;break}}}}_keyUpHandler(t){const i=this;if(t.key){if("Control"===t.key&&i._dragDetails&&i.hasAttribute("resized")&&!i._mouseManipulation){if(!i._dragDetails.started)return;"drag"!==i._dragDetails.type&&(i.removeAttribute("resized"),i.$.fireEvent("resizeEnd",{x:t.pageX,y:t.pageY,width:i._dragDetails.newWidth,height:i._dragDetails.newHeight}),i._handleWindowResizeDummy()),i._dragDetails.started=!1}-1<t.key.indexOf("Arrow")&&i.hasAttribute("dragged")&&!i._mouseManipulation&&i._cancelDragging(t)}}_mouseWheelHandler(t){const i=this;return i.disabled||!(i._dragDetails&&i._dragDetails.started)?void 0:0>t.deltaY&&0>=i._windowParent.scrollElement.scrollTop+t.deltaY?void(i.style.top=Math.max(0,i._dragDetails.windowY)+"px"):void(0<t.deltaY&&(i._dragDetails.windowY+i.offsetHeight+t.deltaY>=i._windowParent.scrollElement.scrollHeight||i._windowParent.scrollElement.scrollTop+i._windowParent.element.clientHeight===i._windowParent.scrollElement.scrollHeight)||("drag"===i._dragDetails.type?(i._dragDetails.windowY+=t.deltaY,i.style.top=i._dragDetails.windowY+"px"):(i._dragDetails.height+=t.deltaY,i.style.height=i._dragDetails.height+"px")))}_moveHandler(t){const i=this;if(!(i.disabled||i.collapsed||i.maximized||i.minimized)&&(Smart.Utilities.Core.isMobile&&(Smart.Utilities.Core.Browser.Safari||Smart.Utilities.Core.Browser.Chrome)&&i.hasAttribute("dragged")&&t.originalEvent.preventDefault(),!i._mouseManipulation)&&(-1<i.$.container.className.indexOf("smart-window-resizing")&&(i.$.container.className="smart-container"),"none"!==i.resizeMode)){const a=i.getBoundingClientRect(),n=!!(t.clientY<a.top+10),o=!!(t.clientY>a.bottom-10),l=!!(t.clientX>a.right-10),r=!!(t.clientX<a.left+10);switch(i.resizeMode){case"none":break;case"both":if(i.resizeIndicator)return void(o&&l&&i.$.container.classList.add("smart-window-resizing-bottom-right"));if(r||l)return n?void(r?i.$.container.classList.add("smart-window-resizing-top-left"):i.$.container.classList.add("smart-window-resizing-top-right")):o?void(r?i.$.container.classList.add("smart-window-resizing-bottom-left"):i.$.container.classList.add("smart-window-resizing-bottom-right")):void(r?i.$.container.classList.add("smart-window-resizing-left"):i.$.container.classList.add("smart-window-resizing-right"));if(n||o){if(l)return void(n?i.$.container.classList.add("smart-window-resizing-top-right"):i.$.container.classList.add("smart-window-resizing-bottom-right"));if(r)return void(n?i.$.container.classList.add("smart-window-resizing-top-left"):i.$.container.classList.add("smart-window-resizing-bottom-left"));n?i.$.container.classList.add("smart-window-resizing-top"):i.$.container.classList.add("smart-window-resizing-bottom")}break;case"horizontal":if(i.resizeIndicator)return void(o&&l&&i.$.container.classList.add("smart-window-resizing-right"));if(r)return void i.$.container.classList.add("smart-window-resizing-left");l&&i.$.container.classList.add("smart-window-resizing-right");break;case"vertical":if(i.resizeIndicator)return void(o&&l&&i.$.container.classList.add("smart-window-resizing-bottom"));if(n)return void i.$.container.classList.add("smart-window-resizing-top");o&&i.$.container.classList.add("smart-window-resizing-bottom");break;case"top":if(n){if(i.resizeIndicator&&!r)return;i.$.container.classList.add("smart-window-resizing-top")}break;case"bottom":if(o){if(i.resizeIndicator&&!l)return;i.$.container.classList.add("smart-window-resizing-bottom")}break;case"left":if(r){if(i.resizeIndicator&&!n)return;i.$.container.classList.add("smart-window-resizing-left")}break;case"right":if(l){if(i.resizeIndicator&&!o)return;i.$.container.classList.add("smart-window-resizing-right")}}}}_handleActiveState(){const t=this,i=document.getElementsByClassName("smart-window");for(let a=0;a<i.length;a++)i[a].contains(t)||t.contains(i[a])||i[a].removeAttribute("active");t.setAttribute("active","")}_handleWindowResizeDummy(){const t=this;return t._resizeDummy||(t._resizeDummy=document.createElement("div"),t._resizeDummy.classList.add("smart-window-resize-feedback")),t.hasAttribute("resized")?void(t._resizeDummy.parentElement||(t._resizeDummy.style.width=t.offsetWidth+"px",t._resizeDummy.style.height=t.offsetHeight+"px",t._resizeDummy.style.top=t.offsetTop+"px",t._resizeDummy.style.left=t.offsetLeft+"px",t._windowParent.element.appendChild(t._resizeDummy))):(t._resizeDummy.parentElement&&t._resizeDummy.parentElement.removeChild(t._resizeDummy),void(!t.liveResize&&"resize"===t._dragDetails.type&&t._dragDetails.started&&(t.style.top=t._dragDetails.top+"px",t.style.left=t._dragDetails.left+"px",t.style.width=t._dragDetails.newWidth+"px",t.style.height=t._dragDetails.newHeight+"px")))}_resize(t,i){var a=Math.min,n=Math.abs,o=Math.max;const l=this;let r;if((!l._dragDetails||l._dragDetails&&"drag"===l._dragDetails.type)&&l._setDragDetails("resize"),!!l._dragDetails){l._dragDetails.started=!0,l.hasAttribute("resized")||(l.setAttribute("resized",""),l.hasAnimation&&l.$.addClass("no-transition")),l.liveResize||l._handleWindowResizeDummy();const s=l._snapDummy&&l.$.hasClass("smart-window-snapped-"+l._snapDummy._position)?"snapWindowWidth":"width";switch(t){case"left":{r="object"==typeof i?i.pageX-l._dragDetails.x:i,r=0<r?a(r,l._dragDetails[s]-l._dragDetails.minWidth):-1*a(l._dragDetails.maxWidth?l._dragDetails.maxWidth-l._dragDetails[s]:l._dragDetails.left,n(r)),l._dragDetails[s]=a(l._dragDetails[s]+l._dragDetails.left-l._windowParent.scrollElement.scrollLeft,l._dragDetails[s]-r),l._dragDetails.windowX=o(l._windowParent.scrollElement.scrollLeft,l._dragDetails.windowX+r),"object"!=typeof i&&(l._dragDetails[s]=o(l._dragDetails[s],l._dragDetails.minWidth)),l._dragDetails[s]>=l._dragDetails.minWidth&&(l._dragDetails.left=l._dragDetails.windowX,l._dragDetails.newWidth=l._dragDetails[s]);break}case"right":{const t=l._windowParent.element.clientWidth===l._windowParent.element.offsetWidth?0:l._windowParent.borderWidth,n=l._snapDummy&&l.$.hasClass("smart-window-snapped-"+l._snapDummy._position)?"snapWindowWidth":"width";r="object"==typeof i?i.pageX-l._dragDetails.x:i,0<r&&l._dragDetails.maxWidth&&(r=a(l._dragDetails.maxWidth-l._dragDetails[n],r)),l._dragDetails[n]=a(l._windowParent.element.clientWidth+l._windowParent.scrollElement.scrollLeft-l._dragDetails.left-t,o(0,l._dragDetails[n]+r)),"object"!=typeof i&&(l._dragDetails[n]=o(l._dragDetails[n],l._dragDetails.minWidth)),l._dragDetails.left=l.offsetLeft,l._dragDetails.newWidth=o(l._dragDetails.minWidth,l._dragDetails[n]);break}case"top":l._snapDummy&&l.$.hasClass("smart-window-snapped-"+l._snapDummy._position)&&(l._dragDetails.height=l._dragDetails.snapWindowHeight),r="object"==typeof i?i.pageY-l._dragDetails.y:i,r=0<r?a(r,l._dragDetails.height-l._dragDetails.minHeight):-1*a(l._dragDetails.maxHeight?l._dragDetails.maxHeight-l._dragDetails.height:l._dragDetails.top,n(r)),l._dragDetails.snapWindowHeight=l._dragDetails.height=a(l._dragDetails.height+l._dragDetails.top-l._windowParent.scrollElement.scrollTop,l._dragDetails.height-r),l._dragDetails.windowY=o(l._windowParent.scrollElement.scrollTop,l._dragDetails.windowY+r),"object"!=typeof i&&(l._dragDetails.snapWindowHeight=l._dragDetails.height=o(l._dragDetails.height,l._dragDetails.minHeight)),l._dragDetails.height>=l._dragDetails.minHeight&&(l._dragDetails.top=l._dragDetails.windowY,l._dragDetails.newHeight=l._dragDetails.height),l._dragDetails.newWidth=o(l._dragDetails[s],l._dragDetails.newWidth);break;case"bottom":l._snapDummy&&l.$.hasClass("smart-window-snapped-"+l._snapDummy._position)&&(l._dragDetails.height=l._dragDetails.snapWindowHeight),r="object"==typeof i?i.pageY-l._dragDetails.y:i,0<r&&l._dragDetails.maxHeight&&(r=a(l._dragDetails.maxHeight-l._dragDetails.height,r)),l._dragDetails.snapWindowHeight=l._dragDetails.height=a(l._windowParent.element.clientHeight+l._windowParent.scrollElement.scrollTop-l._dragDetails.top-l._windowParent.borderWidth,o(0,l._dragDetails.height+r)),"object"!=typeof i&&(l._dragDetails.snapWindowHeight=l._dragDetails.height=o(l._dragDetails.height,l._dragDetails.minHeight)),l._dragDetails.newHeight=o(l._dragDetails.minHeight,l._dragDetails.height),l._dragDetails.newWidth=o(l._dragDetails[s],l._dragDetails.newWidth);break;case"bottomLeftCorner":l._resize("bottom",i),l._resize("left",i);break;case"bottomRightCorner":l._resize("bottom",i),l._resize("right",i);break;case"topLeftCorner":l._resize("top",i),l._resize("left",i);break;case"topRightCorner":l._resize("top",i),l._resize("right",i);}const d=l.liveResize?l:l._resizeDummy;l._dragDetails.newHeight=o(l._dragDetails.snapWindowHeight,l._dragDetails.newHeight),d.style.top=l._dragDetails.top+"px",d.style.left=l._dragDetails.left+"px",d.style.width=l._dragDetails.newWidth+"px",d.style.height=l._dragDetails.newHeight+"px"}}_restoreFromMinimization(){const t=this;t.minimized=!1,t.style.width=t.style.height=t.style.top=t.style.left="";const a=t._getAllMinimizedWindows();let n;if(0!==a.length){a[0].style.left="5px";for(let o=1;o<a.length;o++)parseFloat(a[o-1].style.left)+a[o-1].offsetWidth+a[o].offsetWidth+10<t._windowParent.element.clientWidth?(a[o].style.left=parseFloat(a[o-1].style.left)+a[o-1].offsetWidth+5+"px",a[o].style.top=a[o-1].offsetTop+"px",n=a[o]):(a[o].style.left=parseFloat(n.style.left)+"px",a[o].style.top=n.offsetTop+"px")}}_setHeaderButtons(){const t=this,a=t.headerButtons,i=t.$.buttonsContainer.children,n=function(i){const a=t.$.buttonsContainer.getElementsByClassName("smart-"+(i+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button")[0];return a&&a.$.removeClass("smart-hidden"),a};for(let t=0;t<i.length;t++)i[t].$.addClass("smart-hidden");if(0<a.length){let o;for(let l=0;l<a.length;l++)n(a[l])||(o=document.createElement("smart-button"),o.$.addClass("smart-"+(a[l]+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button"),o.theme=t.theme,t.$.buttonsContainer.insertBefore(o,t.$.buttonsContainer.firstElementChild))}}_setDragDetails(t,i){const a=this;if(a._dragDetails||(a._dragDetails={}),void 0===a._dragDetails.minWidth||void 0===a._dragDetails.minHeight||void 0===a._dragDetails.maxWidth||void 0===a._dragDetails.maxHeight){const t=getComputedStyle(a);a._dragDetails.minWidth=parseFloat(t.getPropertyValue("min-width"))||0,a._dragDetails.minHeight=parseFloat(t.getPropertyValue("min-height"))||0,a._dragDetails.maxWidth=parseFloat(t.getPropertyValue("max-width"))||0,a._dragDetails.maxHeight=parseFloat(t.getPropertyValue("max-height"))||0}a._dragDetails.windowX=a.offsetLeft,a._dragDetails.windowY=a.offsetTop;const n=a.getBoundingClientRect();if(!a._snapDummy||!a.$.hasClass("smart-window-snapped-"+a._snapDummy._position)){const t=a.parentElement===document.body?document.documentElement.getBoundingClientRect():a.parentElement.getBoundingClientRect(),o=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset;a._windowParent.offsetLeft=t.left+o,a._windowParent.offsetTop=t.top+l,i&&"object"==typeof i&&(a._dragDetails.offsetX=i.clientX-n.left,a._dragDetails.offsetY=i.clientY-n.top),a.collapsed||(a._dragDetails.width=a.offsetWidth,a._dragDetails.height=a.offsetHeight,(a.style.width||a.style.height)&&(a._dragDetails.resized=!0))}else"right"===a.headerPosition&&a.collapsed&&(a._dragDetails.offsetX=n.left+a.offsetWidth-i.clientX);if("minimize"!==t&&t&&(a._dragDetails.type=t,a._dragDetails.started=!0,a._dragDetails.snapWindowWidth=a.offsetWidth,a._dragDetails.snapWindowHeight=a.offsetHeight,i&&"object"==typeof i?(a._dragDetails.x=i.pageX,a._dragDetails.y=i.pageY):(a._dragDetails.x=a.offsetLeft,a._dragDetails.y=a.offsetTop),"resize"===t)){if("none"===a.resizeMode)return void delete a._dragDetails;a._dragDetails.top=a.offsetTop,a._dragDetails.left=a.offsetLeft,a._dragDetails.newWidth=a._dragDetails.width,a._dragDetails.newHeight=a._dragDetails.height,a.$container.hasClass("smart-window-resizing-right")?a._dragDetails.side="right":a.$container.hasClass("smart-window-resizing-left")?a._dragDetails.side="left":a.$container.hasClass("smart-window-resizing-top")?a._dragDetails.side="top":a.$container.hasClass("smart-window-resizing-bottom")?a._dragDetails.side="bottom":a.$container.hasClass("smart-window-resizing-top-left")?a._dragDetails.side="topLeftCorner":a.$container.hasClass("smart-window-resizing-bottom-left")?a._dragDetails.side="bottomLeftCorner":a.$container.hasClass("smart-window-resizing-top-right")?a._dragDetails.side="topRightCorner":a.$container.hasClass("smart-window-resizing-bottom-right")&&(a._dragDetails.side="bottomRightCorner")}}_setElementParent(t){const i=this;if(i._windowParent.element=void 0,i._windowParent.parent&&!i._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(i._windowParent.parent.style.position=""),t instanceof HTMLElement?i._windowParent.element=t:"string"==typeof t&&(i._windowParent.element="body"===t?document.body:document.getElementById(t)),i._windowParent.element||(i._windowParent.element=i._windowParent.initialParent.parentElement?i._windowParent.initialParent:document.body),i.parentElement!==i._windowParent.element&&i._windowParent.element.appendChild(i),i._windowParent.element===document.body)i._windowParent.element=document.documentElement,i._windowParent.scrollElement=document.scrollingElement,i._windowParent.parent=document.body,i._windowParent.borderWidth=0;else{i._windowParent.element instanceof Smart.Window&&(i._windowParent.element=i._windowParent.element.$.content);const t=getComputedStyle(i.parentElement),a=t.getPropertyValue("position");i._windowParent.borderWidth=2*parseInt(t.getPropertyValue("border-width")||0),i._windowParent.parent=i.parentElement,i._windowParent.scrollElement=i._windowParent.element,"relative"!==a&&(i.parentElement.style.position="relative")}i._setModal(),i.style.left&&i.offsetLeft>i._windowParent.scrollElement.scrollWidth&&(i.style.left=i._windowParent.scrollElement.scrollWidth-i.offsetWidth+"px"),i.style.top&&i.offsetTop>i._windowParent.scrollElement.scrollHeight&&(i.style.top=i._windowParent.scrollElement.scrollHeight-i.offsetHeight+"px")}_setModal(){const t=this;if(delete t._changingFocus,!!t._windowParent.element){if(!t.modal)return void(t._modal&&t._modal.parentElement&&(t._modal.parentElement.removeChild(t._modal),delete t._modal));if(t._modal||(t._modal=document.createElement("div"),t._modal.classList.add("smart-modal")),t._windowParent.parent===document.body?t._modal.removeAttribute("nested-modal"):t._modal.setAttribute("nested-modal",""),t._modal._window=t,t.opened&&!t._modal.parentElement){const i=parseInt(getComputedStyle(t).getPropertyValue("z-index"));isNaN(i)||(t._modal.style.zIndex=i-1),t.parentElement.insertBefore(t._modal,t)}else t._modal.parentElement&&t._modal.parentElement.removeChild(t._modal)}}}),Smart("smart-dialog-window",class extends Smart.Window{static get properties(){return{cancelLabel:{value:"Cancel",type:"string"},confirmLabel:{value:"Ok",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0}}}static get listeners(){return{"footer.click":"_footerClickHandler"}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="pinButton" class="smart-pin-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="collapseButton" class="smart-collapse-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content">
                        <content></content>
                    </div>
                    <div id="footer" class="smart-footer">
                        <smart-button id="confirmButton" class="smart-confirm-button" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>
                        <smart-button id="cancelButton" class="smart-cancel-button" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>
                    </div>
                </div>`}_footerClickHandler(t){const i=this,a=t.target;a.closest(".smart-confirm-button")?i.$.fireEvent("confirm"):a.closest(".smart-cancel-button")&&i.$.fireEvent("cancel")}_keyDownHandler(t){const i=this;if(delete i._changingFocus,!(i.disabled||(i.hasAttribute("dragged")||i.hasAttribute("resized"))&&i._mouseManipulation)){t.stopPropagation();const a="ArrowDown"===t.key||"ArrowRight"===t.key?10:-10;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(i.minimized||document.activeElement!==i)return;const n=-1<t.key.indexOf("Right")||-1<t.key.indexOf("Left");if(t.preventDefault(),!n&&t.altKey)return void("ArrowUp"===t.key?i.maximize():i.restore());if(i.$.addClass("no-transition"),i.maximized)return;if(t.ctrlKey&&"none"!==i.resizeMode)return i.hasAttribute("dragged")&&i._cancelDragging(t),i.hasAttribute("resized")||i.$.fireEvent("resizeStart",{position:{x:t.pageX,y:t.pageY}}),void i._resize(n?"right":"bottom",a);i.pinned||(!i.hasAttribute("dragged")&&(i.setAttribute("dragged",""),i.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY}})),i._drag(a,n?"horizontal":"vertical")),i.$.removeClass("no-transition");break}case"Escape":-1<i.headerButtons.indexOf("close")&&document.activeElement===i&&i.close();break;case"Tab":i.opened&&i.modal&&(i._changingFocus=!0);break;case"Enter":case" ":{const a=t.target.closest&&t.target.closest("smart-button");if(!a)return;i._isWindowButton(i._buttonPressed=a),delete i._buttonPressed;break}}}}}),Smart("smart-alert-window",class extends Smart.DialogWindow{static get properties(){return{headerButtons:{value:[],type:"array"}}}}),Smart("smart-prompt-window",class extends Smart.DialogWindow{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},confirmLabel:{value:"Ok",type:"string"},cancelLabel:{value:"Cancel",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},headerButtons:{value:["close"],type:"array"},form:{value:"",type:"string"},hint:{value:null,type:"any?"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptLabel:{value:"",type:"string?"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},value:{value:"",type:"string"}}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content">
                        <content></content>
                        <smart-text-box id="textBox"
                            animation="[[animation]]"
                            auto-complete="[[autoComplete]]"
                            max-length="[[maxLength]]"
                            value="{{value}}"
                            form="[[form]]"
                            label="[[promptLabel]]"
                            hint="[[hint]]"
                            display-mode="[[displayMode]]"
                            max-length="[[maxLength]]"
                            placeholder="[[placeholder]]"
                            required="[[required]]"
                            required-message="[[requiredMessage]]"
                            select-all-on-focus="[[selectAllOnFocus]]"
                            theme="[[theme]]">
                        </smart-text-box>
                    </div>
                    <div id="footer" class="smart-footer">
                        <smart-button id="confirmButton" class="smart-confirm-button flat" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>
                        <smart-button id="cancelButton" class="smart-cancel-button flat" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>
                    </div>
                </div>`}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.TextBox":"smart.textbox.js"}}_footerClickHandler(t){const i=this,a=t.target;a.closest(".smart-confirm-button")?i.$.fireEvent("confirm",{value:i.$.textBox.value}):a.closest(".smart-cancel-button")&&i.$.fireEvent("cancel",{value:i.$.textBox.value})}_keyDownHandler(t){function i(){a._dragDetails&&(a._dragDetails.started=!1),a.$.removeClass("no-transition")}const a=this;if(delete a._changingFocus,!(a.disabled||a._dragDetails&&a._dragDetails.started)){t.stopPropagation();const n="ArrowDown"===t.key||"ArrowRight"===t.key?10:-10;switch(a.$.removeClass("no-transition"),t.key){case"ArrowUp":case"ArrowDown":if(document.activeElement!==a)return;if(t.preventDefault(),t.altKey)return"ArrowUp"===t.key?a.maximize():a.restore(),void i();if(a.$.addClass("no-transition"),t.ctrlKey)return a._resize("bottom",n),void i();a._drag(n,"vertical");break;case"ArrowLeft":case"ArrowRight":if(document.activeElement!==a)return;if(t.preventDefault(),a.$.addClass("no-transition"),t.ctrlKey)return a._resize("right",n),void i();a._drag(n,"horizontal"),a.$.removeClass("no-transition");break;case"Escape":-1<a.headerButtons.indexOf("close")&&document.activeElement===a&&a.close();break;case"Tab":a.opened&&a.modal&&(a._changingFocus=!0);break;case"Enter":case" ":{const i=t.target.closest&&t.target.closest("smart-button");if(!i)return;a._isWindowButton(a._buttonPressed=i),delete a._buttonPressed;break}}i()}}}),Smart("smart-multiline-prompt-window",class extends Smart.PromptWindow{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoExpand:{value:!1,type:"boolean"},headerButtons:{value:["close"],type:"array"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content">
                        <content></content>
                       <smart-multiline-text-box id="textBox"
                            animation="[[animation]]"
                            horizontal-scroll-bar-visibility= "[[horizontalScrollBarVisibility]]"
                            vertical-scroll-bar-visibility= "[[verticalScrollBarVisibility]]"
                            auto-capitalize="[[autoCapitalize]]"
                            auto-expand = "[[autoExpand]]"
                            selection-direction= "[[selectionDirection]]"
                            selection-end= "[[selectionEnd]]"
                            selection-start="[[selectionStart]]"
                            spell-check= "[[spellCheck]]"
                            wrap="[[wrap]]"
                            max-length="[[maxLength]]"
                            value="{{value}}"
                            form="[[form]]"
                            label="[[promptLabel]]"
                            hint="[[hint]]"
                            display-mode="[[displayMode]]"
                            max-length="[[maxLength]]"
                            placeholder="[[placeholder]]"
                            required="[[required]]"
                            required-message="[[requiredMessage]]"
                            select-all-on-focus="[[selectAllOnFocus]]"
                            theme="[[theme]]">
                       </smart-multiline-text-box>
                    </div>
                    <div id="footer" class="smart-footer">
                        <smart-button id="confirmButton" class="smart-confirm-button flat" animation="[[animation]]" theme="[[theme]]">[[confirmLabel]]</smart-button>
                        <smart-button id="cancelButton" class="smart-cancel-button flat" animation="[[animation]]" theme="[[theme]]">[[cancelLabel]]</smart-button>
                    </div>
                </div>`}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.MultilineTextBox":"smart.multilinetextbox.js"}}_footerClickHandler(t){const i=this,a=t.target;a.closest(".smart-confirm-button")?i.$.fireEvent("confirm",{value:i.$.textBox.value}):a.closest(".smart-cancel-button")&&i.$.fireEvent("cancel",{value:i.$.textBox.value})}}),Smart("smart-progress-window",class extends Smart.Window{static get properties(){return{completeLabel:{value:"Continue",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content" inner-h-t-m-l="[[innerHTML]]">
                        <content></content>
                    </div>
                    <div id="footer" class="smart-footer">
                        <smart-progress-bar id="progressBar"
                            animation="[[animation]]"
                            min="[[min]]"
                            max="[[max]]"
                            indeterminate="[[inditerminate]]"
                            inverted="[[inverted]]"
                            format-function="[[formatFunction]]"
                            show-progress-value="[[showProgressValue]]"
                            theme="[[theme]]"
                            value="{{value}}">
                        </smart-progress-bar>
                        <smart-button id="completeButton" class="smart-complete-button smart-visibility-hidden" animation="[[animation]]" theme="[[theme]]">[[completeLabel]]</smart-button>
                    </div>
                </div>`}static get requires(){return{"Smart.ProgressBar":"smart.progressbar.js"}}propertyChangedHandler(t,i,a){const n=this;switch(t){case"value":n._handleCompletion();break;default:super.propertyChangedHandler(t,i,a);}}_createElement(){const t=this;t._handleCompletion()}_handleCompletion(){const t=this;t.$.completeButton&&(t.value>=t.max?(t.$completeButton.removeClass("smart-visibility-hidden"),t.$progressBar.addClass("smart-visibility-hidden")):(t.$completeButton.addClass("smart-visibility-hidden"),t.$progressBar.removeClass("smart-visibility-hidden")))}_keyDownHandler(t){function i(){a._dragDetails&&(a._dragDetails.started=!1),a.$.removeClass("no-transition")}const a=this;if(delete a._changingFocus,!(a.disabled||a._dragDetails&&a._dragDetails.started)){t.stopPropagation();const n="ArrowDown"===t.key||"ArrowRight"===t.key?10:-10;switch(a.$.removeClass("no-transition"),t.key){case"ArrowUp":case"ArrowDown":if(document.activeElement!==a)return;if(t.preventDefault(),t.altKey)return"ArrowUp"===t.key?a.maximize():a.restore(),void i();if(a.$.addClass("no-transition"),t.ctrlKey)return a._resize("bottom",n),void i();a._drag(n,"vertical"),a.$.removeClass("no-transition");break;case"ArrowLeft":case"ArrowRight":if(document.activeElement!==a)return;if(t.preventDefault(),a.$.addClass("no-transition"),t.ctrlKey)return a._resize("right",n),void i();a._drag(n,"horizontal"),a.$.removeClass("no-transition");break;case"Escape":-1<a.headerButtons.indexOf("close")&&document.activeElement===a&&a.close();break;case"Tab":a.opened&&a.modal&&(a._changingFocus=!0);break;case"Enter":case" ":{const i=t.target.closest&&t.target.closest("smart-button");if(!i)return;a._isWindowButton(a._buttonPressed=i),delete a._buttonPressed;break}}i()}}}),Smart("smart-tabs-window",class extends Smart.Window{static get properties(){return{disableSnap:{value:!0,readOnly:!0,type:"boolean"},dropPosition:{value:["all"],type:"array"},addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},autoHide:{value:!1,type:"boolean"},autoHideWindow:{value:null,type:"any"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},tabCloseButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},tabCloseButtons:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},tabOverflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},tabReorder:{value:!1,type:"boolean"},tabResize:{value:!1,type:"boolean"},tabScrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any"},min:{value:"",type:"any"},size:{value:"",type:"any"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},layout:{value:null,type:"any"}}}static get listeners(){return{"tabsElement.blur":"_tabsFocusHandler","tabsElement.change":"_tabsChangeHandler","tabsElement.focus":"_tabsFocusHandler","autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.open":"_autoHideWindowOpenHandler"}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="minimizeButton" class="smart-minimize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="maximizeButton" class="smart-maximize-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div id="contentSection" class="smart-content">
                       <smart-tabs id="tabsElement"
                            animation="[[animation]]"
                            add-new-tab="[[addNewTab]]"
                            allow-toggle="[[allowToggle]]"
                            close-button-mode="[[tabCloseButtonMode]]"
                            close-buttons="[[tabCloseButtons]]"
                            disabled="[[disabled]]"
                            overflow="[[tabOverflow]]"
                            reorder="[[tabReorder]]"
                            resize="[[tabResize]]"
                            scroll-buttons-position="[[tabScrollButtonsPosition]]"
                            selected-index="{{selectedIndex}}"
                            selection-mode="[[selectionMode]]"
                            tab-layout="[[tabLayout]]"
                            tab-position="[[tabPosition]]"
                            tab-text-orientation="[[tabTextOrientation]]"
                            theme="[[theme]]">
                            <content></content>
                        </smart-tabs>
                    </div>
                    <div id="footer" class="smart-footer smart-hidden"></div>
                </div>`}static get requires(){return{"Smart.Tabs":"smart.tabs.js"}}appendChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(!(t instanceof Smart.TabItem)&&i.error(i.localize("tabItemRequired",{method:"removeChild"})),i.$.tabsElement.appendChild(t)):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}insert(t,i){this.$.tabsElement.insert(t,i)}insertBefore(t,i){this.$.tabsElement.insertBefore(t,i)}remove(t){this.$.tabsElement.remove(t)}removeChild(t){const i=this;if(!i.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?void(!(t instanceof Smart.TabItem)&&i.error(i.localize("tabItemRequired",{method:"removeChild"})),!i.contains(t)&&i.error(i.localize("referenceNodeNotChild",{argument:"node"})),i.$.tabsElement.removeChild(t)):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}select(t){this.$.tabsElement.select(t)}update(t,i,a){this.$.tabsElement.update(t,i,a)}get items(){const t=this;return t.isCompleted&&t.$.tabsElement?this.$.tabsElement._tabs:void 0}get itemLabels(){const t=this;return t.$?this.$.tabsElement._tabLabelContainers:void 0}propertyChangedHandler(t,i,a){const n=this;switch("collapsed"!==t&&super.propertyChangedHandler(t,i,a),t){case"theme":""!==i&&(n.$.closeButton.classList.remove(i),n.$.collapseButton.classList.remove(i),n.$.maximizeButton.classList.remove(i),n.$.pinButton.classList.remove(i)),n._applyTheme(a);break;case"autoHideWindow":n._handleAutoHideWindow();break;case"autoHide":a||(null!==n.$.tabsElement.selectedIndex&&(n.$.tabsElement._tabs[n.$.tabsElement.selectedIndex]._autoHideWindowSize=void 0),n._autoHideWindow&&n._autoHideWindow.close());break;case"dataSource":n.$.tabsElement.dataSource=a;break;case"layout":n._handleLayoutProperty();break;case"collapsible":case"collapsed":case"locked":case"max":case"min":case"size":{const o=n.closest("smart-docking-layout"),l=n.closest("smart-splitter-item");if(!o)return void("collapsed"===t&&super.propertyChangedHandler(t,i,a));l&&(l[t]=a);break}}}_applyTheme(t){const i=this;if(""!==t){const a=i.$.buttonsContainer.children;for(let n=0;n<a.length;n++)a[n].classList.add(t)}}_autoHideWindowCloseHandler(){const t=this;t.allowToggle&&null!==t.$.tabsElement.selectedIndex&&t.$.tabsElement.select(t.$.tabsElement.selectedIndex),t._autoHideWindow&&t._moveContent(t._autoHideWindow.items[0],t._autoHideWindow._tab)}_autoHideWindowOpenHandler(){const t=this;t.$.tabsElement.selectedIndex&&t._handleAutoHide(t.$.tabsElement.selectedIndex)}_createElement(){const t=this;t.$.tabsElement.$.tabHeaderControls.innerHTML||t.$.tabsElement.$tabHeaderControls.addClass("smart-hidden"),t.$.tabsElement.dataSource=t.dataSource,t._applyTheme(t.theme),t._handleAutoHideWindow(),t.autoHide&&t._handleAutoHide(t.$.tabsElement.selectedIndex),t.allowToggle||t.selectedIndex||null===t.$.tabsElement.selectedIndex||(t.selectedIndex=t.$.tabsElement.selectedIndex,t.$.tabsElement.setAttribute("selected-index",t.selectedIndex)),t._handleLayoutProperty();const i=t.closest("smart-docking-layout"),a=t.closest("smart-splitter-item");i&&a&&(a.collapsible=t.collapsible,a.collapsed=t.collapsed,a.min=t.min,a.max=t.max,a.size=t.size,a.locked=t.locked)}_handleLayoutProperty(){const t=this,i=t.closest("smart-docking-layout");return Smart.DockingLayout?i?void(t.layout=i):void(t.layout instanceof Smart.DockingLayout||"string"==typeof t.layout&&(t.layout=document.getElementById(t.layout))):void 0}_headerDblCickHandler(t){const i=this,a=t.originalEvent.target;t.ctrlKey||a!==i.$.headerSection&&a!==i.$.header||i.$.maximizeButton&&0===i.$.maximizeButton.offsetHeight||(i.maximized?i.restore():i.maximize())}_documentUpHandler(t){const i=this,a=t.originalEvent.target.closest?t.originalEvent.target.closest(".smart-window"):t.originalEvent.target,n=a===i||a===i._autoHideWindow||i._isAutoHideWindowClicked,o=i.closest("smart-docking-layout");if(o&&o.disabled)return void delete i._isWindowContentClicked;super._documentUpHandler(t),delete i._isAutoHideWindowClicked;i.autoHide&&i._autoHideWindow&&(n&&i._autoHideWindow.opened||(i.selectedIndex=null,i._autoHideWindow.parentElement&&i._autoHideWindow.parentElement.closest(".smart-window")===i&&i._autoHideWindow.close()))}_handleAutoHide(t){const i=this;if(i.autoHide&&null!==t&&(i._autoHideWindow||i._handleAutoHideWindow(!0),!!i._autoHideWindow)){i._autoHideWindow._tabsWindow&&i._autoHideWindow._tabsWindow!==i&&(i._autoHideWindow._tabsWindow.selectedIndex=null);const a=i.$.tabsElement._tabs[t];i._autoHideWindow._tab!==a&&i._moveContent(i._autoHideWindow.items[0],i._autoHideWindow._tab),i._autoHideWindow.label=a.label,i._autoHideWindow._tab=a,i._moveContent(i._autoHideWindow._tab,i._autoHideWindow.items[0]),i._autoHideWindow.bringToFront(),i._setAutoHideWindowSize(t),i._autoHideWindow.open(),i._autoHideWindow._tabsWindow=i}}_moveHandler(t){const i=this,a=i.closest("smart-docking-layout");if(a){const t=a.items;if(-1<t.indexOf(i))return}super._moveHandler(t)}_setAutoHideWindowSize(t){var i=Math.min;const a=this;if(a._autoHideWindow){a._autoHideWindow.$.addClass("no-transition"),a._autoHideWindow.style.maxWidth=a._autoHideWindow.style.maxHeight="";const n=a.$.tabsElement._tabs[t],o=a._autoHideWindow.closest("smart-docking-layout")||a._autoHideWindow.parentElement,l=o.getBoundingClientRect(),r=a.$.tabsElement.getBoundingClientRect();if(n){if("top"===a.tabPosition||"bottom"===a.tabPosition){a._autoHideWindow.resizeMode="top"===a.tabPosition?"bottom":"top",a._autoHideWindow.style.width=a.$.tabsElement.offsetWidth+"px";let t=n._autoHideWindowSize?parseFloat(n._autoHideWindowSize)||"":"";Smart.DockingLayout&&o instanceof Smart.DockingLayout&&(t&&(t=i(o.$.itemsContainer.offsetHeight,t)+"px"),a._autoHideWindow.style.maxHeight=o.$.itemsContainer.offsetHeight+"px"),a._autoHideWindow.style.height=t,a._autoHideWindow.style.left=r.left-l.left+"px",a._autoHideWindow&&("top"===a.tabPosition?a._autoHideWindow.style.top=r.top+-l.top+r.height+"px":a._autoHideWindow.style.top=r.top-l.top-a._autoHideWindow.offsetHeight+"px")}else{a._autoHideWindow.resizeMode="left"===a.tabPosition?"right":"left",a._autoHideWindow.style.height=a.$.tabsElement.offsetHeight+"px";let t=n._autoHideWindowSize?parseFloat(n._autoHideWindowSize)||"":"";o instanceof Smart.DockingLayout&&(t&&(t=i(o.$.itemsContainer.offsetWidth,t)+"px"),a._autoHideWindow.style.maxWidth=o.$.itemsContainer.offsetWidth+"px"),a._autoHideWindow.style.width=t,a._autoHideWindow.style.top=r.top-l.top+"px",a._autoHideWindow.style.left="left"===a.tabPosition?r.left-l.left+a.$.tabsElement.offsetWidth+"px":r.left-l.left-a._autoHideWindow.offsetWidth+"px"}a._autoHideWindow._dragDetails&&(a._autoHideWindow._dragDetails.maxWidth=void 0),a._autoHideWindow._setDragDetails("resize"),a._autoHideWindow.$.removeClass("no-transition")}}}_handleAutoHideWindow(t){const i=this;if(i.autoHideWindow){if(i._autoHideWindow&&i._autoHideWindow.parentElement.removeChild(i._autoHideWindow),"string"==typeof i.autoHideWindow)return void(i._autoHideWindow=document.getElementById(i.autoHideWindow));if(i.autoHideWindow instanceof Smart.Window)return void(i._autoHideWindow=i.autoHideWindow)}if(!(!t||i._autoHideWindow||2===i.$.contentSection.children.length&&i.$.contentSection.children[1]instanceof Smart.Window)){const t=document.createElement("smart-window");t.$=Smart.Utilities.Extend(t),t.disableSnap=t.pinned=!0,t.headerButtons=["close"],i.$.contentSection.appendChild(t),i._autoHideWindow=t}}_moveContent(t,a){if(t&&a){const n=[].slice.call(t.$.content.childNodes);for(let t=0;t<n.length;t++)a.appendChild(n[t])}}_tabsChangeHandler(t){const i=this;if(t.target===i.$.tabsElement&&i.autoHide){if(i._autoHideWindow||i._handleAutoHideWindow(!0),null!==t.detail.oldIndex&&i._autoHideWindow.opened){const a=i.$.tabsElement._tabs[t.detail.oldIndex];a._autoHideWindowSize=i._autoHideWindow.style["right"===i.$.tabsElement.tabPosition||"left"===i.$.tabsElement.tabPosition?"width":"height"]}return i.autoHide&&null!==t.detail.index&&void 0!==t.detail.index?void i._handleAutoHide(t.detail.index):void i._autoHideWindow.close()}}_tabsFocusHandler(t){const i=this;"focus"===t.type?(i.bringToFront(),i.setAttribute("focus","")):i.removeAttribute("focus")}}),Smart("smart-wait-window",class extends Smart.ProgressWindow{static get properties(){return{headerButtons:{value:[],type:"array"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},pinned:{value:!0,type:"boolean",readOnly:!0}}}template(){return`<div id="container">
                    <div id="headerSection" class="smart-header-section">
                        <div id="header" class="smart-header">[[label]]</div>
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <smart-button id="closeButton" class="smart-close-button" animation="[[animation]]" theme="[[theme]]"></smart-button>
                        </div>
                    </div>
                    <div class="smart-content">
                        <content></content>
                        <smart-progress-bar id="progressBar" animation="[[animation]]" indeterminate theme="[[theme]]"></smart-progress-bar>
                    </div>
                    <div id="footer" class="smart-footer"></div>
                </div>`}_keyDownHandler(t){function i(){a._dragDetails&&(a._dragDetails.started=!1),a.$.removeClass("no-transition")}const a=this;if(delete a._changingFocus,!(a.disabled||a._dragDetails&&a._dragDetails.started)){t.stopPropagation();const n="ArrowDown"===t.key||"ArrowRight"===t.key?10:-10;switch(a.$.removeClass("no-transition"),t.key){case"ArrowUp":case"ArrowDown":if(document.activeElement!==a)return;if(t.preventDefault(),t.altKey)return"ArrowUp"===t.key?a.maximize():a.restore(),void i();if(a.$.addClass("no-transition"),t.ctrlKey)return a._resize("bottom",n),void i();a._drag(n,"vertical");break;case"ArrowLeft":case"ArrowRight":if(document.activeElement!==a)return;if(t.preventDefault(),a.$.addClass("no-transition"),t.ctrlKey)return a._resize("right",n),void i();a._drag(n,"horizontal");break;case"Tab":a.opened&&a.modal&&(a._changingFocus=!0);break;case"Enter":case" ":{const i=t.target.closest&&t.target.closest("smart-button");if(!i)return;a._isWindowButton(a._buttonPressed=i),delete a._buttonPressed;break}}i()}}}),Smart("smart-docking-layout",class extends Smart.ContentElement{static get properties(){return{autoLoadState:{value:!1,type:"boolean"},autoSaveState:{value:!1,type:"boolean"},disableDragging:{value:!1,type:"boolean"},hideSplitterBars:{value:!1,type:"boolean"},layout:{value:[],type:"array",reflectToAttribute:!1},liveResize:{value:!1,type:"boolean"},messages:{value:{en:{invalidNode:"{{elementType}}: \"{{method}}\" method accepts an instance of Smart.TabsWindow",invalidNodeRemove:"{{elementType}}: \"{{method}}\" method accepts an instance of Smart.TabsWindow that is a child of the DockingLayout.",invalidNodeType:"{{elementType}}: The method \"{{method}}\" requires a \"smart-tabs-window\" element to be passed as an argument.",invalidTargetNode:"{{elementType}}: The method \"{{method}}\" requires an index of an item that is not hidden/closed. Only visible items that are part of the Layout are valid.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number.",noId:"smartDockingLayout requires an id in order to save/load a state."}},type:"object",extend:!0},resizeStep:{value:5,type:"number"},snapMode:{value:"advanced",allowedValues:["simple","advanced"],type:"string"}}}static get listeners(){return{"autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.resizeEnd":"_autoHideWindowResizeEndHandler",dock:"_dockEventHandler","document.down":"_documentDownHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.selectstart":"_documentSelectStartHandler","document.dragstart":"_documentDragStartHandler","container.tabStripResize":"_containerTabStripResizeHandler","itemsContainer.close":"_itemsContainerCloseHandler","itemsContainer.autoHide":"_itemsContainerAutoHideHandler","itemsContainer.resizeEnd":"_itemsContainerResizeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",mouseleave:"_mouseLeaveHandler"}}template(){return`<div id="container">
                    <smart-splitter id="horizontalHiddenItemsContainer" class="smart-horizontal-hidden-items-container" orientation="horizontal">
                        <smart-splitter-item class="smart-docking-layout-item-holder">
                            <smart-splitter id="verticalHiddenItemsContainer" class="smart-vertical-hidden-items-container">
                                <smart-splitter-item class="smart-docking-layout-item-holder">
                                    <smart-splitter id="itemsContainer" class="smart-items-container">
                                        <content></content>
                                        <smart-splitter-item id="placeholderItem" class="smart-placeholder" pinned>
                                            <smart-tabs-window tab-position="hidden" opened header-buttons='[]'>
                                                <smart-tab-item></smart-tab-item>
                                            </smart-tabs-window>
                                        </smart-splitter-item>
                                    </smart-splitter>
                                </smart-splitter-item>
                            </smart-splitter>
                        </smart-splitter-item>
                    </smart-splitter>
                    <smart-tabs-window id="tabsWindowFeedback" class="smart-tabs-window-feedback smart-hidden"></smart-tabs-window>
                    <smart-tabs-window id="autoHideWindow" class="smart-docking-layout-auto-hide-window" pinned header-buttons='["close", "dock"]' tab-position="hidden">
                        <smart-tab-item></smart-tab-item>
                    </smart-tabs-window>
                </div>`}propertyChangedHandler(t,i,a){const n=this;switch(t){case"autoSaveState":n._handleAutoSave();break;case"layout":n._handleLayout();break;case"liveResize":case"resizeStep":{const o=n.getElementsByTagName("smart-splitter");for(let n=0;n<o.length;n++)o[n][t]=a;"liveResize"===t&&(n.$.autoHideWindow[t]=a);break}case"snapMode":n._handleSnapping(),n._snapFeedback=void 0;break;case"hideSplitterBars":n._setSplitterBarVisibility();break;default:super.propertyChangedHandler(t,i,a);}}ready(){super.ready();const t=this;if(t.autoLoadState){const i=t.loadState();i&&(t.layout=i)}t.$.itemsContainer.liveResize=t.liveResize,t.$.itemsContainer.resizeStep=t.resizeStep,t._handleLayout(),t.$tabsWindowFeedback.removeClass("smart-hidden"),t._setFocusable()}static get requires(){return{"Smart.TabsWindow":"smart.window.js","Smart.Splitter":"smart.splitter.js"}}appendChild(t){const i=this;if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}return t?t instanceof Smart.TabsWindow?void i.insertBefore(t,null):void i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"appendChild"})):void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"appendChild"}))}autoHideBottom(t){this._autoHide(t,"bottom")}autoHideLeft(t){this._autoHide(t,"left")}autoHideRight(t){this._autoHide(t,"right")}autoHideTop(t){this._autoHide(t,"top")}clearState(){const t=this;return t.id?void window.localStorage.removeItem("smartDockingLayout"+t.id):void t.warn(t.localize("noId"))}dock(t){this._dock(t)}undock(t){const i=this;if("number"==typeof t?t=i._items[t]:"string"==typeof t&&(t=document.getElementById(t)),!t)return;if(!i.contains(t))return;const a=t.closest("smart-splitter-item");if(!a)return;const n=a.getBoundingClientRect();let o;if(t instanceof Smart.TabsWindow){t.autoHide?(i.$.autoHideWindow.close(),t._autoHideWindow&&(t.style.width=t._autoHideWindow.offsetWidth+"px",t.style.height=t._autoHideWindow.offsetHeight+"px"),"left"===t.tabPosition||"right"===t.tabPosition?t.style.height=i.offsetHeight+"px":t.style.width=i.offsetWidth+"px"):(t.style.width=t.offsetWidth+"px",t.style.height=t.offsetHeight+"px"),t.windowParent="body",t.opened=!0,t.autoHide&&(t.tabPosition="top"),t.autoHide=t.allowToggle=t.pinned=!1,t.style.maxWidth=t.style.maxHeight="",o=t;const n=a.closest("smart-splitter");n.removeChild(a),i._removeUnneccessaryItems(n)}else if(t instanceof Smart.TabItem){const n=t.closest("smart-tabs-window");let l;1===n.items.length?(l=n,a.closest("smart-splitter").removeChild(a)):(l=i._createTabsWindowFromObject({label:t.label}),l.appendChild(t)),"body"===l.windowParent?l.parentElement!==document.body&&document.body.appendChild(l):l.windowParent="body",l.allowToggle=l.autoHide=l.pinned=!1,l.label=t.label,l.opened=!0,l._parentInfo={closestItem:n,position:t.index},o=l,t=n}else return;t._originalTabPosition?o.tabPosition=t._originalTabPosition:t.autoHide&&(o.tabPosition="top"),o.tabTextOrientation=t._originalTextOrientation||"horizontal",o===t&&(delete o._originalTabPosition,delete o._originalTextOrientation),i._setFloatingItemsHeaderButtons(o),o.style.left=n.left+"px",o.style.top=n.top+"px",o.resizeMode="both";const l=i._items.indexOf(t);if(o.layout=i,-1<l&&(i._items.splice(l,1),o.position&&(o.style.top=o.position.top,o.style.left=o.position.left,delete o.position)),0!==i._items.filter(t=>t.opened).length||i.$.placeholderItem.parentElement||i.$.itemsContainer.appendChild(i.$.placeholderItem),i._validateWindowPosition(o),i._setAutoHidePaddings(),i._handleAutoSave(),i.$.fireEvent("stateChange"),document.activeElement!==o){const t=document.scrollingElement||document.documentElement,i=t.scrollLeft,a=t.scrollTop;o.focus(),o.bringToFront(),window.scrollTo(i,a)}}insertBefore(t,i,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}let o=t;o instanceof Smart.TabsWindow?(t=document.createElement("smart-splitter-item"),t.size=o.size||"",t.max=o.max||"",t.min=o.min||"",t.locked=o.locked||!1,t.collapsible=o.collapsible||!1,t.collapsed=o.collapsed||!1,t.appendChild(o)):o instanceof Smart.SplitterItem?o=o.querySelector("smart-tabs-window"):n.error(n.localize("invalidNodeType",{elementType:n.nodeName.toLowerCase(),method:"insertBefore"})),o.opened=o.pinned=!0,o.style.width=o.style.height="",o.style.top=o.style.left="",o.style.paddingTop=o.style.paddingBottom="",o.style.paddingLeft=o.style.paddingRight="",t.style.top=t.style.left="";let l;if(i){if(l=i.closest("smart-splitter"),l===n.$.verticalHiddenItemsContainer||l===n.$.horizontalHiddenItemsContainer?(l=n.$.itemsContainer,i=0===n._items.length?null:"top"===i.tabPosition||"left"===i.tabPosition?n._items[0]:n._items[n._items.length-1]):a&&(l=n.$.itemsContainer),!(i instanceof Smart.TabsWindow))return void n.error(n.localize("invalidNodeType",{elementType:n.nodeName.toLowerCase(),method:"insertBefore"}));l.autoFitMode="end",l.insertBefore(t,l._items.filter(t=>t.contains(i))[0]),n._items.splice(n._items.indexOf(i),0,o)}else l=n.$.itemsContainer,n._dockingAutoHideTabItem&&(l.autoFitMode="end"),n._items.push(o),n.$.itemsContainer.insertBefore(t);if(l.autoFitMode="proportional",o.autoHide)n._autoHide(o,o.autoHidePosition);else{o.autoHide=o.allowToggle=!1,o._originalTabPosition&&(o.tabPosition=o._originalTabPosition,delete o._originalTabPosition),o._originalTextOrientation&&(o.tabTextOrientation=o._originalTextOrientation,delete o._originalTextOrientation),n._setDockedItemsHeaderButtons(o);const t=document.scrollingElement||document.documentElement,i=t.scrollLeft,a=t.scrollTop;o.focus(),window.scrollTo(i,a)}0<n._items.filter(t=>t.opened).length&&n.$.placeholderItem.parentElement&&n.$.itemsContainer.removeChild(n.$.placeholderItem),o.layout=n,o.minimized=!1,o.maximized=!1,o.locked=!1,o.resizeMode="none",n._handleAutoHiddenSplitterBars(),n._setSplitterBarVisibility(),n._handleAutoSave(),n.$.fireEvent("stateChange")}insertBeforeItem(t,i){this._insert(t,i,"top","insertBeforeItem")}insertAfterItem(t,i){this._insert(t,i,"bottom","insertAfterItem")}insertIntoLeft(t,i){this._insert(t,i,"inside-left","insertIntoLeft")}insertIntoRight(t,i){this._insert(t,i,"inside-right","insertIntoRight")}insertIntoTop(t,i){this._insert(t,i,"inside-top","insertIntoTop")}insertIntoBottom(t,i){this._insert(t,i,"inside-bottom","insertIntoBottom")}insertLayoutTop(t){this._insert(0,t,"layout-top","insertLayoutTop")}insertLayoutBottom(t){this._insert(0,t,"layout-bottom","insertLayoutBottom")}insertLayoutLeft(t){this._insert(0,t,"layout-left","insertLayoutLeft")}insertLayoutRight(t){this._insert(0,t,"layout-right","insertLayoutRight")}insertOutsideTargetGroupTop(t,i){this._insert(t,i,"outside-top","insertOutsideTargetGroupTop")}insertOutsideTargetGroupBottom(t,i){this._insert(t,i,"outside-bottom","insertOutsideTargetGroupBottom")}insertOutsideTargetGroupLeft(t,i){this._insert(t,i,"outside-left","insertOutsideTargetGroupLeft")}insertOutsideTargetGroupRight(t,i){this._insert(t,i,"outside-right","insertOutsideTargetGroupRight")}getAutoHideItems(t){function i(t){let a=[];if(!t._items)return a;for(let n=0;n<t._items.length;n++)t._items[n].$.hasClass("smart-docking-layout-item-holder")||a.push(t._items[n].getElementsByTagName("smart-tabs-window")[0]);return a}const a=this;return t?"horizontal"===t?i(a.$.horizontalHiddenItemsContainer):i(a.$.verticalHiddenItemsContainer):i(a.$.horizontalHiddenItemsContainer).concat(i(a.$.verticalHiddenItemsContainer))}getIndex(t){const i=this;return i.isReady?i._items.length?i._items.indexOf(t):void 0:void 0}get autoHideItems(){const t=this;if(t.isReady)return t.getAutoHideItems()}get items(){const t=this;if(t.isReady)return t._items.filter(t=>t.opened).concat(t.getAutoHideItems())}get closedItems(){const t=this;if(t.isReady)return t._items.filter(t=>!t.opened)}get undockedItems(){const t=this;if(t.isReady){const a=document.getElementsByTagName("smart-tabs-window");let n=[];for(let o=0;o<a.length;o++)a[o].closest("smart-docking-layout")||a[o].layout!==t||(a[o].undocked=!0,n.push(a[o]));return n}}getItemGroupElement(t){const i=this;return i.isReady&&t&&t instanceof Smart.TabsWindow&&i.contains(t)?t.closest("smart-splitter"):void 0}getState(t){const a=this,n=a.getAutoHideItems(),o=a.undockedItems,l=[];for(let o=0;o<n.length;o++)l.push(a._createTabsWindowStructure(n[o],t));for(let n=0;n<o.length;n++)l.push(a._createTabsWindowStructure(o[n],t));return[{type:"LayoutGroup",items:l.concat(a._createLayoutStructure(a.$.itemsContainer,t)),orientation:a.$.itemsContainer.orientation}]}getJSONStructure(){return this.getState(!0)}loadState(t){const i=this;if(!t){if(!i.id)return void i.warn(i.localize("noId"));t=JSON.parse(window.localStorage.getItem("smartDockingLayout"+i.id))}return t?(i._loadState(t),t):void 0}remove(t){const i=this;return"number"==typeof t?t=i._items[t]:"string"==typeof t&&(t=document.getElementById(t)),t instanceof Smart.TabsWindow?t.closest("smart-docking-layout")===i?void i.removeChild(t):void i.error(i.localize("invalidNodeRemove",{elementType:i.nodeName.toLowerCase(),method:"remove"})):void i.error(i.localize("invalidIndex",{elementType:i.nodeName.toLowerCase(),method:"remove"}))}removeAll(){this._removeAll()}removeChild(t){const i=this;if(!t)return void i.error(i.localize("invalidNode",{elementType:i.nodeName.toLowerCase(),method:"removeChild"}));if(!(t instanceof Smart.TabsWindow))return void i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"removeChild"}));if(!i.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(i,t.concat(Array.prototype.slice.call(arguments)))}const a=t.closest("smart-splitter-item");if(a){const n=a.closest("smart-splitter");n&&(a.closest("smart-splitter").removeChild(a),i._items.splice(i._items.indexOf(t),1),i._removeUnneccessaryItems(n),0===i._items.filter(t=>t.opened).length&&!i.$.placeholderItem.parentElement&&i.$.itemsContainer.appendChild(i.$.placeholderItem),t.layout=i,i._handleAutoSave(),i.$.fireEvent("stateChange"))}}saveState(){const t=this;return t.id?void window.localStorage.setItem("smartDockingLayout"+t.id,JSON.stringify(t.getJSONStructure())):void t.warn(t.localize("noId"))}update(t,a){const i=this;if("number"==typeof t?t=i._items[parseInt(t)]:"string"==typeof t&&(t=document.getElementById(t)),!t||!(t instanceof Smart.TabsWindow))return void i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"update"}));if(i.contains(t)&&a&&"object"==typeof a){if(a.items)for(let n=0;n<a.items.length;n++)t.update(a.items[n].index,a.items[n].label,a.items[n].content);if(a.id&&(t.id=a.id),a.label&&(t.label=a.label),t.tabCloseButtons=a.tabCloseButtons||!1,a.headerButtons&&Array.isArray(a.headerButtons)){let i=["autoHide","close"];Array.prototype.push.apply(i,a.headerButtons),t.headerButtons=i.filter((t,a)=>i.indexOf(t)===a)}const n=t.closest("smart-splitter-item");n&&(t.autoHide?i._autoHide(t):(n.size=a.size||"",n.min=a.min||"",n.max=a.max||"",n.locked=a.locked||!1,n.collapsible=a.collapsible||!1,n.collapsed=a.collapsed||!1))}}_autoHide(t,i){const a=this;if("number"==typeof t?t=a._items[t]:"string"==typeof t&&(t=document.getElementById(t)),!t)return;if(t instanceof Smart.TabItem){const n=t.closest("smart-tabs-window");if(n&&2>n.items.length)t=n;else{const o=t;if(n){if(n.autoHide&&n.tabPosition===i)return;n.removeChild(t)}t=a._createTabsWindowFromObject({label:t.label}),t.appendChild(o)}}if(!(t instanceof Smart.TabsWindow))return void a.error(a.localize("invalidNodeType",{elementType:a.nodeName.toLowerCase(),method:"appendChild"}));let n=t.closest("smart-splitter-item"),o;const l=t.closest("smart-splitter")||a.$.itemsContainer,r=a._getAutoHidePositionDetails(i,t,n),s=r.autoHideSplitter;i=r.position,t.offsetHeight&&(o="left"===i||"right"===i?t.offsetWidth:t.offsetHeight),n||(n=document.createElement("smart-splitter-item"),n.appendChild(t)),n.min=30;const d="auto-hide-"+i;if(!(t.autoHide&&n.$.hasClass(d))){const r=a._items.indexOf(t);a._items.splice(r,-1<r?1:0),0!==a._items.filter(t=>t.opened).length||a.$.placeholderItem.parentElement||("left"===i?a.$.itemsContainer.insert(1,a.$.placeholderItem):a.$.itemsContainer.appendChild(a.$.placeholderItem)),a._handleAutoHideWindow({position:i,tabsWindow:t,splitterItem:n,autoHideName:d,splitterContainer:l,autoHideSplitter:s}),s.bars.map(t=>t.hide()),a._setAutoHidePaddings();const m=t.items;if(m)for(let t=0;t<m.length;t++)m[t]._autoHideWindowSize||(m[t]._autoHideWindowSize=o);a.$.autoHideWindow.opened&&a.$.autoHideWindow._tabsWindow&&a.$.autoHideWindow._tabsWindow._setAutoHideWindowSize(a.$.autoHideWindow._tabsWindow.selectedIndex),a.isCompleted&&(a._handleAutoSave(),a.$.fireEvent("stateChange"))}}_getAutoHidePositionDetails(t,i,a){const n=this,o=i.closest("smart-splitter")||n.$.itemsContainer,l=o?o._items.indexOf(a):0;let r;switch(t){case"top":case"bottom":r=n.$.horizontalHiddenItemsContainer;break;case"left":case"right":r=n.$.verticalHiddenItemsContainer;break;default:if("vertical"===o.orientation){r=n.$.verticalHiddenItemsContainer;const i=r.items.filter(t=>-1<t.className.indexOf("auto-hide-"));t=1===i.length&&1===n._items.length?i[0].$.hasClass("auto-hide-right")?"right":"left":l>=o.items.length/2?"right":"left"}else{r=n.$.horizontalHiddenItemsContainer;const i=r.items.filter(t=>-1<t.className.indexOf("auto-hide-"));t=1===i.length&&1===n._items.length?i[0].$.hasClass("auto-hide-bottom")?"bottom":"top":l>=o.items.length/2?"bottom":"top"}}return{autoHideSplitter:r,position:t}}_handleAutoHideWindow(t){const i=this,a=t.autoHideName,n=t.splitterItem,o=t.splitterContainer,l=t.position,r=t.autoHideSplitter;let s=t.tabsWindow,d=i.getElementsByClassName(a)[0],m="offset"+("left"===l||"right"===l?"Width":"Height");if(n.locked=!1,d){const t=[].slice.call(s.isCompleted?s.items:s.children),a=d.querySelector("smart-tabs-window"),l=a.items.length;for(let n=0;n<t.length;n++)a.insert(l,{node:t[n]}),t[n]._autoHideWindowSize=s[m];n.parentElement&&o.removeChild(n),i._removeUnneccessaryItems(o),s=a}else{o&&o.contains(n)&&o.removeChild(n),(i._initializingItems||!s.autoHide)&&(s._originalTabPosition=s.tabPosition,s._originalTextOrientation=s.tabTextOrientation,s._originalLocked=s.locked),s.autoHideWindow=i.$.autoHideWindow,s.autoHide=s.allowToggle=!0,s.selectedIndex=null,s.$.tabsElement&&s.$.tabsElement.selectedIndex!==s.selectedIndex&&(s.$.tabsElement.selectedIndex=s.selectedIndex),s.tabTextOrientation="right"===l||"left"===l?"vertical":"horizontal",s.tabPosition=l,s.style.top=s.style.left="",s.style.width=s.style.height="",s.opened=!0,s.resizeMode="none";for(let t=0;t<n.classList.length;t++)-1<n.classList[t].indexOf("auto-hide-")&&n.$.removeClass(n.classList[t]);if(n.$.addClass(a),n.style.paddingLeft=n.style.paddingRight=n.style.paddingTop=n.style.paddingBottom="",n.min&&(n.min=""),i._removeUnneccessaryItems(o),"top"===l||"left"===l?r.insert(0,n):r.appendChild(n),r.autoFitMode="proportional",Smart.Utilities.Core.Browser.Safari&&("left"===l||"right"===l)){const t=s.querySelector(".smart-tab-strip");s.size=t.offsetWidth}else{if(Smart.Utilities.Core.Browser.Firefox&&("top"===l||"bottom"===l)){const t=s.querySelector(".smart-tab-strip");s.size=t.offsetHeight}s.size="auto"}s.locked=!0,r.autoFitMode="end"}}_autoHideWindowCloseHandler(){const t=this,i=t.$.autoHideWindow._tabsWindow,a=document.scrollingElement||document.documentElement,n=a.scrollLeft,o=a.scrollTop;return i._moveContent(i._autoHideWindow.items[0],i._autoHideWindow._tab),t.$.autoHideWindow.opened?void(!i.allowToggle||null!==i.$.tabsElement.selectedIndex&&(i.select(i.$.tabsElement.selectedIndex),document.activeElement!==i.$.tabsElement&&(i.$.tabsElement.focus(),window.scrollTo(n,o)))):(i.selectedIndex=null,void(document.activeElement!==i.$.tabsElement&&(i.$.tabsElement.focus(),window.scrollTo(n,o))))}_autoHideWindowResizeEndHandler(t){const i=t.target,a="left"===i.resizeMode||"right"===i.resizeMode?"width":"height";i._tab&&(i._tab._autoHideWindowSize=t.detail[a])}_cancelDragOperation(){const t=this;t.removeAttribute("dragged"),t._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),t._dragDetails.windowFeedback.removeAttribute("ontop"),t._returnItemToOrigin(t._dragDetails.windowFeedback),t._noStateChangeFiring=!0,t._endDrag()}_createTabsWindowFromObject(t,a){const n=document.createElement("smart-tabs-window");let o=["autoHide","close"],l;if(n.layout=this,t.id&&(n.id=t.id),t.disabled&&(n.disabled=t.disabled),t.label&&(n.label=t.label),t.headerPosition&&(n.headerPosition=t.headerPosition),t.tabCloseButtons&&(n.tabCloseButtons=t.tabCloseButtons),t.dropPosition&&(n.dropPosition=t.dropPosition),t.resizeMode&&(n.resizeMode=t.resizeMode),this.hasAnimation||(n.animation="none"),n.disableDrag=t.disableDrag||!1,n.tabCloseButtons=t.tabCloseButtons||!1,t.autoHide?(n.autoHideWindow=this.$.autoHideWindow,n.autoHide=n.allowToggle=t.autoHide,n.autoHidePosition=t.autoHidePosition):t.undocked&&(o=["minimize","maximize","close"],n.undocked=t.undocked,n.position={top:t.top?-1<(t.top+"").indexOf("%")?t.top:parseFloat(t.top)+"px":void 0,left:t.left?-1<(t.left+"").indexOf("%")?t.left:parseFloat(t.left)+"px":void 0,width:t.width,height:t.height}),n.tabPosition=t.tabPosition||n.tabPosition,n.opened=n.pinned=!0,t.headerButtons&&(n.headerButtons=t.headerButtons),Array.isArray(t.headerButtons)&&0<t.headerButtons.length){const a=t.headerButtons;for(let t=0;t<a.length;t++)0>o.indexOf(a[t])&&o.push(a[t])}if(n.headerButtons=o,n.size=t.size||"",n.max=t.max||"",n.min=t.min?t.min:30,n.locked=t.locked||!1,n.collapsible=t.collapsible||!1,n.collapsed=t.collapsed||!1,t.items&&Array.isArray(t.items))for(let o=0;o<t.items.length;o++)a&&t.items[o].instance?(l=t.items[o].instance,l.index=null,l.id=t.items[o].id||""):(l=document.createElement("smart-tab-item"),l.label=t.items[o].label?t.items[o].label:"",l.id=t.items[o].id||"",l.content=t.items[o].content?t.items[o].content:"",l.selected=!!t.items[o].selected&&t.items[o].selected,n._isItemSelected=!0),l.disableDrag=t.items[o].disableDrag||!1,t.items[o].id&&(l.id=t.items[o].id),n.appendChild(l);return n}_createItemsFromArray(t,a){const n=this;let o=t;const i=o.length;n._removeAll(!0),n._initializingItems=!0;const l=n.undockedItems;for(let n=0;n<l.length;n++)l[n].layout=null,l[n].parentElement.removeChild(l[n]);1===i&&o[0].type&&"layoutgroup"===o[0].type.toLowerCase()&&(n.$.itemsContainer.orientation=o[0].orientation||n.$.itemsContainer.orientation,n.$.itemsContainer.liveResize=o[0].liveResize||n.$.itemsContainer.liveResize,n.$.itemsContainer.resizeMode=o[0].resizeMode||n.$.itemsContainer.resizeMode,o=o[0].items);let r;n.$.itemsContainer.autoFitMode="end";for(let l=0;l<o.length;l++)r=n._createLayoutItem(o[l],a),r&&(n.$.placeholderItem.parentElement&&n.$.itemsContainer.removeChild(n.$.placeholderItem),n.$.itemsContainer.appendChild(r));0===n._items.filter(t=>t.opened).length?!n.$.placeholderItem.parentElement&&n.$.itemsContainer.appendChild(n.$.placeholderItem):n.$.placeholderItem.parentElement&&n.$.itemsContainer.removeChild(n.$.placeholderItem),n.$.itemsContainer.autoFitMode="proportional",delete n._initializingItems}_createLayoutItem(t,a){if(!t)return;const n=this,i=document.createElement("smart-splitter-item");let o;if(t.type&&"layoutgroup"===t.type.toLowerCase()){o=document.createElement("smart-splitter"),o.autoFitMode="proportional",t.id&&(o.id=t.id),t.orientation&&(o.orientation=t.orientation),t.resizeMode&&(o.resizeMode=t.resizeMode),o.liveResize=n.liveResize,o.resizeStep=n.resizeStep;let l;for(let r=0;r<t.items.length;r++)l=n._createLayoutItem(t.items[r],a),l&&o.appendChild(l);if(!o.querySelector("smart-splitter-item"))return}else{if(o=n._createTabsWindowFromObject(t.type&&"layoutgroup"===t.type.toLowerCase()?t.items[0]:t,a),o.autoHide)return n._autoHide(o,o.autoHidePosition),void delete o.autoHidePosition;if(o.undocked)return n.undock(o),document.body.appendChild(o),o.opened=!0,o.pinned=!1,o.layout=n,o.position&&(o.style.left=o.position.left,o.style.top=o.position.top,o.style.width=o.position.width,o.style.height=o.position.height,delete o.position),void(o.size&&(o.style.left=o.position.left,o.style.top=o.position.top));n._items.push(o)}return i.size=t.size||"",i.max=t.max||"",i.min=t.min||30,i.locked=t.locked||!1,i.collapsible=t.collapsible||!1,i.collapsed=t.collapsed||!1,i.appendChild(o),i}_createLayoutStructure(t,a){function n(t){for(let i=t.firstElementChild;i;){if(i instanceof Smart.Splitter)return i;if(i instanceof Smart.TabsWindow)return i;i=i.nextElementSibling}}const o=this,l=[];let r=t._items,s,d;const i=r[0].$.content.children[0];1===r.length&&i instanceof Smart.Splitter&&(r=i._items,t===o.$.itemsContainer&&(o.$.itemsContainer.orientation=i.orientation));for(let m=0;m<r.length;m++)if(r[m]!==o.$.placeholderItem){if(d=n(r[m].$.content),d instanceof Smart.TabsWindow)s=o._createTabsWindowStructure(d,a);else if(d instanceof Smart.Splitter){for(;1===d._items.length&&d._items[0].$.content.children[0]instanceof Smart.Splitter;)d=d._items[0].$.content.children[0];s=1===d._items.length?o._createTabsWindowStructure(d._items[0].$.content.children[0],a):{type:"LayoutGroup",items:o._createLayoutStructure(d,a),orientation:d.orientation},d.id&&(s.id=d.id),"adjacent"!==d.resizeMode&&(s.resizeMode=d.resizeMode),5!==d.resizeStep&&(s.resizeStep=d.resizeStep),d.liveResize&&(s.resizeStep=d.liveResize)}s.size=r[m][t._measurements.size],r[m].locked&&(s.locked=!0),r[m].min&&(s.min=r[m].min),r[m].max&&(s.max=r[m].max),l.push(s)}return l}_createTabsWindowStructure(t,i){function a(t){const a={};return a.type="LayoutPanelItem",a.label=t.label||"",t.selected&&(a.selected=t.selected),t.disabled&&(a.disabled=t.disabled),t.disableDrag&&(a.disableDrag=t.disableDrag),i||(a.instance=t),t.id&&(a.id=t.id),a}const n={type:"LayoutPanel"};if(t.id&&(n.id=t.id),t.disabled&&(n.disabled=t.disabled),t.label&&(n.label=t.label),t.autoHide?(n.autoHide=t.autoHide,n.autoHidePosition=t.tabPosition):"top"!==t.tabPosition&&(n.tabPosition=t.tabPosition),t.closest("smart-docking-layout")||(n.undocked=!0,n.top=t.style.top,n.left=t.style.left,n.width=t.style.width,n.height=t.style.height),t.dropPosition&&"all"!==t.dropPosition[0]&&(n.dropPosition=t.dropPosition),t.disableDrag&&(n.disableDrag=t.disableDrag),"none"!==t.resizeMode&&(n.resizeMode=t.resizeMode),t.items){n.items=[];for(let o=0;o<t.items.length;o++)n.items.push(a(t.items[o]))}return n}_containerTabStripResizeHandler(t){const i=this,a=t.target.closest("smart-splitter");(a===i.$.horizontalHiddenItemsContainer||a===i.$.verticalHiddenItemsContainer)&&(a._resizeEventHandler(),i._setAutoHidePaddings())}_dock(t,i){const a=this;if("number"==typeof t?t=a._items[t]:"string"==typeof t&&(t=document.getElementById(t)),!t)return;let n;if(t instanceof Smart.TabItem){const i=a._handleTabItemDocking(t);t=i.tabsWindow,n=i.newTabsWindow}else"object"!=typeof t||t instanceof HTMLElement||(t=a._createTabsWindowFromObject(t));if(!(t instanceof Smart.TabsWindow)||!t.autoHide)return void(0>a._items.indexOf(t)&&(n.autoHide=!1,0===t.items.length&&"simple"===a.snapMode&&t.parentElement.removeChild(t),i?a._insert(-1,n,i?"layout-"+i:void 0):a.appendChild(n)));if(a.contains(t)){const o=t.closest("smart-splitter-item"),l=t.closest("smart-splitter"),r=!o.nextElementSibling;i||("horizontal"===l.orientation?i=r?"bottom":"top":i=r?"right":"left"),0===t.items.length&&o.closest("smart-splitter").removeChild(o),n&&(t=n),t.autoHide&&(a.$.verticalHiddenItemsContainer.contains(t)?a.$.verticalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item")):a.$.horizontalHiddenItemsContainer.contains(t)&&a.$.horizontalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item")),t.tabPosition="top",delete t._originalTabPosition),a._setDockedItemsHeaderButtons(t),t.autoHide=t.allowToggle=t.maximized=t.minimized=t.collapsed=t.locked=!1,t.tabTextOrientation="horizontal",a.$.autoHideWindow.close(),a._insert(-1,t,"layout-"+i),a._setAutoHidePaddings(),delete a._dockingAutoHideTabItem}}_handleTabItemDocking(t){const i=this,a=t.closest("smart-tabs-window");let n;if(a){const o=i.$.autoHideWindow;if(!a.autoHide)return{tabsWindow:a,newTabsWindow:a};i._dockingAutoHideTabItem=!0,n=1===a.items.length?a:document.createElement("smart-tabs-window"),delete t._autoHideWindowSize,n.size="left"===o.resizeMode||"right"===o.resizeMode?o.offsetWidth:o.offsetHeight,a.removeChild(t),0!==a.items.length||n.id||i.contains(a)||a.parentElement.removeChild(a),n.tabCloseButtons=a.tabCloseButtons,n.dropPosition=a.dropPosition,n.disableDrag=n.disableDrag}return n||(n=document.createElement("smart-tabs-window")),i.hasAnimation||(n.animation="none"),n.min=30,n.opened=n.pinned=n.autoHide=!0,n.style.maxWidth=n.style.maxHeight="",n._originalTabPosition=a._originalTabPosition||void 0,n._originalTextOrientation=a._originalTextOrientation||void 0,delete a._originalTabPosition,delete a._originalTextOrientation,n.label=t.label,n.appendChild(t),t=a,{tabsWindow:t,newTabsWindow:n}}_dockEventHandler(t){const i=this;let a=t.target;a._tabsWindow&&(a=a._tabsWindow),a.autoHide?i._dock(a.items[a.selectedIndex]):i._autoHide(a,i._items.indexOf(a)<(i._items.length-1)/2)}_documentDownHandler(t){const i=this;let a;if(a=t.originalEvent.target.closest(".smart-window"),i.$.autoHideWindow._tabsWindow&&(!a||a!==i.$.autoHideWindow&&a!==i.$.autoHideWindow._tabsWindow)&&(i.$.autoHideWindow._tabsWindow.selectedIndex=null),i._dragDetails)return void i._cancelDragOperation();if(!(!(a instanceof Smart.TabsWindow)||i.disableDragging||i.disabled)&&!(i._dragDetails||a.maximized||a.minimized||!Smart.Utilities.Core.isMobile&&1!==t.which||a._dragDetails&&"resize"===a._dragDetails.type&&a._dragDetails.started)){if(i._dragDetails={},a=t.originalEvent.target.closest(".smart-header-section")||t.originalEvent.target.closest(".smart-tab-label-container"),a&&"simple"===i.snapMode&&a.classList.contains("smart-header-section")&&(a=void 0),i._dragDetails.windowFeedback=i.$.tabsWindowFeedback,a){if(i._dragDetails.selectedTabsWindow=a.closest("smart-tabs-window"),i._dragDetails.selectedItem=i._dragDetails.selectedTabsWindow===i.$.autoHideWindow?i.$.autoHideWindow._tabsWindow.closest("smart-splitter-item"):a.closest("smart-splitter-item"),!i._dragDetails.selectedTabsWindow||i._dragDetails.selectedTabsWindow.disableDrag||i._dragDetails.selectedTabsWindow.layout!==i)return void(i._dragDetails=void 0);if(i._dragDetails.offset={x:0,y:0},i._dragDetails.selectedTabLabel=a,i._dragDetails.x=t.pageX,i._dragDetails.y=t.pageY,i._dragDetails.selectedTabLabel.$.hasClass("smart-header-section")){if(!i._dragDetails.selectedItem&&i._dragDetails.selectedTabsWindow.pinned)return void(i._dragDetails=void 0);i._dragDetails.windowFeedback=i._dragDetails.selectedTabsWindow;const n=a.getBoundingClientRect();i._dragDetails.offset.x=t.clientX-n.left,i._dragDetails.offset.y=t.clientY-n.top}else{if(i._dragDetails.selectedTabLabel.tab.disableDrag)return void(i._dragDetails=void 0);1===i._dragDetails.selectedTabsWindow.items.length&&(i._dragDetails.windowFeedback=i._dragDetails.selectedTabsWindow)}}i._items.map(t=>t.removeAttribute("ontop")),i._dragDetails.windowFeedback!==i.$.autoHideWindow&&i._dragDetails.windowFeedback.setAttribute("ontop","")}}_documentMoveHandler(t){var i=Math.abs;const a=this,n=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset):t.originalEvent.target;if(!a.disabled&&a._dragDetails&&(!a._dragDetails||a._dragDetails.selectedTabsWindow)&&n&&!(5>=i(t.pageX-a._dragDetails.x)&&5>=i(t.pageY-a._dragDetails.y))){const i=document.scrollingElement||document.documentElement,o=i.scrollLeft,l=i.scrollTop,r=a._dragDetails.selectedTabsWindow;if(a._dragDetails.isInsideTheLayout=n.closest&&n.closest("smart-docking-layout")===a,a._dragDetails.started=!0,a._dragDetails.windowFeedback===a.$.autoHideWindow){const t=a._dragDetails.selectedTabsWindow.getBoundingClientRect();let i;1===a.$.autoHideWindow._tabsWindow.items.length?i=a.$.autoHideWindow._tabsWindow:(i=document.createElement("smart-tabs-window"),i.min=30,i.layout=a),i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.left=t.left+"px",i.style.top=t.top+"px",i.setAttribute("ontop",""),a._dragDetails.windowFeedback=i,a.$.autoHideWindow.$.addClass("no-transition"),a.$.autoHideWindow.close(),a.$.autoHideWindow.$.removeClass("no-transition")}if(a._setDragDetailsOnMove(n),a.$.autoHideWindow.close(),!a._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback"))a._handleWindowOnDrag();else if(a._dragDetails._parentInfo||(a._dragDetails._parentInfo={closestItem:r,position:a._originalTabIndex||a._dragDetails.selectedTabLabel.tab.index},a._originalTabIndex=void 0),a._dragDetails.windowFeedback.parentElement!==document.body&&document.body.appendChild(a._dragDetails.windowFeedback),a._dragDetails.selectedItem){const t=a._dragDetails.selectedItem.closest("smart-splitter");!a._dragDetails.windowFeedback.size&&t&&(a._dragDetails.windowFeedback.size=a._dragDetails.selectedTabsWindow[t._measurements.size])}a._dragDetails.selectedTabLabel.classList.contains("smart-header-section")||a._dragDetails.windowFeedback.setAttribute("tabs-window-dragged",""),(a._dragDetails.windowFeedback.hasAttribute("tabs-window-dragged")||a._dragDetails.selectedTabsWindow===a.$.autoHideWindow||a._dragDetails._parentInfo&&"string"==typeof a._dragDetails._parentInfo.position)&&(a._dragDetails.windowFeedback.style.left=t.pageX-a._dragDetails.offset.x+"px",a._dragDetails.windowFeedback.style.top=t.pageY-a._dragDetails.offset.y+"px",a._setWindowFeedbackSize()),a._dragDetails.windowFeedback.opened=!0,document.activeElement!==a&&(a.focus(),window.scrollTo(o,l));const s=a._dragDetails.hoveredTabsWindow?n.closest(".smart-tabs-header-section"):void 0;a._dragDetails.hoveredTabArea=s?s:a._dragDetails.hoveredTabsWindow&&n.closest(".smart-tabs-content-section")?a._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection:a._dragDetails.hoveredTabsWindow,a._setSnappingMarkers(t,s)}}_setDragDetailsOnMove(t){const i=this;if(!i.hasAttribute("dragged")){i._originalBodyOverflow={overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY,overflow:document.body.style.overflow};const t=(document.scrollingElement||document.documentElement).scrollHeight>document.documentElement.clientHeight,a=(document.scrollingElement||document.documentElement).scrollWidth>document.documentElement.clientWidth;let n=i._dragDetails.selectedTabsWindow;if(document.body.style.overflow=document.body.style.overflowX=document.body.style.overflowY="",t&&!a?document.body.style.overflowX="hidden":a&&!t?document.body.style.overflowY="hidden":!a&&!t&&(document.body.style.overflow="hidden"),i._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")||n===i.$.autoHideWindow){const t=i._dragDetails.selectedTabLabel.tab||i.$.autoHideWindow._tab;let a=i.$.tabsWindowFeedback;n===i.$.autoHideWindow&&(n=i.$.autoHideWindow._tabsWindow,a=i._dragDetails.windowFeedback,a.label=t.label),t.parentElement&&n.removeChild(t),i._originalTabIndex=t.index,a.appendChild(t);const o=i._dragDetails.selectedTabsWindow;if(o===i.$.autoHideWindow)1<o._tabsWindow.items.length&&(a.tabPosition=o.tabPosition,a.tabTextOrientation=o._originalTextOrientation||o.tabTextOrientation);else{const t=o.autoHide;a.tabPosition=o._originalTabPosition||(t?"top":o.tabPosition),a.tabTextOrientation=o._originalTextOrientation||(t?"horizontal":o.tabTextOrientation)}if(t._autoHideWindowSize)a.size=t._autoHideWindowSize;else if(n.autoHide){const t="offset"+("top"===n.tabPosition||"bottom"===n.tabPosition?"Height":"Width");a.size=(n._autoHideWindow||n)[t]}}i._dragDetails.selectedTabsWindow.closest("smart-docking-layout")||i._dragDetails.windowFeedback._originalPinnedState||(i._dragDetails.windowFeedback._originalPinnedState=i._dragDetails.windowFeedback.pinned),i._dragDetails.windowFeedback.pinned=!1,i.setAttribute("dragged","")}if(i._dragDetails.hoveredItem=t.closest("smart-splitter-item"),i._dragDetails.hoveredItem){const t=i._dragDetails.hoveredItem.closest("smart-docking-layout");t&&t===i?i._dragDetails.hoveredTabsWindow=i._dragDetails.hoveredItem.getElementsByTagName("smart-tabs-window")[0]:i._dragDetails.hoveredItem=i._dragDetails.hoveredTabsWindow=void 0}else i._dragDetails.hoveredTabsWindow=t.closest("smart-tabs-window");if(i._dragDetails.hoveredTabsWindow){const t=i._dragDetails.hoveredTabsWindow.closest("smart-docking-layout");t&&t!==i?i._dragDetails.hoveredTabsWindow=void 0:i._dragDetails.hoveredTabsWindow.bringToFront()}}_documentDragStartHandler(t){const i=this;i._dragDetails&&t.preventDefault()}_documentSelectStartHandler(t){const i=this;i._dragDetails&&i._dragDetails.started&&t.preventDefault()}_documentUpHandler(t){const a=this,i=(t.originalEvent||t).target;if(!a._dragDetails||a._dragDetails&&!a._dragDetails.started||a.disabled)return void delete a._dragDetails;a._noStateChangeFiring=!0,a.removeAttribute("dragged"),a._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),a._dragDetails.windowFeedback.removeAttribute("ontop");let n=i.closest&&i.closest("smart-docking-layout");t.ctrlKey&&(a._snapFeedback._position=n=void 0);const o=a._snapFeedback?a._snapFeedback._position:void 0;if(!n&&!o||n&&!a._dragDetails.hoveredTabArea&&!o)a._dropWindowOutsideLayout(t,o,n);else if(a._dragDetails.hoveredTabsWindow&&o){if(a._dragDetails.hoveredTabArea&&a._dragDetails.hoveredTabArea.classList.contains("smart-tabs-header-section")){let t=a._dragDetails.hoveredTabsWindow.itemLabels.length,n=i.closest(".smart-tab-label-container"),o;n||(n=a._dragDetails.hoveredTabsWindow.itemLabels[t-1],o=!0);let l=a._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&a._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")?[a._dragDetails.selectedTabLabel.tab]:[].slice.call(a._dragDetails.windowFeedback.items);let r;if(a._dragDetails.hoveredTabsWindow.autoHide){const t=a._dragDetails.hoveredTabsWindow.tabPosition;r=a._dragDetails.windowFeedback["offset"+("top"===t||"bottom"===t?"Height":"Width")]}for(let s=0;s<l.length;s++)l[s]._autoHideWindowSize=r||a._dragDetails.windowFeedback.size,a._dragDetails.windowFeedback.removeChild(l[s]),a._dragDetails.hoveredTabsWindow.insert(o?t:n.tab.index,{node:l[s]}),t=a._dragDetails.hoveredTabsWindow.items.length;a._dragDetails.targetWindow=a._dragDetails.hoveredTabsWindow}else a._dragDetails.targetWindow=a._handleItemNesting(),a._eventAlreadyFired=!0;a.$.autoHideWindow.close(),a._noStateChangeFiring=!1}a._endDrag()}_dropWindowOutsideLayout(t,i,a){const n=this;let o;if(n._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback")){let i=document.createElement("smart-tabs-window");n.hasAnimation||(i.animation="none"),i.opened=!0,i.label=n._dragDetails.selectedTabLabel.tab.label,n._dragDetails.windowFeedback.removeChild(n._dragDetails.selectedTabLabel.tab),n._dragDetails.selectedTabLabel.tab.$.removeClass("smart-visibility-hidden"),i.appendChild(n._dragDetails.selectedTabLabel.tab),i.style.left=t.pageX+"px",i.style.top=t.pageY+"px",i.style.maxWidth=i.style.maxHeight="",i.resizeMode=n._dragDetails.selectedTabsWindow.resizeMode,i.tabTextOrientation=n._dragDetails.windowFeedback.tabTextOrientation,i.tabPosition=n._dragDetails.windowFeedback.tabPosition,i.min=30,i.style.width=n._dragDetails.windowFeedback.style.width,i.style.height=n._dragDetails.windowFeedback.style.height,document.body.appendChild(i),i.pinned=i.autoHide=i.allowToggle=!1,n._noStateChangeFiring=!1,o=i}else n._dragDetails._parentInfo&&n._dragDetails._parentInfo.closestItem?(n._dragDetails.windowFeedback.parentElement!==document.body&&(n._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(n._dragDetails.windowFeedback)),n._dragDetails.windowFeedback.style.maxWidth=n._dragDetails.windowFeedback.style.maxHeight="",n._dragDetails.windowFeedback.pinned=n._dragDetails.windowFeedback.allowToggle=n._dragDetails.windowFeedback.autoHide=!1,n._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&(n._dragDetails.windowFeedback.label=n._dragDetails.selectedTabLabel.tab.label)):!i&&!(n._dragDetails.selectedItem instanceof Smart.SplitterItem)&&n._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&n._returnItemToOrigin(n._dragDetails.windowFeedback),o=n._dragDetails.windowFeedback,o.locked=!1,n._dragDetails.selectedItem&&(n._noStateChangeFiring=!1);n.$.autoHideWindow.close(),a||(n._dragDetails.windowFeedback.pinned=!1),n._validateWindowPosition(o),n._dragDetails._parentInfo&&(o._parentInfo={closestItem:n._dragDetails._parentInfo.closestItem,position:n._dragDetails._parentInfo.position}),o.layout=n,n._dragDetails.targetWindow=o,o.resizeMode="both",n._setFloatingItemsHeaderButtons(o)}_endDrag(){const t=this,i=t._dragDetails.windowFeedback;return t.$.tabsWindowFeedback.close(),0===i.$.tabsElement._tabs.length&&i.parentElement&&!i.$.hasClass("smart-tabs-window-feedback")&&i.parentElement.removeChild(i),t.contains(t._dragDetails.windowFeedback)||void 0===t._dragDetails.windowFeedback._originalPinnedState||(t._dragDetails.windowFeedback.pinned=t._dragDetails.windowFeedback._originalPinnedState,delete t._dragDetails.windowFeedback._originalPinnedState),t._originalBodyOverflow&&(document.body.style.overflow=t._originalBodyOverflow.overflow,document.body.style.eoverflowX=t._originalBodyOverflow.overflowX,document.body.style.overflowY=t._originalBodyOverflow.overflowY,delete t._originalBodyOverflow),t._dragDetails.targetWindow?(t._dragDetails.targetWindow.focus(),t._dragDetails.selectedTabsWindow.removeAttribute("active")):t._dragDetails.windowFeedback.bringToFront(),t._dragDetails.started=!1,t._dragDetails.hoveredItem=t._dragDetails.hoveredTabsWindow=t._dragDetails.isInsideTheLayout=void 0,i.removeAttribute("dragged"),t._handleSnapping(),delete t._dragDetails.selectedTabsWindow._ownerLayout,0===i.items.length&&(t.contains(i)&&(i.opened=!1),i.$.hasClass("smart-tabs-window-feedback")&&t.$.container.appendChild(i)),t._eventAlreadyFired||t._noStateChangeFiring||(t._handleAutoSave(),t.$.fireEvent("stateChange")),t._noStateChangeFiring=t._eventAlreadyFired=void 0,t._dragDetails._parentInfo&&t._dragDetails._parentInfo.closestItem&&t._removeUnneccessaryItems(t._dragDetails._parentInfo.closestItem.closest("smart-splitter")),i.closest("smart-docking-layout")?(i.style.top=i.style.left="",void delete t._dragDetails):void(i.top&&(i.style.top=i.top),i.left&&(i.style.left=i.left),i._cancelDragging(),delete t._dragDetails)}_getTabItemContent(t){const i=t.isCompleted?t.$.content:t,a=document.createDocumentFragment();for(;i.firstChild;)a.appendChild(i.firstChild);return a}_getHeaderLabelDimensions(){var t=Math.min,i=Math.max;const a=this;if(!a._dragDetails||!a._dragDetails.hoveredTabsWindow)return;const n=a._dragDetails.hoveredTabsWindow.$.tabsElement,o="left"===n.tabPosition||"right"===n.tabPosition;let l=0,r=0,s,d;if(a._dragDetails.hoveredTabArea)s=a._dragDetails.hoveredTabArea.offsetWidth,d=a._dragDetails.hoveredTabArea.offsetHeight,l=a._dragDetails.hoveredTabArea.offsetLeft,r=a._dragDetails.hoveredTabArea.offsetTop;else if(0<n.$.tabStrip.children.length){const t=n.$.tabStrip.children[n.$.tabStrip.children.length-1];l=t.offsetLeft+(o?0:t.offsetWidth),r=t.offsetTop+(o?t.offsetHeight:0),s=t.offsetWidth,d=t.offsetHeight}a._dragDetails.hoveredTabArea=n.$.tabsHeaderSection;let m=0,c=0;"horizontal"===n.tabTextOrientation?m=n.$.scrollButtonNear.offsetWidth:c=n.$.scrollButtonNear.offsetHeight;const u=a._dragDetails.hoveredTabArea.getBoundingClientRect(),p=a._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabStrip,g=p.getBoundingClientRect(),h=g.left-u.left+u.left+l-p.scrollLeft-m,_=g.top-u.top+u.top+r-p.scrollTop-c,f=t(l-p.scrollLeft-m,0),b=t(r-p.scrollTop-c,0);return{width:t(g.width,i(0,s+f),i(0,g.left+g.width-h)),height:t(g.height,i(0,d+b),i(0,g.top+g.height-_)),top:_+window.pageYOffset-b,left:h+window.pageXOffset-f}}_handleAutoSave(){const t=this;t.autoSaveState&&t.saveState()}_handleAutoHiddenSplitterBars(){const t=this,a=t.$.itemsContainer.querySelectorAll(".auto-hide-left,.auto-hide-right, .auto-hide-top, .auto-hide-bottom");for(let t=0;t<a.length;t++)a[t].previousElementSibling instanceof Smart.SplitterBar?a[t].previousElementSibling.hide():a[t].nextElementSibling instanceof Smart.SplitterBar&&a[t].nextElementSibling.hide()}_handleItemPositionInserting(t,i,a){const n=this;t.autoHide||-1<a.indexOf("layout")?n._handleLayoutItemInserting(i,t,a):-1<a.indexOf("outside-")?n._handleOutsideItemInserting(i,t,a):(-1<a.indexOf("inside-")?n._handleInsideItemInserting(i,t,a):n._handleNormalItemInserting(i,t,a),n._handleAutoSave(),n.$.fireEvent("stateChange"),n._setSplitterBarVisibility())}_handleInsideItemInserting(t,i,a){var n=Math.min;const o=this,l=document.createElement("smart-splitter-item"),r=document.createElement("smart-splitter-item");let s=t.closest("smart-splitter-item"),d=t.closest("smart-splitter"),m=o._items.indexOf(t),c;c=d&&1===d._items.length?d:document.createElement("smart-splitter"),c.autoFitMode="proportional",c.liveResize=o.liveResize,c.resizeStep=o.resizeStep,i.windowParent=null,l.appendChild(i),t.windowParent=null,a=a.replace("inside-",""),c.orientation="top"===a||"bottom"===a?"horizontal":"vertical";const u=s["horizontal"===c.orientation?"offsetHeight":"offsetWidth"]/2;if(c.parentElement?c.insertBefore(l,"top"===a||"left"===a?s:null):(r.appendChild(t),t.min&&(r.min=t.min),"top"===a||"left"===a?(c.appendChild(l),c.appendChild(r)):(c.appendChild(r),c.appendChild(l)),s.appendChild(c)),i.size){const t="string"==typeof i.size&&-1<i.size.indexOf("%");l.size=t?i.size:n(u,parseFloat(i.size))}l.max=i.max||"",l.min=i.min?i.min:30,l.locked=i.locked||!1,l.collapsible=i.collapsible||!1,l.collapsed=i.collapsed||!1,("bottom"===a||"right"===a)&&(m=n(m+1,o._items.length)),i.pinned=!0,i.autoHide=i.allowToggle=i.maximized=i.minimized=i.collapsed=!1,i._originalTabPosition?(i.tabPosition=i._originalTabPosition,delete i._originalTabPosition):i.tabPosition="top",i._originalTextOrientation?(i.tabTextOrientation=i._originalTextOrientation,delete i._originalTextOrientation):i.tabTextOrientation="horizontal",o._items.splice(m,0,i),o._handleAutoHiddenSplitterBars()}_handleLayoutItemInserting(t,i,a){const n=this,o=document.createElement("smart-splitter-item"),l="bottom"===a||"top"===a?"offsetHeight":"offsetWidth";if(i.size||(i.size=i[l]),a=a.replace("layout-",""),o.size=i.size||"",o.max=i.max||"",o.min=i.min||"",o.locked=i.locked||!1,o.collapsible=i.collapsible||!1,o.collapsed=i.collapsed||!1,o.size&&!n._dockingAutoHideTabItem&&(o.size=Math.min(n[l]/2,parseFloat(i.size))),"horizontal"===n.$.itemsContainer.orientation&&("right"===a||"left"===a)||"vertical"===n.$.itemsContainer.orientation&&("top"===a||"bottom"===a)){let t=n.$.itemsContainer.orientation,l;const r=n.$.itemsContainer,s=[].slice.call(r._items),d=function(t,i){r.appendChild(t),r.insertBefore(i,"right"===a||"bottom"===a?null:t)};i.windowParent=null,o.appendChild(i),s.map(t=>t.size=t[r._measurements.size]);const m="right"===a||"bottom"===a;m?n._items.push(i):n._items.splice(0,0,i),r.removeAll(),r.orientation="top"===a||"bottom"===a?"horizontal":"vertical";const c=r[r._measurements.size]-o.size;if(1<s.length){const a=document.createElement("smart-splitter");a.autoFitMode="end",a.orientation=t,a.liveResize=n.liveResize,a.resizeStep=n.resizeStep,l=document.createElement("smart-splitter-item"),l.min=30,l.appendChild(a),l.size=c,d(l,o);for(let t=0;t<s.length;t++)a.appendChild(s[t]);a.autoFitMode="proportional"}else s[0].size=c,n._dockingAutoHideTabItem&&(r.autoFitMode="end"),d(s[0],o),r.autoFitMode="proportional";n._handleAutoHiddenSplitterBars(),n._handleAutoSave(),n.$.fireEvent("stateChange"),n._setSplitterBarVisibility()}else{const t=-1<a.indexOf("left")||-1<a.indexOf("top")?n._items.filter(t=>t.opened)[0]:void 0;return i.windowParent=null,o.appendChild(i),n.insertBefore(o,t,n.$.itemsContainer),!0}}_handleNormalItemInserting(t,i,a){let n=t.closest("smart-splitter-item");const o=this,l=t.closest("smart-splitter"),r=document.createElement("smart-splitter-item"),s="right"===a||"bottom"===a?l._items.indexOf(n)+1:l._items.indexOf(n);let d=o._items.indexOf(t);i.windowParent=null,r.appendChild(i),r.size=i.size||"",r.min=i.min||"",l.insert(s,r),("bottom"===a||"right"===a)&&(d=Math.min(d+1,o._items.length)),i.pinned=!0,i.locked=!1,i.autoHide=i.allowToggle=i.maximized=i.minimized=i.collapsed=!1,i._originalTabPosition?(i.tabPosition=i._originalTabPosition,delete o._originalTabPosition):i.tabPosition="top",i._originalTextOrientation?(i.tabTextOrientation=i._originalTextOrientation,delete i._originalTextOrientation):i.tabTextOrientation="horizontal",o._items.splice(d,0,i),o._handleAutoHiddenSplitterBars()}_handleOutsideItemInserting(t,i,a){const n=this,o=document.createElement("smart-splitter-item");let l=t.closest("smart-splitter");if(l||(l=n.$.itemsContainer),o.size=i.size||"",o.max=i.max||"",o.min=i.min||"",o.locked=i.locked||!1,o.collapsible=i.collapsible||!1,o.collapsed=i.collapsed||!1,l!==n.$.itemsContainer){let r=l.closest("smart-splitter-item");const s=document.createElement("smart-splitter"),d=document.createElement("smart-splitter-item");if(a=a.replace("outside-",""),s.autoFitMode="proportional",s.liveResize=n.liveResize,s.resizeStep=n.resizeStep,i.windowParent=null,o.appendChild(i),d.min=30,d.appendChild(l),s.orientation="top"===a||"bottom"===a?"horizontal":"vertical",r.appendChild(s),"right"===a||"bottom"===a?(s.appendChild(d),s.appendChild(o),n._items.splice(n._items.indexOf(t)+1,0,i)):(s.appendChild(o),s.appendChild(d),n._items.splice(n._items.indexOf(t),0,i)),!o.size)o.size=s[s._measurements.size]/2;else{const t=o.size;o.size="",o.size=t}n._handleAutoHiddenSplitterBars(),n._handleAutoSave(),n.$.fireEvent("stateChange"),n._setSplitterBarVisibility()}else return i.windowParent=null,o.appendChild(i),n.insertBefore(o,-1<a.indexOf("left")||-1<a.indexOf("top")?n._items[0]:void 0,n.$.itemsContainer),!0}_handleLayout(){const t=this;if(t._items=[],"string"==typeof t.layout&&(t.layout=JSON.parse(t.layout)),null!==t.layout&&Array.isArray(t.layout))return void t._createItemsFromArray(t.layout);const a=Array.from(t.$.itemsContainer.children);t.$.itemsContainer.innerHTML="";for(let n=0;n<a.length;n++){"Smart-TABS-WINDOW"!==a[n].tagName&&a[n].parentElement.removeChild(a[n]),a[n].layout=t;const i=document.createElement("smart-splitter-item");i.appendChild(a[n]),t.$.itemsContainer.appendChild(i),t._items.push(a[n])}}_handleSnapping(t){const i=this;"simple"===i.snapMode?i._handleSimpleSnapping(t):i._handleAdvancedSnapping()}_handleAdvancedSnapping(){const t=this;if(!t._dragDetails)return;if(t._snapFeedback&&!t._dragDetails.hoveredTabsWindow&&(t._snapFeedback._position=void 0,t._snapFeedback.areaHighlighter&&t._snapFeedback.areaHighlighter.parentElement&&t._snapFeedback.areaHighlighter.parentElement.removeChild(t._snapFeedback.areaHighlighter),t._snapFeedback.headerHighlighter&&t._snapFeedback.headerHighlighter.parentElement&&t._snapFeedback.headerHighlighter.parentElement.removeChild(t._snapFeedback.headerHighlighter),!t._dragDetails.hoveredItem)){if(t._snapFeedback.innerSnapElement&&t._snapFeedback.innerSnapElement.parentElement&&t._snapFeedback.innerSnapElement.parentElement.removeChild(t._snapFeedback.innerSnapElement),t._snapFeedback.outherSnapElement&&!t._dragDetails.isInsideTheLayout){const a=[].slice.call(t.$.container.children);for(let n=0;n<a.length;n++)-1<a[n].className.indexOf("smart-docking-layout-snap")&&t._snapFeedback.outherSnapElement.appendChild(a[n])}return}if(t._snapFeedback||(t._snapFeedback={innerSnapElement:document.createElement("div"),outherSnapElement:document.createElement("div"),areaHighlighter:document.createElement("div"),headerHighlighter:document.createElement("div")},t._snapFeedback.innerSnapElement.classList.add("smart-docking-layout-snap"),t._snapFeedback.areaHighlighter.classList.add("smart-docking-layout-snap-highlighter"),t._snapFeedback.headerHighlighter.classList.add("smart-docking-layout-snap-highlighter-header"),t._snapFeedback.innerSnapElement.innerHTML=`
                            <div>
                                <div class="top">
                                    <div><div></div></div>
                                </div>
                            </div>
                            <div>
                                <div class="left">
                                    <div><div></div></div>
                                </div>
                                <div class="center">
                                    <div><div></div></div>
                                </div>
                                <div class="right">
                                    <div><div></div></div>
                                </div>
                            </div>
                            <div>
                                <div class="bottom">
                                    <div><div></div></div>
                                </div>
                            </div>`,t._snapFeedback.outherSnapElement.innerHTML=`
                            <div class="smart-docking-layout-snap layout-top">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-left">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-right">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-bottom">
                                <div><div></div></div>
                            </div>`),t._snapFeedback.areaHighlighter.parentElement&&(t._snapFeedback.areaHighlighter.removeAttribute("position"),t._snapFeedback.areaHighlighter.classList.remove("smart-hidden")),t._snapFeedback.areaHighlighter.style.width="",t._snapFeedback.areaHighlighter.style.height="",t._snapFeedback._position=t._dragDetails.hoveredItem&&!(t._dragDetails.hoveredItem instanceof Smart.SplitterItem)?t._dragDetails.hoveredItem.className:"",t._dragDetails.hoveredItem&&-1<t._dragDetails.hoveredItem.className.indexOf("layout-")){t._snapFeedback._position=t._snapFeedback._position.replace("smart-docking-layout-snap ",""),t._snapFeedback.areaHighlighter.setAttribute("position",t._snapFeedback._position);const i=t._dragDetails.selectedTabsWindow;return void(-1<i.dropPosition.indexOf("all")||-1<i.dropPosition.indexOf(t._snapFeedback._position)?(t._dragDetails.hoveredItem.setAttribute("show",""),t.$.container.appendChild(t._snapFeedback.areaHighlighter),t._dragDetails.hoveredTabsWindow=!0,-1<["layout-left","layout-right"].indexOf(t._snapFeedback._position)?t._snapFeedback.areaHighlighter.style.width=t._dragDetails.windowFeedback.style.width||t._dragDetails.windowFeedback.offsetWidth+"px":-1<["layout-top","layout-bottom"].indexOf(t._snapFeedback._position)&&(t._snapFeedback.areaHighlighter.style.height=t._dragDetails.windowFeedback.style.height||t._dragDetails.windowFeedback.offsetHeight+"px")):(t._dragDetails.hoveredItem.removeAttribute("show"),t._snapFeedback._position=void 0))}let a=t._dragDetails.hoveredTabsWindow?t._dragDetails.hoveredTabsWindow.dropPosition:["all"];if(0===a.length&&(a=["all"]),t._dragDetails.hoveredTabsWindow instanceof Smart.TabsWindow&&t._dragDetails.hoveredTabArea&&t._dragDetails.hoveredTabArea.closest(".smart-tabs-header-section")&&(-1<a.indexOf("all")||-1<a.indexOf("header"))){t._dragDetails.hoveredTabArea=t._dragDetails.hoveredTabArea.classList.contains("smart-tab-label-container")?t._dragDetails.hoveredTabArea:void 0;const i=t._getHeaderLabelDimensions(),a=t._snapFeedback.headerHighlighter;a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.top=i.top+"px",a.style.left=i.left+"px",a.classList.remove("smart-hidden"),a.parentElement!==document.body&&document.body.appendChild(a),t._snapFeedback._position="header"}else t._snapFeedback.headerHighlighter.style.width=t._snapFeedback.headerHighlighter.style.height=0;const i=t._snapFeedback.innerSnapElement.closest("smart-splitter-item");if(t._dragDetails.hoveredItem instanceof Smart.SplitterItem){if(i&&t._dragDetails.hoveredItem!==i&&i.removeChild(t._snapFeedback.innerSnapElement),0>t._dragDetails.hoveredItem.className.indexOf("auto-hide")){const n=t._snapFeedback.innerSnapElement.querySelectorAll(".top, .bottom, .left, .right, .center");for(let t=0;t<n.length;t++)-1<a.indexOf(n[t].className)||0===a.indexOf("all")?n[t].setAttribute("show",""):n[t].removeAttribute("show");t._snapFeedback.innerSnapElement.classList.remove("smart-hidden"),t._dragDetails.hoveredItem.appendChild(t._snapFeedback.innerSnapElement)}const n=[].slice.call(t._snapFeedback.outherSnapElement.children),o=t._dragDetails.selectedTabsWindow;let l;for(let a=0;a<n.length;a++)l=n[a].className.replace("smart-docking-layout-snap ",""),n[a].classList.remove("smart-hidden"),-1<o.dropPosition.indexOf("all")||-1<o.dropPosition.indexOf(l)?n[a].setAttribute("show",""):n[a].removeAttribute("show"),t.$.container.appendChild(n[a])}if(!t._snapFeedback._position||0>a.indexOf("all")&&0>a.indexOf(t._snapFeedback._position))return void(t._snapFeedback._position=t._dragDetails.hoveredTabArea=void 0);if("center"===t._snapFeedback._position&&0<t._items.filter(t=>t.opened).length&&(t._dragDetails.hoveredTabArea=t._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabsHeaderSection),-1<["left","right"].indexOf(t._snapFeedback._position)?t._snapFeedback.areaHighlighter.style.width=t._dragDetails.windowFeedback.style.width||t._dragDetails.windowFeedback.offsetWidth+"px":-1<["top","bottom"].indexOf(t._snapFeedback._position)&&(t._snapFeedback.areaHighlighter.style.height=t._dragDetails.windowFeedback.style.height||t._dragDetails.windowFeedback.offsetHeight+"px"),t._snapFeedback.areaHighlighter.setAttribute("position",t._snapFeedback._position),"header"===t._snapFeedback._position)t._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection.appendChild(t._snapFeedback.areaHighlighter);else{const i=t._dragDetails.hoveredTabsWindow.closest("smart-splitter").orientation;(("left"===t._snapFeedback._position||"right"===t._snapFeedback._position)&&"horizontal"===i||("top"===t._snapFeedback._position||"bottom"===t._snapFeedback._position)&&"vertical"===i)&&(t._snapFeedback._position="inside-"+t._snapFeedback._position),t._dragDetails.hoveredItem.closest("smart-splitter-item").appendChild(t._snapFeedback.areaHighlighter)}}_handleSimpleSnapping(t){var i=Math.min;const a=this;if(!t)return a._dragDetails&&(a._dragDetails.hoveredTabsWindow=a._dragDetails.hoveredTabArea=void 0),void(a._snapFeedback&&(a._snapFeedback._position=void 0,a._snapFeedback.parentElement&&a._snapFeedback.classList.add("smart-visibility-hidden")));a._snapFeedback||(a._snapFeedback=document.createElement("div"),a._snapFeedback.addEventListener("transitionend",function(){a._snapFeedback.classList.contains("smart-visibility-hidden")&&a._snapFeedback.parentElement&&a._snapFeedback.parentElement.removeChild(a._snapFeedback)}));for(let n=0;n<a._snapFeedback.classList.length;n++)-1<a._snapFeedback.classList[n].indexOf("smart-docking-snap-")&&a._snapFeedback.classList.remove(a._snapFeedback.classList[n]);a._snapFeedback._position=t,t=t.replace("inside-",""),a._snapFeedback.classList.add("smart-docking-snap-"+t+"-feedback"),a._snapFeedback.classList.remove("smart-visibility-hidden");let n=0===t.indexOf("layout")?a._dragDetails.selectedTabsWindow.dropPosition:a._dragDetails.hoveredTabsWindow.dropPosition;0===n.length&&(n=["all"]),-1<n.indexOf("all")||-1<n.indexOf(t)?a._snapFeedback.removeAttribute("disabled"):(a._snapFeedback.setAttribute("disabled",""),a._snapFeedback._position=void 0);let o,l,r,s,d;const m=a.getBoundingClientRect(),c=getComputedStyle(a._dragDetails.hoveredTabsWindow.$.contentSection),u=parseFloat(c.getPropertyValue("padding-left")||0),p=parseFloat(c.getPropertyValue("padding-right")||0),g=parseFloat(c.getPropertyValue("padding-top")||0),h=parseFloat(c.getPropertyValue("padding-bottom")||0),_=a.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],f=a.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0];switch(a._snapFeedback.style.display="",t){case"header":{const t=a._getHeaderLabelDimensions();o=t.width,l=t.height,r=t.top,s=t.left,o&&l||(a._snapFeedback.style.display="none");break}case"left":case"right":d=a._dragDetails.hoveredTabArea.getBoundingClientRect(),l=a._dragDetails.hoveredTabArea.offsetHeight,o=a._dragDetails.hoveredTabArea.offsetWidth/2,r=d.top+window.pageYOffset,s=d.left+("right"===t?a._dragDetails.hoveredTabArea.offsetWidth/2:0)+window.pageXOffset;break;case"top":case"bottom":d=a._dragDetails.hoveredTabArea.getBoundingClientRect(),l=a._dragDetails.hoveredTabArea.offsetHeight/2,o=a._dragDetails.hoveredTabArea.offsetWidth,r=d.top+window.pageYOffset+("bottom"===t?a._dragDetails.hoveredTabArea.offsetHeight/2:0),s=d.left+window.pageXOffset;break;case"layout-left":case"layout-right":{a._snapFeedback.parentElement&&void 0===a._snapFeedback.maxWidth&&(a._snapFeedback.maxWidth=parseFloat(getComputedStyle(a._snapFeedback).getPropertyValue("max-width"))||0),o=.07*a.$.itemsContainer.offsetWidth-(u+p),a._snapFeedback.maxWidth&&(o=i(a._snapFeedback.maxWidth,o)),l=a.$.itemsContainer.offsetHeight-(g+h),r=m.top+window.pageYOffset+g+(f?f.offsetHeight:0),s=m.left+window.pageXOffset+("layout-left"===t?u:0)+(_?_.offsetWidth:0)+("layout-right"===t?a.$.itemsContainer.offsetWidth-o-p:0);break}case"layout-top":case"layout-bottom":a._snapFeedback.parentElement&&void 0===a._snapFeedback.maxHeight&&(a._snapFeedback.maxHeight=parseFloat(getComputedStyle(a._snapFeedback).getPropertyValue("max-height"))||0),l=.07*a.$.itemsContainer.offsetHeight-(g+h),a._snapFeedback.maxHeight&&(l=i(a._snapFeedback.maxHeight,l)),o=a.$.itemsContainer.offsetWidth-(u+p),r=m.top+window.pageYOffset+(f?f.offsetHeight:0)+("layout-bottom"===t?a.$.itemsContainer.offsetHeight-l+g:g),s=m.left+window.pageXOffset+u+(_?_.offsetWidth:0);}a._snapFeedback.style.height=l+"px",a._snapFeedback.style.width=o+"px",a._snapFeedback.style.left=s+"px",a._snapFeedback.style.top=r+"px",a._snapFeedback._position||(a._dragDetails.hoveredTabArea=void 0),a._snapFeedback.parentElement||document.body.appendChild(a._snapFeedback)}_handleItemNesting(){const t=this;let i=t._dragDetails.windowFeedback;if(i.classList.contains("smart-tabs-window-feedback")){let a=document.createElement("smart-tabs-window");a.min=30,a.opened=a.pinned=!0,a.headerPosition=t._dragDetails.selectedTabsWindow.headerPosition,t._dragDetails.selectedTabsWindow.autoHide?(a.tabTextOrientation=t._dragDetails.selectedTabsWindow._originalTextOrientation||"horizontal",a.tabPosition=t._dragDetails.selectedTabsWindow._originalTabPosition||"top"):(a.tabPosition=t._dragDetails.selectedTabsWindow.tabPosition,a.tabTextOrientation=t._dragDetails.selectedTabsWindow.tabTextOrientation),t.hasAnimation||(a.animation="none"),a.size=-1<t._snapFeedback._position.indexOf("top")||-1<t._snapFeedback._position.indexOf("bottom")?parseFloat(i.style.height)||i.offsetHeight:parseFloat(i.style.width)||i.offsetWidth,a.label=t._dragDetails.selectedTabLabel.tab.label,a.id="",t._dragDetails.windowFeedback.removeChild(t._dragDetails.selectedTabLabel.tab),a.appendChild(t._dragDetails.selectedTabLabel.tab),a.style.left=a.style.top="",i=a}else{const a=i.context;i.context=i,i.windowParent=null,i.context=a,i.size=-1<t._snapFeedback._position.indexOf("top")||-1<t._snapFeedback._position.indexOf("bottom")?parseFloat(i.style.height)||i.offsetHeight:parseFloat(i.style.width)||i.offsetWidth,i.style.top=i.style.left=i.style.width=i.style.height="",i.pinned=!0}return t._insert(t._items.indexOf(t._dragDetails.hoveredTabsWindow),i,t._snapFeedback._position),i}_handleWindowOnDrag(){const t=this;if(t._dragDetails.windowFeedback.hasAttribute("dragged"))return;let i=t._dragDetails.selectedItem,a=t._dragDetails.selectedTabsWindow,n=a.closest("smart-splitter");if(t._setWindowFeedbackSize(),a===t.$.autoHideWindow&&!t._dragDetails._parentInfo)t._dragDetails._parentInfo={},1<a._tabsWindow.items.length?(t._dragDetails._parentInfo.closestItem=a._tabsWindow,t._dragDetails._parentInfo.position=t.$.autoHideWindow._tab.index):(t._dragDetails._parentInfo.closestItem=t.$.itemsContainer,t._dragDetails._parentInfo.position=a._tabsWindow.tabPosition,t._dragDetails.windowFeedback.headerButtons=t.$.autoHideWindow._tabsWindow.headerButtons,t.undock(t._dragDetails.windowFeedback)),t._originalTabIndex=void 0;else{if(n&&n!==t.$.itemsContainer&&1===n._items.length)for(;1===n._items.length&&n!==t.$.itemsContainer;)n=n.parentElement.closest("smart-splitter"),i=i.parentElement.closest("smart-splitter-item");if(!t._dragDetails._parentInfo)if(t._dragDetails._parentInfo={},a.closest("smart-docking-layout")!==t)t._dragDetails._parentInfo.position={top:a.offsetTop,left:a.offsetLeft};else if(a.autoHide)t._dragDetails._parentInfo.closestItem=t.$.itemsContainer,t._dragDetails._parentInfo.position=a.tabPosition,a._originalTabPosition&&(a.tabPosition=a._originalTabPosition),a._originalTextOrientation&&(a.tabTextOrientation=a._originalTextOrientation);else{const a=n._items.indexOf(i),o=n._items.length;1===o?(t._dragDetails._parentInfo.position="horizontal"===n.orientation?"top":"left",t._dragDetails._parentInfo.closestItem=void 0):(0===a?(t._dragDetails._parentInfo.position="horizontal"===n.orientation?"top":"left",t._dragDetails._parentInfo.closestItem=n._items[a+1].getElementsByTagName("smart-tabs-window")[0]):(t._dragDetails._parentInfo.position="horizontal"===n.orientation?"bottom":"right",t._dragDetails._parentInfo.closestItem=n._items[a-1].getElementsByTagName("smart-tabs-window")[0]),t._dragDetails._parentInfo.closestItemSize=t._dragDetails._parentInfo.closestItem[n._measurements.size],n===t._dragDetails._parentInfo.closestItem.closest("smart-splitter")?2===n._items.length&&(t._dragDetails._parentInfo.position="inside-"+t._dragDetails._parentInfo.position):n===t.$.itemsContainer?t._dragDetails._parentInfo.position="layout-"+t._dragDetails._parentInfo.position:t._dragDetails._parentInfo.position="outside-"+t._dragDetails._parentInfo.position)}}if(n)t._dragDetails.windowFeedback.size=t._dragDetails.windowFeedback[n._measurements.size];else if(a===t.$.autoHideWindow){const i=t.$.autoHideWindow._tabsWindow.tabPosition;t._dragDetails.windowFeedback.size=t.$.autoHideWindow["offset"+("top"===i||"bottom"===i?"Height":"Width")]}t._dragDetails.windowFeedback.setAttribute("dragged",""),t._dragDetails.windowFeedback.parentElement!==document.body&&(t._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(t._dragDetails.windowFeedback)),t._dragDetails.windowFeedback.autoHide=!1,t._dragDetails.windowFeedback.allowToggle=!1,"advanced"!==t.snapMode&&"none"===t._dragDetails.windowFeedback.tabPosition&&(t._dragDetails.windowFeedback.tabPosition="top");const o=t._items.indexOf(t._dragDetails.windowFeedback);-1<o&&t._items.splice(o,1),i&&i.parentElement&&(0===t._items.filter(t=>t.opened).length&&!t.$.placeholderItem.parentElement&&(-1<t.$.itemsContainer._items[0].className.indexOf("auto-hide")?t.$.itemsContainer.insert(1,t.$.placeholderItem):t.$.itemsContainer.insert(0,t.$.placeholderItem)),n?(n.removeChild(i),t._dragDetails.initialSplitterOrientation="horizontal"===n.orientation,t._removeUnneccessaryItems(n)):a===t.$.autoHideWindow&&0===t.$.autoHideWindow._tabsWindow.items.length&&t.$.autoHideWindow._tabsWindow.closest("smart-splitter").removeChild(i),t._setAutoHidePaddings())}_setWindowFeedbackSize(){const t=this,i=t._dragDetails.selectedTabsWindow;if(!t._dragDetails._isWindowFeedbackSizeSet){let a,n;i.autoHide&&i._autoHideWindow?"top"===i.tabPosition||"bottom"===i.tabPosition?(a=i.offsetWidth+"px",n=i._autoHideWindow.offsetHeight+"px"):(a=i._autoHideWindow.offsetWidth+"px",n=i.offsetHeight+"px"):(a=i.style.width||i.offsetWidth+"px",n=i.style.height||i.offsetHeight+"px"),t._dragDetails.windowFeedback.style.width=a,t._dragDetails.windowFeedback.style.height=n,t._dragDetails._isWindowFeedbackSizeSet=!0}}_insert(t,i,a){const n=this;if("number"!=typeof t)return void n.error(n.localize("invalidIndex",{elementType:n.nodeName.toLowerCase(),method:arguments[3]||"insert"}));if("object"==typeof i&&!(i instanceof HTMLElement))i=n._createTabsWindowFromObject(i);else if("string"==typeof i)i=document.getElementById(i);else if(i instanceof Smart.TabItem){const t=i.closest("smart-tabs-window");if(t&&t.autoHide)return void n._dock(t,a);i=n._createTabsWindowFromObject({label:i.label,items:[{label:i.label,content:i.content}]})}if(!i||!(i instanceof Smart.TabsWindow))return void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:arguments[3]||"insert"}));if(n.contains(i)&&i.autoHide)return void n._dock(i,a);if(a&&-1<a.indexOf("layout")){const i=n._items.filter(t=>t.opened);t=0<i?-1<a.indexOf("left")||-1<a.indexOf("top")?0:i[i.length-1]:0}let o=n._items[t];n._items[t]&&!n._items[t].opened&&(o=n._items.filter(t=>t.opened)[0]),0===n._items.length&&(n.$.itemsContainer.orientation=-1<a.indexOf("left")||-1<a.indexOf("right")?"vertical":"horizontal"),i.style.top=i.style.left="",i.style.width=i.style.height="",i.opened=!0,i.pinned=!0;const l=i.closest("smart-splitter-item");if(!o)return n.insertBefore(i,o||null),void(l&&l.closest("smart-splitter").removeChild(l));if(delete i._parentInfo,i.autoHide&&(n.$.verticalHiddenItemsContainer.contains(i)?n.$.verticalHiddenItemsContainer.removeChild(i.closest("smart-splitter-item")):n.$.horizontalHiddenItemsContainer.contains(i)&&n.$.horizontalHiddenItemsContainer.removeChild(i.closest("smart-splitter-item"))),a?n._handleItemPositionInserting(i,o,a):n.insertBefore(i,o||null),l&&l.closest("smart-splitter").removeChild(l),i.autoHide)n._autoHide(i,a);else{const t=document.scrollingElement||document.documentElement,a=t.scrollLeft,n=t.scrollTop;i.focus(),window.scrollTo(a,n)}0<n._items.filter(t=>t.opened).length&&n.$.placeholderItem.parentElement&&n.$.itemsContainer.removeChild(n.$.placeholderItem),i.layout=n,i.resizeMode="none",i.minimized=!1,i.maximized=!1,n._setDockedItemsHeaderButtons(i)}_itemsContainerCloseHandler(t){const i=this;if(t.target instanceof Smart.Tabs){const a=t.target;return void(0===a._tabs.length&&i.removeChild(a.closest("smart-tabs-window")))}if(t.target instanceof Smart.TabsWindow){const a=t.target.closest("smart-splitter-item"),n=a.closest("smart-splitter");n&&(n.removeChild(a),i._removeUnneccessaryItems(n)),t.target.close(),0!==i._items.filter(t=>t.opened).length||i.$.placeholderItem.parentElement||i.$.itemsContainer.appendChild(i.$.placeholderItem)}}_itemsContainerAutoHideHandler(t){const i=this,a=t.detail.button,n=a.closest("smart-tabs-window");if(n){const t=n.closest("smart-splitter-item");if(t){const a=n.closest("smart-splitter");if(a){const o=a.items,l="horizontal"===a.orientation,r=o.indexOf(t)>=o.length/2;l?r?i.autoHideBottom(n):i.autoHideTop(n):r?i.autoHideRight(n):i.autoHideLeft(n)}}}}_itemsContainerMenuHandler(t){const i=this,a=i.$.menu,n=i.getBoundingClientRect(),o=t.detail.button.getBoundingClientRect();a.open(o.left-n.left,o.top-n.top),i._menuOpenButton=t.detail.button}_itemsContainerResizeHandler(){const t=this;t._handleAutoSave(),t.$.fireEvent("stateChange")}_keyDownHandler(t){const i=this;if(!i.disabled&&i.hasAttribute("dragged")&&i._snapFeedback)if(t.preventDefault(),"Control"!==t.key)"Escape"===t.key&&i._cancelDragOperation();else if("advanced"===i.snapMode){for(let t in i._snapFeedback)if(i._snapFeedback[t]instanceof HTMLElement){if("outherSnapElement"==t){const t=i.$.container.children;for(let a=0;a<t.length;a++)-1<t[a].className.indexOf("smart-docking-layout-snap")&&t[a].classList.add("smart-hidden");continue}i._snapFeedback[t].classList.add("smart-hidden")}}else i._snapFeedback.classList.add("smart-hidden")}_keyUpHandler(t){const i=this;if(!i.disabled&&"Control"===t.key&&i.hasAttribute("dragged")&&i._snapFeedback)if(t.preventDefault(),"advanced"===i.snapMode){for(let t in i._snapFeedback)if(i._snapFeedback[t]instanceof HTMLElement){if("outherSnapElement"==t){const t=i.$.container.children;for(let a=0;a<t.length;a++)-1<t[a].className.indexOf("smart-docking-layout-snap")&&t[a].classList.remove("smart-hidden");continue}i._snapFeedback[t].classList.remove("smart-hidden")}i._handleSnapping()}else i._snapFeedback.classList.remove("smart-hidden")}_loadState(t){const i=this;i._createItemsFromArray(t,!0)}_removeAll(t){function i(t){const a=t._items;for(let n=0;n<a.length;n++)a[n].$.hasClass("smart-docking-layout-item-holder")||t.removeChild(a[n])}const a=this;a.$.itemsContainer.removeAll(),i(a.$.horizontalHiddenItemsContainer),i(a.$.verticalHiddenItemsContainer),a._items=[],t||a.$.itemsContainer.appendChild(a.$.placeholderItem)}_removeUnneccessaryItems(t){if(t){const i=this;for(let a;0===t._items.length&&t!==i.$.itemsContainer;)(a=t.closest("smart-splitter-item")).removeChild(t),t=a.closest("smart-splitter"),t.removeChild(a)}}_returnItemToOrigin(t){const i=this;if(t&&i._dragDetails){let a=i._dragDetails._parentInfo;if(a)if("number"==typeof a.position){const n=[].slice.call(t.items);for(let o=0;o<n.length;o++)t.removeChild(n[o]),a.closestItem.insert(a.position,{node:n[o]})}else"object"==typeof a.position?(t.style.top=a.position.top+"px",t.style.left=a.position.left+"px"):a.closestItem?a.closestItem===i.$.itemsContainer?i._autoHide(t,a.position):i._insert(i._items.indexOf(a.closestItem),t,a.position):i.appendChild(t)}}_setAutoHidePaddings(){const t=this,i=t.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],a=t.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-right")[0],n=t.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0],o=t.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-bottom")[0];n&&(n.style.paddingLeft=i?i.offsetWidth+"px":"",n.style.paddingRight=a?a.offsetWidth+"px":""),o&&(o.style.paddingLeft=i?i.offsetWidth+"px":"",o.style.paddingRight=a?a.offsetWidth+"px":"")}_setDockedItemsHeaderButtons(t){let a=["autoHide","close"];if(0<t.headerButtons.length){const n=t.headerButtons;for(let t=0;t<n.length;t++)-1<["collapse","maximize","minimize","pin"].indexOf(n[t])||0>a.indexOf(n[t])&&a.push(n[t])}t.headerButtons=a}_setFloatingItemsHeaderButtons(t){let a=["minimize","maximize","close"],n=["autoHide","dock"];if(0!==t.headerButtons.length){const o=t.headerButtons.slice(0);for(let t=0;t<o.length;t++)0>n.indexOf(o[t])&&a.push(o[t]);t.headerButtons=a}}_setFocusable(){const t=this;if(!t.disabled&&!t.unfocusable){let i=0<t.tabIndex?t.tabIndex:0;t.setAttribute("tabindex",i)}else t.removeAttribute("tabindex")}_setSnappingMarkers(t,i){var a=Math.max;const n=this,o=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset):t.originalEvent.target,l=o.closest&&o.closest("smart-docking-layout");if("advanced"===n.snapMode)return t.ctrlKey?void 0:(n._dragDetails.hoveredItem=o.closest(".smart-docking-layout-snap")?o:n._dragDetails.hoveredItem&&0<n._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length?void 0:n._dragDetails.hoveredItem,n._dragDetails.hoveredTabArea=i?o.closest(".smart-tab-label-container")||i:n._dragDetails.hoveredTabArea,void n._handleSnapping());if(!l||l!==n)return void n._handleSnapping();if(!n._dragDetails.hoveredTabsWindow||n._dragDetails.windowFeedback!==n.$.tabsWindowFeedback&&n._dragDetails.hoveredTabsWindow===n._dragDetails.selectedTabsWindow)return n._dragDetails.hoveredItem=o.closest(".smart-docking-layout-snap")?o:n._dragDetails.hoveredItem&&0<n._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length?void 0:n._dragDetails.hoveredItem,void n._handleSnapping();let r={};if(n._dragDetails.hoveredItem){const t=n._dragDetails.hoveredItem.getBoundingClientRect(),i=n.$.itemsContainer.getBoundingClientRect();r.left=n._dragDetails.hoveredItem?t.left-i.left:0,r.top=n._dragDetails.hoveredItem?t.top-i.top:0}else r.left=r.top=0;const s=n.getBoundingClientRect(),d=n.$.itemsContainer.getBoundingClientRect(),m=a(0,t.pageX-window.pageXOffset-s.left-(d.left-s.left)),c=a(0,t.pageY-window.pageYOffset-s.top-(d.top-s.top));if(n._dragDetails.hoveredTabArea===i)n._dragDetails.hoveredTabArea=o.closest(".smart-tab-label-container"),n._handleSnapping("header");else if(!(n._dragDetails.hoveredItem&&!n._dragDetails.hoveredTabsWindow.autoHide))n._handleSnapping();else if(m<.05*n.$.itemsContainer.offsetWidth&&m<.15*n._dragDetails.hoveredItem.offsetWidth)n._handleSnapping("layout-left",t);else if(m>.95*n.$.itemsContainer.offsetWidth&&m>.85*n._dragDetails.hoveredItem.offsetWidth+n._dragDetails.hoveredItem.offsetLeft)n._handleSnapping("layout-right");else if(c<.05*n.$.itemsContainer.offsetHeight)n._handleSnapping("layout-top");else if(c>.95*n.$.itemsContainer.offsetHeight)n._handleSnapping("layout-bottom");else if(o.closest(".smart-tabs-content-section")){const t=n._dragDetails.hoveredItem.closest("smart-splitter").orientation;m<r.left+.3*n._dragDetails.hoveredTabArea.offsetWidth?n._handleSnapping("horizontal"===t?"inside-left":"left"):m>r.left+.7*n._dragDetails.hoveredTabArea.offsetWidth?n._handleSnapping("horizontal"===t?"inside-right":"right"):c<r.top+n._dragDetails.hoveredTabArea.offsetTop+.5*n._dragDetails.hoveredTabArea.offsetHeight+n._dragDetails.hoveredTabsWindow.$.headerSection.offsetHeight?n._handleSnapping("vertical"===t?"inside-top":"top"):n._handleSnapping("vertical"===t?"inside-bottom":"bottom")}else n._handleSnapping()}_setSplitterBarVisibility(){const t=this,a=t.$.itemsContainer.getElementsByTagName("smart-splitter-bar");for(let n=0;n<a.length;n++)t.hideSplitterBars?a[n].hide():a[n].show()}_validateWindowPosition(t){var i=Math.min,a=Math.max;t.$.addClass("no-transition","");const n=document.scrollingElement||document.documentElement;t.style.top=0<n.scrollTop?(parseFloat(t.style.top)||t.offsetTop)+"px":a(0,i(t.offsetTop,document.documentElement.clientHeight-t.offsetHeight))+"px",t.style.left=0<n.scrollLeft?(parseFloat(t.style.left)||t.offsetTop)+"px":a(0,i(t.offsetLeft,document.documentElement.clientWidth-t.offsetWidth))+"px",requestAnimationFrame(()=>t.$.removeClass("no-transition"))}});